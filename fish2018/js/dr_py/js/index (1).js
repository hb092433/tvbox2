"use strict";var e=require("node:events"),t=require("node:util"),n=require("node:http"),r=require("node:https"),s=require("node:dns"),i=require("node:stream"),o=require("os"),a=require("events"),c=require("fs"),l=require("util"),u=require("path"),p=require("worker_threads"),d=require("module"),h=require("url"),f=require("buffer"),m=require("assert"),g=require("node:async_hooks"),y=require("node:assert"),v=require("node:url"),b=require("node:crypto"),E=require("tty"),_=require("stream"),A=require("crypto"),S=require("dns"),T=require("net"),w=require("tls"),x=require("string_decoder"),k=require("fs/promises"),C=require("http"),I=require("https"),R=require("zlib"),O=require("child_process"),N=require("querystring"),D="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function P(e){return e&&e.__esModule&&{}.hasOwnProperty.call(e,"default")?e.default:e}function L(e){if(e.__esModule)return e;var t=e.default;if("function"==typeof t){var n=function e(){return this instanceof e?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach((function(t){var r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,r.get?r:{enumerable:!0,get:function(){return e[t]}})})),n}var M={exports:{}},B={exports:{}},j={exports:{}};function F(e,t,n){if("function"==typeof e&&(n=t,t=e,e=null),1>n)throw Error("fastqueue concurrency must be equal to or greater than 1");var r,s,i,o=(s=new(r=U),i=s,{get:function(){var e=s;return e.next?s=e.next:(s=new r,i=s),e.next=null,e},release:function(e){i.next=e,i=e}}),a=null,c=null,l=0,u=null,p={push:function(r,s){var i=o.get();i.context=e,i.release=d,i.value=r,i.callback=s||$,i.errorHandler=u,l>=n||p.paused?c?(c.next=i,c=i):(a=i,c=i,p.saturated()):(l++,t.call(e,i.value,i.worked))},drain:$,saturated:$,pause:function(){p.paused=!0},paused:!1,get concurrency(){return n},set concurrency(e){if(1>e)throw Error("fastqueue concurrency must be equal to or greater than 1");if(n=e,!p.paused)for(;a&&n>l;)l++,d()},running:function(){return l},resume:function(){if(p.paused){if(p.paused=!1,null===a)return l++,void d();for(;a&&n>l;)l++,d()}},idle:function(){return 0===l&&0===p.length()},length:function(){for(var e=a,t=0;e;)e=e.next,t++;return t},getQueue:function(){for(var e=a,t=[];e;)t.push(e.value),e=e.next;return t},unshift:function(r,s){var i=o.get();i.context=e,i.release=d,i.value=r,i.callback=s||$,i.errorHandler=u,l>=n||p.paused?a?(i.next=a,a=i):(a=i,c=i,p.saturated()):(l++,t.call(e,i.value,i.worked))},empty:$,kill:function(){a=null,c=null,p.drain=$},killAndDrain:function(){a=null,c=null,p.drain(),p.drain=$},error:function(e){u=e}};return p;function d(r){r&&o.release(r);var s=a;s&&n>=l?p.paused?l--:(c===a&&(c=null),a=s.next,s.next=null,t.call(e,s.value,s.worked),null===c&&p.empty()):0==--l&&p.drain()}}function $(){}function U(){this.value=null,this.callback=$,this.next=null,this.release=$,this.context=null,this.errorHandler=null;var e=this;this.worked=function(t,n){var r=e.callback,s=e.errorHandler,i=e.value;e.value=null,e.callback=$,e.errorHandler&&s(t,i),r.call(e.context,t,n),e.release(e)}}j.exports=F,j.exports.promise=function(e,t,n){"function"==typeof e&&(n=t,t=e,e=null);var r=F(e,(function(e,n){t.call(this,e).then((function(e){n(null,e)}),n)}),n),s=r.push,i=r.unshift;return r.push=function(e){var t=new Promise((function(t,n){s(e,(function(e,r){e?n(e):t(r)}))}));return t.catch($),t},r.unshift=function(e){var t=new Promise((function(t,n){i(e,(function(e,r){e?n(e):t(r)}))}));return t.catch($),t},r.drained=function(){if(r.idle())return new Promise((function(e){e()}));var e=r.drain;return new Promise((function(t){r.drain=function(){e(),t()}}))},r};var H=j.exports,G={exports:{}};const{format:q}=t;function z(){return`${this.name} [${this.code}]: ${this.message}`}function V(e,t,n=500,r=Error){if(!e)throw Error("Fastify error code must not be empty");if(!t)throw Error("Fastify error message must not be empty");function s(...r){if(!new.target)return new s(...r);this.code=e,this.name="FastifyError",this.statusCode=n;const i=r.length-1;-1!==i&&r[i]&&"object"==typeof r[i]&&"cause"in r[i]&&(this.cause=r.pop().cause),this.message=q(t,...r),0!==Error.stackTraceLimit&&Error.captureStackTrace(this,s)}return e=e.toUpperCase(),!n&&(n=void 0),(s.prototype=Object.create(r.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}))[Symbol.toStringTag]="Error",s.prototype.toString=z,s}G.exports=V,G.exports.default=V,G.exports.createError=V;var Y=G.exports;const{createError:K}=Y;var Q={AVV_ERR_EXPOSE_ALREADY_DEFINED:K("AVV_ERR_EXPOSE_ALREADY_DEFINED","'%s' is already defined, specify an expose option for '%s'"),AVV_ERR_ATTRIBUTE_ALREADY_DEFINED:K("AVV_ERR_ATTRIBUTE_ALREADY_DEFINED","'%s' is already defined"),AVV_ERR_CALLBACK_NOT_FN:K("AVV_ERR_CALLBACK_NOT_FN","Callback for '%s' hook is not a function. Received: '%s'"),AVV_ERR_PLUGIN_NOT_VALID:K("AVV_ERR_PLUGIN_NOT_VALID","Plugin must be a function or a promise. Received: '%s'"),AVV_ERR_ROOT_PLG_BOOTED:K("AVV_ERR_ROOT_PLG_BOOTED","Root plugin has already booted"),AVV_ERR_PARENT_PLG_LOADED:K("AVV_ERR_PARENT_PLG_LOADED","Impossible to load '%s' plugin because the parent '%s' was already loaded"),AVV_ERR_READY_TIMEOUT:K("AVV_ERR_READY_TIMEOUT","Plugin did not start in time: '%s'. You may have forgotten to call 'done' function or to resolve a Promise"),AVV_ERR_PLUGIN_EXEC_TIMEOUT:K("AVV_ERR_PLUGIN_EXEC_TIMEOUT","Plugin did not start in time: '%s'. You may have forgotten to call 'done' function or to resolve a Promise")},W={kAvvio:Symbol("avvio.Boot"),kIsOnCloseHandler:Symbol("isOnCloseHandler"),kThenifyDoNotWrap:Symbol("avvio.ThenifyDoNotWrap"),kUntrackNode:Symbol("avvio.TimeTree.untrackNode"),kTrackNode:Symbol("avvio.TimeTree.trackNode"),kGetParent:Symbol("avvio.TimeTree.getParent"),kGetNode:Symbol("avvio.TimeTree.getNode"),kAddNode:Symbol("avvio.TimeTree.addNode"),kPluginMeta:Symbol.for("plugin-meta")};const{kUntrackNode:J,kTrackNode:X,kGetParent:Z,kGetNode:ee,kAddNode:te}=W;function ne(e,t=""){let n=t;const r=e.nodes.length,s=r-1;n+=`${e.label} ${e.diff} ms\n`;for(let i=0;r>i;++i){const r=e.nodes[i];n+=t,n+=i===s?"└─":"├─",n+=0===r.nodes.length?"─ ":"┬ ",n+=ne(r,t+(i===s?"  ":"│ ")).slice(t.length+2)}return n}var re={TimeTree:class{constructor(){this.root=null,this.tableId=new Map,this.tableLabel=new Map}[X](e){this.tableId.set(e.id,e),this.tableLabel.has(e.label)?this.tableLabel.get(e.label).push(e):this.tableLabel.set(e.label,[e])}[J](e){this.tableId.delete(e.id);const t=this.tableLabel.get(e.label);t.pop(),0===t.length&&this.tableLabel.delete(e.label)}[Z](e){if(null===e)return null;if(this.tableLabel.has(e)){const t=this.tableLabel.get(e);return t[t.length-1]}return null}[ee](e){return this.tableId.get(e)}[te](e,t,n){const r=this[Z](e);if(null===r)return this.root={parent:null,id:"root",label:t,nodes:[],start:n,stop:null,diff:-1},this[X](this.root),this.root.id;const s=`${t}-${Math.random()}`,i={parent:e,id:s,label:t,nodes:[],start:n,stop:null,diff:-1};return r.nodes.push(i),this[X](i),s}start(e,t,n=Date.now()){return this[te](e,t,n)}stop(e,t=Date.now()){const n=this[ee](e);n&&(n.stop=t,n.diff=n.stop-n.start||0,this[J](n))}toJSON(){return Object.assign({},this.root)}prettyPrint(){return ne(this.toJSON())}}};const{debuglog:se}=t;var ie={debug:se("avvio")},oe={createPromise:function(){const e={resolve:null,reject:null,promise:null};return e.promise=new Promise(((t,n)=>{e.resolve=t,e.reject=n})),e}};const{kPluginMeta:ae}=W;var ce={getPluginName:function(e,t){return e[ae]&&e[ae].name?e[ae].name:t&&t.name?t.name:e.name?e.name:(""+e).split("\n").slice(0,2).map((e=>e.trim())).join(" -- ")}},le={isPromiseLike:function(e){return null!==e&&"object"==typeof e&&"function"==typeof e.then}};const{EventEmitter:ue}=e,{inherits:pe}=t,{debug:de}=ie,{createPromise:he}=oe,{AVV_ERR_PLUGIN_EXEC_TIMEOUT:fe}=Q,{getPluginName:me}=ce,{isPromiseLike:ge}=le;function ye(e,t,n,r,s){this.queue=e,this.func=t,this.options=n,this.isAfter=r,this.timeout=s,this.started=!1,this.name=me(t,n),this.queue.pause(),this._error=null,this.loaded=!1,this._promise=null,this.startTime=null}function ve(){}pe(ye,ue),ye.prototype.exec=function(e,t){de("exec",this.name),this.server=e;const n=this.func,r=this.name;let s=!1;this.options="function"==typeof this.options?this.options(this.server):this.options;let i=null;const o=e=>{s?de("loading complete",r):(this._error=e,de(e?"exec errored":"exec completed",r),s=!0,i&&clearTimeout(i),t(e))};this.timeout>0&&(de("setting up timeout",r,this.timeout),i=setTimeout((function(){de("timed out",r),i=null;const e=new fe(r);e.fn=n,o(e)}),this.timeout)),this.started=!0,this.startTime=Date.now(),this.emit("start",this.server?this.server.name:null,this.name,Date.now());const a=n(this.server,this.options,o);ge(a)&&(de("exec: resolving promise",r),a.then((()=>process.nextTick(o)),(e=>process.nextTick(o,e))))},ye.prototype.loadedSoFar=function(){if(de("loadedSoFar",this.name),this.loaded)return Promise.resolve();const e=()=>{this.server.after(((e,t)=>{this._error=e,this.queue.pause(),this._promise&&(e?(de("rejecting promise",this.name,e),this._promise.reject(e)):(de("resolving promise",this.name),this._promise.resolve()),this._promise=null),process.nextTick(t,e)})),this.queue.resume()};let t;return this._promise?t=Promise.resolve():(this._promise=he(),t=this._promise.promise,this.server?e():this.on("start",e)),t},ye.prototype.enqueue=function(e,t){de("enqueue",this.name,e.name),this.emit("enqueue",this.server?this.server.name:null,this.name,Date.now()),this.queue.push(e,t)},ye.prototype.finish=function(e,t){de("finish",this.name,e);const n=()=>{this.loaded||(de("loaded",this.name),this.emit("loaded",this.server?this.server.name:null,this.name,Date.now()),this.loaded=!0,t(e))};if(e)return this._promise&&(this._promise.reject(e),this._promise=null),void n();const r=()=>{if(de("check",this.name,this.queue.length(),this.queue.running(),this._promise),0===this.queue.length()&&0===this.queue.running())if(this._promise){const e=()=>{de("wrap"),queueMicrotask(r)};this._promise.resolve(),this._promise.promise.then(e,e),this._promise=null}else n();else de("delayed",this.name),this.queue.drain=()=>{de("drain",this.name),this.queue.drain=ve,queueMicrotask(r)}};queueMicrotask(r),this.queue.resume()};var be={Plugin:ye};const{AVV_ERR_PLUGIN_NOT_VALID:Ee}=Q;var _e={validatePlugin:function(e){if(!e||"function"!=typeof e&&"function"!=typeof e.then)throw new Ee(Array.isArray(e)?"array":null===e?"null":typeof e)}};const{debug:Ae}=ie,{kThenifyDoNotWrap:Se}=W;var Te={thenify:function(){if(this.booted)Ae("thenify returning undefined because we are already booted");else{if(!this[Se])return Ae("thenify"),(e,t)=>this._loadRegistered().then((()=>(this[Se]=!0,e(this._server))),t);this[Se]=!1}}};const{isPromiseLike:we}=le,{kAvvio:xe}=W;var ke={executeWithThenable:function(e,t,n){const r=e.apply(e,t);we(r)&&!r[xe]?r.then((()=>process.nextTick(n)),(e=>process.nextTick(n,e))):n&&process.nextTick(n)}};const Ce=H,Ie=e.EventEmitter,Re=t.inherits,{AVV_ERR_EXPOSE_ALREADY_DEFINED:Oe,AVV_ERR_CALLBACK_NOT_FN:Ne,AVV_ERR_ROOT_PLG_BOOTED:De,AVV_ERR_READY_TIMEOUT:Pe,AVV_ERR_ATTRIBUTE_ALREADY_DEFINED:Le}=Q,{kAvvio:Me,kIsOnCloseHandler:Be}=W,{TimeTree:je}=re,{Plugin:Fe}=be,{debug:$e}=ie,{validatePlugin:Ue}=_e,{isBundledOrTypescriptPlugin:He}={isBundledOrTypescriptPlugin:function(e){return null!==e&&"object"==typeof e&&"function"==typeof e.default}},{isPromiseLike:Ge}=le,{thenify:qe}=Te,{executeWithThenable:ze}=ke;function Ve(e,t,n){if("function"==typeof e&&1===arguments.length&&(n=e,t={},e=null),"function"==typeof t&&(n=t,t={}),(t=t||{}).autostart=!1!==t.autostart,t.timeout=+t.timeout||0,t.expose=t.expose||{},!new.target)return new Ve(e,t,n);this._server=e||this,this._opts=t,e&&this._expose(),this._current=[],this._error=null,this._lastUsed=null,this.setMaxListeners(0),n&&this.once("start",n),this.started=!1,this.booted=!1,this.pluginTree=new je,this._readyQ=Ce(this,Ke,1),this._readyQ.pause(),this._readyQ.drain=()=>{this.emit("start"),this._readyQ.drain=Ye},this._closeQ=Ce(this,We,1),this._closeQ.pause(),this._closeQ.drain=()=>{this.emit("close"),this._closeQ.drain=Ye},this._doStart=null;const r=this;this._root=new Fe(Ce(this,this._loadPluginNextTick,1),(function(e,t,n){r._doStart=n,t.autostart&&r.start()}),t,!1,0),this._trackPluginLoading(this._root),this._loadPlugin(this._root,(e=>{$e("root plugin ready");try{this.emit("preReady"),this._root=null}catch(t){e=e||this._error||t}if(e){if(this._error=e,0===this._readyQ.length())throw e}else this.booted=!0;this._readyQ.resume()}))}function Ye(){}function Ke(e,t){const n=this._server,r=this._error;if(this._error=null,0===e.length)this._error=r,ze(e,[],t);else if(1===e.length)ze(e,[r],t);else if(0===this._opts.timeout){const s=e=>{this._error=e,t(this._error)};2===e.length?e(r,s):e(r,n,s)}else Qe.call(this,e,r,n,t)}function Qe(e,t,n,r){const s=e.name;$e("setting up ready timeout",s,this._opts.timeout);let i=setTimeout((()=>{$e("timed out",s),i=null;const t=new Pe(s);t.fn=e,this._error=t,r(t)}),this._opts.timeout);function o(e){i&&(clearTimeout(i),this._error=e,r(this._error))}2===e.length?e(t,o.bind(this)):e(t,n,o.bind(this))}function We(e,t){const n=this._server,r=e[Be];if(0===e.length||1===e.length){let s;s=e(r?n:this._error),s&&"function"==typeof s.then?($e("resolving close/onClose promise"),s.then((()=>process.nextTick(t)),(e=>process.nextTick(t,e)))):process.nextTick(t)}else 2===e.length?e(r?n:this._error,t):r?e(n,t):e(this._error,n,t)}function Je(e,t){return function(t,n){let r;e?0===e.length?(r=e(),r&&r.then?r.then((function(){process.nextTick(n,t)}),n):process.nextTick(n,t)):1===e.length?(r=e(t),r&&r.then?r.then((function(){process.nextTick(n)}),n):process.nextTick(n)):2===e.length?e(t,n):e(t,this,n):process.nextTick(n)}.bind(t)}Re(Ve,Ie),Ve.prototype.start=function(){return this.started=!0,process.nextTick(this._doStart),this},Ve.prototype.override=function(e,t,n){return e},Ve.prototype[Me]=!0,Ve.prototype.use=function(e,t){return this._lastUsed=this._addPlugin(e,t,!1),this},Ve.prototype._loadRegistered=function(){const e=this._current[0];return!this.started&&!this.booted&&process.nextTick((()=>this._root.queue.resume())),e?e.loadedSoFar():Promise.resolve()},Object.defineProperty(Ve.prototype,"then",{get:qe}),Ve.prototype._addPlugin=function(e,t,n){if(He(e)&&(e=e.default),Ue(e),t=t||{},this.booted)throw new De;const r=this._current[0];let s=this._opts.timeout;if(!r.loaded&&r.timeout>0){const e=Date.now()-r.startTime;s=r.timeout-(e+3)}const i=new Fe(Ce(this,this._loadPluginNextTick,1),e,t,n,s);if(this._trackPluginLoading(i),r.loaded)throw Error(i.name,r.name);return r.enqueue(i,(e=>{e&&(this._error=e)})),i},Ve.prototype._expose=function(){const e=this,t=e._server,{use:n="use",after:r="after",ready:s="ready",onClose:i="onClose",close:o="close"}=this._opts.expose;if(t[n])throw new Oe(n,"use");if(t[n]=function(t,n){return e.use(t,n),this},t[r])throw new Oe(r,"after");if(t[r]=function(t){return"function"!=typeof t?e._loadRegistered():(e.after(Je(t,this)),this)},t[s])throw new Oe(s,"ready");if(t[s]=function(t){if(t&&"function"!=typeof t)throw new Ne(s,typeof t);return e.ready(t?Je(t,this):void 0)},t[i])throw new Oe(i,"onClose");if(t[i]=function(t){if("function"!=typeof t)throw new Ne(i,typeof t);return e.onClose(function(e,t){return function(t,n){let r;0===e.length?(r=e(),r&&r.then?r.then((function(){process.nextTick(n)}),n):process.nextTick(n)):1===e.length?(r=e(this),r&&r.then?r.then((function(){process.nextTick(n)}),n):process.nextTick(n)):e(this,n)}.bind(t)}(t,this)),this},t[o])throw new Oe(o,"close");if(t[o]=function(t){if(t&&"function"!=typeof t)throw new Ne(o,typeof t);return t?(e.close(Je(t,this)),this):e.close()},t.then)throw new Le("then");Object.defineProperty(t,"then",{get:qe.bind(e)}),t[Me]=!0},Ve.prototype.after=function(e){return e?(this._addPlugin(function(t,n,r){Ke.call(this,e,r)}.bind(this),{},!0),this):this._loadRegistered()},Ve.prototype.onClose=function(e){if("function"!=typeof e)throw new Ne("onClose",typeof e);return e[Be]=!0,this._closeQ.unshift(e,(e=>{e&&(this._error=e)})),this},Ve.prototype.close=function(e){let t;if(e){if("function"!=typeof e)throw new Ne("close",typeof e)}else t=new Promise((function(t,n){e=function(e){if(e)return n(e);t()}}));return this.ready((()=>{this._error=null,this._closeQ.push(e),process.nextTick(this._closeQ.resume.bind(this._closeQ))})),t},Ve.prototype.ready=function(e){if(e){if("function"!=typeof e)throw new Ne("ready",typeof e);return this._readyQ.push(e),void queueMicrotask(this.start.bind(this))}return new Promise(((e,t)=>{this._readyQ.push((function(r,s,i){r?t(r):e(n),process.nextTick(i)})),this.start();const n=this._current[0].server}))},Ve.prototype._trackPluginLoading=function(e){const t=this._current[0]?.name||null;e.once("start",((n,r,s)=>{const i=this.pluginTree.start(t||null,r,s);e.once("loaded",((e,t,n)=>{this.pluginTree.stop(i,n)}))}))},Ve.prototype.prettyPrint=function(){return this.pluginTree.prettyPrint()},Ve.prototype.toJSON=function(){return this.pluginTree.toJSON()},Ve.prototype._loadPlugin=function(e,t){const n=this;if(Ge(e.func))return void e.func.then((n=>{"function"==typeof n.default&&(n=n.default),e.func=n,this._loadPlugin(e,t)}),t);const r=n._current[0];if(n._current.unshift(e),n._error&&!e.isAfter)return $e("skipping loading of plugin as instance errored and it is not an after",e.name),void process.nextTick(i);let s=r&&r.server||n._server;if(!e.isAfter)try{s=n.override(s,e.func,e.options)}catch(t){return $e("override errored",e.name),i(t)}function i(r){e.finish(r,(e=>{n._current.shift(),t(e)}))}e.exec(s,i)},Ve.prototype._loadPluginNextTick=function(e,t){process.nextTick(this._loadPlugin.bind(this),e,t)},B.exports=Ve,B.exports.express=function(e){return Ve(e,{expose:{use:"load"}})};var Xe=B.exports,Ze={kAvvioBoot:Symbol("fastify.avvioBoot"),kChildren:Symbol("fastify.children"),kServerBindings:Symbol("fastify.serverBindings"),kBodyLimit:Symbol("fastify.bodyLimit"),kRoutePrefix:Symbol("fastify.routePrefix"),kLogLevel:Symbol("fastify.logLevel"),kLogSerializers:Symbol("fastify.logSerializers"),kHooks:Symbol("fastify.hooks"),kContentTypeParser:Symbol("fastify.contentTypeParser"),kState:Symbol("fastify.state"),kOptions:Symbol("fastify.options"),kDisableRequestLogging:Symbol("fastify.disableRequestLogging"),kPluginNameChain:Symbol("fastify.pluginNameChain"),kRouteContext:Symbol("fastify.context"),kPublicRouteContext:Symbol("fastify.routeOptions"),kGenReqId:Symbol("fastify.genReqId"),kSchemaController:Symbol("fastify.schemaController"),kSchemaHeaders:Symbol("headers-schema"),kSchemaParams:Symbol("params-schema"),kSchemaQuerystring:Symbol("querystring-schema"),kSchemaBody:Symbol("body-schema"),kSchemaResponse:Symbol("response-schema"),kSchemaErrorFormatter:Symbol("fastify.schemaErrorFormatter"),kSchemaVisited:Symbol("fastify.schemas.visited"),kRequest:Symbol("fastify.Request"),kRequestPayloadStream:Symbol("fastify.RequestPayloadStream"),kRequestAcceptVersion:Symbol("fastify.RequestAcceptVersion"),kRequestCacheValidateFns:Symbol("fastify.request.cache.validateFns"),kRequestOriginalUrl:Symbol("fastify.request.originalUrl"),kFourOhFour:Symbol("fastify.404"),kCanSetNotFoundHandler:Symbol("fastify.canSetNotFoundHandler"),kFourOhFourLevelInstance:Symbol("fastify.404LogLevelInstance"),kFourOhFourContext:Symbol("fastify.404ContextKey"),kDefaultJsonParse:Symbol("fastify.defaultJSONParse"),kReply:Symbol("fastify.Reply"),kReplySerializer:Symbol("fastify.reply.serializer"),kReplyIsError:Symbol("fastify.reply.isError"),kReplyHeaders:Symbol("fastify.reply.headers"),kReplyTrailers:Symbol("fastify.reply.trailers"),kReplyHasStatusCode:Symbol("fastify.reply.hasStatusCode"),kReplyHijacked:Symbol("fastify.reply.hijacked"),kReplyStartTime:Symbol("fastify.reply.startTime"),kReplyNextErrorHandler:Symbol("fastify.reply.nextErrorHandler"),kReplyEndTime:Symbol("fastify.reply.endTime"),kReplyErrorHandlerCalled:Symbol("fastify.reply.errorHandlerCalled"),kReplyIsRunningOnErrorHook:Symbol("fastify.reply.isRunningOnErrorHook"),kReplySerializerDefault:Symbol("fastify.replySerializerDefault"),kReplyCacheSerializeFns:Symbol("fastify.reply.cache.serializeFns"),kTestInternals:Symbol("fastify.testInternals"),kErrorHandler:Symbol("fastify.errorHandler"),kChildLoggerFactory:Symbol("fastify.childLoggerFactory"),kHasBeenDecorated:Symbol("fastify.hasBeenDecorated"),kKeepAliveConnections:Symbol("fastify.keepAliveConnections"),kRouteByFastify:Symbol("fastify.routeByFastify")},et={},tt={exports:{}};const{format:nt}=t;function rt({name:e,code:t,message:n,unlimited:r=!1}={}){if(!e)throw Error("Warning name must not be empty");if(!t)throw Error("Warning code must not be empty");if(!n)throw Error("Warning message must not be empty");if("boolean"!=typeof r)throw Error("Warning opts.unlimited must be a boolean");t=t.toUpperCase();let s={[e]:function(e,t,n){!0===i.emitted&&!0!==i.unlimited||(i.emitted=!0,process.emitWarning(i.format(e,t,n),i.name,i.code))}};r&&(s={[e]:function(e,t,n){i.emitted=!0,process.emitWarning(i.format(e,t,n),i.name,i.code)}});const i=s[e];return i.emitted=!1,i.message=n,i.unlimited=r,i.code=t,i.format=function(e,t,r){let s;return s=e&&t&&r?nt(n,e,t,r):e&&t?nt(n,e,t):e?nt(n,e):n,s},i}const st={createWarning:rt,createDeprecation:function(e){return rt({...e,name:"DeprecationWarning"})}};tt.exports=st,tt.exports.default=st,tt.exports.processWarning=st;var it=tt.exports;const{createDeprecation:ot,createWarning:at}=it;var ct={FSTDEP005:ot({code:"FSTDEP005",message:'You are accessing the deprecated "request.connection" property. Use "request.socket" instead.'}),FSTDEP006:ot({code:"FSTDEP006",message:"You are decorating Request/Reply with a reference type. This reference is shared amongst all requests. Use onRequest hook instead. Property: %s"}),FSTDEP007:ot({code:"FSTDEP007",message:'You are trying to set a HEAD route using "exposeHeadRoute" route flag when a sibling route is already set. See documentation for more info.'}),FSTDEP008:ot({code:"FSTDEP008",message:'You are using route constraints via the route { version: "..." } option, use { constraints: { version: "..." } } option instead.'}),FSTDEP009:ot({code:"FSTDEP009",message:'You are using a custom route versioning strategy via the server { versioning: "..." } option, use { constraints: { version: "..." } } option instead.'}),FSTDEP010:ot({code:"FSTDEP010",message:'Modifying the "reply.sent" property is deprecated. Use the "reply.hijack()" method instead.'}),FSTDEP011:ot({code:"FSTDEP011",message:'Variadic listen method is deprecated. Please use ".listen(optionsObject)" instead. The variadic signature will be removed in `fastify@5`.'}),FSTDEP012:ot({code:"FSTDEP012",message:'request.context property access is deprecated. Please use "request.routeOptions.config" or "request.routeOptions.schema" instead for accessing Route settings. The "request.context" will be removed in `fastify@5`.'}),FSTDEP013:ot({code:"FSTDEP013",message:'Direct return of "trailers" function is deprecated. Please use "callback" or "async-await" for return value. The support of direct return will removed in `fastify@5`.'}),FSTDEP014:ot({code:"FSTDEP014",message:"You are trying to set/access the default route. This property is deprecated. Please, use setNotFoundHandler if you want to custom a 404 handler or the wildcard (*) to match all routes."}),FSTDEP015:ot({code:"FSTDEP015",message:'You are accessing the deprecated "request.routeSchema" property. Use "request.routeOptions.schema" instead. Property "req.routeSchema" will be removed in `fastify@5`.'}),FSTDEP016:ot({code:"FSTDEP016",message:'You are accessing the deprecated "request.routeConfig" property. Use "request.routeOptions.config" instead. Property "req.routeConfig" will be removed in `fastify@5`.'}),FSTDEP017:ot({code:"FSTDEP017",message:'You are accessing the deprecated "request.routerPath" property. Use "request.routeOptions.url" instead. Property "req.routerPath" will be removed in `fastify@5`.'}),FSTDEP018:ot({code:"FSTDEP018",message:'You are accessing the deprecated "request.routerMethod" property. Use "request.routeOptions.method" instead. Property "req.routerMethod" will be removed in `fastify@5`.'}),FSTDEP019:ot({code:"FSTDEP019",message:'reply.context property access is deprecated. Please use "request.routeOptions.config" or "request.routeOptions.schema" instead for accessing Route settings. The "reply.context" will be removed in `fastify@5`.'}),FSTDEP020:ot({code:"FSTDEP020",message:'You are using the deprecated "reply.getResponseTime()" method. Use the "reply.elapsedTime" property instead. Method "reply.getResponseTime()" will be removed in `fastify@5`.'}),FSTDEP021:ot({code:"FSTDEP021",message:"The `reply.redirect()` method has a new signature: `reply.redirect(url: string, code?: number)`. It will be enforced in `fastify@v5`"}),FSTWRN001:at({name:"FastifyWarning",code:"FSTWRN001",message:"The %s schema for %s: %s is missing. This may indicate the schema is not well specified.",unlimited:!0}),FSTWRN002:at({name:"FastifyWarning",code:"FSTWRN002",message:"The %s plugin being registered mixes async and callback styles, which will result in an error in `fastify@5`",unlimited:!0})},lt={exports:{}};const ut=Y,pt={FST_ERR_NOT_FOUND:ut("FST_ERR_NOT_FOUND","Not Found",404),FST_ERR_OPTIONS_NOT_OBJ:ut("FST_ERR_OPTIONS_NOT_OBJ","Options must be an object",500,TypeError),FST_ERR_QSP_NOT_FN:ut("FST_ERR_QSP_NOT_FN","querystringParser option should be a function, instead got '%s'",500,TypeError),FST_ERR_SCHEMA_CONTROLLER_BUCKET_OPT_NOT_FN:ut("FST_ERR_SCHEMA_CONTROLLER_BUCKET_OPT_NOT_FN","schemaController.bucket option should be a function, instead got '%s'",500,TypeError),FST_ERR_SCHEMA_ERROR_FORMATTER_NOT_FN:ut("FST_ERR_SCHEMA_ERROR_FORMATTER_NOT_FN","schemaErrorFormatter option should be a non async function. Instead got '%s'.",500,TypeError),FST_ERR_AJV_CUSTOM_OPTIONS_OPT_NOT_OBJ:ut("FST_ERR_AJV_CUSTOM_OPTIONS_OPT_NOT_OBJ","ajv.customOptions option should be an object, instead got '%s'",500,TypeError),FST_ERR_AJV_CUSTOM_OPTIONS_OPT_NOT_ARR:ut("FST_ERR_AJV_CUSTOM_OPTIONS_OPT_NOT_ARR","ajv.plugins option should be an array, instead got '%s'",500,TypeError),FST_ERR_VERSION_CONSTRAINT_NOT_STR:ut("FST_ERR_VERSION_CONSTRAINT_NOT_STR","Version constraint should be a string.",500,TypeError),FST_ERR_VALIDATION:ut("FST_ERR_VALIDATION","%s",400),FST_ERR_LISTEN_OPTIONS_INVALID:ut("FST_ERR_LISTEN_OPTIONS_INVALID","Invalid listen options: '%s'",500,TypeError),FST_ERR_ERROR_HANDLER_NOT_FN:ut("FST_ERR_ERROR_HANDLER_NOT_FN","Error Handler must be a function",500,TypeError),FST_ERR_CTP_ALREADY_PRESENT:ut("FST_ERR_CTP_ALREADY_PRESENT","Content type parser '%s' already present."),FST_ERR_CTP_INVALID_TYPE:ut("FST_ERR_CTP_INVALID_TYPE","The content type should be a string or a RegExp",500,TypeError),FST_ERR_CTP_EMPTY_TYPE:ut("FST_ERR_CTP_EMPTY_TYPE","The content type cannot be an empty string",500,TypeError),FST_ERR_CTP_INVALID_HANDLER:ut("FST_ERR_CTP_INVALID_HANDLER","The content type handler should be a function",500,TypeError),FST_ERR_CTP_INVALID_PARSE_TYPE:ut("FST_ERR_CTP_INVALID_PARSE_TYPE","The body parser can only parse your data as 'string' or 'buffer', you asked '%s' which is not supported.",500,TypeError),FST_ERR_CTP_BODY_TOO_LARGE:ut("FST_ERR_CTP_BODY_TOO_LARGE","Request body is too large",413,RangeError),FST_ERR_CTP_INVALID_MEDIA_TYPE:ut("FST_ERR_CTP_INVALID_MEDIA_TYPE","Unsupported Media Type: %s",415),FST_ERR_CTP_INVALID_CONTENT_LENGTH:ut("FST_ERR_CTP_INVALID_CONTENT_LENGTH","Request body size did not match Content-Length",400,RangeError),FST_ERR_CTP_EMPTY_JSON_BODY:ut("FST_ERR_CTP_EMPTY_JSON_BODY","Body cannot be empty when content-type is set to 'application/json'",400),FST_ERR_CTP_INSTANCE_ALREADY_STARTED:ut("FST_ERR_CTP_INSTANCE_ALREADY_STARTED",'Cannot call "%s" when fastify instance is already started!',400),FST_ERR_DEC_ALREADY_PRESENT:ut("FST_ERR_DEC_ALREADY_PRESENT","The decorator '%s' has already been added!"),FST_ERR_DEC_DEPENDENCY_INVALID_TYPE:ut("FST_ERR_DEC_DEPENDENCY_INVALID_TYPE","The dependencies of decorator '%s' must be of type Array.",500,TypeError),FST_ERR_DEC_MISSING_DEPENDENCY:ut("FST_ERR_DEC_MISSING_DEPENDENCY","The decorator is missing dependency '%s'."),FST_ERR_DEC_AFTER_START:ut("FST_ERR_DEC_AFTER_START","The decorator '%s' has been added after start!"),FST_ERR_HOOK_INVALID_TYPE:ut("FST_ERR_HOOK_INVALID_TYPE","The hook name must be a string",500,TypeError),FST_ERR_HOOK_INVALID_HANDLER:ut("FST_ERR_HOOK_INVALID_HANDLER","%s hook should be a function, instead got %s",500,TypeError),FST_ERR_HOOK_INVALID_ASYNC_HANDLER:ut("FST_ERR_HOOK_INVALID_ASYNC_HANDLER","Async function has too many arguments. Async hooks should not use the 'done' argument.",500,TypeError),FST_ERR_HOOK_NOT_SUPPORTED:ut("FST_ERR_HOOK_NOT_SUPPORTED","%s hook not supported!",500,TypeError),FST_ERR_MISSING_MIDDLEWARE:ut("FST_ERR_MISSING_MIDDLEWARE","You must register a plugin for handling middlewares, visit fastify.dev/docs/latest/Reference/Middleware/ for more info.",500),FST_ERR_HOOK_TIMEOUT:ut("FST_ERR_HOOK_TIMEOUT","A callback for '%s' hook timed out. You may have forgotten to call 'done' function or to resolve a Promise"),FST_ERR_LOG_INVALID_DESTINATION:ut("FST_ERR_LOG_INVALID_DESTINATION","Cannot specify both logger.stream and logger.file options"),FST_ERR_LOG_INVALID_LOGGER:ut("FST_ERR_LOG_INVALID_LOGGER","Invalid logger object provided. The logger instance should have these functions(s): '%s'.",500,TypeError),FST_ERR_REP_INVALID_PAYLOAD_TYPE:ut("FST_ERR_REP_INVALID_PAYLOAD_TYPE","Attempted to send payload of invalid type '%s'. Expected a string or Buffer.",500,TypeError),FST_ERR_REP_RESPONSE_BODY_CONSUMED:ut("FST_ERR_REP_RESPONSE_BODY_CONSUMED","Response.body is already consumed."),FST_ERR_REP_ALREADY_SENT:ut("FST_ERR_REP_ALREADY_SENT",'Reply was already sent, did you forget to "return reply" in "%s" (%s)?'),FST_ERR_REP_SENT_VALUE:ut("FST_ERR_REP_SENT_VALUE","The only possible value for reply.sent is true.",500,TypeError),FST_ERR_SEND_INSIDE_ONERR:ut("FST_ERR_SEND_INSIDE_ONERR","You cannot use `send` inside the `onError` hook"),FST_ERR_SEND_UNDEFINED_ERR:ut("FST_ERR_SEND_UNDEFINED_ERR","Undefined error has occurred"),FST_ERR_BAD_STATUS_CODE:ut("FST_ERR_BAD_STATUS_CODE","Called reply with an invalid status code: %s"),FST_ERR_BAD_TRAILER_NAME:ut("FST_ERR_BAD_TRAILER_NAME","Called reply.trailer with an invalid header name: %s"),FST_ERR_BAD_TRAILER_VALUE:ut("FST_ERR_BAD_TRAILER_VALUE","Called reply.trailer('%s', fn) with an invalid type: %s. Expected a function."),FST_ERR_FAILED_ERROR_SERIALIZATION:ut("FST_ERR_FAILED_ERROR_SERIALIZATION","Failed to serialize an error. Error: %s. Original error: %s"),FST_ERR_MISSING_SERIALIZATION_FN:ut("FST_ERR_MISSING_SERIALIZATION_FN",'Missing serialization function. Key "%s"'),FST_ERR_MISSING_CONTENTTYPE_SERIALIZATION_FN:ut("FST_ERR_MISSING_CONTENTTYPE_SERIALIZATION_FN",'Missing serialization function. Key "%s:%s"'),FST_ERR_REQ_INVALID_VALIDATION_INVOCATION:ut("FST_ERR_REQ_INVALID_VALIDATION_INVOCATION",'Invalid validation invocation. Missing validation function for HTTP part "%s" nor schema provided.'),FST_ERR_SCH_MISSING_ID:ut("FST_ERR_SCH_MISSING_ID","Missing schema $id property"),FST_ERR_SCH_ALREADY_PRESENT:ut("FST_ERR_SCH_ALREADY_PRESENT","Schema with id '%s' already declared!"),FST_ERR_SCH_CONTENT_MISSING_SCHEMA:ut("FST_ERR_SCH_CONTENT_MISSING_SCHEMA","Schema is missing for the content type '%s'"),FST_ERR_SCH_DUPLICATE:ut("FST_ERR_SCH_DUPLICATE","Schema with '%s' already present!"),FST_ERR_SCH_VALIDATION_BUILD:ut("FST_ERR_SCH_VALIDATION_BUILD","Failed building the validation schema for %s: %s, due to error %s"),FST_ERR_SCH_SERIALIZATION_BUILD:ut("FST_ERR_SCH_SERIALIZATION_BUILD","Failed building the serialization schema for %s: %s, due to error %s"),FST_ERR_SCH_RESPONSE_SCHEMA_NOT_NESTED_2XX:ut("FST_ERR_SCH_RESPONSE_SCHEMA_NOT_NESTED_2XX",'response schemas should be nested under a valid status code, e.g { 2xx: { type: "object" } }'),FST_ERR_HTTP2_INVALID_VERSION:ut("FST_ERR_HTTP2_INVALID_VERSION","HTTP2 is available only from node >= 8.8.1"),FST_ERR_INIT_OPTS_INVALID:ut("FST_ERR_INIT_OPTS_INVALID","Invalid initialization options: '%s'"),FST_ERR_FORCE_CLOSE_CONNECTIONS_IDLE_NOT_AVAILABLE:ut("FST_ERR_FORCE_CLOSE_CONNECTIONS_IDLE_NOT_AVAILABLE","Cannot set forceCloseConnections to 'idle' as your HTTP server does not support closeIdleConnections method"),FST_ERR_DUPLICATED_ROUTE:ut("FST_ERR_DUPLICATED_ROUTE","Method '%s' already declared for route '%s'"),FST_ERR_BAD_URL:ut("FST_ERR_BAD_URL","'%s' is not a valid url component",400,URIError),FST_ERR_ASYNC_CONSTRAINT:ut("FST_ERR_ASYNC_CONSTRAINT","Unexpected error from async constraint",500),FST_ERR_DEFAULT_ROUTE_INVALID_TYPE:ut("FST_ERR_DEFAULT_ROUTE_INVALID_TYPE","The defaultRoute type should be a function",500,TypeError),FST_ERR_INVALID_URL:ut("FST_ERR_INVALID_URL","URL must be a string. Received '%s'",400,TypeError),FST_ERR_ROUTE_OPTIONS_NOT_OBJ:ut("FST_ERR_ROUTE_OPTIONS_NOT_OBJ",'Options for "%s:%s" route must be an object',500,TypeError),FST_ERR_ROUTE_DUPLICATED_HANDLER:ut("FST_ERR_ROUTE_DUPLICATED_HANDLER",'Duplicate handler for "%s:%s" route is not allowed!',500),FST_ERR_ROUTE_HANDLER_NOT_FN:ut("FST_ERR_ROUTE_HANDLER_NOT_FN","Error Handler for %s:%s route, if defined, must be a function",500,TypeError),FST_ERR_ROUTE_MISSING_HANDLER:ut("FST_ERR_ROUTE_MISSING_HANDLER",'Missing handler function for "%s:%s" route.',500),FST_ERR_ROUTE_METHOD_INVALID:ut("FST_ERR_ROUTE_METHOD_INVALID","Provided method is invalid!",500,TypeError),FST_ERR_ROUTE_METHOD_NOT_SUPPORTED:ut("FST_ERR_ROUTE_METHOD_NOT_SUPPORTED","%s method is not supported.",500),FST_ERR_ROUTE_BODY_VALIDATION_SCHEMA_NOT_SUPPORTED:ut("FST_ERR_ROUTE_BODY_VALIDATION_SCHEMA_NOT_SUPPORTED","Body validation schema for %s:%s route is not supported!",500),FST_ERR_ROUTE_BODY_LIMIT_OPTION_NOT_INT:ut("FST_ERR_ROUTE_BODY_LIMIT_OPTION_NOT_INT","'bodyLimit' option must be an integer > 0. Got '%s'",500,TypeError),FST_ERR_ROUTE_REWRITE_NOT_STR:ut("FST_ERR_ROUTE_REWRITE_NOT_STR",'Rewrite url for "%s" needs to be of type "string" but received "%s"',500,TypeError),FST_ERR_REOPENED_CLOSE_SERVER:ut("FST_ERR_REOPENED_CLOSE_SERVER","Fastify has already been closed and cannot be reopened"),FST_ERR_REOPENED_SERVER:ut("FST_ERR_REOPENED_SERVER","Fastify is already listening"),FST_ERR_INSTANCE_ALREADY_LISTENING:ut("FST_ERR_INSTANCE_ALREADY_LISTENING","Fastify instance is already listening. %s"),FST_ERR_PLUGIN_VERSION_MISMATCH:ut("FST_ERR_PLUGIN_VERSION_MISMATCH","fastify-plugin: %s - expected '%s' fastify version, '%s' is installed"),FST_ERR_PLUGIN_NOT_PRESENT_IN_INSTANCE:ut("FST_ERR_PLUGIN_NOT_PRESENT_IN_INSTANCE","The decorator '%s'%s is not present in %s"),FST_ERR_PLUGIN_CALLBACK_NOT_FN:ut("FST_ERR_PLUGIN_CALLBACK_NOT_FN","fastify-plugin: %s",500,TypeError),FST_ERR_PLUGIN_NOT_VALID:ut("FST_ERR_PLUGIN_NOT_VALID","fastify-plugin: %s"),FST_ERR_ROOT_PLG_BOOTED:ut("FST_ERR_ROOT_PLG_BOOTED","fastify-plugin: %s"),FST_ERR_PARENT_PLUGIN_BOOTED:ut("FST_ERR_PARENT_PLUGIN_BOOTED","fastify-plugin: %s"),FST_ERR_PLUGIN_TIMEOUT:ut("FST_ERR_PLUGIN_TIMEOUT","fastify-plugin: %s")};lt.exports=pt,lt.exports.appendStackTrace=function(e,t){return t.cause=e,t},lt.exports.AVVIO_ERRORS_MAP={AVV_ERR_CALLBACK_NOT_FN:pt.FST_ERR_PLUGIN_CALLBACK_NOT_FN,AVV_ERR_PLUGIN_NOT_VALID:pt.FST_ERR_PLUGIN_NOT_VALID,AVV_ERR_ROOT_PLG_BOOTED:pt.FST_ERR_ROOT_PLG_BOOTED,AVV_ERR_PARENT_PLG_LOADED:pt.FST_ERR_PARENT_PLUGIN_BOOTED,AVV_ERR_READY_TIMEOUT:pt.FST_ERR_PLUGIN_TIMEOUT,AVV_ERR_PLUGIN_EXEC_TIMEOUT:pt.FST_ERR_PLUGIN_TIMEOUT};var dt=lt.exports;const ht=["onTimeout","onRequest","preParsing","preValidation","preSerialization","preHandler","onSend","onResponse","onError","onRequestAbort"],ft=ht.concat(["onRoute","onRegister","onReady","onListen","preClose","onClose"]),{FST_ERR_HOOK_INVALID_TYPE:mt,FST_ERR_HOOK_INVALID_HANDLER:gt,FST_ERR_SEND_UNDEFINED_ERR:yt,FST_ERR_HOOK_TIMEOUT:vt,FST_ERR_HOOK_NOT_SUPPORTED:bt,AVVIO_ERRORS_MAP:Et,appendStackTrace:_t}=dt,{kChildren:At,kHooks:St,kRequestPayloadStream:Tt}=Ze;function wt(){this.onRequest=[],this.preParsing=[],this.preValidation=[],this.preSerialization=[],this.preHandler=[],this.onResponse=[],this.onSend=[],this.onError=[],this.onRoute=[],this.onRegister=[],this.onReady=[],this.onListen=[],this.onTimeout=[],this.onRequestAbort=[],this.preClose=[]}function xt(e){return function(t,n,r,s){let i=0;function o(l){if(l||i===t.length)return void s(l,n,r);let u;try{u=e(t[i++],n,r,o)}catch(e){return void s(e,n,r)}u&&"function"==typeof u.then&&u.then(a,c)}function a(){o()}function c(e){e||(e=new yt),s(e,n,r)}o()}}(wt.prototype=Object.create(null)).validate=function(e,t){if("string"!=typeof e)throw new mt;if(!1===Array.isArray(this[e]))throw new bt(e);if("function"!=typeof t)throw new gt(e,{}.toString.call(t))},wt.prototype.add=function(e,t){this.validate(e,t),this[e].push(t)};const kt=xt((function(e,t,n,r){return e(t,n,r)})),Ct=xt(Dt),It=xt(Dt),Rt=xt(Dt),Ot=xt(Dt);function Nt(e,t,n,r,s){let i=0;function o(l,u){if(l)return void s(l,t,n,r);if(void 0!==u&&(r=u),i===e.length)return void s(null,t,n,r);let p;try{p=e[i++](t,n,r,o)}catch(e){return void s(e,t,n)}p&&"function"==typeof p.then&&p.then(a,c)}function a(e){o(null,e)}function c(e){e||(e=new yt),s(e,t,n,r)}o()}function Dt(e,t,n,r){if(!0!==n.sent)return e(t,n,r)}var Pt={Hooks:wt,buildHooks:function(e){const t=new wt;return t.onRequest=e.onRequest.slice(),t.preParsing=e.preParsing.slice(),t.preValidation=e.preValidation.slice(),t.preSerialization=e.preSerialization.slice(),t.preHandler=e.preHandler.slice(),t.onSend=e.onSend.slice(),t.onResponse=e.onResponse.slice(),t.onError=e.onError.slice(),t.onRoute=e.onRoute.slice(),t.onRegister=e.onRegister.slice(),t.onTimeout=e.onTimeout.slice(),t.onRequestAbort=e.onRequestAbort.slice(),t.onReady=[],t.onListen=[],t.preClose=[],t},hookRunnerGenerator:xt,preParsingHookRunner:function(e,t,n,r){let s=0;function i(c,l){if(n.sent)return;if(void 0!==l&&(t[Tt]=l),c||s===e.length)return void r(c,t,n);let u;try{u=e[s++](t,n,t[Tt],i)}catch(e){return void r(e,t,n)}u&&"function"==typeof u.then&&u.then(o,a)}function o(e){i(null,e)}function a(e){e||(e=new yt),r(e,t,n)}i()},onResponseHookRunner:kt,onSendHookRunner:Nt,preSerializationHookRunner:Nt,onRequestAbortHookRunner:function(e,t,n){let r=0;function s(a){if(a||r===e.length)return void n(a,t);let c;try{c=e[r++](t,s)}catch(e){return void n(e,t)}c&&"function"==typeof c.then&&c.then(i,o)}function i(){s()}function o(e){e||(e=new yt),n(e,t)}s()},hookIterator:Dt,hookRunnerApplication:function e(t,n,r,s){const i=r[St][t];let o=0,a=0;function c(e){if(e)return e="AVV_ERR_READY_TIMEOUT"===e.code?_t(e,new vt(t)):null!=Et[e.code]?_t(e,new Et[e.code](e.message)):e,void s(e);s()}!function s(l){if(l)c(l);else if(o!==i.length||a!==r[At].length)if(o===i.length&&r[At].length>a){const i=r[At][a++];e(t,n,i,s)}else n(function(e,t){return function(n,r){if(n)r(n);else if(1!==e.length){try{const n=e.call(t);if(n&&"function"==typeof n.then)return void n.then(r,r)}catch(e){n=e}r(n)}else try{e.call(t,r)}catch(e){r(e)}}}(i[o++],r)),s();else 0===o&&0===a?c():n((function(e,t){c(e),t(e)}))}()},onListenHookRunner:function e(t){const n=t[St].onListen,r=n.length;let s=0,i=0;!function o(a){if(a&&t.log.error(a),s!==r)!async function(e,t,n){if(1!==e.length)try{const r=e.call(t);if(r&&"function"==typeof r.then)return void r.then(n,n);n()}catch(e){n(e)}else try{e.call(t,n)}catch(e){n(e)}}(n[s++],t,o);else for(;t[At].length>i;)e(t[At][i++])}()},preHandlerHookRunner:It,preValidationHookRunner:Ct,onRequestHookRunner:Ot,onTimeoutHookRunner:Rt,lifecycleHooks:ht,supportedHooks:ft};const Lt=n,Mt=r,Bt=s,{FSTDEP011:jt}=ct,{kState:Ft,kOptions:$t,kServerBindings:Ut}=Ze,{onListenHookRunner:Ht}=Pt,{FST_ERR_HTTP2_INVALID_VERSION:Gt,FST_ERR_REOPENED_CLOSE_SERVER:qt,FST_ERR_REOPENED_SERVER:zt,FST_ERR_LISTEN_OPTIONS_INVALID:Vt}=dt;function Yt(e){return"Server listening at "+e}function Kt(e,t,n,r,s){this[Ft].listening=!1,Bt.lookup(r.host,{all:!0},((i,o)=>{if(i)return void s();let a=0,c=0;if(!e.listening||!n.serverFactory){const i=e.address();for(const l of o)if(l.address!==i.address){a++;const o=Object.assign({},r,{host:l.address,port:i.port,cb:e=>{c++,e||this[Ut].push(u),c===a&&s()}}),u=Jt(n,t),p=()=>{u.close((()=>{})),"idle"===n.forceCloseConnections?u.closeIdleConnections():"function"==typeof u.closeAllConnections&&n.forceCloseConnections&&u.closeAllConnections()};u.on("upgrade",e.emit.bind(e,"upgrade")),e.on("unref",p),e.on("close",p),e.on("error",p),this[Ft].listening=!1,Qt.call(this,u,o)()}}if(0===a)return void s();const l=e.unref;e.unref=function(){l.call(e),e.emit("unref")}}))}function Qt(e,t){const n=r=>{if(e.removeListener("error",n),e.removeListener("listening",n),r)this[Ft].listening=!1,t.cb(r,null);else{const n=Zt.call(this,e,t.listenTextResolver||Yt);t.cb(null,n)}};return r=>null!=r?t.cb(r):this[Ft].listening&&this[Ft].closing?t.cb(new qt,null):this[Ft].listening?t.cb(new zt,null):(e.once("error",n),void(this[Ft].closing||(e.once("listening",n),e.listen(t),this[Ft].listening=!0)))}function Wt(e,t){return this[Ft].listening&&this[Ft].closing?Promise.reject(new qt):this[Ft].listening?Promise.reject(new zt):this.ready().then((()=>{let n,r;function s(){e.removeListener("error",n),e.removeListener("listening",r)}const i=new Promise(((t,r)=>{n=e=>{s(),this[Ft].listening=!1,r(e)},e.once("error",n)})),o=new Promise(((n,i)=>{r=()=>{s(),this[Ft].listening=!0,n(Zt.call(this,e,t.listenTextResolver||Yt))},e.once("listening",r)}));return e.listen(t),Promise.race([i,o])}))}function Jt(e,t){let n=null;const r=!0===e.https?{}:e.https;var s;return e.serverFactory?n=e.serverFactory(t,e):e.http2?(n="object"==typeof r?en().createSecureServer(r,t):en().createServer(t),n.on("session",(s=e.http2SessionTimeout,function(e){e.setTimeout(s,tn)}))):(n=r?Mt.createServer(r,t):Lt.createServer(e.http,t),n.keepAliveTimeout=e.keepAliveTimeout,n.requestTimeout=e.requestTimeout,e.maxRequestsPerSocket>0&&(n.maxRequestsPerSocket=e.maxRequestsPerSocket)),e.serverFactory||n.setTimeout(e.connectionTimeout),n}function Xt(e){if(0===e.length)return{port:0,host:"localhost"};const t={cb:"function"==typeof e[e.length-1]?e.pop():void 0},n=e[0],r=e.length,s=e[r-1];return"string"==typeof n&&isNaN(n)?(t.path=n,t.backlog=r>1?s:void 0):(t.port=r>=1&&Number.isInteger(n)?n:function(e){const t=+e;return 0>t||Number.isNaN(t)||!Number.isInteger(t)?0:t}(n),t.host=r>=2&&e[1]?e[1]:"localhost",t.backlog=3>r?void 0:e[2]),t}function Zt(e,t){let n=e.address();const r="string"==typeof n;r||(n=-1===n.address.indexOf(":")?n.address+":"+n.port:"["+n.address+"]:"+n.port),n=(r?"":"http"+(this[$t].https?"s":"")+"://")+n;const s=t(n);return this.log.info(s),n}function en(){try{return require("node:http2")}catch(e){throw new Gt}}function tn(){this.close()}et.createServer=function(e,t){const n=Jt(e,t);return{server:n,listen:function(r,...s){let i=s.slice(-1).pop();const o={}.toString.call(arguments[0]);if(0===arguments.length?r=Xt([]):arguments.length>0&&"[object Object]"!==o&&"[object Function]"!==o?(jt(),r=Xt(Array.from(arguments)),i=r.cb):s.length>1?(jt(),Object.assign(r,Xt([...r.path?[r.path]:[r.port??0,r.host??"localhost"],...s]))):r.cb=i,r.signal){if("function"!=typeof r.signal.on&&"function"!=typeof r.signal.addEventListener)throw new Vt("Invalid options.signal");r.signal.aborted?this.close():r.signal.addEventListener("abort",(()=>{this.close()}),{once:!0})}let a;if(a=null==r.path?r.host??"localhost":r.host,!1==={}.hasOwnProperty.call(r,"host")&&(r.host=a),r.cb="localhost"===a?(s,o)=>{s?i(s,o):Kt.call(this,n,t,e,r,(()=>{this[Ft].listening=!0,i(null,o),Ht(this)}))}:(e,t)=>{e?i(e,t):(this[Ft].listening=!0,i(null,t),Ht(this))},void 0===i)return Wt.call(this,n,r).then((s=>new Promise(((i,o)=>{"localhost"===a?Kt.call(this,n,t,e,r,(()=>{this[Ft].listening=!0,i(s),Ht(this)})):(i(s),Ht(this))}))));this.ready(Qt.call(this,n,r))}}},et.compileValidateHTTPVersion=function(e){let t=!1;const n=new Map;return e.serverFactory&&(t=!0),e.http2?(n.set("2.0",!0),e.https&&!0===e.https.allowHTTP1&&(n.set("1.1",!0),n.set("1.0",!0))):(n.set("1.1",!0),n.set("1.0",!0)),function(e){return t||n.has(e)}};var nn={exports:{}},rn={exports:{}};const{kSchemaHeaders:sn,kSchemaParams:on,kSchemaQuerystring:an,kSchemaBody:cn,kSchemaResponse:ln}=Ze,un=/^[1-5]{1}[0-9]{2}$|^[1-5]xx$|^default$/,{FST_ERR_SCH_RESPONSE_SCHEMA_NOT_NESTED_2XX:pn}=dt,{FSTWRN001:dn}=ct;function hn(e,t,n){const r=e&&e(void 0===t[n]?null:t[n]);return r?.then?r.then((e=>s(e))).catch((e=>e)):s(r);function s(r){return!1===r?e.errors:r&&r.error?r.error:(r&&r.value&&(t[n]=r.value),!1)}}function fn(e,t,n){if(e instanceof Error)return e.statusCode=e.statusCode||400,e.code=e.code||"FST_ERR_VALIDATION",e.validationContext=e.validationContext||t,e;const r=n(e,t);return r.statusCode=r.statusCode||400,r.code=r.code||"FST_ERR_VALIDATION",r.validation=e,r.validationContext=t,r}var mn={symbols:{bodySchema:cn,querystringSchema:an,responseSchema:ln,paramsSchema:on,headersSchema:sn},compileSchemasForValidation:function(e,t,n){const{schema:r}=e;if(!r)return;const{method:s,url:i}=e.config||{},o=r.headers;if(o&&(n||Object.getPrototypeOf(o)!==Object.prototype))e[sn]=t({schema:o,method:s,url:i,httpPart:"headers"});else if(o){const n={};Object.keys(o).forEach((e=>{n[e]=o[e]})),n.required instanceof Array&&(n.required=n.required.map((e=>e.toLowerCase()))),o.properties&&(n.properties={},Object.keys(o.properties).forEach((e=>{n.properties[e.toLowerCase()]=o.properties[e]}))),e[sn]=t({schema:n,method:s,url:i,httpPart:"headers"})}else({}).hasOwnProperty.call(r,"headers")&&dn("headers",s,i);r.body?e[cn]=t({schema:r.body,method:s,url:i,httpPart:"body"}):{}.hasOwnProperty.call(r,"body")&&dn("body",s,i),r.querystring?e[an]=t({schema:r.querystring,method:s,url:i,httpPart:"querystring"}):{}.hasOwnProperty.call(r,"querystring")&&dn("querystring",s,i),r.params?e[on]=t({schema:r.params,method:s,url:i,httpPart:"params"}):{}.hasOwnProperty.call(r,"params")&&dn("params",s,i)},compileSchemasForSerialization:function(e,t){if(!e.schema||!e.schema.response)return;const{method:n,url:r}=e.config||{};e[ln]=Object.keys(e.schema.response).reduce((function(s,i){const o=e.schema.response[i];if(i=i.toLowerCase(),!un.exec(i))throw new pn;if(o.content){const e={};for(const s of Object.keys(o.content))e[s]=t({schema:o.content[s].schema,url:r,method:n,httpStatus:i,contentType:s});s[i]=e}else s[i]=t({schema:o,url:r,method:n,httpStatus:i});return s}),{})},validate:function e(t,n,r){const s=void 0===r;if(s||!r.skipParams){const r=hn(t[on],n,"params");if(r)return"function"!=typeof r.then?fn(r,"params",t.schemaErrorFormatter):function(t,n,r){return t.then((t=>t?fn(t,"params",n.schemaErrorFormatter):e(n,r,{skipParams:!0})))}(r,t,n)}if(s||!r.skipBody){const r=hn(t[cn],n,"body");if(r)return"function"!=typeof r.then?fn(r,"body",t.schemaErrorFormatter):function(t,n,r){return t.then((t=>t?fn(t,"body",n.schemaErrorFormatter):e(n,r,{skipParams:!0,skipBody:!0})))}(r,t,n)}if(s||!r.skipQuery){const r=hn(t[an],n,"query");if(r)return"function"!=typeof r.then?fn(r,"querystring",t.schemaErrorFormatter):function(t,n,r){return t.then((t=>t?fn(t,"querystring",n.schemaErrorFormatter):e(n,r,{skipParams:!0,skipBody:!0,skipQuery:!0})))}(r,t,n)}const i=hn(t[sn],n,"headers");return!!i&&("function"!=typeof i.then?fn(i,"headers",t.schemaErrorFormatter):function(e,t,n){return e.then((e=>!!e&&fn(e,"headers",t.schemaErrorFormatter)))}(i,t))}};const{kReplyIsError:gn,kReplyHijacked:yn}=Ze;var vn=function(e,t){e.then((function(e){if(!0!==t[yn]&&(void 0!==e||!1===t.sent&&!1===t.raw.headersSent&&!1===t.request.raw.aborted))try{t.send(e)}catch(e){t[gn]=!0,t.send(e)}}),(function(e){if(!0!==t.sent){t[gn]=!0;try{t.send(e)}catch(e){t.send(e)}}else t.log.error({err:e},"Promise errored, but reply.sent = true was set")}))};!function(e){const{validate:t}=mn,{preValidationHookRunner:n,preHandlerHookRunner:r}=Pt,s=vn,{kReplyIsError:i,kRouteContext:o}=Ze;function a(e,t){try{null!==e[o].preValidation?n(e[o].preValidation,e,t,c):c(null,e,t)}catch(n){c(n,e,t)}}function c(e,n,r){if(!0===r.sent)return;if(null!=e)return r[i]=!0,void r.send(e);const s=t(r[o],n);if(s&&"function"==typeof s.then){const e=l.bind(null,n,r);s.then(e,e)}else l(n,r,s)}function l(e,t,n){if(n){if(!1===t[o].attachValidation)return void t.send(n);t.request.validationError=n}null!==e[o].preHandler?r(e[o].preHandler,e,t,u):u(null,e,t)}function u(e,t,n){if(n.sent)return;if(null!=e)return n[i]=!0,void n.send(e);let r;try{r=t[o].handler(t,n)}catch(e){return n[i]=!0,void n.send(e)}void 0!==r&&(null!==r&&"function"==typeof r.then?s(r,n):n.send(r))}e.exports=function(e,t,n){if(!0===n.sent)return;if(null!=e)return n[i]=!0,void n.send(e);const r=t.raw.method,s=t.headers,c=t[o];if("GET"===r||"HEAD"===r)return void a(t,n);const l=s["content-type"];"POST"!==r&&"PUT"!==r&&"PATCH"!==r&&"TRACE"!==r&&"SEARCH"!==r&&"PROPFIND"!==r&&"PROPPATCH"!==r&&"LOCK"!==r&&"REPORT"!==r&&"MKCALENDAR"!==r?"OPTIONS"!==r&&"DELETE"!==r||void 0===l||void 0===s["transfer-encoding"]&&void 0===s["content-length"]?a(t,n):c.contentTypeParser.run(l,a,t,n):void 0===l?void 0!==s["transfer-encoding"]||"0"!==s["content-length"]&&void 0!==s["content-length"]?c.contentTypeParser.run("",a,t,n):a(t,n):c.contentTypeParser.run(l,a,t,n)},e.exports[Symbol.for("internals")]={handler:a,preHandlerCallback:u}}(rn);var bn=rn.exports,En={exports:{}};!function(e){function t(){}const n={fatal:t,error:t,warn:t,info:t,debug:t,trace:t};Object.defineProperty(En,"exports",{get:()=>Object.create(n)})}();var _n=En.exports,An={exports:{}};const Sn=e=>e&&"string"==typeof e.message,Tn=e=>{if(!e)return;const t=e.cause;if("function"==typeof t){const t=e.cause();return Sn(t)?t:void 0}return Sn(t)?t:void 0},wn=(e,t)=>{if(!Sn(e))return"";const n=e.stack||"";if(t.has(e))return n+"\ncauses have become circular...";const r=Tn(e);return r?(t.add(e),n+"\ncaused by: "+wn(r,t)):n},xn=(e,t,n)=>{if(!Sn(e))return"";const r=n?"":e.message||"";if(t.has(e))return r+": ...";const s=Tn(e);if(s){t.add(e);const n="function"==typeof e.cause;return r+(n?"":": ")+xn(s,t,n)}return r};var kn={isErrorLike:Sn,getErrorCause:Tn,stackWithCauses:e=>wn(e,new Set),messageWithCauses:e=>xn(e,new Set)};const Cn=Symbol("circular-ref-tag"),In=Symbol("pino-raw-err-ref"),Rn=Object.create({},{type:{enumerable:!0,writable:!0,value:void 0},message:{enumerable:!0,writable:!0,value:void 0},stack:{enumerable:!0,writable:!0,value:void 0},aggregateErrors:{enumerable:!0,writable:!0,value:void 0},raw:{enumerable:!1,get:function(){return this[In]},set:function(e){this[In]=e}}});Object.defineProperty(Rn,In,{writable:!0,value:{}});var On={pinoErrProto:Rn,pinoErrorSymbols:{seen:Cn,rawSymbol:In}};const{messageWithCauses:Nn,stackWithCauses:Dn,isErrorLike:Pn}=kn,{pinoErrProto:Ln,pinoErrorSymbols:Mn}=On,{seen:Bn}=Mn,{toString:jn}=Object.prototype,{isErrorLike:Fn}=kn,{pinoErrProto:$n,pinoErrorSymbols:Un}=On,{seen:Hn}=Un,{toString:Gn}=Object.prototype;var qn={mapHttpRequest:function(e){return{req:Yn(e)}},reqSerializer:Yn};const zn=Symbol("pino-raw-req-ref"),Vn=Object.create({},{id:{enumerable:!0,writable:!0,value:""},method:{enumerable:!0,writable:!0,value:""},url:{enumerable:!0,writable:!0,value:""},query:{enumerable:!0,writable:!0,value:""},params:{enumerable:!0,writable:!0,value:""},headers:{enumerable:!0,writable:!0,value:{}},remoteAddress:{enumerable:!0,writable:!0,value:""},remotePort:{enumerable:!0,writable:!0,value:""},raw:{enumerable:!1,get:function(){return this[zn]},set:function(e){this[zn]=e}}});function Yn(e){const t=e.info||e.socket,n=Object.create(Vn);if(n.id="function"==typeof e.id?e.id():e.id||(e.info?e.info.id:void 0),n.method=e.method,e.originalUrl)n.url=e.originalUrl;else{const t=e.path;n.url="string"==typeof t?t:e.url?e.url.path||e.url:void 0}return e.query&&(n.query=e.query),e.params&&(n.params=e.params),n.headers=e.headers,n.remoteAddress=t&&t.remoteAddress,n.remotePort=t&&t.remotePort,n.raw=e.raw||e,n}Object.defineProperty(Vn,zn,{writable:!0,value:{}});var Kn={mapHttpResponse:function(e){return{res:Jn(e)}},resSerializer:Jn};const Qn=Symbol("pino-raw-res-ref"),Wn=Object.create({},{statusCode:{enumerable:!0,writable:!0,value:0},headers:{enumerable:!0,writable:!0,value:""},raw:{enumerable:!1,get:function(){return this[Qn]},set:function(e){this[Qn]=e}}});function Jn(e){const t=Object.create(Wn);return t.statusCode=e.headersSent?e.statusCode:null,t.headers=e.getHeaders?e.getHeaders():e._headers,t.raw=e,t}Object.defineProperty(Wn,Qn,{writable:!0,value:{}});const Xn=function e(t){if(!Pn(t))return t;t[Bn]=void 0;const n=Object.create(Ln);n.type="[object Function]"===jn.call(t.constructor)?t.constructor.name:t.name,n.message=Nn(t),n.stack=Dn(t),Array.isArray(t.errors)&&(n.aggregateErrors=t.errors.map((t=>e(t))));for(const r in t)if(void 0===n[r]){const s=t[r];Pn(s)?"cause"===r||{}.hasOwnProperty.call(s,Bn)||(n[r]=e(s)):n[r]=s}return delete t[Bn],n.raw=t,n},Zn=qn,er=Kn;var tr={err:Xn,errWithCause:function e(t){if(!Fn(t))return t;t[Hn]=void 0;const n=Object.create($n);n.type="[object Function]"===Gn.call(t.constructor)?t.constructor.name:t.name,n.message=t.message,n.stack=t.stack,Array.isArray(t.errors)&&(n.aggregateErrors=t.errors.map((t=>e(t)))),Fn(t.cause)&&!{}.hasOwnProperty.call(t.cause,Hn)&&(n.cause=e(t.cause));for(const r in t)if(void 0===n[r]){const s=t[r];Fn(s)?{}.hasOwnProperty.call(s,Hn)||(n[r]=e(s)):n[r]=s}return delete t[Hn],n.raw=t,n},mapHttpRequest:Zn.mapHttpRequest,mapHttpResponse:er.mapHttpResponse,req:Zn.reqSerializer,res:er.resSerializer,wrapErrorSerializer:function(e){return e===Xn?e:function(t){return e(Xn(t))}},wrapRequestSerializer:function(e){return e===Zn.reqSerializer?e:function(t){return e(Zn.reqSerializer(t))}},wrapResponseSerializer:function(e){return e===er.resSerializer?e:function(t){return e(er.resSerializer(t))}}};function nr(e,t){return t}var rr=function(){const e=Error.prepareStackTrace;Error.prepareStackTrace=nr;const t=Error().stack;if(Error.prepareStackTrace=e,!Array.isArray(t))return;const n=t.slice(2),r=[];for(const e of n)e&&r.push(e.getFileName());return r},sr=/[^.[\]]+|\[((?:.)*?)\]/g;const ir=sr,or=sr;var ar={groupRedact:function(e,t,n,r,s){const i=ur(e,t);if(null==i||"string"==typeof i)return{keys:null,values:null,target:i,flat:!0};const o=Object.keys(i),a=o.length,c=t.length,l=s?[...t]:void 0,u=Array(a);for(var p=0;a>p;p++){const e=o[p];u[p]=i[e],s?(l[c]=e,i[e]=n(i[e],l)):i[e]=r?n(i[e]):n}return{keys:o,values:u,target:i,flat:!0}},groupRestore:function({keys:e,values:t,target:n}){if(null==n||"string"==typeof n)return;const r=e.length;for(var s=0;r>s;s++)n[e[s]]=t[s]},nestedRedact:function(e,t,n,r,s,i,o){const a=ur(t,n);if(null==a)return;const c=Object.keys(a),l=c.length;for(var u=0;l>u;u++)lr(e,a,c[u],n,r,s,i,o);return e},nestedRestore:function(e){for(let t=0;e.length>t;t++){const{target:n,path:r,value:s}=e[t];let i=n;for(let e=r.length-1;e>0;e--)i=i[r[e]];i[r[0]]=s}}};function cr(e,t){return null!=e&&("hasOwn"in Object?Object.hasOwn(e,t):{}.hasOwnProperty.call(e,t))}function lr(e,t,n,r,s,i,o,a){const c=s.length,l=c-1,u=n;var p,d,h,f,m,g=-1,y=null,v=!1,b=0,E={parent:null,key:null,children:[],depth:0};if(h=p=t[n],"object"==typeof p)for(;null!=p&&++g<c&&(b+=1,"*"===(n=s[g])||y||"object"==typeof p&&n in p);)if("*"!==n||("*"===y&&(v=!0),y=n,g===l)){if(y){const c=Object.keys(p);for(var _=0;c.length>_;_++){const y=c[_];if(m=p[y],f="*"===n,v)h=pr(m,g-1,n,r,s,i,o,a,u,p,d,h,f,y,g,l,E=dr(E,y,b),e,t[u],b+1);else if(f||"object"==typeof m&&null!==m&&n in m)if(h=f?m:m[n],d=g!==l?h:o?a?i(h,[...r,u,...s]):i(h):i,f){const n=hr(dr(E,y,b),h,t[u]);e.push(n),p[y]=d}else if(m[n]===d);else if(void 0===d&&void 0!==i||cr(m,n)&&d===h)E=dr(E,y,b);else{E=dr(E,y,b);const r=hr(dr(E,n,b+1),h,t[u]);e.push(r),m[n]=d}}y=null}else{if(h=p[n],E=dr(E,n,b),d=g!==l?h:o?a?i(h,[...r,u,...s]):i(h):i,cr(p,n)&&d===h||void 0===d&&void 0!==i);else{const r=hr(E,h,t[u]);e.push(r),p[n]=d}p=p[n]}if("object"!=typeof p)break}}function ur(e,t){for(var n=-1,r=t.length,s=e;null!=s&&++n<r;)s=s[t[n]];return s}function pr(e,t,n,r,s,i,o,a,c,l,u,p,d,h,f,m,g,y,v,b){if(0===t&&(d||"object"==typeof e&&null!==e&&n in e))if(p=d?e:e[n],u=f!==m?p:o?a?i(p,[...r,c,...s]):i(p):i,d){const e=hr(g,p,v);y.push(e),l[h]=u}else if(e[n]===u);else if(void 0===u&&void 0!==i||cr(e,n)&&u===p);else{const t=hr(dr(g,n,b+1),p,v);y.push(t),e[n]=u}for(const E in e)"object"==typeof e[E]&&(g=dr(g,E,b),pr(e[E],t-1,n,r,s,i,o,a,c,l,u,p,d,h,f,m,g,y,v,b+1))}function dr(e,t,n){if(e.depth===n)return dr(e.parent,t,n);var r={parent:e,key:t,depth:n,children:[]};return e.children.push(r),r}function hr(e,t,n){let r=e;const s=[];do{s.push(r.key),r=r.parent}while(null!=r.parent);return{path:s,value:t,target:n}}const{groupRestore:fr,nestedRestore:mr}=ar,gr=function(e={}){const{ERR_PATHS_MUST_BE_STRINGS:t=()=>"fast-redact - Paths must be (non-empty) strings",ERR_INVALID_PATH:n=e=>`fast-redact – Invalid path (${e})`}=e;return function({paths:e}){e.forEach((e=>{if("string"!=typeof e)throw Error(t());try{if(/〇/.test(e))throw Error();const t=("["===e[0]?"":".")+e.replace(/^\*/,"〇").replace(/\.\*/g,".〇").replace(/\[\*\]/g,"[〇]");if(/\n|\r|;/.test(t))throw Error();if(/\/\*/.test(t))throw Error();Function(`\n            'use strict'\n            const o = new Proxy({}, { get: () => o, set: () => { throw Error() } });\n            const 〇 = null;\n            o${t}\n            if ([o${t}].length !== 1) throw Error()`)()}catch(t){throw Error(n(e))}}))}},{groupRedact:yr,nestedRedact:vr}=ar,br=sr,Er=gr(),_r=e=>e;_r.restore=_r,Sr.rx=br,Sr.validator=gr;var Ar=Sr;function Sr(e={}){const t=Array.from(new Set(e.paths||[])),n=!("serialize"in e)||!1!==e.serialize&&"function"!=typeof e.serialize?JSON.stringify:e.serialize,r=e.remove;if(!0===r&&n!==JSON.stringify)throw Error("fast-redact – remove option may only be set when serializer is JSON.stringify");const s=!0===r?void 0:"censor"in e?e.censor:"[REDACTED]",i="function"==typeof s,o=i&&s.length>1;if(0===t.length)return n||_r;Er({paths:t,serialize:n,censor:s});const{wildcards:a,wcLen:c,secret:l}=function({paths:e}){const t=[];var n=0;const r=e.reduce((function(e,r,s){var i=r.match(ir).map((e=>e.replace(/'|"|`/g,"")));const o="["===r[0],a=(i=i.map((e=>"["===e[0]?e.substr(1,e.length-2):e))).indexOf("*");if(a>-1){const e=i.slice(0,a),r=e.join("."),s=i.slice(a+1,i.length);n++,t.push({before:e,beforeStr:r,after:s,nested:s.length>0})}else e[r]={path:i,val:void 0,precensored:!1,circle:"",escPath:JSON.stringify(r),leadingBracket:o};return e}),{});return{wildcards:t,wcLen:n,secret:r}}({paths:t,censor:s}),u=function(){if(this.restore)return void(this.restore.state.secret=this.secret);const{secret:e,wcLen:t}=this,n=Object.keys(e),r=function(e,t){return t.map((t=>{const{circle:n,escPath:r,leadingBracket:s}=e[t];return`\n      if (secret[${r}].val !== undefined) {\n        try { ${n?`o.${n} = secret[${r}].val`:`o${s?"":"."}${t} = secret[${r}].val`} } catch (e) {}\n        secret[${r}].val = undefined\n      }\n    `})).join("")}(e,n),s=t>0,i=s?{secret:e,groupRestore:fr,nestedRestore:mr}:{secret:e};this.restore=Function("o",function(e,t,n){return`\n    const secret = this.secret\n    ${!0===n?`\n    const keys = Object.keys(secret)\n    const len = keys.length\n    for (var i = len - 1; i >= ${t.length}; i--) {\n      const k = keys[i]\n      const o = secret[k]\n      if (o) {\n        if (o.flat === true) this.groupRestore(o)\n        else this.nestedRestore(o)\n        secret[k] = null\n      }\n    }\n  `:""}\n    ${e}\n    return o\n  `}(r,n,s)).bind(i),this.restore.state=i};return function({secret:e,serialize:t,wcLen:n,strict:r,isCensorFct:s,censorFctTakesPath:i},o){const a=Function("o",`\n    if (typeof o !== 'object' || o == null) {\n      ${function(e,t){return!0===e?"throw Error('fast-redact: primitives cannot be redacted')":!1===t?"return o":"return this.serialize(o)"}(r,t)}\n    }\n    const { censor, secret } = this\n    const originalSecret = {}\n    const secretKeys = Object.keys(secret)\n    for (var i = 0; i < secretKeys.length; i++) {\n      originalSecret[secretKeys[i]] = secret[secretKeys[i]]\n    }\n\n    ${function(e,t,n){return Object.keys(e).map((r=>{const{escPath:s,leadingBracket:i,path:o}=e[r],a=i?1:0,c=i?"":".",l=[];for(var u;null!==(u=or.exec(r));){const[,e]=u,{index:t,input:n}=u;t>a&&l.push(n.substring(0,t-(e?0:1)))}var p=l.map((e=>`o${c}${e}`)).join(" && ");p+=0===p.length?`o${c}${r} != null`:` && o${c}${r} != null`;const d=`\n      switch (true) {\n        ${l.reverse().map((e=>`\n          case o${c}${e} === censor:\n            secret[${s}].circle = ${JSON.stringify(e)}\n            break\n        `)).join("\n")}\n      }\n    `,h=n?"val, "+JSON.stringify(o):"val";return`\n      if (${p}) {\n        const val = o${c}${r}\n        if (val === censor) {\n          secret[${s}].precensored = true\n        } else {\n          secret[${s}].val = val\n          o${c}${r} = ${t?`censor(${h})`:"censor"}\n          ${d}\n        }\n      }\n    `})).join("\n")}(e,s,i)}\n    this.compileRestore()\n    ${function(e,t,n){return!0===e?`\n    {\n      const { wildcards, wcLen, groupRedact, nestedRedact } = this\n      for (var i = 0; i < wcLen; i++) {\n        const { before, beforeStr, after, nested } = wildcards[i]\n        if (nested === true) {\n          secret[beforeStr] = secret[beforeStr] || []\n          nestedRedact(secret[beforeStr], o, before, after, censor, ${t}, ${n})\n        } else secret[beforeStr] = groupRedact(o, before, censor, ${t}, ${n})\n      }\n    }\n  `:""}(n>0,s,i)}\n    this.secret = originalSecret\n    ${function(e){return!1===e?"return o":"\n    var s = this.serialize(o)\n    this.restore(o)\n    return s\n  "}(t)}\n  `).bind(o);return a.state=o,!1===t&&(a.restore=e=>o.restore(e)),a}({secret:l,wcLen:c,serialize:n,strict:!("strict"in e)||e.strict,isCensorFct:i,censorFctTakesPath:o},function(e){const{secret:t,censor:n,compileRestore:r,serialize:s,groupRedact:i,nestedRedact:o,wildcards:a,wcLen:c}=e,l=[{secret:t,censor:n,compileRestore:r}];return!1!==s&&l.push({serialize:s}),c>0&&l.push({groupRedact:i,nestedRedact:o,wildcards:a,wcLen:c}),Object.assign(...l)}({secret:l,censor:s,compileRestore:u,serialize:n,groupRedact:yr,nestedRedact:vr,wildcards:a,wcLen:c}))}const Tr=Symbol("pino.setLevel"),wr=Symbol("pino.getLevel"),xr=Symbol("pino.levelVal"),kr=Symbol("pino.levelComp"),Cr=Symbol("pino.useLevelLabels"),Ir=Symbol("pino.useOnlyCustomLevels"),Rr=Symbol("pino.mixin"),Or=Symbol("pino.lsCache"),Nr=Symbol("pino.chindings"),Dr=Symbol("pino.asJson"),Pr=Symbol("pino.write"),Lr=Symbol("pino.redactFmt"),Mr=Symbol("pino.time"),Br=Symbol("pino.timeSliceIndex"),jr=Symbol("pino.stream"),Fr=Symbol("pino.stringify"),$r=Symbol("pino.stringifySafe"),Ur=Symbol("pino.stringifiers"),Hr=Symbol("pino.end"),Gr=Symbol("pino.formatOpts"),qr=Symbol("pino.messageKey"),zr=Symbol("pino.errorKey"),Vr=Symbol("pino.nestedKey"),Yr=Symbol("pino.nestedKeyStr"),Kr=Symbol("pino.mixinMergeStrategy"),Qr=Symbol("pino.msgPrefix"),Wr=Symbol("pino.wildcardFirst"),Jr=Symbol.for("pino.serializers"),Xr=Symbol.for("pino.formatters"),Zr=Symbol.for("pino.hooks");var es={setLevelSym:Tr,getLevelSym:wr,levelValSym:xr,levelCompSym:kr,useLevelLabelsSym:Cr,mixinSym:Rr,lsCacheSym:Or,chindingsSym:Nr,asJsonSym:Dr,writeSym:Pr,serializersSym:Jr,redactFmtSym:Lr,timeSym:Mr,timeSliceIndexSym:Br,streamSym:jr,stringifySym:Fr,stringifySafeSym:$r,stringifiersSym:Ur,endSym:Hr,formatOptsSym:Gr,messageKeySym:qr,errorKeySym:zr,nestedKeySym:Vr,wildcardFirstSym:Wr,needsMetadataGsym:Symbol.for("pino.metadata"),useOnlyCustomLevelsSym:Ir,formattersSym:Xr,hooksSym:Zr,nestedKeyStrSym:Yr,mixinMergeStrategySym:Kr,msgPrefixSym:Qr};const ts=Ar,{redactFmtSym:ns,wildcardFirstSym:rs}=es,{rx:ss,validator:is}=ts,os=is({ERR_PATHS_MUST_BE_STRINGS:()=>"pino – redacted paths must be strings",ERR_INVALID_PATH:e=>`pino – redact paths array contains an invalid path (${e})`}),as="[Redacted]",cs=!1;var ls=function(e,t){const{paths:n,censor:r}=function(e){if(Array.isArray(e))return os(e={paths:e,censor:as}),e;let{paths:t,censor:n=as,remove:r}=e;if(!1===Array.isArray(t))throw Error("pino – redact must contain an array of strings");return!0===r&&(n=void 0),os({paths:t,censor:n}),{paths:t,censor:n}}(e),s=n.reduce(((e,t)=>{ss.lastIndex=0;const n=ss.exec(t),r=ss.exec(t);let s=void 0!==n[1]?n[1].replace(/^(?:"|'|`)(.*)(?:"|'|`)$/,"$1"):n[0];if("*"===s&&(s=rs),null===r)return e[s]=null,e;if(null===e[s])return e;const{index:i}=r,o=""+t.substr(i,t.length-1);return e[s]=e[s]||[],s!==rs&&0===e[s].length&&e[s].push(...e[rs]||[]),s===rs&&Object.keys(e).forEach((function(t){e[t]&&e[t].push(o)})),e[s].push(o),e}),{}),i={[ns]:ts({paths:n,censor:r,serialize:t,strict:cs})};return[...Object.keys(s),...Object.getOwnPropertySymbols(s)].reduce(((e,n)=>{if(null===s[n])e[n]=e=>((...e)=>t("function"==typeof r?r(...e):r))(e,[n]);else{const i="function"==typeof r?(e,t)=>r(e,[n,...t]):r;e[n]=ts({paths:s[n],censor:i,serialize:t,strict:cs})}return e}),i)},us={nullTime:()=>"",epochTime:()=>',"time":'+Date.now(),unixTime:()=>',"time":'+Math.round(Date.now()/1e3),isoTime:()=>`,"time":"${new Date(Date.now()).toISOString()}"`};function ps(e){try{return JSON.stringify(e)}catch(e){return'"[Circular]"'}}var ds,hs={exports:{}};function fs(){if(ds)return hs.exports;if(ds=1,"undefined"!=typeof SharedArrayBuffer&&"undefined"!=typeof Atomics){const e=new Int32Array(new SharedArrayBuffer(4));function t(t){if(0==(t>0&&1/0>t)){if("number"!=typeof t&&"bigint"!=typeof t)throw TypeError("sleep: ms must be a number");throw RangeError("sleep: ms must be a number that is greater than 0 but less than Infinity")}Atomics.wait(e,0,0,+t)}hs.exports=t}else{function n(e){if(0==(e>0&&1/0>e)){if("number"!=typeof e&&"bigint"!=typeof e)throw TypeError("sleep: ms must be a number");throw RangeError("sleep: ms must be a number that is greater than 0 but less than Infinity")}}hs.exports=n}return hs.exports}const ms=c,gs=a,ys=l.inherits,vs=u,bs=fs(),Es=100,_s=Buffer.allocUnsafe(0),As="buffer",Ss="utf8";function Ts(e,t){function n(n,r){if(n)return t._reopening=!1,t._writing=!1,t._opening=!1,void(t.sync?process.nextTick((()=>{t.listenerCount("error")>0&&t.emit("error",n)})):t.emit("error",n));const s=t._reopening;t.fd=r,t.file=e,t._reopening=!1,t._opening=!1,t._writing=!1,t.sync?process.nextTick((()=>t.emit("ready"))):t.emit("ready"),t.destroyed||(!t._writing&&t._len>t.minLength||t._flushPending?t._actualWrite():s&&process.nextTick((()=>t.emit("drain"))))}t._opening=!0,t._writing=!0,t._asyncDrainScheduled=!1;const r=t.append?"a":"w",s=t.mode;if(t.sync)try{t.mkdir&&ms.mkdirSync(vs.dirname(e),{recursive:!0}),n(null,ms.openSync(e,r,s))}catch(e){throw n(e),e}else t.mkdir?ms.mkdir(vs.dirname(e),{recursive:!0},(t=>{if(t)return n(t);ms.open(e,r,s,n)})):ms.open(e,r,s,n)}function ws(e){if(!(this instanceof ws))return new ws(e);let t,n,{fd:r,dest:s,minLength:i,maxLength:o,maxWrite:a,sync:c,append:l=!0,mkdir:u,retryEAGAIN:p,fsync:d,contentMode:h,mode:f}=e||{};if(r=r||s,this._len=0,this.fd=-1,this._bufs=[],this._lens=[],this._writing=!1,this._ending=!1,this._reopening=!1,this._asyncDrainScheduled=!1,this._flushPending=!1,this._hwm=Math.max(i||0,16387),this.file=null,this.destroyed=!1,this.minLength=i||0,this.maxLength=o||0,this.maxWrite=a||16384,this.sync=c||!1,this.writable=!0,this._fsync=d||!1,this.append=l||!1,this.mode=f,this.retryEAGAIN=p||(()=>!0),this.mkdir=u||!1,h===As)this._writingBuf=_s,this.write=Rs,this.flush=Ds,this.flushSync=Ls,this._actualWrite=Bs,t=()=>ms.writeSync(this.fd,this._writingBuf),n=()=>ms.write(this.fd,this._writingBuf,this.release);else{if(void 0!==h&&h!==Ss)throw Error(`SonicBoom supports "${Ss}" and "${As}", but passed ${h}`);this._writingBuf="",this.write=Is,this.flush=Ns,this.flushSync=Ps,this._actualWrite=Ms,t=()=>ms.writeSync(this.fd,this._writingBuf,"utf8"),n=()=>ms.write(this.fd,this._writingBuf,"utf8",this.release)}if("number"==typeof r)this.fd=r,process.nextTick((()=>this.emit("ready")));else{if("string"!=typeof r)throw Error("SonicBoom supports only file descriptors and files");Ts(r,this)}if(this.minLength>=this.maxWrite)throw Error(`minLength should be smaller than maxWrite (${this.maxWrite})`);this.release=(e,r)=>{if(e){if("EAGAIN"!==e.code&&"EBUSY"!==e.code||!this.retryEAGAIN(e,this._writingBuf.length,this._len-this._writingBuf.length))this._writing=!1,this.emit("error",e);else if(this.sync)try{bs(Es),this.release(void 0,0)}catch(e){this.release(e)}else setTimeout(n,Es);return}this.emit("write",r);const s=xs(this._writingBuf,this._len,r);if(this._len=s.len,this._writingBuf=s.writingBuf,this._writingBuf.length){if(!this.sync)return void n();try{do{const e=t(),n=xs(this._writingBuf,this._len,e);this._len=n.len,this._writingBuf=n.writingBuf}while(this._writingBuf.length)}catch(e){return void this.release(e)}}this._fsync&&ms.fsyncSync(this.fd);const i=this._len;this._reopening?(this._writing=!1,this._reopening=!1,this.reopen()):i>this.minLength?this._actualWrite():this._ending?i>0?this._actualWrite():(this._writing=!1,js(this)):(this._writing=!1,this.sync?this._asyncDrainScheduled||(this._asyncDrainScheduled=!0,process.nextTick(ks,this)):this.emit("drain"))},this.on("newListener",(function(e){"drain"===e&&(this._asyncDrainScheduled=!1)}))}function xs(e,t,n){return"string"==typeof e&&Buffer.byteLength(e)!==n&&(n=(""+Buffer.from(e).subarray(0,n)).length),t=Math.max(t-n,0),{writingBuf:e=e.slice(n),len:t}}function ks(e){e.listenerCount("drain")>0&&(e._asyncDrainScheduled=!1,e.emit("drain"))}function Cs(e,t){return 0===e.length?_s:1===e.length?e[0]:Buffer.concat(e,t)}function Is(e){if(this.destroyed)throw Error("SonicBoom destroyed");const t=this._len+e.length,n=this._bufs;return this.maxLength&&t>this.maxLength?(this.emit("drop",e),this._hwm>this._len):(0===n.length||n[n.length-1].length+e.length>this.maxWrite?n.push(""+e):n[n.length-1]+=e,this._len=t,this._writing||this.minLength>this._len||this._actualWrite(),this._hwm>this._len)}function Rs(e){if(this.destroyed)throw Error("SonicBoom destroyed");const t=this._len+e.length,n=this._bufs,r=this._lens;return this.maxLength&&t>this.maxLength?(this.emit("drop",e),this._hwm>this._len):(0===n.length||r[r.length-1]+e.length>this.maxWrite?(n.push([e]),r.push(e.length)):(n[n.length-1].push(e),r[r.length-1]+=e.length),this._len=t,this._writing||this.minLength>this._len||this._actualWrite(),this._hwm>this._len)}function Os(e){this._flushPending=!0;const t=()=>{this._fsync?(this._flushPending=!1,e()):ms.fsync(this.fd,(t=>{this._flushPending=!1,e(t)})),this.off("error",n)},n=n=>{this._flushPending=!1,e(n),this.off("drain",t)};this.once("drain",t),this.once("error",n)}function Ns(e){if(null!=e&&"function"!=typeof e)throw Error("flush cb must be a function");if(this.destroyed){const t=Error("SonicBoom destroyed");if(e)return void e(t);throw t}this.minLength>0?(e&&Os.call(this,e),this._writing||(0===this._bufs.length&&this._bufs.push(""),this._actualWrite())):e?.()}function Ds(e){if(null!=e&&"function"!=typeof e)throw Error("flush cb must be a function");if(this.destroyed){const t=Error("SonicBoom destroyed");if(e)return void e(t);throw t}this.minLength>0?(e&&Os.call(this,e),this._writing||(0===this._bufs.length&&(this._bufs.push([]),this._lens.push(0)),this._actualWrite())):e?.()}function Ps(){if(this.destroyed)throw Error("SonicBoom destroyed");if(0>this.fd)throw Error("sonic boom is not ready yet");!this._writing&&this._writingBuf.length>0&&(this._bufs.unshift(this._writingBuf),this._writingBuf="");let e="";for(;this._bufs.length||e;){e.length>0||(e=this._bufs[0]);try{const t=ms.writeSync(this.fd,e,"utf8"),n=xs(e,this._len,t);e=n.writingBuf,this._len=n.len,e.length>0||this._bufs.shift()}catch(t){if(("EAGAIN"===t.code||"EBUSY"===t.code)&&!this.retryEAGAIN(t,e.length,this._len-e.length))throw t;bs(Es)}}try{ms.fsyncSync(this.fd)}catch{}}function Ls(){if(this.destroyed)throw Error("SonicBoom destroyed");if(0>this.fd)throw Error("sonic boom is not ready yet");!this._writing&&this._writingBuf.length>0&&(this._bufs.unshift([this._writingBuf]),this._writingBuf=_s);let e=_s;for(;this._bufs.length||e.length;){e.length>0||(e=Cs(this._bufs[0],this._lens[0]));try{const t=ms.writeSync(this.fd,e);e=e.subarray(t),this._len=Math.max(this._len-t,0),e.length>0||(this._bufs.shift(),this._lens.shift())}catch(t){if(("EAGAIN"===t.code||"EBUSY"===t.code)&&!this.retryEAGAIN(t,e.length,this._len-e.length))throw t;bs(Es)}}}function Ms(){const e=this.release;if(this._writing=!0,this._writingBuf=this._writingBuf||this._bufs.shift()||"",this.sync)try{e(null,ms.writeSync(this.fd,this._writingBuf,"utf8"))}catch(t){e(t)}else ms.write(this.fd,this._writingBuf,"utf8",e)}function Bs(){const e=this.release;if(this._writing=!0,this._writingBuf=this._writingBuf.length?this._writingBuf:Cs(this._bufs.shift(),this._lens.shift()),this.sync)try{e(null,ms.writeSync(this.fd,this._writingBuf))}catch(t){e(t)}else ms.write(this.fd,this._writingBuf,e)}function js(e){function t(t){t?e.emit("error",t):(e._ending&&!e._writing&&e.emit("finish"),e.emit("close"))}-1!==e.fd?(e.destroyed=!0,e._bufs=[],e._lens=[],ms.fsync(e.fd,(function(){1!==e.fd&&2!==e.fd?ms.close(e.fd,t):t()}))):e.once("ready",js.bind(null,e))}ys(ws,gs),ws.prototype.reopen=function(e){if(this.destroyed)throw Error("SonicBoom destroyed");if(this._opening)return void this.once("ready",(()=>{this.reopen(e)}));if(this._ending)return;if(!this.file)throw Error("Unable to reopen a file descriptor, you must pass a file to SonicBoom");if(e&&(this.file=e),this._reopening=!0,this._writing)return;const t=this.fd;this.once("ready",(()=>{t!==this.fd&&ms.close(t,(e=>{if(e)return this.emit("error",e)}))})),Ts(this.file,this)},ws.prototype.end=function(){if(this.destroyed)throw Error("SonicBoom destroyed");this._opening?this.once("ready",(()=>{this.end()})):this._ending||(this._ending=!0,this._writing||(this._len>0&&this.fd>=0?this._actualWrite():js(this)))},ws.prototype.destroy=function(){this.destroyed||js(this)},ws.SonicBoom=ws,ws.default=ws;var Fs=ws;const $s={exit:[],beforeExit:[]},Us={exit:function(){qs("exit")},beforeExit:function(){qs("beforeExit")}};let Hs;function Gs(e){$s[e].length>0||(process.removeListener(e,Us[e]),0===$s.exit.length&&0===$s.beforeExit.length&&(Hs=void 0))}function qs(e){for(const t of $s[e]){const n=t.deref();void 0!==n&&(0,t.fn)(n,e)}$s[e]=[]}function zs(e){for(const t of["exit","beforeExit"]){const n=$s[t].indexOf(e);$s[t].splice(n,n+1),Gs(t)}}function Vs(e,t,n){if(void 0===t)throw Error("the object can't be undefined");!function(e){$s[e].length>0||process.on(e,Us[e])}(e);const r=new WeakRef(t);r.fn=n,void 0===Hs&&(Hs=new FinalizationRegistry(zs)),Hs.register(t,r),$s[e].push(r)}var Ys,Ks,Qs,Ws,Js,Xs,Zs,ei,ti={register:function(e,t){Vs("exit",e,t)},registerBeforeExit:function(e,t){Vs("beforeExit",e,t)},unregister:function(e){if(void 0!==Hs){Hs.unregister(e);for(const t of["exit","beforeExit"])$s[t]=$s[t].filter((t=>{const n=t.deref();return n&&n!==e})),Gs(t)}}},ni={name:"thread-stream",version:"3.1.0",description:"A streaming way to send data to a Node.js Worker Thread",main:"index.js",types:"index.d.ts",dependencies:{"real-require":"^0.2.0"},devDependencies:{"@types/node":"^20.1.0","@types/tap":"^15.0.0","@yao-pkg/pkg":"^5.11.5",desm:"^1.3.0",fastbench:"^1.0.1",husky:"^9.0.6","pino-elasticsearch":"^8.0.0","sonic-boom":"^4.0.1",standard:"^17.0.0",tap:"^16.2.0","ts-node":"^10.8.0",typescript:"^5.3.2","why-is-node-running":"^2.2.2"},scripts:{build:"tsc --noEmit",test:'standard && npm run build && npm run transpile && tap "test/**/*.test.*js" && tap --ts test/*.test.*ts',"test:ci":"standard && npm run transpile && npm run test:ci:js && npm run test:ci:ts","test:ci:js":'tap --no-check-coverage --timeout=120 --coverage-report=lcovonly "test/**/*.test.*js"',"test:ci:ts":'tap --ts --no-check-coverage --coverage-report=lcovonly "test/**/*.test.*ts"',"test:yarn":'npm run transpile && tap "test/**/*.test.js" --no-check-coverage',transpile:"sh ./test/ts/transpile.sh",prepare:"husky install"},standard:{ignore:["test/ts/**/*","test/syntax-error.mjs"]},repository:{type:"git",url:"git+https://github.com/mcollina/thread-stream.git"},keywords:["worker","thread","threads","stream"],author:"Matteo Collina <hello@matteocollina.com>",license:"MIT",bugs:{url:"https://github.com/mcollina/thread-stream/issues"},homepage:"https://github.com/mcollina/thread-stream#readme"};function ri(){if(ei)return Zs;ei=1;const{createRequire:e}=d,t=rr,{join:n,isAbsolute:r,sep:s}=u,i=fs(),o=ti,c=function(){if(Xs)return Js;Xs=1;const{version:e}=ni,{EventEmitter:t}=a,{Worker:n}=p,{join:r}=u,{pathToFileURL:s}=h,{wait:i}=function(){if(Ks)return Ys;Ks=1;const e=1e3;return Ys={wait:function(t,n,r,s,i){const o=Date.now()+s;let a=Atomics.load(t,n);if(a===r)return void i(null,"ok");let c=a;const l=s=>{Date.now()>o?i(null,"timed-out"):setTimeout((()=>{c=a,a=Atomics.load(t,n),a===c?l(e>s?2*s:e):i(null,a===r?"ok":"not-equal")}),s)};l(1)},waitDiff:function(t,n,r,s,i){const o=Date.now()+s;let a=Atomics.load(t,n);if(a!==r)return void i(null,"ok");const c=s=>{Date.now()>o?i(null,"timed-out"):setTimeout((()=>{a=Atomics.load(t,n),a!==r?i(null,"ok"):c(e>s?2*s:e)}),s)};c(1)}},Ys}(),{WRITE_INDEX:o,READ_INDEX:c}=Ws?Qs:(Ws=1,Qs={WRITE_INDEX:4,READ_INDEX:8}),l=f,d=m,g=Symbol("kImpl"),y=l.constants.MAX_STRING_LENGTH;class v{constructor(e){this._value=e}deref(){return this._value}}class b{register(){}unregister(){}}const E=process.env.NODE_V8_COVERAGE?b:D.FinalizationRegistry||b,_=process.env.NODE_V8_COVERAGE?v:D.WeakRef||v,A=new E((e=>{e.exited||e.terminate()}));function S(e){d(!e[g].sync),e[g].needDrain&&(e[g].needDrain=!1,e.emit("drain"))}function T(e){const t=Atomics.load(e[g].state,o);let n=e[g].data.length-t;if(n>0){if(0===e[g].buf.length)return e[g].flushing=!1,void(e[g].ending?R(e):e[g].needDrain&&process.nextTick(S,e));let t=e[g].buf.slice(0,n),r=Buffer.byteLength(t);r>n?e.flush((()=>{if(!e.destroyed){for(Atomics.store(e[g].state,c,0),Atomics.store(e[g].state,o,0);r>e[g].data.length;)n/=2,t=e[g].buf.slice(0,n),r=Buffer.byteLength(t);e[g].buf=e[g].buf.slice(n),I(e,t,T.bind(null,e))}})):(e[g].buf=e[g].buf.slice(n),I(e,t,T.bind(null,e)))}else if(0===n){if(0===t&&0===e[g].buf.length)return;e.flush((()=>{Atomics.store(e[g].state,c,0),Atomics.store(e[g].state,o,0),T(e)}))}else C(e,Error("overwritten"))}function w(e){const t=this.stream.deref();if(void 0===t)return this.exited=!0,void this.terminate();switch(e.code){case"READY":this.stream=new _(t),t.flush((()=>{t[g].ready=!0,t.emit("ready")}));break;case"ERROR":C(t,e.err);break;case"EVENT":Array.isArray(e.args)?t.emit(e.name,...e.args):t.emit(e.name,e.args);break;case"WARNING":process.emitWarning(e.err);break;default:C(t,Error("this should not happen: "+e.code))}}function x(e){const t=this.stream.deref();void 0!==t&&(A.unregister(t),t.worker.exited=!0,t.worker.off("exit",x),C(t,0!==e?Error("the worker thread exited"):null))}function k(e,t){setImmediate((()=>{e.emit("error",t)}))}function C(e,t){e[g].destroyed||(e[g].destroyed=!0,t&&(e[g].errored=t,k(e,t)),e.worker.exited?setImmediate((()=>{e[g].closed=!0,e.emit("close")})):e.worker.terminate().catch((()=>{})).then((()=>{e[g].closed=!0,e.emit("close")})))}function I(e,t,n){const r=Atomics.load(e[g].state,o),s=Buffer.byteLength(t);return e[g].data.write(t,r),Atomics.store(e[g].state,o,r+s),Atomics.notify(e[g].state,o),n(),!0}function R(e){if(!e[g].ended&&e[g].ending&&!e[g].flushing){e[g].ended=!0;try{e.flushSync();let t=Atomics.load(e[g].state,c);Atomics.store(e[g].state,o,-1),Atomics.notify(e[g].state,o);let n=0;for(;-1!==t;){if(Atomics.wait(e[g].state,c,t,1e3),t=Atomics.load(e[g].state,c),-2===t)return void C(e,Error("end() failed"));if(10==++n)return void C(e,Error("end() took too long (10s)"))}process.nextTick((()=>{e[g].finished=!0,e.emit("finish")}))}catch(t){C(e,t)}}}function O(e){const t=()=>{e[g].ending?R(e):e[g].needDrain&&process.nextTick(S,e)};for(e[g].flushing=!1;0!==e[g].buf.length;){const n=Atomics.load(e[g].state,o);let r=e[g].data.length-n;if(0===r){N(e),Atomics.store(e[g].state,c,0),Atomics.store(e[g].state,o,0);continue}if(0>r)throw Error("overwritten");let s=e[g].buf.slice(0,r),i=Buffer.byteLength(s);if(i>r){for(N(e),Atomics.store(e[g].state,c,0),Atomics.store(e[g].state,o,0);i>e[g].buf.length;)r/=2,s=e[g].buf.slice(0,r),i=Buffer.byteLength(s);e[g].buf=e[g].buf.slice(r),I(e,s,t)}else e[g].buf=e[g].buf.slice(r),I(e,s,t)}}function N(e){if(e[g].flushing)throw Error("unable to flush while flushing");const t=Atomics.load(e[g].state,o);let n=0;for(;;){const r=Atomics.load(e[g].state,c);if(-2===r)throw Error("_flushSync failed");if(r===t)break;if(Atomics.wait(e[g].state,c,r,1e3),10==++n)throw Error("_flushSync took too long (10s)")}}return Js=class extends t{constructor(t={}){if(super(),4>t.bufferSize)throw Error("bufferSize must at least fit a 4-byte utf-8 char");this[g]={},this[g].stateBuf=new SharedArrayBuffer(128),this[g].state=new Int32Array(this[g].stateBuf),this[g].dataBuf=new SharedArrayBuffer(t.bufferSize||4194304),this[g].data=Buffer.from(this[g].dataBuf),this[g].sync=t.sync||!1,this[g].ending=!1,this[g].ended=!1,this[g].needDrain=!1,this[g].destroyed=!1,this[g].flushing=!1,this[g].ready=!1,this[g].finished=!1,this[g].errored=null,this[g].closed=!1,this[g].buf="",this.worker=function(t,i){const{filename:o,workerData:a}=i,c=("__bundlerPathsOverrides"in globalThis?globalThis.__bundlerPathsOverrides:{})["thread-stream-worker"]||r(__dirname,"lib","worker.js"),l=new n(c,{...i.workerOpts,trackUnmanagedFds:!1,workerData:{filename:0===o.indexOf("file://")?o:s(o).href,dataBuf:t[g].dataBuf,stateBuf:t[g].stateBuf,workerData:{$context:{threadStreamVersion:e},...a}}});return l.stream=new v(t),l.on("message",w),l.on("exit",x),A.register(t,l),l}(this,t),this.on("message",((e,t)=>{this.worker.postMessage(e,t)}))}write(e){if(this[g].destroyed)return k(this,Error("the worker has exited")),!1;if(this[g].ending)return k(this,Error("the worker is ending")),!1;if(this[g].flushing&&this[g].buf.length+e.length>=y)try{O(this),this[g].flushing=!0}catch(e){return C(this,e),!1}if(this[g].buf+=e,this[g].sync)try{return O(this),!0}catch(e){return C(this,e),!1}return this[g].flushing||(this[g].flushing=!0,setImmediate(T,this)),this[g].needDrain=0>=this[g].data.length-this[g].buf.length-Atomics.load(this[g].state,o),!this[g].needDrain}end(){this[g].destroyed||(this[g].ending=!0,R(this))}flush(e){if(this[g].destroyed)return void("function"==typeof e&&process.nextTick(e,Error("the worker has exited")));const t=Atomics.load(this[g].state,o);i(this[g].state,c,t,1/0,((t,n)=>{if(t)return C(this,t),void process.nextTick(e,t);"not-equal"!==n?process.nextTick(e):this.flush(e)}))}flushSync(){this[g].destroyed||(O(this),N(this))}unref(){this.worker.unref()}ref(){this.worker.ref()}get ready(){return this[g].ready}get destroyed(){return this[g].destroyed}get closed(){return this[g].closed}get writable(){return!this[g].destroyed&&!this[g].ending}get writableEnded(){return this[g].ending}get writableFinished(){return this[g].finished}get writableNeedDrain(){return this[g].needDrain}get writableObjectMode(){return!1}get writableErrored(){return this[g].errored}},Js}();function l(e){o.register(e,g),o.registerBeforeExit(e,y),e.on("close",(function(){o.unregister(e)}))}function g(e){e.ref(),e.flushSync(),e.end(),e.once("close",(function(){e.unref()}))}function y(e){e.flushSync()}return Zs=function(o){const{pipeline:a,targets:u,levels:p,dedupe:d,worker:h={},caller:f=t()}=o,m={...o.options},g="string"==typeof f?[f]:f,y="__bundlerPathsOverrides"in globalThis?globalThis.__bundlerPathsOverrides:{};let v=o.target;if(v&&u)throw Error("only one of target or targets can be specified");return u?(v=y["pino-worker"]||n(__dirname,"worker.js"),m.targets=u.filter((e=>e.target)).map((e=>({...e,target:b(e.target)}))),m.pipelines=u.filter((e=>e.pipeline)).map((e=>e.pipeline.map((t=>({...t,level:e.level,target:b(t.target)})))))):a&&(v=y["pino-worker"]||n(__dirname,"worker.js"),m.pipelines=[a.map((e=>({...e,target:b(e.target)})))]),p&&(m.levels=p),d&&(m.dedupe=d),m.pinoWillSendConfig=!0,function(e,t,n){const r=new c({filename:e,workerData:t,workerOpts:n});function s(){r.closed||(r.flushSync(),i(100),r.end())}return r.on("ready",(function(){process.removeListener("exit",s),r.unref(),!1!==n.autoEnd&&l(r)})),r.on("close",(function(){process.removeListener("exit",s)})),process.on("exit",s),r}(b(v),m,h);function b(t){if(r(t=y[t]||t)||0===t.indexOf("file://"))return t;if("pino/file"===t)return n(__dirname,"..","file.js");let i;for(const n of g)try{const r="node:repl"===n?process.cwd()+s:n;i=e(r).resolve(t);break}catch(e){continue}if(!i)throw Error(`unable to determine transport target for "${t}"`);return i}},Zs}const si=function(e,t,n){var r=n&&n.stringify||ps;if("object"==typeof e&&null!==e){var s=t.length+1;if(1===s)return e;var i=Array(s);i[0]=r(e);for(var o=1;s>o;o++)i[o]=r(t[o]);return i.join(" ")}if("string"!=typeof e)return e;var a=t.length;if(0===a)return e;for(var c="",l=0,u=-1,p=e&&e.length||0,d=0;p>d;){if(37===e.charCodeAt(d)&&p>d+1){switch(u=u>-1?u:0,e.charCodeAt(d+1)){case 100:case 102:if(l>=a)break;if(null==t[l])break;d>u&&(c+=e.slice(u,d)),c+=+t[l],u=d+2,d++;break;case 105:if(l>=a)break;if(null==t[l])break;d>u&&(c+=e.slice(u,d)),c+=Math.floor(+t[l]),u=d+2,d++;break;case 79:case 111:case 106:if(l>=a)break;if(void 0===t[l])break;d>u&&(c+=e.slice(u,d));var h=typeof t[l];if("string"===h){c+="'"+t[l]+"'",u=d+2,d++;break}if("function"===h){c+=t[l].name||"<anonymous>",u=d+2,d++;break}c+=r(t[l]),u=d+2,d++;break;case 115:if(l>=a)break;d>u&&(c+=e.slice(u,d)),c+=t[l]+"",u=d+2,d++;break;case 37:d>u&&(c+=e.slice(u,d)),c+="%",u=d+2,d++,l--}++l}++d}return-1===u?e:(p>u&&(c+=e.slice(u)),c)},{mapHttpRequest:ii,mapHttpResponse:oi}=tr,ai=Fs,ci=ti,{lsCacheSym:li,chindingsSym:ui,writeSym:pi,serializersSym:di,formatOptsSym:hi,endSym:fi,stringifiersSym:mi,stringifySym:gi,stringifySafeSym:yi,wildcardFirstSym:vi,nestedKeySym:bi,formattersSym:Ei,messageKeySym:_i,errorKeySym:Ai,nestedKeyStrSym:Si,msgPrefixSym:Ti}=es,{isMainThread:wi}=p,xi=ri();function ki(){}function Ci(e){let t="",n=0,r=!1,s=255;const i=e.length;if(i>100)return JSON.stringify(e);for(var o=0;i>o&&s>=32;o++)s=e.charCodeAt(o),34!==s&&92!==s||(t+=e.slice(n,o)+"\\",n=o,r=!0);return r?t+=e.slice(n):t=e,32>s?JSON.stringify(e):'"'+t+'"'}const Ii=process.env.NODE_V8_COVERAGE||process.env.V8_COVERAGE;function Ri(e){const t=new ai(e);return t.on("error",(function e(n){if("EPIPE"===n.code)return t.write=ki,t.end=ki,t.flushSync=ki,void(t.destroy=ki);t.removeListener("error",e),t.emit("error",n)})),Ii||e.sync||!wi||(ci.register(t,Oi),t.on("close",(function(){ci.unregister(t)}))),t}function Oi(e,t){e.destroyed||("beforeExit"===t?(e.flush(),e.on("drain",(function(){e.end()}))):e.flushSync())}var Ni={noop:ki,buildSafeSonicBoom:Ri,asChindings:function(e,t){let n,r=e[ui];const s=e[gi],i=e[yi],o=e[mi],a=o[vi],c=e[di];t=(0,e[Ei].bindings)(t);for(const e in t)if(n=t[e],!0===("level"!==e&&"serializers"!==e&&"formatters"!==e&&"customLevels"!==e&&t.hasOwnProperty(e)&&void 0!==n)){if(n=c[e]?c[e](n):n,n=(o[e]||a||s)(n,i),void 0===n)continue;r+=',"'+e+'":'+n}return r},asJson:function(e,t,n,r){const s=this[gi],i=this[yi],o=this[mi],a=this[fi],c=this[di],l=this[Ei],u=this[_i],p=this[Ai];let d,h=this[li][n]+r;h+=this[ui],l.log&&(e=l.log(e));const f=o[vi];let m="";for(const t in e)if(d=e[t],{}.hasOwnProperty.call(e,t)&&void 0!==d){c[t]?d=c[t](d):t===p&&c.err&&(d=c.err(d));const e=o[t]||f;switch(typeof d){case"undefined":case"function":continue;case"number":!1===Number.isFinite(d)&&(d=null);case"boolean":e&&(d=e(d));break;case"string":d=(e||Ci)(d);break;default:d=(e||s)(d,i)}if(void 0===d)continue;m+=","+Ci(t)+":"+d}let g="";if(void 0!==t){d=c[u]?c[u](t):t;const e=o[u]||f;switch(typeof d){case"function":break;case"number":!1===Number.isFinite(d)&&(d=null);case"boolean":e&&(d=e(d)),g=',"'+u+'":'+d;break;case"string":d=(e||Ci)(d),g=',"'+u+'":'+d;break;default:d=(e||s)(d,i),g=',"'+u+'":'+d}}return this[bi]&&m?h+this[Si]+m.slice(1)+"}"+g+a:h+m+g+a},genLog:function(e,t){return t?function(...r){t.call(this,r,n,e)}:n;function n(t,...n){if("object"==typeof t){let r,s=t;null!==t&&(t.method&&t.headers&&t.socket?t=ii(t):"function"==typeof t.setHeader&&(t=oi(t))),null===s&&0===n.length?r=[null]:(s=n.shift(),r=n),"string"==typeof this[Ti]&&null!=s&&(s=this[Ti]+s),this[pi](t,si(s,r,this[hi]),e)}else{let r=void 0===t?n.shift():t;"string"==typeof this[Ti]&&null!=r&&(r=this[Ti]+r),this[pi](null,si(r,n,this[hi]),e)}}},createArgsNormalizer:function(e){return function(t,n,r={},s){if("string"==typeof r)s=Ri({dest:r}),r={};else if("string"==typeof s){if(r&&r.transport)throw Error("only one of option.transport or stream can be specified");s=Ri({dest:s})}else if(r instanceof ai||r.writable||r._writableState)s=r,r={};else if(r.transport){if(r.transport instanceof ai||r.transport.writable||r.transport._writableState)throw Error("option.transport do not allow stream, please pass to option directly. e.g. pino(transport)");if(r.transport.targets&&r.transport.targets.length&&r.formatters&&"function"==typeof r.formatters.level)throw Error("option.transport.targets do not allow custom level formatters");let e;r.customLevels&&(e=r.useOnlyCustomLevels?r.customLevels:Object.assign({},r.levels,r.customLevels)),s=xi({caller:n,...r.transport,levels:e})}if((r=Object.assign({},e,r)).serializers=Object.assign({},e.serializers,r.serializers),r.formatters=Object.assign({},e.formatters,r.formatters),r.prettyPrint)throw Error("prettyPrint option is no longer supported, see the pino-pretty package (https://github.com/pinojs/pino-pretty)");const{enabled:i,onChild:o}=r;return!1===i&&(r.level="silent"),o||(r.onChild=ki),s||(s=function(e){return e.write!==e.constructor.prototype.write}(process.stdout)?process.stdout:Ri({fd:process.stdout.fd||1})),{opts:r,stream:s}}},stringify:function(e,t){try{return JSON.stringify(e)}catch(n){try{return(t||this[yi])(e)}catch(e){return'"[unable to serialize, circular reference is too complex to analyze]"'}}},buildFormatters:function(e,t,n){return{level:e,bindings:t,log:n}},normalizeDestFileDescriptor:function(e){const t=+e;return"string"==typeof e&&Number.isFinite(t)?t:void 0===e?1:e}},Di={DEFAULT_LEVELS:{trace:10,debug:20,info:30,warn:40,error:50,fatal:60},SORTING_ORDER:{ASC:"ASC",DESC:"DESC"}};const{lsCacheSym:Pi,levelValSym:Li,useOnlyCustomLevelsSym:Mi,streamSym:Bi,formattersSym:ji,hooksSym:Fi,levelCompSym:$i}=es,{noop:Ui,genLog:Hi}=Ni,{DEFAULT_LEVELS:Gi,SORTING_ORDER:qi}=Di,zi={fatal:e=>{const t=Hi(Gi.fatal,e);return function(...e){const n=this[Bi];if(t.call(this,...e),"function"==typeof n.flushSync)try{n.flushSync()}catch(e){}}},error:e=>Hi(Gi.error,e),warn:e=>Hi(Gi.warn,e),info:e=>Hi(Gi.info,e),debug:e=>Hi(Gi.debug,e),trace:e=>Hi(Gi.trace,e)},Vi=Object.keys(Gi).reduce(((e,t)=>(e[Gi[t]]=t,e)),{});function Yi(e,t){if(t)return!1;switch(e){case"fatal":case"error":case"warn":case"info":case"debug":case"trace":return!0;default:return!1}}function Ki(e,t,n){return e===qi.DESC?n>=t:t>=n}var Qi={initialLsCache:Object.keys(Vi).reduce(((e,t)=>(e[t]='{"level":'+ +t,e)),{}),genLsCache:function(e){const t=e[ji].level,{labels:n}=e.levels,r={};for(const e in n){const s=t(n[e],+e);r[e]=JSON.stringify(s).slice(0,-1)}return e[Pi]=r,e},levelMethods:zi,getLevel:function(e){const{levels:t,levelVal:n}=this;return t&&t.labels?t.labels[n]:""},setLevel:function(e){const{labels:t,values:n}=this.levels;if("number"==typeof e){if(void 0===t[e])throw Error("unknown level value"+e);e=t[e]}if(void 0===n[e])throw Error("unknown level "+e);const r=this[Li],s=this[Li]=n[e],i=this[Mi],o=this[$i],a=this[Fi].logMethod;for(const e in n)this[e]=!1!==o(n[e],s)?Yi(e,i)?zi[e](a):Hi(n[e],a):Ui;this.emit("level-change",e,s,t[r],r,this)},isLevelEnabled:function(e){const{values:t}=this.levels,n=t[e];return void 0!==n&&this[$i](n,this[Li])},mappings:function(e=null,t=!1){const n=e?Object.keys(e).reduce(((t,n)=>(t[e[n]]=n,t)),{}):null;return{labels:Object.assign(Object.create(Object.prototype,{Infinity:{value:"silent"}}),t?null:Vi,n),values:Object.assign(Object.create(Object.prototype,{silent:{value:1/0}}),t?null:Gi,e)}},assertNoLevelCollisions:function(e,t){const{labels:n,values:r}=e;for(const e in t){if(e in r)throw Error("levels cannot be overridden");if(t[e]in n)throw Error("pre-existing level values cannot be used for new levels")}},assertDefaultLevelFound:function(e,t,n){if("number"!=typeof e){if(!(e in Object.assign(Object.create(Object.prototype,{silent:{value:1/0}}),n?null:Gi,t)))throw Error(`default level:${e} must be included in custom levels`)}else if(![].concat(Object.keys(t||{}).map((e=>t[e])),n?[]:Object.keys(Vi).map((e=>+e)),1/0).includes(e))throw Error(`default level:${e} must be included in custom levels`)},genLevelComparison:function(e){return"string"==typeof e?Ki.bind(null,e):e},assertLevelComparison:function(e){if("function"!=typeof e&&("string"!=typeof e||!Object.values(qi).includes(e)))throw Error('Levels comparison should be one of "ASC", "DESC" or "function" type')}},Wi={version:"9.2.0"};const{EventEmitter:Ji}=a,{lsCacheSym:Xi,levelValSym:Zi,setLevelSym:eo,getLevelSym:to,chindingsSym:no,parsedChindingsSym:ro,mixinSym:so,asJsonSym:io,writeSym:oo,mixinMergeStrategySym:ao,timeSym:co,timeSliceIndexSym:lo,streamSym:uo,serializersSym:po,formattersSym:ho,errorKeySym:fo,messageKeySym:mo,useOnlyCustomLevelsSym:go,needsMetadataGsym:yo,redactFmtSym:vo,stringifySym:bo,formatOptsSym:Eo,stringifiersSym:_o,msgPrefixSym:Ao}=es,{getLevel:So,setLevel:To,isLevelEnabled:wo,mappings:xo,initialLsCache:ko,genLsCache:Co,assertNoLevelCollisions:Io}=Qi,{asChindings:Ro,asJson:Oo,buildFormatters:No,stringify:Do}=Ni,{version:Po}=Wi,Lo=ls,Mo={constructor:class{},child:function(e,t){if(!e)throw Error("missing bindings for child Pino");t=t||{};const n=this[po],r=this[ho],s=Object.create(this);if(!0===t.hasOwnProperty("serializers")){s[po]=Object.create(null);for(const e in n)s[po][e]=n[e];const e=Object.getOwnPropertySymbols(n);for(var i=0;e.length>i;i++){const t=e[i];s[po][t]=n[t]}for(const e in t.serializers)s[po][e]=t.serializers[e];const r=Object.getOwnPropertySymbols(t.serializers);for(var o=0;r.length>o;o++){const e=r[o];s[po][e]=t.serializers[e]}}else s[po]=n;if(t.hasOwnProperty("formatters")){const{level:e,bindings:n,log:i}=t.formatters;s[ho]=No(e||r.level,n||Bo,i||r.log)}else s[ho]=No(r.level,Bo,r.log);if(!0===t.hasOwnProperty("customLevels")&&(Io(this.levels,t.customLevels),s.levels=xo(t.customLevels,s[go]),Co(s)),"object"==typeof t.redact&&null!==t.redact||Array.isArray(t.redact)){s.redact=t.redact;const e=Lo(s.redact,Do),n={stringify:e[vo]};s[bo]=Do,s[_o]=e,s[Eo]=n}return"string"==typeof t.msgPrefix&&(s[Ao]=(this[Ao]||"")+t.msgPrefix),s[no]=Ro(s,e),s[eo](t.level||this.level),this.onChild(s),s},bindings:function(){const e=`{${this[no].substr(1)}}`,t=JSON.parse(e);return delete t.pid,delete t.hostname,t},setBindings:function(e){const t=Ro(this,e);this[no]=t,delete this[ro]},flush:function(e){if(null!=e&&"function"!=typeof e)throw Error("callback must be a function");const t=this[uo];"function"==typeof t.flush?t.flush(e||Fo):e&&e()},isLevelEnabled:wo,version:Po,get level(){return this[to]()},set level(e){this[eo](e)},get levelVal(){return this[Zi]},set levelVal(e){throw Error("levelVal is read-only")},[Xi]:ko,[oo]:function(e,t,n){const r=this[co](),s=this[so],i=this[fo],o=this[mo],a=this[ao]||jo;let c;null==e?c={}:e instanceof Error?(c={[i]:e},void 0===t&&(t=e.message)):(c=e,void 0===t&&void 0===e[o]&&e[i]&&(t=e[i].message)),s&&(c=a(c,s(c,n,this)));const l=this[io](c,t,n,r),u=this[uo];!0===u[yo]&&(u.lastLevel=n,u.lastObj=c,u.lastMsg=t,u.lastTime=r.slice(this[lo]),u.lastLogger=this),u.write(l)},[io]:Oo,[to]:So,[eo]:To};Object.setPrototypeOf(Mo,Ji.prototype);const Bo=e=>e;function jo(e,t){return Object.assign(t,e)}function Fo(){}var $o={exports:{}};!function(e,t){const{hasOwnProperty:n}=Object.prototype,r=h();r.configure=h,r.stringify=r,r.default=r,t.stringify=r,t.configure=h,e.exports=r;const s=/[\u0000-\u001f\u0022\u005c\ud800-\udfff]|[\ud800-\udbff](?![\udc00-\udfff])|(?:[^\ud800-\udbff]|^)[\udc00-\udfff]/;function i(e){return 5e3>e.length&&!s.test(e)?`"${e}"`:JSON.stringify(e)}function o(e){if(e.length>200)return e.sort();for(let t=1;e.length>t;t++){const n=e[t];let r=t;for(;0!==r&&e[r-1]>n;)e[r]=e[r-1],r--;e[r]=n}return e}const a=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(Object.getPrototypeOf(new Int8Array)),Symbol.toStringTag).get;function c(e){return void 0!==a.call(e)&&0!==e.length}function l(e,t,n){n>e.length&&(n=e.length);const r=","===t?"":" ";let s=`"0":${r}${e[0]}`;for(let i=1;n>i;i++)s+=`${t}"${i}":${r}${e[i]}`;return s}function u(e,t){let r;if(n.call(e,t)&&(r=e[t],"boolean"!=typeof r))throw new TypeError(`The "${t}" argument must be of type boolean`);return void 0===r||r}function p(e,t){let r;if(n.call(e,t)){if(r=e[t],"number"!=typeof r)throw new TypeError(`The "${t}" argument must be of type number`);if(!Number.isInteger(r))throw new TypeError(`The "${t}" argument must be an integer`);if(1>r)throw new RangeError(`The "${t}" argument must be >= 1`)}return void 0===r?1/0:r}function d(e){return 1===e?"1 item":e+" items"}function h(e){const t=function(e){if(n.call(e,"strict")){const t=e.strict;if("boolean"!=typeof t)throw new TypeError('The "strict" argument must be of type boolean');if(t)return e=>{let t="Object can not safely be stringified. Received type "+typeof e;throw"function"!=typeof e&&(t+=` (${""+e})`),Error(t)}}}(e={...e});t&&(void 0===e.bigint&&(e.bigint=!1),"circularValue"in e||(e.circularValue=Error));const r=function(e){if(n.call(e,"circularValue")){const t=e.circularValue;if("string"==typeof t)return`"${t}"`;if(null==t)return t;if(t===Error||t===TypeError)return{toString(){throw new TypeError("Converting circular structure to JSON")}};throw new TypeError('The "circularValue" argument must be of type string or the value null or undefined')}return'"[Circular]"'}(e),s=u(e,"bigint"),a=u(e,"deterministic"),h=p(e,"maximumDepth"),f=p(e,"maximumBreadth");function m(e,n,l,u,p,g){let y=n[e];switch("object"==typeof y&&null!==y&&"function"==typeof y.toJSON&&(y=y.toJSON(e)),y=u.call(n,e,y),typeof y){case"string":return i(y);case"object":{if(null===y)return"null";if(-1!==l.indexOf(y))return r;let e="",t=",";const n=g;if(Array.isArray(y)){if(0===y.length)return"[]";if(l.length+1>h)return'"[Array]"';l.push(y),""!==p&&(e+="\n"+(g+=p),t=",\n"+g);const r=Math.min(y.length,f);let s=0;for(;r-1>s;s++){const n=m(s+"",y,l,u,p,g);e+=void 0!==n?n:"null",e+=t}const i=m(s+"",y,l,u,p,g);return e+=void 0!==i?i:"null",y.length-1>f&&(e+=`${t}"... ${d(y.length-f-1)} not stringified"`),""!==p&&(e+="\n"+n),l.pop(),`[${e}]`}let s=Object.keys(y);const v=s.length;if(0===v)return"{}";if(l.length+1>h)return'"[Object]"';let b="",E="";""!==p&&(t=",\n"+(g+=p),b=" ");const _=Math.min(v,f);a&&!c(y)&&(s=o(s)),l.push(y);for(let n=0;_>n;n++){const r=s[n],o=m(r,y,l,u,p,g);void 0!==o&&(e+=`${E}${i(r)}:${b}${o}`,E=t)}return v>f&&(e+=`${E}"...":${b}"${d(v-f)} not stringified"`,E=t),""!==p&&E.length>1&&(e=`\n${g}${e}\n${n}`),l.pop(),`{${e}}`}case"number":return isFinite(y)?y+"":t?t(y):"null";case"boolean":return!0===y?"true":"false";case"undefined":return;case"bigint":if(s)return y+"";default:return t?t(y):void 0}}function g(e,n,o,a,c,l){switch("object"==typeof n&&null!==n&&"function"==typeof n.toJSON&&(n=n.toJSON(e)),typeof n){case"string":return i(n);case"object":{if(null===n)return"null";if(-1!==o.indexOf(n))return r;const e=l;let t="",s=",";if(Array.isArray(n)){if(0===n.length)return"[]";if(o.length+1>h)return'"[Array]"';o.push(n),""!==c&&(t+="\n"+(l+=c),s=",\n"+l);const r=Math.min(n.length,f);let i=0;for(;r-1>i;i++){const e=g(i+"",n[i],o,a,c,l);t+=void 0!==e?e:"null",t+=s}const u=g(i+"",n[i],o,a,c,l);return t+=void 0!==u?u:"null",n.length-1>f&&(t+=`${s}"... ${d(n.length-f-1)} not stringified"`),""!==c&&(t+="\n"+e),o.pop(),`[${t}]`}o.push(n);let u="";""!==c&&(s=",\n"+(l+=c),u=" ");let p="";for(const e of a){const r=g(e,n[e],o,a,c,l);void 0!==r&&(t+=`${p}${i(e)}:${u}${r}`,p=s)}return""!==c&&p.length>1&&(t=`\n${l}${t}\n${e}`),o.pop(),`{${t}}`}case"number":return isFinite(n)?n+"":t?t(n):"null";case"boolean":return!0===n?"true":"false";case"undefined":return;case"bigint":if(s)return n+"";default:return t?t(n):void 0}}function y(e,n,u,p,m){switch(typeof n){case"string":return i(n);case"object":{if(null===n)return"null";if("function"==typeof n.toJSON){if("object"!=typeof(n=n.toJSON(e)))return y(e,n,u,p,m);if(null===n)return"null"}if(-1!==u.indexOf(n))return r;const t=m;if(Array.isArray(n)){if(0===n.length)return"[]";if(u.length+1>h)return'"[Array]"';u.push(n);let e="\n"+(m+=p);const r=",\n"+m,s=Math.min(n.length,f);let i=0;for(;s-1>i;i++){const t=y(i+"",n[i],u,p,m);e+=void 0!==t?t:"null",e+=r}const o=y(i+"",n[i],u,p,m);return e+=void 0!==o?o:"null",n.length-1>f&&(e+=`${r}"... ${d(n.length-f-1)} not stringified"`),e+="\n"+t,u.pop(),`[${e}]`}let s=Object.keys(n);const g=s.length;if(0===g)return"{}";if(u.length+1>h)return'"[Object]"';const v=",\n"+(m+=p);let b="",E="",_=Math.min(g,f);c(n)&&(b+=l(n,v,f),s=s.slice(n.length),_-=n.length,E=v),a&&(s=o(s)),u.push(n);for(let e=0;_>e;e++){const t=s[e],r=y(t,n[t],u,p,m);void 0!==r&&(b+=`${E}${i(t)}: ${r}`,E=v)}return g>f&&(b+=`${E}"...": "${d(g-f)} not stringified"`,E=v),""!==E&&(b=`\n${m}${b}\n${t}`),u.pop(),`{${b}}`}case"number":return isFinite(n)?n+"":t?t(n):"null";case"boolean":return!0===n?"true":"false";case"undefined":return;case"bigint":if(s)return n+"";default:return t?t(n):void 0}}function v(e,n,u){switch(typeof n){case"string":return i(n);case"object":{if(null===n)return"null";if("function"==typeof n.toJSON){if("object"!=typeof(n=n.toJSON(e)))return v(e,n,u);if(null===n)return"null"}if(-1!==u.indexOf(n))return r;let t="";if(Array.isArray(n)){if(0===n.length)return"[]";if(u.length+1>h)return'"[Array]"';u.push(n);const e=Math.min(n.length,f);let r=0;for(;e-1>r;r++){const e=v(r+"",n[r],u);t+=void 0!==e?e:"null",t+=","}const s=v(r+"",n[r],u);return t+=void 0!==s?s:"null",n.length-1>f&&(t+=`,"... ${d(n.length-f-1)} not stringified"`),u.pop(),`[${t}]`}let s=Object.keys(n);const p=s.length;if(0===p)return"{}";if(u.length+1>h)return'"[Object]"';let m="",g=Math.min(p,f);c(n)&&(t+=l(n,",",f),s=s.slice(n.length),g-=n.length,m=","),a&&(s=o(s)),u.push(n);for(let e=0;g>e;e++){const r=s[e],o=v(r,n[r],u);void 0!==o&&(t+=`${m}${i(r)}:${o}`,m=",")}return p>f&&(t+=`${m}"...":"${d(p-f)} not stringified"`),u.pop(),`{${t}}`}case"number":return isFinite(n)?n+"":t?t(n):"null";case"boolean":return!0===n?"true":"false";case"undefined":return;case"bigint":if(s)return n+"";default:return t?t(n):void 0}}return function(e,t,n){if(arguments.length>1){let r="";if("number"==typeof n?r=" ".repeat(Math.min(n,10)):"string"==typeof n&&(r=n.slice(0,10)),null!=t){if("function"==typeof t)return m("",{"":e},[],t,r,"");if(Array.isArray(t))return g("",e,[],function(e){const t=new Set;for(const n of e)"string"!=typeof n&&"number"!=typeof n||t.add(n+"");return t}(t),r,"")}if(0!==r.length)return y("",e,[],r,"")}return v("",e,[])}}}($o,$o.exports);var Uo,Ho,Go=$o.exports;const qo=o,zo=tr,Vo=rr,Yo=ls,Ko=us,Qo=es,{configure:Wo}=Go,{assertDefaultLevelFound:Jo,mappings:Xo,genLsCache:Zo,genLevelComparison:ea,assertLevelComparison:ta}=Qi,{DEFAULT_LEVELS:na,SORTING_ORDER:ra}=Di,{createArgsNormalizer:sa,asChindings:ia,buildSafeSonicBoom:oa,buildFormatters:aa,stringify:ca,normalizeDestFileDescriptor:la,noop:ua}=Ni,{version:pa}=Wi,{chindingsSym:da,redactFmtSym:ha,serializersSym:fa,timeSym:ma,timeSliceIndexSym:ga,streamSym:ya,stringifySym:va,stringifySafeSym:ba,stringifiersSym:Ea,setLevelSym:_a,endSym:Aa,formatOptsSym:Sa,messageKeySym:Ta,errorKeySym:wa,nestedKeySym:xa,mixinSym:ka,levelCompSym:Ca,useOnlyCustomLevelsSym:Ia,formattersSym:Ra,hooksSym:Oa,nestedKeyStrSym:Na,mixinMergeStrategySym:Da,msgPrefixSym:Pa}=Qo,{epochTime:La,nullTime:Ma}=Ko,{pid:Ba}=process,ja=qo.hostname(),Fa=zo.err,$a={level:"info",levelComparison:ra.ASC,levels:na,messageKey:"msg",errorKey:"err",nestedKey:null,enabled:!0,base:{pid:Ba,hostname:ja},serializers:Object.assign(Object.create(null),{err:Fa}),formatters:Object.assign(Object.create(null),{bindings:e=>e,level:(e,t)=>({level:t})}),hooks:{logMethod:void 0},timestamp:La,name:void 0,redact:null,customLevels:null,useOnlyCustomLevels:!1,depthLimit:5,edgeLimit:100},Ua=sa($a),Ha=Object.assign(Object.create(null),zo);function Ga(...e){const t={},{opts:n,stream:r}=Ua(t,Vo(),...e),{redact:s,crlf:i,serializers:o,timestamp:a,messageKey:c,errorKey:l,nestedKey:u,base:p,name:d,level:h,customLevels:f,levelComparison:m,mixin:g,mixinMergeStrategy:y,useOnlyCustomLevels:v,formatters:b,hooks:E,depthLimit:_,edgeLimit:A,onChild:S,msgPrefix:T}=n,w=Wo({maximumDepth:_,maximumBreadth:A}),x=aa(b.level,b.bindings,b.log),k=ca.bind({[ba]:w}),C=s?Yo(s,k):{},I=s?{stringify:C[ha]}:{stringify:k},R="}"+(i?"\r\n":"\n"),O=ia.bind(null,{[da]:"",[fa]:o,[Ea]:C,[va]:ca,[ba]:w,[Ra]:x});let N="";null!==p&&(N=O(void 0===d?p:Object.assign({},p,{name:d})));const D=a instanceof Function?a:a?La:Ma,P=D().indexOf(":")+1;if(v&&!f)throw Error("customLevels is required if useOnlyCustomLevels is set true");if(g&&"function"!=typeof g)throw Error(`Unknown mixin type "${typeof g}" - expected "function"`);if(T&&"string"!=typeof T)throw Error(`Unknown msgPrefix type "${typeof T}" - expected "string"`);Jo(h,f,v);const L=Xo(f,v);"function"==typeof r.emit&&r.emit("message",{code:"PINO_CONFIG",config:{levels:L,messageKey:c,errorKey:l}}),ta(m);const M=ea(m);return Object.assign(t,{levels:L,[Ca]:M,[Ia]:v,[ya]:r,[ma]:D,[ga]:P,[va]:ca,[ba]:w,[Ea]:C,[Aa]:R,[Sa]:I,[Ta]:c,[wa]:l,[xa]:u,[Na]:u?`,${JSON.stringify(u)}:{`:"",[fa]:o,[ka]:g,[Da]:y,[da]:N,[Ra]:x,[Oa]:E,silent:ua,onChild:S,[Pa]:T}),Object.setPrototypeOf(t,Object.create(Mo)),Zo(t),t[_a](h),t}An.exports=Ga,An.exports.destination=(e=process.stdout.fd)=>"object"==typeof e?(e.dest=la(e.dest||process.stdout.fd),oa(e)):oa({dest:la(e),minLength:0}),An.exports.transport=ri(),An.exports.multistream=function(){if(Ho)return Uo;Ho=1;const e=Symbol.for("pino.metadata"),{DEFAULT_LEVELS:t}=Di,n=t.info;function r(e,t){return e.level-t.level}function s(e,t){return t?e-1:e+1}function i(e,t,n){return n?e>=0:t>e}return Uo=function(o,a){let c=0;o=o||[],a=a||{dedupe:!1};const l=Object.create(t);l.silent=1/0,a.levels&&"object"==typeof a.levels&&Object.keys(a.levels).forEach((e=>{l[e]=a.levels[e]}));const u={write:p,add:f,emit:d,flushSync:h,end:function(){for(const{stream:e}of this.streams)"function"==typeof e.flushSync&&e.flushSync(),e.end()},minLevel:0,streams:[],clone:function t(n){const r=Array(this.streams.length);for(let e=0;r.length>e;e++)r[e]={level:n,stream:this.streams[e].stream};return{write:p,add:f,minLevel:n,streams:r,clone:t,emit:d,flushSync:h,[e]:!0}},[e]:!0,streamLevels:l};return Array.isArray(o)?o.forEach(f,u):f.call(u,o),o=null,u;function p(t){let n;const r=this.lastLevel,{streams:o}=this;let c,l=0;for(let u=a.dedupe?o.length-1:0;i(u,o.length,a.dedupe);u=s(u,a.dedupe))if(n=o[u],n.level>r){if(!a.dedupe)break}else{if(0!==l&&l!==n.level)break;if(c=n.stream,c[e]){const{lastTime:e,lastMsg:t,lastObj:n,lastLogger:s}=this;c.lastLevel=r,c.lastTime=e,c.lastMsg=t,c.lastObj=n,c.lastLogger=s}c.write(t),a.dedupe&&(l=n.level)}}function d(...e){for(const{stream:t}of this.streams)"function"==typeof t.emit&&t.emit(...e)}function h(){for(const{stream:e}of this.streams)"function"==typeof e.flushSync&&e.flushSync()}function f(e){if(!e)return u;const t=e.write?e:e.stream;if("function"!=typeof e.write&&!e.stream)throw Error("stream object needs to implement either StreamEntry or DestinationStream interface");const{streams:s,streamLevels:i}=this;let o;o="number"==typeof e.levelVal?e.levelVal:"string"==typeof e.level?i[e.level]:"number"==typeof e.level?e.level:n;const a={stream:t,level:o,levelVal:void 0,id:c++};return s.unshift(a),s.sort(r),this.minLevel=s[0].level,u}},Uo}(),An.exports.levels=Xo(),An.exports.stdSerializers=Ha;var qa=An.exports.stdTimeFunctions=Object.assign({},Ko);An.exports.symbols=Qo,An.exports.version=pa,An.exports.default=Ga,An.exports.pino=Ga;const za=_n,Va=An.exports,{serializersSym:Ya}=Va.symbols,{FST_ERR_LOG_INVALID_DESTINATION:Ka,FST_ERR_LOG_INVALID_LOGGER:Qa}=dt;function Wa(e){if(e.stream&&e.file)throw new Ka;e.file&&(e.stream=Va.destination(e.file),delete e.file);const t=e.logger,n=e.genReqId;let r=null;return t?(e.logger=void 0,e.genReqId=void 0,t[Ya]&&(e.serializers=Object.assign({},e.serializers,t[Ya])),r=t.child({},e),e.logger=t,e.genReqId=n):r=Va(e,e.stream),r}const Ja={req:function(e){return{method:e.method,url:e.url,version:e.headers&&e.headers["accept-version"],hostname:e.hostname,remoteAddress:e.ip,remotePort:e.socket?e.socket.remotePort:void 0}},err:Va.stdSerializers.err,res:function(e){return{statusCode:e.statusCode}}};function Xa(e,t){const n=["info","error","debug","fatal","warn","trace","child"],r=e?n.filter((t=>!e[t]||"function"!=typeof e[t])):n;if(r.length){if(r.length!==n.length||t)throw Qa(r.join(","));return!1}return!0}function Za(e,t,n){return e.child(t,n)}var ec={createLogger:function(e){if(!e.logger){const e=za;return e.child=()=>e,{logger:e,hasLogger:!1}}if(Xa(e.logger))return{logger:Wa({logger:e.logger,serializers:Object.assign({},Ja,e.logger.serializers)}),hasLogger:!0};const t={};return"[object Object]"==={}.toString.call(e.logger)&&Reflect.ownKeys(e.logger).forEach((n=>{Object.defineProperty(t,n,{value:e.logger[n],writable:!0,enumerable:!0,configurable:!0})})),t.level=t.level||"info",t.serializers=Object.assign({},Ja,t.serializers),e.logger=t,{logger:Wa(e.logger),hasLogger:!0}},createChildLogger:function(e,t,n,r,s){const i=e.childLoggerFactory.call(e.server,t,{[e.requestIdLogLabel]:r},s||{},n);return e.childLoggerFactory!==Za&&Xa(i,!0),i},defaultChildLoggerFactory:Za,serializers:Ja,now:function(){const e=process.hrtime();return 1e3*e[0]+e[1]/1e6}},tc=function(e){if((e=e||{}).circles)return function(e){const t=[],n=[],r=new Map;if(r.set(Date,(e=>new Date(e))),r.set(Map,((e,t)=>new Map(i(Array.from(e),t)))),r.set(Set,((e,t)=>new Set(i(Array.from(e),t)))),e.constructorHandlers)for(const t of e.constructorHandlers)r.set(t[0],t[1]);let s=null;return e.proto?function e(o){if("object"!=typeof o||null===o)return o;if(Array.isArray(o))return i(o,e);if(o.constructor!==Object&&(s=r.get(o.constructor)))return s(o,e);const a={};t.push(o),n.push(a);for(const i in o){const c=o[i];if("object"!=typeof c||null===c)a[i]=c;else if(c.constructor!==Object&&(s=r.get(c.constructor)))a[i]=s(c,e);else if(ArrayBuffer.isView(c))a[i]=nc(c);else{const r=t.indexOf(c);a[i]=-1!==r?n[r]:e(c)}}return t.pop(),n.pop(),a}:function e(o){if("object"!=typeof o||null===o)return o;if(Array.isArray(o))return i(o,e);if(o.constructor!==Object&&(s=r.get(o.constructor)))return s(o,e);const a={};t.push(o),n.push(a);for(const i in o){if(!1===Object.hasOwnProperty.call(o,i))continue;const c=o[i];if("object"!=typeof c||null===c)a[i]=c;else if(c.constructor!==Object&&(s=r.get(c.constructor)))a[i]=s(c,e);else if(ArrayBuffer.isView(c))a[i]=nc(c);else{const r=t.indexOf(c);a[i]=-1!==r?n[r]:e(c)}}return t.pop(),n.pop(),a};function i(e,i){const o=Object.keys(e),a=Array(o.length);for(let c=0;o.length>c;c++){const l=o[c],u=e[l];if("object"!=typeof u||null===u)a[l]=u;else if(u.constructor!==Object&&(s=r.get(u.constructor)))a[l]=s(u,i);else if(ArrayBuffer.isView(u))a[l]=nc(u);else{const e=t.indexOf(u);a[l]=-1!==e?n[e]:i(u)}}return a}}(e);const t=new Map;if(t.set(Date,(e=>new Date(e))),t.set(Map,((e,t)=>new Map(r(Array.from(e),t)))),t.set(Set,((e,t)=>new Set(r(Array.from(e),t)))),e.constructorHandlers)for(const n of e.constructorHandlers)t.set(n[0],n[1]);let n=null;return e.proto?function e(s){if("object"!=typeof s||null===s)return s;if(Array.isArray(s))return r(s,e);if(s.constructor!==Object&&(n=t.get(s.constructor)))return n(s,e);const i={};for(const r in s){const o=s[r];i[r]="object"!=typeof o||null===o?o:o.constructor!==Object&&(n=t.get(o.constructor))?n(o,e):ArrayBuffer.isView(o)?nc(o):e(o)}return i}:function e(s){if("object"!=typeof s||null===s)return s;if(Array.isArray(s))return r(s,e);if(s.constructor!==Object&&(n=t.get(s.constructor)))return n(s,e);const i={};for(const r in s){if(!1===Object.hasOwnProperty.call(s,r))continue;const o=s[r];i[r]="object"!=typeof o||null===o?o:o.constructor!==Object&&(n=t.get(o.constructor))?n(o,e):ArrayBuffer.isView(o)?nc(o):e(o)}return i};function r(e,r){const s=Object.keys(e),i=Array(s.length);for(let o=0;s.length>o;o++){const a=s[o],c=e[a];i[a]="object"!=typeof c||null===c?c:c.constructor!==Object&&(n=t.get(c.constructor))?n(c,r):ArrayBuffer.isView(c)?nc(c):r(c)}return i}};function nc(e){return e instanceof Buffer?Buffer.from(e):new e.constructor(e.buffer.slice(),e.byteOffset,e.length)}const rc=tc({circles:!1,proto:!0}),{kSchemaVisited:sc,kSchemaResponse:ic}=Ze,oc=Symbol.for("fluent-schema-object"),{FST_ERR_SCH_MISSING_ID:ac,FST_ERR_SCH_ALREADY_PRESENT:cc,FST_ERR_SCH_DUPLICATE:lc,FST_ERR_SCH_CONTENT_MISSING_SCHEMA:uc}=dt,pc=["params","body","querystring","query","headers"];function dc(e){this.store=e||{}}function hc(e){return"object"==typeof e&&Object.getPrototypeOf(e)!==Object.prototype}function fc(e,t){return!t||e.$ref||e.oneOf||e.allOf||e.anyOf||e.$merge||e.$patch||e.type||e.properties?e:{type:"object",properties:e}}dc.prototype.add=function(e){const t=rc(e.isFluentSchema||e.isFluentJSONSchema||e[oc]?e.valueOf():e),n=t.$id;if(!n)throw new ac;if(this.store[n])throw new cc(n);this.store[n]=t},dc.prototype.getSchemas=function(){return Object.assign({},this.store)},dc.prototype.getSchema=function(e){return this.store[e]};var mc={buildSchemas:e=>new dc(e),getSchemaSerializer:function(e,t,n){const r=e[ic];if(!r)return!1;if(r[t]){if(r[t].constructor===Object&&n){const e=n.split(";",1)[0];return!!r[t][e]&&r[t][e]}return r[t]}const s=(t+"")[0]+"xx";if(r[s]){if(r[s].constructor===Object&&n){const e=n.split(";",1)[0];return!!r[s][e]&&r[s][e]}return r[s]}if(r.default){if(r.default.constructor===Object&&n){const e=n.split(";",1)[0];return!!r.default[e]&&r.default[e]}return r.default}return!1},normalizeSchema:function(e,t){if(e[sc])return e;if(e.query){if(e.querystring)throw new lc("querystring");e.querystring=e.query}!function(e){for(const t of pc)e[t]&&(e[t].isFluentSchema||e[t][oc])&&(e[t]=e[t].valueOf());if(e.response){const t=Object.keys(e.response);for(const n of t)(e.response[n].isFluentSchema||e.response[n][oc])&&(e.response[n]=e.response[n].valueOf())}}(e);for(const n of pc){const r=e[n];r&&!hc(r)&&(e[n]=fc(r,t.jsonShorthand))}if(e.response){const n=Object.keys(e.response);for(const r of n){if(hc(e.response[r]))continue;const n=e.response[r].content;let s=!1;if(n){const i=Object.keys(n);for(let o=0;i.length>o;o++){const a=i[o];if(!n[a].schema){if(1===i.length)break;throw new uc(a)}e.response[r].content[a].schema=fc(n[a].schema,t.jsonShorthand),o===i.length-1&&(s=!0)}}s||(e.response[r]=fc(e.response[r],t.jsonShorthand))}}return e[sc]=!0,e}};const gc=/[\u0000-\u001f\u0022\u005c\ud800-\udfff]/;var yc=class e{constructor(e){switch(e&&e.rounding){case"floor":this.parseInteger=Math.floor;break;case"ceil":this.parseInteger=Math.ceil;break;case"round":this.parseInteger=Math.round;break;default:this.parseInteger=Math.trunc}this._options=e}asInteger(e){if(Number.isInteger(e))return""+e;if("bigint"==typeof e)return""+e;const t=this.parseInteger(e);if(t===1/0||t===-1/0||t!=t)throw Error(`The value "${e}" cannot be converted to an integer.`);return""+t}asNumber(e){const t=+e;if(t!=t)throw Error(`The value "${e}" cannot be converted to a number.`);return t===1/0||t===-1/0?"null":""+t}asBoolean(e){return e?"true":"false"}asDateTime(e){if(null===e)return'""';if(e instanceof Date)return'"'+e.toISOString()+'"';if("string"==typeof e)return'"'+e+'"';throw Error(`The value "${e}" cannot be converted to a date-time.`)}asDate(e){if(null===e)return'""';if(e instanceof Date)return'"'+new Date(e.getTime()-6e4*e.getTimezoneOffset()).toISOString().slice(0,10)+'"';if("string"==typeof e)return'"'+e+'"';throw Error(`The value "${e}" cannot be converted to a date.`)}asTime(e){if(null===e)return'""';if(e instanceof Date)return'"'+new Date(e.getTime()-6e4*e.getTimezoneOffset()).toISOString().slice(11,19)+'"';if("string"==typeof e)return'"'+e+'"';throw Error(`The value "${e}" cannot be converted to a time.`)}asString(e){const t=e.length;if(42>t){let r="",s=-1,i=255;for(var n=0;t>n;n++)if(i=e.charCodeAt(n),34===i||92===i)-1===s&&(s=0),r+=e.slice(s,n)+"\\",s=n;else if(32>i||i>=55296&&57343>=i)return JSON.stringify(e);return-1===s&&'"'+e+'"'||'"'+r+e.slice(s)+'"'}return 5e3>t&&!1===gc.test(e)?'"'+e+'"':JSON.stringify(e)}asUnsafeString(e){return'"'+e+'"'}getState(){return this._options}static restoreFromState(t){return new e(t)}},vc=function(e,t){const n=",",r='"',s=r+r;return function(e){const i=e&&"function"==typeof e.toJSON?e.toJSON():e;if(null===i)return"{}";let o,a="{",c=!1;return o=i.statusCode,void 0!==o&&(!c&&(c=!0)||(a+=n),a+='"statusCode":',a+=t.asNumber(o)),o=i.code,void 0!==o&&(!c&&(c=!0)||(a+=n),a+='"code":',a+="string"!=typeof o?null===o?s:o instanceof Date?r+o.toISOString()+r:t.asString(o instanceof RegExp?o.source:""+o):t.asString(o)),o=i.error,void 0!==o&&(!c&&(c=!0)||(a+=n),a+='"error":',a+="string"!=typeof o?null===o?s:o instanceof Date?r+o.toISOString()+r:t.asString(o instanceof RegExp?o.source:""+o):t.asString(o)),o=i.message,void 0!==o&&(!c&&(c=!0)||(a+=n),a+='"message":',a+="string"!=typeof o?null===o?s:o instanceof Date?r+o.toISOString()+r:t.asString(o instanceof RegExp?o.source:""+o):t.asString(o)),a+"}"}}(0,yc.restoreFromState({mode:"standalone"}));const bc=n.STATUS_CODES,Ec=vn,{kReplyHeaders:_c,kReplyNextErrorHandler:Ac,kReplyIsRunningOnErrorHook:Sc,kReplyHasStatusCode:Tc,kRouteContext:wc,kDisableRequestLogging:xc}=Ze,{FST_ERR_REP_INVALID_PAYLOAD_TYPE:kc,FST_ERR_FAILED_ERROR_SERIALIZATION:Cc}=dt,{getSchemaSerializer:Ic}=mc,Rc=vc,Oc={func:function(e,t,n){if(function(e,t){const n=t.raw;let r=n.statusCode;r=400>r?500:r,null!=e&&(void 0!==e.headers&&t.headers(e.headers),400>e.status?400>e.statusCode||(r=e.statusCode):r=e.status),n.statusCode=r}(e,n),!n[Tc]||200===n.statusCode){const t=e.statusCode||e.status;n.code(400>t?500:t)}500>n.statusCode?n.log[xc]||n.log.info({res:n,err:e},e&&e.message):n.log[xc]||n.log.error({req:t,res:n,err:e},e&&e.message),n.send(e)},toJSON(){return this.func.name+"()"}};function Nc(e,t,n){const r=t.raw,s=t.statusCode;let i;t[_c]["content-type"]=t[_c]["content-type"]??"application/json; charset=utf-8";try{const n=Ic(t[wc],s,t[_c]["content-type"]);i=!1===n?Rc({error:bc[s+""],code:e.code,message:e.message,statusCode:s}):n(Object.create(e,{error:{value:bc[s+""]},message:{value:e.message},statusCode:{value:s}}))}catch(n){t.log[xc]||t.log.error({err:n,statusCode:r.statusCode},"The serializer for the given status code failed"),t.code(500),i=Rc(new Cc(n.message,e.message))}"string"==typeof i||Buffer.isBuffer(i)||(i=Rc(new kc(typeof i))),t[_c]["content-length"]=""+Buffer.byteLength(i),n(t,i)}var Dc={buildErrorHandler:function(e=Oc,t){if(!t)return e;const n=Object.create(e);return n.func=t,n},handleError:function(e,t,n){e[Sc]=!1;const r=e[wc];if(!1===e[Ac])return void Nc(t,e,(function(e,t){try{e.raw.writeHead(e.raw.statusCode,e[_c])}catch(t){e.log[xc]||e.log.warn({req:e.request,res:e,err:t},t&&t.message),e.raw.writeHead(e.raw.statusCode)}e.raw.end(t)}));const s=e[Ac]||r.errorHandler;e[Ac]=Object.getPrototypeOf(s),delete e[_c]["content-type"],delete e[_c]["content-length"];const i=s.func;if(!i)return e[Ac]=!1,void Nc(t,e,n);try{const n=i(t,e.request,e);void 0!==n&&(null!==n&&"function"==typeof n.then?Ec(n,e):e.send(n))}catch(t){e.send(t)}}};const Pc=i.finished,Lc=i.Readable,{kFourOhFourContext:Mc,kPublicRouteContext:Bc,kReplyErrorHandlerCalled:jc,kReplyHijacked:Fc,kReplyStartTime:$c,kReplyEndTime:Uc,kReplySerializer:Hc,kReplySerializerDefault:Gc,kReplyIsError:qc,kReplyHeaders:zc,kReplyTrailers:Vc,kReplyHasStatusCode:Yc,kReplyIsRunningOnErrorHook:Kc,kReplyNextErrorHandler:Qc,kDisableRequestLogging:Wc,kSchemaResponse:Jc,kReplyCacheSerializeFns:Xc,kSchemaController:Zc,kOptions:el,kRouteContext:tl}=Ze,{onSendHookRunner:nl,onResponseHookRunner:rl,preHandlerHookRunner:sl,preSerializationHookRunner:il}=Pt,ol=bn[Symbol.for("internals")],al=ec.now,{handleError:cl}=Dc,{getSchemaSerializer:ll}=mc,{FST_ERR_REP_INVALID_PAYLOAD_TYPE:ul,FST_ERR_REP_RESPONSE_BODY_CONSUMED:pl,FST_ERR_REP_ALREADY_SENT:dl,FST_ERR_REP_SENT_VALUE:hl,FST_ERR_SEND_INSIDE_ONERR:fl,FST_ERR_BAD_STATUS_CODE:ml,FST_ERR_BAD_TRAILER_NAME:gl,FST_ERR_BAD_TRAILER_VALUE:yl,FST_ERR_MISSING_SERIALIZATION_FN:vl,FST_ERR_MISSING_CONTENTTYPE_SERIALIZATION_FN:bl}=dt,{FSTDEP010:El,FSTDEP013:_l,FSTDEP019:Al,FSTDEP020:Sl,FSTDEP021:Tl}=ct,wl={}.toString;function xl(e,t,n){this.raw=e,this[Hc]=null,this[jc]=!1,this[qc]=!1,this[Kc]=!1,this.request=t,this[zc]={},this[Vc]=null,this[Yc]=!1,this[$c]=void 0,this.log=n}xl.props=[],Object.defineProperties(xl.prototype,{[tl]:{get(){return this.request[tl]}},context:{get(){return Al(),this.request[tl]}},elapsedTime:{get(){return void 0===this[$c]?0:(this[Uc]||al())-this[$c]}},server:{get(){return this.request[tl].server}},sent:{enumerable:!0,get(){return!0===(this[Fc]||this.raw.writableEnded)},set(e){if(El(),!0!==e)throw new hl;if(this.sent&&this[Fc])throw new dl(this.request.url,this.request.method);this[Fc]=!0}},statusCode:{get(){return this.raw.statusCode},set(e){this.code(e)}},[Bc]:{get(){return this.request[Bc]}}}),xl.prototype.hijack=function(){return this[Fc]=!0,this},xl.prototype.send=function(e){if(!0===this[Kc])throw new fl;if(this.sent)return this.log.warn({err:new dl(this.request.url,this.request.method)}),this;if(e instanceof Error||!0===this[qc])return this[qc]=!1,jl(this,e,Rl),this;if(void 0===e)return Rl(this,e),this;const t=this.getHeader("content-type"),n=void 0!==t;if(null!==e){if("function"==typeof e.pipe||"function"==typeof e.getReader||"[object Response]"===wl.call(e))return Rl(this,e),this;if(e?.buffer instanceof ArrayBuffer)return!1===n&&(this[zc]["content-type"]="application/octet-stream"),Rl(this,Buffer.isBuffer(e)?e:Buffer.from(e.buffer,e.byteOffset,e.byteLength)),this;if(!1===n&&"string"==typeof e)return this[zc]["content-type"]="text/plain; charset=utf-8",Rl(this,e),this}if(null!==this[Hc]){if("string"!=typeof e)return Cl(this,e),this;e=this[Hc](e)}else if(!1===n||t.indexOf("json")>-1){if(!1===n)this[zc]["content-type"]="application/json; charset=utf-8";else if(-1===t.indexOf("charset")){const e=t.trim();this[zc]["content-type"]=e.endsWith(";")?e+" charset=utf-8":e+"; charset=utf-8"}if("string"!=typeof e)return Cl(this,e),this}return Rl(this,e),this},xl.prototype.getHeader=function(e){e=e.toLowerCase();const t=this.raw;let n=this[zc][e];return void 0===n&&t.hasHeader(e)&&(n=t.getHeader(e)),n},xl.prototype.getHeaders=function(){return{...this.raw.getHeaders(),...this[zc]}},xl.prototype.hasHeader=function(e){return e=e.toLowerCase(),void 0!==this[zc][e]||this.raw.hasHeader(e)},xl.prototype.removeHeader=function(e){return delete this[zc][e.toLowerCase()],this},xl.prototype.header=function(e,t=""){return e=e.toLowerCase(),this[zc][e]&&"set-cookie"===e?("string"==typeof this[zc][e]&&(this[zc][e]=[this[zc][e]]),Array.isArray(t)?[].push.apply(this[zc][e],t):this[zc][e].push(t)):this[zc][e]=t,this},xl.prototype.headers=function(e){const t=Object.keys(e);for(var n=0;n!==t.length;++n){const r=t[n];this.header(r,e[r])}return this};const kl=new Set(["transfer-encoding","content-length","host","cache-control","max-forwards","te","authorization","set-cookie","content-encoding","content-type","content-range","trailer"]);function Cl(e,t){null!==e[tl].preSerialization?il(e[tl].preSerialization,e.request,e,t,Il):Il(null,0,e,t)}function Il(e,t,n,r){if(null==e){try{r=null!==n[Hc]?n[Hc](r):n[tl]&&n[tl][Gc]?n[tl][Gc](r,n.raw.statusCode):$l(n[tl],r,n.raw.statusCode,n[zc]["content-type"])}catch(e){return function(e,t){e.serialization=t[tl].config}(e,n),void jl(n,e)}Rl(n,r)}else jl(n,e)}function Rl(e,t){null!==e[tl].onSend?nl(e[tl].onSend,e.request,e,t,Ol):Dl(e,t)}function Ol(e,t,n,r){null!=e?jl(n,e):Dl(n,r)}function Nl(e,t){const n=e.raw;try{n.writeHead(t,e[zc])}catch(t){throw"ERR_HTTP_HEADERS_SENT"===t.code&&e.log.warn(`Reply was already sent, did you forget to "return reply" in the "${e.request.raw.url}" (${e.request.raw.method}) route?`),t}}function Dl(e,t){const n=e.raw,r=e.request;if(null!==e[Vc]){const t=Object.keys(e[Vc]);let n="";for(const r of t)"function"==typeof e[Vc][r]&&(n+=" ",n+=r);e.header("Transfer-Encoding","chunked"),e.header("Trailer",n.trim())}const s="[object Response]"===wl.call(t);s&&"number"==typeof t.status&&e.code(t.status);const i=n.statusCode;if(null==t)return 200>i||204===i||304===i||"HEAD"===r.method||null!==e[Vc]||(e[zc]["content-length"]="0"),Nl(e,i),void Bl(t,n,e);if(i>=100&&200>i||204===i)return e.removeHeader("content-type"),e.removeHeader("content-length"),Nl(e,i),Bl(void 0,n,e),void("function"==typeof t.resume&&(t.on("error",Ul),t.resume()));if("function"!=typeof t.pipe)if("function"!=typeof t.getReader)if(s){if("object"==typeof t.headers&&"function"==typeof t.headers.forEach)for(const[n,r]of t.headers)e.header(n,r);if(null!=t.body){if(t.bodyUsed)throw new pl;Ll(t.body,n,e)}}else{if("string"!=typeof t&&!Buffer.isBuffer(t))throw new ul(typeof t);if(null===e[Vc]){const n=e[zc]["content-length"];(!n||"HEAD"!==r.raw.method&&+n!==Buffer.byteLength(t))&&(e[zc]["content-length"]=""+Buffer.byteLength(t))}Nl(e,i),n.write(t),Bl(t,n,e)}else Ll(t,n,e);else Ml(t,n,e)}function Pl(e,t,n){"ERR_STREAM_PREMATURE_CLOSE"===t.code?e[Wc]||e.info({res:n},"stream closed prematurely"):e.warn({err:t},"response terminated with an error with headers already sent")}function Ll(e,t,n){Ml(Lc.fromWeb(e),t,n)}function Ml(e,t,n){let r=!0,s=!1;if(function(e,t,n){null!==n[Vc]&&e.on("end",(()=>Bl(null,t,n)))}(e,t,n),Pc(e,{readable:!0,writable:!1},(function(e){r=!1,null!=e&&(t.headersSent||!0===n.request.raw.aborted?(s||(s=!0,Pl(n.log,e,t)),t.destroy()):jl(n,e))})),Pc(t,(function(i){r&&(null!=i&&t.headersSent&&!s&&(s=!0,Pl(n.log,i,t)),"function"==typeof e.destroy?e.destroy():"function"==typeof e.close?e.close(Ul):"function"==typeof e.abort?e.abort():n.log.warn("stream payload does not end properly"))})),t.headersSent)n.log.warn("response will send, but you shouldn't use res.writeHead in stream mode");else for(const e in n[zc])t.setHeader(e,n[zc][e]);e.pipe(t)}function Bl(e,t,n){if(null===n[Vc])return void t.end(null,null,null);const r=Object.keys(n[Vc]),s={};let i=0,o=!0;function a(){0===i&&(t.addTrailers(s),t.end(null,null,null))}for(const c of r){if("function"!=typeof n[Vc][c])continue;function l(e,t){i++,e?n.log.debug(e):s[c]=t,process.nextTick(a)}o=!1,i--;const u=n[Vc][c](n,e,l);"object"==typeof u&&"function"==typeof u.then?u.then((e=>l(null,e)),l):null!=u&&(_l(),l(null,u))}o&&t.end(null,null,null)}function jl(e,t,n){null===e[tl].onError||e[Qc]?cl(e,t,n):(e[Kc]=!0,nl(e[tl].onError,e.request,e,t,(()=>cl(e,t,n))))}function Fl(e,t,n){if(n.log[Wc])return;const r=n.elapsedTime;null==e?n.log.info({res:n,responseTime:r},"request completed"):n.log.error({res:n,err:e,responseTime:r},"request errored")}function $l(e,t,n,r){const s=ll(e,n,r);return s?s(t):JSON.stringify(t)}function Ul(){}xl.prototype.trailer=function(e,t){if(e=e.toLowerCase(),kl.has(e))throw new gl(e);if("function"!=typeof t)throw new yl(e,typeof t);return null===this[Vc]&&(this[Vc]={}),this[Vc][e]=t,this},xl.prototype.hasTrailer=function(e){return void 0!==this[Vc]?.[e.toLowerCase()]},xl.prototype.removeTrailer=function(e){return null===this[Vc]||(this[Vc][e.toLowerCase()]=void 0),this},xl.prototype.code=function(e){const t=+e;if(isNaN(t)||100>t||t>599)throw new ml(e||e+"");return this.raw.statusCode=t,this[Yc]=!0,this},xl.prototype.status=xl.prototype.code,xl.prototype.getSerializationFunction=function(e,t){let n;return"string"==typeof e||"number"==typeof e?n="string"==typeof t?this[tl][Jc]?.[e]?.[t]:this[tl][Jc]?.[e]:"object"==typeof e&&(n=this[tl][Xc]?.get(e)),n},xl.prototype.compileSerializationSchema=function(e,t=null,n=null){const{request:r}=this,{method:s,url:i}=r;if(this[tl][Xc]?.has(e))return this[tl][Xc].get(e);const o=(this[tl].serializerCompiler||this.server[Zc].serializerCompiler||this.server[Zc].setupSerializer(this.server[el])||this.server[Zc].serializerCompiler)({schema:e,method:s,url:i,httpStatus:t,contentType:n});return null==this[tl][Xc]&&(this[tl][Xc]=new WeakMap),this[tl][Xc].set(e,o),o},xl.prototype.serializeInput=function(e,t,n,r){const s=n;let i;if(r=(n="string"==typeof t||"number"==typeof t?t:n)&&s!==n?s:r,null!=n){if(i=null!=r?this[tl][Jc]?.[n]?.[r]:this[tl][Jc]?.[n],null==i){if(r)throw new bl(n,r);throw new vl(n)}}else i=this[tl][Xc]?.has(t)?this[tl][Xc].get(t):this.compileSerializationSchema(t,n,r);return i(e)},xl.prototype.serialize=function(e){return null!==this[Hc]?this[Hc](e):this[tl]&&this[tl][Gc]?this[tl][Gc](e,this.raw.statusCode):$l(this[tl],e,this.raw.statusCode)},xl.prototype.serializer=function(e){return this[Hc]=e,this},xl.prototype.type=function(e){return this[zc]["content-type"]=e,this},xl.prototype.redirect=function(e,t){if("number"==typeof e){Tl();const n=t;t=e,e=n}return t||(t=this[Yc]?this.raw.statusCode:302),this.header("location",e).code(t).send()},xl.prototype.callNotFound=function(){return function(e){if(null===e[tl][Mc])return e.log.warn("Trying to send a NotFound error inside a 404 handler. Sending basic 404 response."),void e.code(404).send("404 Not Found");e.request[tl]=e[tl][Mc],null!==e[tl].preHandler?sl(e[tl].preHandler,e.request,e,ol.preHandlerCallback):ol.preHandlerCallback(null,e.request,e)}(this),this},xl.prototype.getResponseTime=function(){return Sl(),this.elapsedTime},xl.prototype.then=function(e,t){this.sent?e():Pc(this.raw,(n=>{n&&"ERR_STREAM_PREMATURE_CLOSE"!==n.code?t?t(n):this.log&&this.log.warn("unhandled rejection on reply.then"):e()}))},nn.exports=xl,nn.exports.buildReply=function(e){const t=e.props.slice();function n(e,n,r){var s;this.raw=e,this[qc]=!1,this[jc]=!1,this[Fc]=!1,this[Hc]=null,this.request=n,this[zc]={},this[Vc]=null,this[$c]=void 0,this[Uc]=void 0,this.log=r;for(var i=0;t.length>i;i++)this[(s=t[i]).key]=s.value}return Object.setPrototypeOf(n.prototype,e.prototype),Object.setPrototypeOf(n,e),n.parent=e,n.props=t,n},nn.exports.setupResponseListeners=function(e){e[$c]=al();const t=n=>{e[Uc]=al(),e.raw.removeListener("finish",t),e.raw.removeListener("error",t);const r=e[tl];r&&null!==r.onResponse?rl(r.onResponse,e.request,e,Fl):Fl(n,0,e)};e.raw.on("finish",t),e.raw.on("error",t)};var Hl,Gl=nn.exports,ql={exports:{}},zl={exports:{}},Vl={exports:{}};Hl=Vl,function(){var e,t,n,r,s,i,o,a;t={},null!==Hl&&Hl.exports?Hl.exports=t:this.ipaddr=t,o=function(e,t,n,r){var s,i;if(e.length!==t.length)throw Error("ipaddr: cannot match CIDR for objects with different lengths");for(s=0;r>0;){if(0>(i=n-r)&&(i=0),e[s]>>i!=t[s]>>i)return!1;r-=n,s+=1}return!0},t.subnetMatch=function(e,t,n){var r,s,i,o,a;for(i in null==n&&(n="unicast"),t)for(!(o=t[i])[0]||o[0]instanceof Array||(o=[o]),r=0,s=o.length;s>r;r++)if(a=o[r],e.kind()===a[0].kind()&&e.match.apply(e,a))return i;return n},t.IPv4=function(){function e(e){var t,n,r;if(4!==e.length)throw Error("ipaddr: ipv4 octet count should be 4");for(t=0,n=e.length;n>t;t++)if(0>(r=e[t])||r>255)throw Error("ipaddr: ipv4 octet should fit in 8 bits");this.octets=e}return e.prototype.kind=function(){return"ipv4"},e.prototype.toString=function(){return this.octets.join(".")},e.prototype.toNormalizedString=function(){return""+this},e.prototype.toByteArray=function(){return this.octets.slice(0)},e.prototype.match=function(e,t){var n;if(void 0===t&&(e=(n=e)[0],t=n[1]),"ipv4"!==e.kind())throw Error("ipaddr: cannot match ipv4 address with non-ipv4 one");return o(this.octets,e.octets,8,t)},e.prototype.SpecialRanges={unspecified:[[new e([0,0,0,0]),8]],broadcast:[[new e([255,255,255,255]),32]],multicast:[[new e([224,0,0,0]),4]],linkLocal:[[new e([169,254,0,0]),16]],loopback:[[new e([127,0,0,0]),8]],carrierGradeNat:[[new e([100,64,0,0]),10]],private:[[new e([10,0,0,0]),8],[new e([172,16,0,0]),12],[new e([192,168,0,0]),16]],reserved:[[new e([192,0,0,0]),24],[new e([192,0,2,0]),24],[new e([192,88,99,0]),24],[new e([198,51,100,0]),24],[new e([203,0,113,0]),24],[new e([240,0,0,0]),4]]},e.prototype.range=function(){return t.subnetMatch(this,this.SpecialRanges)},e.prototype.toIPv4MappedAddress=function(){return t.IPv6.parse("::ffff:"+this)},e.prototype.prefixLengthFromSubnetMask=function(){var e,t,n,r,s,i,o;for(o={0:8,128:7,192:6,224:5,240:4,248:3,252:2,254:1,255:0},e=0,s=!1,t=n=3;n>=0;t=n+=-1){if(!((r=this.octets[t])in o))return null;if(i=o[r],s&&0!==i)return null;8!==i&&(s=!0),e+=i}return 32-e},e}(),r={fourOctet:RegExp("^"+(n="(0?\\d+|0x[a-f0-9]+)")+"\\."+n+"\\."+n+"\\."+n+"$","i"),longValue:RegExp("^"+n+"$","i")},t.IPv4.parser=function(e){var t,n,s,i;if(n=function(e){return"0"===e[0]&&"x"!==e[1]?parseInt(e,8):parseInt(e)},t=e.match(r.fourOctet))return function(){var e,r,s,i;for(i=[],e=0,r=(s=t.slice(1,6)).length;r>e;e++)i.push(n(s[e]));return i}();if(t=e.match(r.longValue)){if((i=n(t[1]))>4294967295||0>i)throw Error("ipaddr: address outside defined range");return function(){var e,t;for(t=[],s=e=0;24>=e;s=e+=8)t.push(i>>s&255);return t}().reverse()}return null},t.IPv6=function(){function e(e,t){var n,r,s,i,o,a;if(16===e.length)for(this.parts=[],n=r=0;14>=r;n=r+=2)this.parts.push(e[n]<<8|e[n+1]);else{if(8!==e.length)throw Error("ipaddr: ipv6 part count should be 8 or 16");this.parts=e}for(s=0,i=(a=this.parts).length;i>s;s++)if(0>(o=a[s])||o>65535)throw Error("ipaddr: ipv6 part should fit in 16 bits");t&&(this.zoneId=t)}return e.prototype.kind=function(){return"ipv6"},e.prototype.toString=function(){return this.toNormalizedString().replace(/((^|:)(0(:|$))+)/,"::")},e.prototype.toRFC5952String=function(){var e,t,n,r,s;for(r=/((^|:)(0(:|$)){2,})/g,s=this.toNormalizedString(),e=0,t=-1;n=r.exec(s);)n[0].length>t&&(e=n.index,t=n[0].length);return 0>t?s:s.substring(0,e)+"::"+s.substring(e+t)},e.prototype.toByteArray=function(){var e,t,n,r,s;for(e=[],t=0,n=(s=this.parts).length;n>t;t++)e.push((r=s[t])>>8),e.push(255&r);return e},e.prototype.toNormalizedString=function(){var e,t;return e=function(){var e,t,n,r;for(r=[],e=0,t=(n=this.parts).length;t>e;e++)r.push(n[e].toString(16));return r}.call(this).join(":"),t="",this.zoneId&&(t="%"+this.zoneId),e+t},e.prototype.toFixedLengthString=function(){var e,t;return e=function(){var e,t,n,r;for(r=[],e=0,t=(n=this.parts).length;t>e;e++)r.push(n[e].toString(16).padStart(4,"0"));return r}.call(this).join(":"),t="",this.zoneId&&(t="%"+this.zoneId),e+t},e.prototype.match=function(e,t){var n;if(void 0===t&&(e=(n=e)[0],t=n[1]),"ipv6"!==e.kind())throw Error("ipaddr: cannot match ipv6 address with non-ipv6 one");return o(this.parts,e.parts,16,t)},e.prototype.SpecialRanges={unspecified:[new e([0,0,0,0,0,0,0,0]),128],linkLocal:[new e([65152,0,0,0,0,0,0,0]),10],multicast:[new e([65280,0,0,0,0,0,0,0]),8],loopback:[new e([0,0,0,0,0,0,0,1]),128],uniqueLocal:[new e([64512,0,0,0,0,0,0,0]),7],ipv4Mapped:[new e([0,0,0,0,0,65535,0,0]),96],rfc6145:[new e([0,0,0,0,65535,0,0,0]),96],rfc6052:[new e([100,65435,0,0,0,0,0,0]),96],"6to4":[new e([8194,0,0,0,0,0,0,0]),16],teredo:[new e([8193,0,0,0,0,0,0,0]),32],reserved:[[new e([8193,3512,0,0,0,0,0,0]),32]]},e.prototype.range=function(){return t.subnetMatch(this,this.SpecialRanges)},e.prototype.isIPv4MappedAddress=function(){return"ipv4Mapped"===this.range()},e.prototype.toIPv4Address=function(){var e,n,r;if(!this.isIPv4MappedAddress())throw Error("ipaddr: trying to convert a generic ipv6 address to ipv4");return r=this.parts.slice(-2),new t.IPv4([(e=r[0])>>8,255&e,(n=r[1])>>8,255&n])},e.prototype.prefixLengthFromSubnetMask=function(){var e,t,n,r,s,i,o;for(o={0:16,32768:15,49152:14,57344:13,61440:12,63488:11,64512:10,65024:9,65280:8,65408:7,65472:6,65504:5,65520:4,65528:3,65532:2,65534:1,65535:0},e=0,s=!1,t=n=7;n>=0;t=n+=-1){if(!((r=this.parts[t])in o))return null;if(i=o[r],s&&0!==i)return null;16!==i&&(s=!0),e+=i}return 128-e},e}(),s="(?:[0-9a-f]+::?)+",i={zoneIndex:RegExp(a="%[0-9a-z]{1,}","i"),native:RegExp("^(::)?("+s+")?([0-9a-f]+)?(::)?("+a+")?$","i"),transitional:RegExp("^((?:"+s+")|(?:::)(?:"+s+")?)"+n+"\\."+n+"\\."+n+"\\."+n+"("+a+")?$","i")},e=function(e,t){var n,r,s,o,a;if(e.indexOf("::")!==e.lastIndexOf("::"))return null;for((a=(e.match(i.zoneIndex)||[])[0])&&(a=a.substring(1),e=e.replace(/%.+$/,"")),n=0,r=-1;(r=e.indexOf(":",r+1))>=0;)n++;if("::"===e.substr(0,2)&&n--,"::"===e.substr(-2,2)&&n--,n>t)return null;for(o=t-n,s=":";o--;)s+="0:";return":"===(e=e.replace("::",s))[0]&&(e=e.slice(1)),":"===e[e.length-1]&&(e=e.slice(0,-1)),t=function(){var t,n,r,s;for(s=[],t=0,n=(r=e.split(":")).length;n>t;t++)s.push(parseInt(r[t],16));return s}(),{parts:t,zoneId:a}},t.IPv6.parser=function(t){var n,r,s,o,a,c,l;if(i.native.test(t))return e(t,8);if((o=t.match(i.transitional))&&(l=o[6]||"",(n=e(o[1].slice(0,-1)+l,6)).parts)){for(r=0,s=(c=[parseInt(o[2]),parseInt(o[3]),parseInt(o[4]),parseInt(o[5])]).length;s>r;r++)if(0>(a=c[r])||a>255)return null;return n.parts.push(c[0]<<8|c[1]),n.parts.push(c[2]<<8|c[3]),{parts:n.parts,zoneId:n.zoneId}}return null},t.IPv4.isIPv4=t.IPv6.isIPv6=function(e){return null!==this.parser(e)},t.IPv4.isValid=function(e){try{return new this(this.parser(e)),!0}catch(e){return!1}},t.IPv4.isValidFourPartDecimal=function(e){return!(!t.IPv4.isValid(e)||!e.match(/^(0|[1-9]\d*)(\.(0|[1-9]\d*)){3}$/))},t.IPv6.isValid=function(e){var t;if("string"==typeof e&&-1===e.indexOf(":"))return!1;try{return new this((t=this.parser(e)).parts,t.zoneId),!0}catch(e){return!1}},t.IPv4.parse=function(e){var t;if(null===(t=this.parser(e)))throw Error("ipaddr: string is not formatted like ip address");return new this(t)},t.IPv6.parse=function(e){var t;if(null===(t=this.parser(e)).parts)throw Error("ipaddr: string is not formatted like ip address");return new this(t.parts,t.zoneId)},t.IPv4.parseCIDR=function(e){var t,n,r;if((n=e.match(/^(.+)\/(\d+)$/))&&(t=parseInt(n[2]))>=0&&32>=t)return r=[this.parse(n[1]),t],Object.defineProperty(r,"toString",{value:function(){return this.join("/")}}),r;throw Error("ipaddr: string is not formatted like an IPv4 CIDR range")},t.IPv4.subnetMaskFromPrefixLength=function(e){var t,n,r;if(0>(e=parseInt(e))||e>32)throw Error("ipaddr: invalid IPv4 prefix length");for(r=[0,0,0,0],n=0,t=Math.floor(e/8);t>n;)r[n]=255,n++;return 4>t&&(r[t]=Math.pow(2,e%8)-1<<8-e%8),new this(r)},t.IPv4.broadcastAddressFromCIDR=function(e){var t,n,r,s,i;try{for(r=(t=this.parseCIDR(e))[0].toByteArray(),i=this.subnetMaskFromPrefixLength(t[1]).toByteArray(),s=[],n=0;4>n;)s.push(parseInt(r[n],10)|255^parseInt(i[n],10)),n++;return new this(s)}catch(e){throw Error("ipaddr: the address does not have IPv4 CIDR format")}},t.IPv4.networkAddressFromCIDR=function(e){var t,n,r,s,i;try{for(r=(t=this.parseCIDR(e))[0].toByteArray(),i=this.subnetMaskFromPrefixLength(t[1]).toByteArray(),s=[],n=0;4>n;)s.push(parseInt(r[n],10)&parseInt(i[n],10)),n++;return new this(s)}catch(e){throw Error("ipaddr: the address does not have IPv4 CIDR format")}},t.IPv6.parseCIDR=function(e){var t,n,r;if((n=e.match(/^(.+)\/(\d+)$/))&&(t=parseInt(n[2]))>=0&&128>=t)return r=[this.parse(n[1]),t],Object.defineProperty(r,"toString",{value:function(){return this.join("/")}}),r;throw Error("ipaddr: string is not formatted like an IPv6 CIDR range")},t.isValid=function(e){return t.IPv6.isValid(e)||t.IPv4.isValid(e)},t.parse=function(e){if(t.IPv6.isValid(e))return t.IPv6.parse(e);if(t.IPv4.isValid(e))return t.IPv4.parse(e);throw Error("ipaddr: the address has neither IPv6 nor IPv4 format")},t.parseCIDR=function(e){try{return t.IPv6.parseCIDR(e)}catch(n){try{return t.IPv4.parseCIDR(e)}catch(e){throw Error("ipaddr: the address has neither IPv6 nor IPv4 CIDR format")}}},t.fromByteArray=function(e){var n;if(4===(n=e.length))return new t.IPv4(e);if(16===n)return new t.IPv6(e);throw Error("ipaddr: the binary input is neither an IPv6 nor IPv4 address")},t.process=function(e){var t;return"ipv6"===(t=this.parse(e)).kind()&&t.isIPv4MappedAddress()?t.toIPv4Address():t}}.call(D);var Yl=Vl.exports;
/*!
 * proxy-addr
 * Copyright(c) 2014-2016 Douglas Christopher Wilson
 * MIT Licensed
 */zl.exports=function(e,t){if(!e)throw new TypeError("req argument is required");if(!t)throw new TypeError("trust argument is required");var n=Zl(e,t);return n[n.length-1]},zl.exports.all=Zl,zl.exports.compile=eu;var Kl=function(e){if(!e)throw new TypeError("argument req is required");var t=function(e){for(var t=e.length,n=[],r=e.length,s=e.length-1;s>=0;s--)switch(e.charCodeAt(s)){case 32:r===t&&(r=t=s);break;case 44:r!==t&&n.push(e.substring(r,t)),r=t=s;break;default:r=s}return r!==t&&n.push(e.substring(r,t)),n}(e.headers["x-forwarded-for"]||""),n=function(e){return e.socket?e.socket.remoteAddress:e.connection.remoteAddress}(e);return[n].concat(t)},Ql=/^[0-9]+$/,Wl=Yl.isValid,Jl=Yl.parse,Xl={linklocal:["169.254.0.0/16","fe80::/10"],loopback:["127.0.0.1/8","::1/128"],uniquelocal:["10.0.0.0/8","172.16.0.0/12","192.168.0.0/16","fc00::/7"]};function Zl(e,t){var n=Kl(e);if(!t)return n;"function"!=typeof t&&(t=eu(t));for(var r=0;n.length-1>r;r++)t(n[r],r)||(n.length=r+1);return n}function eu(e){if(!e)throw new TypeError("argument is required");var t,n,r,s,i,o,a,c,l;if("string"==typeof e)t=[e];else{if(!Array.isArray(e))throw new TypeError("unsupported trust argument");t=e.slice()}for(var u=0;t.length>u;u++)({}).hasOwnProperty.call(Xl,e=t[u])&&(t.splice.apply(t,[u,1].concat(e=Xl[e])),u+=e.length-1);return n=function(e){for(var t=Array(e.length),n=0;e.length>n;n++)t[n]=tu(e[n]);return t}(t),0===(r=n.length)?nu:1===r?(a=(o=(i=n[0])[0]).kind(),c="ipv4"===a,l=i[1],function(e){if(!Wl(e))return!1;var t=Jl(e);if(t.kind()!==a){if(c&&!t.isIPv4MappedAddress())return!1;t=c?t.toIPv4Address():t.toIPv4MappedAddress()}return t.match(o,l)}):(s=n,function(e){if(!Wl(e))return!1;for(var t,n=Jl(e),r=n.kind(),i=0;s.length>i;i++){var o=s[i],a=o[0],c=a.kind(),l=o[1],u=n;if(r!==c){if("ipv4"===c&&!n.isIPv4MappedAddress())continue;t||(t="ipv4"===c?n.toIPv4Address():n.toIPv4MappedAddress()),u=t}if(u.match(a,l))return!0}return!1})}function tu(e){var t=e.lastIndexOf("/"),n=-1!==t?e.substring(0,t):e;if(!Wl(n))throw new TypeError("invalid IP address: "+n);var r=Jl(n);-1===t&&"ipv6"===r.kind()&&r.isIPv4MappedAddress()&&(r=r.toIPv4Address());var s="ipv6"===r.kind()?128:32,i=-1!==t?e.substring(t+1,e.length):null;if(0>=(i=null===i?s:Ql.test(i)?parseInt(i,10):"ipv4"===r.kind()&&Wl(i)?function(e){var t=Jl(e);return"ipv4"===t.kind()?t.prefixLengthFromSubnetMask():null}(i):null)||i>s)throw new TypeError("invalid range on address: "+e);return[r,i]}function nu(){return!1}var ru=zl.exports,su={exports:{}},iu={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:16,MAX_SAFE_BUILD_LENGTH:250,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:"2.0.0",FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},ou="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>{}:()=>{};!function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:s}=iu,i=ou,o=(t=e.exports={}).re=[],a=t.safeRe=[],c=t.src=[],l=t.t={};let u=0;const p="[a-zA-Z0-9-]",d=[["\\s",1],["\\d",s],[p,r]],h=(e,t,n)=>{const r=(e=>{for(const[t,n]of d)e=e.split(t+"*").join(`${t}{0,${n}}`).split(t+"+").join(`${t}{1,${n}}`);return e})(t),s=u++;i(e,s,t),l[e]=s,c[s]=t,o[s]=RegExp(t,n?"g":void 0),a[s]=RegExp(r,n?"g":void 0)};h("NUMERICIDENTIFIER","0|[1-9]\\d*"),h("NUMERICIDENTIFIERLOOSE","\\d+"),h("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${p}*`),h("MAINVERSION",`(${c[l.NUMERICIDENTIFIER]})\\.(${c[l.NUMERICIDENTIFIER]})\\.(${c[l.NUMERICIDENTIFIER]})`),h("MAINVERSIONLOOSE",`(${c[l.NUMERICIDENTIFIERLOOSE]})\\.(${c[l.NUMERICIDENTIFIERLOOSE]})\\.(${c[l.NUMERICIDENTIFIERLOOSE]})`),h("PRERELEASEIDENTIFIER",`(?:${c[l.NUMERICIDENTIFIER]}|${c[l.NONNUMERICIDENTIFIER]})`),h("PRERELEASEIDENTIFIERLOOSE",`(?:${c[l.NUMERICIDENTIFIERLOOSE]}|${c[l.NONNUMERICIDENTIFIER]})`),h("PRERELEASE",`(?:-(${c[l.PRERELEASEIDENTIFIER]}(?:\\.${c[l.PRERELEASEIDENTIFIER]})*))`),h("PRERELEASELOOSE",`(?:-?(${c[l.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${c[l.PRERELEASEIDENTIFIERLOOSE]})*))`),h("BUILDIDENTIFIER",p+"+"),h("BUILD",`(?:\\+(${c[l.BUILDIDENTIFIER]}(?:\\.${c[l.BUILDIDENTIFIER]})*))`),h("FULLPLAIN",`v?${c[l.MAINVERSION]}${c[l.PRERELEASE]}?${c[l.BUILD]}?`),h("FULL",`^${c[l.FULLPLAIN]}$`),h("LOOSEPLAIN",`[v=\\s]*${c[l.MAINVERSIONLOOSE]}${c[l.PRERELEASELOOSE]}?${c[l.BUILD]}?`),h("LOOSE",`^${c[l.LOOSEPLAIN]}$`),h("GTLT","((?:<|>)?=?)"),h("XRANGEIDENTIFIERLOOSE",c[l.NUMERICIDENTIFIERLOOSE]+"|x|X|\\*"),h("XRANGEIDENTIFIER",c[l.NUMERICIDENTIFIER]+"|x|X|\\*"),h("XRANGEPLAIN",`[v=\\s]*(${c[l.XRANGEIDENTIFIER]})(?:\\.(${c[l.XRANGEIDENTIFIER]})(?:\\.(${c[l.XRANGEIDENTIFIER]})(?:${c[l.PRERELEASE]})?${c[l.BUILD]}?)?)?`),h("XRANGEPLAINLOOSE",`[v=\\s]*(${c[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[l.XRANGEIDENTIFIERLOOSE]})(?:${c[l.PRERELEASELOOSE]})?${c[l.BUILD]}?)?)?`),h("XRANGE",`^${c[l.GTLT]}\\s*${c[l.XRANGEPLAIN]}$`),h("XRANGELOOSE",`^${c[l.GTLT]}\\s*${c[l.XRANGEPLAINLOOSE]}$`),h("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),h("COERCE",c[l.COERCEPLAIN]+"(?:$|[^\\d])"),h("COERCEFULL",c[l.COERCEPLAIN]+`(?:${c[l.PRERELEASE]})?`+`(?:${c[l.BUILD]})?(?:$|[^\\d])`),h("COERCERTL",c[l.COERCE],!0),h("COERCERTLFULL",c[l.COERCEFULL],!0),h("LONETILDE","(?:~>?)"),h("TILDETRIM",`(\\s*)${c[l.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",h("TILDE",`^${c[l.LONETILDE]}${c[l.XRANGEPLAIN]}$`),h("TILDELOOSE",`^${c[l.LONETILDE]}${c[l.XRANGEPLAINLOOSE]}$`),h("LONECARET","(?:\\^)"),h("CARETTRIM",`(\\s*)${c[l.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",h("CARET",`^${c[l.LONECARET]}${c[l.XRANGEPLAIN]}$`),h("CARETLOOSE",`^${c[l.LONECARET]}${c[l.XRANGEPLAINLOOSE]}$`),h("COMPARATORLOOSE",`^${c[l.GTLT]}\\s*(${c[l.LOOSEPLAIN]})$|^$`),h("COMPARATOR",`^${c[l.GTLT]}\\s*(${c[l.FULLPLAIN]})$|^$`),h("COMPARATORTRIM",`(\\s*)${c[l.GTLT]}\\s*(${c[l.LOOSEPLAIN]}|${c[l.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",h("HYPHENRANGE",`^\\s*(${c[l.XRANGEPLAIN]})\\s+-\\s+(${c[l.XRANGEPLAIN]})\\s*$`),h("HYPHENRANGELOOSE",`^\\s*(${c[l.XRANGEPLAINLOOSE]})\\s+-\\s+(${c[l.XRANGEPLAINLOOSE]})\\s*$`),h("STAR","(<|>)?=?\\s*\\*"),h("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),h("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")}(su,su.exports);var au=su.exports;const cu=Object.freeze({loose:!0}),lu=Object.freeze({});var uu=e=>e?"object"!=typeof e?cu:e:lu;const pu=/^[0-9]+$/,du=(e,t)=>{const n=pu.test(e),r=pu.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:t>e?-1:1};var hu={compareIdentifiers:du,rcompareIdentifiers:(e,t)=>du(t,e)};const fu=ou,{MAX_LENGTH:mu,MAX_SAFE_INTEGER:gu}=iu,{safeRe:yu,t:vu}=au,bu=uu,{compareIdentifiers:Eu}=hu;var _u=class e{constructor(t,n){if(n=bu(n),t instanceof e){if(t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease)return t;t=t.version}else if("string"!=typeof t)throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>mu)throw new TypeError(`version is longer than ${mu} characters`);fu("SemVer",t,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;const r=t.trim().match(n.loose?yu[vu.LOOSE]:yu[vu.FULL]);if(!r)throw new TypeError("Invalid Version: "+t);if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>gu||0>this.major)throw new TypeError("Invalid major version");if(this.minor>gu||0>this.minor)throw new TypeError("Invalid minor version");if(this.patch>gu||0>this.patch)throw new TypeError("Invalid patch version");this.prerelease=r[4]?r[4].split(".").map((e=>{if(/^[0-9]+$/.test(e)){const t=+e;if(t>=0&&gu>t)return t}return e})):[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version}toString(){return this.version}compare(t){if(fu("SemVer.compare",this.version,this.options,t),!(t instanceof e)){if("string"==typeof t&&t===this.version)return 0;t=new e(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof e||(t=new e(t,this.options)),Eu(this.major,t.major)||Eu(this.minor,t.minor)||Eu(this.patch,t.patch)}comparePre(t){if(t instanceof e||(t=new e(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let n=0;do{const e=this.prerelease[n],r=t.prerelease[n];if(fu("prerelease compare",n,e,r),void 0===e&&void 0===r)return 0;if(void 0===r)return 1;if(void 0===e)return-1;if(e!==r)return Eu(e,r)}while(++n)}compareBuild(t){t instanceof e||(t=new e(t,this.options));let n=0;do{const e=this.build[n],r=t.build[n];if(fu("build compare",n,e,r),void 0===e&&void 0===r)return 0;if(void 0===r)return 1;if(void 0===e)return-1;if(e!==r)return Eu(e,r)}while(++n)}inc(e,t,n){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,n),this.inc("pre",t,n);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t,n),this.inc("pre",t,n);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":{const e=+n?1:0;if(!t&&!1===n)throw Error("invalid increment argument: identifier is empty");if(0===this.prerelease.length)this.prerelease=[e];else{let r=this.prerelease.length;for(;--r>=0;)"number"==typeof this.prerelease[r]&&(this.prerelease[r]++,r=-2);if(-1===r){if(t===this.prerelease.join(".")&&!1===n)throw Error("invalid increment argument: identifier already exists");this.prerelease.push(e)}}if(t){let r=[t,e];!1===n&&(r=[t]),0===Eu(this.prerelease[0],t)?isNaN(this.prerelease[1])&&(this.prerelease=r):this.prerelease=r}break}default:throw Error("invalid increment argument: "+e)}return this.raw=this.format(),this.build.length&&(this.raw+="+"+this.build.join(".")),this}};const Au=_u;var Su=(e,t,n=!1)=>{if(e instanceof Au)return e;try{return new Au(e,t)}catch(e){if(!n)return null;throw e}};const Tu=Su,wu=Su,xu=_u,ku=Su,Cu=_u,Iu=_u,Ru=_u,Ou=Su,Nu=_u;var Du=(e,t,n)=>new Nu(e,n).compare(new Nu(t,n));const Pu=Du,Lu=Du,Mu=_u;var Bu=(e,t,n)=>{const r=new Mu(e,n),s=new Mu(t,n);return r.compare(s)||r.compareBuild(s)};const ju=Bu,Fu=Bu,$u=Du;var Uu=(e,t,n)=>$u(e,t,n)>0;const Hu=Du;var Gu=(e,t,n)=>0>Hu(e,t,n);const qu=Du;var zu=(e,t,n)=>0===qu(e,t,n);const Vu=Du;var Yu=(e,t,n)=>0!==Vu(e,t,n);const Ku=Du;var Qu=(e,t,n)=>Ku(e,t,n)>=0;const Wu=Du;var Ju=(e,t,n)=>0>=Wu(e,t,n);const Xu=zu,Zu=Yu,ep=Uu,tp=Qu,np=Gu,rp=Ju;var sp=(e,t,n,r)=>{switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e===n;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e!==n;case"":case"=":case"==":return Xu(e,n,r);case"!=":return Zu(e,n,r);case">":return ep(e,n,r);case">=":return tp(e,n,r);case"<":return np(e,n,r);case"<=":return rp(e,n,r);default:throw new TypeError("Invalid operator: "+t)}};const ip=_u,op=Su,{safeRe:ap,t:cp}=au;var lp,up,pp,dp,hp=class{constructor(){this.max=1e3,this.map=new Map}get(e){const t=this.map.get(e);return void 0===t?void 0:(this.map.delete(e),this.map.set(e,t),t)}delete(e){return this.map.delete(e)}set(e,t){if(!this.delete(e)&&void 0!==t){if(this.map.size>=this.max){const e=this.map.keys().next().value;this.delete(e)}this.map.set(e,t)}return this}};function fp(){if(up)return lp;up=1;class e{constructor(t,s){if(s=n(s),t instanceof e)return t.loose===!!s.loose&&t.includePrerelease===!!s.includePrerelease?t:new e(t.raw,s);if(t instanceof r)return this.raw=t.value,this.set=[[t]],this.format(),this;if(this.options=s,this.loose=!!s.loose,this.includePrerelease=!!s.includePrerelease,this.raw=t.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map((e=>this.parseRange(e.trim()))).filter((e=>e.length)),!this.set.length)throw new TypeError("Invalid SemVer Range: "+this.raw);if(this.set.length>1){const e=this.set[0];if(this.set=this.set.filter((e=>!h(e[0]))),0===this.set.length)this.set=[e];else if(this.set.length>1)for(const e of this.set)if(1===e.length&&f(e[0])){this.set=[e];break}}this.format()}format(){return this.range=this.set.map((e=>e.join(" ").trim())).join("||").trim(),this.range}toString(){return this.range}parseRange(e){const n=((this.options.includePrerelease&&p)|(this.options.loose&&d))+":"+e,i=t.get(n);if(i)return i;const f=this.options.loose;e=e.replace(f?o[a.HYPHENRANGELOOSE]:o[a.HYPHENRANGE],x(this.options.includePrerelease)),s("hyphen replace",e),e=e.replace(o[a.COMPARATORTRIM],c),s("comparator trim",e),e=e.replace(o[a.TILDETRIM],l),s("tilde trim",e),e=e.replace(o[a.CARETTRIM],u),s("caret trim",e);let m=e.split(" ").map((e=>g(e,this.options))).join(" ").split(/\s+/).map((e=>w(e,this.options)));f&&(m=m.filter((e=>(s("loose invalid filter",e,this.options),!!e.match(o[a.COMPARATORLOOSE]))))),s("range list",m);const y=new Map,v=m.map((e=>new r(e,this.options)));for(const e of v){if(h(e))return[e];y.set(e.value,e)}y.size>1&&y.has("")&&y.delete("");const b=[...y.values()];return t.set(n,b),b}intersects(t,n){if(!(t instanceof e))throw new TypeError("a Range is required");return this.set.some((e=>m(e,n)&&t.set.some((t=>m(t,n)&&e.every((e=>t.every((t=>e.intersects(t,n)))))))))}test(e){if(!e)return!1;if("string"==typeof e)try{e=new i(e,this.options)}catch(e){return!1}for(let t=0;this.set.length>t;t++)if(k(this.set[t],e,this.options))return!0;return!1}}lp=e;const t=new hp,n=uu,r=mp(),s=ou,i=_u,{safeRe:o,t:a,comparatorTrimReplace:c,tildeTrimReplace:l,caretTrimReplace:u}=au,{FLAG_INCLUDE_PRERELEASE:p,FLAG_LOOSE:d}=iu,h=e=>"<0.0.0-0"===e.value,f=e=>""===e.value,m=(e,t)=>{let n=!0;const r=e.slice();let s=r.pop();for(;n&&r.length;)n=r.every((e=>s.intersects(e,t))),s=r.pop();return n},g=(e,t)=>(s("comp",e,t),e=E(e,t),s("caret",e),e=v(e,t),s("tildes",e),e=A(e,t),s("xrange",e),e=T(e,t),s("stars",e),e),y=e=>!e||"x"===e.toLowerCase()||"*"===e,v=(e,t)=>e.trim().split(/\s+/).map((e=>b(e,t))).join(" "),b=(e,t)=>e.replace(t.loose?o[a.TILDELOOSE]:o[a.TILDE],((t,n,r,i,o)=>{let a;return s("tilde",e,t,n,r,i,o),y(n)?a="":y(r)?a=`>=${n}.0.0 <${+n+1}.0.0-0`:y(i)?a=`>=${n}.${r}.0 <${n}.${+r+1}.0-0`:o?(s("replaceTilde pr",o),a=`>=${n}.${r}.${i}-${o} <${n}.${+r+1}.0-0`):a=`>=${n}.${r}.${i} <${n}.${+r+1}.0-0`,s("tilde return",a),a})),E=(e,t)=>e.trim().split(/\s+/).map((e=>_(e,t))).join(" "),_=(e,t)=>{s("caret",e,t);const n=t.includePrerelease?"-0":"";return e.replace(t.loose?o[a.CARETLOOSE]:o[a.CARET],((t,r,i,o,a)=>{let c;return s("caret",e,t,r,i,o,a),y(r)?c="":y(i)?c=`>=${r}.0.0${n} <${+r+1}.0.0-0`:y(o)?c="0"===r?`>=${r}.${i}.0${n} <${r}.${+i+1}.0-0`:`>=${r}.${i}.0${n} <${+r+1}.0.0-0`:a?(s("replaceCaret pr",a),c="0"===r?"0"===i?`>=${r}.${i}.${o}-${a} <${r}.${i}.${+o+1}-0`:`>=${r}.${i}.${o}-${a} <${r}.${+i+1}.0-0`:`>=${r}.${i}.${o}-${a} <${+r+1}.0.0-0`):(s("no pr"),c="0"===r?"0"===i?`>=${r}.${i}.${o}${n} <${r}.${i}.${+o+1}-0`:`>=${r}.${i}.${o}${n} <${r}.${+i+1}.0-0`:`>=${r}.${i}.${o} <${+r+1}.0.0-0`),s("caret return",c),c}))},A=(e,t)=>(s("replaceXRanges",e,t),e.split(/\s+/).map((e=>S(e,t))).join(" ")),S=(e,t)=>(e=e.trim()).replace(t.loose?o[a.XRANGELOOSE]:o[a.XRANGE],((n,r,i,o,a,c)=>{s("xRange",e,n,r,i,o,a,c);const l=y(i),u=l||y(o),p=u||y(a);return"="===r&&p&&(r=""),c=t.includePrerelease?"-0":"",l?n=">"===r||"<"===r?"<0.0.0-0":"*":r&&p?(u&&(o=0),a=0,">"===r?(r=">=",u?(i=+i+1,o=0,a=0):(o=+o+1,a=0)):"<="===r&&(r="<",u?i=+i+1:o=+o+1),"<"===r&&(c="-0"),n=`${r+i}.${o}.${a}${c}`):u?n=`>=${i}.0.0${c} <${+i+1}.0.0-0`:p&&(n=`>=${i}.${o}.0${c} <${i}.${+o+1}.0-0`),s("xRange return",n),n})),T=(e,t)=>(s("replaceStars",e,t),e.trim().replace(o[a.STAR],"")),w=(e,t)=>(s("replaceGTE0",e,t),e.trim().replace(o[t.includePrerelease?a.GTE0PRE:a.GTE0],"")),x=e=>(t,n,r,s,i,o,a,c,l,u,p,d)=>`${n=y(r)?"":y(s)?`>=${r}.0.0${e?"-0":""}`:y(i)?`>=${r}.${s}.0${e?"-0":""}`:o?">="+n:`>=${n}${e?"-0":""}`} ${c=y(l)?"":y(u)?`<${+l+1}.0.0-0`:y(p)?`<${l}.${+u+1}.0-0`:d?`<=${l}.${u}.${p}-${d}`:e?`<${l}.${u}.${+p+1}-0`:"<="+c}`.trim(),k=(e,t,n)=>{for(let n=0;e.length>n;n++)if(!e[n].test(t))return!1;if(t.prerelease.length&&!n.includePrerelease){for(let n=0;e.length>n;n++)if(s(e[n].semver),e[n].semver!==r.ANY&&e[n].semver.prerelease.length>0){const r=e[n].semver;if(r.major===t.major&&r.minor===t.minor&&r.patch===t.patch)return!0}return!1}return!0};return lp}function mp(){if(dp)return pp;dp=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(r,s){if(s=n(s),r instanceof t){if(r.loose===!!s.loose)return r;r=r.value}r=r.trim().split(/\s+/).join(" "),o("comparator",r,s),this.options=s,this.loose=!!s.loose,this.parse(r),this.value=this.semver===e?"":this.operator+this.semver.version,o("comp",this)}parse(t){const n=t.match(this.options.loose?r[s.COMPARATORLOOSE]:r[s.COMPARATOR]);if(!n)throw new TypeError("Invalid comparator: "+t);this.operator=void 0!==n[1]?n[1]:"","="===this.operator&&(this.operator=""),this.semver=n[2]?new a(n[2],this.options.loose):e}toString(){return this.value}test(t){if(o("Comparator.test",t,this.options.loose),this.semver===e||t===e)return!0;if("string"==typeof t)try{t=new a(t,this.options)}catch(e){return!1}return i(t,this.operator,this.semver,this.options)}intersects(e,r){if(!(e instanceof t))throw new TypeError("a Comparator is required");return""===this.operator?""===this.value||new c(e.value,r).test(this.value):""===e.operator?""===e.value||new c(this.value,r).test(e.semver):!((r=n(r)).includePrerelease&&("<0.0.0-0"===this.value||"<0.0.0-0"===e.value)||!r.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0"))||(!this.operator.startsWith(">")||!e.operator.startsWith(">"))&&(!this.operator.startsWith("<")||!e.operator.startsWith("<"))&&(this.semver.version!==e.semver.version||!this.operator.includes("=")||!e.operator.includes("="))&&!(i(this.semver,"<",e.semver,r)&&this.operator.startsWith(">")&&e.operator.startsWith("<"))&&!(i(this.semver,">",e.semver,r)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))}}pp=t;const n=uu,{safeRe:r,t:s}=au,i=sp,o=ou,a=_u,c=fp();return pp}const gp=fp();var yp=(e,t,n)=>{try{t=new gp(t,n)}catch(e){return!1}return t.test(e)};const vp=fp(),bp=_u,Ep=fp(),_p=_u,Ap=fp(),Sp=_u,Tp=fp(),wp=Uu,xp=fp(),kp=_u,Cp=mp(),{ANY:Ip}=Cp,Rp=fp(),Op=yp,Np=Uu,Dp=Gu,Pp=Ju,Lp=Qu;var Mp=(e,t,n,r)=>{let s,i,o,a,c;switch(e=new kp(e,r),t=new Rp(t,r),n){case">":s=Np,i=Pp,o=Dp,a=">",c=">=";break;case"<":s=Dp,i=Lp,o=Np,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(Op(e,t,r))return!1;for(let n=0;t.set.length>n;++n){let l=null,u=null;if(t.set[n].forEach((e=>{e.semver===Ip&&(e=new Cp(">=0.0.0")),l=l||e,u=u||e,s(e.semver,l.semver,r)?l=e:o(e.semver,u.semver,r)&&(u=e)})),l.operator===a||l.operator===c)return!1;if((!u.operator||u.operator===a)&&i(e,u.semver))return!1;if(u.operator===c&&o(e,u.semver))return!1}return!0};const Bp=Mp,jp=Mp,Fp=fp(),$p=yp,Up=Du,Hp=fp(),Gp=mp(),{ANY:qp}=Gp,zp=yp,Vp=Du,Yp=[new Gp(">=0.0.0-0")],Kp=[new Gp(">=0.0.0")],Qp=(e,t,n)=>{if(e===t)return!0;if(1===e.length&&e[0].semver===qp){if(1===t.length&&t[0].semver===qp)return!0;e=n.includePrerelease?Yp:Kp}if(1===t.length&&t[0].semver===qp){if(n.includePrerelease)return!0;t=Kp}const r=new Set;let s,i,o,a,c,l,u;for(const t of e)">"===t.operator||">="===t.operator?s=Wp(s,t,n):"<"===t.operator||"<="===t.operator?i=Jp(i,t,n):r.add(t.semver);if(r.size>1)return null;if(s&&i){if(o=Vp(s.semver,i.semver,n),o>0)return null;if(0===o&&(">="!==s.operator||"<="!==i.operator))return null}for(const e of r){if(s&&!zp(e,s+"",n))return null;if(i&&!zp(e,i+"",n))return null;for(const r of t)if(!zp(e,r+"",n))return!1;return!0}let p=!(!i||n.includePrerelease||!i.semver.prerelease.length)&&i.semver,d=!(!s||n.includePrerelease||!s.semver.prerelease.length)&&s.semver;p&&1===p.prerelease.length&&"<"===i.operator&&0===p.prerelease[0]&&(p=!1);for(const e of t){if(u=u||">"===e.operator||">="===e.operator,l=l||"<"===e.operator||"<="===e.operator,s)if(d&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===d.major&&e.semver.minor===d.minor&&e.semver.patch===d.patch&&(d=!1),">"===e.operator||">="===e.operator){if(a=Wp(s,e,n),a===e&&a!==s)return!1}else if(">="===s.operator&&!zp(s.semver,e+"",n))return!1;if(i)if(p&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===p.major&&e.semver.minor===p.minor&&e.semver.patch===p.patch&&(p=!1),"<"===e.operator||"<="===e.operator){if(c=Jp(i,e,n),c===e&&c!==i)return!1}else if("<="===i.operator&&!zp(i.semver,e+"",n))return!1;if(!e.operator&&(i||s)&&0!==o)return!1}return!(s&&l&&!i&&0!==o||i&&u&&!s&&0!==o||d||p)},Wp=(e,t,n)=>{if(!e)return t;const r=Vp(e.semver,t.semver,n);return r>0?e:0>r||">"===t.operator&&">="===e.operator?t:e},Jp=(e,t,n)=>{if(!e)return t;const r=Vp(e.semver,t.semver,n);return 0>r?e:r>0||"<"===t.operator&&"<="===e.operator?t:e},Xp=au,Zp=iu,ed=_u,td=hu;var nd={parse:Su,valid:(e,t)=>{const n=Tu(e,t);return n?n.version:null},clean:(e,t)=>{const n=wu(e.trim().replace(/^[=v]+/,""),t);return n?n.version:null},inc:(e,t,n,r,s)=>{"string"==typeof n&&(s=r,r=n,n=void 0);try{return new xu(e instanceof xu?e.version:e,n).inc(t,r,s).version}catch(e){return null}},diff:(e,t)=>{const n=ku(e,null,!0),r=ku(t,null,!0),s=n.compare(r);if(0===s)return null;const i=s>0,o=i?n:r,a=i?r:n,c=!!o.prerelease.length;if(a.prerelease.length&&!c)return a.patch||a.minor?o.patch?"patch":o.minor?"minor":"major":"major";const l=c?"pre":"";return n.major!==r.major?l+"major":n.minor!==r.minor?l+"minor":n.patch!==r.patch?l+"patch":"prerelease"},major:(e,t)=>new Cu(e,t).major,minor:(e,t)=>new Iu(e,t).minor,patch:(e,t)=>new Ru(e,t).patch,prerelease:(e,t)=>{const n=Ou(e,t);return n&&n.prerelease.length?n.prerelease:null},compare:Du,rcompare:(e,t,n)=>Pu(t,e,n),compareLoose:(e,t)=>Lu(e,t,!0),compareBuild:Bu,sort:(e,t)=>e.sort(((e,n)=>ju(e,n,t))),rsort:(e,t)=>e.sort(((e,n)=>Fu(n,e,t))),gt:Uu,lt:Gu,eq:zu,neq:Yu,gte:Qu,lte:Ju,cmp:sp,coerce:(e,t)=>{if(e instanceof ip)return e;if("number"==typeof e&&(e+=""),"string"!=typeof e)return null;let n=null;if((t=t||{}).rtl){const r=t.includePrerelease?ap[cp.COERCERTLFULL]:ap[cp.COERCERTL];let s;for(;(s=r.exec(e))&&(!n||n.index+n[0].length!==e.length);)n&&s.index+s[0].length===n.index+n[0].length||(n=s),r.lastIndex=s.index+s[1].length+s[2].length;r.lastIndex=-1}else n=e.match(t.includePrerelease?ap[cp.COERCEFULL]:ap[cp.COERCE]);return null===n?null:op(`${n[2]}.${n[3]||"0"}.${n[4]||"0"}${t.includePrerelease&&n[5]?"-"+n[5]:""}${t.includePrerelease&&n[6]?"+"+n[6]:""}`,t)},Comparator:mp(),Range:fp(),satisfies:yp,toComparators:(e,t)=>new vp(e,t).set.map((e=>e.map((e=>e.value)).join(" ").trim().split(" "))),maxSatisfying:(e,t,n)=>{let r=null,s=null,i=null;try{i=new Ep(t,n)}catch(e){return null}return e.forEach((e=>{i.test(e)&&(r&&-1!==s.compare(e)||(r=e,s=new bp(r,n)))})),r},minSatisfying:(e,t,n)=>{let r=null,s=null,i=null;try{i=new Ap(t,n)}catch(e){return null}return e.forEach((e=>{i.test(e)&&(r&&1!==s.compare(e)||(r=e,s=new _p(r,n)))})),r},minVersion:(e,t)=>{e=new Tp(e,t);let n=new Sp("0.0.0");if(e.test(n))return n;if(n=new Sp("0.0.0-0"),e.test(n))return n;n=null;for(let t=0;e.set.length>t;++t){let r=null;e.set[t].forEach((e=>{const t=new Sp(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":r&&!wp(t,r)||(r=t);break;case"<":case"<=":break;default:throw Error("Unexpected operation: "+e.operator)}})),!r||n&&!wp(n,r)||(n=r)}return n&&e.test(n)?n:null},validRange:(e,t)=>{try{return new xp(e,t).range||"*"}catch(e){return null}},outside:Mp,gtr:(e,t,n)=>Bp(e,t,">",n),ltr:(e,t,n)=>jp(e,t,"<",n),intersects:(e,t,n)=>(e=new Fp(e,n),t=new Fp(t,n),e.intersects(t,n)),simplifyRange:(e,t,n)=>{const r=[];let s=null,i=null;const o=e.sort(((e,t)=>Up(e,t,n)));for(const e of o)$p(e,t,n)?(i=e,s||(s=e)):(i&&r.push([s,i]),i=null,s=null);s&&r.push([s,null]);const a=[];for(const[e,t]of r)a.push(e===t?e:t||e!==o[0]?t?e===o[0]?"<="+t:`${e} - ${t}`:">="+e:"*");const c=a.join(" || ");return("string"==typeof t.raw?t.raw:t+"").length>c.length?c:t},subset:(e,t,n={})=>{if(e===t)return!0;e=new Hp(e,n),t=new Hp(t,n);let r=!1;e:for(const s of e.set){for(const e of t.set){const t=Qp(s,e,n);if(r=r||null!==t,t)continue e}if(r)return!1}return!0},SemVer:ed,re:Xp.re,src:Xp.src,tokens:Xp.t,SEMVER_SPEC_VERSION:Zp.SEMVER_SPEC_VERSION,RELEASE_TYPES:Zp.RELEASE_TYPES,compareIdentifiers:td.compareIdentifiers,rcompareIdentifiers:td.rcompareIdentifiers};const rd=ru,sd=nd,{FSTDEP005:id,FSTDEP012:od,FSTDEP015:ad,FSTDEP016:cd,FSTDEP017:ld,FSTDEP018:ud}=ct,{kHasBeenDecorated:pd,kSchemaBody:dd,kSchemaHeaders:hd,kSchemaParams:fd,kSchemaQuerystring:md,kSchemaController:gd,kOptions:yd,kRequestCacheValidateFns:vd,kRouteContext:bd,kPublicRouteContext:Ed,kRequestOriginalUrl:_d}=Ze,{FST_ERR_REQ_INVALID_VALIDATION_INVOCATION:Ad}=dt,Sd={body:dd,headers:hd,params:fd,querystring:md,query:md};function Td(e,t,n,r,s,i){this.id=e,this[bd]=i,this.params=t,this.raw=n,this.query=r,this.log=s,this.body=void 0}function wd(e){const t=e.props.slice();function n(e,n,r,s,i,o){var a;this.id=e,this[bd]=o,this.params=n,this.raw=r,this.query=s,this.log=i,this.body=void 0;for(var c=0;t.length>c;c++)this[(a=t[c]).key]=a.value}return Object.setPrototypeOf(n.prototype,e.prototype),Object.setPrototypeOf(n,e),n.props=t,n.parent=e,n}function xd(e){const t=e.lastIndexOf(",");return-1===t?e.trim():e.slice(t+1).trim()}Td.props=[],Object.defineProperties(Td.prototype,{server:{get(){return this[bd].server}},url:{get(){return this.raw.url}},originalUrl:{get(){return this[_d]||(this[_d]=this.raw.originalUrl||this.raw.url),this[_d]}},method:{get(){return this.raw.method}},context:{get(){return od(),this[bd]}},routerPath:{get(){return ld(),this[bd].config?.url}},routeOptions:{get(){const e=this[bd],t=e._parserOptions.limit,n=e.server.initialConfig.bodyLimit,r=e.server.hasConstraintStrategy("version")?this.raw.headers["accept-version"]:void 0,s={method:e.config?.method,url:e.config?.url,bodyLimit:t||n,attachValidation:e.attachValidation,logLevel:e.logLevel,exposeHeadRoute:e.exposeHeadRoute,prefixTrailingSlash:e.prefixTrailingSlash,handler:e.handler,version:r};return Object.defineProperties(s,{config:{get:()=>e.config},schema:{get:()=>e.schema}}),Object.freeze(s)}},routerMethod:{get(){return ud(),this[bd].config?.method}},routeConfig:{get(){return cd(),this[bd][Ed]?.config}},routeSchema:{get(){return ad(),this[bd][Ed].schema}},is404:{get(){return void 0===this[bd].config?.url}},connection:{get(){return sd.gte(process.versions.node,"13.0.0")&&id(),this.raw.connection}},socket:{get(){return this.raw.socket}},ip:{get(){if(this.socket)return this.socket.remoteAddress}},hostname:{get(){return this.raw.headers.host||this.raw.headers[":authority"]}},protocol:{get(){if(this.socket)return this.socket.encrypted?"https":"http"}},headers:{get(){return this.additionalHeaders?Object.assign({},this.raw.headers,this.additionalHeaders):this.raw.headers},set(e){this.additionalHeaders=e}},getValidationFunction:{value:function(e){return"string"==typeof e?this[bd][Sd[e]]:"object"==typeof e?this[bd][vd]?.get(e):void 0}},compileValidationSchema:{value:function(e,t=null){const{method:n,url:r}=this;if(this[bd][vd]?.has(e))return this[bd][vd].get(e);const s=(this[bd].validatorCompiler||this.server[gd].validatorCompiler||this.server[gd].setupValidator(this.server[yd])||this.server[gd].validatorCompiler)({schema:e,method:n,url:r,httpPart:t});return null==this[bd][vd]&&(this[bd][vd]=new WeakMap),this[bd][vd].set(e,s),s}},validateInput:{value:function(e,t,n){const r=null!=(n="string"==typeof t?t:n)&&"string"==typeof n&&Sd[n];let s;if(r&&(s=this[bd][r]),null==s&&(null==t||"object"!=typeof t||Array.isArray(t)))throw new Ad(n);return null==s&&(s=this[bd][vd]?.has(t)?this[bd][vd].get(t):this.compileValidationSchema(t,n)),s(e)}}}),ql.exports=Td,ql.exports.buildRequest=function(e,t){return t?function(e,t){const n=wd(e),r=function(e){if("function"==typeof e)return e;if(!0===e)return function(){return!0};if("number"==typeof e)return function(t,n){return e>n};if("string"==typeof e){const t=e.split(",").map((e=>e.trim()));return rd.compile(t)}return rd.compile(e)}(t);return n[pd]=!0,Object.defineProperties(n.prototype,{ip:{get(){return rd(this.raw,r)}},ips:{get(){return rd.all(this.raw,r)}},hostname:{get(){return void 0!==this.ip&&this.headers["x-forwarded-host"]?xd(this.headers["x-forwarded-host"]):this.headers.host||this.headers[":authority"]}},protocol:{get(){return this.headers["x-forwarded-proto"]?xd(this.headers["x-forwarded-proto"]):this.socket?this.socket.encrypted?"https":"http":void 0}}}),n}(e,t):wd(e)};var kd=ql.exports;const{kFourOhFourContext:Cd,kReplySerializerDefault:Id,kSchemaErrorFormatter:Rd,kErrorHandler:Od,kChildLoggerFactory:Nd,kOptions:Dd,kReply:Pd,kRequest:Ld,kBodyLimit:Md,kLogLevel:Bd,kContentTypeParser:jd,kRouteByFastify:Fd,kRequestCacheValidateFns:$d,kReplyCacheSerializeFns:Ud,kPublicRouteContext:Hd}=Ze;function Gd(e,t){let n="";for(var r=0;r!==e.length;++r){const s=e[r];n+=t+(s.instancePath||"")+" "+s.message+", "}return Error(n.slice(0,-2))}var qd=function({schema:e,handler:t,config:n,requestIdLogLabel:r,childLoggerFactory:s,errorHandler:i,bodyLimit:o,logLevel:a,logSerializers:c,attachValidation:l,validatorCompiler:u,serializerCompiler:p,replySerializer:d,schemaErrorFormatter:h,exposeHeadRoute:f,prefixTrailingSlash:m,server:g,isFastify:y}){this.schema=e,this.handler=t,this.Reply=g[Pd],this.Request=g[Ld],this.contentTypeParser=g[jd],this.onRequest=null,this.onSend=null,this.onError=null,this.onTimeout=null,this.preHandler=null,this.onResponse=null,this.preSerialization=null,this.onRequestAbort=null,this.config=n,this.errorHandler=i||g[Od],this.requestIdLogLabel=r||g[Dd].requestIdLogLabel,this.childLoggerFactory=s||g[Nd],this._middie=null,this._parserOptions={limit:o||g[Md]},this.exposeHeadRoute=f,this.prefixTrailingSlash=m,this.logLevel=a||g[Bd],this.logSerializers=c,this[Cd]=null,this.attachValidation=l,this[Id]=d,this.schemaErrorFormatter=h||g[Rd]||Gd,this[Fd]=y,this[$d]=null,this[Ud]=null,this.validatorCompiler=u||null,this.serializerCompiler=p||null,this[Hd]=function(e){return Object.create(null,{schema:{enumerable:!0,get:()=>e.schema},config:{enumerable:!0,get:()=>e.config}})}(this),this.server=g},zd={supportedMethods:["DELETE","GET","HEAD","PATCH","POST","PUT","OPTIONS","PROPFIND","PROPPATCH","MKCOL","COPY","MOVE","LOCK","UNLOCK","TRACE","SEARCH","REPORT","MKCALENDAR"]};const{kReply:Vd,kRequest:Yd,kState:Kd,kHasBeenDecorated:Qd}=Ze,{FST_ERR_DEC_ALREADY_PRESENT:Wd,FST_ERR_DEC_MISSING_DEPENDENCY:Jd,FST_ERR_DEC_AFTER_START:Xd,FST_ERR_DEC_DEPENDENCY_INVALID_TYPE:Zd}=dt,{FSTDEP006:eh}=ct;function th(e,t,n,r){const s=e.prototype;if({}.hasOwnProperty.call(s,t)||sh(e,t))throw new Wd(t);e[Qd]=!0,ih(e,t,r),!n||"function"!=typeof n.getter&&"function"!=typeof n.setter?"function"==typeof n?s[t]=n:e.props.push({key:t,value:n}):Object.defineProperty(s,t,{get:n.getter,set:n.setter})}function nh(e,t){"object"==typeof t&&t&&"function"!=typeof t.getter&&"function"!=typeof t.setter&&eh(e)}function rh(e,t){return t?t in e||e.prototype&&t in e.prototype||sh(e,t):e in this}function sh(e,t){return!!e.props&&e.props.find((({key:e})=>e===t))}function ih(e,t,n){if(null!=n){if(!Array.isArray(n))throw new Zd(t);for(var r=0;r!==n.length;++r)if(!rh(e,n[r]))throw new Jd(n[r])}}function oh(e,t){if(e[Kd].started)throw new Xd(t)}var ah={add:function(e,t,n){return oh(this,e),function(e,t,n,r){if({}.hasOwnProperty.call(e,t))throw new Wd(t);ih(e,t,r),!n||"function"!=typeof n.getter&&"function"!=typeof n.setter?e[t]=n:Object.defineProperty(e,t,{get:n.getter,set:n.setter})}(this,e,t,n),this},exist:rh,existRequest:function(e){return!(!e||!sh(this[Yd],e))||rh(this[Yd].prototype,e)},existReply:function(e){return!(!e||!sh(this[Vd],e))||rh(this[Vd].prototype,e)},dependencies:ih,decorateReply:function(e,t,n){return oh(this,e),nh(e,t),th(this[Vd],e,t,n),this},decorateRequest:function(e,t,n){return oh(this,e),nh(e,t),th(this[Yd],e,t,n),this}},ch={exports:{}},lh={};class uh{constructor(e=1e3,t=0){if(isNaN(e)||0>e)throw Error("Invalid max value");if(isNaN(t)||0>t)throw Error("Invalid ttl value");this.first=null,this.items=Object.create(null),this.last=null,this.size=0,this.max=e,this.ttl=t}bumpLru(e){if(this.last===e)return;const t=this.last,n=e.next,r=e.prev;this.first===e&&(this.first=n),e.next=null,e.prev=t,t.next=e,null!==r&&(r.next=n),null!==n&&(n.prev=r),this.last=e}clear(){this.items=Object.create(null),this.first=null,this.last=null,this.size=0}delete(e){if({}.hasOwnProperty.call(this.items,e)){const t=this.items[e];delete this.items[e],this.size--,null!==t.prev&&(t.prev.next=t.next),null!==t.next&&(t.next.prev=t.prev),this.first===t&&(this.first=t.next),this.last===t&&(this.last=t.prev)}}deleteMany(e){for(var t=0;e.length>t;t++)this.delete(e[t])}evict(){if(this.size>0){const e=this.first;delete this.items[e.key],0==--this.size?(this.first=null,this.last=null):(this.first=e.next,this.first.prev=null)}}expiresAt(e){if({}.hasOwnProperty.call(this.items,e))return this.items[e].expiry}get(e){if({}.hasOwnProperty.call(this.items,e)){const t=this.items[e];return this.ttl>0&&t.expiry<=Date.now()?void this.delete(e):(this.bumpLru(t),t.value)}}getMany(e){const t=[];for(var n=0;e.length>n;n++)t.push(this.get(e[n]));return t}keys(){return Object.keys(this.items)}set(e,t){if({}.hasOwnProperty.call(this.items,e)){const n=this.items[e];return n.value=t,n.expiry=this.ttl>0?Date.now()+this.ttl:this.ttl,void(this.last!==n&&this.bumpLru(n))}this.max>0&&this.size===this.max&&this.evict();const n={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:e,prev:this.last,next:null,value:t};this.items[e]=n,1==++this.size?this.first=n:this.last.next=n,this.last=n}}class ph{constructor(){this.records={}}initForCache(e,t){this.records[e]={[t]:{cacheSize:0,hits:0,falsyHits:0,emptyHits:0,misses:0,expirations:0,evictions:0,invalidateOne:0,invalidateAll:0,sets:0}}}resetForCache(e){for(let t of Object.keys(this.records[e]))this.records[e][t]={cacheSize:0,hits:0,falsyHits:0,emptyHits:0,misses:0,expirations:0,evictions:0,invalidateOne:0,invalidateAll:0,sets:0}}getStatistics(){return this.records}}function dh(e){return`${e.getFullYear()}-${(""+(e.getMonth()+1)).padStart(2,"0")}-${(""+e.getDate()).padStart(2,"0")}`}class hh{constructor(e,t,n){this.cacheId=e,this.statisticTtlInHours=t,this.collectionStart=new Date,this.currentTimeStamp=dh(this.collectionStart),this.records=n||new ph,this.records.initForCache(this.cacheId,this.currentTimeStamp)}get currentRecord(){return this.records.records[this.cacheId][this.currentTimeStamp]||(this.records.records[this.cacheId][this.currentTimeStamp]={cacheSize:0,hits:0,falsyHits:0,emptyHits:0,misses:0,expirations:0,evictions:0,sets:0,invalidateOne:0,invalidateAll:0}),this.records.records[this.cacheId][this.currentTimeStamp]}hoursPassed(){return(Date.now()-this.collectionStart)/1e3/60/60}addHit(){this.archiveIfNeeded(),this.currentRecord.hits++}addFalsyHit(){this.archiveIfNeeded(),this.currentRecord.falsyHits++}addEmptyHit(){this.archiveIfNeeded(),this.currentRecord.emptyHits++}addMiss(){this.archiveIfNeeded(),this.currentRecord.misses++}addEviction(){this.archiveIfNeeded(),this.currentRecord.evictions++}setCacheSize(e){this.archiveIfNeeded(),this.currentRecord.cacheSize=e}addExpiration(){this.archiveIfNeeded(),this.currentRecord.expirations++}addSet(){this.archiveIfNeeded(),this.currentRecord.sets++}addInvalidateOne(){this.archiveIfNeeded(),this.currentRecord.invalidateOne++}addInvalidateAll(){this.archiveIfNeeded(),this.currentRecord.invalidateAll++}getStatistics(){return this.records.getStatistics()}archiveIfNeeded(){this.hoursPassed()<this.statisticTtlInHours||(this.collectionStart=new Date,this.currentTimeStamp=dh(this.collectionStart),this.records.initForCache(this.cacheId,this.currentTimeStamp))}}class fh extends uh{constructor(e,t,n,r,s){if(super(e||1e3,t||0),!n)throw Error("Cache id is mandatory");this.hitStatistics=new hh(n,void 0!==s?s:24,r)}getStatistics(){return this.hitStatistics.getStatistics()}set(e,t){super.set(e,t),this.hitStatistics.addSet(),this.hitStatistics.setCacheSize(this.size)}evict(){super.evict(),this.hitStatistics.addEviction(),this.hitStatistics.setCacheSize(this.size)}delete(e,t=!1){super.delete(e),t||this.hitStatistics.addInvalidateOne(),this.hitStatistics.setCacheSize(this.size)}clear(){super.clear(),this.hitStatistics.addInvalidateAll(),this.hitStatistics.setCacheSize(this.size)}get(e){if({}.hasOwnProperty.call(this.items,e)){const t=this.items[e];return this.ttl>0&&t.expiry<=Date.now()?(this.delete(e,!0),void this.hitStatistics.addExpiration()):(this.bumpLru(t),t.value||this.hitStatistics.addFalsyHit(),null!=t.value&&""!==t.value||this.hitStatistics.addEmptyHit(),this.hitStatistics.addHit(),t.value)}this.hitStatistics.addMiss()}}class mh{constructor(e=1e3,t=0){if(isNaN(e)||0>e)throw Error("Invalid max value");if(isNaN(t)||0>t)throw Error("Invalid ttl value");this.first=null,this.items=Object.create(null),this.last=null,this.size=0,this.max=e,this.ttl=t}clear(){this.items=Object.create(null),this.first=null,this.last=null,this.size=0}delete(e){if({}.hasOwnProperty.call(this.items,e)){const t=this.items[e];delete this.items[e],this.size--,null!==t.prev&&(t.prev.next=t.next),null!==t.next&&(t.next.prev=t.prev),this.first===t&&(this.first=t.next),this.last===t&&(this.last=t.prev)}}deleteMany(e){for(var t=0;e.length>t;t++)this.delete(e[t])}evict(){if(this.size>0){const e=this.first;delete this.items[e.key],0==--this.size?(this.first=null,this.last=null):(this.first=e.next,this.first.prev=null)}}expiresAt(e){if({}.hasOwnProperty.call(this.items,e))return this.items[e].expiry}get(e){if({}.hasOwnProperty.call(this.items,e)){const t=this.items[e];return this.ttl>0&&t.expiry<=Date.now()?void this.delete(e):t.value}}getMany(e){const t=[];for(var n=0;e.length>n;n++)t.push(this.get(e[n]));return t}keys(){return Object.keys(this.items)}set(e,t){if({}.hasOwnProperty.call(this.items,e)){const n=this.items[e];return n.value=t,void(n.expiry=this.ttl>0?Date.now()+this.ttl:this.ttl)}this.max>0&&this.size===this.max&&this.evict();const n={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:e,prev:this.last,next:null,value:t};this.items[e]=n,1==++this.size?this.first=n:this.last.next=n,this.last=n}}lh.Fifo=mh,lh.FifoMap=
/**
 * toad-cache
 *
 * @copyright 2024 Igor Savin <kibertoad@gmail.com>
 * @license MIT
 * @version 3.7.0
 */
class{constructor(e=1e3,t=0){if(isNaN(e)||0>e)throw Error("Invalid max value");if(isNaN(t)||0>t)throw Error("Invalid ttl value");this.first=null,this.items=new Map,this.last=null,this.max=e,this.ttl=t}get size(){return this.items.size}clear(){this.items=new Map,this.first=null,this.last=null}delete(e){if(this.items.has(e)){const t=this.items.get(e);this.items.delete(e),null!==t.prev&&(t.prev.next=t.next),null!==t.next&&(t.next.prev=t.prev),this.first===t&&(this.first=t.next),this.last===t&&(this.last=t.prev)}}deleteMany(e){for(var t=0;e.length>t;t++)this.delete(e[t])}evict(){if(this.size>0){const e=this.first;this.items.delete(e.key),0===this.size?(this.first=null,this.last=null):(this.first=e.next,this.first.prev=null)}}expiresAt(e){if(this.items.has(e))return this.items.get(e).expiry}get(e){if(this.items.has(e)){const t=this.items.get(e);return this.ttl>0&&t.expiry<=Date.now()?void this.delete(e):t.value}}getMany(e){const t=[];for(var n=0;e.length>n;n++)t.push(this.get(e[n]));return t}keys(){return this.items.keys()}set(e,t){if(this.items.has(e)){const n=this.items.get(e);return n.value=t,void(n.expiry=this.ttl>0?Date.now()+this.ttl:this.ttl)}this.max>0&&this.size===this.max&&this.evict();const n={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:e,prev:this.last,next:null,value:t};this.items.set(e,n),1===this.size?this.first=n:this.last.next=n,this.last=n}},lh.FifoObject=mh,lh.HitStatisticsRecord=ph,lh.Lru=uh,lh.LruHitStatistics=fh,lh.LruMap=class{constructor(e=1e3,t=0){if(isNaN(e)||0>e)throw Error("Invalid max value");if(isNaN(t)||0>t)throw Error("Invalid ttl value");this.first=null,this.items=new Map,this.last=null,this.max=e,this.ttl=t}get size(){return this.items.size}bumpLru(e){if(this.last===e)return;const t=this.last,n=e.next,r=e.prev;this.first===e&&(this.first=n),e.next=null,e.prev=t,t.next=e,null!==r&&(r.next=n),null!==n&&(n.prev=r),this.last=e}clear(){this.items=new Map,this.first=null,this.last=null}delete(e){if(this.items.has(e)){const t=this.items.get(e);this.items.delete(e),null!==t.prev&&(t.prev.next=t.next),null!==t.next&&(t.next.prev=t.prev),this.first===t&&(this.first=t.next),this.last===t&&(this.last=t.prev)}}deleteMany(e){for(var t=0;e.length>t;t++)this.delete(e[t])}evict(){if(this.size>0){const e=this.first;this.items.delete(e.key),0===this.size?(this.first=null,this.last=null):(this.first=e.next,this.first.prev=null)}}expiresAt(e){if(this.items.has(e))return this.items.get(e).expiry}get(e){if(this.items.has(e)){const t=this.items.get(e);return this.ttl>0&&t.expiry<=Date.now()?void this.delete(e):(this.bumpLru(t),t.value)}}getMany(e){const t=[];for(var n=0;e.length>n;n++)t.push(this.get(e[n]));return t}keys(){return this.items.keys()}set(e,t){if(this.items.has(e)){const n=this.items.get(e);return n.value=t,n.expiry=this.ttl>0?Date.now()+this.ttl:this.ttl,void(this.last!==n&&this.bumpLru(n))}this.max>0&&this.size===this.max&&this.evict();const n={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:e,prev:this.last,next:null,value:t};this.items.set(e,n),1===this.size?this.first=n:this.last.next=n,this.last=n}},lh.LruObject=uh,lh.LruObjectHitStatistics=fh;var gh={};const yh=function(){};yh.prototype=Object.create(null);const vh=/; *([!#$%&'*+.^\w`|~-]+)=("(?:[\v\u0020\u0021\u0023-\u005b\u005d-\u007e\u0080-\u00ff]|\\[\v\u0020-\u00ff])*"|[!#$%&'*+.^\w`|~-]+) */gu,bh=/\\([\v\u0020-\u00ff])/gu,Eh=/^[!#$%&'*+.^\w|~-]+\/[!#$%&'*+.^\w|~-]+$/u,_h={type:"",parameters:new yh};function Ah(e){if("string"!=typeof e)throw new TypeError("argument header is required and must be a string");let t=e.indexOf(";");const n=-1!==t?e.slice(0,t).trim():e.trim();if(!1===Eh.test(n))throw new TypeError("invalid media type");const r={type:n.toLowerCase(),parameters:new yh};if(-1===t)return r;let s,i,o;for(vh.lastIndex=t;i=vh.exec(e);){if(i.index!==t)throw new TypeError("invalid parameter format");t+=i[0].length,s=i[1].toLowerCase(),o=i[2],'"'===o[0]&&(o=o.slice(1,o.length-1),bh.test(o)&&(o=o.replace(bh,"$1"))),r.parameters[s]=o}if(t!==e.length)throw new TypeError("invalid parameter format");return r}function Sh(e){if("string"!=typeof e)return _h;let t=e.indexOf(";");const n=-1!==t?e.slice(0,t).trim():e.trim();if(!1===Eh.test(n))return _h;const r={type:n.toLowerCase(),parameters:new yh};if(-1===t)return r;let s,i,o;for(vh.lastIndex=t;i=vh.exec(e);){if(i.index!==t)return _h;t+=i[0].length,s=i[1].toLowerCase(),o=i[2],'"'===o[0]&&(o=o.slice(1,o.length-1),bh.test(o)&&(o=o.replace(bh,"$1"))),r.parameters[s]=o}return t!==e.length?_h:r}Object.freeze(_h.parameters),Object.freeze(_h),gh.default={parse:Ah,safeParse:Sh},gh.parse=Ah,gh.safeParse=Sh,gh.defaultContentType=_h;var Th={exports:{}};const wh="undefined"!=typeof Buffer,xh=/"(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])"\s*:/,kh=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/;function Ch(e,t,n){null==n&&null!==t&&"object"==typeof t&&(n=t,t=void 0),wh&&Buffer.isBuffer(e)&&(e=""+e),e&&65279===e.charCodeAt(0)&&(e=e.slice(1));const r=JSON.parse(e,t);if(null===r||"object"!=typeof r)return r;const s=n&&n.protoAction||"error",i=n&&n.constructorAction||"error";if("ignore"===s&&"ignore"===i)return r;if("ignore"!==s&&"ignore"!==i){if(!1===xh.test(e)&&!1===kh.test(e))return r}else if("ignore"!==s&&"ignore"===i){if(!1===xh.test(e))return r}else if(!1===kh.test(e))return r;return Ih(r,{protoAction:s,constructorAction:i,safe:n&&n.safe})}function Ih(e,{protoAction:t="error",constructorAction:n="error",safe:r}={}){let s=[e];for(;s.length;){const e=s;s=[];for(const i of e){if("ignore"!==t&&{}.hasOwnProperty.call(i,"__proto__")){if(!0===r)return null;if("error"===t)throw new SyntaxError("Object contains forbidden prototype property");delete i.__proto__}if("ignore"!==n&&{}.hasOwnProperty.call(i,"constructor")&&{}.hasOwnProperty.call(i.constructor,"prototype")){if(!0===r)return null;if("error"===n)throw new SyntaxError("Object contains forbidden prototype property");delete i.constructor}for(const e in i){const t=i[e];t&&"object"==typeof t&&s.push(t)}}}return e}function Rh(e,t,n){const r=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return Ch(e,t,n)}finally{Error.stackTraceLimit=r}}Th.exports=Rh,Th.exports.default=Rh,Th.exports.parse=Rh,Th.exports.safeParse=function(e,t){const n=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return Ch(e,t,{safe:!0})}catch(e){return null}finally{Error.stackTraceLimit=n}},Th.exports.scan=Ih;var Oh=Th.exports;!function(e){const{AsyncResource:t}=g,{FifoMap:n}=lh,{safeParse:r,defaultContentType:s}=gh,i=Oh,{kDefaultJsonParse:o,kContentTypeParser:a,kBodyLimit:c,kRequestPayloadStream:l,kState:u,kTestInternals:p,kReplyIsError:d,kRouteContext:h}=Ze,{FST_ERR_CTP_INVALID_TYPE:f,FST_ERR_CTP_EMPTY_TYPE:m,FST_ERR_CTP_ALREADY_PRESENT:y,FST_ERR_CTP_INVALID_HANDLER:v,FST_ERR_CTP_INVALID_PARSE_TYPE:b,FST_ERR_CTP_BODY_TOO_LARGE:E,FST_ERR_CTP_INVALID_MEDIA_TYPE:_,FST_ERR_CTP_INVALID_CONTENT_LENGTH:A,FST_ERR_CTP_EMPTY_JSON_BODY:S,FST_ERR_CTP_INSTANCE_ALREADY_STARTED:T}=dt;function w(e,t,r){this[o]=k(t,r),this.customParsers=new Map,this.customParsers.set("application/json",new I(!0,!1,e,this[o])),this.customParsers.set("text/plain",new I(!0,!1,e,C)),this.parserList=[new N("application/json"),new N("text/plain")],this.parserRegExpList=[],this.cache=new n(100)}function x(e,t,n,r,s){const i=r.asString,o=null===n.limit?r.bodyLimit:n.limit,a=void 0===e.headers["content-length"]?NaN:+e.headers["content-length"];if(a>o)return t.header("connection","close"),void t.send(new E);let c=0,u=!0===i?"":[];const p=e[l]||e.raw;function h(e){c+=e.length;const{receivedEncodedLength:n=0}=p;if(c>o||n>o)return p.removeListener("data",h),p.removeListener("end",f),p.removeListener("error",f),void t.send(new E);!0===i?u+=e:u.push(e)}function f(n){if(p.removeListener("data",h),p.removeListener("end",f),p.removeListener("error",f),void 0!==n)return("number"!=typeof n.statusCode||400>n.statusCode)&&(n.statusCode=400),t[d]=!0,void t.code(n.statusCode).send(n);if(!0===i&&(c=Buffer.byteLength(u)),!Number.isNaN(a)&&(p.receivedEncodedLength||c)!==a)return t.header("connection","close"),void t.send(new A);!1===i&&(u=Buffer.concat(u));const o=r.fn(e,u,s);o&&"function"==typeof o.then&&o.then((e=>s(null,e)),s)}!0===i&&p.setEncoding("utf8"),p.on("data",h),p.on("end",f),p.on("error",f),p.resume()}function k(e,t){return function(n,r,s){if(""===r||null==r||Buffer.isBuffer(r)&&0===r.length)return s(new S,void 0);let o;try{o=i.parse(r,{protoAction:e,constructorAction:t})}catch(e){return e.statusCode=400,s(e,void 0)}s(null,o)}}function C(e,t,n){n(null,t)}function I(e,t,n,r){this.asString=e,this.asBuffer=t,this.bodyLimit=n,this.fn=r}function R(e,t){if(t.isEssence)return-1!==e.type.indexOf(t);if(-1===e.type.indexOf(t.type))return!1;for(const n of t.parameterKeys){if(!(n in e.parameters))return!1;if(e.parameters[n]!==t.parameters[n])return!1}return!0}function O(e,t,n){return n.test(n.isEssence?t:e)}function N(e){this.name=e;const t=r(e);if(this.isEssence=-1===e.indexOf(";"),!1===this.isEssence&&""===t.type){const t=e.split(";",1)[0];this.type=""===t?e:t}else this.type=t.type;this.parameters=t.parameters,this.parameterKeys=Object.keys(t.parameters)}w.prototype.add=function(e,t,n){const r="string"==typeof e;if(!(r||e instanceof RegExp))throw new f;if(r&&0===e.length)throw new m;if("function"!=typeof n)throw new v;if(this.existingParser(e))throw new y(e);if(void 0!==t.parseAs&&"string"!==t.parseAs&&"buffer"!==t.parseAs)throw new b(t.parseAs);const s=new I("string"===t.parseAs,"buffer"===t.parseAs,t.bodyLimit,n);r&&"*"===e?this.customParsers.set("",s):(r?this.parserList.unshift(new N(e)):(e.isEssence=-1===e.source.indexOf(";"),this.parserRegExpList.unshift(e)),this.customParsers.set(""+e,s))},w.prototype.hasParser=function(e){return this.customParsers.has("string"==typeof e?e:""+e)},w.prototype.existingParser=function(e){return"application/json"===e&&this.customParsers.has(e)?this.customParsers.get(e).fn!==this[o]:"text/plain"===e&&this.customParsers.has(e)?this.customParsers.get(e).fn!==C:this.hasParser(e)},w.prototype.getParser=function(e){if(this.hasParser(e))return this.customParsers.get(e);const t=this.cache.get(e);if(void 0!==t)return t;const n=r(e);if(n===s)return this.customParsers.get("");for(var i=0;i!==this.parserList.length;++i){const t=this.parserList[i];if(R(n,t)){const n=this.customParsers.get(t.name);return this.cache.set(e,n),n}}for(var o=0;o!==this.parserRegExpList.length;++o){const t=this.parserRegExpList[o];if(O(e,n.type,t)){const n=this.customParsers.get(""+t);return this.cache.set(e,n),n}}return this.customParsers.get("")},w.prototype.removeAll=function(){this.customParsers=new Map,this.parserRegExpList=[],this.parserList=[],this.cache=new n(100)},w.prototype.remove=function(e){if(!("string"==typeof e||e instanceof RegExp))throw new f;const t=this.customParsers.delete(""+e),n="string"==typeof e?this.parserList:this.parserRegExpList,r=n.findIndex((t=>""+t==""+e));return r>-1&&n.splice(r,1),t||r>-1},w.prototype.run=function(e,n,r,s){const i=this.getParser(e);if(void 0===i)return void(r.is404?n(r,s):s.send(new _(e||void 0)));const o=new t("content-type-parser:run",r);if(!0===i.asString||!0===i.asBuffer)x(r,s,s[h]._parserOptions,i,a);else{const e=i.fn(r,r[l],a);e&&"function"==typeof e.then&&e.then((e=>a(null,e)),a)}function a(e,t){o.runInAsyncScope((()=>{o.emitDestroy(),e?(s[d]=!0,s.send(e)):(r.body=t,n(r,s))}))}},N.prototype.toString=function(){return this.name},e.exports=w,e.exports.helpers={buildContentTypeParser:function(e){const t=new w;return t[o]=e[o],t.customParsers=new Map(e.customParsers.entries()),t.parserList=e.parserList.slice(),t.parserRegExpList=e.parserRegExpList.slice(),t},addContentTypeParser:function(e,t,n){if(this[u].started)throw new T("addContentTypeParser");return"function"==typeof t&&(n=t,t={}),t||(t={}),t.bodyLimit||(t.bodyLimit=this[c]),Array.isArray(e)?e.forEach((e=>this[a].add(e,t,n))):this[a].add(e,t,n),this},hasContentTypeParser:function(e){return this[a].hasParser(e)},removeContentTypeParser:function(e){if(this[u].started)throw new T("removeContentTypeParser");if(Array.isArray(e))for(const t of e)this[a].remove(t);else this[a].remove(e)},removeAllContentTypeParsers:function(){if(this[u].started)throw new T("removeAllContentTypeParsers");this[a].removeAll()}},e.exports.defaultParsers={getDefaultJsonParser:k,defaultTextParser:C},e.exports[p]={rawBody:x}}(ch);var Nh=ch.exports,Dh={exports:{}},Ph={exports:{}},Lh=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var r,s,i;if(Array.isArray(t)){if((r=t.length)!=n.length)return!1;for(s=r;0!=s--;)if(!e(t[s],n[s]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!=={}.valueOf)return t.valueOf()===n.valueOf();if(t.toString!=={}.toString)return""+t==""+n;if((r=(i=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(s=r;0!=s--;)if(!{}.hasOwnProperty.call(n,i[s]))return!1;for(s=r;0!=s--;){var o=i[s];if(!e(t[o],n[o]))return!1}return!0}return t!=t&&n!=n};const Mh=Lh,Bh=Symbol.for("json-schema-ref");function jh(e,t){const n=t.split("/");let r=e;for(const e of n)if(""!==e&&"#"!==e){if("object"!=typeof r||null===r)return null;r=r[e]}return r??null}var Fh={RefResolver:class{#e;#t;#n;#r;#s;constructor(e={}){this.#e={},this.#t={},this.#n=e.insertRefSymbol??!1,this.#r=e.allowEqualDuplicates??!0,this.#s=e.cloneSchemaWithoutRefs??!1}addSchema(e,t){void 0!==e.$id&&"#"!==e.$id.charAt(0)?t=e.$id:this.#i(e,t),this.#o(e,t)}getSchema(e,t="#"){const n=this.#e[e];if(void 0===n)throw Error(`Cannot resolve ref "${e}${t}". Schema with id "${e}" is not found.`);return void 0!==n.anchors[t]?n.anchors[t]:jh(n.schema,t)}hasSchema(e){return void 0!==this.#e[e]}getSchemaRefs(e){const t=this.#e[e];if(void 0===t)throw Error(`Schema with id "${e}" is not found.`);return t.refs}getSchemaDependencies(e,t={}){const n=this.#e[e];for(const e of n.refs){const n=e.schemaId;void 0===t[n]&&(t[n]=this.getSchema(n),this.getSchemaDependencies(n,t))}return t}derefSchema(e){if(void 0!==this.#t[e])return;const t=this.#e[e];if(void 0===t)throw Error(`Schema with id "${e}" is not found.`);this.#s||0!==t.refs.length||(this.#t[e]={schema:t.schema,anchors:t.anchors});const n=[];this.#a(t.schema,e,n);const r=this.getSchemaDependencies(e);for(const e in r)this.#a(r[e],e,n);for(const e of n){const{refSchemaId:t,refJsonPointer:n}=this.#c(e.ref,e.sourceSchemaId),r=this.getDerefSchema(t,n);if(null===r)throw Error(`Cannot resolve ref "${e.ref}". Ref "${n}" is not found in schema "${t}".`);e.targetSchema=r,e.targetSchemaId=t}for(const e of n)this.#l(e,n)}getDerefSchema(e,t="#"){let n=this.#t[e];return void 0===n&&(this.derefSchema(e),n=this.#t[e]),void 0!==n.anchors[t]?n.anchors[t]:jh(n.schema,t)}#c(e,t){const n=e.indexOf("#");return-1===n?{refSchemaId:e,refJsonPointer:"#"}:0===n?{refSchemaId:t,refJsonPointer:e}:{refSchemaId:e.slice(0,n),refJsonPointer:e.slice(n)}}#o(e,t){const n=e.$id;void 0!==n&&"string"==typeof n&&("#"===n.charAt(0)?this.#u(e,t,n):(this.#i(e,n),t=n));const r=e.$ref;if(void 0!==r&&"string"==typeof r){const{refSchemaId:e,refJsonPointer:n}=this.#c(r,t);this.#e[t].refs.push({schemaId:e,jsonPointer:n})}for(const n in e)"object"==typeof e[n]&&null!==e[n]&&this.#o(e[n],t)}#a(e,t,n=[]){const r=Array.isArray(e)?[...e]:{...e},s=r.$id;void 0!==s&&"string"==typeof s&&("#"===s.charAt(0)?this.#p(r,t,s):(this.#d(r,s),t=s)),void 0!==r.$ref&&n.push({ref:r.$ref,sourceSchemaId:t,sourceSchema:r});for(const e in r){const s=r[e];"object"==typeof s&&null!==s&&(r[e]=this.#a(s,t,n))}return r}#l(e,t){const{sourceSchema:n,targetSchema:r}=e;if(n.$ref){if(this.#n&&(n[Bh]=n.$ref),delete n.$ref,r.$ref){const e=t.find((e=>e.sourceSchema===r));this.#l(e,t)}for(const t in r)if("$id"!==t){if(void 0!==n[t]){if(Mh(n[t],r[t]))continue;throw Error(`Cannot resolve ref "${e.ref}". Property "${t}" is already exist in schema "${e.sourceSchemaId}".`)}n[t]=r[t]}e.isResolved=!0}}#i(e,t){const n=this.#e[t];if(void 0!==n){if(this.#r&&Mh(e,n.schema))return;throw Error(`There is already another schema with id "${t}".`)}this.#e[t]={schema:e,anchors:{},refs:[]}}#u(e,t,n){const{anchors:r}=this.#e[t];if(void 0!==r[n])throw Error(`There is already another anchor "${n}" in a schema "${t}".`);r[n]=e}#d(e,t){void 0===this.#t[t]&&(this.#t[t]={schema:e,anchors:{}})}#p(e,t,n){const{anchors:r}=this.#t[t];r[n]=e}}},$h={exports:{}},Uh={},Hh={},Gh={},qh={},zh={},Vh={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class t{}e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class n extends t{constructor(t){if(super(),!e.IDENTIFIER.test(t))throw Error("CodeGen: name must be a valid identifier");this.str=t}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=n;class r extends t{constructor(e){super(),this._items="string"==typeof e?[e]:e}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const e=this._items[0];return""===e||'""'===e}get str(){var e;return null!==(e=this._str)&&void 0!==e?e:this._str=this._items.reduce(((e,t)=>`${e}${t}`),"")}get names(){var e;return null!==(e=this._names)&&void 0!==e?e:this._names=this._items.reduce(((e,t)=>(t instanceof n&&(e[t.str]=(e[t.str]||0)+1),e)),{})}}function s(e,...t){const n=[e[0]];let s=0;for(;t.length>s;)a(n,t[s]),n.push(e[++s]);return new r(n)}e._Code=r,e.nil=new r(""),e._=s;const i=new r("+");function o(e,...t){const n=[l(e[0])];let s=0;for(;t.length>s;)n.push(i),a(n,t[s]),n.push(i,l(e[++s]));return function(e){let t=1;for(;e.length-1>t;){if(e[t]===i){const n=c(e[t-1],e[t+1]);if(void 0!==n){e.splice(t-1,3,n);continue}e[t++]="+"}t++}}(n),new r(n)}function a(e,t){var s;t instanceof r?e.push(...t._items):e.push(t instanceof n?t:"number"==typeof(s=t)||"boolean"==typeof s||null===s?s:l(Array.isArray(s)?s.join(","):s))}function c(e,t){if('""'===t)return e;if('""'===e)return t;if("string"==typeof e){if(t instanceof n||'"'!==e[e.length-1])return;return"string"!=typeof t?`${e.slice(0,-1)}${t}"`:'"'===t[0]?e.slice(0,-1)+t.slice(1):void 0}return"string"!=typeof t||'"'!==t[0]||e instanceof n?void 0:`"${e}${t.slice(1)}`}function l(e){return JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.str=o,e.addCodeArg=a,e.strConcat=function(e,t){return t.emptyStr()?e:e.emptyStr()?t:o`${e}${t}`},e.stringify=function(e){return new r(l(e))},e.safeStringify=l,e.getProperty=function(t){return"string"==typeof t&&e.IDENTIFIER.test(t)?new r("."+t):s`[${t}]`},e.getEsmExportName=function(t){if("string"==typeof t&&e.IDENTIFIER.test(t))return new r(""+t);throw Error(`CodeGen: invalid export name: ${t}, use explicit $id name mapping`)},e.regexpCode=function(e){return new r(""+e)}}(Vh);var Yh,Kh={};function Qh(){return Yh||(Yh=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;const t=Vh,n=Kh;var r=Vh;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return r.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return r.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return r.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return r.Name}});var s=Kh;Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return s.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return s.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return s.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return s.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};class i{optimizeNodes(){return this}optimizeNames(e,t){return this}}class o extends i{constructor(e,t,n){super(),this.varKind=e,this.name=t,this.rhs=n}render({es5:e,_n:t}){return`${e?n.varKinds.var:this.varKind} ${this.name}${void 0===this.rhs?"":" = "+this.rhs};`+t}optimizeNames(e,t){if(e[this.name.str])return this.rhs&&(this.rhs=I(this.rhs,e,t)),this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}class a extends i{constructor(e,t,n){super(),this.lhs=e,this.rhs=t,this.sideEffects=n}render({_n:e}){return`${this.lhs} = ${this.rhs};`+e}optimizeNames(e,n){if(!(this.lhs instanceof t.Name)||e[this.lhs.str]||this.sideEffects)return this.rhs=I(this.rhs,e,n),this}get names(){return C(this.lhs instanceof t.Name?{}:{...this.lhs.names},this.rhs)}}class c extends a{constructor(e,t,n,r){super(e,n,r),this.op=t}render({_n:e}){return`${this.lhs} ${this.op}= ${this.rhs};`+e}}class l extends i{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return this.label+":"+e}}class u extends i{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`break${this.label?" "+this.label:""};`+e}}class p extends i{constructor(e){super(),this.error=e}render({_n:e}){return`throw ${this.error};`+e}get names(){return this.error.names}}class d extends i{constructor(e){super(),this.code=e}render({_n:e}){return this.code+";"+e}optimizeNodes(){return""+this.code?this:void 0}optimizeNames(e,t){return this.code=I(this.code,e,t),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}}class h extends i{constructor(e=[]){super(),this.nodes=e}render(e){return this.nodes.reduce(((t,n)=>t+n.render(e)),"")}optimizeNodes(){const{nodes:e}=this;let t=e.length;for(;t--;){const n=e[t].optimizeNodes();Array.isArray(n)?e.splice(t,1,...n):n?e[t]=n:e.splice(t,1)}return e.length>0?this:void 0}optimizeNames(e,t){const{nodes:n}=this;let r=n.length;for(;r--;){const s=n[r];s.optimizeNames(e,t)||(R(e,s.names),n.splice(r,1))}return n.length>0?this:void 0}get names(){return this.nodes.reduce(((e,t)=>k(e,t.names)),{})}}class f extends h{render(e){return"{"+e._n+super.render(e)+"}"+e._n}}class m extends h{}class g extends f{}g.kind="else";class y extends f{constructor(e,t){super(t),this.condition=e}render(e){let t=`if(${this.condition})`+super.render(e);return this.else&&(t+="else "+this.else.render(e)),t}optimizeNodes(){super.optimizeNodes();const e=this.condition;if(!0===e)return this.nodes;let t=this.else;if(t){const e=t.optimizeNodes();t=this.else=Array.isArray(e)?new g(e):e}return t?!1===e?t instanceof y?t:t.nodes:this.nodes.length?this:new y(O(e),t instanceof y?[t]:t.nodes):!1!==e&&this.nodes.length?this:void 0}optimizeNames(e,t){var n;if(this.else=null===(n=this.else)||void 0===n?void 0:n.optimizeNames(e,t),super.optimizeNames(e,t)||this.else)return this.condition=I(this.condition,e,t),this}get names(){const e=super.names;return C(e,this.condition),this.else&&k(e,this.else.names),e}}y.kind="if";class v extends f{}v.kind="for";class b extends v{constructor(e){super(),this.iteration=e}render(e){return`for(${this.iteration})`+super.render(e)}optimizeNames(e,t){if(super.optimizeNames(e,t))return this.iteration=I(this.iteration,e,t),this}get names(){return k(super.names,this.iteration.names)}}class E extends v{constructor(e,t,n,r){super(),this.varKind=e,this.name=t,this.from=n,this.to=r}render(e){const t=e.es5?n.varKinds.var:this.varKind,{name:r,from:s,to:i}=this;return`for(${t} ${r}=${s}; ${r}<${i}; ${r}++)`+super.render(e)}get names(){const e=C(super.names,this.from);return C(e,this.to)}}class _ extends v{constructor(e,t,n,r){super(),this.loop=e,this.varKind=t,this.name=n,this.iterable=r}render(e){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(e)}optimizeNames(e,t){if(super.optimizeNames(e,t))return this.iterable=I(this.iterable,e,t),this}get names(){return k(super.names,this.iterable.names)}}class A extends f{constructor(e,t,n){super(),this.name=e,this.args=t,this.async=n}render(e){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(e)}}A.kind="func";class S extends h{render(e){return"return "+super.render(e)}}S.kind="return";class T extends f{render(e){let t="try"+super.render(e);return this.catch&&(t+=this.catch.render(e)),this.finally&&(t+=this.finally.render(e)),t}optimizeNodes(){var e,t;return super.optimizeNodes(),null===(e=this.catch)||void 0===e||e.optimizeNodes(),null===(t=this.finally)||void 0===t||t.optimizeNodes(),this}optimizeNames(e,t){var n,r;return super.optimizeNames(e,t),null===(n=this.catch)||void 0===n||n.optimizeNames(e,t),null===(r=this.finally)||void 0===r||r.optimizeNames(e,t),this}get names(){const e=super.names;return this.catch&&k(e,this.catch.names),this.finally&&k(e,this.finally.names),e}}class w extends f{constructor(e){super(),this.error=e}render(e){return`catch(${this.error})`+super.render(e)}}w.kind="catch";class x extends f{render(e){return"finally"+super.render(e)}}function k(e,t){for(const n in t)e[n]=(e[n]||0)+(t[n]||0);return e}function C(e,n){return n instanceof t._CodeOrName?k(e,n.names):e}function I(e,n,r){return e instanceof t.Name?i(e):(s=e)instanceof t._Code&&s._items.some((e=>e instanceof t.Name&&1===n[e.str]&&void 0!==r[e.str]))?new t._Code(e._items.reduce(((e,n)=>(n instanceof t.Name&&(n=i(n)),n instanceof t._Code?e.push(...n._items):e.push(n),e)),[])):e;var s;function i(e){const t=r[e.str];return void 0===t||1!==n[e.str]?e:(delete n[e.str],t)}}function R(e,t){for(const n in t)e[n]=(e[n]||0)-(t[n]||0)}function O(e){return"boolean"==typeof e||"number"==typeof e||null===e?!e:t._`!${L(e)}`}x.kind="finally",e.CodeGen=class{constructor(e,t={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...t,_n:t.lines?"\n":""},this._extScope=e,this._scope=new n.Scope({parent:e}),this._nodes=[new m]}toString(){return this._root.render(this.opts)}name(e){return this._scope.name(e)}scopeName(e){return this._extScope.name(e)}scopeValue(e,t){const n=this._extScope.value(e,t);return(this._values[n.prefix]||(this._values[n.prefix]=new Set)).add(n),n}getScopeValue(e,t){return this._extScope.getValue(e,t)}scopeRefs(e){return this._extScope.scopeRefs(e,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(e,t,n,r){const s=this._scope.toName(t);return void 0!==n&&r&&(this._constants[s.str]=n),this._leafNode(new o(e,s,n)),s}const(e,t,r){return this._def(n.varKinds.const,e,t,r)}let(e,t,r){return this._def(n.varKinds.let,e,t,r)}var(e,t,r){return this._def(n.varKinds.var,e,t,r)}assign(e,t,n){return this._leafNode(new a(e,t,n))}add(t,n){return this._leafNode(new c(t,e.operators.ADD,n))}code(e){return"function"==typeof e?e():e!==t.nil&&this._leafNode(new d(e)),this}object(...e){const n=["{"];for(const[r,s]of e)n.length>1&&n.push(","),n.push(r),(r!==s||this.opts.es5)&&(n.push(":"),(0,t.addCodeArg)(n,s));return n.push("}"),new t._Code(n)}if(e,t,n){if(this._blockNode(new y(e)),t&&n)this.code(t).else().code(n).endIf();else if(t)this.code(t).endIf();else if(n)throw Error('CodeGen: "else" body without "then" body');return this}elseIf(e){return this._elseNode(new y(e))}else(){return this._elseNode(new g)}endIf(){return this._endBlockNode(y,g)}_for(e,t){return this._blockNode(e),t&&this.code(t).endFor(),this}for(e,t){return this._for(new b(e),t)}forRange(e,t,r,s,i=(this.opts.es5?n.varKinds.var:n.varKinds.let)){const o=this._scope.toName(e);return this._for(new E(i,o,t,r),(()=>s(o)))}forOf(e,r,s,i=n.varKinds.const){const o=this._scope.toName(e);if(this.opts.es5){const e=r instanceof t.Name?r:this.var("_arr",r);return this.forRange("_i",0,t._`${e}.length`,(n=>{this.var(o,t._`${e}[${n}]`),s(o)}))}return this._for(new _("of",i,o,r),(()=>s(o)))}forIn(e,r,s,i=(this.opts.es5?n.varKinds.var:n.varKinds.const)){if(this.opts.ownProperties)return this.forOf(e,t._`Object.keys(${r})`,s);const o=this._scope.toName(e);return this._for(new _("in",i,o,r),(()=>s(o)))}endFor(){return this._endBlockNode(v)}label(e){return this._leafNode(new l(e))}break(e){return this._leafNode(new u(e))}return(e){const t=new S;if(this._blockNode(t),this.code(e),1!==t.nodes.length)throw Error('CodeGen: "return" should have one node');return this._endBlockNode(S)}try(e,t,n){if(!t&&!n)throw Error('CodeGen: "try" without "catch" and "finally"');const r=new T;if(this._blockNode(r),this.code(e),t){const e=this.name("e");this._currNode=r.catch=new w(e),t(e)}return n&&(this._currNode=r.finally=new x,this.code(n)),this._endBlockNode(w,x)}throw(e){return this._leafNode(new p(e))}block(e,t){return this._blockStarts.push(this._nodes.length),e&&this.code(e).endBlock(t),this}endBlock(e){const t=this._blockStarts.pop();if(void 0===t)throw Error("CodeGen: not in self-balancing block");const n=this._nodes.length-t;if(0>n||void 0!==e&&n!==e)throw Error(`CodeGen: wrong number of nodes: ${n} vs ${e} expected`);return this._nodes.length=t,this}func(e,n=t.nil,r,s){return this._blockNode(new A(e,n,r)),s&&this.code(s).endFunc(),this}endFunc(){return this._endBlockNode(A)}optimize(e=1){for(;e-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(e){return this._currNode.nodes.push(e),this}_blockNode(e){this._currNode.nodes.push(e),this._nodes.push(e)}_endBlockNode(e,t){const n=this._currNode;if(n instanceof e||t&&n instanceof t)return this._nodes.pop(),this;throw Error(`CodeGen: not in block "${t?`${e.kind}/${t.kind}`:e.kind}"`)}_elseNode(e){const t=this._currNode;if(!(t instanceof y))throw Error('CodeGen: "else" without "if"');return this._currNode=t.else=e,this}get _root(){return this._nodes[0]}get _currNode(){const e=this._nodes;return e[e.length-1]}set _currNode(e){const t=this._nodes;t[t.length-1]=e}},e.not=O;const N=P(e.operators.AND);e.and=function(...e){return e.reduce(N)};const D=P(e.operators.OR);function P(e){return(n,r)=>n===t.nil?r:r===t.nil?n:t._`${L(n)} ${e} ${L(r)}`}function L(e){return e instanceof t.Name?e:t._`(${e})`}e.or=function(...e){return e.reduce(D)}}(zh)),zh}!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;const t=Vh;class n extends Error{constructor(e){super(`CodeGen: "code" for ${e} not defined`),this.value=e.value}}var r;!function(e){e[e.Started=0]="Started",e[e.Completed=1]="Completed"}(r||(e.UsedValueState=r={})),e.varKinds={const:new t.Name("const"),let:new t.Name("let"),var:new t.Name("var")};class s{constructor({prefixes:e,parent:t}={}){this._names={},this._prefixes=e,this._parent=t}toName(e){return e instanceof t.Name?e:this.name(e)}name(e){return new t.Name(this._newName(e))}_newName(e){return`${e}${(this._names[e]||this._nameGroup(e)).index++}`}_nameGroup(e){var t,n;if((null===(n=null===(t=this._parent)||void 0===t?void 0:t._prefixes)||void 0===n?void 0:n.has(e))||this._prefixes&&!this._prefixes.has(e))throw Error(`CodeGen: prefix "${e}" is not allowed in this scope`);return this._names[e]={prefix:e,index:0}}}e.Scope=s;class i extends t.Name{constructor(e,t){super(t),this.prefix=e}setValue(e,{property:n,itemIndex:r}){this.value=e,this.scopePath=t._`.${new t.Name(n)}[${r}]`}}e.ValueScopeName=i;const o=t._`\n`;e.ValueScope=class extends s{constructor(e){super(e),this._values={},this._scope=e.scope,this.opts={...e,_n:e.lines?o:t.nil}}get(){return this._scope}name(e){return new i(e,this._newName(e))}value(e,t){var n;if(void 0===t.ref)throw Error("CodeGen: ref must be passed in value");const r=this.toName(e),{prefix:s}=r,i=null!==(n=t.key)&&void 0!==n?n:t.ref;let o=this._values[s];if(o){const e=o.get(i);if(e)return e}else o=this._values[s]=new Map;o.set(i,r);const a=this._scope[s]||(this._scope[s]=[]),c=a.length;return a[c]=t.ref,r.setValue(t,{property:s,itemIndex:c}),r}getValue(e,t){const n=this._values[e];if(n)return n.get(t)}scopeRefs(e,n=this._values){return this._reduceValues(n,(n=>{if(void 0===n.scopePath)throw Error(`CodeGen: name "${n}" has no value`);return t._`${e}${n.scopePath}`}))}scopeCode(e=this._values,t,n){return this._reduceValues(e,(e=>{if(void 0===e.value)throw Error(`CodeGen: name "${e}" has no value`);return e.value.code}),t,n)}_reduceValues(s,i,o={},a){let c=t.nil;for(const l in s){const u=s[l];if(!u)continue;const p=o[l]=o[l]||new Map;u.forEach((s=>{if(p.has(s))return;p.set(s,r.Started);let o=i(s);if(o)c=t._`${c}${this.opts.es5?e.varKinds.var:e.varKinds.const} ${s} = ${o};${this.opts._n}`;else{if(!(o=null==a?void 0:a(s)))throw new n(s);c=t._`${c}${o}${this.opts._n}`}p.set(s,r.Completed)}))}return c}}}(Kh);var Wh={};Object.defineProperty(Wh,"__esModule",{value:!0}),Wh.checkStrictMode=Wh.getErrorPath=Wh.Type=Wh.useFunc=Wh.setEvaluated=Wh.evaluatedPropsToName=Wh.mergeEvaluated=Wh.eachItem=Wh.unescapeJsonPointer=Wh.escapeJsonPointer=Wh.escapeFragment=Wh.unescapeFragment=Wh.schemaRefOrVal=Wh.schemaHasRulesButRef=Wh.schemaHasRules=Wh.checkUnknownRules=Wh.alwaysValidSchema=Wh.toHash=void 0;const Jh=Qh(),Xh=Vh;function Zh(e,t=e.schema){const{opts:n,self:r}=e;if(!n.strictSchema)return;if("boolean"==typeof t)return;const s=r.RULES.keywords;for(const n in t)s[n]||lf(e,`unknown keyword: "${n}"`)}function ef(e,t){if("boolean"==typeof e)return!e;for(const n in e)if(t[n])return!0;return!1}function tf(e){return"number"==typeof e?""+e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function nf(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function rf({mergeNames:e,mergeToName:t,mergeValues:n,resultToName:r}){return(s,i,o,a)=>{const c=void 0===o?i:o instanceof Jh.Name?(i instanceof Jh.Name?e(s,i,o):t(s,i,o),o):i instanceof Jh.Name?(t(s,o,i),i):n(i,o);return a!==Jh.Name||c instanceof Jh.Name?c:r(s,c)}}function sf(e,t){if(!0===t)return e.var("props",!0);const n=e.var("props",Jh._`{}`);return void 0!==t&&of(e,n,t),n}function of(e,t,n){Object.keys(n).forEach((n=>e.assign(Jh._`${t}${(0,Jh.getProperty)(n)}`,!0)))}Wh.toHash=function(e){const t={};for(const n of e)t[n]=!0;return t},Wh.alwaysValidSchema=function(e,t){return"boolean"==typeof t?t:0===Object.keys(t).length||(Zh(e,t),!ef(t,e.self.RULES.all))},Wh.checkUnknownRules=Zh,Wh.schemaHasRules=ef,Wh.schemaHasRulesButRef=function(e,t){if("boolean"==typeof e)return!e;for(const n in e)if("$ref"!==n&&t.all[n])return!0;return!1},Wh.schemaRefOrVal=function({topSchemaRef:e,schemaPath:t},n,r,s){if(!s){if("number"==typeof n||"boolean"==typeof n)return n;if("string"==typeof n)return Jh._`${n}`}return Jh._`${e}${t}${(0,Jh.getProperty)(r)}`},Wh.unescapeFragment=function(e){return nf(decodeURIComponent(e))},Wh.escapeFragment=function(e){return encodeURIComponent(tf(e))},Wh.escapeJsonPointer=tf,Wh.unescapeJsonPointer=nf,Wh.eachItem=function(e,t){if(Array.isArray(e))for(const n of e)t(n);else t(e)},Wh.mergeEvaluated={props:rf({mergeNames:(e,t,n)=>e.if(Jh._`${n} !== true && ${t} !== undefined`,(()=>{e.if(Jh._`${t} === true`,(()=>e.assign(n,!0)),(()=>e.assign(n,Jh._`${n} || {}`).code(Jh._`Object.assign(${n}, ${t})`)))})),mergeToName:(e,t,n)=>e.if(Jh._`${n} !== true`,(()=>{!0===t?e.assign(n,!0):(e.assign(n,Jh._`${n} || {}`),of(e,n,t))})),mergeValues:(e,t)=>!0===e||{...e,...t},resultToName:sf}),items:rf({mergeNames:(e,t,n)=>e.if(Jh._`${n} !== true && ${t} !== undefined`,(()=>e.assign(n,Jh._`${t} === true ? true : ${n} > ${t} ? ${n} : ${t}`))),mergeToName:(e,t,n)=>e.if(Jh._`${n} !== true`,(()=>e.assign(n,!0===t||Jh._`${n} > ${t} ? ${n} : ${t}`))),mergeValues:(e,t)=>!0===e||Math.max(e,t),resultToName:(e,t)=>e.var("items",t)})},Wh.evaluatedPropsToName=sf,Wh.setEvaluated=of;const af={};var cf;function lf(e,t,n=e.opts.strictSchema){if(n){if(t="strict mode: "+t,!0===n)throw Error(t);e.self.logger.warn(t)}}Wh.useFunc=function(e,t){return e.scopeValue("func",{ref:t,code:af[t.code]||(af[t.code]=new Xh._Code(t.code))})},function(e){e[e.Num=0]="Num",e[e.Str=1]="Str"}(cf||(Wh.Type=cf={})),Wh.getErrorPath=function(e,t,n){if(e instanceof Jh.Name){const r=t===cf.Num;return n?r?Jh._`"[" + ${e} + "]"`:Jh._`"['" + ${e} + "']"`:r?Jh._`"/" + ${e}`:Jh._`"/" + ${e}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return n?""+(0,Jh.getProperty)(e):"/"+tf(e)},Wh.checkStrictMode=lf;var uf={};Object.defineProperty(uf,"__esModule",{value:!0});const pf=Qh(),df={data:new pf.Name("data"),valCxt:new pf.Name("valCxt"),instancePath:new pf.Name("instancePath"),parentData:new pf.Name("parentData"),parentDataProperty:new pf.Name("parentDataProperty"),rootData:new pf.Name("rootData"),dynamicAnchors:new pf.Name("dynamicAnchors"),vErrors:new pf.Name("vErrors"),errors:new pf.Name("errors"),this:new pf.Name("this"),self:new pf.Name("self"),scope:new pf.Name("scope"),json:new pf.Name("json"),jsonPos:new pf.Name("jsonPos"),jsonLen:new pf.Name("jsonLen"),jsonPart:new pf.Name("jsonPart")};var hf,ff;function mf(){return hf||(hf=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;const t=Qh(),n=Wh,r=uf;function s(e,n){const s=e.const("err",n);e.if(t._`${r.default.vErrors} === null`,(()=>e.assign(r.default.vErrors,t._`[${s}]`)),t._`${r.default.vErrors}.push(${s})`),e.code(t._`${r.default.errors}++`)}function i(e,n){const{gen:r,validateName:s,schemaEnv:i}=e;i.$async?r.throw(t._`new ${e.ValidationError}(${n})`):(r.assign(t._`${s}.errors`,n),r.return(!1))}e.keywordError={message:({keyword:e})=>t.str`must pass "${e}" keyword validation`},e.keyword$DataError={message:({keyword:e,schemaType:n})=>n?t.str`"${e}" keyword must be ${n} ($data)`:t.str`"${e}" keyword is invalid ($data)`},e.reportError=function(n,r=e.keywordError,o,c){const{it:l}=n,{gen:u,compositeRule:p,allErrors:d}=l,h=a(n,r,o);(null!=c?c:p||d)?s(u,h):i(l,t._`[${h}]`)},e.reportExtraError=function(t,n=e.keywordError,o){const{it:c}=t,{gen:l,compositeRule:u,allErrors:p}=c;s(l,a(t,n,o)),u||p||i(c,r.default.vErrors)},e.resetErrorsCount=function(e,n){e.assign(r.default.errors,n),e.if(t._`${r.default.vErrors} !== null`,(()=>e.if(n,(()=>e.assign(t._`${r.default.vErrors}.length`,n)),(()=>e.assign(r.default.vErrors,null)))))},e.extendErrors=function({gen:e,keyword:n,schemaValue:s,data:i,errsCount:o,it:a}){if(void 0===o)throw Error("ajv implementation error");const c=e.name("err");e.forRange("i",o,r.default.errors,(o=>{e.const(c,t._`${r.default.vErrors}[${o}]`),e.if(t._`${c}.instancePath === undefined`,(()=>e.assign(t._`${c}.instancePath`,(0,t.strConcat)(r.default.instancePath,a.errorPath)))),e.assign(t._`${c}.schemaPath`,t.str`${a.errSchemaPath}/${n}`),a.opts.verbose&&(e.assign(t._`${c}.schema`,s),e.assign(t._`${c}.data`,i))}))};const o={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")};function a(e,n,s){const{createErrors:i}=e.it;return!1===i?t._`{}`:function(e,n,s={}){const{gen:i,it:a}=e,u=[c(a,s),l(e,s)];return function(e,{params:n,message:s},i){const{keyword:a,data:c,schemaValue:l,it:u}=e,{opts:p,propertyName:d,topSchemaRef:h,schemaPath:f}=u;i.push([o.keyword,a],[o.params,"function"==typeof n?n(e):n||t._`{}`]),p.messages&&i.push([o.message,"function"==typeof s?s(e):s]),p.verbose&&i.push([o.schema,l],[o.parentSchema,t._`${h}${f}`],[r.default.data,c]),d&&i.push([o.propertyName,d])}(e,n,u),i.object(...u)}(e,n,s)}function c({errorPath:e},{instancePath:s}){const i=s?t.str`${e}${(0,n.getErrorPath)(s,n.Type.Str)}`:e;return[r.default.instancePath,(0,t.strConcat)(r.default.instancePath,i)]}function l({keyword:e,it:{errSchemaPath:r}},{schemaPath:s,parentSchema:i}){let a=i?r:t.str`${r}/${e}`;return s&&(a=t.str`${a}${(0,n.getErrorPath)(s,n.Type.Str)}`),[o.schemaPath,a]}}(qh)),qh}uf.default=df;var gf={},yf={};Object.defineProperty(yf,"__esModule",{value:!0}),yf.getRules=yf.isJSONType=void 0;const vf=new Set(["string","number","integer","boolean","null","object","array"]);yf.isJSONType=function(e){return"string"==typeof e&&vf.has(e)},yf.getRules=function(){const e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...e,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}};var bf,Ef={};function _f(){if(bf)return Ef;function e(e,n){return n.rules.some((n=>t(e,n)))}function t(e,t){var n;return void 0!==e[t.keyword]||(null===(n=t.definition.implements)||void 0===n?void 0:n.some((t=>void 0!==e[t])))}return bf=1,Object.defineProperty(Ef,"__esModule",{value:!0}),Ef.shouldUseRule=Ef.shouldUseGroup=Ef.schemaHasRulesForType=void 0,Ef.schemaHasRulesForType=function({schema:t,self:n},r){const s=n.RULES.types[r];return s&&!0!==s&&e(t,s)},Ef.shouldUseGroup=e,Ef.shouldUseRule=t,Ef}Object.defineProperty(gf,"__esModule",{value:!0}),gf.reportTypeError=gf.checkDataTypes=gf.checkDataType=gf.coerceAndCheckDataType=gf.getJSONTypes=gf.getSchemaTypes=gf.DataType=void 0;const Af=yf,Sf=_f(),Tf=mf(),wf=Qh(),xf=Wh;var kf;function Cf(e){const t=Array.isArray(e)?e:e?[e]:[];if(t.every(Af.isJSONType))return t;throw Error("type must be JSONType or JSONType[]: "+t.join(","))}!function(e){e[e.Correct=0]="Correct",e[e.Wrong=1]="Wrong"}(kf||(gf.DataType=kf={})),gf.getSchemaTypes=function(e){const t=Cf(e.type);if(t.includes("null")){if(!1===e.nullable)throw Error("type: null contradicts nullable: false")}else{if(!t.length&&void 0!==e.nullable)throw Error('"nullable" cannot be used without "type"');!0===e.nullable&&t.push("null")}return t},gf.getJSONTypes=Cf,gf.coerceAndCheckDataType=function(e,t){const{gen:n,data:r,opts:s}=e,i=function(e,t){return t?e.filter((e=>If.has(e)||"array"===t&&"array"===e)):[]}(t,s.coerceTypes),o=t.length>0&&!(0===i.length&&1===t.length&&(0,Sf.schemaHasRulesForType)(e,t[0]));if(o){const o=Of(t,r,s.strictNumbers,kf.Wrong);n.if(o,(()=>{i.length?function(e,t,n){const{gen:r,data:s,opts:i}=e,o=r.let("dataType",wf._`typeof ${s}`),a=r.let("coerced",wf._`undefined`);"array"===i.coerceTypes&&r.if(wf._`${o} == 'object' && Array.isArray(${s}) && ${s}.length == 1`,(()=>r.assign(s,wf._`${s}[0]`).assign(o,wf._`typeof ${s}`).if(Of(t,s,i.strictNumbers),(()=>r.assign(a,s))))),r.if(wf._`${a} !== undefined`);for(const e of n)(If.has(e)||"array"===e&&"array"===i.coerceTypes)&&c(e);function c(e){switch(e){case"string":return void r.elseIf(wf._`${o} == "number" || ${o} == "boolean"`).assign(a,wf._`"" + ${s}`).elseIf(wf._`${s} === null`).assign(a,wf._`""`);case"number":return void r.elseIf(wf._`${o} == "boolean" || ${s} === null
              || (${o} == "string" && ${s} && ${s} == +${s})`).assign(a,wf._`+${s}`);case"integer":return void r.elseIf(wf._`${o} === "boolean" || ${s} === null
              || (${o} === "string" && ${s} && ${s} == +${s} && !(${s} % 1))`).assign(a,wf._`+${s}`);case"boolean":return void r.elseIf(wf._`${s} === "false" || ${s} === 0 || ${s} === null`).assign(a,!1).elseIf(wf._`${s} === "true" || ${s} === 1`).assign(a,!0);case"null":return r.elseIf(wf._`${s} === "" || ${s} === 0 || ${s} === false`),void r.assign(a,null);case"array":r.elseIf(wf._`${o} === "string" || ${o} === "number"
              || ${o} === "boolean" || ${s} === null`).assign(a,wf._`[${s}]`)}}r.else(),Df(e),r.endIf(),r.if(wf._`${a} !== undefined`,(()=>{r.assign(s,a),function({gen:e,parentData:t,parentDataProperty:n},r){e.if(wf._`${t} !== undefined`,(()=>e.assign(wf._`${t}[${n}]`,r)))}(e,a)}))}(e,t,i):Df(e)}))}return o};const If=new Set(["string","number","integer","boolean","null"]);function Rf(e,t,n,r=kf.Correct){const s=r===kf.Correct?wf.operators.EQ:wf.operators.NEQ;let i;switch(e){case"null":return wf._`${t} ${s} null`;case"array":i=wf._`Array.isArray(${t})`;break;case"object":i=wf._`${t} && typeof ${t} == "object" && !Array.isArray(${t})`;break;case"integer":i=o(wf._`!(${t} % 1) && !isNaN(${t})`);break;case"number":i=o();break;default:return wf._`typeof ${t} ${s} ${e}`}return r===kf.Correct?i:(0,wf.not)(i);function o(e=wf.nil){return(0,wf.and)(wf._`typeof ${t} == "number"`,e,n?wf._`isFinite(${t})`:wf.nil)}}function Of(e,t,n,r){if(1===e.length)return Rf(e[0],t,n,r);let s;const i=(0,xf.toHash)(e);if(i.array&&i.object){const e=wf._`typeof ${t} != "object"`;s=i.null?e:wf._`!${t} || ${e}`,delete i.null,delete i.array,delete i.object}else s=wf.nil;i.number&&delete i.integer;for(const e in i)s=(0,wf.and)(s,Rf(e,t,n,r));return s}gf.checkDataType=Rf,gf.checkDataTypes=Of;const Nf={message:({schema:e})=>"must be "+e,params:({schema:e,schemaValue:t})=>"string"==typeof e?wf._`{type: ${e}}`:wf._`{type: ${t}}`};function Df(e){const t=function(e){const{gen:t,data:n,schema:r}=e,s=(0,xf.schemaRefOrVal)(e,r,"type");return{gen:t,keyword:"type",data:n,schema:r.type,schemaCode:s,schemaValue:s,parentSchema:r,params:{},it:e}}(e);(0,Tf.reportError)(t,Nf)}gf.reportTypeError=Df;var Pf,Lf={},Mf={},Bf={};Object.defineProperty(Bf,"__esModule",{value:!0}),Bf.validateUnion=Bf.validateArray=Bf.usePattern=Bf.callValidateCode=Bf.schemaProperties=Bf.allSchemaProperties=Bf.noPropertyInData=Bf.propertyInData=Bf.isOwnProperty=Bf.hasPropFunc=Bf.reportMissingProp=Bf.checkMissingProp=Bf.checkReportMissingProp=void 0;const jf=Qh(),Ff=Wh,$f=uf,Uf=Wh;function Hf(e){return e.scopeValue("func",{ref:{}.hasOwnProperty,code:jf._`Object.prototype.hasOwnProperty`})}function Gf(e,t,n){return jf._`${Hf(e)}.call(${t}, ${n})`}function qf(e,t,n,r){const s=jf._`${t}${(0,jf.getProperty)(n)} === undefined`;return r?(0,jf.or)(s,(0,jf.not)(Gf(e,t,n))):s}function zf(e){return e?Object.keys(e).filter((e=>"__proto__"!==e)):[]}Bf.checkReportMissingProp=function(e,t){const{gen:n,data:r,it:s}=e;n.if(qf(n,r,t,s.opts.ownProperties),(()=>{e.setParams({missingProperty:jf._`${t}`},!0),e.error()}))},Bf.checkMissingProp=function({gen:e,data:t,it:{opts:n}},r,s){return(0,jf.or)(...r.map((r=>(0,jf.and)(qf(e,t,r,n.ownProperties),jf._`${s} = ${r}`))))},Bf.reportMissingProp=function(e,t){e.setParams({missingProperty:t},!0),e.error()},Bf.hasPropFunc=Hf,Bf.isOwnProperty=Gf,Bf.propertyInData=function(e,t,n,r){const s=jf._`${t}${(0,jf.getProperty)(n)} !== undefined`;return r?jf._`${s} && ${Gf(e,t,n)}`:s},Bf.noPropertyInData=qf,Bf.allSchemaProperties=zf,Bf.schemaProperties=function(e,t){return zf(t).filter((n=>!(0,Ff.alwaysValidSchema)(e,t[n])))},Bf.callValidateCode=function({schemaCode:e,data:t,it:{gen:n,topSchemaRef:r,schemaPath:s,errorPath:i},it:o},a,c,l){const u=l?jf._`${e}, ${t}, ${r}${s}`:t,p=[[$f.default.instancePath,(0,jf.strConcat)($f.default.instancePath,i)],[$f.default.parentData,o.parentData],[$f.default.parentDataProperty,o.parentDataProperty],[$f.default.rootData,$f.default.rootData]];o.opts.dynamicRef&&p.push([$f.default.dynamicAnchors,$f.default.dynamicAnchors]);const d=jf._`${u}, ${n.object(...p)}`;return c!==jf.nil?jf._`${a}.call(${c}, ${d})`:jf._`${a}(${d})`};const Vf=jf._`new RegExp`;var Yf;Bf.usePattern=function({gen:e,it:{opts:t}},n){const r=t.unicodeRegExp?"u":"",{regExp:s}=t.code,i=s(n,r);return e.scopeValue("pattern",{key:""+i,ref:i,code:jf._`${"new RegExp"===s.code?Vf:(0,Uf.useFunc)(e,s)}(${n}, ${r})`})},Bf.validateArray=function(e){const{gen:t,data:n,keyword:r,it:s}=e,i=t.name("valid");if(s.allErrors){const e=t.let("valid",!0);return o((()=>t.assign(e,!1))),e}return t.var(i,!0),o((()=>t.break())),i;function o(s){const o=t.const("len",jf._`${n}.length`);t.forRange("i",0,o,(n=>{e.subschema({keyword:r,dataProp:n,dataPropType:Ff.Type.Num},i),t.if((0,jf.not)(i),s)}))}},Bf.validateUnion=function(e){const{gen:t,schema:n,keyword:r,it:s}=e;if(!Array.isArray(n))throw Error("ajv implementation error");if(n.some((e=>(0,Ff.alwaysValidSchema)(s,e)))&&!s.opts.unevaluated)return;const i=t.let("valid",!1),o=t.name("_valid");t.block((()=>n.forEach(((n,s)=>{const a=e.subschema({keyword:r,schemaProp:s,compositeRule:!0},o);t.assign(i,jf._`${i} || ${o}`),e.mergeValidEvaluated(a,o)||t.if((0,jf.not)(i))})))),e.result(i,(()=>e.reset()),(()=>e.error(!0)))};var Kf,Qf={},Wf={},Jf={exports:{}},Xf=Jf.exports=function(e,t,n){"function"==typeof t&&(n=t,t={}),Zf(t,"function"==typeof(n=t.cb||n)?n:n.pre||function(){},n.post||function(){},e,"",e)};function Zf(e,t,n,r,s,i,o,a,c,l){if(r&&"object"==typeof r&&!Array.isArray(r)){for(var u in t(r,s,i,o,a,c,l),r){var p=r[u];if(Array.isArray(p)){if(u in Xf.arrayKeywords)for(var d=0;p.length>d;d++)Zf(e,t,n,p[d],s+"/"+u+"/"+d,i,s,u,r,d)}else if(u in Xf.propsKeywords){if(p&&"object"==typeof p)for(var h in p)Zf(e,t,n,p[h],s+"/"+u+"/"+h.replace(/~/g,"~0").replace(/\//g,"~1"),i,s,u,r,h)}else(u in Xf.keywords||e.allKeys&&!(u in Xf.skipKeywords))&&Zf(e,t,n,p,s+"/"+u,i,s,u,r)}n(r,s,i,o,a,c,l)}}Xf.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0},Xf.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},Xf.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},Xf.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};var em=Jf.exports;Object.defineProperty(Wf,"__esModule",{value:!0}),Wf.getSchemaRefs=Wf.resolveUrl=Wf.normalizeId=Wf._getFullPath=Wf.getFullPath=Wf.inlineRef=void 0;const tm=Wh,nm=Lh,rm=em,sm=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);Wf.inlineRef=function(e,t=!0){return"boolean"==typeof e||(!0===t?!om(e):!!t&&am(e)<=t)};const im=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function om(e){for(const t in e){if(im.has(t))return!0;const n=e[t];if(Array.isArray(n)&&n.some(om))return!0;if("object"==typeof n&&om(n))return!0}return!1}function am(e){let t=0;for(const n in e){if("$ref"===n)return 1/0;if(t++,!sm.has(n)&&("object"==typeof e[n]&&(0,tm.eachItem)(e[n],(e=>t+=am(e))),t===1/0))return 1/0}return t}function cm(e,t="",n){!1!==n&&(t=pm(t));const r=e.parse(t);return lm(e,r)}function lm(e,t){return e.serialize(t).split("#")[0]+"#"}Wf.getFullPath=cm,Wf._getFullPath=lm;const um=/#\/?$/;function pm(e){return e?e.replace(um,""):""}Wf.normalizeId=pm,Wf.resolveUrl=function(e,t,n){return n=pm(n),e.resolve(t,n)};const dm=/^[a-z_][-a-z0-9._]*$/i;var hm;function fm(){if(hm)return Hh;hm=1,Object.defineProperty(Hh,"__esModule",{value:!0}),Hh.getData=Hh.KeywordCxt=Hh.validateFunctionCode=void 0;const e=function(){if(ff)return Gh;ff=1,Object.defineProperty(Gh,"__esModule",{value:!0}),Gh.boolOrEmptySchema=Gh.topBoolOrEmptySchema=void 0;const e=mf(),t=Qh(),n=uf,r={message:"boolean schema is false"};function s(t,n){const{gen:s,data:i}=t;(0,e.reportError)({gen:s,keyword:"false schema",data:i,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:t},r,void 0,n)}return Gh.topBoolOrEmptySchema=function(e){const{gen:r,schema:i,validateName:o}=e;!1===i?s(e,!1):"object"==typeof i&&!0===i.$async?r.return(n.default.data):(r.assign(t._`${o}.errors`,null),r.return(!0))},Gh.boolOrEmptySchema=function(e,t){const{gen:n,schema:r}=e;!1===r?(n.var(t,!1),s(e)):n.var(t,!0)},Gh}(),t=gf,n=_f(),r=gf,s=function(){if(Pf)return Lf;Pf=1,Object.defineProperty(Lf,"__esModule",{value:!0}),Lf.assignDefaults=void 0;const e=Qh(),t=Wh;function n(n,r,s){const{gen:i,compositeRule:o,data:a,opts:c}=n;if(void 0===s)return;const l=e._`${a}${(0,e.getProperty)(r)}`;if(o)return void(0,t.checkStrictMode)(n,"default is ignored for: "+l);let u=e._`${l} === undefined`;"empty"===c.useDefaults&&(u=e._`${u} || ${l} === null || ${l} === ""`),i.if(u,e._`${l} = ${(0,e.stringify)(s)}`)}return Lf.assignDefaults=function(e,t){const{properties:r,items:s}=e.schema;if("object"===t&&r)for(const t in r)n(e,t,r[t].default);else"array"===t&&Array.isArray(s)&&s.forEach(((t,r)=>n(e,r,t.default)))},Lf}(),i=function(){if(Yf)return Mf;Yf=1,Object.defineProperty(Mf,"__esModule",{value:!0}),Mf.validateKeywordUsage=Mf.validSchemaType=Mf.funcKeywordCode=Mf.macroKeywordCode=void 0;const e=Qh(),t=uf,n=Bf,r=mf();function s(t){const{gen:n,data:r,it:s}=t;n.if(s.parentData,(()=>n.assign(r,e._`${s.parentData}[${s.parentDataProperty}]`)))}function i(t,n,r){if(void 0===r)throw Error(`keyword "${n}" failed to compile`);return t.scopeValue("keyword","function"==typeof r?{ref:r}:{ref:r,code:(0,e.stringify)(r)})}return Mf.macroKeywordCode=function(t,n){const{gen:r,keyword:s,schema:o,parentSchema:a,it:c}=t,l=n.macro.call(c.self,o,a,c),u=i(r,s,l);!1!==c.opts.validateSchema&&c.self.validateSchema(l,!0);const p=r.name("valid");t.subschema({schema:l,schemaPath:e.nil,errSchemaPath:`${c.errSchemaPath}/${s}`,topSchemaRef:u,compositeRule:!0},p),t.pass(p,(()=>t.error(!0)))},Mf.funcKeywordCode=function(o,a){var c;const{gen:l,keyword:u,schema:p,parentSchema:d,$data:h,it:f}=o;!function({schemaEnv:e},t){if(t.async&&!e.$async)throw Error("async keyword in sync schema")}(f,a);const m=!h&&a.compile?a.compile.call(f.self,p,d,f):a.validate,g=i(l,u,m),y=l.let("valid");function v(r=(a.async?e._`await `:e.nil)){l.assign(y,e._`${r}${(0,n.callValidateCode)(o,g,f.opts.passContext?t.default.this:t.default.self,!("compile"in a&&!h||!1===a.schema))}`,a.modifying)}function b(t){var n;l.if((0,e.not)(null!==(n=a.valid)&&void 0!==n?n:y),t)}o.block$data(y,(function(){if(!1===a.errors)v(),a.modifying&&s(o),b((()=>o.error()));else{const n=a.async?function(){const t=l.let("ruleErrs",null);return l.try((()=>v(e._`await `)),(n=>l.assign(y,!1).if(e._`${n} instanceof ${f.ValidationError}`,(()=>l.assign(t,e._`${n}.errors`)),(()=>l.throw(n))))),t}():function(){const t=e._`${g}.errors`;return l.assign(t,null),v(e.nil),t}();a.modifying&&s(o),b((()=>function(n,s){const{gen:i}=n;i.if(e._`Array.isArray(${s})`,(()=>{i.assign(t.default.vErrors,e._`${t.default.vErrors} === null ? ${s} : ${t.default.vErrors}.concat(${s})`).assign(t.default.errors,e._`${t.default.vErrors}.length`),(0,r.extendErrors)(n)}),(()=>n.error()))}(o,n)))}})),o.ok(null!==(c=a.valid)&&void 0!==c?c:y)},Mf.validSchemaType=function(e,t,n=!1){return!t.length||t.some((t=>"array"===t?Array.isArray(e):"object"===t?e&&"object"==typeof e&&!Array.isArray(e):typeof e==t||n&&void 0===e))},Mf.validateKeywordUsage=function({schema:e,opts:t,self:n,errSchemaPath:r},s,i){if(Array.isArray(s.keyword)?!s.keyword.includes(i):s.keyword!==i)throw Error("ajv implementation error");const o=s.dependencies;if(null==o?void 0:o.some((t=>!{}.hasOwnProperty.call(e,t))))throw Error(`parent schema must have dependencies of ${i}: ${o.join(",")}`);if(s.validateSchema&&!s.validateSchema(e[i])){const e=`keyword "${i}" value is invalid at path "${r}": `+n.errorsText(s.validateSchema.errors);if("log"!==t.validateSchema)throw Error(e);n.logger.error(e)}},Mf}(),o=function(){if(Kf)return Qf;Kf=1,Object.defineProperty(Qf,"__esModule",{value:!0}),Qf.extendSubschemaMode=Qf.extendSubschemaData=Qf.getSubschema=void 0;const e=Qh(),t=Wh;return Qf.getSubschema=function(n,{keyword:r,schemaProp:s,schema:i,schemaPath:o,errSchemaPath:a,topSchemaRef:c}){if(void 0!==r&&void 0!==i)throw Error('both "keyword" and "schema" passed, only one allowed');if(void 0!==r){const i=n.schema[r];return void 0===s?{schema:i,schemaPath:e._`${n.schemaPath}${(0,e.getProperty)(r)}`,errSchemaPath:`${n.errSchemaPath}/${r}`}:{schema:i[s],schemaPath:e._`${n.schemaPath}${(0,e.getProperty)(r)}${(0,e.getProperty)(s)}`,errSchemaPath:`${n.errSchemaPath}/${r}/${(0,t.escapeFragment)(s)}`}}if(void 0!==i){if(void 0===o||void 0===a||void 0===c)throw Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:i,schemaPath:o,topSchemaRef:c,errSchemaPath:a}}throw Error('either "keyword" or "schema" must be passed')},Qf.extendSubschemaData=function(n,r,{dataProp:s,dataPropType:i,data:o,dataTypes:a,propertyName:c}){if(void 0!==o&&void 0!==s)throw Error('both "data" and "dataProp" passed, only one allowed');const{gen:l}=r;if(void 0!==s){const{errorPath:o,dataPathArr:a,opts:c}=r;u(l.let("data",e._`${r.data}${(0,e.getProperty)(s)}`,!0)),n.errorPath=e.str`${o}${(0,t.getErrorPath)(s,i,c.jsPropertySyntax)}`,n.parentDataProperty=e._`${s}`,n.dataPathArr=[...a,n.parentDataProperty]}function u(e){n.data=e,n.dataLevel=r.dataLevel+1,n.dataTypes=[],r.definedProperties=new Set,n.parentData=r.data,n.dataNames=[...r.dataNames,e]}void 0!==o&&(u(o instanceof e.Name?o:l.let("data",o,!0)),void 0!==c&&(n.propertyName=c)),a&&(n.dataTypes=a)},Qf.extendSubschemaMode=function(e,{jtdDiscriminator:t,jtdMetadata:n,compositeRule:r,createErrors:s,allErrors:i}){void 0!==r&&(e.compositeRule=r),void 0!==s&&(e.createErrors=s),void 0!==i&&(e.allErrors=i),e.jtdDiscriminator=t,e.jtdMetadata=n},Qf}(),a=Qh(),c=uf,l=Wf,u=Wh,p=mf();function d({gen:e,validateName:t,schema:n,schemaEnv:r,opts:s},i){s.code.es5?e.func(t,a._`${c.default.data}, ${c.default.valCxt}`,r.$async,(()=>{e.code(a._`"use strict"; ${h(n,s)}`),function(e,t){e.if(c.default.valCxt,(()=>{e.var(c.default.instancePath,a._`${c.default.valCxt}.${c.default.instancePath}`),e.var(c.default.parentData,a._`${c.default.valCxt}.${c.default.parentData}`),e.var(c.default.parentDataProperty,a._`${c.default.valCxt}.${c.default.parentDataProperty}`),e.var(c.default.rootData,a._`${c.default.valCxt}.${c.default.rootData}`),t.dynamicRef&&e.var(c.default.dynamicAnchors,a._`${c.default.valCxt}.${c.default.dynamicAnchors}`)}),(()=>{e.var(c.default.instancePath,a._`""`),e.var(c.default.parentData,a._`undefined`),e.var(c.default.parentDataProperty,a._`undefined`),e.var(c.default.rootData,c.default.data),t.dynamicRef&&e.var(c.default.dynamicAnchors,a._`{}`)}))}(e,s),e.code(i)})):e.func(t,a._`${c.default.data}, ${function(e){return a._`{${c.default.instancePath}="", ${c.default.parentData}, ${c.default.parentDataProperty}, ${c.default.rootData}=${c.default.data}${e.dynamicRef?a._`, ${c.default.dynamicAnchors}={}`:a.nil}}={}`}(s)}`,r.$async,(()=>e.code(h(n,s)).code(i)))}function h(e,t){const n="object"==typeof e&&e[t.schemaId];return n&&(t.code.source||t.code.process)?a._`/*# sourceURL=${n} */`:a.nil}function f({schema:e,self:t}){if("boolean"==typeof e)return!e;for(const n in e)if(t.RULES.all[n])return!0;return!1}function m(e){return"boolean"!=typeof e.schema}function g(e){(0,u.checkUnknownRules)(e),function(e){const{schema:t,errSchemaPath:n,opts:r,self:s}=e;t.$ref&&r.ignoreKeywordsWithRef&&(0,u.schemaHasRulesButRef)(t,s.RULES)&&s.logger.warn(`$ref: keywords ignored in schema at path "${n}"`)}(e)}function y(e,n){if(e.opts.jtd)return b(e,[],!1,n);const r=(0,t.getSchemaTypes)(e.schema);b(e,r,!(0,t.coerceAndCheckDataType)(e,r),n)}function v({gen:e,schemaEnv:t,schema:n,errSchemaPath:r,opts:s}){const i=n.$comment;if(!0===s.$comment)e.code(a._`${c.default.self}.logger.log(${i})`);else if("function"==typeof s.$comment){const n=a.str`${r}/$comment`,s=e.scopeValue("root",{ref:t.root});e.code(a._`${c.default.self}.opts.$comment(${i}, ${n}, ${s}.schema)`)}}function b(e,t,s,i){const{gen:o,schema:l,data:p,allErrors:d,opts:h,self:f}=e,{RULES:m}=f;function g(u){(0,n.shouldUseGroup)(l,u)&&(u.type?(o.if((0,r.checkDataType)(u.type,p,h.strictNumbers)),E(e,u),1===t.length&&t[0]===u.type&&s&&(o.else(),(0,r.reportTypeError)(e)),o.endIf()):E(e,u),d||o.if(a._`${c.default.errors} === ${i||0}`))}!l.$ref||!h.ignoreKeywordsWithRef&&(0,u.schemaHasRulesButRef)(l,m)?(h.jtd||function(e,t){!e.schemaEnv.meta&&e.opts.strictTypes&&(function(e,t){t.length&&(e.dataTypes.length?(t.forEach((t=>{_(e.dataTypes,t)||A(e,`type "${t}" not allowed by context "${e.dataTypes.join(",")}"`)})),function(e,t){const n=[];for(const r of e.dataTypes)_(t,r)?n.push(r):t.includes("integer")&&"number"===r&&n.push("integer");e.dataTypes=n}(e,t)):e.dataTypes=t)}(e,t),e.opts.allowUnionTypes||function(e,t){1>=t.length||2===t.length&&t.includes("null")||A(e,"use allowUnionTypes to allow union type keyword")}(e,t),function(e,t){const r=e.self.RULES.all;for(const s in r){const i=r[s];if("object"==typeof i&&(0,n.shouldUseRule)(e.schema,i)){const{type:n}=i.definition;n.length&&!n.some((e=>{return(n=t).includes(r=e)||"number"===r&&n.includes("integer");var n,r}))&&A(e,`missing type "${n.join(",")}" for keyword "${s}"`)}}}(e,e.dataTypes))}(e,t),o.block((()=>{for(const e of m.rules)g(e);g(m.post)}))):o.block((()=>T(e,"$ref",m.all.$ref.definition)))}function E(e,t){const{gen:r,schema:i,opts:{useDefaults:o}}=e;o&&(0,s.assignDefaults)(e,t.type),r.block((()=>{for(const r of t.rules)(0,n.shouldUseRule)(i,r)&&T(e,r.keyword,r.definition,t.type)}))}function _(e,t){return e.includes(t)||"integer"===t&&e.includes("number")}function A(e,t){(0,u.checkStrictMode)(e,t+=` at "${e.schemaEnv.baseId+e.errSchemaPath}" (strictTypes)`,e.opts.strictTypes)}Hh.validateFunctionCode=function(t){m(t)&&(g(t),f(t))?function(e){const{schema:t,opts:n,gen:r}=e;d(e,(()=>{n.$comment&&t.$comment&&v(e),function(e){const{schema:t,opts:n}=e;void 0!==t.default&&n.useDefaults&&n.strictSchema&&(0,u.checkStrictMode)(e,"default is ignored in the schema root")}(e),r.let(c.default.vErrors,null),r.let(c.default.errors,0),n.unevaluated&&function(e){const{gen:t,validateName:n}=e;e.evaluated=t.const("evaluated",a._`${n}.evaluated`),t.if(a._`${e.evaluated}.dynamicProps`,(()=>t.assign(a._`${e.evaluated}.props`,a._`undefined`))),t.if(a._`${e.evaluated}.dynamicItems`,(()=>t.assign(a._`${e.evaluated}.items`,a._`undefined`)))}(e),y(e),function(e){const{gen:t,schemaEnv:n,validateName:r,ValidationError:s,opts:i}=e;n.$async?t.if(a._`${c.default.errors} === 0`,(()=>t.return(c.default.data)),(()=>t.throw(a._`new ${s}(${c.default.vErrors})`))):(t.assign(a._`${r}.errors`,c.default.vErrors),i.unevaluated&&function({gen:e,evaluated:t,props:n,items:r}){n instanceof a.Name&&e.assign(a._`${t}.props`,n),r instanceof a.Name&&e.assign(a._`${t}.items`,r)}(e),t.return(a._`${c.default.errors} === 0`))}(e)}))}(t):d(t,(()=>(0,e.topBoolOrEmptySchema)(t)))};class S{constructor(e,t,n){if((0,i.validateKeywordUsage)(e,t,n),this.gen=e.gen,this.allErrors=e.allErrors,this.keyword=n,this.data=e.data,this.schema=e.schema[n],this.$data=t.$data&&e.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,u.schemaRefOrVal)(e,this.schema,n,this.$data),this.schemaType=t.schemaType,this.parentSchema=e.schema,this.params={},this.it=e,this.def=t,this.$data)this.schemaCode=e.gen.const("vSchema",k(this.$data,e));else if(this.schemaCode=this.schemaValue,!(0,i.validSchemaType)(this.schema,t.schemaType,t.allowUndefined))throw Error(`${n} value must be ${JSON.stringify(t.schemaType)}`);("code"in t?t.trackErrors:!1!==t.errors)&&(this.errsCount=e.gen.const("_errs",c.default.errors))}result(e,t,n){this.failResult((0,a.not)(e),t,n)}failResult(e,t,n){this.gen.if(e),n?n():this.error(),t?(this.gen.else(),t(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(e,t){this.failResult((0,a.not)(e),void 0,t)}fail(e){if(void 0===e)return this.error(),void(this.allErrors||this.gen.if(!1));this.gen.if(e),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(e){if(!this.$data)return this.fail(e);const{schemaCode:t}=this;this.fail(a._`${t} !== undefined && (${(0,a.or)(this.invalid$data(),e)})`)}error(e,t,n){if(t)return this.setParams(t),this._error(e,n),void this.setParams({});this._error(e,n)}_error(e,t){(e?p.reportExtraError:p.reportError)(this,this.def.error,t)}$dataError(){(0,p.reportError)(this,this.def.$dataError||p.keyword$DataError)}reset(){if(void 0===this.errsCount)throw Error('add "trackErrors" to keyword definition');(0,p.resetErrorsCount)(this.gen,this.errsCount)}ok(e){this.allErrors||this.gen.if(e)}setParams(e,t){t?Object.assign(this.params,e):this.params=e}block$data(e,t,n=a.nil){this.gen.block((()=>{this.check$data(e,n),t()}))}check$data(e=a.nil,t=a.nil){if(!this.$data)return;const{gen:n,schemaCode:r,schemaType:s,def:i}=this;n.if((0,a.or)(a._`${r} === undefined`,t)),e!==a.nil&&n.assign(e,!0),(s.length||i.validateSchema)&&(n.elseIf(this.invalid$data()),this.$dataError(),e!==a.nil&&n.assign(e,!1)),n.else()}invalid$data(){const{gen:e,schemaCode:t,schemaType:n,def:s,it:i}=this;return(0,a.or)(function(){if(n.length){if(!(t instanceof a.Name))throw Error("ajv implementation error");return a._`${(0,r.checkDataTypes)(Array.isArray(n)?n:[n],t,i.opts.strictNumbers,r.DataType.Wrong)}`}return a.nil}(),function(){if(s.validateSchema){const n=e.scopeValue("validate$data",{ref:s.validateSchema});return a._`!${n}(${t})`}return a.nil}())}subschema(t,n){const r=(0,o.getSubschema)(this.it,t);(0,o.extendSubschemaData)(r,this.it,t),(0,o.extendSubschemaMode)(r,t);const s={...this.it,...r,items:void 0,props:void 0};return function(t,n){m(t)&&(g(t),f(t))?function(e,t){const{schema:n,gen:r,opts:s}=e;s.$comment&&n.$comment&&v(e),function(e){const t=e.schema[e.opts.schemaId];t&&(e.baseId=(0,l.resolveUrl)(e.opts.uriResolver,e.baseId,t))}(e),function(e){if(e.schema.$async&&!e.schemaEnv.$async)throw Error("async schema in sync schema")}(e);const i=r.const("_errs",c.default.errors);y(e,i),r.var(t,a._`${i} === ${c.default.errors}`)}(t,n):(0,e.boolOrEmptySchema)(t,n)}(s,n),s}mergeEvaluated(e,t){const{it:n,gen:r}=this;n.opts.unevaluated&&(!0!==n.props&&void 0!==e.props&&(n.props=u.mergeEvaluated.props(r,e.props,n.props,t)),!0!==n.items&&void 0!==e.items&&(n.items=u.mergeEvaluated.items(r,e.items,n.items,t)))}mergeValidEvaluated(e,t){const{it:n,gen:r}=this;if(n.opts.unevaluated&&(!0!==n.props||!0!==n.items))return r.if(t,(()=>this.mergeEvaluated(e,a.Name))),!0}}function T(e,t,n,r){const s=new S(e,n,t);"code"in n?n.code(s,r):s.$data&&n.validate?(0,i.funcKeywordCode)(s,n):"macro"in n?(0,i.macroKeywordCode)(s,n):(n.compile||n.validate)&&(0,i.funcKeywordCode)(s,n)}Hh.KeywordCxt=S;const w=/^\/(?:[^~]|~0|~1)*$/,x=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function k(e,{dataLevel:t,dataNames:n,dataPathArr:r}){let s,i;if(""===e)return c.default.rootData;if("/"===e[0]){if(!w.test(e))throw Error("Invalid JSON-pointer: "+e);s=e,i=c.default.rootData}else{const o=x.exec(e);if(!o)throw Error("Invalid JSON-pointer: "+e);const a=+o[1];if(s=o[2],"#"===s){if(a>=t)throw Error(p("property/index",a));return r[t-a]}if(a>t)throw Error(p("data",a));if(i=n[t-a],!s)return i}let o=i;const l=s.split("/");for(const e of l)e&&(i=a._`${i}${(0,a.getProperty)((0,u.unescapeJsonPointer)(e))}`,o=a._`${o} && ${i}`);return o;function p(e,n){return`Cannot access ${e} ${n} levels up, current level is ${t}`}}return Hh.getData=k,Hh}Wf.getSchemaRefs=function(e,t){if("boolean"==typeof e)return{};const{schemaId:n,uriResolver:r}=this.opts,s=pm(e[n]||t),i={"":s},o=cm(r,s,!1),a={},c=new Set;return rm(e,{allKeys:!0},((e,t,r,s)=>{if(void 0===s)return;const p=o+t;let d=i[s];function h(t){if(t=pm(d?(0,this.opts.uriResolver.resolve)(d,t):t),c.has(t))throw u(t);c.add(t);let n=this.refs[t];return"string"==typeof n&&(n=this.refs[n]),"object"==typeof n?l(e,n.schema,t):t!==pm(p)&&("#"===t[0]?(l(e,a[t],t),a[t]=e):this.refs[t]=p),t}function f(e){if("string"==typeof e){if(!dm.test(e))throw Error(`invalid anchor "${e}"`);h.call(this,"#"+e)}}"string"==typeof e[n]&&(d=h.call(this,e[n])),f.call(this,e.$anchor),f.call(this,e.$dynamicAnchor),i[t]=d})),a;function l(e,t,n){if(void 0!==t&&!nm(e,t))throw u(n)}function u(e){return Error(`reference "${e}" resolves to more than one schema`)}};var mm,gm={};function ym(){return mm||(mm=1,Object.defineProperty(gm,"__esModule",{value:!0}),gm.default=class extends Error{constructor(e){super("validation failed"),this.errors=e,this.ajv=this.validation=!0}}),gm}var vm,bm={};function Em(){if(vm)return bm;vm=1,Object.defineProperty(bm,"__esModule",{value:!0});const e=Wf;return bm.default=class extends Error{constructor(t,n,r,s){super(s||`can't resolve reference ${r} from id ${n}`),this.missingRef=(0,e.resolveUrl)(t,n,r),this.missingSchema=(0,e.normalizeId)((0,e.getFullPath)(t,this.missingRef))}},bm}var _m={};Object.defineProperty(_m,"__esModule",{value:!0}),_m.resolveSchema=_m.getCompilingSchema=_m.resolveRef=_m.compileSchema=_m.SchemaEnv=void 0;const Am=Qh(),Sm=ym(),Tm=uf,wm=Wf,xm=Wh,km=fm();class Cm{constructor(e){var t;let n;this.refs={},this.dynamicAnchors={},"object"==typeof e.schema&&(n=e.schema),this.schema=e.schema,this.schemaId=e.schemaId,this.root=e.root||this,this.baseId=null!==(t=e.baseId)&&void 0!==t?t:(0,wm.normalizeId)(null==n?void 0:n[e.schemaId||"$id"]),this.schemaPath=e.schemaPath,this.localRefs=e.localRefs,this.meta=e.meta,this.$async=null==n?void 0:n.$async,this.refs={}}}function Im(e){const t=Om.call(this,e);if(t)return t;const n=(0,wm.getFullPath)(this.opts.uriResolver,e.root.baseId),{es5:r,lines:s}=this.opts.code,{ownProperties:i}=this.opts,o=new Am.CodeGen(this.scope,{es5:r,lines:s,ownProperties:i});let a;e.$async&&(a=o.scopeValue("Error",{ref:Sm.default,code:Am._`require("ajv/dist/runtime/validation_error").default`}));const c=o.scopeName("validate");e.validateName=c;const l={gen:o,allErrors:this.opts.allErrors,data:Tm.default.data,parentData:Tm.default.parentData,parentDataProperty:Tm.default.parentDataProperty,dataNames:[Tm.default.data],dataPathArr:[Am.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:o.scopeValue("schema",!0===this.opts.code.source?{ref:e.schema,code:(0,Am.stringify)(e.schema)}:{ref:e.schema}),validateName:c,ValidationError:a,schema:e.schema,schemaEnv:e,rootId:n,baseId:e.baseId||n,schemaPath:Am.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:Am._`""`,opts:this.opts,self:this};let u;try{this._compilations.add(e),(0,km.validateFunctionCode)(l),o.optimize(this.opts.code.optimize);const t=""+o;u=`${o.scopeRefs(Tm.default.scope)}return ${t}`,this.opts.code.process&&(u=this.opts.code.process(u,e));const n=Function(""+Tm.default.self,""+Tm.default.scope,u)(this,this.scope.get());if(this.scope.value(c,{ref:n}),n.errors=null,n.schema=e.schema,n.schemaEnv=e,e.$async&&(n.$async=!0),!0===this.opts.code.source&&(n.source={validateName:c,validateCode:t,scopeValues:o._values}),this.opts.unevaluated){const{props:e,items:t}=l;n.evaluated={props:e instanceof Am.Name?void 0:e,items:t instanceof Am.Name?void 0:t,dynamicProps:e instanceof Am.Name,dynamicItems:t instanceof Am.Name},n.source&&(n.source.evaluated=(0,Am.stringify)(n.evaluated))}return e.validate=n,e}catch(t){throw delete e.validate,delete e.validateName,u&&this.logger.error("Error compiling schema, function code:",u),t}finally{this._compilations.delete(e)}}function Rm(e){return(0,wm.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:Im.call(this,e)}function Om(e){for(const r of this._compilations)if((t=r).schema===(n=e).schema&&t.root===n.root&&t.baseId===n.baseId)return r;var t,n}function Nm(e,t){let n;for(;"string"==typeof(n=this.refs[t]);)t=n;return n||this.schemas[t]||Dm.call(this,e,t)}function Dm(e,t){const n=this.opts.uriResolver.parse(t),r=(0,wm._getFullPath)(this.opts.uriResolver,n);let s=(0,wm.getFullPath)(this.opts.uriResolver,e.baseId,void 0);if(Object.keys(e.schema).length>0&&r===s)return Lm.call(this,n,e);const i=(0,wm.normalizeId)(r),o=this.refs[i]||this.schemas[i];if("string"==typeof o){const t=Dm.call(this,e,o);if("object"!=typeof(null==t?void 0:t.schema))return;return Lm.call(this,n,t)}if("object"==typeof(null==o?void 0:o.schema)){if(o.validate||Im.call(this,o),i===(0,wm.normalizeId)(t)){const{schema:t}=o,{schemaId:n}=this.opts,r=t[n];return r&&(s=(0,wm.resolveUrl)(this.opts.uriResolver,s,r)),new Cm({schema:t,schemaId:n,root:e,baseId:s})}return Lm.call(this,n,o)}}_m.SchemaEnv=Cm,_m.compileSchema=Im,_m.resolveRef=function(e,t,n){var r;n=(0,wm.resolveUrl)(this.opts.uriResolver,t,n);const s=e.refs[n];if(s)return s;let i=Nm.call(this,e,n);if(void 0===i){const s=null===(r=e.localRefs)||void 0===r?void 0:r[n],{schemaId:o}=this.opts;s&&(i=new Cm({schema:s,schemaId:o,root:e,baseId:t}))}return void 0!==i?e.refs[n]=Rm.call(this,i):void 0},_m.getCompilingSchema=Om,_m.resolveSchema=Dm;const Pm=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function Lm(e,{baseId:t,schema:n,root:r}){var s;if("/"!==(null===(s=e.fragment)||void 0===s?void 0:s[0]))return;for(const r of e.fragment.slice(1).split("/")){if("boolean"==typeof n)return;const e=n[(0,xm.unescapeFragment)(r)];if(void 0===e)return;const s="object"==typeof(n=e)&&n[this.opts.schemaId];!Pm.has(r)&&s&&(t=(0,wm.resolveUrl)(this.opts.uriResolver,t,s))}let i;if("boolean"!=typeof n&&n.$ref&&!(0,xm.schemaHasRulesButRef)(n,this.RULES)){const e=(0,wm.resolveUrl)(this.opts.uriResolver,t,n.$ref);i=Dm.call(this,r,e)}const{schemaId:o}=this.opts;return i=i||new Cm({schema:n,schemaId:o,root:r,baseId:t}),i.schema!==i.root.schema?i:void 0}var Mm={$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON AnySchema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1},Bm={},jm={};!function(e){function t(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(t.length>1){t[0]=t[0].slice(0,-1);for(var r=t.length-1,s=1;r>s;++s)t[s]=t[s].slice(1,-1);return t[r]=t[r].slice(1),t.join("")}return t[0]}function n(e){return"(?:"+e+")"}function r(e){return void 0===e?"undefined":null===e?"null":{}.toString.call(e).split(" ").pop().split("]").shift().toLowerCase()}function s(e){return e.toUpperCase()}function i(e){var r="[A-Za-z]",s="[0-9]",i=t(s,"[A-Fa-f]"),o=n(n("%[EFef]"+i+"%"+i+i+"%"+i+i)+"|"+n("%[89A-Fa-f]"+i+"%"+i+i)+"|"+n("%"+i+i)),a="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",c=t("[\\:\\/\\?\\#\\[\\]\\@]",a),l=e?"[\\uE000-\\uF8FF]":"[]",u=t(r,s,"[\\-\\.\\_\\~]",e?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]");n(r+t(r,s,"[\\+\\-\\.]")+"*"),n(n(o+"|"+t(u,a,"[\\:]"))+"*");var p=n(n("25[0-5]")+"|"+n("2[0-4]"+s)+"|"+n("1"+s+s)+"|"+n("0?[1-9]"+s)+"|0?0?"+s),d=n(p+"\\."+p+"\\."+p+"\\."+p),h=n(i+"{1,4}"),f=n(n(h+"\\:"+h)+"|"+d),m=n(n(h+"\\:")+"{6}"+f),g=n("\\:\\:"+n(h+"\\:")+"{5}"+f),y=n(n(h)+"?\\:\\:"+n(h+"\\:")+"{4}"+f),v=n(n(n(h+"\\:")+"{0,1}"+h)+"?\\:\\:"+n(h+"\\:")+"{3}"+f),b=n(n(n(h+"\\:")+"{0,2}"+h)+"?\\:\\:"+n(h+"\\:")+"{2}"+f),E=n(n(n(h+"\\:")+"{0,3}"+h)+"?\\:\\:"+h+"\\:"+f),_=n(n(n(h+"\\:")+"{0,4}"+h)+"?\\:\\:"+f),A=n(n(n(h+"\\:")+"{0,5}"+h)+"?\\:\\:"+h),S=n(n(n(h+"\\:")+"{0,6}"+h)+"?\\:\\:"),T=n([m,g,y,v,b,E,_,A,S].join("|")),w=n(n(u+"|"+o)+"+");n("[vV]"+i+"+\\."+t(u,a,"[\\:]")+"+"),n(n(o+"|"+t(u,a))+"*");var x=n(o+"|"+t(u,a,"[\\:\\@]"));return n(n(o+"|"+t(u,a,"[\\@]"))+"+"),n(n(x+"|"+t("[\\/\\?]",l))+"*"),{NOT_SCHEME:RegExp(t("[^]",r,s,"[\\+\\-\\.]"),"g"),NOT_USERINFO:RegExp(t("[^\\%\\:]",u,a),"g"),NOT_HOST:RegExp(t("[^\\%\\[\\]\\:]",u,a),"g"),NOT_PATH:RegExp(t("[^\\%\\/\\:\\@]",u,a),"g"),NOT_PATH_NOSCHEME:RegExp(t("[^\\%\\/\\@]",u,a),"g"),NOT_QUERY:RegExp(t("[^\\%]",u,a,"[\\:\\@\\/\\?]",l),"g"),NOT_FRAGMENT:RegExp(t("[^\\%]",u,a,"[\\:\\@\\/\\?]"),"g"),ESCAPE:RegExp(t("[^]",u,a),"g"),UNRESERVED:RegExp(u,"g"),OTHER_CHARS:RegExp(t("[^\\%]",u,c),"g"),PCT_ENCODED:RegExp(o,"g"),IPV4ADDRESS:RegExp("^("+d+")$"),IPV6ADDRESS:RegExp("^\\[?("+T+")"+n(n("\\%25|\\%(?!"+i+"{2})")+"("+w+")")+"?\\]?$")}}var o=i(!1),a=i(!0),c=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,s=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(r=(o=a.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){s=!0,i=e}finally{try{!r&&a.return&&a.return()}finally{if(s)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},l=2147483647,u=36,p=/^xn--/,d=/[^\0-\x7E]/,h={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},f=Math.floor,m=String.fromCharCode;function g(e){throw new RangeError(h[e])}function y(e,t){var n=e.split("@"),r="";return n.length>1&&(r=n[0]+"@",e=n[1]),r+function(e,t){for(var n=[],r=e.length;r--;)n[r]=t(e[r]);return n}((e=e.replace(/[\x2E\u3002\uFF0E\uFF61]/g,".")).split("."),t).join(".")}function v(e){for(var t=[],n=0,r=e.length;r>n;){var s=e.charCodeAt(n++);if(55296>s||s>56319||n>=r)t.push(s);else{var i=e.charCodeAt(n++);56320==(64512&i)?t.push(((1023&s)<<10)+(1023&i)+65536):(t.push(s),n--)}}return t}var b=function(e,t){return e+22+75*(26>e)-((0!=t)<<5)},E=function(e,t,n){var r=0;for(e=n?f(e/700):e>>1,e+=f(e/t);e>455;r+=u)e=f(e/35);return f(r+36*e/(e+38))},_=function(e){var t,n=[],r=e.length,s=0,i=128,o=72,a=e.lastIndexOf("-");0>a&&(a=0);for(var c=0;a>c;++c)128>e.charCodeAt(c)||g("not-basic"),n.push(e.charCodeAt(c));for(var p=a>0?a+1:0;r>p;){for(var d=s,h=1,m=u;;m+=u){r>p||g("invalid-input");var y=10>(t=e.charCodeAt(p++))-48?t-22:26>t-65?t-65:26>t-97?t-97:u;u>y&&y<=f((l-s)/h)||g("overflow"),s+=y*h;var v=m>o?o+26>m?m-o:26:1;if(v>y)break;var b=u-v;h>f(l/b)&&g("overflow"),h*=b}var _=n.length+1;o=E(s-d,_,0==d),f(s/_)>l-i&&g("overflow"),i+=f(s/_),s%=_,n.splice(s++,0,i)}return String.fromCodePoint.apply(String,n)},A=function(e){var t=[],n=(e=v(e)).length,r=128,s=0,i=72,o=!0,a=!1,c=void 0;try{for(var p,d=e[Symbol.iterator]();!(o=(p=d.next()).done);o=!0){var h=p.value;128>h&&t.push(m(h))}}catch(e){a=!0,c=e}finally{try{!o&&d.return&&d.return()}finally{if(a)throw c}}var y=t.length,_=y;for(y&&t.push("-");n>_;){var A=l,S=!0,T=!1,w=void 0;try{for(var x,k=e[Symbol.iterator]();!(S=(x=k.next()).done);S=!0){var C=x.value;C>=r&&A>C&&(A=C)}}catch(e){T=!0,w=e}finally{try{!S&&k.return&&k.return()}finally{if(T)throw w}}var I=_+1;A-r>f((l-s)/I)&&g("overflow"),s+=(A-r)*I,r=A;var R=!0,O=!1,N=void 0;try{for(var D,P=e[Symbol.iterator]();!(R=(D=P.next()).done);R=!0){var L=D.value;if(r>L&&++s>l&&g("overflow"),L==r){for(var M=s,B=u;;B+=u){var j=B>i?i+26>B?B-i:26:1;if(j>M)break;var F=M-j,$=u-j;t.push(m(b(j+F%$,0))),M=f(F/$)}t.push(m(b(M,0))),i=E(s,I,_==y),s=0,++_}}}catch(e){O=!0,N=e}finally{try{!R&&P.return&&P.return()}finally{if(O)throw N}}++s,++r}return t.join("")},S={version:"2.1.0",ucs2:{decode:v,encode:function(e){return String.fromCodePoint.apply(String,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);e.length>t;t++)n[t]=e[t];return n}return Array.from(e)}(e))}},decode:_,encode:A,toASCII:function(e){return y(e,(function(e){return d.test(e)?"xn--"+A(e):e}))},toUnicode:function(e){return y(e,(function(e){return p.test(e)?_(e.slice(4).toLowerCase()):e}))}},T={};function w(e){var t=e.charCodeAt(0);return 16>t?"%0"+t.toString(16).toUpperCase():128>t?"%"+t.toString(16).toUpperCase():2048>t?"%"+(t>>6|192).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase():"%"+(t>>12|224).toString(16).toUpperCase()+"%"+(t>>6&63|128).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase()}function x(e){for(var t="",n=0,r=e.length;r>n;){var s=parseInt(e.substr(n+1,2),16);if(128>s)t+=String.fromCharCode(s),n+=3;else if(s>=194&&224>s){if(6>r-n)t+=e.substr(n,6);else{var i=parseInt(e.substr(n+4,2),16);t+=String.fromCharCode((31&s)<<6|63&i)}n+=6}else if(224>s)t+=e.substr(n,3),n+=3;else{if(9>r-n)t+=e.substr(n,9);else{var o=parseInt(e.substr(n+4,2),16),a=parseInt(e.substr(n+7,2),16);t+=String.fromCharCode((15&s)<<12|(63&o)<<6|63&a)}n+=9}}return t}function k(e,t){function n(e){var n=x(e);return n.match(t.UNRESERVED)?n:e}return e.scheme&&(e.scheme=(e.scheme+"").replace(t.PCT_ENCODED,n).toLowerCase().replace(t.NOT_SCHEME,"")),void 0!==e.userinfo&&(e.userinfo=(e.userinfo+"").replace(t.PCT_ENCODED,n).replace(t.NOT_USERINFO,w).replace(t.PCT_ENCODED,s)),void 0!==e.host&&(e.host=(e.host+"").replace(t.PCT_ENCODED,n).toLowerCase().replace(t.NOT_HOST,w).replace(t.PCT_ENCODED,s)),void 0!==e.path&&(e.path=(e.path+"").replace(t.PCT_ENCODED,n).replace(e.scheme?t.NOT_PATH:t.NOT_PATH_NOSCHEME,w).replace(t.PCT_ENCODED,s)),void 0!==e.query&&(e.query=(e.query+"").replace(t.PCT_ENCODED,n).replace(t.NOT_QUERY,w).replace(t.PCT_ENCODED,s)),void 0!==e.fragment&&(e.fragment=(e.fragment+"").replace(t.PCT_ENCODED,n).replace(t.NOT_FRAGMENT,w).replace(t.PCT_ENCODED,s)),e}function C(e){return e.replace(/^0*(.*)/,"$1")||"0"}function I(e,t){var n=e.match(t.IPV4ADDRESS)||[],r=c(n,2)[1];return r?r.split(".").map(C).join("."):e}function R(e,t){var n=e.match(t.IPV6ADDRESS)||[],r=c(n,3),s=r[1],i=r[2];if(s){for(var o=s.toLowerCase().split("::").reverse(),a=c(o,2),l=a[0],u=a[1],p=u?u.split(":").map(C):[],d=l.split(":").map(C),h=t.IPV4ADDRESS.test(d[d.length-1]),f=h?7:8,m=d.length-f,g=Array(f),y=0;f>y;++y)g[y]=p[y]||d[m+y]||"";h&&(g[f-1]=I(g[f-1],t));var v=g.reduce((function(e,t,n){if(!t||"0"===t){var r=e[e.length-1];r&&r.index+r.length===n?r.length++:e.push({index:n,length:1})}return e}),[]).sort((function(e,t){return t.length-e.length}))[0],b=void 0;if(v&&v.length>1){var E=g.slice(0,v.index),_=g.slice(v.index+v.length);b=E.join(":")+"::"+_.join(":")}else b=g.join(":");return i&&(b+="%"+i),b}return e}var O=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,N=void 0==="".match(/(){0}/)[1];function D(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={},r=!1!==t.iri?a:o;"suffix"===t.reference&&(e=(t.scheme?t.scheme+":":"")+"//"+e);var s=e.match(O);if(s){N?(n.scheme=s[1],n.userinfo=s[3],n.host=s[4],n.port=parseInt(s[5],10),n.path=s[6]||"",n.query=s[7],n.fragment=s[8],isNaN(n.port)&&(n.port=s[5])):(n.scheme=s[1]||void 0,n.userinfo=-1!==e.indexOf("@")?s[3]:void 0,n.host=-1!==e.indexOf("//")?s[4]:void 0,n.port=parseInt(s[5],10),n.path=s[6]||"",n.query=-1!==e.indexOf("?")?s[7]:void 0,n.fragment=-1!==e.indexOf("#")?s[8]:void 0,isNaN(n.port)&&(n.port=e.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?s[4]:void 0)),n.host&&(n.host=R(I(n.host,r),r)),n.reference=void 0!==n.scheme||void 0!==n.userinfo||void 0!==n.host||void 0!==n.port||n.path||void 0!==n.query?void 0===n.scheme?"relative":void 0===n.fragment?"absolute":"uri":"same-document",t.reference&&"suffix"!==t.reference&&t.reference!==n.reference&&(n.error=n.error||"URI is not a "+t.reference+" reference.");var i=T[(t.scheme||n.scheme||"").toLowerCase()];if(t.unicodeSupport||i&&i.unicodeSupport)k(n,r);else{if(n.host&&(t.domainHost||i&&i.domainHost))try{n.host=S.toASCII(n.host.replace(r.PCT_ENCODED,x).toLowerCase())}catch(e){n.error=n.error||"Host's domain name can not be converted to ASCII via punycode: "+e}k(n,o)}i&&i.parse&&i.parse(n,t)}else n.error=n.error||"URI can not be parsed.";return n}var P=/^\.\.?\//,L=/^\/\.(\/|$)/,M=/^\/\.\.(\/|$)/,B=/^\/?(?:.|\n)*?(?=\/|$)/;function j(e){for(var t=[];e.length;)if(e.match(P))e=e.replace(P,"");else if(e.match(L))e=e.replace(L,"/");else if(e.match(M))e=e.replace(M,"/"),t.pop();else if("."===e||".."===e)e="";else{var n=e.match(B);if(!n)throw Error("Unexpected dot segment condition");var r=n[0];e=e.slice(r.length),t.push(r)}return t.join("")}function F(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.iri?a:o,r=[],s=T[(t.scheme||e.scheme||"").toLowerCase()];if(s&&s.serialize&&s.serialize(e,t),e.host)if(n.IPV6ADDRESS.test(e.host));else if(t.domainHost||s&&s.domainHost)try{e.host=t.iri?S.toUnicode(e.host):S.toASCII(e.host.replace(n.PCT_ENCODED,x).toLowerCase())}catch(n){e.error=e.error||"Host's domain name can not be converted to "+(t.iri?"Unicode":"ASCII")+" via punycode: "+n}k(e,n),"suffix"!==t.reference&&e.scheme&&(r.push(e.scheme),r.push(":"));var i=function(e,t){var n=!1!==t.iri?a:o,r=[];return void 0!==e.userinfo&&(r.push(e.userinfo),r.push("@")),void 0!==e.host&&r.push(R(I(e.host+"",n),n).replace(n.IPV6ADDRESS,(function(e,t,n){return"["+t+(n?"%25"+n:"")+"]"}))),"number"!=typeof e.port&&"string"!=typeof e.port||(r.push(":"),r.push(e.port+"")),r.length?r.join(""):void 0}(e,t);if(void 0!==i&&("suffix"!==t.reference&&r.push("//"),r.push(i),e.path&&"/"!==e.path.charAt(0)&&r.push("/")),void 0!==e.path){var c=e.path;t.absolutePath||s&&s.absolutePath||(c=j(c)),void 0===i&&(c=c.replace(/^\/\//,"/%2F")),r.push(c)}return void 0!==e.query&&(r.push("?"),r.push(e.query)),void 0!==e.fragment&&(r.push("#"),r.push(e.fragment)),r.join("")}function $(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r={};return arguments[3]||(e=D(F(e,n),n),t=D(F(t,n),n)),!(n=n||{}).tolerant&&t.scheme?(r.scheme=t.scheme,r.userinfo=t.userinfo,r.host=t.host,r.port=t.port,r.path=j(t.path||""),r.query=t.query):(void 0!==t.userinfo||void 0!==t.host||void 0!==t.port?(r.userinfo=t.userinfo,r.host=t.host,r.port=t.port,r.path=j(t.path||""),r.query=t.query):(t.path?("/"===t.path.charAt(0)?r.path=j(t.path):(r.path=void 0===e.userinfo&&void 0===e.host&&void 0===e.port||e.path?e.path?e.path.slice(0,e.path.lastIndexOf("/")+1)+t.path:t.path:"/"+t.path,r.path=j(r.path)),r.query=t.query):(r.path=e.path,r.query=void 0!==t.query?t.query:e.query),r.userinfo=e.userinfo,r.host=e.host,r.port=e.port),r.scheme=e.scheme),r.fragment=t.fragment,r}function U(e,t){return e&&(""+e).replace(t&&t.iri?a.PCT_ENCODED:o.PCT_ENCODED,x)}var H={scheme:"http",domainHost:!0,parse:function(e,t){return e.host||(e.error=e.error||"HTTP URIs must have a host."),e},serialize:function(e,t){return e.port!==("https"===(e.scheme+"").toLowerCase()?443:80)&&""!==e.port||(e.port=void 0),e.path||(e.path="/"),e}},G={scheme:"https",domainHost:H.domainHost,parse:H.parse,serialize:H.serialize};function q(e){return"boolean"==typeof e.secure?e.secure:"wss"===(e.scheme+"").toLowerCase()}var z={scheme:"ws",domainHost:!0,parse:function(e,t){var n=e;return n.secure=q(n),n.resourceName=(n.path||"/")+(n.query?"?"+n.query:""),n.path=void 0,n.query=void 0,n},serialize:function(e,t){if(e.port!==(q(e)?443:80)&&""!==e.port||(e.port=void 0),"boolean"==typeof e.secure&&(e.scheme=e.secure?"wss":"ws",e.secure=void 0),e.resourceName){var n=e.resourceName.split("?"),r=c(n,2),s=r[0],i=r[1];e.path=s&&"/"!==s?s:void 0,e.query=i,e.resourceName=void 0}return e.fragment=void 0,e}},V={scheme:"wss",domainHost:z.domainHost,parse:z.parse,serialize:z.serialize},Y={},K="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",Q="[0-9A-Fa-f]",W=n(n("%[EFef]"+Q+"%"+Q+Q+"%"+Q+Q)+"|"+n("%[89A-Fa-f]"+Q+"%"+Q+Q)+"|"+n("%"+Q+Q)),J=t("[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",'[\\"\\\\]'),X=RegExp(K,"g"),Z=RegExp(W,"g"),ee=RegExp(t("[^]","[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]","[\\.]",'[\\"]',J),"g"),te=RegExp(t("[^]",K,"[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]"),"g"),ne=te;function re(e){var t=x(e);return t.match(X)?t:e}var se={scheme:"mailto",parse:function(e,t){var n=e,r=n.to=n.path?n.path.split(","):[];if(n.path=void 0,n.query){for(var s=!1,i={},o=n.query.split("&"),a=0,c=o.length;c>a;++a){var l=o[a].split("=");switch(l[0]){case"to":for(var u=l[1].split(","),p=0,d=u.length;d>p;++p)r.push(u[p]);break;case"subject":n.subject=U(l[1],t);break;case"body":n.body=U(l[1],t);break;default:s=!0,i[U(l[0],t)]=U(l[1],t)}}s&&(n.headers=i)}n.query=void 0;for(var h=0,f=r.length;f>h;++h){var m=r[h].split("@");if(m[0]=U(m[0]),t.unicodeSupport)m[1]=U(m[1],t).toLowerCase();else try{m[1]=S.toASCII(U(m[1],t).toLowerCase())}catch(e){n.error=n.error||"Email address's domain name can not be converted to ASCII via punycode: "+e}r[h]=m.join("@")}return n},serialize:function(e,t){var n,r=e,i=null!=(n=e.to)?n instanceof Array?n:"number"!=typeof n.length||n.split||n.setInterval||n.call?[n]:[].slice.call(n):[];if(i){for(var o=0,a=i.length;a>o;++o){var c=i[o]+"",l=c.lastIndexOf("@"),u=c.slice(0,l).replace(Z,re).replace(Z,s).replace(ee,w),p=c.slice(l+1);try{p=t.iri?S.toUnicode(p):S.toASCII(U(p,t).toLowerCase())}catch(e){r.error=r.error||"Email address's domain name can not be converted to "+(t.iri?"Unicode":"ASCII")+" via punycode: "+e}i[o]=u+"@"+p}r.path=i.join(",")}var d=e.headers=e.headers||{};e.subject&&(d.subject=e.subject),e.body&&(d.body=e.body);var h=[];for(var f in d)d[f]!==Y[f]&&h.push(f.replace(Z,re).replace(Z,s).replace(te,w)+"="+d[f].replace(Z,re).replace(Z,s).replace(ne,w));return h.length&&(r.query=h.join("&")),r}},ie=/^([^\:]+)\:(.*)/,oe={scheme:"urn",parse:function(e,t){var n=e.path&&e.path.match(ie),r=e;if(n){var s=t.scheme||r.scheme||"urn",i=n[1].toLowerCase(),o=n[2],a=T[s+":"+(t.nid||i)];r.nid=i,r.nss=o,r.path=void 0,a&&(r=a.parse(r,t))}else r.error=r.error||"URN can not be parsed.";return r},serialize:function(e,t){var n=e.nid,r=T[(t.scheme||e.scheme||"urn")+":"+(t.nid||n)];r&&(e=r.serialize(e,t));var s=e;return s.path=(n||t.nid)+":"+e.nss,s}},ae=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,ce={scheme:"urn:uuid",parse:function(e,t){var n=e;return n.uuid=n.nss,n.nss=void 0,t.tolerant||n.uuid&&n.uuid.match(ae)||(n.error=n.error||"UUID is not valid."),n},serialize:function(e,t){var n=e;return n.nss=(e.uuid||"").toLowerCase(),n}};T[H.scheme]=H,T[G.scheme]=G,T[z.scheme]=z,T[V.scheme]=V,T[se.scheme]=se,T[oe.scheme]=oe,T[ce.scheme]=ce,e.SCHEMES=T,e.pctEncChar=w,e.pctDecChars=x,e.parse=D,e.removeDotSegments=j,e.serialize=F,e.resolveComponents=$,e.resolve=function(e,t,n){var r=function(e,t){var n={scheme:"null"};if(t)for(var r in t)n[r]=t[r];return n}(0,n);return F($(D(e,r),D(t,r),r,!0),r)},e.normalize=function(e,t){return"string"==typeof e?e=F(D(e,t),t):"object"===r(e)&&(e=D(F(e,t),t)),e},e.equal=function(e,t,n){return"string"==typeof e?e=F(D(e,n),n):"object"===r(e)&&(e=F(e,n)),"string"==typeof t?t=F(D(t,n),n):"object"===r(t)&&(t=F(t,n)),e===t},e.escapeComponent=function(e,t){return e&&(""+e).replace(t&&t.iri?a.ESCAPE:o.ESCAPE,w)},e.unescapeComponent=U,Object.defineProperty(e,"__esModule",{value:!0})}(jm);var Fm=jm;Object.defineProperty(Bm,"__esModule",{value:!0});const $m=Fm;$m.code='require("ajv/dist/runtime/uri").default',Bm.default=$m,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t=fm();Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return t.KeywordCxt}});var n=Qh();Object.defineProperty(e,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return n.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return n.CodeGen}});const r=ym(),s=Em(),i=yf,o=_m,a=Qh(),c=Wf,l=gf,u=Wh,p=Mm,d=Bm,h=(e,t)=>RegExp(e,t);h.code="new RegExp";const f=["removeAdditional","useDefaults","coerceTypes"],m=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),g={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},y={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'};function v(e){var t,n,r,s,i,o,a,c,l,u,p,f,m,g,y,v,b,E,_,A,S,T,w,x,k;const C=e.strict,I=null===(t=e.code)||void 0===t?void 0:t.optimize,R=!0===I||void 0===I?1:I||0,O=null!==(r=null===(n=e.code)||void 0===n?void 0:n.regExp)&&void 0!==r?r:h,N=null!==(s=e.uriResolver)&&void 0!==s?s:d.default;return{strictSchema:null===(o=null!==(i=e.strictSchema)&&void 0!==i?i:C)||void 0===o||o,strictNumbers:null===(c=null!==(a=e.strictNumbers)&&void 0!==a?a:C)||void 0===c||c,strictTypes:null!==(u=null!==(l=e.strictTypes)&&void 0!==l?l:C)&&void 0!==u?u:"log",strictTuples:null!==(f=null!==(p=e.strictTuples)&&void 0!==p?p:C)&&void 0!==f?f:"log",strictRequired:null!==(g=null!==(m=e.strictRequired)&&void 0!==m?m:C)&&void 0!==g&&g,code:e.code?{...e.code,optimize:R,regExp:O}:{optimize:R,regExp:O},loopRequired:null!==(y=e.loopRequired)&&void 0!==y?y:200,loopEnum:null!==(v=e.loopEnum)&&void 0!==v?v:200,meta:null===(b=e.meta)||void 0===b||b,messages:null===(E=e.messages)||void 0===E||E,inlineRefs:null===(_=e.inlineRefs)||void 0===_||_,schemaId:null!==(A=e.schemaId)&&void 0!==A?A:"$id",addUsedSchema:null===(S=e.addUsedSchema)||void 0===S||S,validateSchema:null===(T=e.validateSchema)||void 0===T||T,validateFormats:null===(w=e.validateFormats)||void 0===w||w,unicodeRegExp:null===(x=e.unicodeRegExp)||void 0===x||x,int32range:null===(k=e.int32range)||void 0===k||k,uriResolver:N}}class b{constructor(e={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,e=this.opts={...e,...v(e)};const{es5:t,lines:n}=this.opts.code;this.scope=new a.ValueScope({scope:{},prefixes:m,es5:t,lines:n}),this.logger=function(e){if(!1===e)return x;if(void 0===e)return console;if(e.log&&e.warn&&e.error)return e;throw Error("logger must implement log, warn and error methods")}(e.logger);const r=e.validateFormats;e.validateFormats=!1,this.RULES=(0,i.getRules)(),E.call(this,g,e,"NOT SUPPORTED"),E.call(this,y,e,"DEPRECATED","warn"),this._metaOpts=w.call(this),e.formats&&S.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),e.keywords&&T.call(this,e.keywords),"object"==typeof e.meta&&this.addMetaSchema(e.meta),A.call(this),e.validateFormats=r}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:e,meta:t,schemaId:n}=this.opts;let r=p;"id"===n&&(r={...p},r.id=r.$id,delete r.$id),t&&e&&this.addMetaSchema(r,r[n],!1)}defaultMeta(){const{meta:e,schemaId:t}=this.opts;return this.opts.defaultMeta="object"==typeof e?e[t]||e:void 0}validate(e,t){let n;if("string"==typeof e){if(n=this.getSchema(e),!n)throw Error(`no schema with key or ref "${e}"`)}else n=this.compile(e);const r=n(t);return"$async"in n||(this.errors=n.errors),r}compile(e,t){const n=this._addSchema(e,t);return n.validate||this._compileSchemaEnv(n)}compileAsync(e,t){if("function"!=typeof this.opts.loadSchema)throw Error("options.loadSchema should be a function");const{loadSchema:n}=this.opts;return r.call(this,e,t);async function r(e,t){await i.call(this,e.$schema);const n=this._addSchema(e,t);return n.validate||o.call(this,n)}async function i(e){e&&!this.getSchema(e)&&await r.call(this,{$ref:e},!0)}async function o(e){try{return this._compileSchemaEnv(e)}catch(t){if(!(t instanceof s.default))throw t;return a.call(this,t),await c.call(this,t.missingSchema),o.call(this,e)}}function a({missingSchema:e,missingRef:t}){if(this.refs[e])throw Error(`AnySchema ${e} is loaded but ${t} cannot be resolved`)}async function c(e){const n=await l.call(this,e);this.refs[e]||await i.call(this,n.$schema),this.refs[e]||this.addSchema(n,e,t)}async function l(e){const t=this._loading[e];if(t)return t;try{return await(this._loading[e]=n(e))}finally{delete this._loading[e]}}}addSchema(e,t,n,r=this.opts.validateSchema){if(Array.isArray(e)){for(const t of e)this.addSchema(t,void 0,n,r);return this}let s;if("object"==typeof e){const{schemaId:t}=this.opts;if(s=e[t],void 0!==s&&"string"!=typeof s)throw Error(`schema ${t} must be string`)}return t=(0,c.normalizeId)(t||s),this._checkUnique(t),this.schemas[t]=this._addSchema(e,n,t,r,!0),this}addMetaSchema(e,t,n=this.opts.validateSchema){return this.addSchema(e,t,!0,n),this}validateSchema(e,t){if("boolean"==typeof e)return!0;let n;if(n=e.$schema,void 0!==n&&"string"!=typeof n)throw Error("$schema must be a string");if(n=n||this.opts.defaultMeta||this.defaultMeta(),!n)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const r=this.validate(n,e);if(!r&&t){const e="schema is invalid: "+this.errorsText();if("log"!==this.opts.validateSchema)throw Error(e);this.logger.error(e)}return r}getSchema(e){let t;for(;"string"==typeof(t=_.call(this,e));)e=t;if(void 0===t){const{schemaId:n}=this.opts,r=new o.SchemaEnv({schema:{},schemaId:n});if(t=o.resolveSchema.call(this,r,e),!t)return;this.refs[e]=t}return t.validate||this._compileSchemaEnv(t)}removeSchema(e){if(e instanceof RegExp)return this._removeAllSchemas(this.schemas,e),this._removeAllSchemas(this.refs,e),this;switch(typeof e){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const t=_.call(this,e);return"object"==typeof t&&this._cache.delete(t.schema),delete this.schemas[e],delete this.refs[e],this}case"object":{this._cache.delete(e);let t=e[this.opts.schemaId];return t&&(t=(0,c.normalizeId)(t),delete this.schemas[t],delete this.refs[t]),this}default:throw Error("ajv.removeSchema: invalid parameter")}}addVocabulary(e){for(const t of e)this.addKeyword(t);return this}addKeyword(e,t){let n;if("string"==typeof e)n=e,"object"==typeof t&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),t.keyword=n);else{if("object"!=typeof e||void 0!==t)throw Error("invalid addKeywords parameters");if(n=(t=e).keyword,Array.isArray(n)&&!n.length)throw Error("addKeywords: keyword must be string or non-empty array")}if(C.call(this,n,t),!t)return(0,u.eachItem)(n,(e=>I.call(this,e))),this;O.call(this,t);const r={...t,type:(0,l.getJSONTypes)(t.type),schemaType:(0,l.getJSONTypes)(t.schemaType)};return(0,u.eachItem)(n,0===r.type.length?e=>I.call(this,e,r):e=>r.type.forEach((t=>I.call(this,e,r,t)))),this}getKeyword(e){const t=this.RULES.all[e];return"object"==typeof t?t.definition:!!t}removeKeyword(e){const{RULES:t}=this;delete t.keywords[e],delete t.all[e];for(const n of t.rules){const t=n.rules.findIndex((t=>t.keyword===e));0>t||n.rules.splice(t,1)}return this}addFormat(e,t){return"string"==typeof t&&(t=RegExp(t)),this.formats[e]=t,this}errorsText(e=this.errors,{separator:t=", ",dataVar:n="data"}={}){return e&&0!==e.length?e.map((e=>`${n}${e.instancePath} ${e.message}`)).reduce(((e,n)=>e+t+n)):"No errors"}$dataMetaSchema(e,t){const n=this.RULES.all;e=JSON.parse(JSON.stringify(e));for(const r of t){const t=r.split("/").slice(1);let s=e;for(const e of t)s=s[e];for(const e in n){const t=n[e];if("object"!=typeof t)continue;const{$data:r}=t.definition,i=s[e];r&&i&&(s[e]=D(i))}}return e}_removeAllSchemas(e,t){for(const n in e){const r=e[n];t&&!t.test(n)||("string"==typeof r?delete e[n]:r&&!r.meta&&(this._cache.delete(r.schema),delete e[n]))}}_addSchema(e,t,n,r=this.opts.validateSchema,s=this.opts.addUsedSchema){let i;const{schemaId:a}=this.opts;if("object"==typeof e)i=e[a];else{if(this.opts.jtd)throw Error("schema must be object");if("boolean"!=typeof e)throw Error("schema must be object or boolean")}let l=this._cache.get(e);if(void 0!==l)return l;n=(0,c.normalizeId)(i||n);const u=c.getSchemaRefs.call(this,e,n);return l=new o.SchemaEnv({schema:e,schemaId:a,meta:t,baseId:n,localRefs:u}),this._cache.set(l.schema,l),s&&!n.startsWith("#")&&(n&&this._checkUnique(n),this.refs[n]=l),r&&this.validateSchema(e,!0),l}_checkUnique(e){if(this.schemas[e]||this.refs[e])throw Error(`schema with key or id "${e}" already exists`)}_compileSchemaEnv(e){if(e.meta?this._compileMetaSchema(e):o.compileSchema.call(this,e),!e.validate)throw Error("ajv implementation error");return e.validate}_compileMetaSchema(e){const t=this.opts;this.opts=this._metaOpts;try{o.compileSchema.call(this,e)}finally{this.opts=t}}}function E(e,t,n,r="error"){for(const s in e)s in t&&this.logger[r](`${n}: option ${s}. ${e[s]}`)}function _(e){return e=(0,c.normalizeId)(e),this.schemas[e]||this.refs[e]}function A(){const e=this.opts.schemas;if(e)if(Array.isArray(e))this.addSchema(e);else for(const t in e)this.addSchema(e[t],t)}function S(){for(const e in this.opts.formats){const t=this.opts.formats[e];t&&this.addFormat(e,t)}}function T(e){if(Array.isArray(e))this.addVocabulary(e);else{this.logger.warn("keywords option as map is deprecated, pass array");for(const t in e){const n=e[t];n.keyword||(n.keyword=t),this.addKeyword(n)}}}function w(){const e={...this.opts};for(const t of f)delete e[t];return e}b.ValidationError=r.default,b.MissingRefError=s.default,e.default=b;const x={log(){},warn(){},error(){}},k=/^[a-z_$][a-z0-9_$:-]*$/i;function C(e,t){const{RULES:n}=this;if((0,u.eachItem)(e,(e=>{if(n.keywords[e])throw Error(`Keyword ${e} is already defined`);if(!k.test(e))throw Error(`Keyword ${e} has invalid name`)})),t&&t.$data&&!("code"in t)&&!("validate"in t))throw Error('$data keyword must have "code" or "validate" function')}function I(e,t,n){var r;const s=null==t?void 0:t.post;if(n&&s)throw Error('keyword with "post" flag cannot have "type"');const{RULES:i}=this;let o=s?i.post:i.rules.find((({type:e})=>e===n));if(o||(o={type:n,rules:[]},i.rules.push(o)),i.keywords[e]=!0,!t)return;const a={keyword:e,definition:{...t,type:(0,l.getJSONTypes)(t.type),schemaType:(0,l.getJSONTypes)(t.schemaType)}};t.before?R.call(this,o,a,t.before):o.rules.push(a),i.all[e]=a,null===(r=t.implements)||void 0===r||r.forEach((e=>this.addKeyword(e)))}function R(e,t,n){const r=e.rules.findIndex((e=>e.keyword===n));0>r?(e.rules.push(t),this.logger.warn(`rule ${n} is not defined`)):e.rules.splice(r,0,t)}function O(e){let{metaSchema:t}=e;void 0!==t&&(e.$data&&this.opts.$data&&(t=D(t)),e.validateSchema=this.compile(t,!0))}const N={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function D(e){return{anyOf:[e,N]}}}(Uh);var Um={},Hm={},Gm={};Object.defineProperty(Gm,"__esModule",{value:!0}),Gm.default={keyword:"id",code(){throw Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};var qm={};Object.defineProperty(qm,"__esModule",{value:!0}),qm.callRef=qm.getValidate=void 0;const zm=Em(),Vm=Bf,Ym=Qh(),Km=uf,Qm=_m,Wm=Wh,Jm={keyword:"$ref",schemaType:"string",code(e){const{gen:t,schema:n,it:r}=e,{baseId:s,schemaEnv:i,validateName:o,opts:a,self:c}=r,{root:l}=i;if(("#"===n||"#/"===n)&&s===l.baseId)return function(){if(i===l)return Zm(e,o,i,i.$async);const n=t.scopeValue("root",{ref:l});return Zm(e,Ym._`${n}.validate`,l,l.$async)}();const u=Qm.resolveRef.call(c,l,s,n);if(void 0===u)throw new zm.default(r.opts.uriResolver,s,n);return u instanceof Qm.SchemaEnv?function(t){const n=Xm(e,t);Zm(e,n,t,t.$async)}(u):function(r){const s=t.scopeValue("schema",!0===a.code.source?{ref:r,code:(0,Ym.stringify)(r)}:{ref:r}),i=t.name("valid"),o=e.subschema({schema:r,dataTypes:[],schemaPath:Ym.nil,topSchemaRef:s,errSchemaPath:n},i);e.mergeEvaluated(o),e.ok(i)}(u)}};function Xm(e,t){const{gen:n}=e;return t.validate?n.scopeValue("validate",{ref:t.validate}):Ym._`${n.scopeValue("wrapper",{ref:t})}.validate`}function Zm(e,t,n,r){const{gen:s,it:i}=e,{allErrors:o,schemaEnv:a,opts:c}=i,l=c.passContext?Km.default.this:Ym.nil;function u(e){const t=Ym._`${e}.errors`;s.assign(Km.default.vErrors,Ym._`${Km.default.vErrors} === null ? ${t} : ${Km.default.vErrors}.concat(${t})`),s.assign(Km.default.errors,Ym._`${Km.default.vErrors}.length`)}function p(e){var t;if(!i.opts.unevaluated)return;const r=null===(t=null==n?void 0:n.validate)||void 0===t?void 0:t.evaluated;if(!0!==i.props)if(r&&!r.dynamicProps)void 0!==r.props&&(i.props=Wm.mergeEvaluated.props(s,r.props,i.props));else{const t=s.var("props",Ym._`${e}.evaluated.props`);i.props=Wm.mergeEvaluated.props(s,t,i.props,Ym.Name)}if(!0!==i.items)if(r&&!r.dynamicItems)void 0!==r.items&&(i.items=Wm.mergeEvaluated.items(s,r.items,i.items));else{const t=s.var("items",Ym._`${e}.evaluated.items`);i.items=Wm.mergeEvaluated.items(s,t,i.items,Ym.Name)}}r?function(){if(!a.$async)throw Error("async schema referenced by sync schema");const n=s.let("valid");s.try((()=>{s.code(Ym._`await ${(0,Vm.callValidateCode)(e,t,l)}`),p(t),o||s.assign(n,!0)}),(e=>{s.if(Ym._`!(${e} instanceof ${i.ValidationError})`,(()=>s.throw(e))),u(e),o||s.assign(n,!1)})),e.ok(n)}():e.result((0,Vm.callValidateCode)(e,t,l),(()=>p(t)),(()=>u(t)))}qm.getValidate=Xm,qm.callRef=Zm,qm.default=Jm,Object.defineProperty(Hm,"__esModule",{value:!0}),Hm.default=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",Gm.default,qm.default];var eg={},tg={};Object.defineProperty(tg,"__esModule",{value:!0});const ng=Qh(),rg=ng.operators,sg={maximum:{okStr:"<=",ok:rg.LTE,fail:rg.GT},minimum:{okStr:">=",ok:rg.GTE,fail:rg.LT},exclusiveMaximum:{okStr:"<",ok:rg.LT,fail:rg.GTE},exclusiveMinimum:{okStr:">",ok:rg.GT,fail:rg.LTE}},ig={message:({keyword:e,schemaCode:t})=>ng.str`must be ${sg[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>ng._`{comparison: ${sg[e].okStr}, limit: ${t}}`},og={keyword:Object.keys(sg),type:"number",schemaType:"number",$data:!0,error:ig,code(e){const{keyword:t,data:n,schemaCode:r}=e;e.fail$data(ng._`${n} ${sg[t].fail} ${r} || isNaN(${n})`)}};tg.default=og;var ag={};Object.defineProperty(ag,"__esModule",{value:!0});const cg=Qh(),lg={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:{message:({schemaCode:e})=>cg.str`must be multiple of ${e}`,params:({schemaCode:e})=>cg._`{multipleOf: ${e}}`},code(e){const{gen:t,data:n,schemaCode:r,it:s}=e,i=s.opts.multipleOfPrecision,o=t.let("res"),a=i?cg._`Math.abs(Math.round(${o}) - ${o}) > 1e-${i}`:cg._`${o} !== parseInt(${o})`;e.fail$data(cg._`(${r} === 0 || (${o} = ${n}/${r}, ${a}))`)}};ag.default=lg;var ug={},pg={};function dg(e){const t=e.length;let n,r=0,s=0;for(;t>s;)r++,n=e.charCodeAt(s++),55296>n||n>56319||s>=t||(n=e.charCodeAt(s),56320==(64512&n)&&s++);return r}Object.defineProperty(pg,"__esModule",{value:!0}),pg.default=dg,dg.code='require("ajv/dist/runtime/ucs2length").default',Object.defineProperty(ug,"__esModule",{value:!0});const hg=Qh(),fg=Wh,mg=pg,gg={message:({keyword:e,schemaCode:t})=>hg.str`must NOT have ${"maxLength"===e?"more":"fewer"} than ${t} characters`,params:({schemaCode:e})=>hg._`{limit: ${e}}`},yg={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:gg,code(e){const{keyword:t,data:n,schemaCode:r,it:s}=e,i="maxLength"===t?hg.operators.GT:hg.operators.LT,o=!1===s.opts.unicode?hg._`${n}.length`:hg._`${(0,fg.useFunc)(e.gen,mg.default)}(${n})`;e.fail$data(hg._`${o} ${i} ${r}`)}};ug.default=yg;var vg={};Object.defineProperty(vg,"__esModule",{value:!0});const bg=Bf,Eg=Qh(),_g={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:{message:({schemaCode:e})=>Eg.str`must match pattern "${e}"`,params:({schemaCode:e})=>Eg._`{pattern: ${e}}`},code(e){const{data:t,$data:n,schema:r,schemaCode:s,it:i}=e,o=n?Eg._`(new RegExp(${s}, ${i.opts.unicodeRegExp?"u":""}))`:(0,bg.usePattern)(e,r);e.fail$data(Eg._`!${o}.test(${t})`)}};vg.default=_g;var Ag={};Object.defineProperty(Ag,"__esModule",{value:!0});const Sg=Qh(),Tg={message:({keyword:e,schemaCode:t})=>Sg.str`must NOT have ${"maxProperties"===e?"more":"fewer"} than ${t} properties`,params:({schemaCode:e})=>Sg._`{limit: ${e}}`},wg={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:Tg,code(e){const{keyword:t,data:n,schemaCode:r}=e;e.fail$data(Sg._`Object.keys(${n}).length ${"maxProperties"===t?Sg.operators.GT:Sg.operators.LT} ${r}`)}};Ag.default=wg;var xg={};Object.defineProperty(xg,"__esModule",{value:!0});const kg=Bf,Cg=Qh(),Ig=Wh,Rg={keyword:"required",type:"object",schemaType:"array",$data:!0,error:{message:({params:{missingProperty:e}})=>Cg.str`must have required property '${e}'`,params:({params:{missingProperty:e}})=>Cg._`{missingProperty: ${e}}`},code(e){const{gen:t,schema:n,schemaCode:r,data:s,$data:i,it:o}=e,{opts:a}=o;if(!i&&0===n.length)return;const c=n.length>=a.loopRequired;if(o.allErrors?function(){if(c||i)e.block$data(Cg.nil,l);else for(const t of n)(0,kg.checkReportMissingProp)(e,t)}():function(){const o=t.let("missing");if(c||i){const n=t.let("valid",!0);e.block$data(n,(()=>function(n,i){e.setParams({missingProperty:n}),t.forOf(n,r,(()=>{t.assign(i,(0,kg.propertyInData)(t,s,n,a.ownProperties)),t.if((0,Cg.not)(i),(()=>{e.error(),t.break()}))}),Cg.nil)}(o,n))),e.ok(n)}else t.if((0,kg.checkMissingProp)(e,n,o)),(0,kg.reportMissingProp)(e,o),t.else()}(),a.strictRequired){const t=e.parentSchema.properties,{definedProperties:r}=e.it;for(const e of n)void 0!==(null==t?void 0:t[e])||r.has(e)||(0,Ig.checkStrictMode)(o,`required property "${e}" is not defined at "${o.schemaEnv.baseId+o.errSchemaPath}" (strictRequired)`,o.opts.strictRequired)}function l(){t.forOf("prop",r,(n=>{e.setParams({missingProperty:n}),t.if((0,kg.noPropertyInData)(t,s,n,a.ownProperties),(()=>e.error()))}))}}};xg.default=Rg;var Og={};Object.defineProperty(Og,"__esModule",{value:!0});const Ng=Qh(),Dg={message:({keyword:e,schemaCode:t})=>Ng.str`must NOT have ${"maxItems"===e?"more":"fewer"} than ${t} items`,params:({schemaCode:e})=>Ng._`{limit: ${e}}`},Pg={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:Dg,code(e){const{keyword:t,data:n,schemaCode:r}=e;e.fail$data(Ng._`${n}.length ${"maxItems"===t?Ng.operators.GT:Ng.operators.LT} ${r}`)}};Og.default=Pg;var Lg={},Mg={};Object.defineProperty(Mg,"__esModule",{value:!0});const Bg=Lh;Bg.code='require("ajv/dist/runtime/equal").default',Mg.default=Bg,Object.defineProperty(Lg,"__esModule",{value:!0});const jg=gf,Fg=Qh(),$g=Wh,Ug=Mg,Hg={message:({params:{i:e,j:t}})=>Fg.str`must NOT have duplicate items (items ## ${t} and ${e} are identical)`,params:({params:{i:e,j:t}})=>Fg._`{i: ${e}, j: ${t}}`},Gg={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:Hg,code(e){const{gen:t,data:n,$data:r,schema:s,parentSchema:i,schemaCode:o,it:a}=e;if(!r&&!s)return;const c=t.let("valid"),l=i.items?(0,jg.getSchemaTypes)(i.items):[];function u(r,s){const i=t.name("item"),o=(0,jg.checkDataTypes)(l,i,a.opts.strictNumbers,jg.DataType.Wrong),u=t.const("indices",Fg._`{}`);t.for(Fg._`;${r}--;`,(()=>{t.let(i,Fg._`${n}[${r}]`),t.if(o,Fg._`continue`),l.length>1&&t.if(Fg._`typeof ${i} == "string"`,Fg._`${i} += "_"`),t.if(Fg._`typeof ${u}[${i}] == "number"`,(()=>{t.assign(s,Fg._`${u}[${i}]`),e.error(),t.assign(c,!1).break()})).code(Fg._`${u}[${i}] = ${r}`)}))}function p(r,s){const i=(0,$g.useFunc)(t,Ug.default),o=t.name("outer");t.label(o).for(Fg._`;${r}--;`,(()=>t.for(Fg._`${s} = ${r}; ${s}--;`,(()=>t.if(Fg._`${i}(${n}[${r}], ${n}[${s}])`,(()=>{e.error(),t.assign(c,!1).break(o)}))))))}e.block$data(c,(function(){const r=t.let("i",Fg._`${n}.length`),s=t.let("j");e.setParams({i:r,j:s}),t.assign(c,!0),t.if(Fg._`${r} > 1`,(()=>(l.length>0&&!l.some((e=>"object"===e||"array"===e))?u:p)(r,s)))}),Fg._`${o} === false`),e.ok(c)}};Lg.default=Gg;var qg={};Object.defineProperty(qg,"__esModule",{value:!0});const zg=Qh(),Vg=Wh,Yg=Mg,Kg={keyword:"const",$data:!0,error:{message:"must be equal to constant",params:({schemaCode:e})=>zg._`{allowedValue: ${e}}`},code(e){const{gen:t,data:n,$data:r,schemaCode:s,schema:i}=e;r||i&&"object"==typeof i?e.fail$data(zg._`!${(0,Vg.useFunc)(t,Yg.default)}(${n}, ${s})`):e.fail(zg._`${i} !== ${n}`)}};qg.default=Kg;var Qg={};Object.defineProperty(Qg,"__esModule",{value:!0});const Wg=Qh(),Jg=Wh,Xg=Mg,Zg={keyword:"enum",schemaType:"array",$data:!0,error:{message:"must be equal to one of the allowed values",params:({schemaCode:e})=>Wg._`{allowedValues: ${e}}`},code(e){const{gen:t,data:n,$data:r,schema:s,schemaCode:i,it:o}=e;if(!r&&0===s.length)throw Error("enum must have non-empty array");let a;const c=()=>null!=a?a:a=(0,Jg.useFunc)(t,Xg.default);let l;if(s.length>=o.opts.loopEnum||r)l=t.let("valid"),e.block$data(l,(function(){t.assign(l,!1),t.forOf("v",i,(e=>t.if(Wg._`${c()}(${n}, ${e})`,(()=>t.assign(l,!0).break()))))}));else{if(!Array.isArray(s))throw Error("ajv implementation error");const e=t.const("vSchema",i);l=(0,Wg.or)(...s.map(((t,r)=>function(e,t){const r=s[t];return"object"==typeof r&&null!==r?Wg._`${c()}(${n}, ${e}[${t}])`:Wg._`${n} === ${r}`}(e,r))))}e.pass(l)}};Qg.default=Zg,Object.defineProperty(eg,"__esModule",{value:!0}),eg.default=[tg.default,ag.default,ug.default,vg.default,Ag.default,xg.default,Og.default,Lg.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},qg.default,Qg.default];var ey={},ty={};Object.defineProperty(ty,"__esModule",{value:!0}),ty.validateAdditionalItems=void 0;const ny=Qh(),ry=Wh,sy={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:{message:({params:{len:e}})=>ny.str`must NOT have more than ${e} items`,params:({params:{len:e}})=>ny._`{limit: ${e}}`},code(e){const{parentSchema:t,it:n}=e,{items:r}=t;Array.isArray(r)?iy(e,r):(0,ry.checkStrictMode)(n,'"additionalItems" is ignored when "items" is not an array of schemas')}};function iy(e,t){const{gen:n,schema:r,data:s,keyword:i,it:o}=e;o.items=!0;const a=n.const("len",ny._`${s}.length`);if(!1===r)e.setParams({len:t.length}),e.pass(ny._`${a} <= ${t.length}`);else if("object"==typeof r&&!(0,ry.alwaysValidSchema)(o,r)){const r=n.var("valid",ny._`${a} <= ${t.length}`);n.if((0,ny.not)(r),(()=>function(r){n.forRange("i",t.length,a,(t=>{e.subschema({keyword:i,dataProp:t,dataPropType:ry.Type.Num},r),o.allErrors||n.if((0,ny.not)(r),(()=>n.break()))}))}(r))),e.ok(r)}}ty.validateAdditionalItems=iy,ty.default=sy;var oy={},ay={};Object.defineProperty(ay,"__esModule",{value:!0}),ay.validateTuple=void 0;const cy=Qh(),ly=Wh,uy=Bf,py={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){const{schema:t,it:n}=e;if(Array.isArray(t))return dy(e,"additionalItems",t);n.items=!0,(0,ly.alwaysValidSchema)(n,t)||e.ok((0,uy.validateArray)(e))}};function dy(e,t,n=e.schema){const{gen:r,parentSchema:s,data:i,keyword:o,it:a}=e;!function(e){const{opts:r,errSchemaPath:s}=a,i=n.length;r.strictTuples&&(i!==e.minItems||i!==e.maxItems&&!1!==e[t])&&(0,ly.checkStrictMode)(a,`"${o}" is ${i}-tuple, but minItems or maxItems/${t} are not specified or different at path "${s}"`,r.strictTuples)}(s),a.opts.unevaluated&&n.length&&!0!==a.items&&(a.items=ly.mergeEvaluated.items(r,n.length,a.items));const c=r.name("valid"),l=r.const("len",cy._`${i}.length`);n.forEach(((t,n)=>{(0,ly.alwaysValidSchema)(a,t)||(r.if(cy._`${l} > ${n}`,(()=>e.subschema({keyword:o,schemaProp:n,dataProp:n},c))),e.ok(c))}))}ay.validateTuple=dy,ay.default=py,Object.defineProperty(oy,"__esModule",{value:!0});const hy=ay;oy.default={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:e=>(0,hy.validateTuple)(e,"items")};var fy={};Object.defineProperty(fy,"__esModule",{value:!0});const my=Qh(),gy=Wh,yy=Bf,vy=ty,by={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:{message:({params:{len:e}})=>my.str`must NOT have more than ${e} items`,params:({params:{len:e}})=>my._`{limit: ${e}}`},code(e){const{schema:t,parentSchema:n,it:r}=e,{prefixItems:s}=n;r.items=!0,(0,gy.alwaysValidSchema)(r,t)||(s?(0,vy.validateAdditionalItems)(e,s):e.ok((0,yy.validateArray)(e)))}};fy.default=by;var Ey={};Object.defineProperty(Ey,"__esModule",{value:!0});const _y=Qh(),Ay=Wh,Sy={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:{message:({params:{min:e,max:t}})=>void 0===t?_y.str`must contain at least ${e} valid item(s)`:_y.str`must contain at least ${e} and no more than ${t} valid item(s)`,params:({params:{min:e,max:t}})=>void 0===t?_y._`{minContains: ${e}}`:_y._`{minContains: ${e}, maxContains: ${t}}`},code(e){const{gen:t,schema:n,parentSchema:r,data:s,it:i}=e;let o,a;const{minContains:c,maxContains:l}=r;i.opts.next?(o=void 0===c?1:c,a=l):o=1;const u=t.const("len",_y._`${s}.length`);if(e.setParams({min:o,max:a}),void 0===a&&0===o)return void(0,Ay.checkStrictMode)(i,'"minContains" == 0 without "maxContains": "contains" keyword ignored');if(void 0!==a&&o>a)return(0,Ay.checkStrictMode)(i,'"minContains" > "maxContains" is always invalid'),void e.fail();if((0,Ay.alwaysValidSchema)(i,n)){let t=_y._`${u} >= ${o}`;return void 0!==a&&(t=_y._`${t} && ${u} <= ${a}`),void e.pass(t)}i.items=!0;const p=t.name("valid");function d(){const e=t.name("_valid"),n=t.let("count",0);h(e,(()=>t.if(e,(()=>function(e){t.code(_y._`${e}++`),void 0===a?t.if(_y._`${e} >= ${o}`,(()=>t.assign(p,!0).break())):(t.if(_y._`${e} > ${a}`,(()=>t.assign(p,!1).break())),1===o?t.assign(p,!0):t.if(_y._`${e} >= ${o}`,(()=>t.assign(p,!0))))}(n)))))}function h(n,r){t.forRange("i",0,u,(t=>{e.subschema({keyword:"contains",dataProp:t,dataPropType:Ay.Type.Num,compositeRule:!0},n),r()}))}void 0===a&&1===o?h(p,(()=>t.if(p,(()=>t.break())))):0===o?(t.let(p,!0),void 0!==a&&t.if(_y._`${s}.length > 0`,d)):(t.let(p,!1),d()),e.result(p,(()=>e.reset()))}};Ey.default=Sy;var Ty={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;const t=Qh(),n=Wh,r=Bf;e.error={message:({params:{property:e,depsCount:n,deps:r}})=>t.str`must have ${1===n?"property":"properties"} ${r} when property ${e} is present`,params:({params:{property:e,depsCount:n,deps:r,missingProperty:s}})=>t._`{property: ${e},
    missingProperty: ${s},
    depsCount: ${n},
    deps: ${r}}`};const s={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(e){const[t,n]=function({schema:e}){const t={},n={};for(const r in e)"__proto__"!==r&&((Array.isArray(e[r])?t:n)[r]=e[r]);return[t,n]}(e);i(e,t),o(e,n)}};function i(e,n=e.schema){const{gen:s,data:i,it:o}=e;if(0===Object.keys(n).length)return;const a=s.let("missing");for(const c in n){const l=n[c];if(0===l.length)continue;const u=(0,r.propertyInData)(s,i,c,o.opts.ownProperties);e.setParams({property:c,depsCount:l.length,deps:l.join(", ")}),o.allErrors?s.if(u,(()=>{for(const t of l)(0,r.checkReportMissingProp)(e,t)})):(s.if(t._`${u} && (${(0,r.checkMissingProp)(e,l,a)})`),(0,r.reportMissingProp)(e,a),s.else())}}function o(e,t=e.schema){const{gen:s,data:i,keyword:o,it:a}=e,c=s.name("valid");for(const l in t)(0,n.alwaysValidSchema)(a,t[l])||(s.if((0,r.propertyInData)(s,i,l,a.opts.ownProperties),(()=>{const t=e.subschema({keyword:o,schemaProp:l},c);e.mergeValidEvaluated(t,c)}),(()=>s.var(c,!0))),e.ok(c))}e.validatePropertyDeps=i,e.validateSchemaDeps=o,e.default=s}(Ty);var wy={};Object.defineProperty(wy,"__esModule",{value:!0});const xy=Qh(),ky=Wh,Cy={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:{message:"property name must be valid",params:({params:e})=>xy._`{propertyName: ${e.propertyName}}`},code(e){const{gen:t,schema:n,data:r,it:s}=e;if((0,ky.alwaysValidSchema)(s,n))return;const i=t.name("valid");t.forIn("key",r,(n=>{e.setParams({propertyName:n}),e.subschema({keyword:"propertyNames",data:n,dataTypes:["string"],propertyName:n,compositeRule:!0},i),t.if((0,xy.not)(i),(()=>{e.error(!0),s.allErrors||t.break()}))})),e.ok(i)}};wy.default=Cy;var Iy={};Object.defineProperty(Iy,"__esModule",{value:!0});const Ry=Bf,Oy=Qh(),Ny=uf,Dy=Wh,Py={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:{message:"must NOT have additional properties",params:({params:e})=>Oy._`{additionalProperty: ${e.additionalProperty}}`},code(e){const{gen:t,schema:n,parentSchema:r,data:s,errsCount:i,it:o}=e;if(!i)throw Error("ajv implementation error");const{allErrors:a,opts:c}=o;if(o.props=!0,"all"!==c.removeAdditional&&(0,Dy.alwaysValidSchema)(o,n))return;const l=(0,Ry.allSchemaProperties)(r.properties),u=(0,Ry.allSchemaProperties)(r.patternProperties);function p(e){t.code(Oy._`delete ${s}[${e}]`)}function d(r){if("all"===c.removeAdditional||c.removeAdditional&&!1===n)p(r);else{if(!1===n)return e.setParams({additionalProperty:r}),e.error(),void(a||t.break());if("object"==typeof n&&!(0,Dy.alwaysValidSchema)(o,n)){const n=t.name("valid");"failing"===c.removeAdditional?(h(r,n,!1),t.if((0,Oy.not)(n),(()=>{e.reset(),p(r)}))):(h(r,n),a||t.if((0,Oy.not)(n),(()=>t.break())))}}}function h(t,n,r){const s={keyword:"additionalProperties",dataProp:t,dataPropType:Dy.Type.Str};!1===r&&Object.assign(s,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(s,n)}t.forIn("key",s,(n=>{l.length||u.length?t.if(function(n){let s;if(l.length>8){const e=(0,Dy.schemaRefOrVal)(o,r.properties,"properties");s=(0,Ry.isOwnProperty)(t,e,n)}else s=l.length?(0,Oy.or)(...l.map((e=>Oy._`${n} === ${e}`))):Oy.nil;return u.length&&(s=(0,Oy.or)(s,...u.map((t=>Oy._`${(0,Ry.usePattern)(e,t)}.test(${n})`)))),(0,Oy.not)(s)}(n),(()=>d(n))):d(n)})),e.ok(Oy._`${i} === ${Ny.default.errors}`)}};Iy.default=Py;var Ly={};Object.defineProperty(Ly,"__esModule",{value:!0});const My=fm(),By=Bf,jy=Wh,Fy=Iy,$y={keyword:"properties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,parentSchema:r,data:s,it:i}=e;"all"===i.opts.removeAdditional&&void 0===r.additionalProperties&&Fy.default.code(new My.KeywordCxt(i,Fy.default,"additionalProperties"));const o=(0,By.allSchemaProperties)(n);for(const e of o)i.definedProperties.add(e);i.opts.unevaluated&&o.length&&!0!==i.props&&(i.props=jy.mergeEvaluated.props(t,(0,jy.toHash)(o),i.props));const a=o.filter((e=>!(0,jy.alwaysValidSchema)(i,n[e])));if(0===a.length)return;const c=t.name("valid");for(const n of a)l(n)?u(n):(t.if((0,By.propertyInData)(t,s,n,i.opts.ownProperties)),u(n),i.allErrors||t.else().var(c,!0),t.endIf()),e.it.definedProperties.add(n),e.ok(c);function l(e){return i.opts.useDefaults&&!i.compositeRule&&void 0!==n[e].default}function u(t){e.subschema({keyword:"properties",schemaProp:t,dataProp:t},c)}}};Ly.default=$y;var Uy={};Object.defineProperty(Uy,"__esModule",{value:!0});const Hy=Bf,Gy=Qh(),qy=Wh,zy=Wh,Vy={keyword:"patternProperties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,data:r,parentSchema:s,it:i}=e,{opts:o}=i,a=(0,Hy.allSchemaProperties)(n),c=a.filter((e=>(0,qy.alwaysValidSchema)(i,n[e])));if(0===a.length||c.length===a.length&&(!i.opts.unevaluated||!0===i.props))return;const l=o.strictSchema&&!o.allowMatchingProperties&&s.properties,u=t.name("valid");!0===i.props||i.props instanceof Gy.Name||(i.props=(0,zy.evaluatedPropsToName)(t,i.props));const{props:p}=i;function d(e){for(const t in l)RegExp(e).test(t)&&(0,qy.checkStrictMode)(i,`property ${t} matches pattern ${e} (use allowMatchingProperties)`)}function h(n){t.forIn("key",r,(r=>{t.if(Gy._`${(0,Hy.usePattern)(e,n)}.test(${r})`,(()=>{const s=c.includes(n);s||e.subschema({keyword:"patternProperties",schemaProp:n,dataProp:r,dataPropType:zy.Type.Str},u),i.opts.unevaluated&&!0!==p?t.assign(Gy._`${p}[${r}]`,!0):s||i.allErrors||t.if((0,Gy.not)(u),(()=>t.break()))}))}))}!function(){for(const e of a)l&&d(e),i.allErrors?h(e):(t.var(u,!0),h(e),t.if(u))}()}};Uy.default=Vy;var Yy={};Object.defineProperty(Yy,"__esModule",{value:!0});const Ky=Wh,Qy={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){const{gen:t,schema:n,it:r}=e;if((0,Ky.alwaysValidSchema)(r,n))return void e.fail();const s=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},s),e.failResult(s,(()=>e.reset()),(()=>e.error()))},error:{message:"must NOT be valid"}};Yy.default=Qy;var Wy={};Object.defineProperty(Wy,"__esModule",{value:!0}),Wy.default={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:Bf.validateUnion,error:{message:"must match a schema in anyOf"}};var Jy={};Object.defineProperty(Jy,"__esModule",{value:!0});const Xy=Qh(),Zy=Wh,ev={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:{message:"must match exactly one schema in oneOf",params:({params:e})=>Xy._`{passingSchemas: ${e.passing}}`},code(e){const{gen:t,schema:n,parentSchema:r,it:s}=e;if(!Array.isArray(n))throw Error("ajv implementation error");if(s.opts.discriminator&&r.discriminator)return;const i=n,o=t.let("valid",!1),a=t.let("passing",null),c=t.name("_valid");e.setParams({passing:a}),t.block((function(){i.forEach(((n,r)=>{let i;(0,Zy.alwaysValidSchema)(s,n)?t.var(c,!0):i=e.subschema({keyword:"oneOf",schemaProp:r,compositeRule:!0},c),r>0&&t.if(Xy._`${c} && ${o}`).assign(o,!1).assign(a,Xy._`[${a}, ${r}]`).else(),t.if(c,(()=>{t.assign(o,!0),t.assign(a,r),i&&e.mergeEvaluated(i,Xy.Name)}))}))})),e.result(o,(()=>e.reset()),(()=>e.error(!0)))}};Jy.default=ev;var tv={};Object.defineProperty(tv,"__esModule",{value:!0});const nv=Wh,rv={keyword:"allOf",schemaType:"array",code(e){const{gen:t,schema:n,it:r}=e;if(!Array.isArray(n))throw Error("ajv implementation error");const s=t.name("valid");n.forEach(((t,n)=>{if((0,nv.alwaysValidSchema)(r,t))return;const i=e.subschema({keyword:"allOf",schemaProp:n},s);e.ok(s),e.mergeEvaluated(i)}))}};tv.default=rv;var sv={};Object.defineProperty(sv,"__esModule",{value:!0});const iv=Qh(),ov=Wh,av={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:{message:({params:e})=>iv.str`must match "${e.ifClause}" schema`,params:({params:e})=>iv._`{failingKeyword: ${e.ifClause}}`},code(e){const{gen:t,parentSchema:n,it:r}=e;void 0===n.then&&void 0===n.else&&(0,ov.checkStrictMode)(r,'"if" without "then" and "else" is ignored');const s=cv(r,"then"),i=cv(r,"else");if(!s&&!i)return;const o=t.let("valid",!0),a=t.name("_valid");if(function(){const t=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},a);e.mergeEvaluated(t)}(),e.reset(),s&&i){const n=t.let("ifClause");e.setParams({ifClause:n}),t.if(a,c("then",n),c("else",n))}else s?t.if(a,c("then")):t.if((0,iv.not)(a),c("else"));function c(n,r){return()=>{const s=e.subschema({keyword:n},a);t.assign(o,a),e.mergeValidEvaluated(s,o),r?t.assign(r,iv._`${n}`):e.setParams({ifClause:n})}}e.pass(o,(()=>e.error(!0)))}};function cv(e,t){const n=e.schema[t];return void 0!==n&&!(0,ov.alwaysValidSchema)(e,n)}sv.default=av;var lv={};Object.defineProperty(lv,"__esModule",{value:!0});const uv=Wh,pv={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:e,parentSchema:t,it:n}){void 0===t.if&&(0,uv.checkStrictMode)(n,`"${e}" without "if" is ignored`)}};lv.default=pv,Object.defineProperty(ey,"__esModule",{value:!0});const dv=ty,hv=oy,fv=ay,mv=fy,gv=Ey,yv=Ty,vv=wy,bv=Iy,Ev=Ly,_v=Uy,Av=Yy,Sv=Wy,Tv=Jy,wv=tv,xv=sv,kv=lv;ey.default=function(e=!1){const t=[Av.default,Sv.default,Tv.default,wv.default,xv.default,kv.default,vv.default,bv.default,yv.default,Ev.default,_v.default];return e?t.push(hv.default,mv.default):t.push(dv.default,fv.default),t.push(gv.default),t};var Cv={},Iv={};Object.defineProperty(Iv,"__esModule",{value:!0});const Rv=Qh(),Ov={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:{message:({schemaCode:e})=>Rv.str`must match format "${e}"`,params:({schemaCode:e})=>Rv._`{format: ${e}}`},code(e,t){const{gen:n,data:r,$data:s,schema:i,schemaCode:o,it:a}=e,{opts:c,errSchemaPath:l,schemaEnv:u,self:p}=a;c.validateFormats&&(s?function(){const s=n.scopeValue("formats",{ref:p.formats,code:c.code.formats}),i=n.const("fDef",Rv._`${s}[${o}]`),a=n.let("fType"),l=n.let("format");n.if(Rv._`typeof ${i} == "object" && !(${i} instanceof RegExp)`,(()=>n.assign(a,Rv._`${i}.type || "string"`).assign(l,Rv._`${i}.validate`)),(()=>n.assign(a,Rv._`"string"`).assign(l,i))),e.fail$data((0,Rv.or)(!1===c.strictSchema?Rv.nil:Rv._`${o} && !${l}`,function(){const e=u.$async?Rv._`(${i}.async ? await ${l}(${r}) : ${l}(${r}))`:Rv._`${l}(${r})`,n=Rv._`(typeof ${l} == "function" ? ${e} : ${l}.test(${r}))`;return Rv._`${l} && ${l} !== true && ${a} === ${t} && !${n}`}()))}():function(){const s=p.formats[i];if(!s)return void function(){if(!1!==c.strictSchema)throw Error(e());function e(){return`unknown format "${i}" ignored in schema at path "${l}"`}p.logger.warn(e())}();if(!0===s)return;const[o,a,d]=function(e){const t=e instanceof RegExp?(0,Rv.regexpCode)(e):c.code.formats?Rv._`${c.code.formats}${(0,Rv.getProperty)(i)}`:void 0,r=n.scopeValue("formats",{key:i,ref:e,code:t});return"object"!=typeof e||e instanceof RegExp?["string",e,r]:[e.type||"string",e.validate,Rv._`${r}.validate`]}(s);o===t&&e.pass(function(){if("object"==typeof s&&!(s instanceof RegExp)&&s.async){if(!u.$async)throw Error("async format in sync schema");return Rv._`await ${d}(${r})`}return"function"==typeof a?Rv._`${d}(${r})`:Rv._`${d}.test(${r})`}())}())}};Iv.default=Ov,Object.defineProperty(Cv,"__esModule",{value:!0}),Cv.default=[Iv.default];var Nv={};Object.defineProperty(Nv,"__esModule",{value:!0}),Nv.contentVocabulary=Nv.metadataVocabulary=void 0,Nv.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"],Nv.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"],Object.defineProperty(Um,"__esModule",{value:!0});const Dv=Cv,Pv=Nv,Lv=[Hm.default,eg.default,(0,ey.default)(),Dv.default,Pv.metadataVocabulary,Pv.contentVocabulary];Um.default=Lv;var Mv,Bv={},jv={};Object.defineProperty(jv,"__esModule",{value:!0}),jv.DiscrError=void 0,function(e){e.Tag="tag",e.Mapping="mapping"}(Mv||(jv.DiscrError=Mv={})),Object.defineProperty(Bv,"__esModule",{value:!0});const Fv=Qh(),$v=jv,Uv=_m,Hv=Em(),Gv=Wh,qv={keyword:"discriminator",type:"object",schemaType:"object",error:{message:({params:{discrError:e,tagName:t}})=>e===$v.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in oneOf`,params:({params:{discrError:e,tag:t,tagName:n}})=>Fv._`{error: ${e}, tag: ${n}, tagValue: ${t}}`},code(e){const{gen:t,data:n,schema:r,parentSchema:s,it:i}=e,{oneOf:o}=s;if(!i.opts.discriminator)throw Error("discriminator: requires discriminator option");const a=r.propertyName;if("string"!=typeof a)throw Error("discriminator: requires propertyName");if(r.mapping)throw Error("discriminator: mapping is not supported");if(!o)throw Error("discriminator: requires oneOf keyword");const c=t.let("valid",!1),l=t.const("tag",Fv._`${n}${(0,Fv.getProperty)(a)}`);function u(n){const r=t.name("valid"),s=e.subschema({keyword:"oneOf",schemaProp:n},r);return e.mergeEvaluated(s,Fv.Name),r}t.if(Fv._`typeof ${l} == "string"`,(()=>function(){const n=function(){var e;const t={},n=c(s);let r=!0;for(let t=0;o.length>t;t++){let s=o[t];if((null==s?void 0:s.$ref)&&!(0,Gv.schemaHasRulesButRef)(s,i.self.RULES)){const e=s.$ref;if(s=Uv.resolveRef.call(i.self,i.schemaEnv.root,i.baseId,e),s instanceof Uv.SchemaEnv&&(s=s.schema),void 0===s)throw new Hv.default(i.opts.uriResolver,i.baseId,e)}const u=null===(e=null==s?void 0:s.properties)||void 0===e?void 0:e[a];if("object"!=typeof u)throw Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${a}"`);r=r&&(n||c(s)),l(u,t)}if(!r)throw Error(`discriminator: "${a}" must be required`);return t;function c({required:e}){return Array.isArray(e)&&e.includes(a)}function l(e,t){if(e.const)u(e.const,t);else{if(!e.enum)throw Error(`discriminator: "properties/${a}" must have "const" or "enum"`);for(const n of e.enum)u(n,t)}}function u(e,n){if("string"!=typeof e||e in t)throw Error(`discriminator: "${a}" values must be unique strings`);t[e]=n}}();t.if(!1);for(const e in n)t.elseIf(Fv._`${l} === ${e}`),t.assign(c,u(n[e]));t.else(),e.error(!1,{discrError:$v.DiscrError.Mapping,tag:l,tagName:a}),t.endIf()}()),(()=>e.error(!1,{discrError:$v.DiscrError.Tag,tag:l,tagName:a}))),e.ok(c)}};Bv.default=qv;var zv={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0};!function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=t.Ajv=void 0;const n=Uh,r=Um,s=Bv,i=zv,o=["/properties"],a="http://json-schema.org/draft-07/schema";class c extends n.default{_addVocabularies(){super._addVocabularies(),r.default.forEach((e=>this.addVocabulary(e))),this.opts.discriminator&&this.addKeyword(s.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const e=this.opts.$data?this.$dataMetaSchema(i,o):i;this.addMetaSchema(e,a,!1),this.refs["http://json-schema.org/schema"]=a}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(a)?a:void 0)}}t.Ajv=c,e.exports=t=c,e.exports.Ajv=c,Object.defineProperty(t,"__esModule",{value:!0}),t.default=c;var l=fm();Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return l.KeywordCxt}});var u=Qh();Object.defineProperty(t,"_",{enumerable:!0,get:function(){return u._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return u.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return u.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return u.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return u.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return u.CodeGen}});var p=ym();Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return p.default}});var d=Em();Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return d.default}})}($h,$h.exports);var Vv=$h.exports,Yv={exports:{}};const{HEX:Kv}={HEX:{0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15}};function Qv(e){if(3>Zv(e,"."))return{host:e,isIPV4:!1};const t=e.match(/^(\b[01]?\d{1,2}|\b2[0-4]\d|\b25[0-5])(\.([01]?\d{1,2}|2[0-4]\d|25[0-5])){3}$/u)||[],[n]=t;return n?{host:Xv(n,"."),isIPV4:!0}:{host:e,isIPV4:!1}}function Wv(e){let t="",n=!0;for(const r of e){if("0"!==r&&!0===n&&(n=!1),void 0===Kv[r])return;n||(t+=r)}return t}function Jv(e,t={}){if(2>Zv(e,":"))return{host:e,isIPV6:!1};const n=function(e){let t=0;const n={error:!1,address:"",zone:""},r=[],s=[];let i=!1,o=!1,a=!1;function c(){if(s.length){if(!1===i){const e=Wv(s.join(""));if(void 0===e)return n.error=!0,!1;r.push(e)}s.length=0}return!0}for(let l=0;e.length>l;l++){const u=e[l];if("["!==u&&"]"!==u)if(":"!==u)if("%"===u){if(!c())break;i=!0}else s.push(u);else{if(!0===o&&(a=!0),!c())break;if(t++,r.push(":"),t>7){n.error=!0;break}0>l-1||":"!==e[l-1]||(o=!0)}}return s.length&&(i?n.zone=s.join(""):r.push(a?s.join(""):Wv(s.join("")))),n.address=r.join(""),n}(e);if(n.error)return{host:e,isIPV6:!1};{let e=n.address,t=n.address;return n.zone&&(e+="%"+n.zone,t+="%25"+n.zone),{host:e,escapedHost:t,isIPV6:!0}}}function Xv(e,t){let n="",r=!0;const s=e.length;for(let i=0;s>i;i++){const o=e[i];"0"===o&&r?(s>=i+1&&e[i+1]===t||i+1===s)&&(n+=o,r=!1):(r=o===t,n+=o)}return n}function Zv(e,t){let n=0;for(let r=0;e.length>r;r++)e[r]===t&&n++;return n}const eb=/^\.\.?\//u,tb=/^\/\.(?:\/|$)/u,nb=/^\/\.\.(?:\/|$)/u,rb=/^\/?(?:.|\n)*?(?=\/|$)/u;var sb={recomposeAuthority:function(e,t){const n=[];if(void 0!==e.userinfo&&(n.push(e.userinfo),n.push("@")),void 0!==e.host){let t=unescape(e.host);const r=Qv(t);if(r.isIPV4)t=r.host;else{const n=Jv(r.host,{isIPV4:!1});t=!0===n.isIPV6?`[${n.escapedHost}]`:e.host}n.push(t)}return"number"!=typeof e.port&&"string"!=typeof e.port||(n.push(":"),n.push(e.port+"")),n.length?n.join(""):void 0},normalizeComponentEncoding:function(e,t){const n=!0!==t?escape:unescape;return void 0!==e.scheme&&(e.scheme=n(e.scheme)),void 0!==e.userinfo&&(e.userinfo=n(e.userinfo)),void 0!==e.host&&(e.host=n(e.host)),void 0!==e.path&&(e.path=n(e.path)),void 0!==e.query&&(e.query=n(e.query)),void 0!==e.fragment&&(e.fragment=n(e.fragment)),e},removeDotSegments:function(e){const t=[];for(;e.length;)if(e.match(eb))e=e.replace(eb,"");else if(e.match(tb))e=e.replace(tb,"/");else if(e.match(nb))e=e.replace(nb,"/"),t.pop();else if("."===e||".."===e)e="";else{const n=e.match(rb);if(!n)throw Error("Unexpected dot segment condition");{const r=n[0];e=e.slice(r.length),t.push(r)}}return t.join("")},normalizeIPv4:Qv,normalizeIPv6:Jv,stringToHexStripped:Wv};const ib=/^[\da-f]{8}\b-[\da-f]{4}\b-[\da-f]{4}\b-[\da-f]{4}\b-[\da-f]{12}$/iu,ob=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu;function ab(e){return"boolean"==typeof e.secure?e.secure:"wss"===(e.scheme+"").toLowerCase()}function cb(e){return e.host||(e.error=e.error||"HTTP URIs must have a host."),e}function lb(e){return e.port!==("https"===(e.scheme+"").toLowerCase()?443:80)&&""!==e.port||(e.port=void 0),e.path||(e.path="/"),e}const ub={scheme:"http",domainHost:!0,parse:cb,serialize:lb},pb={scheme:"ws",domainHost:!0,parse:function(e){return e.secure=ab(e),e.resourceName=(e.path||"/")+(e.query?"?"+e.query:""),e.path=void 0,e.query=void 0,e},serialize:function(e){if(e.port!==(ab(e)?443:80)&&""!==e.port||(e.port=void 0),"boolean"==typeof e.secure&&(e.scheme=e.secure?"wss":"ws",e.secure=void 0),e.resourceName){const[t,n]=e.resourceName.split("?");e.path=t&&"/"!==t?t:void 0,e.query=n,e.resourceName=void 0}return e.fragment=void 0,e}},db={http:ub,https:{scheme:"https",domainHost:ub.domainHost,parse:cb,serialize:lb},ws:pb,wss:{scheme:"wss",domainHost:pb.domainHost,parse:pb.parse,serialize:pb.serialize},urn:{scheme:"urn",parse:function(e,t){if(!e.path)return e.error="URN can not be parsed",e;const n=e.path.match(ob);if(n){const r=t.scheme||e.scheme||"urn";e.nid=n[1].toLowerCase(),e.nss=n[2];const s=db[`${r}:${t.nid||e.nid}`];e.path=void 0,s&&(e=s.parse(e,t))}else e.error=e.error||"URN can not be parsed.";return e},serialize:function(e,t){const n=t.scheme||e.scheme||"urn",r=e.nid.toLowerCase(),s=db[`${n}:${t.nid||r}`];s&&(e=s.serialize(e,t));const i=e;return i.path=`${r||t.nid}:${e.nss}`,t.skipEscape=!0,i},skipNormalize:!0},"urn:uuid":{scheme:"urn:uuid",parse:function(e,t){const n=e;return n.uuid=n.nss,n.nss=void 0,t.tolerant||n.uuid&&ib.test(n.uuid)||(n.error=n.error||"UUID is not valid."),n},serialize:function(e){const t=e;return t.nss=(e.uuid||"").toLowerCase(),t},skipNormalize:!0}};var hb=db;const{normalizeIPv6:fb,normalizeIPv4:mb,removeDotSegments:gb,recomposeAuthority:yb,normalizeComponentEncoding:vb}=sb,bb=hb;function Eb(e,t,n,r){const s={};return r||(e=Tb(_b(e,n),n),t=Tb(_b(t,n),n)),!(n=n||{}).tolerant&&t.scheme?(s.scheme=t.scheme,s.userinfo=t.userinfo,s.host=t.host,s.port=t.port,s.path=gb(t.path||""),s.query=t.query):(void 0!==t.userinfo||void 0!==t.host||void 0!==t.port?(s.userinfo=t.userinfo,s.host=t.host,s.port=t.port,s.path=gb(t.path||""),s.query=t.query):(t.path?("/"===t.path.charAt(0)?s.path=gb(t.path):(s.path=void 0===e.userinfo&&void 0===e.host&&void 0===e.port||e.path?e.path?e.path.slice(0,e.path.lastIndexOf("/")+1)+t.path:t.path:"/"+t.path,s.path=gb(s.path)),s.query=t.query):(s.path=e.path,s.query=void 0!==t.query?t.query:e.query),s.userinfo=e.userinfo,s.host=e.host,s.port=e.port),s.scheme=e.scheme),s.fragment=t.fragment,s}function _b(e,t){const n={host:e.host,scheme:e.scheme,userinfo:e.userinfo,port:e.port,path:e.path,query:e.query,nid:e.nid,nss:e.nss,uuid:e.uuid,fragment:e.fragment,reference:e.reference,resourceName:e.resourceName,secure:e.secure,error:""},r=Object.assign({},t),s=[],i=bb[(r.scheme||n.scheme||"").toLowerCase()];i&&i.serialize&&i.serialize(n,r),void 0!==n.path&&(r.skipEscape?n.path=unescape(n.path):(n.path=escape(n.path),void 0!==n.scheme&&(n.path=n.path.split("%3A").join(":")))),"suffix"!==r.reference&&n.scheme&&(s.push(n.scheme),s.push(":"));const o=yb(n,r);if(void 0!==o&&("suffix"!==r.reference&&s.push("//"),s.push(o),n.path&&"/"!==n.path.charAt(0)&&s.push("/")),void 0!==n.path){let e=n.path;r.absolutePath||i&&i.absolutePath||(e=gb(e)),void 0===o&&(e=e.replace(/^\/\//u,"/%2F")),s.push(e)}return void 0!==n.query&&(s.push("?"),s.push(n.query)),void 0!==n.fragment&&(s.push("#"),s.push(n.fragment)),s.join("")}const Ab=Array.from({length:127},((e,t)=>/[^!"$&'()*+,\-.;=_`a-z{}~]/u.test(String.fromCharCode(t)))),Sb=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function Tb(e,t){const n=Object.assign({},t),r={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0},s=-1!==e.indexOf("%");"suffix"===n.reference&&(e=(n.scheme?n.scheme+":":"")+"//"+e);const i=e.match(Sb);if(i){if(r.scheme=i[1],r.userinfo=i[3],r.host=i[4],r.port=parseInt(i[5],10),r.path=i[6]||"",r.query=i[7],r.fragment=i[8],isNaN(r.port)&&(r.port=i[5]),r.host){const e=mb(r.host);r.host=!1===e.isIPV4?fb(e.host,{isIPV4:!1}).host.toLowerCase():e.host}r.reference=void 0!==r.scheme||void 0!==r.userinfo||void 0!==r.host||void 0!==r.port||r.path||void 0!==r.query?void 0===r.scheme?"relative":void 0===r.fragment?"absolute":"uri":"same-document",n.reference&&"suffix"!==n.reference&&n.reference!==r.reference&&(r.error=r.error||"URI is not a "+n.reference+" reference.");const e=bb[(n.scheme||r.scheme||"").toLowerCase()];if(!(n.unicodeSupport||e&&e.unicodeSupport)&&r.host&&(n.domainHost||e&&e.domainHost)&&function(e){let t=0;for(let n=0,r=e.length;r>n;++n)if(t=e.charCodeAt(n),t>126||Ab[t])return!0;return!1}(r.host))try{r.host=URL.domainToASCII(r.host.toLowerCase())}catch(e){r.error=r.error||"Host's domain name can not be converted to ASCII: "+e}(!e||e&&!e.skipNormalize)&&(s&&void 0!==r.scheme&&(r.scheme=unescape(r.scheme)),s&&void 0!==r.userinfo&&(r.userinfo=unescape(r.userinfo)),s&&void 0!==r.host&&(r.host=unescape(r.host)),void 0!==r.path&&r.path.length&&(r.path=escape(unescape(r.path))),void 0!==r.fragment&&r.fragment.length&&(r.fragment=encodeURI(decodeURI(r.fragment)))),e&&e.parse&&e.parse(r,n)}else r.error=r.error||"URI can not be parsed.";return r}const wb={normalize:function(e,t){return"string"==typeof e?e=_b(Tb(e,t),t):"object"==typeof e&&(e=Tb(_b(e,t),t)),e},resolve:function(e,t,n){const r=Object.assign({scheme:"null"},n);return _b(Eb(Tb(e,r),Tb(t,r),r,!0),{...r,skipEscape:!0})},resolveComponents:Eb,equal:function(e,t,n){return"string"==typeof e?e=_b(vb(Tb(e=unescape(e),n),!0),{...n,skipEscape:!0}):"object"==typeof e&&(e=_b(vb(e,!0),{...n,skipEscape:!0})),"string"==typeof t?t=_b(vb(Tb(t=unescape(t),n),!0),{...n,skipEscape:!0}):"object"==typeof t&&(t=_b(vb(t,!0),{...n,skipEscape:!0})),e.toLowerCase()===t.toLowerCase()},serialize:_b,parse:Tb};Yv.exports=wb,Yv.exports.default=wb,Yv.exports.fastUri=wb;var xb=Yv.exports,kb={exports:{}},Cb={};!function(e){function t(e,t){return{validate:e,compare:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.formatNames=e.fastFormats=e.fullFormats=void 0,e.fullFormats={date:t(s,i),time:t(a(!0),c),"date-time":t(p(!0),d),"iso-time":t(a(),l),"iso-date-time":t(p(),h),duration:/^P(?!$)((\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?|(\d+W)?)$/,uri:function(e){return f.test(e)&&m.test(e)},"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,url:/^(?:https?|ftp):\/\/(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)(?:\.(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)$/,ipv6:/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,regex:function(e){if(E.test(e))return!1;try{return RegExp(e),!0}catch(e){return!1}},uuid:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,"json-pointer":/^(?:\/(?:[^~/]|~0|~1)*)*$/,"json-pointer-uri-fragment":/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,byte:function(e){return g.lastIndex=0,g.test(e)},int32:{type:"number",validate:function(e){return Number.isInteger(e)&&v>=e&&e>=y}},int64:{type:"number",validate:function(e){return Number.isInteger(e)}},float:{type:"number",validate:b},double:{type:"number",validate:b},password:!0,binary:!0},e.fastFormats={...e.fullFormats,date:t(/^\d\d\d\d-[0-1]\d-[0-3]\d$/,i),time:t(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,c),"date-time":t(/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,d),"iso-time":t(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,l),"iso-date-time":t(/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,h),uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i},e.formatNames=Object.keys(e.fullFormats);const n=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,r=[0,31,28,31,30,31,30,31,31,30,31,30,31];function s(e){const t=n.exec(e);if(!t)return!1;const s=+t[2],i=+t[3];return!(1>s||s>12||1>i||i>(2!==s||(o=+t[1],o%4!=0||o%100==0&&o%400!=0)?r[s]:29));var o}function i(e,t){if(e&&t)return e>t?1:t>e?-1:0}const o=/^(\d\d):(\d\d):(\d\d(?:\.\d+)?)(z|([+-])(\d\d)(?::?(\d\d))?)?$/i;function a(e){return function(t){const n=o.exec(t);if(!n)return!1;const r=+n[1],s=+n[2],i=+n[3],a="-"===n[5]?-1:1,c=+(n[6]||0),l=+(n[7]||0);if(c>23||l>59||e&&!n[4])return!1;if(23>=r&&59>=s&&60>i)return!0;const u=s-l*a,p=r-c*a-(0>u?1:0);return(23===p||-1===p)&&(59===u||-1===u)&&61>i}}function c(e,t){if(!e||!t)return;const n=new Date("2020-01-01T"+e).valueOf(),r=new Date("2020-01-01T"+t).valueOf();return n&&r?n-r:void 0}function l(e,t){if(!e||!t)return;const n=o.exec(e),r=o.exec(t);return n&&r?(e=n[1]+n[2]+n[3])>(t=r[1]+r[2]+r[3])?1:t>e?-1:0:void 0}const u=/t|\s/i;function p(e){const t=a(e);return function(e){const n=e.split(u);return 2===n.length&&s(n[0])&&t(n[1])}}function d(e,t){if(!e||!t)return;const n=new Date(e).valueOf(),r=new Date(t).valueOf();return n&&r?n-r:void 0}function h(e,t){if(!e||!t)return;const[n,r]=e.split(u),[s,o]=t.split(u),a=i(n,s);return void 0!==a?a||c(r,o):void 0}const f=/\/|:/,m=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,g=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/gm,y=-(2**31),v=2**31-1;function b(){return!0}const E=/[^\\]\\Z/}(Cb);var Ib={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.formatLimitDefinition=void 0;const t=Vv,n=Qh(),r=n.operators,s={formatMaximum:{okStr:"<=",ok:r.LTE,fail:r.GT},formatMinimum:{okStr:">=",ok:r.GTE,fail:r.LT},formatExclusiveMaximum:{okStr:"<",ok:r.LT,fail:r.GTE},formatExclusiveMinimum:{okStr:">",ok:r.GT,fail:r.LTE}},i={message:({keyword:e,schemaCode:t})=>n.str`should be ${s[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>n._`{comparison: ${s[e].okStr}, limit: ${t}}`};e.formatLimitDefinition={keyword:Object.keys(s),type:"string",schemaType:"string",$data:!0,error:i,code(e){const{gen:r,data:i,schemaCode:o,keyword:a,it:c}=e,{opts:l,self:u}=c;if(!l.validateFormats)return;const p=new t.KeywordCxt(c,u.RULES.all.format.definition,"format");function d(e){return n._`${e}.compare(${i}, ${o}) ${s[a].fail} 0`}p.$data?function(){const t=r.scopeValue("formats",{ref:u.formats,code:l.code.formats}),s=r.const("fmt",n._`${t}[${p.schemaCode}]`);e.fail$data((0,n.or)(n._`typeof ${s} != "object"`,n._`${s} instanceof RegExp`,n._`typeof ${s}.compare != "function"`,d(s)))}():function(){const t=p.schema,s=u.formats[t];if(!s||!0===s)return;if("object"!=typeof s||s instanceof RegExp||"function"!=typeof s.compare)throw Error(`"${a}": format "${t}" does not define "compare" function`);const i=r.scopeValue("formats",{key:t,ref:s,code:l.code.formats?n._`${l.code.formats}${(0,n.getProperty)(t)}`:void 0});e.fail$data(d(i))}()},dependencies:["format"]},e.default=t=>(t.addKeyword(e.formatLimitDefinition),t)}(Ib),function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const n=Cb,r=Ib,s=Qh(),i=new s.Name("fullFormats"),o=new s.Name("fastFormats"),a=(e,t={keywords:!0})=>{if(Array.isArray(t))return c(e,t,n.fullFormats,i),e;const[s,a]="fast"===t.mode?[n.fastFormats,o]:[n.fullFormats,i];return c(e,t.formats||n.formatNames,s,a),t.keywords&&(0,r.default)(e),e};function c(e,t,n,r){var i,o;null!==(i=(o=e.opts.code).formats)&&void 0!==i||(o.formats=s._`require("ajv-formats/dist/formats").${r}`);for(const r of t)e.addFormat(r,n[r])}a.get=(e,t="full")=>{const r=("fast"===t?n.fastFormats:n.fullFormats)[e];if(!r)throw Error(`Unknown format "${e}"`);return r},e.exports=t=a,Object.defineProperty(t,"__esModule",{value:!0}),t.default=a}(kb,kb.exports);const Rb=Vv,Ob=xb,Nb=kb.exports,Db=tc({proto:!0});var Pb=class e{constructor(e){this.ajv=new Rb({...e,strictSchema:!1,validateSchema:!1,allowUnionTypes:!0,uriResolver:Ob}),Nb(this.ajv),this.ajv.addKeyword({keyword:"fjs_type",type:"object",errors:!1,validate:(e,t)=>t instanceof Date}),this._ajvSchemas={},this._ajvOptions=e||{}}addSchema(e,t){let n=e.$id||t;if(void 0!==e.$id&&"#"===e.$id[0]&&(n=t+e.$id),void 0===this.ajv.refs[n]&&void 0===this.ajv.schemas[n]){const t=Db(e);this.convertSchemaToAjvFormat(t),this.ajv.addSchema(t,n),this._ajvSchemas[n]=e}}validate(e,t){return this.ajv.validate(e,t)}convertSchemaToAjvFormat(e){if(null!==e){"string"===e.type?(e.fjs_type="string",e.type=["string","object"]):Array.isArray(e.type)&&e.type.includes("string")&&!e.type.includes("object")&&(e.fjs_type="string",e.type.push("object"));for(const t in e)"object"==typeof e[t]&&this.convertSchemaToAjvFormat(e[t])}}getState(){return{ajvOptions:this._ajvOptions,ajvSchemas:this._ajvSchemas}}static restoreFromState(t){const n=new e(t.ajvOptions);for(const[e,r]of Object.entries(t.ajvSchemas))n.ajv.addSchema(r,e);return n}},Lb={exports:{}};Lb.exports=zb,Lb.exports.default=zb;const Mb={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0},Bb={enum:["array","boolean","integer","null","number","object","string"]},jb=/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,Fb=Cb.fullFormats.uri,$b=Cb.fullFormats.regex;function Ub(e,{instancePath:t="",rootData:n=e}={}){return"number"!=typeof e||e%1||isNaN(e)||!isFinite(e)?(Ub.errors=[{instancePath:t,schemaPath:"#/definitions/nonNegativeInteger/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1):"number"==typeof e&&isFinite(e)&&(0>e||isNaN(e))?(Ub.errors=[{instancePath:t,schemaPath:"#/definitions/nonNegativeInteger/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0"}],!1):(Ub.errors=null,!0)}const Hb={validate:zb};function Gb(e,{instancePath:t="",rootData:n=e}={}){let r=null,s=0;if(0===s){if(!Array.isArray(e))return Gb.errors=[{instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;if(1>e.length)return Gb.errors=[{instancePath:t,schemaPath:"#/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items"}],!1;{const i=e.length;for(let o=0;i>o;o++){const i=s;if(Hb.validate(e[o],{instancePath:t+"/"+o,parentData:e,parentDataProperty:o,rootData:n})||(r=null===r?Hb.validate.errors:r.concat(Hb.validate.errors),s=r.length),i!==s)break}}}return Gb.errors=r,0===s}const qb=Mg.default;function zb(e,{instancePath:t="",rootData:n=e}={}){let r=null,s=0;if((!e||"object"!=typeof e||Array.isArray(e))&&"boolean"!=typeof e)return zb.errors=[{instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:Mb.type},message:"must be object,boolean"}],!1;if(0===s&&e&&"object"==typeof e&&!Array.isArray(e)){if(void 0!==e.$id){let n=e.$id;const r=s;if(s===r&&s===r){if("string"!=typeof n)return zb.errors=[{instancePath:t+"/$id",schemaPath:"#/properties/%24id/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!jb.test(n))return zb.errors=[{instancePath:t+"/$id",schemaPath:"#/properties/%24id/format",keyword:"format",params:{format:"uri-reference"},message:'must match format "uri-reference"'}],!1}var i=r===s}else i=!0;if(i){if(void 0!==e.$schema){let n=e.$schema;const r=s;if(s===r&&s===r){if("string"!=typeof n)return zb.errors=[{instancePath:t+"/$schema",schemaPath:"#/properties/%24schema/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!Fb(n))return zb.errors=[{instancePath:t+"/$schema",schemaPath:"#/properties/%24schema/format",keyword:"format",params:{format:"uri"},message:'must match format "uri"'}],!1}i=r===s}else i=!0;if(i){if(void 0!==e.$ref){let n=e.$ref;const r=s;if(s===r&&s===r){if("string"!=typeof n)return zb.errors=[{instancePath:t+"/$ref",schemaPath:"#/properties/%24ref/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!jb.test(n))return zb.errors=[{instancePath:t+"/$ref",schemaPath:"#/properties/%24ref/format",keyword:"format",params:{format:"uri-reference"},message:'must match format "uri-reference"'}],!1}i=r===s}else i=!0;if(i){if(void 0!==e.$comment){const n=s;if("string"!=typeof e.$comment)return zb.errors=[{instancePath:t+"/$comment",schemaPath:"#/properties/%24comment/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;i=n===s}else i=!0;if(i){if(void 0!==e.title){const n=s;if("string"!=typeof e.title)return zb.errors=[{instancePath:t+"/title",schemaPath:"#/properties/title/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;i=n===s}else i=!0;if(i){if(void 0!==e.description){const n=s;if("string"!=typeof e.description)return zb.errors=[{instancePath:t+"/description",schemaPath:"#/properties/description/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;i=n===s}else i=!0;if(i){if(void 0!==e.readOnly){const n=s;if("boolean"!=typeof e.readOnly)return zb.errors=[{instancePath:t+"/readOnly",schemaPath:"#/properties/readOnly/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;i=n===s}else i=!0;if(i){if(void 0!==e.examples){const n=s;if(s===n&&!Array.isArray(e.examples))return zb.errors=[{instancePath:t+"/examples",schemaPath:"#/properties/examples/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;i=n===s}else i=!0;if(i){if(void 0!==e.multipleOf){let n=e.multipleOf;const r=s;if(s===r){if("number"!=typeof n||!isFinite(n))return zb.errors=[{instancePath:t+"/multipleOf",schemaPath:"#/properties/multipleOf/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;if(0>=n||isNaN(n))return zb.errors=[{instancePath:t+"/multipleOf",schemaPath:"#/properties/multipleOf/exclusiveMinimum",keyword:"exclusiveMinimum",params:{comparison:">",limit:0},message:"must be > 0"}],!1}i=r===s}else i=!0;if(i){if(void 0!==e.maximum){let n=e.maximum;const r=s;if("number"!=typeof n||!isFinite(n))return zb.errors=[{instancePath:t+"/maximum",schemaPath:"#/properties/maximum/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;i=r===s}else i=!0;if(i){if(void 0!==e.exclusiveMaximum){let n=e.exclusiveMaximum;const r=s;if("number"!=typeof n||!isFinite(n))return zb.errors=[{instancePath:t+"/exclusiveMaximum",schemaPath:"#/properties/exclusiveMaximum/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;i=r===s}else i=!0;if(i){if(void 0!==e.minimum){let n=e.minimum;const r=s;if("number"!=typeof n||!isFinite(n))return zb.errors=[{instancePath:t+"/minimum",schemaPath:"#/properties/minimum/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;i=r===s}else i=!0;if(i){if(void 0!==e.exclusiveMinimum){let n=e.exclusiveMinimum;const r=s;if("number"!=typeof n||!isFinite(n))return zb.errors=[{instancePath:t+"/exclusiveMinimum",schemaPath:"#/properties/exclusiveMinimum/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;i=r===s}else i=!0;if(i){if(void 0!==e.maxLength){let n=e.maxLength;const r=s,o=s;if("number"!=typeof n||n%1||isNaN(n)||!isFinite(n))return zb.errors=[{instancePath:t+"/maxLength",schemaPath:"#/definitions/nonNegativeInteger/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;if(s===o&&"number"==typeof n&&isFinite(n)&&(0>n||isNaN(n)))return zb.errors=[{instancePath:t+"/maxLength",schemaPath:"#/definitions/nonNegativeInteger/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0"}],!1;i=r===s}else i=!0;if(i){if(void 0!==e.minLength){const o=s;Ub(e.minLength,{instancePath:t+"/minLength",parentData:e,parentDataProperty:"minLength",rootData:n})||(r=null===r?Ub.errors:r.concat(Ub.errors),s=r.length),i=o===s}else i=!0;if(i){if(void 0!==e.pattern){let n=e.pattern;const r=s;if(s===r&&s===r){if("string"!=typeof n)return zb.errors=[{instancePath:t+"/pattern",schemaPath:"#/properties/pattern/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!$b(n))return zb.errors=[{instancePath:t+"/pattern",schemaPath:"#/properties/pattern/format",keyword:"format",params:{format:"regex"},message:'must match format "regex"'}],!1}i=r===s}else i=!0;if(i){if(void 0!==e.additionalItems){const o=s;zb(e.additionalItems,{instancePath:t+"/additionalItems",parentData:e,parentDataProperty:"additionalItems",rootData:n})||(r=null===r?zb.errors:r.concat(zb.errors),s=r.length),i=o===s}else i=!0;if(i){if(void 0!==e.items){let a=e.items;const c=s,l=s;let u=!1;const p=s;zb(a,{instancePath:t+"/items",parentData:e,parentDataProperty:"items",rootData:n})||(r=null===r?zb.errors:r.concat(zb.errors),s=r.length);var o=p===s;if(u=u||o,!u){const i=s;Gb(a,{instancePath:t+"/items",parentData:e,parentDataProperty:"items",rootData:n})||(r=null===r?Gb.errors:r.concat(Gb.errors),s=r.length),o=i===s,u=u||o}if(!u){const e={instancePath:t+"/items",schemaPath:"#/properties/items/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return null===r?r=[e]:r.push(e),s++,zb.errors=r,!1}s=l,null!==r&&(l?r.length=l:r=null),i=c===s}else i=!0;if(i){if(void 0!==e.maxItems){let n=e.maxItems;const r=s,o=s;if("number"!=typeof n||n%1||isNaN(n)||!isFinite(n))return zb.errors=[{instancePath:t+"/maxItems",schemaPath:"#/definitions/nonNegativeInteger/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;if(s===o&&"number"==typeof n&&isFinite(n)&&(0>n||isNaN(n)))return zb.errors=[{instancePath:t+"/maxItems",schemaPath:"#/definitions/nonNegativeInteger/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0"}],!1;i=r===s}else i=!0;if(i){if(void 0!==e.minItems){const o=s;Ub(e.minItems,{instancePath:t+"/minItems",parentData:e,parentDataProperty:"minItems",rootData:n})||(r=null===r?Ub.errors:r.concat(Ub.errors),s=r.length),i=o===s}else i=!0;if(i){if(void 0!==e.uniqueItems){const n=s;if("boolean"!=typeof e.uniqueItems)return zb.errors=[{instancePath:t+"/uniqueItems",schemaPath:"#/properties/uniqueItems/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;i=n===s}else i=!0;if(i){if(void 0!==e.contains){const o=s;zb(e.contains,{instancePath:t+"/contains",parentData:e,parentDataProperty:"contains",rootData:n})||(r=null===r?zb.errors:r.concat(zb.errors),s=r.length),i=o===s}else i=!0;if(i){if(void 0!==e.maxProperties){let n=e.maxProperties;const r=s,o=s;if("number"!=typeof n||n%1||isNaN(n)||!isFinite(n))return zb.errors=[{instancePath:t+"/maxProperties",schemaPath:"#/definitions/nonNegativeInteger/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;if(s===o&&"number"==typeof n&&isFinite(n)&&(0>n||isNaN(n)))return zb.errors=[{instancePath:t+"/maxProperties",schemaPath:"#/definitions/nonNegativeInteger/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0"}],!1;i=r===s}else i=!0;if(i){if(void 0!==e.minProperties){const o=s;Ub(e.minProperties,{instancePath:t+"/minProperties",parentData:e,parentDataProperty:"minProperties",rootData:n})||(r=null===r?Ub.errors:r.concat(Ub.errors),s=r.length),i=o===s}else i=!0;if(i){if(void 0!==e.required){let n=e.required;const r=s;if(s==s){if(!Array.isArray(n))return zb.errors=[{instancePath:t+"/required",schemaPath:"#/definitions/stringArray/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;{var a=!0;const e=n.length;for(let r=0;e>r;r++){const e=s;if("string"!=typeof n[r])return zb.errors=[{instancePath:t+"/required/"+r,schemaPath:"#/definitions/stringArray/items/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!(a=e===s))break}if(a){let e,r=n.length;if(r>1){const s={};for(;r--;){let i=n[r];if("string"==typeof i){if("number"==typeof s[i])return e=s[i],zb.errors=[{instancePath:t+"/required",schemaPath:"#/definitions/stringArray/uniqueItems",keyword:"uniqueItems",params:{i:r,j:e},message:"must NOT have duplicate items (items ## "+e+" and "+r+" are identical)"}],!1;s[i]=r}}}}}}i=r===s}else i=!0;if(i){if(void 0!==e.additionalProperties){const o=s;zb(e.additionalProperties,{instancePath:t+"/additionalProperties",parentData:e,parentDataProperty:"additionalProperties",rootData:n})||(r=null===r?zb.errors:r.concat(zb.errors),s=r.length),i=o===s}else i=!0;if(i){if(void 0!==e.definitions){let o=e.definitions;const a=s;if(s===a){if(!o||"object"!=typeof o||Array.isArray(o))return zb.errors=[{instancePath:t+"/definitions",schemaPath:"#/properties/definitions/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;for(const e in o){const i=s;if(zb(o[e],{instancePath:t+"/definitions/"+e.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:o,parentDataProperty:e,rootData:n})||(r=null===r?zb.errors:r.concat(zb.errors),s=r.length),i!==s)break}}i=a===s}else i=!0;if(i){if(void 0!==e.properties){let o=e.properties;const a=s;if(s===a){if(!o||"object"!=typeof o||Array.isArray(o))return zb.errors=[{instancePath:t+"/properties",schemaPath:"#/properties/properties/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;for(const e in o){const i=s;if(zb(o[e],{instancePath:t+"/properties/"+e.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:o,parentDataProperty:e,rootData:n})||(r=null===r?zb.errors:r.concat(zb.errors),s=r.length),i!==s)break}}i=a===s}else i=!0;if(i){if(void 0!==e.patternProperties){let o=e.patternProperties;const a=s;if(s===a){if(!o||"object"!=typeof o||Array.isArray(o))return zb.errors=[{instancePath:t+"/patternProperties",schemaPath:"#/properties/patternProperties/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;for(const e in o){const n=s;if(s===n&&"string"==typeof e&&!$b(e)){const n={instancePath:t+"/patternProperties",schemaPath:"#/properties/patternProperties/propertyNames/format",keyword:"format",params:{format:"regex"},message:'must match format "regex"',propertyName:e};null===r?r=[n]:r.push(n),s++}var c=n===s;if(!c){const n={instancePath:t+"/patternProperties",schemaPath:"#/properties/patternProperties/propertyNames",keyword:"propertyNames",params:{propertyName:e},message:"property name must be valid"};return null===r?r=[n]:r.push(n),s++,zb.errors=r,!1}}if(c)for(const e in o){const i=s;if(zb(o[e],{instancePath:t+"/patternProperties/"+e.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:o,parentDataProperty:e,rootData:n})||(r=null===r?zb.errors:r.concat(zb.errors),s=r.length),i!==s)break}}i=a===s}else i=!0;if(i){if(void 0!==e.dependencies){let o=e.dependencies;const a=s;if(s===a){if(!o||"object"!=typeof o||Array.isArray(o))return zb.errors=[{instancePath:t+"/dependencies",schemaPath:"#/properties/dependencies/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;for(const e in o){let i=o[e];const a=s,c=s;let p=!1;const d=s;zb(i,{instancePath:t+"/dependencies/"+e.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:o,parentDataProperty:e,rootData:n})||(r=null===r?zb.errors:r.concat(zb.errors),s=r.length);var l=d===s;if(p=p||l,!p){const n=s;if(s==s)if(Array.isArray(i)){var u=!0;const n=i.length;for(let o=0;n>o;o++){const n=s;if("string"!=typeof i[o]){const n={instancePath:t+"/dependencies/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/"+o,schemaPath:"#/definitions/stringArray/items/type",keyword:"type",params:{type:"string"},message:"must be string"};null===r?r=[n]:r.push(n),s++}if(!(u=n===s))break}if(u){let n,o=i.length;if(o>1){const a={};for(;o--;){let c=i[o];if("string"==typeof c){if("number"==typeof a[c]){n=a[c];const i={instancePath:t+"/dependencies/"+e.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/definitions/stringArray/uniqueItems",keyword:"uniqueItems",params:{i:o,j:n},message:"must NOT have duplicate items (items ## "+n+" and "+o+" are identical)"};null===r?r=[i]:r.push(i),s++;break}a[c]=o}}}}}else{const n={instancePath:t+"/dependencies/"+e.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/definitions/stringArray/type",keyword:"type",params:{type:"array"},message:"must be array"};null===r?r=[n]:r.push(n),s++}l=n===s,p=p||l}if(!p){const n={instancePath:t+"/dependencies/"+e.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/dependencies/additionalProperties/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return null===r?r=[n]:r.push(n),s++,zb.errors=r,!1}if(s=c,null!==r&&(c?r.length=c:r=null),a!==s)break}}i=a===s}else i=!0;if(i){if(void 0!==e.propertyNames){const o=s;zb(e.propertyNames,{instancePath:t+"/propertyNames",parentData:e,parentDataProperty:"propertyNames",rootData:n})||(r=null===r?zb.errors:r.concat(zb.errors),s=r.length),i=o===s}else i=!0;if(i){if(void 0!==e.enum){let n=e.enum;const r=s;if(s===r){if(!Array.isArray(n))return zb.errors=[{instancePath:t+"/enum",schemaPath:"#/properties/enum/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;if(1>n.length)return zb.errors=[{instancePath:t+"/enum",schemaPath:"#/properties/enum/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items"}],!1;{let e,r=n.length;if(r>1)for(;r--;)for(e=r;e--;)if(qb(n[r],n[e]))return zb.errors=[{instancePath:t+"/enum",schemaPath:"#/properties/enum/uniqueItems",keyword:"uniqueItems",params:{i:r,j:e},message:"must NOT have duplicate items (items ## "+e+" and "+r+" are identical)"}],!1}}i=r===s}else i=!0;if(i){if(void 0!==e.type){let n=e.type;const o=s,a=s;let c=!1;const l=s;if("array"!==n&&"boolean"!==n&&"integer"!==n&&"null"!==n&&"number"!==n&&"object"!==n&&"string"!==n){const e={instancePath:t+"/type",schemaPath:"#/definitions/simpleTypes/enum",keyword:"enum",params:{allowedValues:Bb.enum},message:"must be equal to one of the allowed values"};null===r?r=[e]:r.push(e),s++}var p=l===s;if(c=c||p,!c){const e=s;if(s===e)if(Array.isArray(n))if(1>n.length){const e={instancePath:t+"/type",schemaPath:"#/properties/type/anyOf/1/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items"};null===r?r=[e]:r.push(e),s++}else{var d=!0;const e=n.length;for(let i=0;e>i;i++){let e=n[i];const o=s;if("array"!==e&&"boolean"!==e&&"integer"!==e&&"null"!==e&&"number"!==e&&"object"!==e&&"string"!==e){const e={instancePath:t+"/type/"+i,schemaPath:"#/definitions/simpleTypes/enum",keyword:"enum",params:{allowedValues:Bb.enum},message:"must be equal to one of the allowed values"};null===r?r=[e]:r.push(e),s++}if(!(d=o===s))break}if(d){let e,i=n.length;if(i>1)e:for(;i--;)for(e=i;e--;)if(qb(n[i],n[e])){const n={instancePath:t+"/type",schemaPath:"#/properties/type/anyOf/1/uniqueItems",keyword:"uniqueItems",params:{i:i,j:e},message:"must NOT have duplicate items (items ## "+e+" and "+i+" are identical)"};null===r?r=[n]:r.push(n),s++;break e}}}else{const e={instancePath:t+"/type",schemaPath:"#/properties/type/anyOf/1/type",keyword:"type",params:{type:"array"},message:"must be array"};null===r?r=[e]:r.push(e),s++}p=e===s,c=c||p}if(!c){const e={instancePath:t+"/type",schemaPath:"#/properties/type/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return null===r?r=[e]:r.push(e),s++,zb.errors=r,!1}s=a,null!==r&&(a?r.length=a:r=null),i=o===s}else i=!0;if(i){if(void 0!==e.format){const n=s;if("string"!=typeof e.format)return zb.errors=[{instancePath:t+"/format",schemaPath:"#/properties/format/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;i=n===s}else i=!0;if(i){if(void 0!==e.contentMediaType){const n=s;if("string"!=typeof e.contentMediaType)return zb.errors=[{instancePath:t+"/contentMediaType",schemaPath:"#/properties/contentMediaType/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;i=n===s}else i=!0;if(i){if(void 0!==e.contentEncoding){const n=s;if("string"!=typeof e.contentEncoding)return zb.errors=[{instancePath:t+"/contentEncoding",schemaPath:"#/properties/contentEncoding/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;i=n===s}else i=!0;if(i){if(void 0!==e.if){const o=s;zb(e.if,{instancePath:t+"/if",parentData:e,parentDataProperty:"if",rootData:n})||(r=null===r?zb.errors:r.concat(zb.errors),s=r.length),i=o===s}else i=!0;if(i){if(void 0!==e.then){const o=s;zb(e.then,{instancePath:t+"/then",parentData:e,parentDataProperty:"then",rootData:n})||(r=null===r?zb.errors:r.concat(zb.errors),s=r.length),i=o===s}else i=!0;if(i){if(void 0!==e.else){const o=s;zb(e.else,{instancePath:t+"/else",parentData:e,parentDataProperty:"else",rootData:n})||(r=null===r?zb.errors:r.concat(zb.errors),s=r.length),i=o===s}else i=!0;if(i){if(void 0!==e.allOf){const o=s;Gb(e.allOf,{instancePath:t+"/allOf",parentData:e,parentDataProperty:"allOf",rootData:n})||(r=null===r?Gb.errors:r.concat(Gb.errors),s=r.length),i=o===s}else i=!0;if(i){if(void 0!==e.anyOf){const o=s;Gb(e.anyOf,{instancePath:t+"/anyOf",parentData:e,parentDataProperty:"anyOf",rootData:n})||(r=null===r?Gb.errors:r.concat(Gb.errors),s=r.length),i=o===s}else i=!0;if(i){if(void 0!==e.oneOf){const o=s;Gb(e.oneOf,{instancePath:t+"/oneOf",parentData:e,parentDataProperty:"oneOf",rootData:n})||(r=null===r?Gb.errors:r.concat(Gb.errors),s=r.length),i=o===s}else i=!0;if(i)if(void 0!==e.not){const o=s;zb(e.not,{instancePath:t+"/not",parentData:e,parentDataProperty:"not",rootData:n})||(r=null===r?zb.errors:r.concat(zb.errors),s=r.length),i=o===s}else i=!0}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}return zb.errors=r,0===s}var Vb=Lb.exports,Yb={MergeError:class extends Error{constructor(e,t){super(),this.name="JsonSchemaMergeError",this.code="JSON_SCHEMA_MERGE_ERROR",this.message=`Failed to merge "${e}" keyword schemas.`,this.schemas=t}},ResolverNotFoundError:class extends Error{constructor(e,t){super(),this.name="JsonSchemaMergeError",this.code="JSON_SCHEMA_MERGE_ERROR",this.message=`Resolver for "${e}" keyword not found.`,this.schemas=t}},InvalidOnConflictOptionError:class extends Error{constructor(e){super(),this.name="JsonSchemaMergeError",this.code="JSON_SCHEMA_MERGE_ERROR",this.message=`Invalid "onConflict" option: "${e}".`}}};const Kb=Lh,{MergeError:Qb}=Yb;function Wb(e){let t=e[0];for(let n=1;e.length>n;n++)t=t.filter((t=>e[n].includes(t)));return t}var Jb={arraysIntersection:function(e,t,n){const r=Wb(t);if(0===r.length)throw new Qb(e,t);n[e]=r},hybridArraysIntersection:function(e,t,n){for(let e=0;t.length>e;e++)Array.isArray(t[e])||(t[e]=[t[e]]);const r=Wb(t);if(0===r.length)throw new Qb(e,t);n[e]=1===r.length?r[0]:r},arraysUnion:function(e,t,n){const r=[];for(const e of t)for(const t of e)r.includes(t)||r.push(t);n[e]=r},minNumber:function(e,t,n){n[e]=Math.min(...t)},maxNumber:function(e,t,n){n[e]=Math.max(...t)},commonMultiple:function(e,t,n){const r=(e,t)=>t?r(t,e%t):e;let s=1;for(const e of t)for(;e*s%1!=0;)s*=10;let i=t[0]*s;for(const e of t)i=(o=i)*(a=e*s)/r(o,a);var o,a;n[e]=i/s},allEqual:function(e,t,n){const r=t[0];for(let n=1;t.length>n;n++)if(!Kb(t[n],r))throw new Qb(e,t);n[e]=r},booleanAnd:function(e,t,n){for(const r of t)if(!1===r)return void(n[e]=!1);n[e]=!0},booleanOr:function(e,t,n){for(const r of t)if(!0===r)return void(n[e]=!0);n[e]=!1},skip:function(){}};const Xb=Lh,Zb=Yb,eE={$id:Jb.skip,type:Jb.hybridArraysIntersection,enum:Jb.arraysIntersection,minLength:Jb.maxNumber,maxLength:Jb.minNumber,minimum:Jb.maxNumber,maximum:Jb.minNumber,multipleOf:Jb.commonMultiple,exclusiveMinimum:Jb.maxNumber,exclusiveMaximum:Jb.minNumber,minItems:Jb.maxNumber,maxItems:Jb.minNumber,maxProperties:Jb.minNumber,minProperties:Jb.maxNumber,const:Jb.allEqual,default:Jb.allEqual,format:Jb.allEqual,required:Jb.arraysUnion,properties:function(e,t,n,r,s){const i={};for(const e of r){const t=e.properties??{};for(const n of Object.keys(t))if(void 0===i[n]){i[n]=[t[n]];for(const t of r){if(e===t)continue;const r=sE(t,n);void 0!==r&&i[n].push(r)}}}const o={};for(const e of Object.keys(i))o[e]=aE(i[e],s);n[e]=o},patternProperties:iE,additionalProperties:tE,items:function(e,t,n,r,s){let i=0;for(const e of t)Array.isArray(e)&&(i=Math.max(i,e.length));if(0===i)return void(n[e]=aE(t,s));const o=[];for(let e=0;i>e;e++){const t=[];for(const n of r){const r=rE(n,e);void 0!==r&&t.push(r)}o[e]=aE(t,s)}n[e]=o},additionalItems:function(e,t,n,r,s){let i=!1;for(const e of r)if(Array.isArray(e.items)){i=!0;break}if(!i)return void(n[e]=aE(t,s));const o=[];for(const e of r){let t=e.additionalItems;void 0!==t||Array.isArray(e.items)||(t=e.items),void 0!==t&&o.push(t)}n[e]=aE(o,s)},definitions:iE,$defs:iE,nullable:Jb.booleanAnd,oneOf:nE,anyOf:nE,allOf:Jb.arraysUnion,not:tE,if:function(e,t,n,r,s){for(let e=0;r.length>e;e++){const t={if:r[e].if,then:r[e].then,else:r[e].else};void 0!==t.if&&(void 0!==n.if?(void 0!==n.then&&(n.then=aE([n.then,t],s)),void 0!==n.else&&(n.else=aE([n.else,t],s))):(n.if=t.if,void 0!==t.then&&(n.then=t.then),void 0!==t.else&&(n.else=t.else)))}},then:Jb.skip,else:Jb.skip,dependencies:oE,dependentRequired:oE,dependentSchemas:iE,propertyNames:tE,uniqueItems:Jb.booleanOr,contains:tE};function tE(e,t,n,r,s){n[e]=aE(t,s)}function nE(e,t,n,r,s){if(1===t.length)return void(n[e]=t[0]);const i=function(e){let t=[[]];for(const n of e){const e=[];for(const r of t)for(const t of n)e.push([...r,t]);t=e}return t}(t),o=[];for(const e of i)try{const t=aE(e,s);void 0!==t&&o.push(t)}catch(e){if(e instanceof Zb.MergeError)continue;throw e}n[e]=o}function rE(e,t){const{items:n,additionalItems:r}=e;return Array.isArray(n)?n.length>t?n[t]:r:void 0!==n?n:r}function sE(e,t){const{properties:n,patternProperties:r,additionalProperties:s}=e;if(void 0!==n?.[t])return n[t];for(const e of Object.keys(r??{}))if(RegExp(e).test(t))return r[e];return s}function iE(e,t,n,r,s){const i={};for(const e of t)for(const t of Object.keys(e))void 0===i[t]&&(i[t]=[]),i[t].push(e[t]);const o={};for(const e of Object.keys(i)){const t=aE(i[e],s);o[e]=t}n[e]=o}function oE(e,t,n){const r={};for(const e of t)for(const t of Object.keys(e)){void 0===r[t]&&(r[t]=[]);const n=r[t];for(const r of e[t])n.includes(r)||n.push(r)}n[e]=r}function aE(e,t){if(0===e.length)return{};if(1===e.length)return e[0];const n={},r={};let s=!0;for(const t of e){if(!1===t)return!1;if(!0!==t){s=!1;for(const e of Object.keys(t))void 0===r[e]&&(r[e]=[]),r[e].push(t[e])}}if(s)return!0;for(const s of Object.keys(r))(t.resolvers[s]??t.defaultResolver)(s,r[s],n,e,t);return n}function cE(e,t,n,r,s){const i=s.onConflict??"throw";if(1===t.length||"first"===i)return void(n[e]=t[0]);let o=!0;for(let e=1;t.length>e;e++)if(!Xb(t[e],t[0])){o=!1;break}if(o)n[e]=t[0];else{if("throw"===i)throw new Zb.ResolverNotFoundError(e,t);if("skip"!==i)throw new Zb.InvalidOnConflictOptionError(i)}}var lE={mergeSchemas:function(e,t={}){return void 0===t.defaultResolver&&(t.defaultResolver=cE),t.resolvers={...eE,...t.resolvers},aE(e,t)},keywordsResolvers:eE,defaultResolver:cE,...Zb};const{mergeSchemas:uE}=lE;var pE,dE={exports:{}};const{RefResolver:hE}=Fh,fE=yc,mE=Pb,gE=class e{constructor(e,t,n="#"){this.schema=e,this.schemaId=t,this.jsonPointer=n}getPropertyLocation(t){return new e(this.schema[t],this.schemaId,this.jsonPointer+"/"+t)}getSchemaRef(){return this.schemaId+this.jsonPointer}},yE=Vb,vE=function(e){return uE(e,{onConflict:"skip"})},bE=/'/g;let EE=2e4,_E="default";const AE=["floor","ceil","round","trunc"],SE=["default","json-stringify"];let TE=0;function wE(e,t){if(!yE(e)){const e=yE.errors[0],n=Error(`${t=t?`"${t}" `:""}schema is invalid: data${e.instancePath} ${e.message}`);throw n.errors=wE.errors,n}}function xE(e,t){const n=t.schema.$ref;let r=n.indexOf("#");-1===r&&(r=n.length);const s=n.slice(0,r)||t.schemaId,i=n.slice(r)||"#",o=e.refResolver.getSchema(s,i);if(null===o)throw Error(`Cannot find reference "${n}"`);const a=new gE(o,s,i);return void 0!==o.$ref?xE(e,a):a}function kE(e,t){const n=e.refResolver.getSchema(t,"#");return new gE(n,t,"#")}function CE(e,t){return e.$id&&"#"!==e.$id.charAt(0)?e.$id:t}function IE(e,t){wE(e),t=t||{};const n={functions:[],functionsCounter:0,functionsNamesBySchema:new Map,options:t,refResolver:new hE,rootSchemaId:e.$id||"__fjs_root_"+TE++,validatorSchemasIds:new Set,mergedSchemasIds:new Map},r=CE(e,n.rootSchemaId);if(n.refResolver.hasSchema(r)||n.refResolver.addSchema(e,n.rootSchemaId),t.schema)for(const e in t.schema){const r=t.schema[e],s=CE(r,e);n.refResolver.hasSchema(s)||(wE(r,e),n.refResolver.addSchema(r,e))}if(t.rounding&&!AE.includes(t.rounding))throw Error("Unsupported integer rounding method "+t.rounding);if(t.largeArrayMechanism){if(!SE.includes(t.largeArrayMechanism))throw Error("Unsupported large array mechanism "+t.largeArrayMechanism);_E=t.largeArrayMechanism}if(t.largeArraySize)if("string"==typeof t.largeArraySize&&Number.isFinite(Number.parseInt(t.largeArraySize,10)))EE=Number.parseInt(t.largeArraySize,10);else if("number"==typeof t.largeArraySize&&Number.isInteger(t.largeArraySize))EE=t.largeArraySize;else{if("bigint"!=typeof t.largeArraySize)throw Error(`Unsupported large array size. Expected integer-like, got ${typeof t.largeArraySize} with value ${t.largeArraySize}`);EE=+t.largeArraySize}const s=FE(n,new gE(e,n.rootSchemaId),"input");let i="\n    const JSON_STR_BEGIN_OBJECT = '{'\n    const JSON_STR_END_OBJECT = '}'\n    const JSON_STR_BEGIN_ARRAY = '['\n    const JSON_STR_END_ARRAY = ']'\n    const JSON_STR_COMMA = ','\n    const JSON_STR_COLONS = ':'\n    const JSON_STR_QUOTE = '\"'\n    const JSON_STR_EMPTY_OBJECT = JSON_STR_BEGIN_OBJECT + JSON_STR_END_OBJECT\n    const JSON_STR_EMPTY_ARRAY = JSON_STR_BEGIN_ARRAY + JSON_STR_END_ARRAY\n    const JSON_STR_EMPTY_STRING = JSON_STR_QUOTE + JSON_STR_QUOTE\n    const JSON_STR_NULL = 'null'\n  ";i+="json += anonymous0(input)"===s?`\n    ${n.functions.join("\n")}\n    const main = anonymous0\n    return main\n    `:`\n    function main (input) {\n      let json = ''\n      ${s}\n      return json\n    }\n    ${n.functions.join("\n")}\n    return main\n    `;const o=new fE(t),a=new mE(t.ajv);for(const e of n.validatorSchemasIds){const t=n.refResolver.getSchema(e);a.addSchema(t,e);const r=n.refResolver.getSchemaDependencies(e);for(const[e,t]of Object.entries(r))a.addSchema(t,e)}if(t.debugMode&&(t.mode="debug"),"debug"===t.mode)return{validator:a,serializer:o,code:"validator\nserializer\n"+i,ajv:a.ajv};const c=Function("validator","serializer",i);if("standalone"===t.mode){const e=(pE||(pE=1,dE.exports=function(e,t,n,r){let s="";t.validatorSchemasIds.size>0?(s+="const Validator = require('fast-json-stringify/lib/validator')\n",s+=`const validatorState = ${JSON.stringify(r.getState())}\n`,s+="const validator = Validator.restoreFromState(validatorState)\n"):s+="const validator = null\n";const{schema:i,...o}=n.getState();return`\n  'use strict'\n\n  const Serializer = require('fast-json-stringify/lib/serializer')\n  const serializerState = ${JSON.stringify(o)}\n  const serializer = Serializer.restoreFromState(serializerState)\n\n  ${s}\n\n  module.exports = ${""+e}(validator, serializer)`},dE.exports.dependencies={Serializer:yc,Validator:Pb}),dE.exports);return e(c,n,o,a)}return c(a,o)}const RE=["properties","required","additionalProperties","patternProperties","maxProperties","minProperties","dependencies"],OE=["items","additionalItems","maxItems","minItems","uniqueItems","contains"],NE=["maxLength","minLength","pattern"],DE=["multipleOf","maximum","exclusiveMaximum","minimum","exclusiveMinimum"];function PE(e,t,n){for(let t=0;n.length>t;t++){const r=n[t];r.schema.$ref&&(n[t]=xE(e,r))}const r=[];for(const t of n){const n=LE(e,t.schema,t.schemaId);delete n.$id,r.push(n)}const s=vE(r),i=new gE(s,t);return e.refResolver.addSchema(s,t),i}function LE(e,t,n){const r=Array.isArray(t)?[]:{};void 0!==t.$id&&"#"!==t.$id.charAt(0)&&(n=t.$id);const s=e.mergedSchemasIds.get(t);s&&e.mergedSchemasIds.set(r,s);for(const s in t){let i=t[s];"$ref"===s&&"string"==typeof i&&"#"===i.charAt(0)&&(i=n+i),"object"==typeof i&&null!==i&&(i=LE(e,i,n)),r[s]=i}return r}function ME(e,t){let n;switch(e){case"null":n="value === null";break;case"string":n='typeof value === \'string\' ||\n      value === null ||\n      value instanceof Date ||\n      value instanceof RegExp ||\n      (\n        typeof value === "object" &&\n        typeof value.toString === "function" &&\n        value.toString !== Object.prototype.toString\n      )';break;case"integer":n="Number.isInteger(value)";break;case"number":n="Number.isFinite(value)";break;case"boolean":n="typeof value === 'boolean'";break;case"object":n="value && typeof value === 'object' && value.constructor === Object";break;case"array":n="Array.isArray(value)";break;default:Array.isArray(e)&&(n=`(${e.map((e=>ME(e))).join(" || ")})`)}return n}function BE(e){return"anonymous"+e.functionsCounter++}function jE(e,t,n){const r=t.schema;switch(r.type){case"null":return"json += JSON_STR_NULL";case"string":return"date-time"===r.format?`json += serializer.asDateTime(${n})`:"date"===r.format?`json += serializer.asDate(${n})`:"time"===r.format?`json += serializer.asTime(${n})`:"unsafe"===r.format?`json += serializer.asUnsafeString(${n})`:`\n        if (typeof ${n} !== 'string') {\n          if (${n} === null) {\n            json += JSON_STR_EMPTY_STRING\n          } else if (${n} instanceof Date) {\n            json += JSON_STR_QUOTE + ${n}.toISOString() + JSON_STR_QUOTE\n          } else if (${n} instanceof RegExp) {\n            json += serializer.asString(${n}.source)\n          } else {\n            json += serializer.asString(${n}.toString())\n          }\n        } else {\n          json += serializer.asString(${n})\n        }\n        `;case"integer":return`json += serializer.asInteger(${n})`;case"number":return`json += serializer.asNumber(${n})`;case"boolean":return`json += serializer.asBoolean(${n})`;case"object":{const r=function(e,t){const n=t.schema;if(e.functionsNamesBySchema.has(n))return e.functionsNamesBySchema.get(n);const r=BE(e);e.functionsNamesBySchema.set(n,r);let s=t.getSchemaRef();s.startsWith(e.rootSchemaId)&&(s=s.replace(e.rootSchemaId,""));let i="\n  ";var o;return i+=`\n    // ${s}\n    function ${r} (input) {\n      const obj = ${o="input",`(${o} && typeof ${o}.toJSON === 'function')\n    ? ${o}.toJSON()\n    : ${o}\n  `}\n      ${!0===n.nullable?"":"if (obj === null) return JSON_STR_EMPTY_OBJECT"}\n\n      ${function(e,t){const n=t.schema,r=t.getPropertyLocation("properties"),s=n.required||[],i=Object.keys(n.properties||{}).sort(((e,t)=>{const n=s.includes(e);return n===s.includes(t)?0:n?-1:1})),o=s.includes(i[0]);let a="let value\n";for(const e of s)if(!i.includes(e)){const t=JSON.stringify(e);a+=`if (obj[${t}] === undefined) throw new Error('${t.replace(/'/g,"\\'")} is required!')\n`}a+="let json = JSON_STR_BEGIN_OBJECT\n";let c="";o||(a+="let addComma = false\n",c="!addComma && (addComma = true) || (json += JSON_STR_COMMA)");for(const t of i){let n=r.getPropertyLocation(t);n.schema.$ref&&(n=xE(e,n));const i=JSON.stringify(t),l=n.schema.default,u=s.includes(t);a+=`\n      value = obj[${i}]\n      if (value !== undefined) {\n        ${c}\n        json += ${JSON.stringify(i+":")}\n        ${FE(e,n,"value")}\n      }`,a+=void 0!==l?` else {\n        ${c}\n        json += ${JSON.stringify(i+":"+JSON.stringify(l))}\n      }\n      `:u?` else {\n        throw new Error('${i.replace(/'/g,"\\'")} is required!')\n      }\n      `:"\n",o&&(c="json += ','")}return(n.patternProperties||n.additionalProperties)&&(a+=function(e,t,n){let r=`\n    const propertiesKeys = ${JSON.stringify(Object.keys(t.schema.properties||{}))}\n    for (const [key, value] of Object.entries(obj)) {\n      if (\n        propertiesKeys.includes(key) ||\n        value === undefined ||\n        typeof value === 'function' ||\n        typeof value === 'symbol'\n      ) continue\n  `;const s=t.getPropertyLocation("patternProperties"),i=s.schema;if(void 0!==i)for(const t in i){const i=s.getPropertyLocation(t);r+=`\n        if (/${t.replace(/\\*\//g,"\\/")}/.test(key)) {\n          ${n}\n          json += serializer.asString(key) + JSON_STR_COLONS\n          ${FE(e,i,"value")}\n          continue\n        }\n      `}const o=t.getPropertyLocation("additionalProperties").schema;return void 0!==o&&(r+=!0===o?`\n        ${n}\n        json += serializer.asString(key) + JSON_STR_COLONS + JSON.stringify(value)\n      `:`\n        ${n}\n        json += serializer.asString(key) + JSON_STR_COLONS\n        ${FE(e,t.getPropertyLocation("additionalProperties"),"value")}\n      `),r+="\n    }\n  ",r}(e,t,c)),a+="\n    return json + JSON_STR_END_OBJECT\n  ",a}(e,t)}\n    }\n  `,e.functions.push(i),r}(e,t);return`json += ${r}(${n})`}case"array":{const r=function(e,t){const n=t.schema;let r=t.getPropertyLocation("items");r.schema=r.schema||{},r.schema.$ref&&(r=xE(e,r));const s=r.schema;if(e.functionsNamesBySchema.has(n))return e.functionsNamesBySchema.get(n);const i=BE(e);e.functionsNamesBySchema.set(n,i);let o=t.getSchemaRef();o.startsWith(e.rootSchemaId)&&(o=o.replace(e.rootSchemaId,""));let a=`\n    function ${i} (obj) {\n      // ${o}\n  `;if(a+=`\n    ${!0===n.nullable?"":"if (obj === null) return JSON_STR_EMPTY_ARRAY"}\n    if (!Array.isArray(obj)) {\n      throw new TypeError(\`The value of '${o}' does not match schema definition.\`)\n    }\n    const arrayLength = obj.length\n  `,!n.additionalItems&&Array.isArray(s)&&(a+=`\n      if (arrayLength > ${s.length}) {\n        throw new Error(\`Item at ${s.length} does not match schema definition.\`)\n      }\n    `),"json-stringify"===_E&&(a+=`if (arrayLength >= ${EE}) return JSON.stringify(obj)\n`),a+="\n    const arrayEnd = arrayLength - 1\n    let value\n    let json = ''\n  ",Array.isArray(s)){for(let t=0;s.length>t;t++){const n=s[t];a+=`value = obj[${t}]`;const i=FE(e,r.getPropertyLocation(t),"value");a+=`\n        if (${t} < arrayLength) {\n          if (${ME(n.type)}) {\n            ${i}\n            if (${t} < arrayEnd) {\n              json += JSON_STR_COMMA\n            }\n          } else {\n            throw new Error(\`Item at ${t} does not match schema definition.\`)\n          }\n        }\n        `}n.additionalItems&&(a+=`\n        for (let i = ${s.length}; i < arrayLength; i++) {\n          json += JSON.stringify(obj[i])\n          if (i < arrayEnd) {\n            json += JSON_STR_COMMA\n          }\n        }`)}else a+=`\n      for (let i = 0; i < arrayLength; i++) {\n        ${FE(e,r,"obj[i]")}\n        if (i < arrayEnd) {\n          json += JSON_STR_COMMA\n        }\n      }`;return a+="\n    return JSON_STR_BEGIN_ARRAY + json + JSON_STR_END_ARRAY\n  }",e.functions.push(a),i}(e,t);return`json += ${r}(${n})`}case void 0:return`json += JSON.stringify(${n})`;default:throw Error(r.type+" unsupported")}}function FE(e,t,n){let r=t.schema;if("boolean"==typeof r)return`json += JSON.stringify(${n})`;if(r.$ref&&(r=(t=xE(e,t)).schema),r.allOf)return function(e,t,n){const r=t.schema;let s=e.mergedSchemasIds.get(r);if(s)return FE(e,kE(e,s),n);s="__fjs_merged_"+TE++,e.mergedSchemasIds.set(r,s);const{allOf:i,...o}=t.schema,a=[new gE(o,t.schemaId,t.jsonPointer)],c=t.getPropertyLocation("allOf");for(let e=0;i.length>e;e++)a.push(c.getPropertyLocation(e));return FE(e,PE(e,s,a),n)}(e,t,n);if(r.anyOf||r.oneOf)return function(e,t,n){e.validatorSchemasIds.add(t.schemaId);const r=t.schema.anyOf?"anyOf":"oneOf",{[r]:s,...i}=t.schema,o=new gE(i,t.schemaId,t.jsonPointer),a=t.getPropertyLocation(r);let c="";for(let t=0;s.length>t;t++){const r=a.getPropertyLocation(t),s=r.schema;let i=e.mergedSchemasIds.get(s),l=null;i?l=kE(e,i):(i="__fjs_merged_"+TE++,e.mergedSchemasIds.set(s,i),l=PE(e,i,[o,r]));const u=FE(e,l,n);c+=`\n      ${0===t?"if":"else if"}(validator.validate("${r.getSchemaRef()}", ${n}))\n        ${u}\n    `}let l=t.getSchemaRef();return l.startsWith(e.rootSchemaId)&&(l=l.replace(e.rootSchemaId,"")),c+=`\n    else throw new TypeError(\`The value of '${l}' does not match schema definition.\`)\n  `,c}(e,t,n);if(r.if&&r.then)return function(e,t,n){e.validatorSchemasIds.add(t.schemaId);const{if:r,then:s,else:i,...o}=t.schema,a=new gE(o,t.schemaId,t.jsonPointer),c=t.getPropertyLocation("if").getSchemaRef(),l=t.getPropertyLocation("then");let u=e.mergedSchemasIds.get(s),p=null;if(u?p=kE(e,u):(u="__fjs_merged_"+TE++,e.mergedSchemasIds.set(s,u),p=PE(e,u,[a,l])),!i)return`\n      if (validator.validate("${c}", ${n})) {\n        ${FE(e,p,n)}\n      } else {\n        ${FE(e,a,n)}\n      }\n    `;const d=t.getPropertyLocation("else");let h=e.mergedSchemasIds.get(i),f=null;return h?f=kE(e,h):(h="__fjs_merged_"+TE++,e.mergedSchemasIds.set(i,h),f=PE(e,h,[a,d])),`\n    if (validator.validate("${c}", ${n})) {\n      ${FE(e,p,n)}\n    } else {\n      ${FE(e,f,n)}\n    }\n  `}(e,t,n);if(void 0===r.type){const e=function(e){for(var t of RE)if(t in e)return"object";for(var t of OE)if(t in e)return"array";for(var t of NE)if(t in e)return"string";for(var t of DE)if(t in e)return"number";return e.type}(r);e&&(r.type=e)}let s="";const i=r.type,o=!0===r.nullable;return o&&(s+=`\n      if (${n} === null) {\n        json += JSON_STR_NULL\n      } else {\n    `),s+=void 0!==r.const?function(e,t){const n=e.schema,r=n.type,s=Array.isArray(r)&&r.includes("null");let i="";return s&&(i+=`\n      if (${t} === null) {\n        json += JSON_STR_NULL\n      } else {\n    `),i+=`json += '${JSON.stringify(n.const).replace(bE,"\\'")}'`,s&&(i+="\n      }\n    "),i}(t,n):Array.isArray(i)?function(e,t,n){const r=t.schema.type.sort((e=>"null"===e?-1:1));let s="";r.forEach(((r,i)=>{t.schema={...t.schema,type:r};const o=jE(e,t,n),a=0===i?"if":"else if";switch(r){case"null":s+=`\n          ${a} (${n} === null)\n            ${o}\n          `;break;case"string":s+=`\n          ${a}(\n            typeof ${n} === "string" ||\n            ${n} === null ||\n            ${n} instanceof Date ||\n            ${n} instanceof RegExp ||\n            (\n              typeof ${n} === "object" &&\n              typeof ${n}.toString === "function" &&\n              ${n}.toString !== Object.prototype.toString\n            )\n          )\n            ${o}\n        `;break;case"array":s+=`\n          ${a}(Array.isArray(${n}))\n            ${o}\n        `;break;case"integer":s+=`\n          ${a}(Number.isInteger(${n}) || ${n} === null)\n            ${o}\n        `;break;default:s+=`\n          ${a}(typeof ${n} === "${r}" || ${n} === null)\n            ${o}\n        `}}));let i=t.getSchemaRef();return i.startsWith(e.rootSchemaId)&&(i=i.replace(e.rootSchemaId,"")),s+=`\n    else throw new TypeError(\`The value of '${i}' does not match schema definition.\`)\n  `,s}(e,t,n):jE(e,t,n),o&&(s+="\n      }\n    "),s}Ph.exports=IE,Ph.exports.default=IE,Ph.exports.build=IE,Ph.exports.validLargeArrayMechanisms=SE,Ph.exports.restore=function({code:e,validator:t,serializer:n}){return Function.call(null,"validator","serializer",e).call(null,t,n)};var $E,UE,HE=Ph.exports,GE={exports:{}},qE={exports:{}},zE={exports:{}},VE={},YE={},KE={};Object.defineProperty(KE,"__esModule",{value:!0}),KE.checkMetadata=void 0;const QE=Wh,WE={keyword:"metadata",schemaType:"object",code(e){JE(e);const{gen:t,schema:n,it:r}=e;if((0,QE.alwaysValidSchema)(r,n))return;const s=t.name("valid");e.subschema({keyword:"metadata",jtdMetadata:!0},s),e.ok(s)}};function JE({it:e,keyword:t},n){if(e.jtdMetadata!==n)throw Error(`JTD: "${t}" cannot be used in this schema location`)}KE.checkMetadata=JE,KE.default=WE,Object.defineProperty(YE,"__esModule",{value:!0}),YE.hasRef=void 0;const XE=_m,ZE=Qh(),e_=Em(),t_=uf,n_=qm,r_=KE,s_={keyword:"ref",schemaType:"string",code(e){(0,r_.checkMetadata)(e);const{gen:t,data:n,schema:r,parentSchema:s,it:i}=e,{schemaEnv:{root:o}}=i,a=t.name("valid");function c(){var n;const s=null===(n=o.schema.definitions)||void 0===n?void 0:n[r];if(!s)throw new e_.default(i.opts.uriResolver,"",r,"No definition "+r);i_(s)||!i.opts.inlineRefs?function(n){const s=XE.compileSchema.call(i.self,new XE.SchemaEnv({schema:n,root:o,schemaPath:"/definitions/"+r})),c=(0,n_.getValidate)(e,s),l=t.const("_errs",t_.default.errors);(0,n_.callRef)(e,c,s,s.$async),t.assign(a,ZE._`${l} === ${t_.default.errors}`)}(s):function(n){const s=t.scopeValue("schema",!0===i.opts.code.source?{ref:n,code:(0,ZE.stringify)(n)}:{ref:n});e.subschema({schema:n,dataTypes:[],schemaPath:ZE.nil,topSchemaRef:s,errSchemaPath:"/definitions/"+r},a)}(s)}s.nullable?(t.var(a,ZE._`${n} === null`),t.if((0,ZE.not)(a),c)):(t.var(a,!1),c()),e.ok(a)}};function i_(e){for(const t in e){let n;if("ref"===t||"object"==typeof(n=e[t])&&i_(n))return!0}return!1}YE.hasRef=i_,YE.default=s_;var o_={},a_={};Object.defineProperty(a_,"__esModule",{value:!0});const c_=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,l_=/^(\d\d):(\d\d):(\d\d)(?:\.\d+)?(?:z|([+-]\d\d)(?::?(\d\d))?)$/i,u_=[0,31,28,31,30,31,30,31,31,30,31,30,31];function p_(e,t){const n=e.split(/t|\s/i);return 2===n.length&&d_(n[0])&&function(e){const t=l_.exec(e);if(!t)return!1;const n=+t[1],r=+t[2],s=+t[3];return 23>=n&&59>=r&&59>=s||n-+(t[4]||0)==23&&r-+(t[5]||0)==59&&60===s}(n[1])||t&&1===n.length&&d_(n[0])}function d_(e){const t=c_.exec(e);if(!t)return!1;const n=+t[1],r=+t[2],s=+t[3];return!(1>r||r>12||1>s||s>u_[r]&&(2!==r||29!==s||(n%100==0?n%400!=0:n%4!=0)))}a_.default=p_,p_.code='require("ajv/dist/runtime/timestamp").default';var h_={};Object.defineProperty(h_,"__esModule",{value:!0}),h_.typeErrorParams=h_.typeErrorMessage=h_.typeError=void 0;const f_=Qh();function m_({parentSchema:e},t){return(null==e?void 0:e.nullable)?`must be ${t} or null`:"must be "+t}function g_({parentSchema:e},t){return f_._`{type: ${t}, nullable: ${!!(null==e?void 0:e.nullable)}}`}h_.typeError=function(e){return{message:t=>m_(t,e),params:t=>g_(t,e)}},h_.typeErrorMessage=m_,h_.typeErrorParams=g_,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.intRange=void 0;const t=Qh(),n=a_,r=Wh,s=KE,i=h_;e.intRange={int8:[-128,127,3],uint8:[0,255,3],int16:[-32768,32767,5],uint16:[0,65535,5],int32:[-2147483648,2147483647,10],uint32:[0,4294967295,10]};const o={keyword:"type",schemaType:"string",error:{message:e=>(0,i.typeErrorMessage)(e,e.schema),params:e=>(0,i.typeErrorParams)(e,e.schema)},code(i){(0,s.checkMetadata)(i);const{data:o,schema:a,parentSchema:c,it:l}=i;let u;switch(a){case"boolean":case"string":u=t._`typeof ${o} == ${a}`;break;case"timestamp":u=function(e){const{gen:s,data:i,it:o}=e,{timestamp:a,allowDate:c}=o.opts;if("date"===a)return t._`${i} instanceof Date `;const l=(0,r.useFunc)(s,n.default),u=c?t._`, true`:t.nil,p=t._`typeof ${i} == "string" && ${l}(${i}${u})`;return"string"===a?p:(0,t.or)(t._`${i} instanceof Date`,p)}(i);break;case"float32":case"float64":u=t._`typeof ${o} == "number"`;break;default:{const n=a;if(u=t._`typeof ${o} == "number" && isFinite(${o}) && !(${o} % 1)`,l.opts.int32range||"int32"!==n&&"uint32"!==n){const[r,s]=e.intRange[n];u=t._`${u} && ${o} >= ${r} && ${o} <= ${s}`}else"uint32"===n&&(u=t._`${u} && ${o} >= 0`)}}i.pass(c.nullable?(0,t.or)(t._`${o} === null`,u):u)}};e.default=o}(o_);var y_={},v_={};Object.defineProperty(v_,"__esModule",{value:!0}),v_.checkNullableObject=v_.checkNullable=void 0;const b_=Qh();function E_({gen:e,data:t,parentSchema:n},r=b_.nil){const s=e.name("valid");return n.nullable?(e.let(s,b_._`${t} === null`),r=(0,b_.not)(s)):e.let(s,!1),[s,r]}v_.checkNullable=E_,v_.checkNullableObject=function(e,t){const[n,r]=E_(e,t);return[n,b_._`${r} && typeof ${e.data} == "object" && !Array.isArray(${e.data})`]},Object.defineProperty(y_,"__esModule",{value:!0});const __=Qh(),A_=KE,S_=v_,T_={keyword:"enum",schemaType:"array",error:{message:"must be equal to one of the allowed values",params:({schemaCode:e})=>__._`{allowedValues: ${e}}`},code(e){(0,A_.checkMetadata)(e);const{gen:t,data:n,schema:r,schemaValue:s,parentSchema:i,it:o}=e;if(0===r.length)throw Error("enum must have non-empty array");if(r.length!==new Set(r).size)throw Error("enum items must be unique");let a;const c=__._`typeof ${n} == "string"`;if(o.opts.loopEnum>r.length){if(!Array.isArray(r))throw Error("ajv implementation error");a=(0,__.and)(c,(0,__.or)(...r.map((e=>__._`${n} === ${e}`)))),i.nullable&&(a=(0,__.or)(__._`${n} === null`,a))}else{let r;[a,r]=(0,S_.checkNullable)(e,c),t.if(r,(function(){t.forOf("v",s,(e=>t.if(__._`${a} = ${n} === ${e}`,(()=>t.break()))))}))}e.pass(a)}};y_.default=T_;var w_={};Object.defineProperty(w_,"__esModule",{value:!0});const x_=Wh,k_=Bf,C_=Qh(),I_=KE,R_=v_,O_={keyword:"elements",schemaType:"object",error:(0,h_.typeError)("array"),code(e){(0,I_.checkMetadata)(e);const{gen:t,data:n,schema:r,it:s}=e;if((0,x_.alwaysValidSchema)(s,r))return;const[i]=(0,R_.checkNullable)(e);t.if((0,C_.not)(i),(()=>t.if(C_._`Array.isArray(${n})`,(()=>t.assign(i,(0,k_.validateArray)(e))),(()=>e.error())))),e.ok(i)}};w_.default=O_;var N_={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateProperties=e.error=void 0;const t=Bf,n=Wh,r=Qh(),s=KE,i=v_,o=h_;var a;!function(e){e.Additional="additional",e.Missing="missing"}(a||(a={})),e.error={message:e=>{const{params:t}=e;return t.propError?t.propError===a.Additional?"must NOT have additional properties":`must have property '${t.missingProperty}'`:(0,o.typeErrorMessage)(e,"object")},params:e=>{const{params:t}=e;return t.propError?t.propError===a.Additional?r._`{error: ${t.propError}, additionalProperty: ${t.additionalProperty}}`:r._`{error: ${t.propError}, missingProperty: ${t.missingProperty}}`:(0,o.typeErrorParams)(e,"object")}};const c={keyword:"properties",schemaType:"object",error:e.error,code:l};function l(e){(0,s.checkMetadata)(e);const{gen:o,data:c,parentSchema:l,it:u}=e,{additionalProperties:p,nullable:d}=l;if(u.jtdDiscriminator&&d)throw Error("JTD: nullable inside discriminator mapping");if(function(){const e=l.properties,t=l.optionalProperties;if(!e||!t)return!1;for(const n in e)if({}.hasOwnProperty.call(t,n))return!0;return!1}())throw Error("JTD: properties and optionalProperties have common members");const[h,f]=b("properties"),[m,g]=b("optionalProperties");if(0===f.length&&0===g.length&&p)return;const[y,v]=void 0===u.jtdDiscriminator?(0,i.checkNullableObject)(e,c):[o.let("valid",!1),!0];function b(e){const r=l[e],s=r?(0,t.allSchemaProperties)(r):[];if(u.jtdDiscriminator&&s.some((e=>e===u.jtdDiscriminator)))throw Error("JTD: discriminator tag used in "+e);const i=s.filter((e=>!(0,n.alwaysValidSchema)(u,r[e])));return[s,i]}function E(n,r,s){const i=o.var("valid");for(const s of n)o.if((0,t.propertyInData)(o,c,s,u.opts.ownProperties),(()=>_(s,r,i)),(()=>l(s))),e.ok(i);function l(t){s?(o.assign(i,!1),e.error(!1,{propError:a.Missing,missingProperty:t},{schemaPath:t})):o.assign(i,!0)}}function _(t,n,r){e.subschema({keyword:n,schemaProp:t,dataProp:t},r)}function A(e,s,i,a){let c;if(s.length>8){const s=(0,n.schemaRefOrVal)(u,l[i],i);c=(0,r.not)((0,t.isOwnProperty)(o,s,e)),void 0!==a&&(c=(0,r.and)(c,r._`${e} !== ${a}`))}else if(s.length||void 0!==a){const t=void 0===a?s:[a].concat(s);c=(0,r.and)(...t.map((t=>r._`${e} !== ${t}`)))}else c=!0;return c}o.if(v,(()=>o.assign(y,!0).block((()=>{E(f,"properties",!0),E(g,"optionalProperties"),p||o.forIn("key",c,(t=>{const n=A(t,h,"properties",u.jtdDiscriminator),s=A(t,m,"optionalProperties"),i=!0===n?s:!0===s?n:(0,r.and)(n,s);o.if(i,(()=>{u.opts.removeAdditional?o.code(r._`delete ${c}[${t}]`):(e.error(!1,{propError:a.Additional,additionalProperty:t},{instancePath:t,parentSchema:!0}),u.opts.allErrors||o.break())}))}))})))),e.pass(y)}e.validateProperties=l,e.default=c}(N_);var D_={};Object.defineProperty(D_,"__esModule",{value:!0});const P_=N_;D_.default={keyword:"optionalProperties",schemaType:"object",error:P_.error,code(e){e.parentSchema.properties||(0,P_.validateProperties)(e)}};var L_={};Object.defineProperty(L_,"__esModule",{value:!0});const M_=Qh(),B_=KE,j_=v_,F_=h_,$_=jv,U_={message:e=>{const{schema:t,params:n}=e;return n.discrError?n.discrError===$_.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in mapping`:(0,F_.typeErrorMessage)(e,"object")},params:e=>{const{schema:t,params:n}=e;return n.discrError?M_._`{error: ${n.discrError}, tag: ${t}, tagValue: ${n.tag}}`:(0,F_.typeErrorParams)(e,"object")}},H_={keyword:"discriminator",schemaType:"string",implements:["mapping"],error:U_,code(e){(0,B_.checkMetadata)(e);const{gen:t,data:n,schema:r,parentSchema:s}=e,[i,o]=(0,j_.checkNullableObject)(e,n);function a(n){const s=t.name("valid");return e.subschema({keyword:"mapping",schemaProp:n,jtdDiscriminator:r},s),s}t.if(o),function(){const o=t.const("tag",M_._`${n}${(0,M_.getProperty)(r)}`);t.if(M_._`${o} === undefined`),e.error(!1,{discrError:$_.DiscrError.Tag,tag:o}),t.elseIf(M_._`typeof ${o} == "string"`),function(n){t.if(!1);for(const e in s.mapping)t.elseIf(M_._`${n} === ${e}`),t.assign(i,a(e));t.else(),e.error(!1,{discrError:$_.DiscrError.Mapping,tag:n},{instancePath:r,schemaPath:"mapping",parentSchema:!0}),t.endIf()}(o),t.else(),e.error(!1,{discrError:$_.DiscrError.Tag,tag:o},{instancePath:r}),t.endIf()}(),t.elseIf((0,M_.not)(i)),e.error(),t.endIf(),e.ok(i)}};L_.default=H_;var G_={};Object.defineProperty(G_,"__esModule",{value:!0});const q_=Wh,z_=Qh(),V_=KE,Y_=v_,K_={keyword:"values",schemaType:"object",error:(0,h_.typeError)("object"),code(e){(0,V_.checkMetadata)(e);const{gen:t,data:n,schema:r,it:s}=e,[i,o]=(0,Y_.checkNullableObject)(e,n);(0,q_.alwaysValidSchema)(s,r)?t.if((0,z_.not)((0,z_.or)(o,i)),(()=>e.error())):(t.if(o),t.assign(i,function(){const r=t.name("valid");if(s.allErrors){const e=t.let("valid",!0);return i((()=>t.assign(e,!1))),e}return t.var(r,!0),i((()=>t.break())),r;function i(s){t.forIn("key",n,(n=>{e.subschema({keyword:"values",dataProp:n,dataPropType:q_.Type.Str},r),t.if((0,z_.not)(r),s)}))}}()),t.elseIf((0,z_.not)(i)),e.error(),t.endIf()),e.ok(i)}};G_.default=K_;var Q_={};Object.defineProperty(Q_,"__esModule",{value:!0}),Q_.default={keyword:"union",schemaType:"array",trackErrors:!0,code:Bf.validateUnion,error:{message:"must match a schema in union"}},Object.defineProperty(VE,"__esModule",{value:!0}),VE.default=["definitions",YE.default,o_.default,y_.default,w_.default,N_.default,D_.default,L_.default,G_.default,Q_.default,KE.default,{keyword:"additionalProperties",schemaType:"boolean"},{keyword:"nullable",schemaType:"boolean"}];var W_={};Object.defineProperty(W_,"__esModule",{value:!0});const J_=e=>{const t={nullable:{type:"boolean"},metadata:{optionalProperties:{union:{elements:{ref:"schema"}}},additionalProperties:!0}};return e&&(t.definitions={values:{ref:"schema"}}),t},X_=e=>({optionalProperties:J_(e)}),Z_=e=>({properties:{ref:{type:"string"}},optionalProperties:J_(e)}),eA=e=>({properties:{type:{enum:["boolean","timestamp","string","float32","float64","int8","uint8","int16","uint16","int32","uint32"]}},optionalProperties:J_(e)}),tA=e=>({properties:{enum:{elements:{type:"string"}}},optionalProperties:J_(e)}),nA=e=>({properties:{elements:{ref:"schema"}},optionalProperties:J_(e)}),rA=e=>({properties:{properties:{values:{ref:"schema"}}},optionalProperties:{optionalProperties:{values:{ref:"schema"}},additionalProperties:{type:"boolean"},...J_(e)}}),sA=e=>({properties:{optionalProperties:{values:{ref:"schema"}}},optionalProperties:{additionalProperties:{type:"boolean"},...J_(e)}}),iA=e=>({properties:{discriminator:{type:"string"},mapping:{values:{metadata:{union:[rA(!1),sA(!1)]}}}},optionalProperties:J_(e)}),oA=e=>({properties:{values:{ref:"schema"}},optionalProperties:J_(e)}),aA=e=>({metadata:{union:[X_,Z_,eA,tA,nA,rA,sA,iA,oA].map((t=>t(e)))}}),cA={definitions:{schema:aA(!1)},...aA(!0)};W_.default=cA;var lA={},uA={};Object.defineProperty(uA,"__esModule",{value:!0}),uA.jtdForms=void 0,uA.jtdForms=["elements","values","discriminator","properties","optionalProperties","enum","type","ref"];var pA={};Object.defineProperty(pA,"__esModule",{value:!0});const dA=/[\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,hA={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function fA(e){return dA.lastIndex=0,'"'+(dA.test(e)?e.replace(dA,(e=>{const t=hA[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})):e)+'"'}pA.default=fA,fA.code='require("ajv/dist/runtime/quote").default',Object.defineProperty(lA,"__esModule",{value:!0});const mA=uA,gA=_m,yA=Qh(),vA=Em(),bA=uf,EA=Bf,_A=YE,AA=Wh,SA=pA,TA={elements:function(e){const{gen:t,schema:n,data:r}=e;t.add(bA.default.json,yA.str`[`);const s=t.let("first",!0);t.forOf("el",r,(t=>{NA(e,s),xA({...e,schema:n.elements,data:t})})),t.add(bA.default.json,yA.str`]`)},values:function(e){const{gen:t,schema:n,data:r}=e;t.add(bA.default.json,yA.str`{`);const s=t.let("first",!0);t.forIn("key",r,(t=>kA(e,t,n.values,s))),t.add(bA.default.json,yA.str`}`)},discriminator:function(e){const{gen:t,schema:n,data:r}=e,{discriminator:s}=n;t.add(bA.default.json,yA.str`{${JSON.stringify(s)}:`);const i=t.const("tag",yA._`${r}${(0,yA.getProperty)(s)}`);RA({...e,data:i}),t.if(!1);for(const r in n.mapping){t.elseIf(yA._`${i} === ${r}`);const o=n.mapping[r];IA({...e,schema:o},s)}t.endIf(),t.add(bA.default.json,yA.str`}`)},properties:CA,optionalProperties:CA,enum:RA,type:function(e){const{gen:t,schema:n,data:r}=e;switch(n.type){case"boolean":t.add(bA.default.json,yA._`${r} ? "true" : "false"`);break;case"string":RA(e);break;case"timestamp":t.if(yA._`${r} instanceof Date`,(()=>t.add(bA.default.json,yA._`'"' + ${r}.toISOString() + '"'`)),(()=>RA(e)));break;default:!function({gen:e,data:t}){e.add(bA.default.json,yA._`"" + ${t}`)}(e)}},ref:function(e){const{gen:t,self:n,data:r,definitions:s,schema:i,schemaEnv:o}=e,{ref:a}=i,c=s[a];if(!c)throw new vA.default(n.opts.uriResolver,"",a,"No definition "+a);if(!(0,_A.hasRef)(c))return xA({...e,schema:c});const{root:l}=o,u=wA.call(n,new gA.SchemaEnv({schema:c,root:l}),s);t.add(bA.default.json,yA._`${function(e,t){return t.serialize?e.scopeValue("serialize",{ref:t.serialize}):yA._`${e.scopeValue("wrapper",{ref:t})}.serialize`}(t,u)}(${r})`)}};function wA(e,t){const n=gA.getCompilingSchema.call(this,e);if(n)return n;const{es5:r,lines:s}=this.opts.code,{ownProperties:i}=this.opts,o=new yA.CodeGen(this.scope,{es5:r,lines:s,ownProperties:i}),a=o.scopeName("serialize"),c={self:this,gen:o,schema:e.schema,schemaEnv:e,definitions:t,data:bA.default.data};let l;try{this._compilations.add(e),e.serializeName=a,o.func(a,bA.default.data,!1,(()=>{o.let(bA.default.json,yA.str``),xA(c),o.return(bA.default.json)})),o.optimize(this.opts.code.optimize);const t=""+o;l=`${o.scopeRefs(bA.default.scope)}return ${t}`;const n=Function(""+bA.default.scope,l)(this.scope.get());this.scope.value(a,{ref:n}),e.serialize=n}catch(t){throw l&&this.logger.error("Error compiling serializer, function code:",l),delete e.serialize,delete e.serializeName,t}finally{this._compilations.delete(e)}return e}function xA(e){let t;for(const n of mA.jtdForms)if(n in e.schema){t=n;break}!function(e,t){const{gen:n,schema:r,data:s}=e;if(!r.nullable)return t(e);n.if(yA._`${s} === undefined || ${s} === null`,(()=>n.add(bA.default.json,yA._`"null"`)),(()=>t(e)))}(e,t?TA[t]:OA)}function kA(e,t,n,r){const{gen:s,data:i}=e;NA(e,r),RA({...e,data:t}),s.add(bA.default.json,yA.str`:`);const o=s.const("value",yA._`${i}${(0,yA.getProperty)(t)}`);xA({...e,schema:n,data:o})}function CA(e){const{gen:t}=e;t.add(bA.default.json,yA.str`{`),IA(e),t.add(bA.default.json,yA.str`}`)}function IA(e,t){const{gen:n,schema:r,data:s}=e,{properties:i,optionalProperties:o}=r,a=d(i),c=d(o),l=function(e){if(t&&e.push(t),new Set(e).size!==e.length)throw Error("JTD: properties/optionalProperties/disciminator overlap");return e}(a.concat(c));let u,p=!t;for(const e of a)p?p=!1:n.add(bA.default.json,yA.str`,`),f(e,i[e],h(e));p&&(u=n.let("first",!0));for(const t of c){const r=h(t);n.if((0,yA.and)(yA._`${r} !== undefined`,(0,EA.isOwnProperty)(n,s,t)),(()=>{NA(e,u),f(t,o[t],r)}))}function d(e){return e?Object.keys(e):[]}function h(e){return n.const("value",yA._`${s}${(0,yA.getProperty)(e)}`)}function f(t,r,s){n.add(bA.default.json,yA.str`${JSON.stringify(t)}:`),xA({...e,schema:r,data:s})}r.additionalProperties&&n.forIn("key",s,(t=>n.if(function(e,t){return!t.length||(0,yA.and)(...t.map((t=>yA._`${e} !== ${t}`)))}(t,l),(()=>kA(e,t,{},u)))))}function RA({gen:e,data:t}){e.add(bA.default.json,yA._`${(0,AA.useFunc)(e,SA.default)}(${t})`)}function OA({gen:e,data:t}){e.add(bA.default.json,yA._`JSON.stringify(${t})`)}function NA({gen:e},t){t?e.if(t,(()=>e.assign(t,!1)),(()=>e.add(bA.default.json,yA.str`,`))):e.add(bA.default.json,yA.str`,`)}lA.default=wA;var DA={},PA={};Object.defineProperty(PA,"__esModule",{value:!0}),PA.parseJsonString=PA.parseJsonNumber=PA.parseJson=void 0;const LA=/position\s(\d+)(?: \(line \d+ column \d+\))?$/;function MA(e,t){let n,r;MA.message=void 0,t&&(e=e.slice(t));try{return MA.position=t+e.length,JSON.parse(e)}catch(s){if(r=LA.exec(s.message),!r)return void(MA.message="unexpected end");n=+r[1];const i=e[n];e=e.slice(0,n),MA.position=t+n;try{return JSON.parse(e)}catch(e){return void(MA.message="unexpected token "+i)}}}function BA(e,t,n){let r,s="";if(BA.message=void 0,"-"===e[t]&&(s+="-",t++),"0"===e[t])s+="0",t++;else if(!i(n))return void o();if(n)return BA.position=t,+s;if("."!==e[t]||(s+=".",t++,i())){if(r=e[t],"e"!==r&&"E"!==r||(s+="e",t++,r=e[t],("+"===r||"-"===r)&&(s+=r,t++),i()))return BA.position=t,+s;o()}else o();function i(n){let i=!1;for(;r=e[t],r>="0"&&"9">=r&&(void 0===n||n-- >0);)i=!0,s+=r,t++;return i}function o(){BA.position=t,BA.message=e.length>t?"unexpected token "+e[t]:"unexpected end"}}PA.parseJson=MA,MA.message=void 0,MA.position=0,MA.code='require("ajv/dist/runtime/parseJson").parseJson',PA.parseJsonNumber=BA,BA.message=void 0,BA.position=0,BA.code='require("ajv/dist/runtime/parseJson").parseJsonNumber';const jA={b:"\b",f:"\f",n:"\n",r:"\r",t:"\t",'"':'"',"/":"/","\\":"\\"};function FA(e,t){let n,r="";for(FA.message=void 0;n=e[t++],'"'!==n;)if("\\"===n)if(n=e[t],n in jA)r+=jA[n],t++;else{if("u"!==n)return void s("unexpected token "+n);{t++;let i=4,o=0;for(;i--;){if(o<<=4,n=e[t],void 0===n)return void s("unexpected end");if(n=n.toLowerCase(),"a">n||n>"f"){if("0">n||n>"9")return void s("unexpected token "+n);o+=n.charCodeAt(0)-48}else o+=n.charCodeAt(0)-97+10;t++}r+=String.fromCharCode(o)}}else{if(void 0===n)return void s("unexpected end");if(32>n.charCodeAt(0))return void s("unexpected token "+n);r+=n}return FA.position=t,r;function s(e){FA.position=t,FA.message=e}}PA.parseJsonString=FA,FA.message=void 0,FA.position=0,FA.code='require("ajv/dist/runtime/parseJson").parseJsonString',Object.defineProperty(DA,"__esModule",{value:!0});const $A=uA,UA=_m,HA=Qh(),GA=Em(),qA=uf,zA=Bf,VA=YE,YA=o_,KA=PA,QA=Wh,WA=a_,JA={elements:function(e){const{gen:t,schema:n,data:r}=e;fS(e,"[");const s=t.let("i",0);t.assign(r,HA._`[]`),nS(e,"]",(()=>{const i=t.let("el");eS({...e,schema:n.elements,data:i}),t.assign(HA._`${r}[${s}++]`,i)}))},values:function(e){const{gen:t,schema:n,data:r}=e;fS(e,"{"),t.assign(r,HA._`{}`),nS(e,"}",(()=>function(e,t){const{gen:n}=e,r=n.let("key");cS({...e,data:r}),fS(e,":"),aS(e,r,t)}(e,n.values)))},discriminator:function(e){const{gen:t,data:n,schema:r}=e,{discriminator:s,mapping:i}=r;fS(e,"{"),t.assign(n,HA._`{}`);const o=t.const("pos",qA.default.jsonPos),a=t.let("value"),c=t.let("tag");rS(e,"}",(()=>{const r=t.let("key");cS({...e,data:r}),fS(e,":"),t.if(HA._`${r} === ${s}`,(()=>{cS({...e,data:c}),t.assign(HA._`${n}[${r}]`,c),t.break()}),(()=>pS({...e,data:a})))})),t.assign(qA.default.jsonPos,o),t.if(HA._`${c} === undefined`),bS(e,HA.str`discriminator tag not found`);for(const n in i)t.elseIf(HA._`${c} === ${n}`),iS({...e,schema:i[n]},s);t.else(),bS(e,HA.str`discriminator value not in schema`),t.endIf()},properties:sS,optionalProperties:sS,enum:function(e){const{gen:t,data:n,schema:r}=e,s=r.enum;fS(e,'"'),t.if(!1);for(const e of s){const r=JSON.stringify(e).slice(1);t.elseIf(HA._`${yS(r.length)} === ${r}`),t.assign(n,HA.str`${e}`),t.add(qA.default.jsonPos,r.length)}t.else(),vS(e),t.endIf()},type:function(e){const{gen:t,schema:n,data:r,self:s}=e;switch(n.type){case"boolean":tS(e);break;case"string":cS(e);break;case"timestamp":{cS(e);const n=(0,QA.useFunc)(t,WA.default),{allowDate:i,parseDate:o}=s.opts,a=i?HA._`!${n}(${r}, true)`:HA._`!${n}(${r})`,c=o?(0,HA.or)(a,HA._`(${r} = new Date(${r}), false)`,HA._`isNaN(${r}.valueOf())`):a;t.if(c,(()=>bS(e,HA.str`invalid timestamp`)));break}case"float32":case"float64":lS(e);break;default:{const i=n.type;if(s.opts.int32range||"int32"!==i&&"uint32"!==i){const[n,s,o]=YA.intRange[i];lS(e,o),t.if(HA._`${r} < ${n} || ${r} > ${s}`,(()=>bS(e,HA.str`integer out of range`)))}else lS(e,16),"uint32"===i&&t.if(HA._`${r} < 0`,(()=>bS(e,HA.str`integer out of range`)))}}},ref:function(e){const{gen:t,self:n,definitions:r,schema:s,schemaEnv:i}=e,{ref:o}=s,a=r[o];if(!a)throw new GA.default(n.opts.uriResolver,"",o,"No definition "+o);if(!(0,VA.hasRef)(a))return eS({...e,schema:a});const{root:c}=i;hS(e,function(e,t){return t.parse?e.scopeValue("parse",{ref:t.parse}):HA._`${e.scopeValue("wrapper",{ref:t})}.parse`}(t,XA.call(n,new UA.SchemaEnv({schema:a,root:c}),r)),!0)}};function XA(e,t){const n=UA.getCompilingSchema.call(this,e);if(n)return n;const{es5:r,lines:s}=this.opts.code,{ownProperties:i}=this.opts,o=new HA.CodeGen(this.scope,{es5:r,lines:s,ownProperties:i}),a=o.scopeName("parse"),c={self:this,gen:o,schema:e.schema,schemaEnv:e,definitions:t,data:qA.default.data,parseName:a,char:o.name("c")};let l;try{this._compilations.add(e),e.parseName=a,function(e){const{gen:t,parseName:n,char:r}=e;t.func(n,HA._`${qA.default.json}, ${qA.default.jsonPos}, ${qA.default.jsonPart}`,!1,(()=>{t.let(qA.default.data),t.let(r),t.assign(HA._`${n}.message`,ZA),t.assign(HA._`${n}.position`,ZA),t.assign(qA.default.jsonPos,HA._`${qA.default.jsonPos} || 0`),t.const(qA.default.jsonLen,HA._`${qA.default.json}.length`),eS(e),gS(e),t.if(qA.default.jsonPart,(()=>{t.assign(HA._`${n}.position`,qA.default.jsonPos),t.return(qA.default.data)})),t.if(HA._`${qA.default.jsonPos} === ${qA.default.jsonLen}`,(()=>t.return(qA.default.data))),vS(e)}))}(c),o.optimize(this.opts.code.optimize);const t=""+o;l=`${o.scopeRefs(qA.default.scope)}return ${t}`;const n=Function(""+qA.default.scope,l)(this.scope.get());this.scope.value(a,{ref:n}),e.parse=n}catch(t){throw l&&this.logger.error("Error compiling parser, function code:",l),delete e.parse,delete e.parseName,t}finally{this._compilations.delete(e)}return e}DA.default=XA;const ZA=HA._`undefined`;function eS(e){let t;for(const n of $A.jtdForms)if(n in e.schema){t=n;break}t?function(e,t){const{gen:n,schema:r,data:s}=e;if(!r.nullable)return t(e);mS(e,"null",t,(()=>n.assign(s,null)))}(e,JA[t]):pS(e)}const tS=uS(!0,uS(!1,vS));function nS(e,t,n){rS(e,t,n),fS(e,t)}function rS(e,t,n){const{gen:r}=e;function s(){mS(e,t,(()=>{}),vS)}r.for(HA._`;${qA.default.jsonPos}<${qA.default.jsonLen} && ${yS(1)}!==${t};`,(()=>{n(),mS(e,",",(()=>r.break()),s)}))}function sS(e){const{gen:t,data:n}=e;fS(e,"{"),t.assign(n,HA._`{}`),iS(e)}function iS(e,t){const{gen:n,schema:r,data:s}=e,{properties:i,optionalProperties:o,additionalProperties:a}=r;if(nS(e,"}",(()=>{const r=n.let("key");if(cS({...e,data:r}),fS(e,":"),n.if(!1),oS(e,r,i),oS(e,r,o),t){n.elseIf(HA._`${r} === ${t}`);const s=n.let("tag");cS({...e,data:s})}n.else(),a?pS({...e,data:HA._`${s}[${r}]`}):bS(e,HA.str`property ${r} not allowed`),n.endIf()})),i){const t=(0,zA.hasPropFunc)(n),r=(0,HA.and)(...Object.keys(i).map((e=>HA._`${t}.call(${s}, ${e})`)));n.if((0,HA.not)(r),(()=>bS(e,HA.str`missing required properties`)))}}function oS(e,t,n={}){const{gen:r}=e;for(const s in n)r.elseIf(HA._`${t} === ${s}`),aS(e,t,n[s])}function aS(e,t,n){eS({...e,schema:n,data:HA._`${e.data}[${t}]`})}function cS(e){fS(e,'"'),dS(e,KA.parseJsonString)}function lS(e,t){const{gen:n}=e;gS(e),n.if(HA._`"-0123456789".indexOf(${yS(1)}) < 0`,(()=>vS(e)),(()=>dS(e,KA.parseJsonNumber,t)))}function uS(e,t){return n=>{const{gen:r,data:s}=n;mS(n,""+e,(()=>t(n)),(()=>r.assign(s,e)))}}function pS(e){dS(e,KA.parseJson)}function dS(e,t,n){hS(e,(0,QA.useFunc)(e.gen,t),n)}function hS(e,t,n){const{gen:r,data:s}=e;r.assign(s,HA._`${t}(${qA.default.json}, ${qA.default.jsonPos}${n?HA._`, ${n}`:HA.nil})`),r.assign(qA.default.jsonPos,HA._`${t}.position`),r.if(HA._`${s} === undefined`,(()=>bS(e,HA._`${t}.message`)))}function fS(e,t){mS(e,t,vS)}function mS(e,t,n,r){const{gen:s}=e,i=t.length;gS(e),s.if(HA._`${yS(i)} === ${t}`,(()=>{s.add(qA.default.jsonPos,i),null==r||r(e)}),(()=>n(e)))}function gS({gen:e,char:t}){e.code(HA._`while((${t}=${qA.default.json}[${qA.default.jsonPos}],${t}===" "||${t}==="\\n"||${t}==="\\r"||${t}==="\\t"))${qA.default.jsonPos}++;`)}function yS(e){return 1===e?HA._`${qA.default.json}[${qA.default.jsonPos}]`:HA._`${qA.default.json}.slice(${qA.default.jsonPos}, ${qA.default.jsonPos}+${e})`}function vS(e){bS(e,HA._`"unexpected token " + ${qA.default.json}[${qA.default.jsonPos}]`)}function bS({gen:e,parseName:t},n){e.assign(HA._`${t}.message`,n),e.assign(HA._`${t}.position`,qA.default.jsonPos),e.return(ZA)}!function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=t.Ajv=void 0;const n=Uh,r=VE,s=W_,i=lA,o=DA,a="JTD-meta-schema";class c extends n.default{constructor(e={}){super({...e,jtd:!0})}_addVocabularies(){super._addVocabularies(),this.addVocabulary(r.default)}_addDefaultMetaSchema(){super._addDefaultMetaSchema(),this.opts.meta&&this.addMetaSchema(s.default,a,!1)}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(a)?a:void 0)}compileSerializer(e){const t=this._addSchema(e);return t.serialize||this._compileSerializer(t)}compileParser(e){const t=this._addSchema(e);return t.parse||this._compileParser(t)}_compileSerializer(e){if(i.default.call(this,e,e.schema.definitions||{}),!e.serialize)throw Error("ajv implementation error");return e.serialize}_compileParser(e){if(o.default.call(this,e,e.schema.definitions||{}),!e.parse)throw Error("ajv implementation error");return e.parse}}t.Ajv=c,e.exports=t=c,e.exports.Ajv=c,Object.defineProperty(t,"__esModule",{value:!0}),t.default=c;var l=fm();Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return l.KeywordCxt}});var u=Qh();Object.defineProperty(t,"_",{enumerable:!0,get:function(){return u._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return u.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return u.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return u.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return u.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return u.CodeGen}});var p=ym();Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return p.default}});var d=Em();Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return d.default}})}(zE,zE.exports);var ES,_S,AS,SS=zE.exports,TS=Object.freeze({coerceTypes:"array",useDefaults:!0,removeAdditional:!0,uriResolver:xb,addUsedSchema:!1,allErrors:!1}),wS={exports:{}},xS={},kS={};const CS=Vv.default,IS=SS,RS=TS;var OS=class{constructor(e,t){this.ajv="JTD"===t.mode?new IS(Object.assign({},RS,t.customOptions)):new CS(Object.assign({},RS,t.customOptions));let n=!0;if(t.plugins&&t.plugins.length>0)for(const e of t.plugins)Array.isArray(e)?(n=n&&"formatsPlugin"!==e[0].name,e[0](this.ajv,e[1])):(n=n&&"formatsPlugin"!==e.name,e(this.ajv));n&&(AS||(AS=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const n=(ES||(ES=1,function(e){function t(e,t){return{validate:e,compare:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.formatNames=e.fastFormats=e.fullFormats=void 0,e.fullFormats={date:t(s,i),time:t(a,c),"date-time":t((function(e){const t=e.split(l);return 2===t.length&&s(t[0])&&a(t[1],!0)}),u),duration:/^P(?!$)((\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?|(\d+W)?)$/,uri:function(e){return p.test(e)&&d.test(e)},"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,url:/^(?:https?|ftp):\/\/(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)(?:\.(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,regex:function(e){if(y.test(e))return!1;try{return RegExp(e),!0}catch(e){return!1}},uuid:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,"json-pointer":/^(?:\/(?:[^~/]|~0|~1)*)*$/,"json-pointer-uri-fragment":/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,byte:function(e){return h.lastIndex=0,h.test(e)},int32:{type:"number",validate:function(e){return Number.isInteger(e)&&m>=e&&e>=f}},int64:{type:"number",validate:function(e){return Number.isInteger(e)}},float:{type:"number",validate:g},double:{type:"number",validate:g},password:!0,binary:!0},e.fastFormats={...e.fullFormats,date:t(/^\d\d\d\d-[0-1]\d-[0-3]\d$/,i),time:t(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,c),"date-time":t(/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,u),uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i},e.formatNames=Object.keys(e.fullFormats);const n=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,r=[0,31,28,31,30,31,30,31,31,30,31,30,31];function s(e){const t=n.exec(e);if(!t)return!1;const s=+t[2],i=+t[3];return!(1>s||s>12||1>i||i>(2!==s||(o=+t[1],o%4!=0||o%100==0&&o%400!=0)?r[s]:29));var o}function i(e,t){if(e&&t)return e>t?1:t>e?-1:0}const o=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i;function a(e,t){const n=o.exec(e);if(!n)return!1;const r=+n[1],s=+n[2],i=+n[3];return!((r>23||s>59||i>59)&&(23!==r||59!==s||60!==i)||t&&""===n[5])}function c(e,t){if(!e||!t)return;const n=o.exec(e),r=o.exec(t);return n&&r?(e=n[1]+n[2]+n[3]+(n[4]||""))>(t=r[1]+r[2]+r[3]+(r[4]||""))?1:t>e?-1:0:void 0}const l=/t|\s/i;function u(e,t){if(!e||!t)return;const[n,r]=e.split(l),[s,o]=t.split(l),a=i(n,s);return void 0!==a?a||c(r,o):void 0}const p=/\/|:/,d=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,h=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/gm,f=-(2**31),m=2**31-1;function g(){return!0}const y=/[^\\]\\Z/}(xS)),xS),r=(_S||(_S=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.formatLimitDefinition=void 0;const t=Vv,n=Qh(),r=n.operators,s={formatMaximum:{okStr:"<=",ok:r.LTE,fail:r.GT},formatMinimum:{okStr:">=",ok:r.GTE,fail:r.LT},formatExclusiveMaximum:{okStr:"<",ok:r.LT,fail:r.GTE},formatExclusiveMinimum:{okStr:">",ok:r.GT,fail:r.LTE}},i={message:({keyword:e,schemaCode:t})=>n.str`should be ${s[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>n._`{comparison: ${s[e].okStr}, limit: ${t}}`};e.formatLimitDefinition={keyword:Object.keys(s),type:"string",schemaType:"string",$data:!0,error:i,code(e){const{gen:r,data:i,schemaCode:o,keyword:a,it:c}=e,{opts:l,self:u}=c;if(!l.validateFormats)return;const p=new t.KeywordCxt(c,u.RULES.all.format.definition,"format");function d(e){return n._`${e}.compare(${i}, ${o}) ${s[a].fail} 0`}p.$data?function(){const t=r.scopeValue("formats",{ref:u.formats,code:l.code.formats}),s=r.const("fmt",n._`${t}[${p.schemaCode}]`);e.fail$data(n.or(n._`typeof ${s} != "object"`,n._`${s} instanceof RegExp`,n._`typeof ${s}.compare != "function"`,d(s)))}():function(){const t=p.schema,s=u.formats[t];if(!s||!0===s)return;if("object"!=typeof s||s instanceof RegExp||"function"!=typeof s.compare)throw Error(`"${a}": format "${t}" does not define "compare" function`);const i=r.scopeValue("formats",{key:t,ref:s,code:l.code.formats?n._`${l.code.formats}${n.getProperty(t)}`:void 0});e.fail$data(d(i))}()},dependencies:["format"]},e.default=t=>(t.addKeyword(e.formatLimitDefinition),t)}(kS)),kS),s=Qh(),i=new s.Name("fullFormats"),o=new s.Name("fastFormats"),a=(e,t={keywords:!0})=>{if(Array.isArray(t))return c(e,t,n.fullFormats,i),e;const[s,a]="fast"===t.mode?[n.fastFormats,o]:[n.fullFormats,i];return c(e,t.formats||n.formatNames,s,a),t.keywords&&r.default(e),e};function c(e,t,n,r){var i,o;null!==(i=(o=e.opts.code).formats)&&void 0!==i||(o.formats=s._`require("ajv-formats/dist/formats").${r}`);for(const r of t)e.addFormat(r,n[r])}a.get=(e,t="full")=>{const r=("fast"===t?n.fastFormats:n.fullFormats)[e];if(!r)throw Error(`Unknown format "${e}"`);return r},e.exports=t=a,Object.defineProperty(t,"__esModule",{value:!0}),t.default=a}(wS,wS.exports)),wS.exports)(this.ajv),t.onCreate?.(this.ajv);const r=Object.values(e);for(const e of r)this.ajv.addSchema(e)}buildValidatorFunction({schema:e}){if(e.$id){const t=this.ajv.getSchema(e.$id);if(t)return t}return this.ajv.compile(e)}};const NS=SS,DS=TS;var PS=class{constructor(e,t){this.ajv=new NS(Object.assign({},DS,t))}buildSerializerFunction({schema:e}){return this.ajv.compileSerializer(e)}},LS={exports:{}};!function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const n=Kh,r=Vh;function s(e,t){if(!e.opts.code.source)throw Error("moduleCode: ajv instance must have code.source option");const{_n:s}=e.scope.opts;return"function"==typeof t?function(t){const n=null==t?void 0:t.validateName,r=o({},t);return e.opts.code.esm?`"use strict";${s}export const validate = ${n};${s}export default ${n};${s}${r}`:`"use strict";${s}module.exports = ${n};${s}module.exports.default = ${n};${s}${r}`}(t.source):void 0!==t?i(t,(function(t){const n=e.getSchema(t);if(!n)throw Error("moduleCode: no schema with id "+t);return n})):i(e.schemas,(t=>t.meta?void 0:e.compile(t.schema)));function i(t,n){var i;const a={};let c=r._`"use strict";`;for(const l in t){const u=n(t[l]);if(u){const t=o(a,u.source),n=e.opts.code.esm?r._`export const ${(0,r.getEsmExportName)(l)}`:r._`exports${(0,r.getProperty)(l)}`;c=r._`${c}${s}${n} = ${null===(i=u.source)||void 0===i?void 0:i.validateName};${s}${t}`}}return""+c}function o(t,i){if(!i)throw Error('moduleCode: function does not have "source" property');if(l(i.validateName)===n.UsedValueState.Completed)return r.nil;!function(e,n){const{prefix:r}=e;(t[r]=t[r]||new Map).set(e,n)}(i.validateName,n.UsedValueState.Started);const a=e.scope.scopeCode(i.scopeValues,t,(function(i){var a;const c=null===(a=i.value)||void 0===a?void 0:a.ref;if("validate"===i.prefix&&"function"==typeof c)return o(t,c.source);if(("root"===i.prefix||"wrapper"===i.prefix)&&"object"==typeof c){const{validate:a,validateName:u}=c;if(!u)throw Error("ajv internal error");const p=r._`${e.opts.code.es5?n.varKinds.var:n.varKinds.const} ${i} = {validate: ${u}};`;if(l(u)===n.UsedValueState.Started)return p;const d=o(t,null==a?void 0:a.source);return r._`${p}${s}${d}`}})),c=new r._Code(`${a}${s}${i.validateCode}`);return i.evaluated?r._`${c}${i.validateName}.evaluated = ${i.evaluated};${s}`:c;function l(e){var n;return null===(n=t[e.prefix])||void 0===n?void 0:n.get(e)}}}e.exports=t=s,Object.defineProperty(t,"__esModule",{value:!0}),t.default=s}(LS,LS.exports);var MS,BS,jS,FS=LS.exports;const{buildSchemas:$S}=mc,US=function e(){if(UE)return Dh.exports;UE=1;const t=HE;function n(){return function(e,t){const n=Object.assign({},t,{schema:e});return r.bind(null,n)}}function r(e,{schema:n}){return e.schema&&n.$id&&e.schema[n.$id]&&(e.schema={...e.schema},delete e.schema[n.$id]),t(n,e)}return Dh.exports=n,Dh.exports.default=n,Dh.exports.SerializerSelector=n,Dh.exports.StandaloneSerializer=function(){if($E)return GE.exports;$E=1;const t=e();function n(e={readMode:!0}){if(!0===e.readMode&&"function"!=typeof e.restoreFunction)throw Error("You must provide a function for the restoreFunction-option when readMode ON");if(!0!==e.readMode&&"function"!=typeof e.storeFunction)throw Error("You must provide a function for the storeFunction-option when readMode OFF");if(!0===e.readMode)return function(){return function(t){return e.restoreFunction(t)}};const n=t();return function(t,r={}){r.mode="standalone";const s=n(t,r);return function(t){const n=s(t);return e.storeFunction(t,n),Function(n)}}}return GE.exports=n,GE.exports.default=n,GE.exports}(),Dh.exports}(),HS=function e(){if(jS)return qE.exports;jS=1;const t=Symbol.for("fastify.ajv-compiler.reference"),n=OS,r=PS;function s(e){const s=new Map,o=new Map;return e&&!0===e.jtdSerializer?function(e,t){const n=i({},t);if(o.has(n))return o.get(n);const s=new r(e,t),a=s.buildSerializerFunction.bind(s);return o.set(n,a),a}:function(e,r){const o=i(e,r.customOptions);if(s.has(o))return s.get(o);const a=new n(e,r),c=a.buildValidatorFunction.bind(a);return s.set(o,c),void 0!==r.customOptions.code&&(c[t]=a),c}}function i(e,t){return`${JSON.stringify(e)}${JSON.stringify(t)}`}return qE.exports=s,qE.exports.default=s,qE.exports.AjvCompiler=s,qE.exports.AjvReference=t,qE.exports.StandaloneValidator=function(){if(BS)return MS;BS=1;const t=e(),n=FS.default;return MS=function(e={readMode:!0}){if(!0===e.readMode&&!e.restoreFunction)throw Error("You must provide a restoreFunction options when readMode ON");if(!0!==e.readMode&&!e.storeFunction)throw Error("You must provide a storeFunction options when readMode OFF");if(!0===e.readMode)return function(){return function(t){return e.restoreFunction(t)}};const r=t();return function(s,i={}){i.customOptions&&i.customOptions.code||(i.customOptions=Object.assign({},i.customOptions,{code:{source:!0}}));const o=r(s,i);return function(r){const s=o(r),i=n(o[t.AjvReference].ajv,s);return e.storeFunction(r,i),s}}}}(),qE.exports}();let GS=class{constructor(e,t){this.opts=t||e?.opts,this.addedSchemas=!1,this.compilersFactory=this.opts.compilersFactory,e?(this.schemaBucket=this.opts.bucket(e.getSchemas()),this.validatorCompiler=e.getValidatorCompiler(),this.serializerCompiler=e.getSerializerCompiler(),this.isCustomValidatorCompiler=e.isCustomValidatorCompiler,this.isCustomSerializerCompiler=e.isCustomSerializerCompiler,this.parent=e):(this.schemaBucket=this.opts.bucket(),this.isCustomValidatorCompiler=this.opts.isCustomValidatorCompiler||!1,this.isCustomSerializerCompiler=this.opts.isCustomSerializerCompiler||!1)}add(e){return this.addedSchemas=!0,this.schemaBucket.add(e)}getSchema(e){return this.schemaBucket.getSchema(e)}getSchemas(){return this.schemaBucket.getSchemas()}setValidatorCompiler(e){this.compilersFactory=Object.assign({},this.compilersFactory,{buildValidator:()=>e}),this.validatorCompiler=e,this.isCustomValidatorCompiler=!0}setSerializerCompiler(e){this.compilersFactory=Object.assign({},this.compilersFactory,{buildSerializer:()=>e}),this.serializerCompiler=e,this.isCustomSerializerCompiler=!0}getValidatorCompiler(){return this.validatorCompiler||this.parent&&this.parent.getValidatorCompiler()}getSerializerCompiler(){return this.serializerCompiler||this.parent&&this.parent.getSerializerCompiler()}getSerializerBuilder(){return this.compilersFactory.buildSerializer||this.parent&&this.parent.getSerializerBuilder()}getValidatorBuilder(){return this.compilersFactory.buildValidator||this.parent&&this.parent.getValidatorBuilder()}setupValidator(e){void 0!==this.validatorCompiler&&!this.addedSchemas||(this.validatorCompiler=this.getValidatorBuilder()(this.schemaBucket.getSchemas(),e.ajv))}setupSerializer(e){void 0!==this.serializerCompiler&&!this.addedSchemas||(this.serializerCompiler=this.getSerializerBuilder()(this.schemaBucket.getSchemas(),e.serializerOpts))}};GS.buildSchemaController=function(e,t){if(e)return new GS(e,t);const n=Object.assign({buildValidator:null,buildSerializer:null},t?.compilersFactory);return n.buildValidator||(n.buildValidator=HS()),n.buildSerializer||(n.buildSerializer=US()),new GS(void 0,{bucket:t&&t.bucket||$S,compilersFactory:n,isCustomValidatorCompiler:"function"==typeof t?.compilersFactory?.buildValidator,isCustomSerializerCompiler:"function"==typeof t?.compilersFactory?.buildValidator})};var qS=GS,zS={exports:{}};!function(e){const t=nd,n=y,r=Symbol.for("registered-plugin"),{kTestInternals:s}=Ze,{exist:i,existReply:o,existRequest:a}=ah,{FST_ERR_PLUGIN_VERSION_MISMATCH:c,FST_ERR_PLUGIN_NOT_PRESENT_IN_INSTANCE:l}=dt,{FSTWRN002:u}=ct;function p(e){return e[Symbol.for("plugin-meta")]}function d(e){const t=h(e);if(t)return t;const n=require.cache;if(n){const t=Object.keys(n);for(let r=0;t.length>r;r++){const s=t[r];if(n[s].exports===e)return s}}return e.name?e.name:null}function h(e){return e[Symbol.for("fastify.display-name")]}function f(e){return!!e[Symbol.for("skip-override")]}function m(e){const t=p(e);if(!t)return;const s=t.dependencies;s&&(n(Array.isArray(s),"The dependencies should be an array of strings"),s.forEach((e=>{n(this[r].indexOf(e)>-1,`The dependency '${e}' of plugin '${t.name}' is not registered`)})))}function g(e){const t=p(e);if(!t)return;const{decorators:n,name:r}=t;n&&(n.fastify&&b(this,"Fastify",n.fastify,r),n.reply&&b(this,"Reply",n.reply,r),n.request&&b(this,"Request",n.request,r))}const v={Fastify:i,Request:a,Reply:o};function b(e,t,r,s){n(Array.isArray(r),"The decorators should be an array of strings"),r.forEach((n=>{const r="string"==typeof s?` required by '${s}'`:"";if(!v[t].call(e,n))throw new l(n,r,t)}))}function E(e){const n=p(e);if(!n)return;const r=n.fastify,s=/-rc.+$/.test(this.version);if((!0!==s||!0!==t.gt(this.version,t.coerce(r)))&&r&&!1===t.satisfies(this.version,r,{includePrerelease:s}))throw new c(n.name,r,this.version)}function _(e){const t=p(e);if(!t)return;const n=t.name;return n?(this[r].push(n),n):void 0}e.exports={getPluginName:d,getFuncPreview:function(e){return(""+e).split("\n").slice(0,2).map((e=>e.trim())).join(" -- ")},kRegisteredPlugins:r,getDisplayName:h,registerPlugin:function(e){return function(e,t){"AsyncFunction"===e.constructor.name&&3===e.length&&u(t||"anonymous")}(e,_.call(this,e)||d(e)),E.call(this,e),g.call(this,e),m.call(this,e),f(e)}},e.exports[s]={shouldSkipOverride:f,getMeta:p,checkDecorators:g,checkDependencies:m}}(zS);var VS=zS.exports,YS={getGenReqId:function(e,t){return e.genReqId(t)},reqIdGenFactory:function(e,t){const n=t||function(){let e=0;return function(){return e=e+1&2147483647,"req-"+e.toString(36)}}();return e?function(e,t){return function(n){return n.headers[e]||t(n)}}(e,n):n}},KS={exports:{}},QS=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,7,7,7,7,7,7,7,7,7,7,7,7,8,7,7,10,9,9,9,11,4,4,4,4,4,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,12,0,0,0,0,24,36,48,60,72,84,96,0,12,12,12,0,0,0,0,0,0,0,0,0,0,0,24,0,0,0,0,0,0,0,0,0,24,24,24,0,0,0,0,0,0,0,0,0,24,24,0,0,0,0,0,0,0,0,0,0,48,48,48,0,0,0,0,0,0,0,0,0,0,48,48,0,0,0,0,0,0,0,0,0,48,0,0,0,0,0,0,0,0,0,0,127,63,63,63,0,31,15,15,15,7,7,7],WS={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};function JS(e,t){var n=WS[e];return void 0===n?255:n<<t}const XS=function(e){var t=e.indexOf("%");if(-1===t)return e;for(var n=e.length,r="",s=0,i=0,o=t,a=12;t>-1&&n>t;){var c=JS(e[t+1],4)|JS(e[t+2],0),l=QS[c];if(i=i<<6|c&QS[364+l],12!==(a=QS[256+a+l])){if(0===a)return null;if(n>(t+=3)&&37===e.charCodeAt(t))continue;return null}r+=e.slice(s,o),r+=i>65535?String.fromCharCode(55232+(i>>10),56320+(1023&i)):String.fromCharCode(i),i=0,t=o=e.indexOf("%",s=t+3)}return r+e.slice(s)},ZS=/\+/g,eT=function(){};eT.prototype=Object.create(null);const tT=Array.from({length:256},((e,t)=>"%"+((16>t?"0":"")+t.toString(16)).toUpperCase())),nT=new Int8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,1,1,1,0,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,0]);var rT={encodeString:function(e){const t=e.length;if(0===t)return"";let n="",r=0,s=0;e:for(;t>s;s++){let i=e.charCodeAt(s);for(;128>i;){if(1!==nT[i]&&(s>r&&(n+=e.slice(r,s)),r=s+1,n+=tT[i]),++s===t)break e;i=e.charCodeAt(s)}if(s>r&&(n+=e.slice(r,s)),2048>i)r=s+1,n+=tT[192|i>>6]+tT[128|63&i];else if(i>=55296&&57344>i){if(++s,s>=t)throw Error("URI malformed");r=s+1,i=65536+((1023&i)<<10|1023&e.charCodeAt(s)),n+=tT[240|i>>18]+tT[128|i>>12&63]+tT[128|i>>6&63]+tT[128|63&i]}else r=s+1,n+=tT[224|i>>12]+tT[128|i>>6&63]+tT[128|63&i]}return 0===r?e:t>r?n+e.slice(r):n}};const{encodeString:sT}=rT;function iT(e){const t=typeof e;return"string"===t?sT(e):"bigint"===t?""+e:"boolean"===t?e?"true":"false":"number"===t&&Number.isFinite(e)?1e21>e?""+e:sT(""+e):""}const oT=function(e){const t=new eT;if("string"!=typeof e)return t;let n=e.length,r="",s="",i=-1,o=-1,a=!1,c=!1,l=!1,u=!1,p=!1,d=0;for(let h=0;n+1>h;h++)if(d=h!==n?e.charCodeAt(h):38,38===d){if(p=o>i,p||(o=h),r=e.slice(i+1,o),p||r.length>0){l&&(r=r.replace(ZS," ")),a&&(r=XS(r)||r),p&&(s=e.slice(o+1,h),u&&(s=s.replace(ZS," ")),c&&(s=XS(s)||s));const n=t[r];void 0===n?t[r]=s:n.pop?n.push(s):t[r]=[n,s]}s="",i=h,o=h,a=!1,c=!1,l=!1,u=!1}else 61===d?o>i?c=!0:o=h:43===d?o>i?u=!0:l=!0:37===d&&(o>i?c=!0:a=!0);return t},aT=function(e){let t="";if(null===e||"object"!=typeof e)return t;const n=Object.keys(e),r=n.length;let s=0;for(let i=0;r>i;i++){const r=n[i],o=e[r],a=sT(r)+"=";if(i&&(t+="&"),Array.isArray(o)){s=o.length;for(let e=0;s>e;e++)e&&(t+="&"),t+=a,t+=iT(o[e])}else t+=a,t+=iT(o)}return t},cT={parse:oT,stringify:aT};KS.exports=cT,KS.exports.default=cT,KS.exports.parse=oT,KS.exports.stringify=aT;var lT=KS.exports,uT={exports:{}},pT={exports:{}},dT={},hT={};Object.defineProperty(hT,"__esModule",{value:!0});var fT,mT={};Object.defineProperty(fT=mT,"__esModule",{value:!0}),fT.types=void 0,function(e){e[e.ROOT=0]="ROOT",e[e.GROUP=1]="GROUP",e[e.POSITION=2]="POSITION",e[e.SET=3]="SET",e[e.RANGE=4]="RANGE",e[e.REPETITION=5]="REPETITION",e[e.REFERENCE=6]="REFERENCE",e[e.CHAR=7]="CHAR"}(fT.types||(fT.types={}));var gT={};Object.defineProperty(gT,"__esModule",{value:!0}),function(e){var t=D&&D.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=D&&D.__exportStar||function(e,n){for(var r in e)"default"===r||{}.hasOwnProperty.call(n,r)||t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(hT,e),n(mT,e),n(gT,e)}(dT);var yT={},vT={},bT={};Object.defineProperty(bT,"__esModule",{value:!0}),bT.anyChar=bT.notWhitespace=bT.whitespace=bT.notInts=bT.ints=bT.notWords=bT.words=void 0;const ET=dT,_T=()=>[{type:ET.types.RANGE,from:48,to:57}],AT=()=>[{type:ET.types.CHAR,value:95},{type:ET.types.RANGE,from:97,to:122},{type:ET.types.RANGE,from:65,to:90},{type:ET.types.RANGE,from:48,to:57}],ST=()=>[{type:ET.types.CHAR,value:9},{type:ET.types.CHAR,value:10},{type:ET.types.CHAR,value:11},{type:ET.types.CHAR,value:12},{type:ET.types.CHAR,value:13},{type:ET.types.CHAR,value:32},{type:ET.types.CHAR,value:160},{type:ET.types.CHAR,value:5760},{type:ET.types.RANGE,from:8192,to:8202},{type:ET.types.CHAR,value:8232},{type:ET.types.CHAR,value:8233},{type:ET.types.CHAR,value:8239},{type:ET.types.CHAR,value:8287},{type:ET.types.CHAR,value:12288},{type:ET.types.CHAR,value:65279}];bT.words=()=>({type:ET.types.SET,set:AT(),not:!1}),bT.notWords=()=>({type:ET.types.SET,set:AT(),not:!0}),bT.ints=()=>({type:ET.types.SET,set:_T(),not:!1}),bT.notInts=()=>({type:ET.types.SET,set:_T(),not:!0}),bT.whitespace=()=>({type:ET.types.SET,set:ST(),not:!1}),bT.notWhitespace=()=>({type:ET.types.SET,set:ST(),not:!0}),bT.anyChar=()=>({type:ET.types.SET,set:[{type:ET.types.CHAR,value:10},{type:ET.types.CHAR,value:13},{type:ET.types.CHAR,value:8232},{type:ET.types.CHAR,value:8233}],not:!0});var TT=D&&D.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),wT=D&&D.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),xT=D&&D.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&{}.hasOwnProperty.call(e,n)&&TT(t,e,n);return wT(t,e),t};Object.defineProperty(vT,"__esModule",{value:!0}),vT.tokenizeClass=vT.strToChars=void 0;const kT=dT,CT=xT(bT);vT.strToChars=e=>e.replace(/(\[\\b\])|(\\)?\\(?:u([A-F0-9]{4})|x([A-F0-9]{2})|c([@A-Z[\\\]^?])|([0tnvfr]))/g,((e,t,n,r,s,i,o)=>{if(n)return e;let a=String.fromCharCode(t?8:r?parseInt(r,16):s?parseInt(s,16):i?"@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^ ?".indexOf(i):{0:0,t:9,n:10,v:11,f:12,r:13}[o]);return/[[\]{}^$.|?*+()]/.test(a)?"\\"+a:a})),vT.tokenizeClass=(e,t)=>{var n,r,s,i,o,a,c;let l,u,p=[];const d=/\\(?:(w)|(d)|(s)|(W)|(D)|(S))|((?:(?:\\)(.)|([^\]\\]))-(((?:\\)])|(((?:\\)?([^\]])))))|(\])|(?:\\)?([^])/g;for(;null!==(l=d.exec(e));){const e=null!==(c=null!==(a=null!==(o=null!==(i=null!==(s=null!==(r=null!==(n=l[1]&&CT.words())&&void 0!==n?n:l[2]&&CT.ints())&&void 0!==r?r:l[3]&&CT.whitespace())&&void 0!==s?s:l[4]&&CT.notWords())&&void 0!==i?i:l[5]&&CT.notInts())&&void 0!==o?o:l[6]&&CT.notWhitespace())&&void 0!==a?a:l[7]&&{type:kT.types.RANGE,from:(l[8]||l[9]).charCodeAt(0),to:(u=l[10]).charCodeAt(u.length-1)})&&void 0!==c?c:(u=l[16])&&{type:kT.types.CHAR,value:u.charCodeAt(0)};if(!e)return[p,d.lastIndex];p.push(e)}throw new SyntaxError(`Invalid regular expression: /${t}/: Unterminated character class`)};var IT=D&&D.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),RT=D&&D.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),OT=D&&D.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&{}.hasOwnProperty.call(e,n)&&IT(t,e,n);return RT(t,e),t};Object.defineProperty(yT,"__esModule",{value:!0}),yT.tokenizer=void 0;const NT=OT(vT),DT=dT,PT=OT(bT);yT.tokenizer=e=>{let t,n=0,r={type:DT.types.ROOT,stack:[]},s=r,i=r.stack,o=[],a=[],c=0;const l=t=>{throw new SyntaxError(`Invalid regular expression: /${e}/: Nothing to repeat at column ${t-1}`)};let u=NT.strToChars(e);for(;u.length>n;)switch(t=u[n++]){case"\\":if(n===u.length)throw new SyntaxError(`Invalid regular expression: /${e}/: \\ at end of pattern`);switch(t=u[n++]){case"b":i.push({type:DT.types.POSITION,value:"b"});break;case"B":i.push({type:DT.types.POSITION,value:"B"});break;case"w":i.push(PT.words());break;case"W":i.push(PT.notWords());break;case"d":i.push(PT.ints());break;case"D":i.push(PT.notInts());break;case"s":i.push(PT.whitespace());break;case"S":i.push(PT.notWhitespace());break;default:if(/\d/.test(t)){let e=t;for(;u.length>n&&/\d/.test(u[n]);)e+=u[n++];const r={type:DT.types.REFERENCE,value:parseInt(e,10)};i.push(r),a.push({reference:r,stack:i,index:i.length-1})}else i.push({type:DT.types.CHAR,value:t.charCodeAt(0)})}break;case"^":i.push({type:DT.types.POSITION,value:"^"});break;case"$":i.push({type:DT.types.POSITION,value:"$"});break;case"[":{let t;"^"===u[n]?(t=!0,n++):t=!1;let r=NT.tokenizeClass(u.slice(n),e);n+=r[1],i.push({type:DT.types.SET,set:r[0],not:t});break}case".":i.push(PT.anyChar());break;case"(":{let r={type:DT.types.GROUP,stack:[],remember:!0};if("?"===u[n]){if(t=u[n+1],n+=2,"="===t)r.followedBy=!0;else if("!"===t)r.notFollowedBy=!0;else if(":"!==t)throw new SyntaxError(`Invalid regular expression: /${e}/: Invalid group, character '${t}' after '?' at column `+(n-1));r.remember=!1}else c+=1;i.push(r),o.push(s),s=r,i=r.stack;break}case")":if(0===o.length)throw new SyntaxError(`Invalid regular expression: /${e}/: Unmatched ) at column ${n-1}`);s=o.pop(),i=s.options?s.options[s.options.length-1]:s.stack;break;case"|":{s.options||(s.options=[s.stack],delete s.stack);let e=[];s.options.push(e),i=e;break}case"{":{let e,t,r=/^(\d+)(,(\d+)?)?\}/.exec(u.slice(n));null!==r?(0===i.length&&l(n),e=parseInt(r[1],10),t=r[2]?r[3]?parseInt(r[3],10):1/0:e,n+=r[0].length,i.push({type:DT.types.REPETITION,min:e,max:t,value:i.pop()})):i.push({type:DT.types.CHAR,value:123});break}case"?":0===i.length&&l(n),i.push({type:DT.types.REPETITION,min:0,max:1,value:i.pop()});break;case"+":0===i.length&&l(n),i.push({type:DT.types.REPETITION,min:1,max:1/0,value:i.pop()});break;case"*":0===i.length&&l(n),i.push({type:DT.types.REPETITION,min:0,max:1/0,value:i.pop()});break;default:i.push({type:DT.types.CHAR,value:t.charCodeAt(0)})}if(0!==o.length)throw new SyntaxError(`Invalid regular expression: /${e}/: Unterminated group`);return function(e,t){for(const n of e.reverse())if(n.reference.value>t){n.reference.type=DT.types.CHAR;const e=""+n.reference.value;if(n.reference.value=parseInt(e,8),!/^[0-7]+$/.test(e)){let t=0;for(;"8"!==e[t]&&"9"!==e[t];)t+=1;if(0===t?(n.reference.value=e.charCodeAt(0),t+=1):n.reference.value=parseInt(e.slice(0,t),8),e.length>t){const r=n.stack.splice(n.index+1);for(const r of e.slice(t))n.stack.push({type:DT.types.CHAR,value:r.charCodeAt(0)});n.stack.push(...r)}}}}(a,c),r};var LT={},MT={},BT={},jT=D&&D.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),FT=D&&D.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),$T=D&&D.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&{}.hasOwnProperty.call(e,n)&&jT(t,e,n);return FT(t,e),t};Object.defineProperty(BT,"__esModule",{value:!0}),BT.NOTANYCHAR=BT.WHITESPACE=BT.WORDS=BT.INTS=void 0;const UT=$T(bT),HT=dT;function GT(e){let t={},n=0;for(const r of e)r.type===HT.types.CHAR&&(t[r.value]=!0),r.type===HT.types.RANGE&&(t[`${r.from}-${r.to}`]=!0),n+=1;return{lookup:()=>Object.assign({},t),len:n}}BT.INTS=GT(UT.ints().set),BT.WORDS=GT(UT.words().set),BT.WHITESPACE=GT(UT.whitespace().set),BT.NOTANYCHAR=GT(UT.anyChar().set);var qT=D&&D.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),zT=D&&D.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),VT=D&&D.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&{}.hasOwnProperty.call(e,n)&&qT(t,e,n);return zT(t,e),t};Object.defineProperty(MT,"__esModule",{value:!0}),MT.writeSetTokens=MT.setChar=void 0;const YT=dT,KT=VT(BT);function QT(e){return 94===e?"\\^":92===e?"\\\\":93===e?"\\]":45===e?"\\-":String.fromCharCode(e)}function WT(e,{lookup:t,len:n}){if(n!==e.length)return!1;const r=t();for(const t of e){if(t.type===YT.types.SET)return!1;const e=t.type===YT.types.CHAR?t.value:`${t.from}-${t.to}`;if(!r[e])return!1;r[e]=!1}return!0}function JT(e,t=!1){if(WT(e.set,KT.INTS))return e.not?"\\D":"\\d";if(WT(e.set,KT.WORDS))return e.not?"\\W":"\\w";if(e.not&&WT(e.set,KT.NOTANYCHAR))return".";if(WT(e.set,KT.WHITESPACE))return e.not?"\\S":"\\s";let n="";for(let t=0;e.set.length>t;t++)n+=XT(e.set[t]);const r=`${e.not?"^":""}${n}`;return t?r:`[${r}]`}function XT(e){return e.type===YT.types.CHAR?QT(e.value):e.type===YT.types.RANGE?`${QT(e.from)}-${QT(e.to)}`:JT(e,!0)}MT.setChar=QT,MT.writeSetTokens=JT,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.reconstruct=void 0;const t=dT,n=MT,r=t=>t.map(e.reconstruct).join(""),s=e=>{if("options"in e)return e.options.map(r).join("|");if("stack"in e)return r(e.stack);throw Error("options or stack must be Root or Group token")};e.reconstruct=r=>{switch(r.type){case t.types.ROOT:return s(r);case t.types.CHAR:{const e=String.fromCharCode(r.value);return(/[[\\{}$^.|?*+()]/.test(e)?"\\":"")+e}case t.types.POSITION:return"^"===r.value||"$"===r.value?r.value:"\\"+r.value;case t.types.REFERENCE:return"\\"+r.value;case t.types.SET:return n.writeSetTokens(r);case t.types.GROUP:return`(${r.remember?"":r.followedBy?"?=":r.notFollowedBy?"?!":"?:"}${s(r)})`;case t.types.REPETITION:{const{min:t,max:n}=r;let s;return s=0===t&&1===n?"?":1===t&&n===1/0?"+":0===t&&n===1/0?"*":n===1/0?`{${t},}`:t===n?`{${t}}`:`{${t},${n}}`,`${e.reconstruct(r.value)}${s}`}case t.types.RANGE:return`${n.setChar(r.from)}-${n.setChar(r.to)}`;default:throw Error("Invalid token type "+r)}}}(LT),function(e,t){var n=D&&D.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),r=D&&D.__exportStar||function(e,t){for(var r in e)"default"===r||{}.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.types=void 0;const s=dT;Object.defineProperty(t,"types",{enumerable:!0,get:function(){return s.types}}),r(yT,t),r(LT,t);const i=yT,o=LT;r(dT,t),t.default=i.tokenizer,e.exports=i.tokenizer,e.exports.types=s.types,e.exports.reconstruct=o.reconstruct}(pT,pT.exports);const ZT=pT.exports,ew=ZT.types;function tw(e,t){t||(t={});const n=void 0===t.limit?25:t.limit;"[object RegExp]"==={}.toString.call(e)?e=e.source:"string"!=typeof e&&(e+="");try{e=ZT(e)}catch(e){return!1}let r=0;return function e(t,s){let i,o,a;if(t.type===ew.REPETITION){if(s++,r++,s>1)return!1;if(r>n)return!1}if(t.options)for(i=0,a=t.options.length;a>i;i++)if(o=e({stack:t.options[i]},s),!o)return!1;const c=t.stack||t.value&&t.value.stack;if(!c)return!0;for(i=0;c.length>i;i++)if(o=e(c[i],s),!o)return!1;return!0}(e,0)}uT.exports=tw,uT.exports.default=tw,uT.exports.safeRegex=tw;var nw=uT.exports,rw={name:"__fmw_internal_strategy_merged_tree_http_method__",storage:function(){const e={};return{get:t=>e[t]||null,set:(t,n)=>{e[t]=n}}},deriveConstraint:e=>e.method,mustMatchWhenDerived:!0};const sw=Lh,iw=rw,ow=Symbol("treeData");function aw(e,t=""){let n="";const r=Object.keys(e);for(let s=0;r.length>s;s++){const i=r[s],o=e[i],a=s===r.length-1,c=a?"    ":"│   ";n+=t+(a?"└── ":"├── ")+i+(o[ow]||"").split("\n").join("\n"+t+c)+"\n",n+=aw(o,t+c)}return n}function cw(e){return Array.isArray(e)?e.map((e=>cw(e))):"symbol"==typeof e?""+e:"function"==typeof e?function(e){let t=e.name||"";return t=t.replace("bound","").trim(),t=(t||"anonymous")+"()",t}(e):e}function lw(e){const t={...e.opts.constraints},n=t[iw.name];return delete t[iw.name],{...e,method:n,opts:{constraints:t}}}function uw(e){let t=` (${e.method})`;const n=e.opts.constraints||{};return 0!==Object.keys(n).length&&(t+=" "+JSON.stringify(n)),t+=function(e){let t="";for(const[n,r]of Object.entries(e))t+=`\n• (${n}) ${r}`;return t}(e.metaData),t}function pw(e,t,n,r){if((e.isLeafNode||!1!==r.commonPrefix)&&(t=t[n=n||"(empty root node)"]={},e.isLeafNode&&(t[ow]=function(e,t,n){let r=e.routes;return void 0===n.method&&(r=r.map(lw)),r=r.map((e=>(e.metaData=function(e,t){if(!t.includeMeta)return{};const n=t.buildPrettyMeta(e),r={};let s=t.includeMeta;Array.isArray(s)||(s=Reflect.ownKeys(n));for(const e of s){if(!{}.hasOwnProperty.call(n,e))continue;const t=""+e,s=n[e];if(null!=s){const e=JSON.stringify(cw(s));r[t]=e}}return r}(e,n),e))),void 0===n.method&&(r=function(e){return e.reduce(((e,t)=>{for(const n of e)if(sw(t.opts.constraints,n.opts.constraints)&&sw(t.metaData,n.metaData))return n.method+=", "+t.method,e;return e.push(t),e}),[])}(r)),r.map(uw).join("\n"+t)}(e,n,r)),n=""),e.staticChildren)for(const s of Object.values(e.staticChildren))pw(s,t,n+s.prefix,r);if(e.parametricChildren)for(const s of Object.values(e.parametricChildren))pw(s,t,n+Array.from(s.nodePaths).join("|"),r);e.wildcardChild&&pw(e.wildcardChild,t,"*",r)}var dw={prettyPrintTree:function(e,t){const n={};return pw(e,n,e.prefix,t),aw(n)}};const hw=rw,fw=class{constructor(){this.unconstrainedHandler=null,this.constraints=[],this.handlers=[],this.constrainedHandlerStores=null}getMatchingHandler(e){return void 0===e?this.unconstrainedHandler:this._getHandlerMatchingConstraints(e)}addHandler(e,t){const n=t.params,r=t.opts.constraints||{},s={params:n,constraints:r,handler:t.handler,store:t.store||null,_createParamsObject:this._compileCreateParamsObject(n)},i=Object.keys(r);0===i.length&&(this.unconstrainedHandler=s);for(const e of i)this.constraints.includes(e)||("version"===e?this.constraints.unshift(e):this.constraints.push(e));const o=i.includes(hw.name);if(!o&&this.handlers.length>=31)throw Error("find-my-way supports a maximum of 31 route handlers per node when there are constraints, limit reached");this.handlers.push(s),this.handlers.sort(((e,t)=>Object.keys(e.constraints).length-Object.keys(t.constraints).length)),o||this._compileGetHandlerMatchingConstraints(e,r)}_compileCreateParamsObject(e){const t=[];for(let n=0;e.length>n;n++)t.push(`'${e[n]}': paramsArray[${n}]`);return Function("paramsArray",`return {${t.join(",")}}`)}_getHandlerMatchingConstraints(){return null}_buildConstraintStore(e,t){for(let n=0;this.handlers.length>n;n++){const r=this.handlers[n].constraints[t];if(void 0!==r){let t=e.get(r)||0;t|=1<<n,e.set(r,t)}}}_constrainedIndexBitmask(e){let t=0;for(let n=0;this.handlers.length>n;n++)void 0!==this.handlers[n].constraints[e]&&(t|=1<<n);return~t}_compileGetHandlerMatchingConstraints(e){this.constrainedHandlerStores={};for(const t of this.constraints){const n=e.newStoreForConstraint(t);this.constrainedHandlerStores[t]=n,this._buildConstraintStore(n,t)}const t=[];t.push(`\n    let candidates = ${(1<<this.handlers.length)-1}\n    let mask, matches\n    `);for(const n of this.constraints)t.push(`\n      mask = ${this._constrainedIndexBitmask(n)}\n      value = derivedConstraints.${n}\n      `),t.push(`\n      if (value === undefined) {\n        candidates &= mask\n      } else {\n        matches = this.constrainedHandlerStores.${n}.get(value) || 0\n        candidates &= ${e.strategies[n].mustMatchWhenDerived?"matches":"(matches | mask)"}\n      }\n      if (candidates === 0) return null;\n      `);for(const n in e.strategies)e.strategies[n].mustMatchWhenDerived&&!this.constraints.includes(n)&&t.push(`if (derivedConstraints.${n} !== undefined) return null`);t.push("return this.handlers[Math.floor(Math.log2(candidates))]"),this._getHandlerMatchingConstraints=Function("derivedConstraints",t.join("\n"))}},mw={STATIC:0,PARAMETRIC:1,WILDCARD:2};let gw=class{constructor(){this.isLeafNode=!1,this.routes=null,this.handlerStorage=null}addRoute(e,t){null===this.routes&&(this.routes=[]),null===this.handlerStorage&&(this.handlerStorage=new fw),this.isLeafNode=!0,this.routes.push(e),this.handlerStorage.addHandler(t,e)}};class yw extends gw{constructor(){super(),this.staticChildren={}}findStaticMatchingChild(e,t){const n=this.staticChildren[e.charAt(t)];return void 0!==n&&n.matchPrefix(e,t)?n:null}getStaticChild(e,t=0){if(e.length===t)return this;const n=this.findStaticMatchingChild(e,t);return n?n.getStaticChild(e,t+n.prefix.length):null}createStaticChild(e){if(0===e.length)return this;let t=this.staticChildren[e.charAt(0)];if(t){let n=1;for(;t.prefix.length>n;n++)if(e.charCodeAt(n)!==t.prefix.charCodeAt(n)){t=t.split(this,n);break}return t.createStaticChild(e.slice(n))}const n=e.charAt(0);return this.staticChildren[n]=new vw(e),this.staticChildren[n]}}let vw=class e extends yw{constructor(e){super(),this.prefix=e,this.wildcardChild=null,this.parametricChildren=[],this.kind=mw.STATIC,this._compilePrefixMatch()}getParametricChild(e){const t=e&&e.source;return this.parametricChildren.find((e=>(e.regex&&e.regex.source)===t))||null}createParametricChild(e,t,n){let r=this.getParametricChild(e);return r?(r.nodePaths.add(n),r):(r=new bw(e,t,n),this.parametricChildren.push(r),this.parametricChildren.sort(((e,t)=>e.isRegex?t.isRegex?null===e.staticSuffix?1:null===t.staticSuffix?-1:t.staticSuffix.endsWith(e.staticSuffix)?1:e.staticSuffix.endsWith(t.staticSuffix)?-1:0:-1:1)),r)}getWildcardChild(){return this.wildcardChild}createWildcardChild(){return this.wildcardChild=this.getWildcardChild()||new Ew,this.wildcardChild}split(t,n){const r=this.prefix.slice(0,n),s=this.prefix.slice(n);this.prefix=s,this._compilePrefixMatch();const i=new e(r);return i.staticChildren[s.charAt(0)]=this,t.staticChildren[r.charAt(0)]=i,i}getNextNode(e,t,n,r){let s=this.findStaticMatchingChild(e,t),i=0;if(null===s){if(0===this.parametricChildren.length)return this.wildcardChild;s=this.parametricChildren[0],i=1}null!==this.wildcardChild&&n.push({paramsCount:r,brotherPathIndex:t,brotherNode:this.wildcardChild});for(let e=this.parametricChildren.length-1;e>=i;e--)n.push({paramsCount:r,brotherPathIndex:t,brotherNode:this.parametricChildren[e]});return s}_compilePrefixMatch(){if(1===this.prefix.length)return void(this.matchPrefix=()=>!0);const e=[];for(let t=1;this.prefix.length>t;t++){const n=this.prefix.charCodeAt(t);e.push(`path.charCodeAt(i + ${t}) === ${n}`)}this.matchPrefix=Function("path","i","return "+e.join(" && "))}};class bw extends yw{constructor(e,t,n){super(),this.isRegex=!!e,this.regex=e||null,this.staticSuffix=t||null,this.kind=mw.PARAMETRIC,this.nodePaths=new Set([n])}getNextNode(e,t){return this.findStaticMatchingChild(e,t)}}class Ew extends gw{constructor(){super(),this.kind=mw.WILDCARD}getNextNode(){return null}}var _w={StaticNode:vw,ParametricNode:bw,WildcardNode:Ew,NODE_TYPES:mw};const Aw=y;function Sw(){if(!(this instanceof Sw))return new Sw;this.store={},this.maxMajor=0,this.maxMinors={},this.maxPatches={}}Sw.prototype.set=function(e,t){if("string"!=typeof e)throw new TypeError("Version should be a string");let[n,r,s]=e.split(".");if(isNaN(n))throw new TypeError("Major version must be a numeric value");return n=+n,r=+r||0,s=+s||0,this.maxMajor>n||(this.maxMajor=n,this.store.x=t,this.store["*"]=t,this.store["x.x"]=t,this.store["x.x.x"]=t),(this.maxMinors[n]||0)>r||(this.maxMinors[n]=r,this.store[n+".x"]=t,this.store[n+".x.x"]=t),(this.maxPatches[`${n}.${r}`]||0)>s||(this.maxPatches[`${n}.${r}`]=s,this.store[`${n}.${r}.x`]=t),this.store[`${n}.${r}.${s}`]=t,this},Sw.prototype.get=function(e){return this.store[e]};var Tw={name:"version",mustMatchWhenDerived:!0,storage:Sw,validate(e){Aw("string"==typeof e,"Version should be a string")}};const ww=y;var xw={name:"host",mustMatchWhenDerived:!1,storage:function(){const e={},t=[];return{get:n=>{const r=e[n];if(r)return r;for(const e of t)if(e.host.test(n))return e.value},set:(n,r)=>{n instanceof RegExp?t.push({host:n,value:r}):e[n]=r}}},validate(e){ww("string"==typeof e||"[object RegExp]"==={}.toString.call(e),"Host should be a string or a RegExp")}};const kw=Tw,Cw=xw,Iw=y;function Rw(e,t){return 50===e?53===t?"%":51===t?"#":52===t?"$":54===t?"&":66===t||98===t?"+":67===t||99===t?",":70===t||102===t?"/":null:51===e?65===t||97===t?":":66===t||98===t?";":68===t||100===t?"=":70===t||102===t?"?":null:52===e&&48===t?"@":null}var Ow={safeDecodeURI:function(e,t){let n=!1,r=!1,s="";for(let i=1;e.length>i;i++){const o=e.charCodeAt(i);if(37===o){const t=e.charCodeAt(i+1),s=e.charCodeAt(i+2);null===Rw(t,s)?n=!0:(r=!0,50===t&&53===s&&(n=!0,e=e.slice(0,i+1)+"25"+e.slice(i+1),i+=2),i+=2)}else if(63===o||35===o||59===o&&t){s=e.slice(i+1),e=e.slice(0,i);break}}return{path:n?decodeURI(e):e,querystring:s,shouldDecodeParam:r}},safeDecodeURIComponent:function(e){const t=e.indexOf("%");if(-1===t)return e;let n="",r=t;for(let s=t;e.length>s;s++)if(37===e.charCodeAt(s)){const t=Rw(e.charCodeAt(s+1),e.charCodeAt(s+2));n+=e.slice(r,s)+t,r=s+3}return e.slice(0,t)+n+e.slice(r)}};const Nw=y,Dw=lT,Pw=nw,Lw=Lh,{prettyPrintTree:Mw}=dw,{StaticNode:Bw,NODE_TYPES:jw}=_w,Fw=class{constructor(e){if(this.strategies={version:kw,host:Cw},this.strategiesInUse=new Set,this.asyncStrategiesInUse=new Set,e)for(const t of Object.values(e))this.addConstraintStrategy(t)}isStrategyUsed(e){return this.strategiesInUse.has(e)||this.asyncStrategiesInUse.has(e)}hasConstraintStrategy(e){const t=this.strategies[e];return void 0!==t&&(t.isCustom||this.isStrategyUsed(e))}addConstraintStrategy(e){if(Iw("string"==typeof e.name&&""!==e.name,"strategy.name is required."),Iw(e.storage&&"function"==typeof e.storage,"strategy.storage function is required."),Iw(e.deriveConstraint&&"function"==typeof e.deriveConstraint,"strategy.deriveConstraint function is required."),this.strategies[e.name]&&this.strategies[e.name].isCustom)throw Error(`There already exists a custom constraint with the name ${e.name}.`);if(this.isStrategyUsed(e.name))throw Error(`There already exists a route with ${e.name} constraint.`);e.isCustom=!0,e.isAsync=3===e.deriveConstraint.length,this.strategies[e.name]=e,e.mustMatchWhenDerived&&this.noteUsage({[e.name]:e})}deriveConstraints(e,t,n){const r=this.deriveSyncConstraints(e,t);if(void 0===n)return r;this.deriveAsyncConstraints(r,e,t,n)}deriveSyncConstraints(e,t){}noteUsage(e){if(e){const t=this.strategiesInUse.size;for(const t in e)this.strategies[t].isAsync?this.asyncStrategiesInUse.add(t):this.strategiesInUse.add(t);t!==this.strategiesInUse.size&&this._buildDeriveConstraints()}}newStoreForConstraint(e){if(!this.strategies[e])throw Error("No strategy registered for constraint key "+e);return this.strategies[e].storage()}validateConstraints(e){for(const t in e){const n=e[t];if(void 0===n)throw Error("Can't pass an undefined constraint value, must pass null or no key at all");const r=this.strategies[t];if(!r)throw Error("No strategy registered for constraint key "+t);r.validate&&r.validate(n)}}deriveAsyncConstraints(e,t,n,r){let s=this.asyncStrategiesInUse.size;if(0!==s){e=e||{};for(const i of this.asyncStrategiesInUse)this.strategies[i].deriveConstraint(t,n,((t,n)=>{null===t?(e[i]=n,0==--s&&r(null,e)):r(t)}))}else r(null,e)}_buildDeriveConstraints(){if(0===this.strategiesInUse.size)return;const e=["return {"];for(const t of this.strategiesInUse){const n=this.strategies[t];e.push(n.isCustom?`  ${n.name}: this.strategies.${t}.deriveConstraint(req, ctx),`:"version"===t?"   version: req.headers['accept-version'],":"   host: req.headers.host || req.headers[':authority'],")}e.push("}"),this.deriveSyncConstraints=Function("req","ctx",e.join("\n")).bind(this)}},$w=["ACL","BIND","CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LINK","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCALENDAR","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REBIND","REPORT","SEARCH","SOURCE","SUBSCRIBE","TRACE","UNBIND","UNLINK","UNLOCK","UNSUBSCRIBE"],Uw=rw,{safeDecodeURI:Hw,safeDecodeURIComponent:Gw}=Ow,qw=/^https?:\/\/.*?\//,zw=/(\/:[^/()]*?)\?(\/?)/;if(!Pw(qw))throw Error("the FULL_PATH_REGEXP is not safe, update this module");if(!Pw(zw))throw Error("the OPTIONAL_PARAM_REGEXP is not safe, update this module");function Vw(e){if(!(this instanceof Vw))return new Vw(e);this._opts=e=e||{},e.defaultRoute?(Nw("function"==typeof e.defaultRoute,"The default route must be a function"),this.defaultRoute=e.defaultRoute):this.defaultRoute=null,e.onBadUrl?(Nw("function"==typeof e.onBadUrl,"The bad url handler must be a function"),this.onBadUrl=e.onBadUrl):this.onBadUrl=null,e.buildPrettyMeta?(Nw("function"==typeof e.buildPrettyMeta,"buildPrettyMeta must be a function"),this.buildPrettyMeta=e.buildPrettyMeta):this.buildPrettyMeta=Zw,e.querystringParser?(Nw("function"==typeof e.querystringParser,"querystringParser must be a function"),this.querystringParser=e.querystringParser):this.querystringParser=e=>""===e?{}:Dw.parse(e),this.caseSensitive=void 0===e.caseSensitive||e.caseSensitive,this.ignoreTrailingSlash=e.ignoreTrailingSlash||!1,this.ignoreDuplicateSlashes=e.ignoreDuplicateSlashes||!1,this.maxParamLength=e.maxParamLength||100,this.allowUnsafeRegex=e.allowUnsafeRegex||!1,this.constrainer=new Fw(e.constraints),this.useSemicolonDelimiter=e.useSemicolonDelimiter||!1,this.routes=[],this.trees={}}Vw.prototype.on=function(e,t,n,r,s){"function"==typeof n&&(void 0!==r&&(s=r),r=n,n={}),Nw("string"==typeof t,"Path should be a string"),Nw(t.length>0,"The path could not be empty"),Nw("/"===t[0]||"*"===t[0],"The first character of a path should be `/` or `*`"),Nw("function"==typeof r,"Handler should be a function");const i=t.match(zw);if(i){Nw(t.length===i.index+i[0].length,"Optional Parameter needs to be the last parameter of the path");const o=t.replace(zw,"$1$2"),a=t.replace(zw,"$2")||"/";return this.on(e,o,n,r,s),void this.on(e,a,n,r,s)}const o=t;this.ignoreDuplicateSlashes&&(t=Qw(t)),this.ignoreTrailingSlash&&(t=Ww(t));const a=Array.isArray(e)?e:[e];for(const e of a)Nw("string"==typeof e,"Method should be a string"),Nw($w.includes(e),`Method '${e}' is not an http method.`),this._on(e,t,n,r,s,o)},Vw.prototype._on=function(e,t,n,r,s){let i={};void 0!==n.constraints&&(Nw("object"==typeof n.constraints&&null!==n.constraints,"Constraints should be an object"),0!==Object.keys(n.constraints).length&&(i=n.constraints)),this.constrainer.validateConstraints(i),this.constrainer.noteUsage(i),void 0===this.trees[e]&&(this.trees[e]=new Bw("/"));let o=t;if("*"===o&&0!==this.trees[e].prefix.length){const t=this.trees[e];this.trees[e]=new Bw(""),this.trees[e].staticChildren["/"]=t}let a=this.trees[e],c=a.prefix.length;const l=[];for(let e=0;o.length>=e;e++){if(58===o.charCodeAt(e)&&58===o.charCodeAt(e+1)){e++;continue}const t=58===o.charCodeAt(e)&&58!==o.charCodeAt(e+1),n=42===o.charCodeAt(e);if(t||n||e===o.length&&e!==c){let t=o.slice(c,e);this.caseSensitive||(t=t.toLowerCase()),t=t.split("::").join(":"),t=t.split("%").join("%25"),a=a.createStaticChild(t)}if(t){let t=!1;const n=[];let r=e+1;for(let s=r;;s++){const i=o.charCodeAt(s),u=40===i,p=45===i||46===i,d=47===i||s===o.length;if(u||p||d){const i=o.slice(r,s);if(l.push(i),t=t||u||p,u){const e=Xw(o,s),t=o.slice(s,e+1);this.allowUnsafeRegex||Nw(Pw(RegExp(t)),`The regex '${t}' is not safe!`),n.push(Jw(t)),s=e+1}else n.push("(.*?)");const h=s;for(;o.length>s;s++){const e=o.charCodeAt(s);if(47===e)break;if(58===e){if(58!==o.charCodeAt(s+1))break;s++}}let f=o.slice(h,s);if(f&&(f=f.split("::").join(":"),f=f.split("%").join("%25"),n.push(Kw(f))),r=s+1,d||47===o.charCodeAt(s)||s===o.length){const r=t?"()"+f:f,i=o.slice(e,s);o=o.slice(0,e+1)+r+o.slice(s),e+=r.length;const l=t?RegExp("^"+n.join("")+"$"):null;a=a.createParametricChild(l,f||null,i),c=e+1;break}}}}else if(n&&(l.push("*"),a=a.createWildcardChild(),c=e+1,e!==o.length-1))throw Error("Wildcard must be the last character in the route")}this.caseSensitive||(o=o.toLowerCase()),"*"===o&&(o="/*");for(const t of this.routes)if(t.method===e&&t.pattern===o&&Lw(t.opts.constraints||{},i))throw Error(`Method '${e}' already declared for route '${o}' with constraints '${JSON.stringify(i)}'`);const u={method:e,path:t,pattern:o,params:l,opts:n,handler:r,store:s};this.routes.push(u),a.addRoute(u,this.constrainer)},Vw.prototype.hasRoute=function(e,t,n){return null!==this.findRoute(e,t,n)},Vw.prototype.findRoute=function(e,t,n={}){if(void 0===this.trees[e])return null;let r=t,s=this.trees[e],i=s.prefix.length;for(let e=0;r.length>=e;e++){if(58===r.charCodeAt(e)&&58===r.charCodeAt(e+1)){e++;continue}const t=58===r.charCodeAt(e)&&58!==r.charCodeAt(e+1),n=42===r.charCodeAt(e);if(t||n||e===r.length&&e!==i){let t=r.slice(i,e);if(this.caseSensitive||(t=t.toLowerCase()),t=t.split("::").join(":"),t=t.split("%").join("%25"),s=s.getStaticChild(t),null===s)return null}if(t){let t=!1;const n=[];let o=e+1;for(let a=o;;a++){const c=r.charCodeAt(a),l=40===c,u=45===c||46===c,p=47===c||a===r.length;if(l||u||p){if(r.slice(o,a),t=t||l||u,l){const e=Xw(r,a),t=r.slice(a,e+1);this.allowUnsafeRegex||Nw(Pw(RegExp(t)),`The regex '${t}' is not safe!`),n.push(Jw(t)),a=e+1}else n.push("(.*?)");const c=a;for(;r.length>a;a++){const e=r.charCodeAt(a);if(47===e)break;if(58===e){if(58!==r.charCodeAt(a+1))break;a++}}let d=r.slice(c,a);if(d&&(d=d.split("::").join(":"),d=d.split("%").join("%25"),n.push(Kw(d))),o=a+1,p||47===r.charCodeAt(a)||a===r.length){const o=t?"()"+d:d,c=r.slice(e,a);r=r.slice(0,e+1)+o+r.slice(a),e+=o.length;const l=t?RegExp("^"+n.join("")+"$"):null;if(s=s.getParametricChild(l,d||null,c),null===s)return null;i=e+1;break}}}}else if(n&&(s=s.getWildcardChild(),i=e+1,e!==r.length-1))throw Error("Wildcard must be the last character in the route")}this.caseSensitive||(r=r.toLowerCase());for(const t of this.routes)if(t.method===e&&t.pattern===r&&Lw(t.opts.constraints||{},n))return{handler:t.handler,store:t.store,params:t.params};return null},Vw.prototype.hasConstraintStrategy=function(e){return this.constrainer.hasConstraintStrategy(e)},Vw.prototype.addConstraintStrategy=function(e){this.constrainer.addConstraintStrategy(e),this._rebuild(this.routes)},Vw.prototype.reset=function(){this.trees={},this.routes=[]},Vw.prototype.off=function(e,t,n){Nw("string"==typeof t,"Path should be a string"),Nw(t.length>0,"The path could not be empty"),Nw("/"===t[0]||"*"===t[0],"The first character of a path should be `/` or `*`"),Nw(void 0===n||"object"==typeof n&&!Array.isArray(n)&&null!==n,"Constraints should be an object or undefined.");const r=t.match(zw);if(r){Nw(t.length===r.index+r[0].length,"Optional Parameter needs to be the last parameter of the path");const s=t.replace(zw,"$1$2"),i=t.replace(zw,"$2");return this.off(e,s,n),void this.off(e,i,n)}this.ignoreDuplicateSlashes&&(t=Qw(t)),this.ignoreTrailingSlash&&(t=Ww(t));const s=Array.isArray(e)?e:[e];for(const e of s)this._off(e,t,n)},Vw.prototype._off=function(e,t,n){function r(n){return e!==n.method||t!==n.path}Nw("string"==typeof e,"Method should be a string"),Nw($w.includes(e),`Method '${e}' is not an http method.`);const s=n?function(e){return r(e)||!Lw(n,e.opts.constraints||{})}:r,i=this.routes.filter(s);this._rebuild(i)},Vw.prototype.lookup=function(e,t,n,r){if("function"==typeof n&&(r=n,n=void 0),void 0===r){const r=this.constrainer.deriveConstraints(e,n),s=this.find(e.method,e.url,r);return this.callHandler(s,e,t,n)}this.constrainer.deriveConstraints(e,n,((s,i)=>{if(null===s)try{const s=this.find(e.method,e.url,i),o=this.callHandler(s,e,t,n);r(null,o)}catch(s){r(s)}else r(s)}))},Vw.prototype.callHandler=function(e,t,n,r){return null===e?this._defaultRoute(t,n,r):void 0===r?e.handler(t,n,e.params,e.store,e.searchParams):e.handler.call(r,t,n,e.params,e.store,e.searchParams)},Vw.prototype.find=function(e,t,n){let r,s,i,o=this.trees[e];if(void 0===o)return null;47!==t.charCodeAt(0)&&(t=t.replace(qw,"/")),this.ignoreDuplicateSlashes&&(t=Qw(t));try{r=Hw(t,this.useSemicolonDelimiter),t=r.path,s=r.querystring,i=r.shouldDecodeParam}catch(e){return this._onBadUrl(t)}this.ignoreTrailingSlash&&(t=Ww(t));const a=t;!1===this.caseSensitive&&(t=t.toLowerCase());const c=this.maxParamLength;let l=o.prefix.length;const u=[],p=t.length,d=[];for(;;){if(l===p&&o.isLeafNode){const e=o.handlerStorage.getMatchingHandler(n);if(null!==e)return{handler:e.handler,store:e.store,params:e._createParamsObject(u),searchParams:this.querystringParser(s)}}let e=o.getNextNode(t,l,d,u.length);if(null===e){if(0===d.length)return null;const t=d.pop();l=t.brotherPathIndex,u.splice(t.paramsCount),e=t.brotherNode}if(o=e,o.kind===jw.STATIC){l+=o.prefix.length;continue}if(o.kind===jw.WILDCARD){let e=a.slice(l);i&&(e=Gw(e)),u.push(e),l=p;continue}let r=a.indexOf("/",l);-1===r&&(r=p);let h=a.slice(l,r);if(i&&(h=Gw(h)),o.isRegex){const e=o.regex.exec(h);if(null===e)continue;for(let t=1;e.length>t;t++){const n=e[t];if(n.length>c)return null;u.push(n)}}else{if(h.length>c)return null;u.push(h)}l=r}},Vw.prototype._rebuild=function(e){this.reset();for(const t of e){const{method:e,path:n,opts:r,handler:s,store:i}=t;this._on(e,n,r,s,i)}},Vw.prototype._defaultRoute=function(e,t,n){if(null!==this.defaultRoute)return void 0===n?this.defaultRoute(e,t):this.defaultRoute.call(n,e,t);t.statusCode=404,t.end()},Vw.prototype._onBadUrl=function(e){if(null===this.onBadUrl)return null;const t=this.onBadUrl;return{handler:(n,r,s)=>t(e,n,r),params:{},store:null}},Vw.prototype.prettyPrint=function(e={}){const t=e.method;e.buildPrettyMeta=this.buildPrettyMeta.bind(this);let n=null;if(void 0===t){const{version:e,host:t,...r}=this.constrainer.strategies;r[Uw.name]=Uw;const s=new Vw({...this._opts,constraints:r}),i=this.routes.map((e=>{const t={...e.opts.constraints,[Uw.name]:e.method};return{...e,method:"MERGED",opts:{constraints:t}}}));s._rebuild(i),n=s.trees.MERGED}else n=this.trees[t];return null==n?"(empty tree)":Mw(n,e)};for(const e in $w){if(!$w.hasOwnProperty(e))continue;const t=$w[e],n=t.toLowerCase();Vw.prototype[n]=function(e,n,r){return this.on(t,e,n,r)}}Vw.prototype.all=function(e,t,n){this.on($w,e,t,n)};var Yw=Vw;function Kw(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Qw(e){return e.replace(/\/\/+/g,"/")}function Ww(e){return e.length>1&&47===e.charCodeAt(e.length-1)?e.slice(0,-1):e}function Jw(e){return 94===e.charCodeAt(1)&&(e=e.slice(0,1)+e.slice(2)),36===e.charCodeAt(e.length-2)&&(e=e.slice(0,e.length-2)+e.slice(e.length-1)),e}function Xw(e,t){let n=1;for(;e.length>t;)if("\\"!==e[++t]){if(")"===e[t]?n--:"("===e[t]&&n++,!n)return t}else t++;throw new TypeError('Invalid regexp expression in "'+e+'"')}function Zw(e){return e&&e.store?Object.assign({},e.store):{}}function ex(e,t,n,r){if(void 0===n)return t.header("content-length","0"),r(null,null);if("function"==typeof n.resume)return n.on("error",(e=>{t.log.error({err:e},"Error on Stream found for HEAD route")})),n.resume(),r(null,null);const s=""+Buffer.byteLength(n);t.header("content-length",s),r(null,null)}var tx={parseHeadOnSendHandlers:function(e){return null==e?ex:Array.isArray(e)?[...e,ex]:[e,ex]}};const nx=Yw,rx=qd,sx=bn,{onRequestAbortHookRunner:ix,lifecycleHooks:ox,preParsingHookRunner:ax,onTimeoutHookRunner:cx,onRequestHookRunner:lx}=Pt,{supportedMethods:ux}=zd,{normalizeSchema:px}=mc,{parseHeadOnSendHandlers:dx}=tx,{FSTDEP007:hx,FSTDEP008:fx,FSTDEP014:mx}=ct,{compileSchemasForValidation:gx,compileSchemasForSerialization:yx}=mn,{FST_ERR_SCH_VALIDATION_BUILD:vx,FST_ERR_SCH_SERIALIZATION_BUILD:bx,FST_ERR_DEFAULT_ROUTE_INVALID_TYPE:Ex,FST_ERR_DUPLICATED_ROUTE:_x,FST_ERR_INVALID_URL:Ax,FST_ERR_HOOK_INVALID_HANDLER:Sx,FST_ERR_ROUTE_OPTIONS_NOT_OBJ:Tx,FST_ERR_ROUTE_DUPLICATED_HANDLER:wx,FST_ERR_ROUTE_HANDLER_NOT_FN:xx,FST_ERR_ROUTE_MISSING_HANDLER:kx,FST_ERR_ROUTE_METHOD_NOT_SUPPORTED:Cx,FST_ERR_ROUTE_METHOD_INVALID:Ix,FST_ERR_ROUTE_BODY_VALIDATION_SCHEMA_NOT_SUPPORTED:Rx,FST_ERR_ROUTE_BODY_LIMIT_OPTION_NOT_INT:Ox,FST_ERR_HOOK_INVALID_ASYNC_HANDLER:Nx}=dt,{kRoutePrefix:Dx,kLogLevel:Px,kLogSerializers:Lx,kHooks:Mx,kSchemaController:Bx,kOptions:jx,kReplySerializerDefault:Fx,kReplyIsError:$x,kRequestPayloadStream:Ux,kDisableRequestLogging:Hx,kSchemaErrorFormatter:Gx,kErrorHandler:qx,kHasBeenDecorated:zx,kRequestAcceptVersion:Vx,kRouteByFastify:Yx,kRouteContext:Kx}=Ze,{buildErrorHandler:Qx}=Dc,{createChildLogger:Wx}=ec,{getGenReqId:Jx}=YS;function Xx(e,t){t&&e.log.error({err:t},"onRequestAborted hook failed")}function Zx(){const{context:e,request:t,reply:n}=this._meta;cx(e.onTimeout,t,n,ik)}function ek(e){if("string"!=typeof e)throw new Ix;if(e=e.toUpperCase(),-1===ux.indexOf(e))throw new Cx(e);return e}function tk(e,t,n){if(("GET"===e||"HEAD"===e)&&n&&n.body)throw new Rx(e,t)}function nk(e){if(!(void 0===e||Number.isInteger(e)&&e>0))throw new Ox(e)}function rk(e,t,n){if(!0!==n.sent){if(null!=e)return n[$x]=!0,void n.send(e);t[Ux]=t.raw,null!==t[Kx].preParsing?ax(t[Kx].preParsing,t,n,sx):sx(null,t,n)}}function sk(){this.keepAliveConnections.delete(this.socket)}function ik(){}var ok={buildRouting:function(e){const t=nx(e.config);let n,r,s,i,o,a,c,l,u,p,d,h,f,m=!1;return{setup(e,t){n=t.avvio,r=t.fourOhFour,s=t.logger,i=t.hasLogger,o=t.setupResponseListeners,a=t.throwIfAlreadyStarted,h=t.validateHTTPVersion,d=e.exposeHeadRoutes,c=e.disableRequestLogging,l=e.ignoreTrailingSlash,u=e.ignoreDuplicateSlashes,p=!{}.hasOwnProperty.call(e,"return503OnClosing")||e.return503OnClosing,f=t.keepAliveConnections},routing:t.lookup.bind(t),route:v,hasRoute:function({options:e}){const t=e.method?.toUpperCase()??"";return null!==y({...e,method:t})},prepareRoute:g,getDefaultRoute:function(){return mx(),t.defaultRoute},setDefaultRoute:function(e){if(mx(),"function"!=typeof e)throw new Ex;t.defaultRoute=e},routeHandler:b,closeRoutes:()=>{m=!0},printRoutes:t.prettyPrint.bind(t),addConstraintStrategy:function(e){return a("Cannot add constraint strategy!"),t.addConstraintStrategy(e)},hasConstraintStrategy:function(e){return t.hasConstraintStrategy(e)},isAsyncConstraint:function(){return t.constrainer.asyncStrategiesInUse.size>0},findRoute:y};function g({method:e,url:t,options:n,handler:r,isFastify:s}){if("string"!=typeof t)throw new Ax(typeof t);if(r||"function"!=typeof n){if(r&&"function"==typeof r){if("[object Object]"!=={}.toString.call(n))throw new Tx(e,t);if(n.handler)throw"function"==typeof n.handler?new wx(e,t):new xx(e,t)}}else r=n,n={};return n=Object.assign({},n,{method:e,url:t,path:t,handler:r||n&&n.handler}),v.call(this,{options:n,isFastify:s})}function y(e){const n=t.find(e.method,e.url||"",e.constraints);return n?{handler:n.handler,params:n.params,searchParams:n.searchParams}:null}function v({options:e,isFastify:s}){const i={...e},{exposeHeadRoute:o}=i,c=null!=o?o:d,p="GET"===i.method||Array.isArray(i.method)&&i.method.includes("GET"),h="HEAD"===i.method||Array.isArray(i.method)&&i.method.includes("HEAD"),f=c&&p?{...e}:null;a("Cannot add route!");const m=i.url||i.path||"";if(Array.isArray(i.method))for(var y=0;i.method.length>y;++y)i.method[y]=ek(i.method[y]),tk(i.method[y],m,i.schema);else i.method=ek(i.method),tk(i.method,m,i.schema);if(!i.handler)throw new kx(i.method,m);if(void 0!==i.errorHandler&&"function"!=typeof i.errorHandler)throw new xx(i.method,m);nk(i.bodyLimit);const v=this[Dx];if("/"===m&&v.length>0&&"HEAD"!==i.method)switch(i.prefixTrailingSlash){case"slash":E.call(this,{path:m,isFastify:s});break;case"no-slash":E.call(this,{path:"",isFastify:s});break;default:E.call(this,{path:"",isFastify:s}),!0===l||!0===u&&v.endsWith("/")||E.call(this,{path:m,prefixing:!0,isFastify:s})}else"/"===m[0]&&v.endsWith("/")?E.call(this,{path:m.slice(1),isFastify:s}):E.call(this,{path:m,isFastify:s});return this;function E({path:e,prefixing:s=!1,isFastify:a=!1}){const l=v+e;if(i.url=l,i.path=l,i.routePath=e,i.prefix=v,i.logLevel=i.logLevel||this[Px],(this[Lx]||i.logSerializers)&&(i.logSerializers=Object.assign(Object.create(this[Lx]),i.logSerializers)),null==i.attachValidation&&(i.attachValidation=!1),!1===s)for(const e of this[Mx].onRoute)e.call(this,i);for(const e of ox)if(i&&e in i)if(Array.isArray(i[e]))for(const t of i[e]){if("function"!=typeof t)throw new Sx(e,{}.toString.call(t));if("onSend"===e||"preSerialization"===e||"onError"===e||"preParsing"===e){if("AsyncFunction"===t.constructor.name&&4===t.length)throw new Nx}else if("onRequestAbort"===e){if("AsyncFunction"===t.constructor.name&&1!==t.length)throw new Nx}else if("AsyncFunction"===t.constructor.name&&3===t.length)throw new Nx}else if(void 0!==i[e]&&"function"!=typeof i[e])throw new Sx(e,{}.toString.call(i[e]));const u=i.constraints||{},d={...i.config,url:l,method:i.method},m=new rx({schema:i.schema,handler:i.handler.bind(this),config:d,errorHandler:i.errorHandler,childLoggerFactory:i.childLoggerFactory,bodyLimit:i.bodyLimit,logLevel:i.logLevel,logSerializers:i.logSerializers,attachValidation:i.attachValidation,schemaErrorFormatter:i.schemaErrorFormatter,replySerializer:this[Fx],validatorCompiler:i.validatorCompiler,serializerCompiler:i.serializerCompiler,exposeHeadRoute:c,prefixTrailingSlash:i.prefixTrailingSlash||"both",server:this,isFastify:a});i.version&&(fx(),u.version=i.version);const y=t.findRoute("HEAD",i.url,u),E=null!==y;h&&E&&!m[Yx]&&y.store[Yx]&&t.off("HEAD",i.url,u);try{t.on(i.method,i.url,{constraints:u},b,m)}catch(e){if(!m[Yx]){if(e.message.includes(`Method '${i.method}' already declared for route '${i.url}'`))throw new _x(i.method,i.url);throw e}}if(this.after(((e,t)=>{m.errorHandler=i.errorHandler?Qx(this[qx],i.errorHandler):this[qx],m._parserOptions.limit=i.bodyLimit||null,m.logLevel=i.logLevel,m.logSerializers=i.logSerializers,m.attachValidation=i.attachValidation,m[Fx]=this[Fx],m.schemaErrorFormatter=i.schemaErrorFormatter||this[Gx]||m.schemaErrorFormatter,n.once("preReady",(()=>{for(const e of ox){const t=this[Mx][e].concat(i[e]||[]).map((e=>e.bind(this)));m[e]=t.length?t:null}for(;!m.Request[zx]&&m.Request.parent;)m.Request=m.Request.parent;for(;!m.Reply[zx]&&m.Reply.parent;)m.Reply=m.Reply.parent;if(r.setContext(this,m),i.schema){m.schema=px(m.schema,this.initialConfig);const e=this[Bx];!i.validatorCompiler&&(i.schema.body||i.schema.headers||i.schema.querystring||i.schema.params)&&e.setupValidator(this[jx]);try{gx(m,i.validatorCompiler||e.validatorCompiler,"function"==typeof i?.validatorCompiler||e.isCustomValidatorCompiler)}catch(e){throw new vx(i.method,l,e.message)}i.schema.response&&!i.serializerCompiler&&e.setupSerializer(this[jx]);try{yx(m,i.serializerCompiler||e.serializerCompiler)}catch(e){throw new bx(i.method,l,e.message)}}})),t(e)})),c&&p&&!h&&!E){const t=dx(f.onSend);g.call(this,{method:"HEAD",url:e,options:{...f,onSend:t},isFastify:!0})}else E&&o&&hx()}}function b(e,t,n,r,a){const l=Jx(r.server,e),u={level:r.logLevel};r.logSerializers&&(u.serializers=r.logSerializers);const d=Wx(r,s,e,l,u);if(d[Hx]=c,!h(e.httpVersion)){d.info({res:{statusCode:505}},"request aborted - invalid HTTP version");const e='{"error":"HTTP Version Not Supported","message":"HTTP Version Not Supported","statusCode":505}';return t.writeHead(505,{"Content-Type":"application/json","Content-Length":e.length}),void t.end(e)}if(!0===m&&(2!==e.httpVersionMajor&&t.setHeader("Connection","close"),p))return t.writeHead(503,{"Content-Type":"application/json","Content-Length":"80"}),t.end('{"error":"Service Unavailable","message":"Service Unavailable","statusCode":503}'),void d.info({res:{statusCode:503}},"request aborted - refusing to accept new requests as server is closing");"keep-alive"==="".toLowerCase.call(e.headers.connection||"")&&!1===f.has(e.socket)&&(f.add(e.socket),e.socket.on("close",sk.bind({keepAliveConnections:f,socket:e.socket}))),void 0!==e.headers[Vx]&&(e.headers["accept-version"]=e.headers[Vx],e.headers[Vx]=void 0);const g=new r.Request(l,n,e,a,d,r),y=new r.Reply(t,g,d);!1===c&&d.info({req:g},"incoming request"),!0!==i&&null===r.onResponse||o(y),null!==r.onRequest?lx(r.onRequest,g,y,rk):rk(null,g,y),null!==r.onRequestAbort&&e.on("close",(()=>{e.aborted&&ix(r.onRequestAbort,g,Xx.bind(null,y))})),null!==r.onTimeout&&(g.raw.socket._meta||g.raw.socket.on("timeout",Zx),g.raw.socket._meta={context:r,request:g,reply:y})}},validateBodyLimitOption:nk};const ak=Yw,ck=Gl,lk=kd,uk=qd,{kRoutePrefix:pk,kCanSetNotFoundHandler:dk,kFourOhFourLevelInstance:hk,kFourOhFourContext:fk,kHooks:mk,kErrorHandler:gk}=Ze,{lifecycleHooks:yk}=Pt,{buildErrorHandler:vk}=Dc,{FST_ERR_NOT_FOUND:bk}=dt,{createChildLogger:Ek}=ec,{getGenReqId:_k}=YS;var Ak={exports:{}},Sk={exports:{}};Sk.exports=kk,Sk.exports.default=kk;const Tk={type:"object",additionalProperties:!1,properties:{connectionTimeout:{type:"integer",default:0},keepAliveTimeout:{type:"integer",default:72e3},forceCloseConnections:{oneOf:[{type:"string",pattern:"idle"},{type:"boolean"}]},maxRequestsPerSocket:{type:"integer",default:0,nullable:!0},requestTimeout:{type:"integer",default:0},bodyLimit:{type:"integer",default:1048576},caseSensitive:{type:"boolean",default:!0},allowUnsafeRegex:{type:"boolean",default:!1},http2:{type:"boolean"},https:{if:{not:{oneOf:[{type:"boolean"},{type:"null"},{type:"object",additionalProperties:!1,required:["allowHTTP1"],properties:{allowHTTP1:{type:"boolean"}}}]}},then:{setDefaultValue:!0}},ignoreTrailingSlash:{type:"boolean",default:!1},ignoreDuplicateSlashes:{type:"boolean",default:!1},disableRequestLogging:{type:"boolean",default:!1},jsonShorthand:{type:"boolean",default:!0},maxParamLength:{type:"integer",default:100},onProtoPoisoning:{type:"string",default:"error"},onConstructorPoisoning:{type:"string",default:"error"},pluginTimeout:{type:"integer",default:1e4},requestIdHeader:{anyOf:[{enum:[!1]},{type:"string"}],default:"request-id"},requestIdLogLabel:{type:"string",default:"reqId"},http2SessionTimeout:{type:"integer",default:72e3},exposeHeadRoutes:{type:"boolean",default:!0},useSemicolonDelimiter:{type:"boolean",default:!0},versioning:{type:"object",additionalProperties:!0,required:["storage","deriveVersion"],properties:{storage:{},deriveVersion:{}}},constraints:{type:"object",additionalProperties:{type:"object",required:["name","storage","validate","deriveConstraint"],additionalProperties:!0,properties:{name:{type:"string"},storage:{},validate:{},deriveConstraint:{}}}}}},wk={}.hasOwnProperty,xk=/idle/u;function kk(e,{instancePath:t="",rootData:n=e}={}){let r=null,s=0;if(0===s){if(!e||"object"!=typeof e||Array.isArray(e))return kk.errors=[{instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{void 0===e.connectionTimeout&&(e.connectionTimeout=0),void 0===e.keepAliveTimeout&&(e.keepAliveTimeout=72e3),void 0===e.maxRequestsPerSocket&&(e.maxRequestsPerSocket=0),void 0===e.requestTimeout&&(e.requestTimeout=0),void 0===e.bodyLimit&&(e.bodyLimit=1048576),void 0===e.caseSensitive&&(e.caseSensitive=!0),void 0===e.allowUnsafeRegex&&(e.allowUnsafeRegex=!1),void 0===e.ignoreTrailingSlash&&(e.ignoreTrailingSlash=!1),void 0===e.ignoreDuplicateSlashes&&(e.ignoreDuplicateSlashes=!1),void 0===e.disableRequestLogging&&(e.disableRequestLogging=!1),void 0===e.jsonShorthand&&(e.jsonShorthand=!0),void 0===e.maxParamLength&&(e.maxParamLength=100),void 0===e.onProtoPoisoning&&(e.onProtoPoisoning="error"),void 0===e.onConstructorPoisoning&&(e.onConstructorPoisoning="error"),void 0===e.pluginTimeout&&(e.pluginTimeout=1e4),void 0===e.requestIdHeader&&(e.requestIdHeader="request-id"),void 0===e.requestIdLogLabel&&(e.requestIdLogLabel="reqId"),void 0===e.http2SessionTimeout&&(e.http2SessionTimeout=72e3),void 0===e.exposeHeadRoutes&&(e.exposeHeadRoutes=!0),void 0===e.useSemicolonDelimiter&&(e.useSemicolonDelimiter=!0);const n=s;for(const t in e)wk.call(Tk.properties,t)||delete e[t];if(n===s){let n=e.connectionTimeout;const u=s;if("number"!=typeof n||n%1||isNaN(n)||!isFinite(n)){let r,s=typeof n;if(void 0===r){if("boolean"!==s&&null!==n&&("string"!==s||!n||n!=+n||n%1))return kk.errors=[{instancePath:t+"/connectionTimeout",schemaPath:"#/properties/connectionTimeout/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;r=+n}void 0!==r&&(n=r,void 0!==e&&(e.connectionTimeout=r))}if(o=u===s){let n=e.keepAliveTimeout;const u=s;if("number"!=typeof n||n%1||isNaN(n)||!isFinite(n)){let r,s=typeof n;if(void 0===r){if("boolean"!==s&&null!==n&&("string"!==s||!n||n!=+n||n%1))return kk.errors=[{instancePath:t+"/keepAliveTimeout",schemaPath:"#/properties/keepAliveTimeout/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;r=+n}void 0!==r&&(n=r,void 0!==e&&(e.keepAliveTimeout=r))}if(o=u===s){if(void 0!==e.forceCloseConnections){let n=e.forceCloseConnections;const a=s,c=s;let l=!1,u=null;const p=s;if("string"!=typeof n){let i,o=typeof n;if(void 0===i)if("number"==o||"boolean"==o)i=""+n;else if(null===n)i="";else{const e={instancePath:t+"/forceCloseConnections",schemaPath:"#/properties/forceCloseConnections/oneOf/0/type",keyword:"type",params:{type:"string"},message:"must be string"};null===r?r=[e]:r.push(e),s++}void 0!==i&&(n=i,void 0!==e&&(e.forceCloseConnections=i))}if(s===p&&"string"==typeof n&&!xk.test(n)){const e={instancePath:t+"/forceCloseConnections",schemaPath:"#/properties/forceCloseConnections/oneOf/0/pattern",keyword:"pattern",params:{pattern:"idle"},message:'must match pattern "idle"'};null===r?r=[e]:r.push(e),s++}p===s&&(l=!0,u=0);const d=s;if("boolean"!=typeof n){let i;if(void 0===i)if("false"===n||0===n||null===n)i=!1;else if("true"===n||1===n)i=!0;else{const e={instancePath:t+"/forceCloseConnections",schemaPath:"#/properties/forceCloseConnections/oneOf/1/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"};null===r?r=[e]:r.push(e),s++}void 0!==i&&(n=i,void 0!==e&&(e.forceCloseConnections=i))}var i;if((i=d===s)&&l?(l=!1,u=[u,1]):i&&(l=!0,u=1),!l){const e={instancePath:t+"/forceCloseConnections",schemaPath:"#/properties/forceCloseConnections/oneOf",keyword:"oneOf",params:{passingSchemas:u},message:"must match exactly one schema in oneOf"};return null===r?r=[e]:r.push(e),s++,kk.errors=r,!1}s=c,null!==r&&(c?r.length=c:r=null);var o=a===s}else o=!0;if(o){let n=e.maxRequestsPerSocket;const i=s;if(("number"!=typeof n||n%1||isNaN(n)||!isFinite(n))&&null!==n){let r,s=typeof n;if(void 0===r)if("boolean"===s||null===n||"string"===s&&n&&n==+n&&!(n%1))r=+n;else{if(""!==n&&0!==n&&!1!==n)return kk.errors=[{instancePath:t+"/maxRequestsPerSocket",schemaPath:"#/properties/maxRequestsPerSocket/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;r=null}void 0!==r&&(n=r,void 0!==e&&(e.maxRequestsPerSocket=r))}if(o=i===s){let n=e.requestTimeout;const i=s;if("number"!=typeof n||n%1||isNaN(n)||!isFinite(n)){let r,s=typeof n;if(void 0===r){if("boolean"!==s&&null!==n&&("string"!==s||!n||n!=+n||n%1))return kk.errors=[{instancePath:t+"/requestTimeout",schemaPath:"#/properties/requestTimeout/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;r=+n}void 0!==r&&(n=r,void 0!==e&&(e.requestTimeout=r))}if(o=i===s){let n=e.bodyLimit;const i=s;if("number"!=typeof n||n%1||isNaN(n)||!isFinite(n)){let r,s=typeof n;if(void 0===r){if("boolean"!==s&&null!==n&&("string"!==s||!n||n!=+n||n%1))return kk.errors=[{instancePath:t+"/bodyLimit",schemaPath:"#/properties/bodyLimit/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;r=+n}void 0!==r&&(n=r,void 0!==e&&(e.bodyLimit=r))}if(o=i===s){let n=e.caseSensitive;const i=s;if("boolean"!=typeof n){let r;if(void 0===r)if("false"===n||0===n||null===n)r=!1;else{if("true"!==n&&1!==n)return kk.errors=[{instancePath:t+"/caseSensitive",schemaPath:"#/properties/caseSensitive/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;r=!0}void 0!==r&&(n=r,void 0!==e&&(e.caseSensitive=r))}if(o=i===s){let n=e.allowUnsafeRegex;const i=s;if("boolean"!=typeof n){let r;if(void 0===r)if("false"===n||0===n||null===n)r=!1;else{if("true"!==n&&1!==n)return kk.errors=[{instancePath:t+"/allowUnsafeRegex",schemaPath:"#/properties/allowUnsafeRegex/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;r=!0}void 0!==r&&(n=r,void 0!==e&&(e.allowUnsafeRegex=r))}if(o=i===s){if(void 0!==e.http2){let n=e.http2;const r=s;if("boolean"!=typeof n){let r;if(void 0===r)if("false"===n||0===n||null===n)r=!1;else{if("true"!==n&&1!==n)return kk.errors=[{instancePath:t+"/http2",schemaPath:"#/properties/http2/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;r=!0}void 0!==r&&(n=r,void 0!==e&&(e.http2=r))}o=r===s}else o=!0;if(o){if(void 0!==e.https){let n=e.https;const i=s,l=s;let u=!0;const p=s,d=s,h=s,f=s;let m=!1;const g=s;if("boolean"!=typeof n){let t;if(void 0===t)if("false"===n||0===n||null===n)t=!1;else if("true"===n||1===n)t=!0;else{const e={};null===r?r=[e]:r.push(e),s++}void 0!==t&&(n=t,void 0!==e&&(e.https=t))}(a=g===s)&&(m=!0);const y=s;if(null!==n){let t;if(void 0===t)if(""===n||0===n||!1===n)t=null;else{const e={};null===r?r=[e]:r.push(e),s++}void 0!==t&&(n=t,void 0!==e&&(e.https=t))}if((a=y===s)&&m)m=!1;else{a&&(m=!0);const e=s;if(s===e)if(n&&"object"==typeof n&&!Array.isArray(n))if(void 0===n.allowHTTP1){const e={};null===r?r=[e]:r.push(e),s++}else{const e=s;for(const e in n)"allowHTTP1"!==e&&delete n[e];if(e===s&&void 0!==n.allowHTTP1){let e=n.allowHTTP1;if("boolean"!=typeof e){let t;if(void 0===t)if("false"===e||0===e||null===e)t=!1;else if("true"===e||1===e)t=!0;else{const e={};null===r?r=[e]:r.push(e),s++}void 0!==t&&(e=t,void 0!==n&&(n.allowHTTP1=t))}}}else{const e={};null===r?r=[e]:r.push(e),s++}var a;(a=e===s)&&m?m=!1:a&&(m=!0)}if(m)s=f,null!==r&&(f?r.length=f:r=null);else{const e={};null===r?r=[e]:r.push(e),s++}if(h===s){const e={};null===r?r=[e]:r.push(e),s++}else s=d,null!==r&&(d?r.length=d:r=null);var c=p===s;if(s=l,null!==r&&(l?r.length=l:r=null),c){const t=s;e.https=!0,u=c=t===s}if(!u){const e={instancePath:t+"/https",schemaPath:"#/properties/https/if",keyword:"if",params:{failingKeyword:"then"},message:'must match "then" schema'};return null===r?r=[e]:r.push(e),s++,kk.errors=r,!1}o=i===s}else o=!0;if(o){let n=e.ignoreTrailingSlash;const i=s;if("boolean"!=typeof n){let r;if(void 0===r)if("false"===n||0===n||null===n)r=!1;else{if("true"!==n&&1!==n)return kk.errors=[{instancePath:t+"/ignoreTrailingSlash",schemaPath:"#/properties/ignoreTrailingSlash/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;r=!0}void 0!==r&&(n=r,void 0!==e&&(e.ignoreTrailingSlash=r))}if(o=i===s){let n=e.ignoreDuplicateSlashes;const i=s;if("boolean"!=typeof n){let r;if(void 0===r)if("false"===n||0===n||null===n)r=!1;else{if("true"!==n&&1!==n)return kk.errors=[{instancePath:t+"/ignoreDuplicateSlashes",schemaPath:"#/properties/ignoreDuplicateSlashes/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;r=!0}void 0!==r&&(n=r,void 0!==e&&(e.ignoreDuplicateSlashes=r))}if(o=i===s){let n=e.disableRequestLogging;const i=s;if("boolean"!=typeof n){let r;if(void 0===r)if("false"===n||0===n||null===n)r=!1;else{if("true"!==n&&1!==n)return kk.errors=[{instancePath:t+"/disableRequestLogging",schemaPath:"#/properties/disableRequestLogging/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;r=!0}void 0!==r&&(n=r,void 0!==e&&(e.disableRequestLogging=r))}if(o=i===s){let n=e.jsonShorthand;const i=s;if("boolean"!=typeof n){let r;if(void 0===r)if("false"===n||0===n||null===n)r=!1;else{if("true"!==n&&1!==n)return kk.errors=[{instancePath:t+"/jsonShorthand",schemaPath:"#/properties/jsonShorthand/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;r=!0}void 0!==r&&(n=r,void 0!==e&&(e.jsonShorthand=r))}if(o=i===s){let n=e.maxParamLength;const i=s;if("number"!=typeof n||n%1||isNaN(n)||!isFinite(n)){let r,s=typeof n;if(void 0===r){if("boolean"!==s&&null!==n&&("string"!==s||!n||n!=+n||n%1))return kk.errors=[{instancePath:t+"/maxParamLength",schemaPath:"#/properties/maxParamLength/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;r=+n}void 0!==r&&(n=r,void 0!==e&&(e.maxParamLength=r))}if(o=i===s){let n=e.onProtoPoisoning;const i=s;if("string"!=typeof n){let r,s=typeof n;if(void 0===r)if("number"==s||"boolean"==s)r=""+n;else{if(null!==n)return kk.errors=[{instancePath:t+"/onProtoPoisoning",schemaPath:"#/properties/onProtoPoisoning/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;r=""}void 0!==r&&(n=r,void 0!==e&&(e.onProtoPoisoning=r))}if(o=i===s){let n=e.onConstructorPoisoning;const i=s;if("string"!=typeof n){let r,s=typeof n;if(void 0===r)if("number"==s||"boolean"==s)r=""+n;else{if(null!==n)return kk.errors=[{instancePath:t+"/onConstructorPoisoning",schemaPath:"#/properties/onConstructorPoisoning/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;r=""}void 0!==r&&(n=r,void 0!==e&&(e.onConstructorPoisoning=r))}if(o=i===s){let n=e.pluginTimeout;const i=s;if("number"!=typeof n||n%1||isNaN(n)||!isFinite(n)){let r,s=typeof n;if(void 0===r){if("boolean"!==s&&null!==n&&("string"!==s||!n||n!=+n||n%1))return kk.errors=[{instancePath:t+"/pluginTimeout",schemaPath:"#/properties/pluginTimeout/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;r=+n}void 0!==r&&(n=r,void 0!==e&&(e.pluginTimeout=r))}if(o=i===s){let n=e.requestIdHeader;const i=s,a=s;let c=!1;const u=s;if(!1!==n){const e={instancePath:t+"/requestIdHeader",schemaPath:"#/properties/requestIdHeader/anyOf/0/enum",keyword:"enum",params:{allowedValues:Tk.properties.requestIdHeader.anyOf[0].enum},message:"must be equal to one of the allowed values"};null===r?r=[e]:r.push(e),s++}var l=u===s;if(c=c||l,!c){const i=s;if("string"!=typeof n){let i,o=typeof n;if(void 0===i)if("number"==o||"boolean"==o)i=""+n;else if(null===n)i="";else{const e={instancePath:t+"/requestIdHeader",schemaPath:"#/properties/requestIdHeader/anyOf/1/type",keyword:"type",params:{type:"string"},message:"must be string"};null===r?r=[e]:r.push(e),s++}void 0!==i&&(n=i,void 0!==e&&(e.requestIdHeader=i))}l=i===s,c=c||l}if(!c){const e={instancePath:t+"/requestIdHeader",schemaPath:"#/properties/requestIdHeader/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return null===r?r=[e]:r.push(e),s++,kk.errors=r,!1}if(s=a,null!==r&&(a?r.length=a:r=null),o=i===s){let n=e.requestIdLogLabel;const r=s;if("string"!=typeof n){let r,s=typeof n;if(void 0===r)if("number"==s||"boolean"==s)r=""+n;else{if(null!==n)return kk.errors=[{instancePath:t+"/requestIdLogLabel",schemaPath:"#/properties/requestIdLogLabel/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;r=""}void 0!==r&&(n=r,void 0!==e&&(e.requestIdLogLabel=r))}if(o=r===s){let n=e.http2SessionTimeout;const r=s;if("number"!=typeof n||n%1||isNaN(n)||!isFinite(n)){let r,s=typeof n;if(void 0===r){if("boolean"!==s&&null!==n&&("string"!==s||!n||n!=+n||n%1))return kk.errors=[{instancePath:t+"/http2SessionTimeout",schemaPath:"#/properties/http2SessionTimeout/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;r=+n}void 0!==r&&(n=r,void 0!==e&&(e.http2SessionTimeout=r))}if(o=r===s){let n=e.exposeHeadRoutes;const r=s;if("boolean"!=typeof n){let r;if(void 0===r)if("false"===n||0===n||null===n)r=!1;else{if("true"!==n&&1!==n)return kk.errors=[{instancePath:t+"/exposeHeadRoutes",schemaPath:"#/properties/exposeHeadRoutes/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;r=!0}void 0!==r&&(n=r,void 0!==e&&(e.exposeHeadRoutes=r))}if(o=r===s){let n=e.useSemicolonDelimiter;const r=s;if("boolean"!=typeof n){let r;if(void 0===r)if("false"===n||0===n||null===n)r=!1;else{if("true"!==n&&1!==n)return kk.errors=[{instancePath:t+"/useSemicolonDelimiter",schemaPath:"#/properties/useSemicolonDelimiter/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;r=!0}void 0!==r&&(n=r,void 0!==e&&(e.useSemicolonDelimiter=r))}if(o=r===s){if(void 0!==e.versioning){let n=e.versioning;const r=s;if(s===r){if(!n||"object"!=typeof n||Array.isArray(n))return kk.errors=[{instancePath:t+"/versioning",schemaPath:"#/properties/versioning/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{let e;if(void 0===n.storage&&(e="storage")||void 0===n.deriveVersion&&(e="deriveVersion"))return kk.errors=[{instancePath:t+"/versioning",schemaPath:"#/properties/versioning/required",keyword:"required",params:{missingProperty:e},message:"must have required property '"+e+"'"}],!1}}o=r===s}else o=!0;if(o)if(void 0!==e.constraints){let n=e.constraints;const r=s;if(s===r){if(!n||"object"!=typeof n||Array.isArray(n))return kk.errors=[{instancePath:t+"/constraints",schemaPath:"#/properties/constraints/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;for(const e in n){let r=n[e];const i=s;if(s===i){if(!r||"object"!=typeof r||Array.isArray(r))return kk.errors=[{instancePath:t+"/constraints/"+e.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/constraints/additionalProperties/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{let n;if(void 0===r.name&&(n="name")||void 0===r.storage&&(n="storage")||void 0===r.validate&&(n="validate")||void 0===r.deriveConstraint&&(n="deriveConstraint"))return kk.errors=[{instancePath:t+"/constraints/"+e.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/constraints/additionalProperties/required",keyword:"required",params:{missingProperty:n},message:"must have required property '"+n+"'"}],!1;if(void 0!==r.name){let n=r.name;if("string"!=typeof n){let s,i=typeof n;if(void 0===s)if("number"==i||"boolean"==i)s=""+n;else{if(null!==n)return kk.errors=[{instancePath:t+"/constraints/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/name",schemaPath:"#/properties/constraints/additionalProperties/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;s=""}void 0!==s&&(n=s,void 0!==r&&(r.name=s))}}}}if(i!==s)break}}o=r===s}else o=!0}}}}}}}}}}}}}}}}}}}}}}}}}}return kk.errors=r,0===s}Sk.exports.defaultInitOptions={connectionTimeout:0,keepAliveTimeout:72e3,maxRequestsPerSocket:0,requestTimeout:0,bodyLimit:1048576,caseSensitive:!0,allowUnsafeRegex:!1,disableRequestLogging:!1,jsonShorthand:!0,ignoreTrailingSlash:!1,ignoreDuplicateSlashes:!1,maxParamLength:100,onProtoPoisoning:"error",onConstructorPoisoning:"error",pluginTimeout:1e4,requestIdHeader:"request-id",requestIdLogLabel:"reqId",http2SessionTimeout:72e3,exposeHeadRoutes:!0,useSemicolonDelimiter:!0};const Ck=Sk.exports,Ik=tc({circles:!0,proto:!1}),{FST_ERR_INIT_OPTS_INVALID:Rk}=dt;function Ok(e){const t=Object.getOwnPropertyNames(e);for(const n of t){const t=e[n];(!ArrayBuffer.isView(t)||t instanceof DataView)&&(e[n]=t&&"object"==typeof t?Ok(t):t)}return Object.freeze(e)}Ak.exports=function(e){const t=Ik(e);if(!Ck(t)){const e=new Rk(JSON.stringify(Ck.errors.map((e=>e.message))));throw e.errors=Ck.errors,e}return Ok(t)},Ak.exports.defaultInitOptions=Ck.defaultInitOptions,Ak.exports.utils={deepFreezeObject:Ok};var Nk=Ak.exports;const{kAvvioBoot:Dk,kChildren:Pk,kRoutePrefix:Lk,kLogLevel:Mk,kLogSerializers:Bk,kHooks:jk,kSchemaController:Fk,kContentTypeParser:$k,kReply:Uk,kRequest:Hk,kFourOhFour:Gk,kPluginNameChain:qk}=Ze,zk=Gl,Vk=kd,Yk=qS,Kk=Nh,{buildHooks:Qk}=Pt,Wk=VS;var Jk,Xk,Zk,eC={exports:{}},tC={exports:{}},nC={};function rC(){if(Jk)return nC;Jk=1,nC.parse=function(e,t){if("string"!=typeof e)throw new TypeError("argument str must be a string");for(var r={},i=(t||{}).decode||n,o=0;e.length>o;){var a=e.indexOf("=",o);if(-1===a)break;var c=e.indexOf(";",o);if(-1===c)c=e.length;else if(a>c){o=e.lastIndexOf(";",a-1)+1;continue}var l=e.slice(o,a).trim();if(void 0===r[l]){var u=e.slice(a+1,c).trim();34===u.charCodeAt(0)&&(u=u.slice(1,-1)),r[l]=s(u,i)}o=c+1}return r},nC.serialize=function(n,s,i){var o=i||{},a=o.encode||r;if("function"!=typeof a)throw new TypeError("option encode is invalid");if(!t.test(n))throw new TypeError("argument name is invalid");var c=a(s);if(c&&!t.test(c))throw new TypeError("argument val is invalid");var l=n+"="+c;if(null!=o.maxAge){var u=o.maxAge-0;if(isNaN(u)||!isFinite(u))throw new TypeError("option maxAge is invalid");l+="; Max-Age="+Math.floor(u)}if(o.domain){if(!t.test(o.domain))throw new TypeError("option domain is invalid");l+="; Domain="+o.domain}if(o.path){if(!t.test(o.path))throw new TypeError("option path is invalid");l+="; Path="+o.path}if(o.expires){var p=o.expires;if(!function(t){return"[object Date]"===e.call(t)||t instanceof Date}(p)||isNaN(p.valueOf()))throw new TypeError("option expires is invalid");l+="; Expires="+p.toUTCString()}if(o.httpOnly&&(l+="; HttpOnly"),o.secure&&(l+="; Secure"),o.partitioned&&(l+="; Partitioned"),o.priority)switch("string"==typeof o.priority?o.priority.toLowerCase():o.priority){case"low":l+="; Priority=Low";break;case"medium":l+="; Priority=Medium";break;case"high":l+="; Priority=High";break;default:throw new TypeError("option priority is invalid")}if(o.sameSite)switch("string"==typeof o.sameSite?o.sameSite.toLowerCase():o.sameSite){case!0:l+="; SameSite=Strict";break;case"lax":l+="; SameSite=Lax";break;case"strict":l+="; SameSite=Strict";break;case"none":l+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return l};var e={}.toString,t=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function n(e){return-1!==e.indexOf("%")?decodeURIComponent(e):e}function r(e){return encodeURIComponent(e)}function s(e,t){try{return t(e)}catch(t){return e}}return nC}var sC,iC,oC,aC,cC,lC={},uC={exports:{}};function pC(){if(oC)return uC.exports;oC=1;var e={decodeValues:!0,map:!1,silent:!1};function t(e){return"string"==typeof e&&!!e.trim()}function n(n,r){var s=n.split(";").filter(t),i=function(e){var t="",n="",r=e.split("=");return r.length>1?(t=r.shift(),n=r.join("=")):n=e,{name:t,value:n}}(s.shift()),o=i.name,a=i.value;r=r?Object.assign({},e,r):e;try{a=r.decodeValues?decodeURIComponent(a):a}catch(e){}var c={name:o,value:a};return s.forEach((function(e){var t=e.split("="),n=t.shift().trimLeft().toLowerCase(),r=t.join("=");"expires"===n?c.expires=new Date(r):"max-age"===n?c.maxAge=parseInt(r,10):"secure"===n?c.secure=!0:"httponly"===n?c.httpOnly=!0:"samesite"===n?c.sameSite=r:c[n]=r})),c}function r(r,s){return s=s?Object.assign({},e,s):e,r?(r.headers&&(r="function"==typeof r.headers.getSetCookie?r.headers.getSetCookie():r.headers["set-cookie"]?r.headers["set-cookie"]:r.headers[Object.keys(r.headers).find((function(e){return"set-cookie"===e.toLowerCase()}))]),Array.isArray(r)||(r=[r]),(s=s?Object.assign({},e,s):e).map?r.filter(t).reduce((function(e,t){var r=n(t,s);return e[r.name]=r,e}),{}):r.filter(t).map((function(e){return n(e,s)}))):s.map?{}:[]}return uC.exports=r,uC.exports.parse=r,uC.exports.parseString=n,uC.exports.splitCookiesString=function(e){if(Array.isArray(e))return e;if("string"!=typeof e)return[];var t,n,r,s,i,o=[],a=0;function c(){for(;e.length>a&&/\s/.test(e.charAt(a));)a+=1;return e.length>a}for(;e.length>a;){for(t=a,i=!1;c();)if(","===(n=e.charAt(a))){for(r=a,a+=1,c(),s=a;e.length>a&&"="!==(n=e.charAt(a))&&";"!==n&&","!==n;)a+=1;e.length>a&&"="===e.charAt(a)?(i=!0,a=s,o.push(e.substring(t,r)),t=a):a=r+1}else a+=1;i&&e.length>a||o.push(e.substring(t,e.length))}return o},uC.exports}var dC,hC,fC={exports:{}};const mC=Xe,gC=n;let yC;const{kAvvioBoot:vC,kChildren:bC,kServerBindings:EC,kBodyLimit:_C,kRoutePrefix:AC,kLogLevel:SC,kLogSerializers:TC,kHooks:wC,kSchemaController:xC,kRequestAcceptVersion:kC,kReplySerializerDefault:CC,kContentTypeParser:IC,kReply:RC,kRequest:OC,kFourOhFour:NC,kState:DC,kOptions:PC,kPluginNameChain:LC,kSchemaErrorFormatter:MC,kErrorHandler:BC,kKeepAliveConnections:jC,kChildLoggerFactory:FC,kGenReqId:$C}=Ze,{createServer:UC,compileValidateHTTPVersion:HC}=et,GC=Gl,qC=kd,zC=qd,{supportedMethods:VC}=zd,YC=ah,KC=Nh,QC=qS,{Hooks:WC,hookRunnerApplication:JC,supportedHooks:XC}=Pt,{createLogger:ZC,createChildLogger:eI,defaultChildLoggerFactory:tI}=ec,nI=VS,{getGenReqId:rI,reqIdGenFactory:sI}=YS,{buildRouting:iI,validateBodyLimitOption:oI}=ok,aI=function(e){const{logger:t,disableRequestLogging:n}=e,r=ak({onBadUrl:function(e,n,r){const i=this[hk][fk],o=_k(i.server,n),a=Ek(i,t,n,o),c=new lk(o,null,n,null,a,i),l=new ck(r,c,a);s(c,l)},defaultRoute:function(e,n){const s=this[hk][fk],i=_k(s.server,e),o=Ek(s,t,e,i);o.info({req:e},"incoming request");const a=new lk(i,null,e,null,o,s),c=new ck(n,a,o);a.log.warn("the default handler for 404 did not catch this, this is likely a fastify bug, please report it"),a.log.warn(r.prettyPrint()),c.code(404).send(new bk)}});let s=null;return{router:r,setNotFoundHandler:function(e,t,n,r){void 0===this[dk]&&(this[dk]=!0),void 0===this[fk]&&(this[fk]=null);const a=this,c=this[pk]||"/";if(!1===this[dk])throw Error(`Not found handler already set for Fastify instance with prefix: '${c}'`);"object"==typeof e&&(e.preHandler&&(e.preHandler=Array.isArray(e.preHandler)?e.preHandler.map((e=>e.bind(a))):e.preHandler.bind(a)),e.preValidation&&(e.preValidation=Array.isArray(e.preValidation)?e.preValidation.map((e=>e.bind(a))):e.preValidation.bind(a))),"function"==typeof e&&(t=e,e=void 0),e=e||{},t?(this[hk][dk]=!1,t=t.bind(this),s=t):(t=i,s=i),this.after(((s,i)=>{o.call(this,c,e,t,n,r),i(s)}))},setContext:function(e,t){const n=Object.assign({},e[fk]);n.onSend=t.onSend,t[fk]=n},arrange404:function(e){e[hk]=e,e[dk]=!0,r.onBadUrl=r.onBadUrl.bind(e),r.defaultRoute=r.defaultRoute.bind(e)}};function i(e,t){const{url:r,method:s}=e.raw,i=`Route ${s}:${r} not found`;n||e.log.info(i),t.code(404).send({message:i,error:"Not Found",statusCode:404})}function o(e,t,n,s,i){const o=new uk({schema:t.schema,handler:n,config:t.config||{},server:this});s.once("preReady",(()=>{const e=this[fk];for(const n of yk){const r=this[mk][n].concat(t[n]||[]).map((e=>e.bind(this)));e[n]=r.length?r:null}e.errorHandler=t.errorHandler?vk(this[gk],t.errorHandler):this[gk]})),null===this[fk]||"/"!==e?(this[hk][fk]=o,r.all(e+(e.endsWith("/")?"*":"/*"),i,o),r.all(e,i,o)):Object.assign(this[fk],o)}},cI=Nk,lI=function(e,t,n){const r=Wk.registerPlugin.call(e,t),s=Wk.getPluginName(t)||Wk.getFuncPreview(t);if(r)return e[qk].push(s),e;const i=Object.create(e);var o,a;e[Pk].push(i),i.ready=e[Dk].bind(i),i[Pk]=[],i[Uk]=zk.buildReply(i[Uk]),i[Hk]=Vk.buildRequest(i[Hk]),i[$k]=Kk.helpers.buildContentTypeParser(i[$k]),i[jk]=Qk(i[jk]),i[Lk]=(o=i[Lk],(a=n.prefix)?(o.endsWith("/")&&"/"===a[0]?a=a.slice(1):"/"!==a[0]&&(a="/"+a),o+a):o),i[Mk]=n.logLevel||i[Mk],i[Fk]=Yk.buildSchemaController(e[Fk]),i.getSchema=i[Fk].getSchema.bind(i[Fk]),i.getSchemas=i[Fk].getSchemas.bind(i[Fk]),i[Wk.kRegisteredPlugins]=Object.create(i[Wk.kRegisteredPlugins]),i[qk]=[s],(i[Bk]||n.logSerializers)&&(i[Bk]=Object.assign(Object.create(i[Bk]),n.logSerializers)),n.prefix&&i[Gk].arrange404(i);for(const e of i[jk].onRegister)e.call(this,i,n);return i},{FSTDEP009:uI}=ct,{appendStackTrace:pI,AVVIO_ERRORS_MAP:dI,...hI}=dt,{defaultInitOptions:fI}=cI,{FST_ERR_ASYNC_CONSTRAINT:mI,FST_ERR_BAD_URL:gI,FST_ERR_FORCE_CLOSE_CONNECTIONS_IDLE_NOT_AVAILABLE:yI,FST_ERR_OPTIONS_NOT_OBJ:vI,FST_ERR_QSP_NOT_FN:bI,FST_ERR_SCHEMA_CONTROLLER_BUCKET_OPT_NOT_FN:EI,FST_ERR_AJV_CUSTOM_OPTIONS_OPT_NOT_OBJ:_I,FST_ERR_AJV_CUSTOM_OPTIONS_OPT_NOT_ARR:AI,FST_ERR_VERSION_CONSTRAINT_NOT_STR:SI,FST_ERR_INSTANCE_ALREADY_LISTENING:TI,FST_ERR_REOPENED_CLOSE_SERVER:wI,FST_ERR_ROUTE_REWRITE_NOT_STR:xI,FST_ERR_SCHEMA_ERROR_FORMATTER_NOT_FN:kI,FST_ERR_ERROR_HANDLER_NOT_FN:CI}=hI,{buildErrorHandler:II}=Dc;function RI(e){const t={};return["errorHandler","logLevel","logSerializers"].concat(XC).forEach((n=>{t[n]=e.store[n]})),Object.assign({},t)}function OI(r){if("object"!=typeof(r=r||{}))throw new vI;if(r.querystringParser&&"function"!=typeof r.querystringParser)throw new bI(typeof r.querystringParser);if(r.schemaController&&r.schemaController.bucket&&"function"!=typeof r.schemaController.bucket)throw new EI(typeof r.schemaController.bucket);oI(r.bodyLimit);const s=!1!==r.requestIdHeader&&(r.requestIdHeader||fI.requestIdHeader).toLowerCase(),o=sI(s,r.genReqId),a=r.requestIdLogLabel||"reqId",c=r.bodyLimit||fI.bodyLimit,l=r.disableRequestLogging||!1,u=Object.assign({customOptions:{},plugins:[]},r.ajv),p=r.frameworkErrors;if(!u.customOptions||"[object Object]"!=={}.toString.call(u.customOptions))throw new _I(typeof u.customOptions);if(!u.plugins||!Array.isArray(u.plugins))throw new AI(typeof u.plugins);const{logger:d,hasLogger:h}=ZC(r);r.connectionTimeout=r.connectionTimeout||fI.connectionTimeout,r.keepAliveTimeout=r.keepAliveTimeout||fI.keepAliveTimeout,r.maxRequestsPerSocket=r.maxRequestsPerSocket||fI.maxRequestsPerSocket,r.requestTimeout=r.requestTimeout||fI.requestTimeout,r.logger=d,r.requestIdHeader=s,r.requestIdLogLabel=a,r.disableRequestLogging=l,r.ajv=u,r.clientErrorHandler=r.clientErrorHandler||function(e,t){if("ECONNRESET"===e.code||t.destroyed)return;let n,r,s,i;"ERR_HTTP_REQUEST_TIMEOUT"===e.code?(r="408",s=gC.STATUS_CODES[r],n=`{"error":"${s}","message":"Client Timeout","statusCode":408}`,i="timeout"):"HPE_HEADER_OVERFLOW"===e.code?(r="431",s=gC.STATUS_CODES[r],n=`{"error":"${s}","message":"Exceeded maximum allowed HTTP header size","statusCode":431}`,i="header_overflow"):(r="400",s=gC.STATUS_CODES[r],n=`{"error":"${s}","message":"Client Error","statusCode":400}`,i="error"),this.log.trace({err:e},"client "+i),t.writable&&t.write(`HTTP/1.1 ${r} ${s}\r\nContent-Length: ${n.length}\r\nContent-Type: application/json\r\n\r\n${n}`),t.destroy(e)};const f=cI(r);r.exposeHeadRoutes=f.exposeHeadRoutes;let m=r.constraints;r.versioning&&(uI(),m={...m,version:{name:"version",mustMatchWhenDerived:!0,storage:r.versioning.storage,deriveConstraint:r.versioning.deriveVersion,validate(e){if("string"!=typeof e)throw new SI}}});const g=iI({config:{defaultRoute:function(e,t){void 0!==e.headers["accept-version"]&&(e.headers[kC]=e.headers["accept-version"],e.headers["accept-version"]=void 0),E.router.lookup(e,t)},onBadUrl:function(e,t,n){if(p){const r=rI(D.server,t),s=eI(D,d,t,r),i=new qC(r,null,t,null,s,D),o=new GC(n,i,s);return!1===l&&s.info({req:i},"incoming request"),p(new gI(e),i,o)}const r=`{"error":"Bad Request","code":"FST_ERR_BAD_URL","message":"'${e}' is not a valid url component","statusCode":400}`;n.writeHead(400,{"Content-Type":"application/json","Content-Length":r.length}),n.end(r)},constraints:m,ignoreTrailingSlash:r.ignoreTrailingSlash||fI.ignoreTrailingSlash,ignoreDuplicateSlashes:r.ignoreDuplicateSlashes||fI.ignoreDuplicateSlashes,maxParamLength:r.maxParamLength||fI.maxParamLength,caseSensitive:r.caseSensitive,allowUnsafeRegex:r.allowUnsafeRegex||fI.allowUnsafeRegex,buildPrettyMeta:RI,querystringParser:r.querystringParser,useSemicolonDelimiter:r.useSemicolonDelimiter??fI.useSemicolonDelimiter}}),E=aI(r),_=function(e,{rewriteUrl:t}){let n;return function(r,s){if(void 0===n&&(n=e.isAsyncConstraint()),t){r.originalUrl=r.url;const e=t.call(R,r);if("string"==typeof e)r.url=e;else{const t=new xI(r.url,typeof e);r.destroy(t)}}e.routing(r,s,function(e,t,n){if(!1!==e)return function(e){if(e){if(p){const e=rI(D.server,t),r=eI(D,d,t,e),s=new qC(e,null,t,null,r,D),i=new GC(n,s,r);return!1===l&&r.info({req:s},"incoming request"),p(new mI,s,i)}const e='{"error":"Internal Server Error","message":"Unexpected error from async constraint","statusCode":500}';n.writeHead(500,{"Content-Type":"application/json","Content-Length":e.length}),n.end(e)}}}(n,r,s))}}(g,r);r.http2SessionTimeout=f.http2SessionTimeout;const{server:A,listen:S}=UC(r,_),T="function"==typeof A.closeAllConnections,w="function"==typeof A.closeIdleConnections;let x=r.forceCloseConnections;if("idle"===x&&!w)throw new yI;"boolean"!=typeof x&&(x=!!w&&"idle");const k=T||!0!==x?{[Symbol.iterator]:function*(){},add(){},delete(){},has:()=>!0}:new Set,C=GC.setupResponseListeners,I=QC.buildSchemaController(null,r.schemaController),R={[DC]:{listening:!1,closing:!1,started:!1,ready:!1,booting:!1,readyPromise:null},[jC]:k,[PC]:r,[bC]:[],[EC]:[],[_C]:c,[AC]:"",[SC]:"",[TC]:null,[wC]:new WC,[xC]:I,[MC]:null,[BC]:II(),[FC]:tI,[CC]:null,[IC]:new KC(c,r.onProtoPoisoning||fI.onProtoPoisoning,r.onConstructorPoisoning||fI.onConstructorPoisoning),[RC]:GC.buildReply(GC),[OC]:qC.buildRequest(qC,r.trustProxy),[NC]:E,[nI.kRegisteredPlugins]:[],[LC]:["fastify"],[vC]:null,[$C]:o,routing:_,getDefaultRoute:g.getDefaultRoute.bind(g),setDefaultRoute:g.setDefaultRoute.bind(g),delete:function(e,t,n){return g.prepareRoute.call(this,{method:"DELETE",url:e,options:t,handler:n})},get:function(e,t,n){return g.prepareRoute.call(this,{method:"GET",url:e,options:t,handler:n})},head:function(e,t,n){return g.prepareRoute.call(this,{method:"HEAD",url:e,options:t,handler:n})},patch:function(e,t,n){return g.prepareRoute.call(this,{method:"PATCH",url:e,options:t,handler:n})},post:function(e,t,n){return g.prepareRoute.call(this,{method:"POST",url:e,options:t,handler:n})},put:function(e,t,n){return g.prepareRoute.call(this,{method:"PUT",url:e,options:t,handler:n})},options:function(e,t,n){return g.prepareRoute.call(this,{method:"OPTIONS",url:e,options:t,handler:n})},all:function(e,t,n){return g.prepareRoute.call(this,{method:VC,url:e,options:t,handler:n})},route:function(e){return g.route.call(this,{options:e})},hasRoute:function(e){return g.hasRoute.call(this,{options:e})},findRoute:function(e){return g.findRoute(e)},log:d,withTypeProvider:function(){return this},addHook:function(e,t){if(P('Cannot call "addHook"!'),null==t)throw new hI.FST_ERR_HOOK_INVALID_HANDLER(e,t);if("onSend"===e||"preSerialization"===e||"onError"===e||"preParsing"===e){if("AsyncFunction"===t.constructor.name&&4===t.length)throw new hI.FST_ERR_HOOK_INVALID_ASYNC_HANDLER}else if("onReady"===e||"onListen"===e){if("AsyncFunction"===t.constructor.name&&0!==t.length)throw new hI.FST_ERR_HOOK_INVALID_ASYNC_HANDLER}else if("onRequestAbort"===e){if("AsyncFunction"===t.constructor.name&&1!==t.length)throw new hI.FST_ERR_HOOK_INVALID_ASYNC_HANDLER}else if("AsyncFunction"===t.constructor.name&&3===t.length)throw new hI.FST_ERR_HOOK_INVALID_ASYNC_HANDLER;return"onClose"===e?this.onClose(t):"onReady"===e||"onListen"===e||"onRoute"===e?this[wC].add(e,t):this.after(((r,s)=>{n.call(this,e,t),s(r)})),this;function n(e,t){this[wC].add(e,t),this[bC].forEach((r=>n.call(r,e,t)))}},addSchema:function(e){return P('Cannot call "addSchema"!'),this[xC].add(e),this[bC].forEach((t=>t.addSchema(e))),this},getSchema:I.getSchema.bind(I),getSchemas:I.getSchemas.bind(I),setValidatorCompiler:function(e){return P('Cannot call "setValidatorCompiler"!'),this[xC].setValidatorCompiler(e),this},setSerializerCompiler:function(e){return P('Cannot call "setSerializerCompiler"!'),this[xC].setSerializerCompiler(e),this},setSchemaController:function(e){P('Cannot call "setSchemaController"!');const t=this[xC],n=QC.buildSchemaController(t,Object.assign({},t.opts,e));return this[xC]=n,this.getSchema=n.getSchema.bind(n),this.getSchemas=n.getSchemas.bind(n),this},setReplySerializer:function(e){return P('Cannot call "setReplySerializer"!'),this[CC]=e,this},setSchemaErrorFormatter:function(e){return P('Cannot call "setSchemaErrorFormatter"!'),NI(e),this[MC]=e.bind(this),this},setGenReqId:function(e){return P('Cannot call "setGenReqId"!'),this[$C]=sI(this[PC].requestIdHeader,e),this},addContentTypeParser:KC.helpers.addContentTypeParser,hasContentTypeParser:KC.helpers.hasContentTypeParser,getDefaultJsonParser:KC.defaultParsers.getDefaultJsonParser,defaultTextParser:KC.defaultParsers.defaultTextParser,removeContentTypeParser:KC.helpers.removeContentTypeParser,removeAllContentTypeParsers:KC.helpers.removeAllContentTypeParsers,register:null,after:null,ready:null,onClose:null,close:null,printPlugins:null,hasPlugin:function(e){return this[nI.kRegisteredPlugins].includes(e)||this[LC].includes(e)},listen:S,server:A,addresses:function(){const e=this[EC].map((e=>e.address()));return e.push(this.server.address()),e.filter((e=>e))},decorate:YC.add,hasDecorator:YC.exist,decorateReply:YC.decorateReply,decorateRequest:YC.decorateRequest,hasRequestDecorator:YC.existRequest,hasReplyDecorator:YC.existReply,inject:function(r,s){if(void 0===yC&&(yC=function(){if(hC)return eC.exports;hC=1;const r=y,s=function(){if(iC)return tC.exports;iC=1;const{Readable:n,addAbortSignal:r}=i,s=t,o=rC(),a=y,{createDeprecation:c}=it,l=function(){if(Zk)return Xk;Zk=1;const{URL:e}=v,t="http://localhost";return Xk=function(n,r){"string"!=typeof n&&"[object String]"!=={}.toString.call(n)||!n.startsWith("//")||(n=t+n);const s="object"==typeof n?Object.assign(new e(t),n):new e(n,t);if("string"==typeof r){r=new URLSearchParams(r);for(const e of r.keys()){s.searchParams.delete(e);for(const t of r.getAll(e))s.searchParams.append(e,t)}}else{const e=Object.assign({},n.query,r);for(const t in e){const n=e[t];if(Array.isArray(n)){s.searchParams.delete(t);for(const e of n)s.searchParams.append(t,e)}else s.searchParams.set(t,n)}}return s},Xk}(),{isFormDataLike:u,formDataToStream:p}=function(){if(sC)return lC;sC=1;const{randomUUID:e}=b,{Readable:t}=i;let n;return lC.isFormDataLike=function(e){return e&&"object"==typeof e&&"function"==typeof e.append&&"function"==typeof e.delete&&"function"==typeof e.get&&"function"==typeof e.getAll&&"function"==typeof e.has&&"function"==typeof e.set&&"FormData"===e[Symbol.toStringTag]},lC.formDataToStream=function(r){n=n??new TextEncoder;const s="----formdata-"+e(),i=`--${s}\r\nContent-Disposition: form-data`
/*! formdata-polyfill. MIT License. Jimmy Wärting <https://jimmy.warting.se/opensource> */,o=e=>e.replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22"),a=e=>e.replace(/\r?\n|\r/g,"\r\n"),c=new Uint8Array([13,10]);return{stream:t.from(async function*(){for(const[e,t]of r)if("string"==typeof t)yield n.encode(`${i}; name="${o(a(e))}"\r\n\r\n`),yield n.encode(a(t)+"\r\n");else{let r=`${i}; name="${o(a(e))}"`;t.name&&(r+=`; filename="${o(t.name)}"`),r+=`\r\nContent-Type: ${t.type||"application/octet-stream"}\r\n\r\n`,yield n.encode(r),t.stream?yield*t.stream():yield t,yield c}yield n.encode(`--${s}--`)}()),contentType:"multipart/form-data; boundary="+s}},lC}(),{EventEmitter:d}=e,h=c({name:"FastifyDeprecationLightMyRequest",code:"FST_LIGHTMYREQUEST_DEP01",message:'You are accessing "request.connection", use "request.socket" instead.'});class f extends d{constructor(e){super(),this.remoteAddress=e}}function m(e){return new function(t){g.call(t,{...e,Request:void 0}),Object.assign(this,t);for(const e of Object.keys(g.prototype))this.constructor.prototype[e]=g.prototype[e];return s.inherits(this.constructor,e.Request),this}(this)}function g(e){n.call(this,{autoDestroy:!1});const t=l(e.url||e.path,e.query);this.url=t.pathname+t.search,this.aborted=!1,this.httpVersionMajor=1,this.httpVersionMinor=1,this.httpVersion="1.1",this.method=e.method?e.method.toUpperCase():"GET",this.headers={},this.rawHeaders=[];const s=e.headers||{};for(const e in s){const t=e.toLowerCase();if(("user-agent"===t||"content-type"===t)&&void 0===s[e]){this.headers[t]=void 0;continue}const n=s[e];a(void 0!==n,'invalid value "undefined" for header '+e),this.headers[t]=""+n}if("user-agent"in this.headers==0&&(this.headers["user-agent"]="lightMyRequest"),this.headers.host=this.headers.host||e.authority||function(e){return e.port?e.host:e.hostname+("https:"===e.protocol?":443":":80")}(t),e.cookies){const{cookies:t}=e,n=Object.keys(t).map((e=>o.serialize(e,t[e])));this.headers.cookie&&n.unshift(this.headers.cookie),this.headers.cookie=n.join("; ")}this.socket=new f(e.remoteAddress||"127.0.0.1"),Object.defineProperty(this,"connection",{get(){return h(),this.socket},configurable:!0});let i=e.payload||e.body||null,c=i&&"function"==typeof i.resume;if(u(i)){const e=p(i);i=e.stream,c=!0,this.headers["content-type"]=e.contentType}!i||"string"==typeof i||c||Buffer.isBuffer(i)||(i=JSON.stringify(i),"content-type"in this.headers==0&&(this.headers["content-type"]="application/json")),!i||c||{}.hasOwnProperty.call(this.headers,"content-length")||(this.headers["content-length"]=""+(Buffer.isBuffer(i)?i.length:Buffer.byteLength(i)));for(const e of Object.keys(this.headers))this.rawHeaders.push(e,this.headers[e]);this._lightMyRequest={payload:i,isDone:!1,simulate:e.simulate||{}};const d=e.signal;return d&&r(d,this),this}return s.inherits(g,n),s.inherits(m,g),g.prototype.prepare=function(e){const t=this._lightMyRequest.payload;if(!t||"function"!=typeof t.resume)return e();const n=[];t.on("data",(e=>n.push(Buffer.from(e)))),t.on("end",(()=>{const t=Buffer.concat(n);return this.headers["content-length"]=this.headers["content-length"]||""+t.length,this._lightMyRequest.payload=t,e()})),t.resume()},g.prototype._read=function(e){setImmediate((()=>{this._lightMyRequest.isDone||(this._lightMyRequest.isDone=!0,this._lightMyRequest.payload&&(this._lightMyRequest.simulate.split?(this.push(this._lightMyRequest.payload.slice(0,1)),this.push(this._lightMyRequest.payload.slice(1))):this.push(this._lightMyRequest.payload)),this._lightMyRequest.simulate.error&&this.emit("error",Error("Simulated")),this._lightMyRequest.simulate.close&&this.emit("close")),!1!==this._lightMyRequest.simulate.end&&this.push(null)}))},g.prototype.destroy=function(e){this.destroyed||this._lightMyRequest.isDone||(this.destroyed=!0,e&&(this._error=!0,process.nextTick((()=>this.emit("error",e)))),process.nextTick((()=>this.emit("close"))))},tC.exports=g,tC.exports.Request=g,tC.exports.CustomRequest=m,tC.exports}(),o=function(){if(cC)return aC;cC=1;const e=n,{Writable:r,Readable:s}=i,o=t,a=pC();function c(t,n,i){e.ServerResponse.call(this,t),this._lightMyRequest={headers:null,trailers:{},payloadChunks:[]},this.setHeader("foo","bar"),this.removeHeader("foo"),this.assignSocket(new r({write(e,t,n){setImmediate(n)}})),this._promiseCallback="function"==typeof i;let o=!1;const c=e=>{if(o=!0,this._promiseCallback)return process.nextTick((()=>n(e)));process.nextTick((()=>n(null,e)))},u=e=>{if(!o){if(o=!0,this._promiseCallback)return process.nextTick((()=>i(e)));process.nextTick((()=>n(e,null)))}};this.once("finish",(()=>{const e=function(e){null===e._lightMyRequest.headers&&l(e),function(e){const t=e._lightMyRequest.headers;for(const e of Object.keys(t)){const n=t[e];t[e]=Array.isArray(n)?n.map((e=>""+e)):""+n}}(e);const t={raw:{res:e},headers:e._lightMyRequest.headers,statusCode:e.statusCode,statusMessage:e.statusMessage,trailers:{},get cookies(){return a.parse(this)}},n=Buffer.concat(e._lightMyRequest.payloadChunks);return t.rawPayload=n,t.payload=""+n,t.body=t.payload,t.trailers=e._lightMyRequest.trailers,t.json=function(){return JSON.parse(t.payload)},t.stream=function(){return s.from(e._lightMyRequest.payloadChunks)},t}(this);e.raw.req=t,c(e)})),this.connection.once("error",u),this.once("error",u),this.once("close",u)}function l(e){e._lightMyRequest.headers=Object.assign({},e.getHeaders()),["Date","Connection","Transfer-Encoding"].forEach((t=>{const n=RegExp("\\r\\n"+t+": ([^\\r]*)\\r\\n"),r=e._header.match(n);r&&(e._lightMyRequest.headers[t.toLowerCase()]=r[1])}))}return o.inherits(c,e.ServerResponse),c.prototype.setTimeout=function(e,t){return this.timeoutHandle=setTimeout((()=>{this.emit("timeout")}),e),this.on("timeout",t),this},c.prototype.writeHead=function(){const t=e.ServerResponse.prototype.writeHead.apply(this,arguments);return l(this),t},c.prototype.write=function(t,n,r){return this.timeoutHandle&&clearTimeout(this.timeoutHandle),e.ServerResponse.prototype.write.call(this,t,n,r),this._lightMyRequest.payloadChunks.push(Buffer.from(t,n)),!0},c.prototype.end=function(t,n,r){t&&this.write(t,n),e.ServerResponse.prototype.end.call(this,r),this.emit("finish"),this.destroy()},c.prototype.destroy=function(e){this.destroyed||(this.destroyed=!0,e&&process.nextTick((()=>this.emit("error",e))),process.nextTick((()=>this.emit("close"))))},c.prototype.addTrailers=function(e){for(const t in e)this._lightMyRequest.trailers[t.toLowerCase().trim()]=(""+e[t]).trim()},aC=c}(),a="The dispatch function has already been invoked",c=function(){if(dC)return fC.exports;dC=1,fC.exports=t,fC.exports.default=t;const e={type:"object",properties:{url:{oneOf:[{type:"string"},{type:"object",properties:{protocol:{type:"string"},hostname:{type:"string"},pathname:{type:"string"}},additionalProperties:!0,required:["pathname"]}]},path:{oneOf:[{type:"string"},{type:"object",properties:{protocol:{type:"string"},hostname:{type:"string"},pathname:{type:"string"}},additionalProperties:!0,required:["pathname"]}]},cookies:{type:"object",additionalProperties:!0},headers:{type:"object",additionalProperties:!0},query:{anyOf:[{type:"object",additionalProperties:!0},{type:"string"}]},simulate:{type:"object",properties:{end:{type:"boolean"},split:{type:"boolean"},error:{type:"boolean"},close:{type:"boolean"}}},authority:{type:"string"},remoteAddress:{type:"string"},method:{type:"string",enum:["ACL","BIND","CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LINK","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCALENDAR","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REBIND","REPORT","SEARCH","SOURCE","SUBSCRIBE","TRACE","UNBIND","UNLINK","UNLOCK","UNSUBSCRIBE","acl","bind","checkout","connect","copy","delete","get","head","link","lock","m-search","merge","mkactivity","mkcalendar","mkcol","move","notify","options","patch","post","propfind","proppatch","purge","put","rebind","report","search","source","subscribe","trace","unbind","unlink","unlock","unsubscribe"]},validate:{type:"boolean"}},additionalProperties:!0,oneOf:[{required:["url"]},{required:["path"]}]};function t(n,{instancePath:r="",rootData:s=n}={}){let i=null,o=0;const a=o;let c=!1,l=null;const u=o;if(n&&"object"==typeof n&&!Array.isArray(n)){let e;if(void 0===n.url&&(e="url")){const t={instancePath:r,schemaPath:"#/oneOf/0/required",keyword:"required",params:{missingProperty:e},message:"must have required property '"+e+"'"};null===i?i=[t]:i.push(t),o++}}u===o&&(c=!0,l=0);const p=o;if(n&&"object"==typeof n&&!Array.isArray(n)){let e;if(void 0===n.path&&(e="path")){const t={instancePath:r,schemaPath:"#/oneOf/1/required",keyword:"required",params:{missingProperty:e},message:"must have required property '"+e+"'"};null===i?i=[t]:i.push(t),o++}}var d;if((d=p===o)&&c?(c=!1,l=[l,1]):d&&(c=!0,l=1),!c){const e={instancePath:r,schemaPath:"#/oneOf",keyword:"oneOf",params:{passingSchemas:l},message:"must match exactly one schema in oneOf"};return null===i?i=[e]:i.push(e),o++,t.errors=i,!1}if(o=a,null!==i&&(a?i.length=a:i=null),0===o){if(!n||"object"!=typeof n||Array.isArray(n))return t.errors=[{instancePath:r,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;if(void 0!==n.url){let e=n.url;const s=o,a=o;let c=!1,l=null;const u=o;if("string"!=typeof e){let t,s=typeof e;if(void 0===t)if("number"==s||"boolean"==s)t=""+e;else if(null===e)t="";else{const e={instancePath:r+"/url",schemaPath:"#/properties/url/oneOf/0/type",keyword:"type",params:{type:"string"},message:"must be string"};null===i?i=[e]:i.push(e),o++}void 0!==t&&(e=t,void 0!==n&&(n.url=t))}u===o&&(c=!0,l=0);const p=o;if(o===p)if(e&&"object"==typeof e&&!Array.isArray(e)){let t;if(void 0===e.pathname&&(t="pathname")){const e={instancePath:r+"/url",schemaPath:"#/properties/url/oneOf/1/required",keyword:"required",params:{missingProperty:t},message:"must have required property '"+t+"'"};null===i?i=[e]:i.push(e),o++}else{if(void 0!==e.protocol){let t=e.protocol;const n=o;if("string"!=typeof t){let n,s=typeof t;if(void 0===n)if("number"==s||"boolean"==s)n=""+t;else if(null===t)n="";else{const e={instancePath:r+"/url/protocol",schemaPath:"#/properties/url/oneOf/1/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};null===i?i=[e]:i.push(e),o++}void 0!==n&&(t=n,void 0!==e&&(e.protocol=n))}var h=n===o}else h=!0;if(h){if(void 0!==e.hostname){let t=e.hostname;const n=o;if("string"!=typeof t){let n,s=typeof t;if(void 0===n)if("number"==s||"boolean"==s)n=""+t;else if(null===t)n="";else{const e={instancePath:r+"/url/hostname",schemaPath:"#/properties/url/oneOf/1/properties/hostname/type",keyword:"type",params:{type:"string"},message:"must be string"};null===i?i=[e]:i.push(e),o++}void 0!==n&&(t=n,void 0!==e&&(e.hostname=n))}h=n===o}else h=!0;if(h)if(void 0!==e.pathname){let t=e.pathname;const n=o;if("string"!=typeof t){let n,s=typeof t;if(void 0===n)if("number"==s||"boolean"==s)n=""+t;else if(null===t)n="";else{const e={instancePath:r+"/url/pathname",schemaPath:"#/properties/url/oneOf/1/properties/pathname/type",keyword:"type",params:{type:"string"},message:"must be string"};null===i?i=[e]:i.push(e),o++}void 0!==n&&(t=n,void 0!==e&&(e.pathname=n))}h=n===o}else h=!0}}}else{const e={instancePath:r+"/url",schemaPath:"#/properties/url/oneOf/1/type",keyword:"type",params:{type:"object"},message:"must be object"};null===i?i=[e]:i.push(e),o++}var f;if((f=p===o)&&c?(c=!1,l=[l,1]):f&&(c=!0,l=1),!c){const e={instancePath:r+"/url",schemaPath:"#/properties/url/oneOf",keyword:"oneOf",params:{passingSchemas:l},message:"must match exactly one schema in oneOf"};return null===i?i=[e]:i.push(e),o++,t.errors=i,!1}o=a,null!==i&&(a?i.length=a:i=null);var m=s===o}else m=!0;if(m){if(void 0!==n.path){let e=n.path;const s=o,a=o;let c=!1,l=null;const u=o;if("string"!=typeof e){let t,s=typeof e;if(void 0===t)if("number"==s||"boolean"==s)t=""+e;else if(null===e)t="";else{const e={instancePath:r+"/path",schemaPath:"#/properties/path/oneOf/0/type",keyword:"type",params:{type:"string"},message:"must be string"};null===i?i=[e]:i.push(e),o++}void 0!==t&&(e=t,void 0!==n&&(n.path=t))}u===o&&(c=!0,l=0);const p=o;if(o===p)if(e&&"object"==typeof e&&!Array.isArray(e)){let t;if(void 0===e.pathname&&(t="pathname")){const e={instancePath:r+"/path",schemaPath:"#/properties/path/oneOf/1/required",keyword:"required",params:{missingProperty:t},message:"must have required property '"+t+"'"};null===i?i=[e]:i.push(e),o++}else{if(void 0!==e.protocol){let t=e.protocol;const n=o;if("string"!=typeof t){let n,s=typeof t;if(void 0===n)if("number"==s||"boolean"==s)n=""+t;else if(null===t)n="";else{const e={instancePath:r+"/path/protocol",schemaPath:"#/properties/path/oneOf/1/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};null===i?i=[e]:i.push(e),o++}void 0!==n&&(t=n,void 0!==e&&(e.protocol=n))}var g=n===o}else g=!0;if(g){if(void 0!==e.hostname){let t=e.hostname;const n=o;if("string"!=typeof t){let n,s=typeof t;if(void 0===n)if("number"==s||"boolean"==s)n=""+t;else if(null===t)n="";else{const e={instancePath:r+"/path/hostname",schemaPath:"#/properties/path/oneOf/1/properties/hostname/type",keyword:"type",params:{type:"string"},message:"must be string"};null===i?i=[e]:i.push(e),o++}void 0!==n&&(t=n,void 0!==e&&(e.hostname=n))}g=n===o}else g=!0;if(g)if(void 0!==e.pathname){let t=e.pathname;const n=o;if("string"!=typeof t){let n,s=typeof t;if(void 0===n)if("number"==s||"boolean"==s)n=""+t;else if(null===t)n="";else{const e={instancePath:r+"/path/pathname",schemaPath:"#/properties/path/oneOf/1/properties/pathname/type",keyword:"type",params:{type:"string"},message:"must be string"};null===i?i=[e]:i.push(e),o++}void 0!==n&&(t=n,void 0!==e&&(e.pathname=n))}g=n===o}else g=!0}}}else{const e={instancePath:r+"/path",schemaPath:"#/properties/path/oneOf/1/type",keyword:"type",params:{type:"object"},message:"must be object"};null===i?i=[e]:i.push(e),o++}var y;if((y=p===o)&&c?(c=!1,l=[l,1]):y&&(c=!0,l=1),!c){const e={instancePath:r+"/path",schemaPath:"#/properties/path/oneOf",keyword:"oneOf",params:{passingSchemas:l},message:"must match exactly one schema in oneOf"};return null===i?i=[e]:i.push(e),o++,t.errors=i,!1}o=a,null!==i&&(a?i.length=a:i=null),m=s===o}else m=!0;if(m){if(void 0!==n.cookies){let e=n.cookies;const s=o;if(o===s&&(!e||"object"!=typeof e||Array.isArray(e)))return t.errors=[{instancePath:r+"/cookies",schemaPath:"#/properties/cookies/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;m=s===o}else m=!0;if(m){if(void 0!==n.headers){let e=n.headers;const s=o;if(o===s&&(!e||"object"!=typeof e||Array.isArray(e)))return t.errors=[{instancePath:r+"/headers",schemaPath:"#/properties/headers/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;m=s===o}else m=!0;if(m){if(void 0!==n.query){let e=n.query;const s=o,a=o;let c=!1;const l=o;if(o===l&&(!e||"object"!=typeof e||Array.isArray(e))){const e={instancePath:r+"/query",schemaPath:"#/properties/query/anyOf/0/type",keyword:"type",params:{type:"object"},message:"must be object"};null===i?i=[e]:i.push(e),o++}var v=l===o;if(c=c||v,!c){const t=o;if("string"!=typeof e){let t,s=typeof e;if(void 0===t)if("number"==s||"boolean"==s)t=""+e;else if(null===e)t="";else{const e={instancePath:r+"/query",schemaPath:"#/properties/query/anyOf/1/type",keyword:"type",params:{type:"string"},message:"must be string"};null===i?i=[e]:i.push(e),o++}void 0!==t&&(e=t,void 0!==n&&(n.query=t))}v=t===o,c=c||v}if(!c){const e={instancePath:r+"/query",schemaPath:"#/properties/query/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return null===i?i=[e]:i.push(e),o++,t.errors=i,!1}o=a,null!==i&&(a?i.length=a:i=null),m=s===o}else m=!0;if(m){if(void 0!==n.simulate){let e=n.simulate;const s=o;if(o===s){if(!e||"object"!=typeof e||Array.isArray(e))return t.errors=[{instancePath:r+"/simulate",schemaPath:"#/properties/simulate/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;if(void 0!==e.end){let n=e.end;const s=o;if("boolean"!=typeof n){let s;if(void 0===s)if("false"===n||0===n||null===n)s=!1;else{if("true"!==n&&1!==n)return t.errors=[{instancePath:r+"/simulate/end",schemaPath:"#/properties/simulate/properties/end/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;s=!0}void 0!==s&&(n=s,void 0!==e&&(e.end=s))}var b=s===o}else b=!0;if(b){if(void 0!==e.split){let n=e.split;const s=o;if("boolean"!=typeof n){let s;if(void 0===s)if("false"===n||0===n||null===n)s=!1;else{if("true"!==n&&1!==n)return t.errors=[{instancePath:r+"/simulate/split",schemaPath:"#/properties/simulate/properties/split/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;s=!0}void 0!==s&&(n=s,void 0!==e&&(e.split=s))}b=s===o}else b=!0;if(b){if(void 0!==e.error){let n=e.error;const s=o;if("boolean"!=typeof n){let s;if(void 0===s)if("false"===n||0===n||null===n)s=!1;else{if("true"!==n&&1!==n)return t.errors=[{instancePath:r+"/simulate/error",schemaPath:"#/properties/simulate/properties/error/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;s=!0}void 0!==s&&(n=s,void 0!==e&&(e.error=s))}b=s===o}else b=!0;if(b)if(void 0!==e.close){let n=e.close;const s=o;if("boolean"!=typeof n){let s;if(void 0===s)if("false"===n||0===n||null===n)s=!1;else{if("true"!==n&&1!==n)return t.errors=[{instancePath:r+"/simulate/close",schemaPath:"#/properties/simulate/properties/close/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;s=!0}void 0!==s&&(n=s,void 0!==e&&(e.close=s))}b=s===o}else b=!0}}}m=s===o}else m=!0;if(m){if(void 0!==n.authority){let e=n.authority;const s=o;if("string"!=typeof e){let s,i=typeof e;if(void 0===s)if("number"==i||"boolean"==i)s=""+e;else{if(null!==e)return t.errors=[{instancePath:r+"/authority",schemaPath:"#/properties/authority/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;s=""}void 0!==s&&(e=s,void 0!==n&&(n.authority=s))}m=s===o}else m=!0;if(m){if(void 0!==n.remoteAddress){let e=n.remoteAddress;const s=o;if("string"!=typeof e){let s,i=typeof e;if(void 0===s)if("number"==i||"boolean"==i)s=""+e;else{if(null!==e)return t.errors=[{instancePath:r+"/remoteAddress",schemaPath:"#/properties/remoteAddress/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;s=""}void 0!==s&&(e=s,void 0!==n&&(n.remoteAddress=s))}m=s===o}else m=!0;if(m){if(void 0!==n.method){let s=n.method;const i=o;if("string"!=typeof s){let e,i=typeof s;if(void 0===e)if("number"==i||"boolean"==i)e=""+s;else{if(null!==s)return t.errors=[{instancePath:r+"/method",schemaPath:"#/properties/method/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;e=""}void 0!==e&&(s=e,void 0!==n&&(n.method=e))}if("ACL"!==s&&"BIND"!==s&&"CHECKOUT"!==s&&"CONNECT"!==s&&"COPY"!==s&&"DELETE"!==s&&"GET"!==s&&"HEAD"!==s&&"LINK"!==s&&"LOCK"!==s&&"M-SEARCH"!==s&&"MERGE"!==s&&"MKACTIVITY"!==s&&"MKCALENDAR"!==s&&"MKCOL"!==s&&"MOVE"!==s&&"NOTIFY"!==s&&"OPTIONS"!==s&&"PATCH"!==s&&"POST"!==s&&"PROPFIND"!==s&&"PROPPATCH"!==s&&"PURGE"!==s&&"PUT"!==s&&"REBIND"!==s&&"REPORT"!==s&&"SEARCH"!==s&&"SOURCE"!==s&&"SUBSCRIBE"!==s&&"TRACE"!==s&&"UNBIND"!==s&&"UNLINK"!==s&&"UNLOCK"!==s&&"UNSUBSCRIBE"!==s&&"acl"!==s&&"bind"!==s&&"checkout"!==s&&"connect"!==s&&"copy"!==s&&"delete"!==s&&"get"!==s&&"head"!==s&&"link"!==s&&"lock"!==s&&"m-search"!==s&&"merge"!==s&&"mkactivity"!==s&&"mkcalendar"!==s&&"mkcol"!==s&&"move"!==s&&"notify"!==s&&"options"!==s&&"patch"!==s&&"post"!==s&&"propfind"!==s&&"proppatch"!==s&&"purge"!==s&&"put"!==s&&"rebind"!==s&&"report"!==s&&"search"!==s&&"source"!==s&&"subscribe"!==s&&"trace"!==s&&"unbind"!==s&&"unlink"!==s&&"unlock"!==s&&"unsubscribe"!==s)return t.errors=[{instancePath:r+"/method",schemaPath:"#/properties/method/enum",keyword:"enum",params:{allowedValues:e.properties.method.enum},message:"must be equal to one of the allowed values"}],!1;m=i===o}else m=!0;if(m)if(void 0!==n.validate){let e=n.validate;const s=o;if("boolean"!=typeof e){let s;if(void 0===s)if("false"===e||0===e||null===e)s=!1;else{if("true"!==e&&1!==e)return t.errors=[{instancePath:r+"/validate",schemaPath:"#/properties/validate/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;s=!0}void 0!==s&&(e=s,void 0!==n&&(n.validate=s))}m=s===o}else m=!0}}}}}}}}}return t.errors=i,0===o}return fC.exports}();function l(e,t,n){return void 0===n?new d(e,t):p(e,t,n)}function u(e,t,n,r){return n.once("error",(function(e){this.destroyed&&r.destroy(e)})),n.once("close",(function(){this.destroyed&&!this._error&&r.destroy()})),n.prepare((()=>e.call(t,n,r)))}function p(e,t,n){if(!1!==(t="string"==typeof t?{url:t}:t).validate&&(r("function"==typeof e,"dispatchFunc should be a function"),!c(t)))throw Error(c.errors.map((e=>e.message)));const i=t.server||{},a=t.Request?s.CustomRequest:s;if(e.request&&e.request.app===e&&(Object.setPrototypeOf(Object.getPrototypeOf(e.request),a.prototype),Object.setPrototypeOf(Object.getPrototypeOf(e.response),o.prototype)),"function"==typeof n){const r=new a(t),s=new o(r,n);return u(e,i,r,s)}return new Promise(((n,r)=>{const s=new a(t),c=new o(s,n,r);u(e,i,s,c)}))}function d(e,t){this.option="string"==typeof t?{url:t}:Object.assign({},t),this.dispatch=e,this._hasInvoked=!1,this._promise=null,!1!==this.option.autoStart&&process.nextTick((()=>{this._hasInvoked||this.end()}))}return["delete","get","head","options","patch","post","put","trace"].forEach((e=>{d.prototype[e]=function(t){if(!0===this._hasInvoked||this._promise)throw Error(a);return this.option.url=t,this.option.method=e.toUpperCase(),this}})),["body","cookies","headers","payload","query"].forEach((e=>{d.prototype[e]=function(t){if(!0===this._hasInvoked||this._promise)throw Error(a);return this.option[e]=t,this}})),d.prototype.end=function(e){if(!0===this._hasInvoked||this._promise)throw Error(a);if(this._hasInvoked=!0,"function"!=typeof e)return this._promise=p(this.dispatch,this.option),this._promise;p(this.dispatch,this.option,e)},Object.getOwnPropertyNames(Promise.prototype).forEach((e=>{"constructor"!==e&&(d.prototype[e]=function(...t){if(!this._promise){if(!0===this._hasInvoked)throw Error(a);this._hasInvoked=!0,this._promise=p(this.dispatch,this.option)}return this._promise[e](...t)})})),eC.exports=l,eC.exports.default=l,eC.exports.inject=l,eC.exports.isInjection=function(e){return e instanceof s||e instanceof o||e&&e.constructor&&"_CustomLMRRequest"===e.constructor.name},eC.exports}()),R[DC].started){if(R[DC].closing){const e=new wI;return s?void s(e):Promise.reject(e)}return yC(_,r,s)}if(!s)return yC(((e,t)=>{this.ready((function(n){n?t.emit("error",n):_(e,t)}))}),r);this.ready((e=>{e?s(e,null):yC(_,r,s)}))},printRoutes:function(e={}){return e.includeMeta=e.includeHooks?e.includeMeta?XC.concat(e.includeMeta):XC:e.includeMeta,g.printRoutes(e)},setNotFoundHandler:function(e,t){return P('Cannot call "setNotFoundHandler"!'),E.setNotFoundHandler.call(this,e,t,N,g.routeHandler),this},setErrorHandler:function(e){if(P('Cannot call "setErrorHandler"!'),"function"!=typeof e)throw new CI;return this[BC]=II(this[BC],e.bind(this)),this},setChildLoggerFactory:function(e){return P('Cannot call "setChildLoggerFactory"!'),this[FC]=e,this},initialConfig:f,addConstraintStrategy:g.addConstraintStrategy.bind(g),hasConstraintStrategy:g.hasConstraintStrategy.bind(g)};Object.defineProperties(R,{listeningOrigin:{get(){const e=this.addresses().slice(-1).pop();return"string"==typeof e?e:`${this[PC].https?"https":"http"}://${"IPv6"===e.family?`[${e.address}]`:e.address}:${e.port}`}},pluginName:{configurable:!0,get(){return this[LC].length>1?this[LC].join(" -> "):this[LC][0]}},prefix:{configurable:!0,get(){return this[AC]}},validatorCompiler:{configurable:!0,get(){return this[xC].getValidatorCompiler()}},serializerCompiler:{configurable:!0,get(){return this[xC].getSerializerCompiler()}},childLoggerFactory:{configurable:!0,get(){return this[FC]}},version:{configurable:!0,get:()=>"4.28.1"},errorHandler:{configurable:!0,get(){return this[BC].func}},genReqId:{configurable:!0,get(){return this[$C]}}}),r.schemaErrorFormatter&&(NI(r.schemaErrorFormatter),R[MC]=r.schemaErrorFormatter.bind(R));const O=+r.pluginTimeout,N=mC(R,{autostart:!1,timeout:!1===isNaN(O)?O:fI.pluginTimeout,expose:{use:"register"}});N.override=lI,N.on("start",(()=>R[DC].started=!0)),R[vC]=R.ready,R.ready=function(e){if(null!==this[DC].readyPromise)return null!=e?void this[DC].readyPromise.then((()=>e(null,R)),e):this[DC].readyPromise;let t,n;if(process.nextTick((function(){R[vC](((e,t)=>{e||R[DC].started||R[DC].ready||R[DC].booting?r(e):(R[DC].booting=!0,JC("onReady",R[vC],R,r)),t()}))})),this[DC].readyPromise=new Promise((function(e,r){t=e,n=r})),!e)return this[DC].readyPromise;function r(e){if(e=null!=e&&null!=dI[e.code]?pI(e,new dI[e.code](e.message)):e)return n(e);t(R),R[DC].booting=!1,R[DC].ready=!0,R[DC].promise=null}this[DC].readyPromise.then((()=>e(null,R)),e)},R.printPlugins=N.prettyPrint.bind(N),N.once("preReady",(()=>{R.onClose(((e,t)=>{R[DC].closing=!0,g.closeRoutes(),JC("preClose",R[vC],R,(function(){if(R[DC].listening)if("idle"===x)e.server.closeIdleConnections();else if(T&&x)e.server.closeAllConnections();else if(!0===x)for(const e of R[jC])e.destroy(),R[jC].delete(e);!r.serverFactory||R[DC].listening?e.server.close((function(e){e&&"ERR_SERVER_NOT_RUNNING"!==e.code?t(null):t()})):process.nextTick(t,null)}))}))}));const D=new zC({server:R,config:{}});R.setNotFoundHandler(),E.arrange404(R),g.setup(r,{avvio:N,fourOhFour:E,logger:d,hasLogger:h,setupResponseListeners:C,throwIfAlreadyStarted:P,validateHTTPVersion:HC(r),keepAliveConnections:k}),A.on("clientError",r.clientErrorHandler.bind(R));try{const e=require("node:diagnostics_channel").channel("fastify.initialization");e.hasSubscribers&&e.publish({fastify:R})}catch(e){}return"asyncDispose"in Symbol&&(R[Symbol.asyncDispose]=function(){return R.close()}),R;function P(e){if(R[DC].started)throw new TI(e)}}function NI(e){if("function"!=typeof e)throw new kI(typeof e);if("AsyncFunction"===e.constructor.name)throw new kI("AsyncFunction")}M.exports=OI,M.exports.errorCodes=hI,M.exports.fastify=OI,M.exports.default=OI;var DI=P(M.exports),PI={exports:{}},LI={exports:{}},MI={exports:{}};const BI=/at\s{1}(?:.*\.)?plugin\s{1}.*\n\s*(.*)/,jI=/(\w*(\.\w*)*)\..*/;function FI(e){const t=e.match(BI);return t?t[1].split(/[/\\]/).slice(-1)[0].match(jI)[1]:"anonymous"}MI.exports=function(e){if(e.name.length>0)return e.name;const t=Error.stackTraceLimit;Error.stackTraceLimit=10;try{throw Error("anonymous function")}catch(e){return Error.stackTraceLimit=t,FI(e.stack)}},MI.exports.extractPluginName=FI;const $I=MI.exports;let UI=0;function HI(e,t={}){let n=!1;if(void 0!==e.default&&(e=e.default),"function"!=typeof e)throw new TypeError(`fastify-plugin expects a function, instead got a '${typeof e}'`);if("string"==typeof t&&(t={fastify:t}),"object"!=typeof t||Array.isArray(t)||null===t)throw new TypeError("The options object should be an object");if(void 0!==t.fastify&&"string"!=typeof t.fastify)throw new TypeError(`fastify-plugin expects a version string, instead got '${typeof t.fastify}'`);t.name||(n=!0,t.name=$I(e)+"-auto-"+UI++),e[Symbol.for("skip-override")]=!0!==t.encapsulate,e[Symbol.for("fastify.display-name")]=t.name,e[Symbol.for("plugin-meta")]=t,e.default||(e.default=e);const r=("@"===(s=t.name)[0]&&(s=s.slice(1).replace("/","-")),s.replace(/-(.)/g,(function(e,t){return t.toUpperCase()})));var s;return n||e[r]||(e[r]=e),e}LI.exports=HI,LI.exports.default=HI,LI.exports.fastifyPlugin=HI;var GI=LI.exports;const qI=GI,zI=Y("FST_BASIC_AUTH_MISSING_OR_BAD_AUTHORIZATION_HEADER","Missing or bad formatted authorization header",401),VI="(?:[Bb][Aa][Ss][Ii][Cc])",YI="[ \t]",KI="([A-Za-z0-9._~+/-]+=*)",QI=RegExp(`^${VI} ${KI}$`),WI=RegExp(`^${YI}*${VI}${YI}+${KI}${YI}*$`),JI=RegExp("[\0-]"),XI=/^([^:]*):(.*)$/;async function ZI(e,t){if("function"!=typeof t.validate)throw Error("Basic Auth: Missing validate function");const n=t.strictCredentials??!0,r=t.utf8??!0,s=r?"utf-8":"ascii",i=function(e,t){if(!e)return()=>!1;if(!0===e)return t?()=>'Basic charset="UTF-8"':()=>"Basic";if("object"==typeof e){const n=e.realm;switch(typeof n){case"undefined":case"boolean":return t?()=>'Basic charset="UTF-8"':()=>"Basic";case"string":return t?()=>`Basic realm="${n}", charset="UTF-8"`:()=>`Basic realm="${n}"`;case"function":return t?e=>`Basic realm="${n(e)}", charset="UTF-8"`:e=>`Basic realm="${n(e)}"`}}throw Error("Basic Auth: Invalid authenticate option")}(t.authenticate,r),o=t.header&&t.header.toLowerCase()||"authorization",a=n?QI:WI,c=t.validate.bind(e);e.decorate("basicAuth",(function(e,t,n){const r=e.headers[o];if("string"!=typeof r)return void h(new zI);const l=a.exec(r);if(null===l)return void h(new zI);const u=Buffer.from(l[1],"base64").toString(s);if(JI.test(u))return void h(new zI);const p=XI.exec(u);if(null===p)return void h(new zI);const d=c(p[1],p[2],e,t,h);function h(r){if(void 0!==r){if(r.statusCode||(r.statusCode=401),401===r.statusCode){const n=i(e);n&&t.header("WWW-Authenticate",n)}n(r)}else n()}d&&"function"==typeof d.then&&d.then(h,h)}))}PI.exports=qI(ZI,{fastify:"4.x",name:"@fastify/basic-auth"}),PI.exports.default=ZI,PI.exports.fastifyBasicAuth=ZI;var eR=P(PI.exports),tR={exports:{}},nR={exports:{}},rR={},sR={},iR={acl:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},append:{arity:3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},asking:{arity:1,flags:["fast"],keyStart:0,keyStop:0,step:0},auth:{arity:-2,flags:["noscript","loading","stale","fast","no_auth","allow_busy"],keyStart:0,keyStop:0,step:0},bgrewriteaof:{arity:1,flags:["admin","noscript","no_async_loading"],keyStart:0,keyStop:0,step:0},bgsave:{arity:-1,flags:["admin","noscript","no_async_loading"],keyStart:0,keyStop:0,step:0},bitcount:{arity:-2,flags:["readonly"],keyStart:1,keyStop:1,step:1},bitfield:{arity:-2,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},bitfield_ro:{arity:-2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},bitop:{arity:-4,flags:["write","denyoom"],keyStart:2,keyStop:-1,step:1},bitpos:{arity:-3,flags:["readonly"],keyStart:1,keyStop:1,step:1},blmove:{arity:6,flags:["write","denyoom","noscript","blocking"],keyStart:1,keyStop:2,step:1},blmpop:{arity:-5,flags:["write","blocking","movablekeys"],keyStart:0,keyStop:0,step:0},blpop:{arity:-3,flags:["write","noscript","blocking"],keyStart:1,keyStop:-2,step:1},brpop:{arity:-3,flags:["write","noscript","blocking"],keyStart:1,keyStop:-2,step:1},brpoplpush:{arity:4,flags:["write","denyoom","noscript","blocking"],keyStart:1,keyStop:2,step:1},bzmpop:{arity:-5,flags:["write","blocking","movablekeys"],keyStart:0,keyStop:0,step:0},bzpopmax:{arity:-3,flags:["write","noscript","blocking","fast"],keyStart:1,keyStop:-2,step:1},bzpopmin:{arity:-3,flags:["write","noscript","blocking","fast"],keyStart:1,keyStop:-2,step:1},client:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},cluster:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},command:{arity:-1,flags:["loading","stale"],keyStart:0,keyStop:0,step:0},config:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},copy:{arity:-3,flags:["write","denyoom"],keyStart:1,keyStop:2,step:1},dbsize:{arity:1,flags:["readonly","fast"],keyStart:0,keyStop:0,step:0},debug:{arity:-2,flags:["admin","noscript","loading","stale"],keyStart:0,keyStop:0,step:0},decr:{arity:2,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},decrby:{arity:3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},del:{arity:-2,flags:["write"],keyStart:1,keyStop:-1,step:1},discard:{arity:1,flags:["noscript","loading","stale","fast","allow_busy"],keyStart:0,keyStop:0,step:0},dump:{arity:2,flags:["readonly"],keyStart:1,keyStop:1,step:1},echo:{arity:2,flags:["fast"],keyStart:0,keyStop:0,step:0},eval:{arity:-3,flags:["noscript","stale","skip_monitor","no_mandatory_keys","movablekeys"],keyStart:0,keyStop:0,step:0},eval_ro:{arity:-3,flags:["readonly","noscript","stale","skip_monitor","no_mandatory_keys","movablekeys"],keyStart:0,keyStop:0,step:0},evalsha:{arity:-3,flags:["noscript","stale","skip_monitor","no_mandatory_keys","movablekeys"],keyStart:0,keyStop:0,step:0},evalsha_ro:{arity:-3,flags:["readonly","noscript","stale","skip_monitor","no_mandatory_keys","movablekeys"],keyStart:0,keyStop:0,step:0},exec:{arity:1,flags:["noscript","loading","stale","skip_slowlog"],keyStart:0,keyStop:0,step:0},exists:{arity:-2,flags:["readonly","fast"],keyStart:1,keyStop:-1,step:1},expire:{arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},expireat:{arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},expiretime:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},failover:{arity:-1,flags:["admin","noscript","stale"],keyStart:0,keyStop:0,step:0},fcall:{arity:-3,flags:["noscript","stale","skip_monitor","no_mandatory_keys","movablekeys"],keyStart:0,keyStop:0,step:0},fcall_ro:{arity:-3,flags:["readonly","noscript","stale","skip_monitor","no_mandatory_keys","movablekeys"],keyStart:0,keyStop:0,step:0},flushall:{arity:-1,flags:["write"],keyStart:0,keyStop:0,step:0},flushdb:{arity:-1,flags:["write"],keyStart:0,keyStop:0,step:0},function:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},geoadd:{arity:-5,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},geodist:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},geohash:{arity:-2,flags:["readonly"],keyStart:1,keyStop:1,step:1},geopos:{arity:-2,flags:["readonly"],keyStart:1,keyStop:1,step:1},georadius:{arity:-6,flags:["write","denyoom","movablekeys"],keyStart:1,keyStop:1,step:1},georadius_ro:{arity:-6,flags:["readonly"],keyStart:1,keyStop:1,step:1},georadiusbymember:{arity:-5,flags:["write","denyoom","movablekeys"],keyStart:1,keyStop:1,step:1},georadiusbymember_ro:{arity:-5,flags:["readonly"],keyStart:1,keyStop:1,step:1},geosearch:{arity:-7,flags:["readonly"],keyStart:1,keyStop:1,step:1},geosearchstore:{arity:-8,flags:["write","denyoom"],keyStart:1,keyStop:2,step:1},get:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},getbit:{arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},getdel:{arity:2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},getex:{arity:-2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},getrange:{arity:4,flags:["readonly"],keyStart:1,keyStop:1,step:1},getset:{arity:3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},hdel:{arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},hello:{arity:-1,flags:["noscript","loading","stale","fast","no_auth","allow_busy"],keyStart:0,keyStop:0,step:0},hexists:{arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},hget:{arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},hgetall:{arity:2,flags:["readonly"],keyStart:1,keyStop:1,step:1},hincrby:{arity:4,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},hincrbyfloat:{arity:4,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},hkeys:{arity:2,flags:["readonly"],keyStart:1,keyStop:1,step:1},hlen:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},hmget:{arity:-3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},hmset:{arity:-4,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},hrandfield:{arity:-2,flags:["readonly"],keyStart:1,keyStop:1,step:1},hscan:{arity:-3,flags:["readonly"],keyStart:1,keyStop:1,step:1},hset:{arity:-4,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},hsetnx:{arity:4,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},hstrlen:{arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},hvals:{arity:2,flags:["readonly"],keyStart:1,keyStop:1,step:1},incr:{arity:2,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},incrby:{arity:3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},incrbyfloat:{arity:3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},info:{arity:-1,flags:["loading","stale"],keyStart:0,keyStop:0,step:0},keys:{arity:2,flags:["readonly"],keyStart:0,keyStop:0,step:0},lastsave:{arity:1,flags:["loading","stale","fast"],keyStart:0,keyStop:0,step:0},latency:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},lcs:{arity:-3,flags:["readonly"],keyStart:1,keyStop:2,step:1},lindex:{arity:3,flags:["readonly"],keyStart:1,keyStop:1,step:1},linsert:{arity:5,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},llen:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},lmove:{arity:5,flags:["write","denyoom"],keyStart:1,keyStop:2,step:1},lmpop:{arity:-4,flags:["write","movablekeys"],keyStart:0,keyStop:0,step:0},lolwut:{arity:-1,flags:["readonly","fast"],keyStart:0,keyStop:0,step:0},lpop:{arity:-2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},lpos:{arity:-3,flags:["readonly"],keyStart:1,keyStop:1,step:1},lpush:{arity:-3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},lpushx:{arity:-3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},lrange:{arity:4,flags:["readonly"],keyStart:1,keyStop:1,step:1},lrem:{arity:4,flags:["write"],keyStart:1,keyStop:1,step:1},lset:{arity:4,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},ltrim:{arity:4,flags:["write"],keyStart:1,keyStop:1,step:1},memory:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},mget:{arity:-2,flags:["readonly","fast"],keyStart:1,keyStop:-1,step:1},migrate:{arity:-6,flags:["write","movablekeys"],keyStart:3,keyStop:3,step:1},module:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},monitor:{arity:1,flags:["admin","noscript","loading","stale"],keyStart:0,keyStop:0,step:0},move:{arity:3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},mset:{arity:-3,flags:["write","denyoom"],keyStart:1,keyStop:-1,step:2},msetnx:{arity:-3,flags:["write","denyoom"],keyStart:1,keyStop:-1,step:2},multi:{arity:1,flags:["noscript","loading","stale","fast","allow_busy"],keyStart:0,keyStop:0,step:0},object:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},persist:{arity:2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},pexpire:{arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},pexpireat:{arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},pexpiretime:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},pfadd:{arity:-2,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},pfcount:{arity:-2,flags:["readonly"],keyStart:1,keyStop:-1,step:1},pfdebug:{arity:3,flags:["write","denyoom","admin"],keyStart:2,keyStop:2,step:1},pfmerge:{arity:-2,flags:["write","denyoom"],keyStart:1,keyStop:-1,step:1},pfselftest:{arity:1,flags:["admin"],keyStart:0,keyStop:0,step:0},ping:{arity:-1,flags:["fast"],keyStart:0,keyStop:0,step:0},psetex:{arity:4,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},psubscribe:{arity:-2,flags:["pubsub","noscript","loading","stale"],keyStart:0,keyStop:0,step:0},psync:{arity:-3,flags:["admin","noscript","no_async_loading","no_multi"],keyStart:0,keyStop:0,step:0},pttl:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},publish:{arity:3,flags:["pubsub","loading","stale","fast"],keyStart:0,keyStop:0,step:0},pubsub:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},punsubscribe:{arity:-1,flags:["pubsub","noscript","loading","stale"],keyStart:0,keyStop:0,step:0},quit:{arity:-1,flags:["noscript","loading","stale","fast","no_auth","allow_busy"],keyStart:0,keyStop:0,step:0},randomkey:{arity:1,flags:["readonly"],keyStart:0,keyStop:0,step:0},readonly:{arity:1,flags:["loading","stale","fast"],keyStart:0,keyStop:0,step:0},readwrite:{arity:1,flags:["loading","stale","fast"],keyStart:0,keyStop:0,step:0},rename:{arity:3,flags:["write"],keyStart:1,keyStop:2,step:1},renamenx:{arity:3,flags:["write","fast"],keyStart:1,keyStop:2,step:1},replconf:{arity:-1,flags:["admin","noscript","loading","stale","allow_busy"],keyStart:0,keyStop:0,step:0},replicaof:{arity:3,flags:["admin","noscript","stale","no_async_loading"],keyStart:0,keyStop:0,step:0},reset:{arity:1,flags:["noscript","loading","stale","fast","no_auth","allow_busy"],keyStart:0,keyStop:0,step:0},restore:{arity:-4,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},"restore-asking":{arity:-4,flags:["write","denyoom","asking"],keyStart:1,keyStop:1,step:1},role:{arity:1,flags:["noscript","loading","stale","fast"],keyStart:0,keyStop:0,step:0},rpop:{arity:-2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},rpoplpush:{arity:3,flags:["write","denyoom"],keyStart:1,keyStop:2,step:1},rpush:{arity:-3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},rpushx:{arity:-3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},sadd:{arity:-3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},save:{arity:1,flags:["admin","noscript","no_async_loading","no_multi"],keyStart:0,keyStop:0,step:0},scan:{arity:-2,flags:["readonly"],keyStart:0,keyStop:0,step:0},scard:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},script:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},sdiff:{arity:-2,flags:["readonly"],keyStart:1,keyStop:-1,step:1},sdiffstore:{arity:-3,flags:["write","denyoom"],keyStart:1,keyStop:-1,step:1},select:{arity:2,flags:["loading","stale","fast"],keyStart:0,keyStop:0,step:0},set:{arity:-3,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},setbit:{arity:4,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},setex:{arity:4,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},setnx:{arity:3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},setrange:{arity:4,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},shutdown:{arity:-1,flags:["admin","noscript","loading","stale","no_multi","allow_busy"],keyStart:0,keyStop:0,step:0},sinter:{arity:-2,flags:["readonly"],keyStart:1,keyStop:-1,step:1},sintercard:{arity:-3,flags:["readonly","movablekeys"],keyStart:0,keyStop:0,step:0},sinterstore:{arity:-3,flags:["write","denyoom"],keyStart:1,keyStop:-1,step:1},sismember:{arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},slaveof:{arity:3,flags:["admin","noscript","stale","no_async_loading"],keyStart:0,keyStop:0,step:0},slowlog:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},smembers:{arity:2,flags:["readonly"],keyStart:1,keyStop:1,step:1},smismember:{arity:-3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},smove:{arity:4,flags:["write","fast"],keyStart:1,keyStop:2,step:1},sort:{arity:-2,flags:["write","denyoom","movablekeys"],keyStart:1,keyStop:1,step:1},sort_ro:{arity:-2,flags:["readonly","movablekeys"],keyStart:1,keyStop:1,step:1},spop:{arity:-2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},spublish:{arity:3,flags:["pubsub","loading","stale","fast"],keyStart:1,keyStop:1,step:1},srandmember:{arity:-2,flags:["readonly"],keyStart:1,keyStop:1,step:1},srem:{arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},sscan:{arity:-3,flags:["readonly"],keyStart:1,keyStop:1,step:1},ssubscribe:{arity:-2,flags:["pubsub","noscript","loading","stale"],keyStart:1,keyStop:-1,step:1},strlen:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},subscribe:{arity:-2,flags:["pubsub","noscript","loading","stale"],keyStart:0,keyStop:0,step:0},substr:{arity:4,flags:["readonly"],keyStart:1,keyStop:1,step:1},sunion:{arity:-2,flags:["readonly"],keyStart:1,keyStop:-1,step:1},sunionstore:{arity:-3,flags:["write","denyoom"],keyStart:1,keyStop:-1,step:1},sunsubscribe:{arity:-1,flags:["pubsub","noscript","loading","stale"],keyStart:1,keyStop:-1,step:1},swapdb:{arity:3,flags:["write","fast"],keyStart:0,keyStop:0,step:0},sync:{arity:1,flags:["admin","noscript","no_async_loading","no_multi"],keyStart:0,keyStop:0,step:0},time:{arity:1,flags:["loading","stale","fast"],keyStart:0,keyStop:0,step:0},touch:{arity:-2,flags:["readonly","fast"],keyStart:1,keyStop:-1,step:1},ttl:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},type:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},unlink:{arity:-2,flags:["write","fast"],keyStart:1,keyStop:-1,step:1},unsubscribe:{arity:-1,flags:["pubsub","noscript","loading","stale"],keyStart:0,keyStop:0,step:0},unwatch:{arity:1,flags:["noscript","loading","stale","fast","allow_busy"],keyStart:0,keyStop:0,step:0},wait:{arity:3,flags:["noscript"],keyStart:0,keyStop:0,step:0},watch:{arity:-2,flags:["noscript","loading","stale","fast","allow_busy"],keyStart:1,keyStop:-1,step:1},xack:{arity:-4,flags:["write","fast"],keyStart:1,keyStop:1,step:1},xadd:{arity:-5,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},xautoclaim:{arity:-6,flags:["write","fast"],keyStart:1,keyStop:1,step:1},xclaim:{arity:-6,flags:["write","fast"],keyStart:1,keyStop:1,step:1},xdel:{arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},xgroup:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},xinfo:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},xlen:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},xpending:{arity:-3,flags:["readonly"],keyStart:1,keyStop:1,step:1},xrange:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},xread:{arity:-4,flags:["readonly","blocking","movablekeys"],keyStart:0,keyStop:0,step:0},xreadgroup:{arity:-7,flags:["write","blocking","movablekeys"],keyStart:0,keyStop:0,step:0},xrevrange:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},xsetid:{arity:-3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},xtrim:{arity:-4,flags:["write"],keyStart:1,keyStop:1,step:1},zadd:{arity:-4,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},zcard:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},zcount:{arity:4,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},zdiff:{arity:-3,flags:["readonly","movablekeys"],keyStart:0,keyStop:0,step:0},zdiffstore:{arity:-4,flags:["write","denyoom","movablekeys"],keyStart:1,keyStop:1,step:1},zincrby:{arity:4,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},zinter:{arity:-3,flags:["readonly","movablekeys"],keyStart:0,keyStop:0,step:0},zintercard:{arity:-3,flags:["readonly","movablekeys"],keyStart:0,keyStop:0,step:0},zinterstore:{arity:-4,flags:["write","denyoom","movablekeys"],keyStart:1,keyStop:1,step:1},zlexcount:{arity:4,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},zmpop:{arity:-4,flags:["write","movablekeys"],keyStart:0,keyStop:0,step:0},zmscore:{arity:-3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},zpopmax:{arity:-2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},zpopmin:{arity:-2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},zrandmember:{arity:-2,flags:["readonly"],keyStart:1,keyStop:1,step:1},zrange:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},zrangebylex:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},zrangebyscore:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},zrangestore:{arity:-5,flags:["write","denyoom"],keyStart:1,keyStop:2,step:1},zrank:{arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},zrem:{arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},zremrangebylex:{arity:4,flags:["write"],keyStart:1,keyStop:1,step:1},zremrangebyrank:{arity:4,flags:["write"],keyStart:1,keyStop:1,step:1},zremrangebyscore:{arity:4,flags:["write"],keyStart:1,keyStop:1,step:1},zrevrange:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},zrevrangebylex:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},zrevrangebyscore:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},zrevrank:{arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},zscan:{arity:-3,flags:["readonly"],keyStart:1,keyStop:1,step:1},zscore:{arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},zunion:{arity:-3,flags:["readonly","movablekeys"],keyStart:0,keyStop:0,step:0},zunionstore:{arity:-4,flags:["write","denyoom","movablekeys"],keyStart:1,keyStop:1,step:1}};!function(e){var t=D&&D.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.getKeyIndexes=e.hasFlag=e.exists=e.list=void 0;const n=t(iR);e.list=Object.keys(n.default);const r={};function s(e){"string"!=typeof e&&(e+="");const t=e.indexOf("->");return-1===t?e.length:t}e.list.forEach((e=>{r[e]=n.default[e].flags.reduce((function(e,t){return e[t]=!0,e}),{})})),e.exists=function(e){return!!n.default[e]},e.hasFlag=function(e,t){if(!r[e])throw Error("Unknown command "+e);return!!r[e][t]},e.getKeyIndexes=function(e,t,r){const i=n.default[e];if(!i)throw Error("Unknown command "+e);if(!Array.isArray(t))throw Error("Expect args to be an array");const o=[],a=!(!r||!r.parseExternalKey),c=(e,t)=>{const n=[],r=+e[t];for(let e=0;r>e;e++)n.push(e+t+1);return n},l=(e,t,n)=>{for(let r=t;e.length-1>r;r+=1)if((e[r]+"").toLowerCase()===n.toLowerCase())return r+1;return null};switch(e){case"zunionstore":case"zinterstore":case"zdiffstore":o.push(0,...c(t,1));break;case"eval":case"evalsha":case"eval_ro":case"evalsha_ro":case"fcall":case"fcall_ro":case"blmpop":case"bzmpop":o.push(...c(t,1));break;case"sintercard":case"lmpop":case"zunion":case"zinter":case"zmpop":case"zintercard":case"zdiff":o.push(...c(t,0));break;case"georadius":{o.push(0);const e=l(t,5,"STORE");e&&o.push(e);const n=l(t,5,"STOREDIST");n&&o.push(n);break}case"georadiusbymember":{o.push(0);const e=l(t,4,"STORE");e&&o.push(e);const n=l(t,4,"STOREDIST");n&&o.push(n);break}case"sort":case"sort_ro":o.push(0);for(let e=1;t.length-1>e;e++){let n=t[e];if("string"!=typeof n)continue;const r=n.toUpperCase();"GET"===r?(e+=1,n=t[e],"#"!==n&&o.push(a?[e,s(n)]:e)):"BY"===r?(e+=1,o.push(a?[e,s(t[e])]:e)):"STORE"===r&&(e+=1,o.push(e))}break;case"migrate":if(""===t[2])for(let e=5;t.length-1>e;e++){const n=t[e];if("string"==typeof n&&"KEYS"===n.toUpperCase()){for(let n=e+1;t.length>n;n++)o.push(n);break}}else o.push(2);break;case"xreadgroup":case"xread":for(let n="xread"===e?0:3;t.length-1>n;n++)if("STREAMS"===(t[n]+"").toUpperCase()){for(let e=n+1;n+(t.length-1-n)/2>=e;e++)o.push(e);break}break;default:if(i.step>0){const e=i.keyStop>0?i.keyStop:t.length+i.keyStop+1;for(let t=i.keyStart-1;e>t;t+=i.step)o.push(t)}}return o}}(sR);var oR={},aR={};!function(e){let t;function n(n,r){try{const e=t;return t=null,e.apply(this,arguments)}catch(t){return e.errorObj.e=t,e.errorObj}}Object.defineProperty(e,"__esModule",{value:!0}),e.tryCatch=e.errorObj=void 0,e.errorObj={e:{}},e.tryCatch=function(e){return t=e,n}}(aR),Object.defineProperty(oR,"__esModule",{value:!0});const cR=aR;function lR(e){setTimeout((function(){throw e}),0)}oR.default=function(e,t,n){return"function"==typeof t&&e.then((e=>{let r;r=void 0!==n&&Object(n).spread&&Array.isArray(e)?cR.tryCatch(t).apply(void 0,[null].concat(e)):void 0===e?cR.tryCatch(t)(null):cR.tryCatch(t)(null,e),r===cR.errorObj&&lR(r.e)}),(e=>{if(!e){const t=Error(e+"");Object.assign(t,{cause:e}),e=t}const n=cR.tryCatch(t)(e);n===cR.errorObj&&lR(n.e)})),e};var uR,pR,dR,hR,fR={};const mR=55>process.version.charCodeAt(1)&&46===process.version.charCodeAt(2)?function(){if(pR)return uR;pR=1;const e=m,t=l;function n(e){Object.defineProperty(this,"message",{value:e||"",configurable:!0,writable:!0}),Error.captureStackTrace(this,this.constructor)}function r(t,n,r){e(n),e.strictEqual(typeof r,"number"),Object.defineProperty(this,"message",{value:t||"",configurable:!0,writable:!0});const s=Error.stackTraceLimit;Error.stackTraceLimit=2,Error.captureStackTrace(this,this.constructor),Error.stackTraceLimit=s,this.offset=r,this.buffer=n}function s(e){Object.defineProperty(this,"message",{value:e||"",configurable:!0,writable:!0});const t=Error.stackTraceLimit;Error.stackTraceLimit=2,Error.captureStackTrace(this,this.constructor),Error.stackTraceLimit=t}function i(e){Object.defineProperty(this,"message",{value:e||"",configurable:!0,writable:!0}),Error.captureStackTrace(this,this.constructor)}function o(e){Object.defineProperty(this,"message",{value:e||"",configurable:!0,writable:!0}),Error.captureStackTrace(this,this.constructor)}return t.inherits(n,Error),Object.defineProperty(n.prototype,"name",{value:"RedisError",configurable:!0,writable:!0}),t.inherits(r,n),Object.defineProperty(r.prototype,"name",{value:"ParserError",configurable:!0,writable:!0}),t.inherits(s,n),Object.defineProperty(s.prototype,"name",{value:"ReplyError",configurable:!0,writable:!0}),t.inherits(i,n),Object.defineProperty(i.prototype,"name",{value:"AbortError",configurable:!0,writable:!0}),t.inherits(o,i),Object.defineProperty(o.prototype,"name",{value:"InterruptError",configurable:!0,writable:!0}),uR={RedisError:n,ParserError:r,ReplyError:s,AbortError:i,InterruptError:o}}():function(){if(hR)return dR;hR=1;const e=m;class t extends Error{get name(){return this.constructor.name}}class n extends t{get name(){return this.constructor.name}}return dR={RedisError:t,ParserError:class extends t{constructor(t,n,r){e(n),e.strictEqual(typeof r,"number");const s=Error.stackTraceLimit;Error.stackTraceLimit=2,super(t),Error.stackTraceLimit=s,this.offset=r,this.buffer=n}get name(){return this.constructor.name}},ReplyError:class extends t{constructor(e){const t=Error.stackTraceLimit;Error.stackTraceLimit=2,super(e),Error.stackTraceLimit=t}get name(){return this.constructor.name}},AbortError:n,InterruptError:class extends n{get name(){return this.constructor.name}}}}();var gR=mR,yR={},vR={exports:{}},bR=[0,4129,8258,12387,16516,20645,24774,28903,33032,37161,41290,45419,49548,53677,57806,61935,4657,528,12915,8786,21173,17044,29431,25302,37689,33560,45947,41818,54205,50076,62463,58334,9314,13379,1056,5121,25830,29895,17572,21637,42346,46411,34088,38153,58862,62927,50604,54669,13907,9842,5649,1584,30423,26358,22165,18100,46939,42874,38681,34616,63455,59390,55197,51132,18628,22757,26758,30887,2112,6241,10242,14371,51660,55789,59790,63919,35144,39273,43274,47403,23285,19156,31415,27286,6769,2640,14899,10770,56317,52188,64447,60318,39801,35672,47931,43802,27814,31879,19684,23749,11298,15363,3168,7233,60846,64911,52716,56781,44330,48395,36200,40265,32407,28342,24277,20212,15891,11826,7761,3696,65439,61374,57309,53244,48923,44858,40793,36728,37256,33193,45514,41451,53516,49453,61774,57711,4224,161,12482,8419,20484,16421,28742,24679,33721,37784,41979,46042,49981,54044,58239,62302,689,4752,8947,13010,16949,21012,25207,29270,46570,42443,38312,34185,62830,58703,54572,50445,13538,9411,5280,1153,29798,25671,21540,17413,42971,47098,34713,38840,59231,63358,50973,55100,9939,14066,1681,5808,26199,30326,17941,22068,55628,51565,63758,59695,39368,35305,47498,43435,22596,18533,30726,26663,6336,2273,14466,10403,52093,56156,60223,64286,35833,39896,43963,48026,19061,23124,27191,31254,2801,6864,10931,14994,64814,60687,56684,52557,48554,44427,40424,36297,31782,27655,23652,19525,15522,11395,7392,3265,61215,65342,53085,57212,44955,49082,36825,40952,28183,32310,20053,24180,11923,16050,3793,7920],ER=vR.exports=function(e){for(var t,n=0,r=-1,s=0,i=0,o="string"==typeof e?function(e){for(var t,n=0,r=0,s=[],i=e.length;i>n;n++)128>(t=e.charCodeAt(n))?s[r++]=t:2048>t?(s[r++]=t>>6|192,s[r++]=63&t|128):55296==(64512&t)&&e.length>n+1&&56320==(64512&e.charCodeAt(n+1))?(t=65536+((1023&t)<<10)+(1023&e.charCodeAt(++n)),s[r++]=t>>18|240,s[r++]=t>>12&63|128,s[r++]=t>>6&63|128,s[r++]=63&t|128):(s[r++]=t>>12|224,s[r++]=t>>6&63|128,s[r++]=63&t|128);return s}(e):e,a=o.length;a>n;){if(t=o[n++],-1===r)123===t&&(r=n);else if(125!==t)i=bR[255&(t^i>>8)]^i<<8;else if(n-1!==r)return 16383&i;s=bR[255&(t^s>>8)]^s<<8}return 16383&s};vR.exports.generateMulti=function(e){for(var t=1,n=e.length,r=ER(e[0]);n>t;)if(ER(e[t++])!==r)return-1;return r};var _R=vR.exports,AR={},SR={},TR=9007199254740991,wR=/^(?:0|[1-9]\d*)$/;function xR(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var kR=Object.prototype,CR=kR.hasOwnProperty,IR=kR.toString,RR=kR.propertyIsEnumerable,OR=Math.max;function NR(e,t,n,r){return void 0===e||MR(e,kR[n])&&!CR.call(r,n)?t:e}function DR(e,t,n){var r=e[t];CR.call(e,t)&&MR(r,n)&&(void 0!==n||t in e)||(e[t]=n)}function PR(e,t){return t=OR(void 0===t?e.length-1:t,0),function(){for(var n=arguments,r=-1,s=OR(n.length-t,0),i=Array(s);++r<s;)i[r]=n[t+r];r=-1;for(var o=Array(t+1);++r<t;)o[r]=n[r];return o[t]=i,xR(e,this,o)}}function LR(e,t){return!!(t=null==t?TR:t)&&("number"==typeof e||wR.test(e))&&e>-1&&e%1==0&&t>e}function MR(e,t){return e===t||e!=e&&t!=t}var BR=Array.isArray;function jR(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&TR>=e}(e.length)&&!function(e){var t=FR(e)?IR.call(e):"";return"[object Function]"==t||"[object GeneratorFunction]"==t}(e)}function FR(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}var $R,UR=($R=function(e,t,n,r){!function(e,t,n,r){n||(n={});for(var s=-1,i=t.length;++s<i;){var o=t[s],a=r?r(n[o],e[o],o,n,e):void 0;DR(n,o,void 0===a?e[o]:a)}}(t,function(e){return jR(e)?function(e,t){var n=BR(e)||function(e){return function(e){return function(e){return!!e&&"object"==typeof e}(e)&&jR(e)}(e)&&CR.call(e,"callee")&&(!RR.call(e,"callee")||"[object Arguments]"==IR.call(e))}(e)?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],r=n.length,s=!!r;for(var i in e)s&&("length"==i||LR(i,r))||n.push(i);return n}(e):function(e){if(!FR(e))return function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}(e);var t,n,r=(t=e)===("function"==typeof(n=t&&t.constructor)&&n.prototype||kR),s=[];for(var i in e)("constructor"!=i||!r&&CR.call(e,i))&&s.push(i);return s}(e)}(t),e,r)},PR((function(e,t){var n=-1,r=t.length,s=r>1?t[r-1]:void 0,i=r>2?t[2]:void 0;for(s="function"==typeof s?(r--,s):void 0,i&&function(e,t,n){if(!FR(n))return!1;var r=typeof t;return!!("number"==r?jR(n)&&LR(t,n.length):"string"==r&&t in n)&&MR(n[t],e)}(t[0],t[1],i)&&(s=3>r?void 0:s,r=1),e=Object(e);++n<r;){var o=t[n];o&&$R(e,o,0,s)}return e}))),HR=PR((function(e){return e.push(void 0,NR),xR(UR,void 0,e)})),GR=Object.prototype,qR=GR.hasOwnProperty,zR=GR.toString,VR=GR.propertyIsEnumerable;Object.defineProperty(SR,"__esModule",{value:!0}),SR.isArguments=SR.defaults=SR.noop=void 0,SR.defaults=HR,SR.isArguments=function(e){return function(e){return function(e){return!!e&&"object"==typeof e}(e)&&function(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&9007199254740991>=e}(e.length)&&!function(e){var t=function(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}(e)?zR.call(e):"";return"[object Function]"==t||"[object GeneratorFunction]"==t}(e)}(e)}(e)&&qR.call(e,"callee")&&(!VR.call(e,"callee")||"[object Arguments]"==zR.call(e))},SR.noop=function(){};var YR,KR,QR,WR,JR,XR={},ZR={exports:{}},eO={exports:{}};function tO(){return WR||(WR=1,QR=function(e){function t(e){let r,s,i,o=null;function a(...e){if(!a.enabled)return;const n=a,s=+new Date;n.diff=s-(r||s),n.prev=r,n.curr=s,r=s,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let i=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,((r,s)=>{if("%%"===r)return"%";i++;const o=t.formatters[s];return"function"==typeof o&&(r=o.call(n,e[i]),e.splice(i,1),i--),r})),t.formatArgs.call(n,e),(n.log||t.log).apply(n,e)}return a.namespace=e,a.useColors=t.useColors(),a.color=t.selectColor(e),a.extend=n,a.destroy=t.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==o?o:(s!==t.namespaces&&(s=t.namespaces,i=t.enabled(e)),i),set:e=>{o=e}}),"function"==typeof t.init&&t.init(a),a}function n(e,n){const r=t(this.namespace+(void 0===n?":":n)+e);return r.log=this.log,r}function r(e){return(""+e).substring(2,(""+e).length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){const e=[...t.names.map(r),...t.skips.map(r).map((e=>"-"+e))].join(",");return t.enable(""),e},t.enable=function(e){let n;t.save(e),t.namespaces=e,t.names=[],t.skips=[];const r=("string"==typeof e?e:"").split(/[\s,]+/),s=r.length;for(n=0;s>n;n++)r[n]&&("-"===(e=r[n].replace(/\*/g,".*?"))[0]?t.skips.push(RegExp("^"+e.slice(1)+"$")):t.names.push(RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;let n,r;for(n=0,r=t.skips.length;r>n;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;r>n;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=function(){if(KR)return YR;KR=1;var e=1e3,t=60*e,n=60*t,r=24*n,s=7*r;function i(e,t,n,r){var s=t>=1.5*n;return Math.round(e/n)+" "+r+(s?"s":"")}return YR=function(o,a){a=a||{};var c=typeof o;if("string"===c&&o.length>0)return function(i){if(100>=(i+="").length){var o=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(i);if(o){var a=parseFloat(o[1]);switch((o[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*a;case"weeks":case"week":case"w":return a*s;case"days":case"day":case"d":return a*r;case"hours":case"hour":case"hrs":case"hr":case"h":return a*n;case"minutes":case"minute":case"mins":case"min":case"m":return a*t;case"seconds":case"second":case"secs":case"sec":case"s":return a*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a;default:return}}}}(o);if("number"===c&&isFinite(o))return a.long?function(s){var o=Math.abs(s);return r>o?n>o?t>o?e>o?s+" ms":i(s,o,e,"second"):i(s,o,t,"minute"):i(s,o,n,"hour"):i(s,o,r,"day")}(o):function(s){var i=Math.abs(s);return r>i?n>i?t>i?e>i?s+"ms":Math.round(s/e)+"s":Math.round(s/t)+"m":Math.round(s/n)+"h":Math.round(s/r)+"d"}(o);throw Error("val is not a non-empty string or a valid number. val="+JSON.stringify(o))}}(),t.destroy=function(){},Object.keys(e).forEach((n=>{t[n]=e[n]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let n=0;for(let t=0;e.length>t;t++)n=(n<<5)-n+e.charCodeAt(t),n|=0;return t.colors[Math.abs(n)%t.colors.length]},t.enable(t.load()),t}),QR}var nO,rO,sO,iO,oO,aO={exports:{}};function cO(){return rO?nO:(rO=1,nO=(e,t)=>{t=t||process.argv;const n=e.startsWith("-")?"":1===e.length?"-":"--",r=t.indexOf(n+e),s=t.indexOf("--");return-1!==r&&(-1===s||s>r)})}ZR.exports="undefined"==typeof process||"renderer"===process.type||!0===process.browser||process.__nwjs?(JR||(JR=1,function(e,t){t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;t.splice(1,0,n,"color: inherit");let r=0,s=0;t[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&(r++,"%c"===e&&(s=r))})),t.splice(s,0,n)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e},t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0)}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=tO()(t);const{formatters:n}=e.exports;n.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}(eO,eO.exports)),eO.exports):(oO||(oO=1,function(e,t){const n=E,r=l;t.init=function(e){e.inspectOpts={};const n=Object.keys(t.inspectOpts);for(let r=0;n.length>r;r++)e.inspectOpts[n[r]]=t.inspectOpts[n[r]]},t.log=function(...e){return process.stderr.write(r.formatWithOptions(t.inspectOpts,...e)+"\n")},t.formatArgs=function(n){const{namespace:r,useColors:s}=this;if(s){const t=this.color,s="[3"+(8>t?t:"8;5;"+t),i=`  ${s};1m${r} [0m`;n[0]=i+n[0].split("\n").join("\n"+i),n.push(s+"m+"+e.exports.humanize(this.diff)+"[0m")}else n[0]=(t.inspectOpts.hideDate?"":(new Date).toISOString()+" ")+r+" "+n[0]},t.save=function(e){e?process.env.DEBUG=e:delete process.env.DEBUG},t.load=function(){return process.env.DEBUG},t.useColors=function(){return"colors"in t.inspectOpts?!!t.inspectOpts.colors:n.isatty(process.stderr.fd)},t.destroy=r.deprecate((()=>{}),"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."),t.colors=[6,2,3,4,5,1];try{const e=function(){if(iO)return sO;iO=1;const e=o,t=cO(),n=process.env;let r;function s(s){const i=function(s){if(!1===r)return 0;if(t("color=16m")||t("color=full")||t("color=truecolor"))return 3;if(t("color=256"))return 2;if(s&&!s.isTTY&&!0!==r)return 0;const i=r?1:0;if("win32"===process.platform){const t=e.release().split(".");return 8>+process.versions.node.split(".")[0]||10>+t[0]||10586>+t[2]?1:14931>+t[2]?2:3}if("CI"in n)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some((e=>e in n))||"codeship"===n.CI_NAME?1:i;if("TEAMCITY_VERSION"in n)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(n.TEAMCITY_VERSION)?1:0;if("truecolor"===n.COLORTERM)return 3;if("TERM_PROGRAM"in n){const e=parseInt((n.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(n.TERM_PROGRAM){case"iTerm.app":return 3>e?2:3;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(n.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(n.TERM)||"COLORTERM"in n?1:i}(s);return function(e){return 0!==e&&{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}(i)}return t("no-color")||t("no-colors")||t("color=false")?r=!1:(t("color")||t("colors")||t("color=true")||t("color=always"))&&(r=!0),"FORCE_COLOR"in n&&(r=0===n.FORCE_COLOR.length||0!==parseInt(n.FORCE_COLOR,10)),sO={supportsColor:s,stdout:s(process.stdout),stderr:s(process.stderr)}}();e&&(e.stderr||e).level>=2&&(t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(e){}t.inspectOpts=Object.keys(process.env).filter((e=>/^debug_/i.test(e))).reduce(((e,t)=>{const n=t.substring(6).toLowerCase().replace(/_([a-z])/g,((e,t)=>t.toUpperCase()));let r=process.env[t];return r=!!/^(yes|on|true|enabled)$/i.test(r)||!/^(no|off|false|disabled)$/i.test(r)&&("null"===r?null:+r),e[n]=r,e}),{}),e.exports=tO()(t);const{formatters:s}=e.exports;s.o=function(e){return this.inspectOpts.colors=this.useColors,r.inspect(e,this.inspectOpts).split("\n").map((e=>e.trim())).join(" ")},s.O=function(e){return this.inspectOpts.colors=this.useColors,r.inspect(e,this.inspectOpts)}}(aO,aO.exports)),aO.exports);var lO=ZR.exports;Object.defineProperty(XR,"__esModule",{value:!0}),XR.genRedactedString=XR.getStringValue=XR.MAX_ARGUMENT_LENGTH=void 0;const uO=lO;function pO(e){if(null!==e)switch(typeof e){case"boolean":case"number":return;case"object":if(Buffer.isBuffer(e))return e.toString("hex");if(Array.isArray(e))return e.join(",");try{return JSON.stringify(e)}catch(e){return}case"string":return e}}function dO(e,t){const{length:n}=e;return n>t?e.slice(0,t)+' ... <REDACTED full-length="'+n+'">':e}XR.MAX_ARGUMENT_LENGTH=200,XR.getStringValue=pO,XR.genRedactedString=dO,XR.default=function(e){const t=(0,uO.default)("ioredis:"+e);function n(...e){if(t.enabled){for(let t=1;e.length>t;t++){const n=pO(e[t]);"string"==typeof n&&n.length>200&&(e[t]=dO(n,200))}return t.apply(null,e)}}return Object.defineProperties(n,{namespace:{get:()=>t.namespace},enabled:{get:()=>t.enabled},destroy:{get:()=>t.destroy},log:{get:()=>t.log,set(e){t.log=e}}}),n};var hO={};Object.defineProperty(hO,"__esModule",{value:!0});const fO="-----BEGIN CERTIFICATE-----\nMIIDTzCCAjegAwIBAgIJAKSVpiDswLcwMA0GCSqGSIb3DQEBBQUAMD4xFjAUBgNV\nBAoMDUdhcmFudGlhIERhdGExJDAiBgNVBAMMG1NTTCBDZXJ0aWZpY2F0aW9uIEF1\ndGhvcml0eTAeFw0xMzEwMDExMjE0NTVaFw0yMzA5MjkxMjE0NTVaMD4xFjAUBgNV\nBAoMDUdhcmFudGlhIERhdGExJDAiBgNVBAMMG1NTTCBDZXJ0aWZpY2F0aW9uIEF1\ndGhvcml0eTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALZqkh/DczWP\nJnxnHLQ7QL0T4B4CDKWBKCcisriGbA6ZePWVNo4hfKQC6JrzfR+081NeD6VcWUiz\nrmd+jtPhIY4c+WVQYm5PKaN6DT1imYdxQw7aqO5j2KUCEh/cznpLxeSHoTxlR34E\nQwF28Wl3eg2vc5ct8LjU3eozWVk3gb7alx9mSA2SgmuX5lEQawl++rSjsBStemY2\nBDwOpAMXIrdEyP/cVn8mkvi/BDs5M5G+09j0gfhyCzRWMQ7Hn71u1eolRxwVxgi3\nTMn+/vTaFSqxKjgck6zuAYjBRPaHe7qLxHNr1So/Mc9nPy+3wHebFwbIcnUojwbp\n4nctkWbjb2cCAwEAAaNQME4wHQYDVR0OBBYEFP1whtcrydmW3ZJeuSoKZIKjze3w\nMB8GA1UdIwQYMBaAFP1whtcrydmW3ZJeuSoKZIKjze3wMAwGA1UdEwQFMAMBAf8w\nDQYJKoZIhvcNAQEFBQADggEBAG2erXhwRAa7+ZOBs0B6X57Hwyd1R4kfmXcs0rta\nlbPpvgULSiB+TCbf3EbhJnHGyvdCY1tvlffLjdA7HJ0PCOn+YYLBA0pTU/dyvrN6\nSu8NuS5yubnt9mb13nDGYo1rnt0YRfxN+8DM3fXIVr038A30UlPX2Ou1ExFJT0MZ\nuFKY6ZvLdI6/1cbgmguMlAhM+DhKyV6Sr5699LM3zqeI816pZmlREETYkGr91q7k\nBpXJu/dtHaGxg1ZGu6w/PCsYGUcECWENYD4VQPd8N32JjOfu6vEgoEAwfPP+3oGp\nZ4m3ewACcWOAenqflb+cQYC4PsF7qbXDmRaWrbKntOlZ3n0=\n-----END CERTIFICATE-----\n-----BEGIN CERTIFICATE-----\nMIIGMTCCBBmgAwIBAgICEAAwDQYJKoZIhvcNAQELBQAwajELMAkGA1UEBhMCVVMx\nCzAJBgNVBAgMAkNBMQswCQYDVQQHDAJDQTESMBAGA1UECgwJUmVkaXNMYWJzMS0w\nKwYDVQQDDCRSZWRpc0xhYnMgUm9vdCBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwHhcN\nMTgwMjI1MTUzNzM3WhcNMjgwMjIzMTUzNzM3WjBfMQswCQYDVQQGEwJVUzELMAkG\nA1UECAwCQ0ExEjAQBgNVBAoMCVJlZGlzTGFiczEvMC0GA1UEAwwmUkNQIEludGVy\nbWVkaWF0ZSBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwggIiMA0GCSqGSIb3DQEBAQUA\nA4ICDwAwggIKAoICAQDf9dqbxc8Bq7Ctq9rWcxrGNKKHivqLAFpPq02yLPx6fsOv\nTq7GsDChAYBBc4v7Y2Ap9RD5Vs3dIhEANcnolf27QwrG9RMnnvzk8pCvp1o6zSU4\nVuOE1W66/O1/7e2rVxyrnTcP7UgK43zNIXu7+tiAqWsO92uSnuMoGPGpeaUm1jym\nhjWKtkAwDFSqvHY+XL5qDVBEjeUe+WHkYUg40cAXjusAqgm2hZt29c2wnVrxW25W\nP0meNlzHGFdA2AC5z54iRiqj57dTfBTkHoBczQxcyw6hhzxZQ4e5I5zOKjXXEhZN\nr0tA3YC14CTabKRus/JmZieyZzRgEy2oti64tmLYTqSlAD78pRL40VNoaSYetXLw\nhhNsXCHgWaY6d5bLOc/aIQMAV5oLvZQKvuXAF1IDmhPA+bZbpWipp0zagf1P1H3s\nUzsMdn2KM0ejzgotbtNlj5TcrVwpmvE3ktvUAuA+hi3FkVx1US+2Gsp5x4YOzJ7u\nP1WPk6ShF0JgnJH2ILdj6kttTWwFzH17keSFICWDfH/+kM+k7Y1v3EXMQXE7y0T9\nMjvJskz6d/nv+sQhY04xt64xFMGTnZjlJMzfQNi7zWFLTZnDD0lPowq7l3YiPoTT\nt5Xky83lu0KZsZBo0WlWaDG00gLVdtRgVbcuSWxpi5BdLb1kRab66JptWjxwXQID\nAQABo4HrMIHoMDoGA1UdHwQzMDEwL6AtoCuGKWh0dHBzOi8vcmwtY2Etc2VydmVy\nLnJlZGlzbGFicy5jb20vdjEvY3JsMEYGCCsGAQUFBwEBBDowODA2BggrBgEFBQcw\nAYYqaHR0cHM6Ly9ybC1jYS1zZXJ2ZXIucmVkaXNsYWJzLmNvbS92MS9vY3NwMB0G\nA1UdDgQWBBQHar5OKvQUpP2qWt6mckzToeCOHDAfBgNVHSMEGDAWgBQi42wH6hM4\nL2sujEvLM0/u8lRXTzASBgNVHRMBAf8ECDAGAQH/AgEAMA4GA1UdDwEB/wQEAwIB\nhjANBgkqhkiG9w0BAQsFAAOCAgEAirEn/iTsAKyhd+pu2W3Z5NjCko4NPU0EYUbr\nAP7+POK2rzjIrJO3nFYQ/LLuC7KCXG+2qwan2SAOGmqWst13Y+WHp44Kae0kaChW\nvcYLXXSoGQGC8QuFSNUdaeg3RbMDYFT04dOkqufeWVccoHVxyTSg9eD8LZuHn5jw\n7QDLiEECBmIJHk5Eeo2TAZrx4Yx6ufSUX5HeVjlAzqwtAqdt99uCJ/EL8bgpWbe+\nXoSpvUv0SEC1I1dCAhCKAvRlIOA6VBcmzg5Am12KzkqTul12/VEFIgzqu0Zy2Jbc\nAUPrYVu/+tOGXQaijy7YgwH8P8n3s7ZeUa1VABJHcxrxYduDDJBLZi+MjheUDaZ1\njQRHYevI2tlqeSBqdPKG4zBY5lS0GiAlmuze5oENt0P3XboHoZPHiqcK3VECgTVh\n/BkJcuudETSJcZDmQ8YfoKfBzRQNg2sv/hwvUv73Ss51Sco8GEt2lD8uEdib1Q6z\nzDT5lXJowSzOD5ZA9OGDjnSRL+2riNtKWKEqvtEG3VBJoBzu9GoxbAc7wIZLxmli\niF5a/Zf5X+UXD3s4TMmy6C4QZJpAA2egsSQCnraWO2ULhh7iXMysSkF/nzVfZn43\niqpaB8++9a37hWq14ZmOv0TJIDz//b2+KC4VFXWQ5W5QC6whsjT+OlG4p5ZYG0jo\n616pxqo=\n-----END CERTIFICATE-----\n-----BEGIN CERTIFICATE-----\nMIIFujCCA6KgAwIBAgIJAJ1aTT1lu2ScMA0GCSqGSIb3DQEBCwUAMGoxCzAJBgNV\nBAYTAlVTMQswCQYDVQQIDAJDQTELMAkGA1UEBwwCQ0ExEjAQBgNVBAoMCVJlZGlz\nTGFiczEtMCsGA1UEAwwkUmVkaXNMYWJzIFJvb3QgQ2VydGlmaWNhdGUgQXV0aG9y\naXR5MB4XDTE4MDIyNTE1MjA0MloXDTM4MDIyMDE1MjA0MlowajELMAkGA1UEBhMC\nVVMxCzAJBgNVBAgMAkNBMQswCQYDVQQHDAJDQTESMBAGA1UECgwJUmVkaXNMYWJz\nMS0wKwYDVQQDDCRSZWRpc0xhYnMgUm9vdCBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkw\nggIiMA0GCSqGSIb3DQEBAQUAA4ICDwAwggIKAoICAQDLEjXy7YrbN5Waau5cd6g1\nG5C2tMmeTpZ0duFAPxNU4oE3RHS5gGiok346fUXuUxbZ6QkuzeN2/2Z+RmRcJhQY\nDm0ZgdG4x59An1TJfnzKKoWj8ISmoHS/TGNBdFzXV7FYNLBuqZouqePI6ReC6Qhl\npp45huV32Q3a6IDrrvx7Wo5ZczEQeFNbCeCOQYNDdTmCyEkHqc2AGo8eoIlSTutT\nULOC7R5gzJVTS0e1hesQ7jmqHjbO+VQS1NAL4/5K6cuTEqUl+XhVhPdLWBXJQ5ag\n54qhX4v+ojLzeU1R/Vc6NjMvVtptWY6JihpgplprN0Yh2556ewcXMeturcKgXfGJ\nxeYzsjzXerEjrVocX5V8BNrg64NlifzTMKNOOv4fVZszq1SIHR8F9ROrqiOdh8iC\nJpUbLpXH9hWCSEO6VRMB2xJoKu3cgl63kF30s77x7wLFMEHiwsQRKxooE1UhgS9K\n2sO4TlQ1eWUvFvHSTVDQDlGQ6zu4qjbOpb3Q8bQwoK+ai2alkXVR4Ltxe9QlgYK3\nStsnPhruzZGA0wbXdpw0bnM+YdlEm5ffSTpNIfgHeaa7Dtb801FtA71ZlH7A6TaI\nSIQuUST9EKmv7xrJyx0W1pGoPOLw5T029aTjnICSLdtV9bLwysrLhIYG5bnPq78B\ncS+jZHFGzD7PUVGQD01nOQIDAQABo2MwYTAdBgNVHQ4EFgQUIuNsB+oTOC9rLoxL\nyzNP7vJUV08wHwYDVR0jBBgwFoAUIuNsB+oTOC9rLoxLyzNP7vJUV08wDwYDVR0T\nAQH/BAUwAwEB/zAOBgNVHQ8BAf8EBAMCAYYwDQYJKoZIhvcNAQELBQADggIBAHfg\nz5pMNUAKdMzK1aS1EDdK9yKz4qicILz5czSLj1mC7HKDRy8cVADUxEICis++CsCu\nrYOvyCVergHQLREcxPq4rc5Nq1uj6J6649NEeh4WazOOjL4ZfQ1jVznMbGy+fJm3\n3Hoelv6jWRG9iqeJZja7/1s6YC6bWymI/OY1e4wUKeNHAo+Vger7MlHV+RuabaX+\nhSJ8bJAM59NCM7AgMTQpJCncrcdLeceYniGy5Q/qt2b5mJkQVkIdy4TPGGB+AXDJ\nD0q3I/JDRkDUFNFdeW0js7fHdsvCR7O3tJy5zIgEV/o/BCkmJVtuwPYOrw/yOlKj\nTY/U7ATAx9VFF6/vYEOMYSmrZlFX+98L6nJtwDqfLB5VTltqZ4H/KBxGE3IRSt9l\nFXy40U+LnXzhhW+7VBAvyYX8GEXhHkKU8Gqk1xitrqfBXY74xKgyUSTolFSfFVgj\nmcM/X4K45bka+qpkj7Kfv/8D4j6aZekwhN2ly6hhC1SmQ8qjMjpG/mrWOSSHZFmf\nybu9iD2AYHeIOkshIl6xYIa++Q/00/vs46IzAbQyriOi0XxlSMMVtPx0Q3isp+ji\nn8Mq9eOuxYOEQ4of8twUkUDd528iwGtEdwf0Q01UyT84S62N8AySl1ZBKXJz6W4F\nUhWfa/HQYOAPDdEjNgnVwLI23b8t0TozyCWw7q8h\n-----END CERTIFICATE-----\n\n-----BEGIN CERTIFICATE-----\nMIIEjzCCA3egAwIBAgIQe55B/ALCKJDZtdNT8kD6hTANBgkqhkiG9w0BAQsFADBM\nMSAwHgYDVQQLExdHbG9iYWxTaWduIFJvb3QgQ0EgLSBSMzETMBEGA1UEChMKR2xv\nYmFsU2lnbjETMBEGA1UEAxMKR2xvYmFsU2lnbjAeFw0yMjAxMjYxMjAwMDBaFw0y\nNTAxMjYwMDAwMDBaMFgxCzAJBgNVBAYTAkJFMRkwFwYDVQQKExBHbG9iYWxTaWdu\nIG52LXNhMS4wLAYDVQQDEyVHbG9iYWxTaWduIEF0bGFzIFIzIE9WIFRMUyBDQSAy\nMDIyIFEyMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAmGmg1LW9b7Lf\n8zDD83yBDTEkt+FOxKJZqF4veWc5KZsQj9HfnUS2e5nj/E+JImlGPsQuoiosLuXD\nBVBNAMcUFa11buFMGMeEMwiTmCXoXRrXQmH0qjpOfKgYc5gHG3BsRGaRrf7VR4eg\nofNMG9wUBw4/g/TT7+bQJdA4NfE7Y4d5gEryZiBGB/swaX6Jp/8MF4TgUmOWmalK\ndZCKyb4sPGQFRTtElk67F7vU+wdGcrcOx1tDcIB0ncjLPMnaFicagl+daWGsKqTh\ncounQb6QJtYHa91KvCfKWocMxQ7OIbB5UARLPmC4CJ1/f8YFm35ebfzAeULYdGXu\njE9CLor0OwIDAQABo4IBXzCCAVswDgYDVR0PAQH/BAQDAgGGMB0GA1UdJQQWMBQG\nCCsGAQUFBwMBBggrBgEFBQcDAjASBgNVHRMBAf8ECDAGAQH/AgEAMB0GA1UdDgQW\nBBSH5Zq7a7B/t95GfJWkDBpA8HHqdjAfBgNVHSMEGDAWgBSP8Et/qC5FJK5NUPpj\nmove4t0bvDB7BggrBgEFBQcBAQRvMG0wLgYIKwYBBQUHMAGGImh0dHA6Ly9vY3Nw\nMi5nbG9iYWxzaWduLmNvbS9yb290cjMwOwYIKwYBBQUHMAKGL2h0dHA6Ly9zZWN1\ncmUuZ2xvYmFsc2lnbi5jb20vY2FjZXJ0L3Jvb3QtcjMuY3J0MDYGA1UdHwQvMC0w\nK6ApoCeGJWh0dHA6Ly9jcmwuZ2xvYmFsc2lnbi5jb20vcm9vdC1yMy5jcmwwIQYD\nVR0gBBowGDAIBgZngQwBAgIwDAYKKwYBBAGgMgoBAjANBgkqhkiG9w0BAQsFAAOC\nAQEAKRic9/f+nmhQU/wz04APZLjgG5OgsuUOyUEZjKVhNGDwxGTvKhyXGGAMW2B/\n3bRi+aElpXwoxu3pL6fkElbX3B0BeS5LoDtxkyiVEBMZ8m+sXbocwlPyxrPbX6mY\n0rVIvnuUeBH8X0L5IwfpNVvKnBIilTbcebfHyXkPezGwz7E1yhUULjJFm2bt0SdX\ny+4X/WeiiYIv+fTVgZZgl+/2MKIsu/qdBJc3f3TvJ8nz+Eax1zgZmww+RSQWeOj3\n15Iw6Z5FX+NwzY/Ab+9PosR5UosSeq+9HhtaxZttXG1nVh+avYPGYddWmiMT90J5\nZgKnO/Fx2hBgTxhOTMYaD312kg==\n-----END CERTIFICATE-----\n\n-----BEGIN CERTIFICATE-----\nMIIDXzCCAkegAwIBAgILBAAAAAABIVhTCKIwDQYJKoZIhvcNAQELBQAwTDEgMB4G\nA1UECxMXR2xvYmFsU2lnbiBSb290IENBIC0gUjMxEzARBgNVBAoTCkdsb2JhbFNp\nZ24xEzARBgNVBAMTCkdsb2JhbFNpZ24wHhcNMDkwMzE4MTAwMDAwWhcNMjkwMzE4\nMTAwMDAwWjBMMSAwHgYDVQQLExdHbG9iYWxTaWduIFJvb3QgQ0EgLSBSMzETMBEG\nA1UEChMKR2xvYmFsU2lnbjETMBEGA1UEAxMKR2xvYmFsU2lnbjCCASIwDQYJKoZI\nhvcNAQEBBQADggEPADCCAQoCggEBAMwldpB5BngiFvXAg7aEyiie/QV2EcWtiHL8\nRgJDx7KKnQRfJMsuS+FggkbhUqsMgUdwbN1k0ev1LKMPgj0MK66X17YUhhB5uzsT\ngHeMCOFJ0mpiLx9e+pZo34knlTifBtc+ycsmWQ1z3rDI6SYOgxXG71uL0gRgykmm\nKPZpO/bLyCiR5Z2KYVc3rHQU3HTgOu5yLy6c+9C7v/U9AOEGM+iCK65TpjoWc4zd\nQQ4gOsC0p6Hpsk+QLjJg6VfLuQSSaGjlOCZgdbKfd/+RFO+uIEn8rUAVSNECMWEZ\nXriX7613t2Saer9fwRPvm2L7DWzgVGkWqQPabumDk3F2xmmFghcCAwEAAaNCMEAw\nDgYDVR0PAQH/BAQDAgEGMA8GA1UdEwEB/wQFMAMBAf8wHQYDVR0OBBYEFI/wS3+o\nLkUkrk1Q+mOai97i3Ru8MA0GCSqGSIb3DQEBCwUAA4IBAQBLQNvAUKr+yAzv95ZU\nRUm7lgAJQayzE4aGKAczymvmdLm6AC2upArT9fHxD4q/c2dKg8dEe3jgr25sbwMp\njjM5RcOO5LlXbKr8EpbsU8Yt5CRsuZRj+9xTaGdWPoO4zzUhw8lo/s7awlOqzJCK\n6fBdRoyV3XpYKBovHd7NADdBj+1EbddTKJd+82cEHhXXipa0095MJ6RMG3NzdvQX\nmcIfeg7jLQitChws/zyrVQ4PkX4268NXSb7hLi18YIvDQVETI53O9zJrlAGomecs\nMx86OyXShkDOOyyGeMlhLxS67ttVb9+E7gUJTb0o2HLO02JQZR7rkpeDMdmztcpH\nWD9f\n-----END CERTIFICATE-----";hO.default={RedisCloudFixed:{ca:fO},RedisCloudFlexible:{ca:fO}},function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.noop=e.defaults=e.Debug=e.zipMap=e.CONNECTION_CLOSED_ERROR_MSG=e.shuffle=e.sample=e.resolveTLSProfile=e.parseURL=e.optimizeErrorStack=e.toArg=e.convertMapToArray=e.convertObjectToArray=e.timeout=e.packObject=e.isInt=e.wrapMultiResult=e.convertBufferToString=void 0;const t=h,n=SR;Object.defineProperty(e,"defaults",{enumerable:!0,get:function(){return n.defaults}}),Object.defineProperty(e,"noop",{enumerable:!0,get:function(){return n.noop}}),e.Debug=XR.default;const r=hO;function s(e){const t=parseFloat(e);return!isNaN(e)&&(0|t)===t}e.convertBufferToString=function e(t,n){if(t instanceof Buffer)return t.toString(n);if(Array.isArray(t)){const r=t.length,s=Array(r);for(let i=0;r>i;++i)s[i]=t[i]instanceof Buffer&&"utf8"===n?""+t[i]:e(t[i],n);return s}return t},e.wrapMultiResult=function(e){if(!e)return null;const t=[],n=e.length;for(let r=0;n>r;++r){const n=e[r];t.push(n instanceof Error?[n]:[null,n])}return t},e.isInt=s,e.packObject=function(e){const t={},n=e.length;for(let r=1;n>r;r+=2)t[e[r-1]]=e[r];return t},e.timeout=function(e,t){let n=null;const r=function(){n&&(clearTimeout(n),n=null,e.apply(this,arguments))};return n=setTimeout(r,t,Error("timeout")),r},e.convertObjectToArray=function(e){const t=[],n=Object.keys(e);for(let r=0,s=n.length;s>r;r++)t.push(n[r],e[n[r]]);return t},e.convertMapToArray=function(e){const t=[];let n=0;return e.forEach((function(e,r){t[n]=r,t[n+1]=e,n+=2})),t},e.toArg=function(e){return null==e?"":e+""},e.optimizeErrorStack=function(e,t,n){const r=t.split("\n");let s,i="";for(s=1;r.length>s&&-1!==r[s].indexOf(n);++s);for(let e=s;r.length>e;++e)i+="\n"+r[e];if(e.stack){const t=e.stack.indexOf("\n");e.stack=e.stack.slice(0,t)+i}return e},e.parseURL=function(e){if(s(e))return{port:e};let r=(0,t.parse)(e,!0,!0);r.slashes||"/"===e[0]||(r=(0,t.parse)(e="//"+e,!0,!0));const i=r.query||{},o={};if(r.auth){const e=r.auth.indexOf(":");o.username=-1===e?r.auth:r.auth.slice(0,e),o.password=-1===e?"":r.auth.slice(e+1)}if(r.pathname&&("redis:"===r.protocol||"rediss:"===r.protocol?r.pathname.length>1&&(o.db=r.pathname.slice(1)):o.path=r.pathname),r.host&&(o.host=r.hostname),r.port&&(o.port=r.port),"string"==typeof i.family){const e=Number.parseInt(i.family,10);Number.isNaN(e)||(o.family=e)}return(0,n.defaults)(o,i),o},e.resolveTLSProfile=function(e){let t=null==e?void 0:e.tls;"string"==typeof t&&(t={profile:t});const n=r.default[null==t?void 0:t.profile];return n&&(t=Object.assign({},n,t),delete t.profile,e=Object.assign({},e,{tls:t})),e},e.sample=function(e,t=0){const n=e.length;return n>t?e[t+Math.floor(Math.random()*(n-t))]:null},e.shuffle=function(e){let t=e.length;for(;t>0;){const n=Math.floor(Math.random()*t);t--,[e[t],e[n]]=[e[n],e[t]]}return e},e.CONNECTION_CLOSED_ERROR_MSG="Connection is closed.",e.zipMap=function(e,t){const n=new Map;return e.forEach(((e,r)=>{n.set(e,t[r])})),n}}(AR),Object.defineProperty(yR,"__esModule",{value:!0});const mO=sR,gO=_R,yO=oR,vO=AR;class bO{constructor(e,t=[],n={},r){if(this.name=e,this.inTransaction=!1,this.isResolved=!1,this.transformed=!1,this.replyEncoding=n.replyEncoding,this.errorStack=n.errorStack,this.args=t.flat(),this.callback=r,this.initPromise(),n.keyPrefix){const e=n.keyPrefix instanceof Buffer;let t=e?n.keyPrefix:null;this._iterateKeys((r=>r instanceof Buffer?(null===t&&(t=Buffer.from(n.keyPrefix)),Buffer.concat([t,r])):e?Buffer.concat([n.keyPrefix,Buffer.from(r+"")]):n.keyPrefix+r))}n.readOnly&&(this.isReadOnly=!0)}static checkFlag(e,t){return!!this.getFlagMap()[e][t]}static setArgumentTransformer(e,t){this._transformer.argument[e]=t}static setReplyTransformer(e,t){this._transformer.reply[e]=t}static getFlagMap(){return this.flagMap||(this.flagMap=Object.keys(bO.FLAGS).reduce(((e,t)=>(e[t]={},bO.FLAGS[t].forEach((n=>{e[t][n]=!0})),e)),{})),this.flagMap}getSlot(){if(void 0===this.slot){const e=this.getKeys()[0];this.slot=null==e?null:gO(e)}return this.slot}getKeys(){return this._iterateKeys()}toWritable(e){let t;const n="*"+(this.args.length+1)+"\r\n$"+Buffer.byteLength(this.name)+"\r\n"+this.name+"\r\n";if(this.bufferMode){const e=new AO;e.push(n);for(let t=0;this.args.length>t;++t){const n=this.args[t];n instanceof Buffer?0===n.length?e.push("$0\r\n\r\n"):(e.push("$"+n.length+"\r\n"),e.push(n),e.push("\r\n")):e.push("$"+Buffer.byteLength(n)+"\r\n"+n+"\r\n")}t=e.toBuffer()}else{t=n;for(let e=0;this.args.length>e;++e){const n=this.args[e];t+="$"+Buffer.byteLength(n)+"\r\n"+n+"\r\n"}}return t}stringifyArguments(){for(let e=0;this.args.length>e;++e){const t=this.args[e];"string"==typeof t||(t instanceof Buffer?this.bufferMode=!0:this.args[e]=(0,vO.toArg)(t))}}transformReply(e){this.replyEncoding&&(e=(0,vO.convertBufferToString)(e,this.replyEncoding));const t=bO._transformer.reply[this.name];return t&&(e=t(e)),e}setTimeout(e){this._commandTimeoutTimer||(this._commandTimeoutTimer=setTimeout((()=>{this.isResolved||this.reject(Error("Command timed out"))}),e))}initPromise(){const e=new Promise(((e,t)=>{if(!this.transformed){this.transformed=!0;const e=bO._transformer.argument[this.name];e&&(this.args=e(this.args)),this.stringifyArguments()}this.resolve=this._convertValue(e),this.reject=this.errorStack?e=>{t((0,vO.optimizeErrorStack)(e,this.errorStack.stack,__dirname))}:t}));this.promise=(0,yO.default)(e,this.callback)}_iterateKeys(e=e=>e){if(void 0===this.keys&&(this.keys=[],(0,mO.exists)(this.name))){const t=(0,mO.getKeyIndexes)(this.name,this.args);for(const n of t)this.args[n]=e(this.args[n]),this.keys.push(this.args[n])}return this.keys}_convertValue(e){return t=>{try{const n=this._commandTimeoutTimer;n&&(clearTimeout(n),delete this._commandTimeoutTimer),e(this.transformReply(t)),this.isResolved=!0}catch(e){this.reject(e)}return this.promise}}}yR.default=bO,bO.FLAGS={VALID_IN_SUBSCRIBER_MODE:["subscribe","psubscribe","unsubscribe","punsubscribe","ssubscribe","sunsubscribe","ping","quit"],VALID_IN_MONITOR_MODE:["monitor","auth"],ENTER_SUBSCRIBER_MODE:["subscribe","psubscribe","ssubscribe"],EXIT_SUBSCRIBER_MODE:["unsubscribe","punsubscribe","sunsubscribe"],WILL_DISCONNECT:["quit"]},bO._transformer={argument:{},reply:{}};const EO=function(e){if(1===e.length){if(e[0]instanceof Map)return(0,vO.convertMapToArray)(e[0]);if("object"==typeof e[0]&&null!==e[0])return(0,vO.convertObjectToArray)(e[0])}return e},_O=function(e){if(2===e.length){if(e[1]instanceof Map)return[e[0]].concat((0,vO.convertMapToArray)(e[1]));if("object"==typeof e[1]&&null!==e[1])return[e[0]].concat((0,vO.convertObjectToArray)(e[1]))}return e};bO.setArgumentTransformer("mset",EO),bO.setArgumentTransformer("msetnx",EO),bO.setArgumentTransformer("hset",_O),bO.setArgumentTransformer("hmset",_O),bO.setReplyTransformer("hgetall",(function(e){if(Array.isArray(e)){const t={};for(let n=0;e.length>n;n+=2){const r=e[n],s=e[n+1];r in t?Object.defineProperty(t,r,{value:s,configurable:!0,enumerable:!0,writable:!0}):t[r]=s}return t}return e}));class AO{constructor(){this.length=0,this.items=[]}push(e){this.length+=Buffer.byteLength(e),this.items.push(e)}toBuffer(){const e=Buffer.allocUnsafe(this.length);let t=0;for(const n of this.items){const r=Buffer.byteLength(n);Buffer.isBuffer(n)?n.copy(e,t):e.write(n,t,r),t+=r}return e}}var SO={};Object.defineProperty(SO,"__esModule",{value:!0});const TO=gR;class wO extends TO.RedisError{constructor(e,t){super(e),this.lastNodeError=t,Error.captureStackTrace(this,this.constructor)}get name(){return this.constructor.name}}SO.default=wO,wO.defaultMessage="Failed to refresh slots cache.";var xO={};Object.defineProperty(xO,"__esModule",{value:!0});const kO=_;xO.default=class extends kO.Readable{constructor(e){super(e),this.opt=e,this._redisCursor="0",this._redisDrained=!1}_read(){if(this._redisDrained)return void this.push(null);const e=[this._redisCursor];this.opt.key&&e.unshift(this.opt.key),this.opt.match&&e.push("MATCH",this.opt.match),this.opt.type&&e.push("TYPE",this.opt.type),this.opt.count&&e.push("COUNT",this.opt.count+""),this.opt.redis[this.opt.command](e,((e,t)=>{e?this.emit("error",e):(this._redisCursor=t[0]instanceof Buffer?""+t[0]:t[0],"0"===this._redisCursor&&(this._redisDrained=!0),this.push(t[1]))}))}close(){this._redisDrained=!0}};var CO={},IO={},RO={},OO={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.executeWithAutoPipelining=e.getFirstValueInFlattenedArray=e.shouldUseAutoPipelining=e.notAllowedAutoPipelineCommands=e.kCallbacks=e.kExec=void 0;const t=SR,n=_R,r=oR;function s(t,n){if(t._runningAutoPipelines.has(n))return;if(!t._autoPipelines.has(n))return;t._runningAutoPipelines.add(n);const r=t._autoPipelines.get(n);t._autoPipelines.delete(n);const i=r[e.kCallbacks];r[e.kCallbacks]=null,r.exec((function(e,r){if(t._runningAutoPipelines.delete(n),e)for(let t=0;i.length>t;t++)process.nextTick(i[t],e);else for(let e=0;i.length>e;e++)process.nextTick(i[e],...r[e]);t._autoPipelines.has(n)&&s(t,n)}))}function i(e){for(let n=0;e.length>n;n++){const r=e[n];if("string"==typeof r)return r;if(Array.isArray(r)||(0,t.isArguments)(r)){if(0===r.length)continue;return r[0]}const s=[r].flat();if(s.length>0)return s[0]}}e.kExec=Symbol("exec"),e.kCallbacks=Symbol("callbacks"),e.notAllowedAutoPipelineCommands=["auth","info","script","quit","cluster","pipeline","multi","subscribe","psubscribe","unsubscribe","unpsubscribe","select"],e.shouldUseAutoPipelining=function(t,n,r){return n&&t.options.enableAutoPipelining&&!t.isPipeline&&!e.notAllowedAutoPipelineCommands.includes(r)&&!t.options.autoPipeliningIgnoredCommands.includes(r)},e.getFirstValueInFlattenedArray=i,e.executeWithAutoPipelining=function o(a,c,l,u,p){if(a.isCluster&&!a.slots.length)return"wait"===a.status&&a.connect().catch(t.noop),(0,r.default)(new Promise((function(e,t){a.delayUntilReady((n=>{n?t(n):o(a,c,l,u,null).then(e,t)}))})),p);const d=a.isCluster?a.slots[n(`${a.options.keyPrefix||""}${i(u)}`)].join(","):"main";if(!a._autoPipelines.has(d)){const t=a.pipeline();t[e.kExec]=!1,t[e.kCallbacks]=[],a._autoPipelines.set(d,t)}const h=a._autoPipelines.get(d);h[e.kExec]||(h[e.kExec]=!0,setImmediate(s,a,d));const f=new Promise((function(t,n){h[e.kCallbacks].push((function(e,r){e?n(e):t(r)})),"call"===c&&u.unshift(l),h[c](...u)}));return(0,r.default)(f,p)}}(OO);var NO={};Object.defineProperty(NO,"__esModule",{value:!0});const DO=A,PO=yR,LO=oR;NO.default=class{constructor(e,t=null,n="",r=!1){this.lua=e,this.numberOfKeys=t,this.keyPrefix=n,this.readOnly=r,this.sha=(0,DO.createHash)("sha1").update(e).digest("hex");const s=this.sha,i=new WeakSet;this.Command=class extends PO.default{toWritable(t){const n=this.reject;return this.reject=e=>{-1!==e.message.indexOf("NOSCRIPT")&&i.delete(t),n.call(this,e)},i.has(t)?"eval"===this.name&&(this.name="evalsha",this.args[0]=s):(i.add(t),this.name="eval",this.args[0]=e),super.toWritable(t)}}}execute(e,t,n,r){"number"==typeof this.numberOfKeys&&t.unshift(this.numberOfKeys),this.keyPrefix&&(n.keyPrefix=this.keyPrefix),this.readOnly&&(n.readOnly=!0);const s=new this.Command("evalsha",[this.sha,...t],n);return s.promise=s.promise.catch((r=>{if(-1===r.message.indexOf("NOSCRIPT"))throw r;const s=new this.Command("evalsha",[this.sha,...t],n);return(e.isPipeline?e.redis:e).sendCommand(s)})),(0,LO.default)(s.promise,r),e.sendCommand(s)}},Object.defineProperty(RO,"__esModule",{value:!0});const MO=sR,BO=OO,jO=yR,FO=NO;class $O{constructor(){this.options={},this.scriptsSet={},this.addedBuiltinSet=new Set}getBuiltinCommands(){return UO.slice(0)}createBuiltinCommand(e){return{string:HO(null,e,"utf8"),buffer:HO(null,e,null)}}addBuiltinCommand(e){this.addedBuiltinSet.add(e),this[e]=HO(e,e,"utf8"),this[e+"Buffer"]=HO(e+"Buffer",e,null)}defineCommand(e,t){const n=new FO.default(t.lua,t.numberOfKeys,this.options.keyPrefix,t.readOnly);this.scriptsSet[e]=n,this[e]=GO(e,e,n,"utf8"),this[e+"Buffer"]=GO(e+"Buffer",e,n,null)}sendCommand(e,t,n){throw Error('"sendCommand" is not implemented')}}const UO=MO.list.filter((e=>"monitor"!==e));function HO(e,t,n){return void 0===n&&(n=t,t=null),function(...r){const s=t||r.shift();let i=r[r.length-1];"function"==typeof i?r.pop():i=void 0;const o={errorStack:this.options.showFriendlyErrorStack?Error():void 0,keyPrefix:this.options.keyPrefix,replyEncoding:n};return(0,BO.shouldUseAutoPipelining)(this,e,s)?(0,BO.executeWithAutoPipelining)(this,e,s,r,i):this.sendCommand(new jO.default(s,r,o,i))}}function GO(e,t,n,r){return function(...s){const i="function"==typeof s[s.length-1]?s.pop():void 0,o={replyEncoding:r};return this.options.showFriendlyErrorStack&&(o.errorStack=Error()),(0,BO.shouldUseAutoPipelining)(this,e,t)?(0,BO.executeWithAutoPipelining)(this,e,t,s,i):n.execute(this,s,o,i)}}UO.push("sentinel"),UO.forEach((function(e){$O.prototype[e]=HO(e,e,"utf8"),$O.prototype[e+"Buffer"]=HO(e+"Buffer",e,null)})),$O.prototype.call=HO("call","utf8"),$O.prototype.callBuffer=HO("callBuffer",null),$O.prototype.send_command=$O.prototype.call,RO.default=$O,Object.defineProperty(IO,"__esModule",{value:!0});const qO=_R,zO=sR,VO=oR,YO=l,KO=yR,QO=AR,WO=RO;class JO extends WO.default{constructor(e){super(),this.redis=e,this.isPipeline=!0,this.replyPending=0,this._queue=[],this._result=[],this._transactions=0,this._shaToScript={},this.isCluster="Cluster"===this.redis.constructor.name||this.redis.isCluster,this.options=e.options,Object.keys(e.scriptsSet).forEach((t=>{const n=e.scriptsSet[t];this._shaToScript[n.sha]=n,this[t]=e[t],this[t+"Buffer"]=e[t+"Buffer"]})),e.addedBuiltinSet.forEach((t=>{this[t]=e[t],this[t+"Buffer"]=e[t+"Buffer"]})),this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}));const t=this;Object.defineProperty(this,"length",{get:function(){return t._queue.length}})}fillResult(e,t){if("exec"===this._queue[t].name&&Array.isArray(e[1])){const n=e[1].length;for(let r=0;n>r;r++){if(e[1][r]instanceof Error)continue;const s=this._queue[t-(n-r)];try{e[1][r]=s.transformReply(e[1][r])}catch(t){e[1][r]=t}}}if(this._result[t]=e,--this.replyPending)return;if(this.isCluster){let e,t=!0;for(let n=0;this._result.length>n;++n){const r=this._result[n][0],s=this._queue[n];if(r){if("exec"===s.name&&"EXECABORT Transaction discarded because of previous errors."===r.message)continue;if(e){if(e.name!==r.name||e.message!==r.message){t=!1;break}}else e={name:r.name,message:r.message}}else if(!(s.inTransaction||(0,zO.exists)(s.name)&&(0,zO.hasFlag)(s.name,"readonly"))){t=!1;break}}if(e&&t){const t=this,n=e.message.split(" "),r=this._queue;let s=!1;this._queue=[];for(let e=0;r.length>e;++e){if(!("ASK"!==n[0]||s||"asking"===r[e].name||r[e-1]&&"asking"===r[e-1].name)){const e=new KO.default("asking");e.ignore=!0,this.sendCommand(e)}r[e].initPromise(),this.sendCommand(r[e]),s=r[e].inTransaction}let i=!0;void 0===this.leftRedirections&&(this.leftRedirections={});const o=function(){t.exec()},a=this.redis;if(a.handleError(e,this.leftRedirections,{moved:function(e,r){t.preferKey=r,a.slots[n[1]]=[r],a._groupsBySlot[n[1]]=a._groupsIds[a.slots[n[1]].join(";")],a.refreshSlotsCache(),t.exec()},ask:function(e,n){t.preferKey=n,t.exec()},tryagain:o,clusterDown:o,connectionClosed:o,maxRedirections:()=>{i=!1},defaults:()=>{i=!1}}),i)return}}let n=0;for(let e=0;this._queue.length-n>e;++e)this._queue[e+n].ignore&&(n+=1),this._result[e]=this._result[e+n];this.resolve(this._result.slice(0,this._result.length-n))}sendCommand(e){this._transactions>0&&(e.inTransaction=!0);const t=this._queue.length;return e.pipelineIndex=t,e.promise.then((e=>{this.fillResult([null,e],t)})).catch((e=>{this.fillResult([e],t)})),this._queue.push(e),this}addBatch(e){let t,n,r;for(let s=0;e.length>s;++s)t=e[s],n=t[0],r=t.slice(1),this[n].apply(this,r);return this}}IO.default=JO;const XO=JO.prototype.multi;JO.prototype.multi=function(){return this._transactions+=1,XO.apply(this,arguments)};const ZO=JO.prototype.execBuffer;JO.prototype.execBuffer=(0,YO.deprecate)((function(){return this._transactions>0&&(this._transactions-=1),ZO.apply(this,arguments)}),"Pipeline#execBuffer: Use Pipeline#exec instead"),JO.prototype.exec=function(e){if(this.isCluster&&!this.redis.slots.length)return"wait"===this.redis.status&&this.redis.connect().catch(QO.noop),e&&!this.nodeifiedPromise&&(this.nodeifiedPromise=!0,(0,VO.default)(this.promise,e)),this.redis.delayUntilReady((t=>{t?this.reject(t):this.exec(e)})),this.promise;if(this._transactions>0)return this._transactions-=1,ZO.apply(this,arguments);let t;if(this.nodeifiedPromise||(this.nodeifiedPromise=!0,(0,VO.default)(this.promise,e)),this._queue.length||this.resolve([]),this.isCluster){const e=[];for(let t=0;this._queue.length>t;t++){const n=this._queue[t].getKeys();if(n.length&&e.push(n[0]),n.length&&0>qO.generateMulti(n))return this.reject(Error("All the keys in a pipeline command should belong to the same slot")),this.promise}if(e.length){if(t=function(e,t){const n=qO(t[0]),r=e._groupsBySlot[n];for(let n=1;t.length>n;n++)if(e._groupsBySlot[qO(t[n])]!==r)return-1;return n}(this.redis,e),0>t)return this.reject(Error("All keys in the pipeline should belong to the same slots allocation group")),this.promise}else t=16384*Math.random()|0}const n=this;return function(){let e,r=n.replyPending=n._queue.length;n.isCluster&&(e={slot:t,redis:n.redis.connectionPool.nodes.all[n.preferKey]});let s,i="";const o={isPipeline:!0,destination:n.isCluster?e:{redis:n.redis},write(e){"string"!=typeof e?(s||(s=[]),i&&(s.push(Buffer.from(i,"utf8")),i=""),s.push(e)):i+=e,--r||(s?(i&&s.push(Buffer.from(i,"utf8")),o.destination.redis.stream.write(Buffer.concat(s))):o.destination.redis.stream.write(i),r=n._queue.length,i="",s=void 0)}};for(let t=0;n._queue.length>t;++t)n.redis.sendCommand(n._queue[t],o,e)}(),this.promise},Object.defineProperty(CO,"__esModule",{value:!0}),CO.addTransactionSupport=void 0;const eN=AR,tN=oR,nN=IO;CO.addTransactionSupport=function(e){e.pipeline=function(e){const t=new nN.default(this);return Array.isArray(e)&&t.addBatch(e),t};const{multi:t}=e;e.multi=function(e,n){if(void 0!==n||Array.isArray(e)||(n=e,e=null),n&&!1===n.pipeline)return t.call(this);const r=new nN.default(this);r.multi(),Array.isArray(e)&&r.addBatch(e);const s=r.exec;r.exec=function(e){if(this.isCluster&&!this.redis.slots.length)return"wait"===this.redis.status&&this.redis.connect().catch(eN.noop),(0,tN.default)(new Promise(((e,t)=>{this.redis.delayUntilReady((n=>{n?t(n):this.exec(r).then(e,t)}))})),e);if(this._transactions>0&&s.call(r),this.nodeifiedPromise)return s.call(r);const t=s.call(r);return(0,tN.default)(t.then((function(e){const t=e[e.length-1];if(void 0===t)throw Error("Pipeline cannot be used to send any commands when the `exec()` has been called on it.");if(t[0]){t[0].previousErrors=[];for(let n=0;e.length-1>n;++n)e[n][0]&&t[0].previousErrors.push(e[n][0]);throw t[0]}return(0,eN.wrapMultiResult)(t[1])})),e)};const{execBuffer:i}=r;return r.execBuffer=function(e){return this._transactions>0&&i.call(r),r.exec(e)},r};const{exec:n}=e;e.exec=function(e){return(0,tN.default)(n.call(this).then((function(e){return Array.isArray(e)&&(e=(0,eN.wrapMultiResult)(e)),e})),e)}};var rN={};Object.defineProperty(rN,"__esModule",{value:!0}),rN.default=function(e,t){Object.getOwnPropertyNames(t.prototype).forEach((n=>{Object.defineProperty(e.prototype,n,Object.getOwnPropertyDescriptor(t.prototype,n))}))};var sN={};Object.defineProperty(sN,"__esModule",{value:!0}),sN.DEFAULT_CLUSTER_OPTIONS=void 0,sN.DEFAULT_CLUSTER_OPTIONS={clusterRetryStrategy:e=>Math.min(100+2*e,2e3),enableOfflineQueue:!0,enableReadyCheck:!0,scaleReads:"master",maxRedirections:16,retryDelayOnMoved:0,retryDelayOnFailover:100,retryDelayOnClusterDown:100,retryDelayOnTryAgain:100,slotsRefreshTimeout:1e3,useSRVRecords:!1,resolveSrv:S.resolveSrv,dnsLookup:S.lookup,enableAutoPipelining:!1,autoPipeliningIgnoredCommands:[]};var iN={},oN={};Object.defineProperty(oN,"__esModule",{value:!0}),oN.getConnectionName=oN.weightSrvRecords=oN.groupSrvRecords=oN.getUniqueHostnamesFromOptions=oN.normalizeNodeOptions=oN.nodeKeyToRedisOptions=oN.getNodeKey=void 0;const aN=AR,cN=T;var lN;oN.getNodeKey=function(e){return e.port=e.port||6379,e.host=e.host||"127.0.0.1",e.host+":"+e.port},oN.nodeKeyToRedisOptions=function(e){const t=e.lastIndexOf(":");if(-1===t)throw Error("Invalid node key "+e);return{host:e.slice(0,t),port:+e.slice(t+1)}},oN.normalizeNodeOptions=function(e){return e.map((e=>{const t={};if("object"==typeof e)Object.assign(t,e);else if("string"==typeof e)Object.assign(t,(0,aN.parseURL)(e));else{if("number"!=typeof e)throw Error("Invalid argument "+e);t.port=e}return"string"==typeof t.port&&(t.port=parseInt(t.port,10)),delete t.db,t.port||(t.port=6379),t.host||(t.host="127.0.0.1"),(0,aN.resolveTLSProfile)(t)}))},oN.getUniqueHostnamesFromOptions=function(e){const t={};return e.forEach((e=>{t[e.host]=!0})),Object.keys(t).filter((e=>!(0,cN.isIP)(e)))},oN.groupSrvRecords=function(e){const t={};for(const n of e)t.hasOwnProperty(n.priority)?(t[n.priority].totalWeight+=n.weight,t[n.priority].records.push(n)):t[n.priority]={totalWeight:n.weight,records:[n]};return t},oN.weightSrvRecords=function(e){if(1===e.records.length)return e.totalWeight=0,e.records.shift();const t=Math.floor(Math.random()*(e.totalWeight+e.records.length));let n=0;for(const[r,s]of e.records.entries())if(n+=1+s.weight,n>t)return e.totalWeight-=s.weight,e.records.splice(r,1),s},oN.getConnectionName=function(e,t){const n=`ioredis-cluster(${e})`;return t?`${n}:${t}`:n};var uN,pN={},dN={};function hN(e,t){this._capacity=(t=t||{}).capacity,this._head=0,this._tail=0,Array.isArray(e)?this._fromArray(e):(this._capacityMask=3,this._list=[,,,,])}hN.prototype.peekAt=function(e){var t=e;if(t===(0|t)){var n=this.size();if(n>t&&t>=-n)return 0>t&&(t+=n),this._list[t=this._head+t&this._capacityMask]}},hN.prototype.get=function(e){return this.peekAt(e)},hN.prototype.peek=function(){if(this._head!==this._tail)return this._list[this._head]},hN.prototype.peekFront=function(){return this.peek()},hN.prototype.peekBack=function(){return this.peekAt(-1)},Object.defineProperty(hN.prototype,"length",{get:function(){return this.size()}}),hN.prototype.size=function(){return this._head===this._tail?0:this._tail>this._head?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)},hN.prototype.unshift=function(e){return 0===arguments.length?this.size():(this._head=this._head-1+this._list.length&this._capacityMask,this._list[this._head]=e,this._tail===this._head&&this._growArray(),this._capacity&&this.size()>this._capacity&&this.pop(),this._tail>this._head?this._tail-this._head:this._capacityMask+1-(this._head-this._tail))},hN.prototype.shift=function(){var e=this._head;if(e!==this._tail){var t=this._list[e];return this._list[e]=void 0,this._head=e+1&this._capacityMask,2>e&&this._tail>1e4&&this._list.length>>>2>=this._tail&&this._shrinkArray(),t}},hN.prototype.push=function(e){if(0===arguments.length)return this.size();var t=this._tail;return this._list[t]=e,this._tail=t+1&this._capacityMask,this._tail===this._head&&this._growArray(),this._capacity&&this.size()>this._capacity&&this.shift(),this._tail>this._head?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)},hN.prototype.pop=function(){var e=this._tail;if(e!==this._head){var t=this._list.length;this._tail=e-1+t&this._capacityMask;var n=this._list[this._tail];return this._list[this._tail]=void 0,2>this._head&&e>1e4&&t>>>2>=e&&this._shrinkArray(),n}},hN.prototype.removeOne=function(e){var t=e;if(t===(0|t)&&this._head!==this._tail){var n=this.size(),r=this._list.length;if(n>t&&t>=-n){0>t&&(t+=n);var s,i=this._list[t=this._head+t&this._capacityMask];if(n/2>e){for(s=e;s>0;s--)this._list[t]=this._list[t=t-1+r&this._capacityMask];this._list[t]=void 0,this._head=this._head+1+r&this._capacityMask}else{for(s=n-1-e;s>0;s--)this._list[t]=this._list[t=t+1+r&this._capacityMask];this._list[t]=void 0,this._tail=this._tail-1+r&this._capacityMask}return i}}},hN.prototype.remove=function(e,t){var n,r=e,s=t;if(r===(0|r)&&this._head!==this._tail){var i=this.size(),o=this._list.length;if(i>r&&r>=-i&&t>=1){if(0>r&&(r+=i),1===t||!t)return(n=[,])[0]=this.removeOne(r),n;if(0===r&&r+t>=i)return n=this.toArray(),this.clear(),n;var a;for(r+t>i&&(t=i-r),n=Array(t),a=0;t>a;a++)n[a]=this._list[this._head+r+a&this._capacityMask];if(r=this._head+r&this._capacityMask,e+t===i){for(this._tail=this._tail-t+o&this._capacityMask,a=t;a>0;a--)this._list[r=r+1+o&this._capacityMask]=void 0;return n}if(0===e){for(this._head=this._head+t+o&this._capacityMask,a=t-1;a>0;a--)this._list[r=r+1+o&this._capacityMask]=void 0;return n}if(i/2>r){for(this._head=this._head+e+t+o&this._capacityMask,a=e;a>0;a--)this.unshift(this._list[r=r-1+o&this._capacityMask]);for(r=this._head-1+o&this._capacityMask;s>0;)this._list[r=r-1+o&this._capacityMask]=void 0,s--;0>e&&(this._tail=r)}else{for(this._tail=r,r=r+t+o&this._capacityMask,a=i-(t+e);a>0;a--)this.push(this._list[r++]);for(r=this._tail;s>0;)this._list[r=r+1+o&this._capacityMask]=void 0,s--}return 2>this._head&&this._tail>1e4&&o>>>2>=this._tail&&this._shrinkArray(),n}}},hN.prototype.splice=function(e,t){var n=e;if(n===(0|n)){var r=this.size();if(0>n&&(n+=r),r>=n){if(arguments.length>2){var s,i,o,a=arguments.length,c=this._list.length,l=2;if(!r||r/2>n){for(i=Array(n),s=0;n>s;s++)i[s]=this._list[this._head+s&this._capacityMask];for(0===t?(o=[],n>0&&(this._head=this._head+n+c&this._capacityMask)):(o=this.remove(n,t),this._head=this._head+n+c&this._capacityMask);a>l;)this.unshift(arguments[--a]);for(s=n;s>0;s--)this.unshift(i[s-1])}else{var u=(i=Array(r-(n+t))).length;for(s=0;u>s;s++)i[s]=this._list[this._head+n+t+s&this._capacityMask];for(0===t?(o=[],n!=r&&(this._tail=this._head+n+c&this._capacityMask)):(o=this.remove(n,t),this._tail=this._tail-u+c&this._capacityMask);a>l;)this.push(arguments[l++]);for(s=0;u>s;s++)this.push(i[s])}return o}return this.remove(n,t)}}},hN.prototype.clear=function(){this._list=Array(this._list.length),this._head=0,this._tail=0},hN.prototype.isEmpty=function(){return this._head===this._tail},hN.prototype.toArray=function(){return this._copyArray(!1)},hN.prototype._fromArray=function(e){var t=e.length,n=this._nextPowerOf2(t);this._list=Array(n),this._capacityMask=n-1,this._tail=t;for(var r=0;t>r;r++)this._list[r]=e[r]},hN.prototype._copyArray=function(e,t){var n=this._list,r=n.length,s=this.length;if((t|=s)==s&&this._tail>this._head)return this._list.slice(this._head,this._tail);var i,o=Array(t),a=0;if(e||this._head>this._tail){for(i=this._head;r>i;i++)o[a++]=n[i];for(i=0;this._tail>i;i++)o[a++]=n[i]}else for(i=this._head;this._tail>i;i++)o[a++]=n[i];return o},hN.prototype._growArray=function(){if(0!=this._head){var e=this._copyArray(!0,this._list.length<<1);this._tail=this._list.length,this._head=0,this._list=e}else this._tail=this._list.length,this._list.length<<=1;this._capacityMask=this._capacityMask<<1|1},hN.prototype._shrinkArray=function(){this._list.length>>>=1,this._capacityMask>>>=1},hN.prototype._nextPowerOf2=function(e){return Math.max(1<<Math.log(e)/Math.log(2)+1,4)};var fN=hN;Object.defineProperty(dN,"__esModule",{value:!0});const mN=fN,gN=(0,AR.Debug)("delayqueue");var yN;function vN(){if(yN)return fR;yN=1,Object.defineProperty(fR,"__esModule",{value:!0});const e=sR,t=a,n=gR,r=oR,s=yR,i=SO,o=hD(),c=xO,l=CO,u=AR,p=rN,d=RO,h=sN,f=function(){if(lN)return iN;lN=1,Object.defineProperty(iN,"__esModule",{value:!0});const e=oN,t=AR,n=hD(),r=(0,t.Debug)("cluster:subscriber");return iN.default=class{constructor(t,n){this.connectionPool=t,this.emitter=n,this.started=!1,this.subscriber=null,this.onSubscriberEnd=()=>{this.started?(r("subscriber has disconnected, selecting a new one..."),this.selectSubscriber()):r("subscriber has disconnected, but ClusterSubscriber is not started, so not reconnecting.")},this.connectionPool.on("-node",((t,n)=>{this.started&&this.subscriber&&(0,e.getNodeKey)(this.subscriber.options)===n&&(r("subscriber has left, selecting a new one..."),this.selectSubscriber())})),this.connectionPool.on("+node",(()=>{this.started&&!this.subscriber&&(r("a new node is discovered and there is no subscriber, selecting a new one..."),this.selectSubscriber())}))}getInstance(){return this.subscriber}start(){this.started=!0,this.selectSubscriber(),r("started")}stop(){this.started=!1,this.subscriber&&(this.subscriber.disconnect(),this.subscriber=null),r("stopped")}selectSubscriber(){const s=this.lastActiveSubscriber;s&&(s.off("end",this.onSubscriberEnd),s.disconnect()),this.subscriber&&(this.subscriber.off("end",this.onSubscriberEnd),this.subscriber.disconnect());const i=(0,t.sample)(this.connectionPool.getNodes());if(!i)return r("selecting subscriber failed since there is no node discovered in the cluster yet"),void(this.subscriber=null);const{options:o}=i;r("selected a subscriber %s:%s",o.host,o.port),this.subscriber=new n.default({port:o.port,host:o.host,username:o.username,password:o.password,enableReadyCheck:!0,connectionName:(0,e.getConnectionName)("subscriber",o.connectionName),lazyConnect:!0,tls:o.tls,retryStrategy:null}),this.subscriber.on("error",t.noop),this.subscriber.once("end",this.onSubscriberEnd);const a={subscribe:[],psubscribe:[],ssubscribe:[]};if(s){const e=s.condition||s.prevCondition;e&&e.subscriber&&(a.subscribe=e.subscriber.channels("subscribe"),a.psubscribe=e.subscriber.channels("psubscribe"),a.ssubscribe=e.subscriber.channels("ssubscribe"))}if(a.subscribe.length||a.psubscribe.length||a.ssubscribe.length){let e=0;for(const t of["subscribe","psubscribe","ssubscribe"]){const n=a[t];n.length&&(e+=1,r("%s %d channels",t,n.length),this.subscriber[t](n).then((()=>{--e||(this.lastActiveSubscriber=this.subscriber)})).catch((()=>{r("failed to %s %d channels",t,n.length)})))}}else this.lastActiveSubscriber=this.subscriber;for(const e of["message","messageBuffer","smessage","smessageBuffer"])this.subscriber.on(e,((t,n)=>{this.emitter.emit(e,t,n)}));for(const e of["pmessage","pmessageBuffer"])this.subscriber.on(e,((t,n,r)=>{this.emitter.emit(e,t,n,r)}))}},iN}(),m=function(){if(uN)return pN;uN=1,Object.defineProperty(pN,"__esModule",{value:!0});const e=a,t=AR,n=oN,r=hD(),s=(0,t.Debug)("cluster:connectionPool");return pN.default=class extends e.EventEmitter{constructor(e){super(),this.redisOptions=e,this.nodes={all:{},master:{},slave:{}},this.specifiedOptions={}}getNodes(e="all"){const t=this.nodes[e];return Object.keys(t).map((e=>t[e]))}getInstanceByKey(e){return this.nodes.all[e]}getSampleInstance(e){const n=(0,t.sample)(Object.keys(this.nodes[e]));return this.nodes[e][n]}findOrCreate(e,i=!1){const o=(0,n.getNodeKey)(e);let a;return i=!!i,this.specifiedOptions[o]?Object.assign(e,this.specifiedOptions[o]):this.specifiedOptions[o]=e,this.nodes.all[o]?(a=this.nodes.all[o],a.options.readOnly!==i&&(a.options.readOnly=i,s("Change role of %s to %s",o,i?"slave":"master"),a[i?"readonly":"readwrite"]().catch(t.noop),i?(delete this.nodes.master[o],this.nodes.slave[o]=a):(delete this.nodes.slave[o],this.nodes.master[o]=a))):(s("Connecting to %s as %s",o,i?"slave":"master"),a=new r.default((0,t.defaults)({retryStrategy:null,enableOfflineQueue:!0,readOnly:i},e,this.redisOptions,{lazyConnect:!0})),this.nodes.all[o]=a,this.nodes[i?"slave":"master"][o]=a,a.once("end",(()=>{this.removeNode(o),this.emit("-node",a,o),Object.keys(this.nodes.all).length||this.emit("drain")})),this.emit("+node",a,o),a.on("error",(function(e){this.emit("nodeError",e,o)}))),a}reset(e){s("Reset with %O",e);const t={};e.forEach((e=>{const r=(0,n.getNodeKey)(e);e.readOnly&&t[r]||(t[r]=e)})),Object.keys(this.nodes.all).forEach((e=>{t[e]||(s("Disconnect %s because the node does not hold any slot",e),this.nodes.all[e].disconnect(),this.removeNode(e))})),Object.keys(t).forEach((e=>{const n=t[e];this.findOrCreate(n,n.readOnly)}))}removeNode(e){const{nodes:t}=this;t.all[e]&&(s("Remove %s from the pool",e),delete t.all[e]),delete t.master[e],delete t.slave[e]}},pN}(),g=dN,y=oN,v=fN,b=(0,u.Debug)("cluster"),E=new WeakSet;class _ extends d.default{constructor(e,n={}){if(super(),this.slots=[],this._groupsIds={},this._groupsBySlot=Array(16384),this.isCluster=!0,this.retryAttempts=0,this.delayQueue=new g.default,this.offlineQueue=new v,this.isRefreshing=!1,this._refreshSlotsCacheCallbacks=[],this._autoPipelines=new Map,this._runningAutoPipelines=new Set,this._readyDelayedCallbacks=[],this.connectionEpoch=0,t.EventEmitter.call(this),this.startupNodes=e,this.options=(0,u.defaults)({},n,h.DEFAULT_CLUSTER_OPTIONS,this.options),this.options.redisOptions&&this.options.redisOptions.keyPrefix&&!this.options.keyPrefix&&(this.options.keyPrefix=this.options.redisOptions.keyPrefix),"function"!=typeof this.options.scaleReads&&-1===["all","master","slave"].indexOf(this.options.scaleReads))throw Error('Invalid option scaleReads "'+this.options.scaleReads+'". Expected "all", "master", "slave" or a custom function');this.connectionPool=new m.default(this.options.redisOptions),this.connectionPool.on("-node",((e,t)=>{this.emit("-node",e)})),this.connectionPool.on("+node",(e=>{this.emit("+node",e)})),this.connectionPool.on("drain",(()=>{this.setStatus("close")})),this.connectionPool.on("nodeError",((e,t)=>{this.emit("node error",e,t)})),this.subscriber=new f.default(this.connectionPool,this),this.options.scripts&&Object.entries(this.options.scripts).forEach((([e,t])=>{this.defineCommand(e,t)})),this.options.lazyConnect?this.setStatus("wait"):this.connect().catch((e=>{b("connecting failed: %s",e)}))}connect(){return new Promise(((e,t)=>{if("connecting"===this.status||"connect"===this.status||"ready"===this.status)return void t(Error("Redis is already connecting/connected"));const r=++this.connectionEpoch;this.setStatus("connecting"),this.resolveStartupNodeHostnames().then((s=>{if(this.connectionEpoch!==r)return b("discard connecting after resolving startup nodes because epoch not match: %d != %d",r,this.connectionEpoch),void t(new n.RedisError("Connection is discarded because a new connection is made"));if("connecting"!==this.status)return b("discard connecting after resolving startup nodes because the status changed to %s",this.status),void t(new n.RedisError("Connection is aborted"));this.connectionPool.reset(s);const a=()=>{this.setStatus("ready"),this.retryAttempts=0,this.executeOfflineCommands(),this.resetNodesRefreshInterval(),e()};let c;const l=()=>{this.invokeReadyDelayedCallbacks(void 0),this.removeListener("close",c),this.manuallyClosing=!1,this.setStatus("connect"),this.options.enableReadyCheck?this.readyCheck(((e,t)=>{e||t?(b("Ready check failed (%s). Reconnecting...",e||t),"connect"===this.status&&this.disconnect(!0)):a()})):a()};c=()=>{const e=Error("None of startup nodes is available");this.removeListener("refresh",l),this.invokeReadyDelayedCallbacks(e),t(e)},this.once("refresh",l),this.once("close",c),this.once("close",this.handleCloseEvent.bind(this)),this.refreshSlotsCache((e=>{e&&e.message===i.default.defaultMessage&&(o.default.prototype.silentEmit.call(this,"error",e),this.connectionPool.reset([]))})),this.subscriber.start()})).catch((e=>{this.setStatus("close"),this.handleCloseEvent(e),this.invokeReadyDelayedCallbacks(e),t(e)}))}))}disconnect(e=!1){const t=this.status;this.setStatus("disconnecting"),e||(this.manuallyClosing=!0),this.reconnectTimeout&&!e&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=null,b("Canceled reconnecting attempts")),this.clearNodesRefreshInterval(),this.subscriber.stop(),"wait"===t?(this.setStatus("close"),this.handleCloseEvent()):this.connectionPool.reset([])}quit(e){const t=this.status;if(this.setStatus("disconnecting"),this.manuallyClosing=!0,this.reconnectTimeout&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=null),this.clearNodesRefreshInterval(),this.subscriber.stop(),"wait"===t){const t=(0,r.default)(Promise.resolve("OK"),e);return setImmediate(function(){this.setStatus("close"),this.handleCloseEvent()}.bind(this)),t}return(0,r.default)(Promise.all(this.nodes().map((e=>e.quit().catch((e=>{if(e.message===u.CONNECTION_CLOSED_ERROR_MSG)return"OK";throw e}))))).then((()=>"OK")),e)}duplicate(e=[],t={}){const n=e.length>0?e:this.startupNodes.slice(0),r=Object.assign({},this.options,t);return new _(n,r)}nodes(e="all"){if("all"!==e&&"master"!==e&&"slave"!==e)throw Error('Invalid role "'+e+'". Expected "all", "master" or "slave"');return this.connectionPool.getNodes(e)}delayUntilReady(e){this._readyDelayedCallbacks.push(e)}get autoPipelineQueueSize(){let e=0;for(const t of this._autoPipelines.values())e+=t.length;return e}refreshSlotsCache(e){if(e&&this._refreshSlotsCacheCallbacks.push(e),this.isRefreshing)return;this.isRefreshing=!0;const t=this,n=e=>{this.isRefreshing=!1;for(const t of this._refreshSlotsCacheCallbacks)t(e);this._refreshSlotsCacheCallbacks=[]},r=(0,u.shuffle)(this.connectionPool.getNodes());let s=null;!function e(o){if(o===r.length){const e=new i.default(i.default.defaultMessage,s);return n(e)}const a=r[o],c=`${a.options.host}:${a.options.port}`;b("getting slot cache from %s",c),t.getInfoFromNode(a,(function(r){switch(t.status){case"close":case"end":return n(Error("Cluster is disconnected."));case"disconnecting":return n(Error("Cluster is disconnecting."))}r?(t.emit("node error",r,c),s=r,e(o+1)):(t.emit("refresh"),n())}))}(0)}sendCommand(t,r,i){if("wait"===this.status&&this.connect().catch(u.noop),"end"===this.status)return t.reject(Error(u.CONNECTION_CLOSED_ERROR_MSG)),t.promise;let o=this.options.scaleReads;"master"!==o&&(t.isReadOnly||(0,e.exists)(t.name)&&(0,e.hasFlag)(t.name,"readonly")||(o="master"));let a=i?i.slot:t.getSlot();const c={},l=this;if(!i&&!E.has(t)){E.add(t);const e=t.reject;t.reject=function(n){const r=p.bind(null,!0);l.handleError(n,c,{moved:function(e,n){b("command %s is moved to %s",t.name,n),a=+e,l.slots[e]?l.slots[e][0]=n:l.slots[e]=[n],l._groupsBySlot[e]=l._groupsIds[l.slots[e].join(";")],l.connectionPool.findOrCreate(l.natMapper(n)),p(),b("refreshing slot caches... (triggered by MOVED error)"),l.refreshSlotsCache()},ask:function(e,n){b("command %s is required to ask %s:%s",t.name,n);const r=l.natMapper(n);l.connectionPool.findOrCreate(r),p(!1,`${r.host}:${r.port}`)},tryagain:r,clusterDown:r,connectionClosed:r,maxRedirections:function(n){e.call(t,n)},defaults:function(){e.call(t,n)}})}}function p(e,c){if("end"===l.status)return void t.reject(new n.AbortError("Cluster is ended."));let p;if("ready"===l.status||"cluster"===t.name){if(i&&i.redis)p=i.redis;else if(s.default.checkFlag("ENTER_SUBSCRIBER_MODE",t.name)||s.default.checkFlag("EXIT_SUBSCRIBER_MODE",t.name)){if(p=l.subscriber.getInstance(),!p)return void t.reject(new n.AbortError("No subscriber for the cluster"))}else{if(!e){if("number"==typeof a&&l.slots[a]){const e=l.slots[a];if("function"==typeof o){const n=e.map((function(e){return l.connectionPool.getInstanceByKey(e)}));p=o(n,t),Array.isArray(p)&&(p=(0,u.sample)(p)),p||(p=n[0])}else{let t;t="all"===o?(0,u.sample)(e):"slave"===o&&e.length>1?(0,u.sample)(e,1):e[0],p=l.connectionPool.getInstanceByKey(t)}}c&&(p=l.connectionPool.getInstanceByKey(c),p.asking())}p||(p=("function"==typeof o?null:l.connectionPool.getSampleInstance(o))||l.connectionPool.getSampleInstance("all"))}i&&!i.redis&&(i.redis=p)}p?p.sendCommand(t,r):l.options.enableOfflineQueue?l.offlineQueue.push({command:t,stream:r,node:i}):t.reject(Error("Cluster isn't ready and enableOfflineQueue options is false"))}return p(),t.promise}sscanStream(e,t){return this.createScanStream("sscan",{key:e,options:t})}sscanBufferStream(e,t){return this.createScanStream("sscanBuffer",{key:e,options:t})}hscanStream(e,t){return this.createScanStream("hscan",{key:e,options:t})}hscanBufferStream(e,t){return this.createScanStream("hscanBuffer",{key:e,options:t})}zscanStream(e,t){return this.createScanStream("zscan",{key:e,options:t})}zscanBufferStream(e,t){return this.createScanStream("zscanBuffer",{key:e,options:t})}handleError(e,t,n){if(void 0===t.value?t.value=this.options.maxRedirections:t.value-=1,0>=t.value)return void n.maxRedirections(Error("Too many Cluster redirections. Last error: "+e));const r=e.message.split(" ");if("MOVED"===r[0]){const e=this.options.retryDelayOnMoved;e&&"number"==typeof e?this.delayQueue.push("moved",n.moved.bind(null,r[1],r[2]),{timeout:e}):n.moved(r[1],r[2])}else"ASK"===r[0]?n.ask(r[1],r[2]):"TRYAGAIN"===r[0]?this.delayQueue.push("tryagain",n.tryagain,{timeout:this.options.retryDelayOnTryAgain}):"CLUSTERDOWN"===r[0]&&this.options.retryDelayOnClusterDown>0?this.delayQueue.push("clusterdown",n.connectionClosed,{timeout:this.options.retryDelayOnClusterDown,callback:this.refreshSlotsCache.bind(this)}):e.message===u.CONNECTION_CLOSED_ERROR_MSG&&this.options.retryDelayOnFailover>0&&"ready"===this.status?this.delayQueue.push("failover",n.connectionClosed,{timeout:this.options.retryDelayOnFailover,callback:this.refreshSlotsCache.bind(this)}):n.defaults()}resetOfflineQueue(){this.offlineQueue=new v}clearNodesRefreshInterval(){this.slotsTimer&&(clearTimeout(this.slotsTimer),this.slotsTimer=null)}resetNodesRefreshInterval(){if(this.slotsTimer||!this.options.slotsRefreshInterval)return;const e=()=>{this.slotsTimer=setTimeout((()=>{b('refreshing slot caches... (triggered by "slotsRefreshInterval" option)'),this.refreshSlotsCache((()=>{e()}))}),this.options.slotsRefreshInterval)};e()}setStatus(e){b("status: %s -> %s",this.status||"[empty]",e),this.status=e,process.nextTick((()=>{this.emit(e)}))}handleCloseEvent(e){let t;e&&b("closed because %s",e),this.manuallyClosing||"function"!=typeof this.options.clusterRetryStrategy||(t=this.options.clusterRetryStrategy.call(this,++this.retryAttempts,e)),"number"==typeof t?(this.setStatus("reconnecting"),this.reconnectTimeout=setTimeout((()=>{this.reconnectTimeout=null,b("Cluster is disconnected. Retrying after %dms",t),this.connect().catch((function(e){b("Got error %s when reconnecting. Ignoring...",e)}))}),t)):(this.setStatus("end"),this.flushQueue(Error("None of startup nodes is available")))}flushQueue(e){let t;for(;t=this.offlineQueue.shift();)t.command.reject(e)}executeOfflineCommands(){if(this.offlineQueue.length){b("send %d commands in offline queue",this.offlineQueue.length);const e=this.offlineQueue;let t;for(this.resetOfflineQueue();t=e.shift();)this.sendCommand(t.command,t.stream,t.node)}}natMapper(e){if(this.options.natMap&&"object"==typeof this.options.natMap){const t="string"==typeof e?e:`${e.host}:${e.port}`,n=this.options.natMap[t];if(n)return b("NAT mapping %s -> %O",t,n),Object.assign({},n)}return"string"==typeof e?(0,y.nodeKeyToRedisOptions)(e):e}getInfoFromNode(e,t){if(!e)return t(Error("Node is disconnected"));const n=e.duplicate({enableOfflineQueue:!0,enableReadyCheck:!1,retryStrategy:null,connectionName:(0,y.getConnectionName)("refresher",this.options.redisOptions&&this.options.redisOptions.connectionName)});n.on("error",u.noop),n.cluster("SLOTS",(0,u.timeout)(((e,r)=>{if(n.disconnect(),e)return t(e);if("disconnecting"===this.status||"close"===this.status||"end"===this.status)return b("ignore CLUSTER.SLOTS results (count: %d) since cluster status is %s",r.length,this.status),void t();const s=[];b("cluster slots result count: %d",r.length);for(let e=0;r.length>e;++e){const t=r[e],n=t[0],i=t[1],o=[];for(let e=2;t.length>e;e++){if(!t[e][0])continue;const n=this.natMapper({host:t[e][0],port:t[e][1]});n.readOnly=2!==e,s.push(n),o.push(n.host+":"+n.port)}b("cluster slots result [%d]: slots %d~%d served by %s",e,n,i,o);for(let e=n;i>=e;e++)this.slots[e]=o}this._groupsIds=Object.create(null);let i=0;for(let e=0;16384>e;e++){const t=(this.slots[e]||[]).join(";");t.length?(this._groupsIds[t]||(this._groupsIds[t]=++i),this._groupsBySlot[e]=this._groupsIds[t]):this._groupsBySlot[e]=void 0}this.connectionPool.reset(s),t()}),this.options.slotsRefreshTimeout))}invokeReadyDelayedCallbacks(e){for(const t of this._readyDelayedCallbacks)process.nextTick(t,e);this._readyDelayedCallbacks=[]}readyCheck(e){this.cluster("INFO",((t,n)=>{if(t)return e(t);if("string"!=typeof n)return e();let r;const s=n.split("\r\n");for(let e=0;s.length>e;++e){const t=s[e].split(":");if("cluster_state"===t[0]){r=t[1];break}}"fail"===r?(b("cluster state not ok (%s)",r),e(null,r)):e()}))}resolveSrv(e){return new Promise(((t,n)=>{this.options.resolveSrv(e,((e,r)=>{if(e)return n(e);const s=this,i=(0,y.groupSrvRecords)(r),o=Object.keys(i).sort(((e,t)=>parseInt(e)-parseInt(t)));!function e(r){if(!o.length)return n(r);const a=i[o[0]],c=(0,y.weightSrvRecords)(a);a.records.length||o.shift(),s.dnsLookup(c.name).then((e=>t({host:e,port:c.port})),e)}()}))}))}dnsLookup(e){return new Promise(((t,n)=>{this.options.dnsLookup(e,((r,s)=>{r?(b("failed to resolve hostname %s to IP: %s",e,r.message),n(r)):(b("resolved hostname %s to IP %s",e,s),t(s))}))}))}async resolveStartupNodeHostnames(){if(!Array.isArray(this.startupNodes)||0===this.startupNodes.length)throw Error("`startupNodes` should contain at least one node.");const e=(0,y.normalizeNodeOptions)(this.startupNodes),t=(0,y.getUniqueHostnamesFromOptions)(e);if(0===t.length)return e;const n=await Promise.all(t.map((this.options.useSRVRecords?this.resolveSrv:this.dnsLookup).bind(this))),r=(0,u.zipMap)(t,n);return e.map((e=>{const t=r.get(e.host);return t?Object.assign({},e,this.options.useSRVRecords?t:{host:t}):e}))}createScanStream(e,{key:t,options:n={}}){return new c.default({objectMode:!0,key:t,redis:this,command:e,...n})}}return(0,p.default)(_,t.EventEmitter),(0,l.addTransactionSupport)(_.prototype),fR.default=_,fR}dN.default=class{constructor(){this.queues={},this.timeouts={}}push(e,t,n){const r=n.callback||process.nextTick;this.queues[e]||(this.queues[e]=new mN),this.queues[e].push(t),this.timeouts[e]||(this.timeouts[e]=setTimeout((()=>{r((()=>{this.timeouts[e]=null,this.execute(e)}))}),n.timeout))}execute(e){const t=this.queues[e];if(!t)return;const{length:n}=t;if(n)for(gN("send %d commands in %s queue",n,e),this.queues[e]=null;t.length>0;)t.shift()()}};var bN={},EN={},_N={};Object.defineProperty(_N,"__esModule",{value:!0});const AN=(0,AR.Debug)("AbstractConnector");_N.default=class{constructor(e){this.connecting=!1,this.disconnectTimeout=e}check(e){return!0}disconnect(){if(this.connecting=!1,this.stream){const e=this.stream,t=setTimeout((()=>{AN("stream %s:%s still open, destroying it",e.remoteAddress,e.remotePort),e.destroy()}),this.disconnectTimeout);e.on("close",(()=>clearTimeout(t))),e.end()}}},Object.defineProperty(EN,"__esModule",{value:!0});const SN=T,TN=w,wN=AR,xN=_N;EN.default=class extends xN.default{constructor(e){super(e.disconnectTimeout),this.options=e}connect(e){const{options:t}=this;let n;return this.connecting=!0,"path"in t&&t.path?n={path:t.path}:(n={},"port"in t&&null!=t.port&&(n.port=t.port),"host"in t&&null!=t.host&&(n.host=t.host),"family"in t&&null!=t.family&&(n.family=t.family)),t.tls&&Object.assign(n,t.tls),new Promise(((e,r)=>{process.nextTick((()=>{if(this.connecting){try{this.stream=t.tls?(0,TN.connect)(n):(0,SN.createConnection)(n)}catch(e){return void r(e)}this.stream.once("error",(e=>{this.firstError=e})),e(this.stream)}else r(Error(wN.CONNECTION_CLOSED_ERROR_MSG))}))}))}};var kN={},CN={};Object.defineProperty(CN,"__esModule",{value:!0}),CN.default=class{constructor(e){this.cursor=0,this.sentinels=e.slice(0)}next(){const e=this.cursor>=this.sentinels.length;return{done:e,value:e?void 0:this.sentinels[this.cursor++]}}reset(e){e&&this.sentinels.length>1&&1!==this.cursor&&this.sentinels.unshift(...this.sentinels.splice(this.cursor-1)),this.cursor=0}add(e){for(let r=0;this.sentinels.length>r;r++)if(((t=e).host||"127.0.0.1")===((n=this.sentinels[r]).host||"127.0.0.1")&&(t.port||26379)===(n.port||26379))return!1;var t,n;return this.sentinels.push(e),!0}toString(){return`${JSON.stringify(this.sentinels)} @${this.cursor}`}};var IN={};Object.defineProperty(IN,"__esModule",{value:!0}),IN.FailoverDetector=void 0;const RN=(0,AR.Debug)("FailoverDetector"),ON="+switch-master";var NN,DN;function PN(){if(NN)return kN;NN=1,Object.defineProperty(kN,"__esModule",{value:!0}),kN.SentinelIterator=void 0;const e=T,t=AR,n=w,r=CN;kN.SentinelIterator=r.default;const s=_N,i=hD(),o=IN,a=(0,t.Debug)("SentinelConnector");function c(e){return{host:e.ip,port:+e.port}}function l(){}return kN.default=class extends s.default{constructor(e){if(super(e.disconnectTimeout),this.options=e,this.emitter=null,this.failoverDetector=null,!this.options.sentinels.length)throw Error("Requires at least one sentinel to connect to.");if(!this.options.name)throw Error("Requires the name of master.");this.sentinelIterator=new r.default(this.options.sentinels)}check(e){const t=!e.role||this.options.role===e.role;return t||(a("role invalid, expected %s, but got %s",this.options.role,e.role),this.sentinelIterator.next(),this.sentinelIterator.next(),this.sentinelIterator.reset(!0)),t}disconnect(){super.disconnect(),this.failoverDetector&&this.failoverDetector.cleanup()}connect(r){let s;this.connecting=!0,this.retryAttempts=0;const i=async()=>{const o=this.sentinelIterator.next();if(o.done){this.sentinelIterator.reset(!1);const e="function"==typeof this.options.sentinelRetryStrategy?this.options.sentinelRetryStrategy(++this.retryAttempts):null;let t="number"!=typeof e?"All sentinels are unreachable and retry is disabled.":`All sentinels are unreachable. Retrying from scratch after ${e}ms.`;s&&(t+=" Last error: "+s.message),a(t);const n=Error(t);if("number"==typeof e)return r("error",n),await new Promise((t=>setTimeout(t,e))),i();throw n}let c=null,l=null;try{c=await this.resolve(o.value)}catch(e){l=e}if(!this.connecting)throw Error(t.CONNECTION_CLOSED_ERROR_MSG);const u=o.value.host+":"+o.value.port;if(c)return a("resolved: %s:%s from sentinel %s",c.host,c.port,u),this.options.enableTLSForSentinelMode&&this.options.tls?(Object.assign(c,this.options.tls),this.stream=(0,n.connect)(c),this.stream.once("secureConnect",this.initFailoverDetector.bind(this))):(this.stream=(0,e.createConnection)(c),this.stream.once("connect",this.initFailoverDetector.bind(this))),this.stream.once("error",(e=>{this.firstError=e})),this.stream;{const e=l?"failed to connect to sentinel "+u+" because "+l.message:"connected to sentinel "+u+" successfully, but got an invalid reply: "+c;return a(e),r("sentinelError",Error(e)),l&&(s=l),i()}};return i()}async updateSentinels(e){if(!this.options.updateSentinels)return;const n=await e.sentinel("sentinels",this.options.name);Array.isArray(n)&&(n.map(t.packObject).forEach((e=>{if(-1===(e.flags?e.flags.split(","):[]).indexOf("disconnected")&&e.ip&&e.port){const t=this.sentinelNatResolve(c(e));this.sentinelIterator.add(t)&&a("adding sentinel %s:%s",t.host,t.port)}})),a("Updated internal sentinels: %s",this.sentinelIterator))}async resolveMaster(e){const t=await e.sentinel("get-master-addr-by-name",this.options.name);return await this.updateSentinels(e),this.sentinelNatResolve(Array.isArray(t)?{host:t[0],port:+t[1]}:null)}async resolveSlave(e){const n=await e.sentinel("slaves",this.options.name);if(!Array.isArray(n))return null;const r=n.map(t.packObject).filter((e=>e.flags&&!e.flags.match(/(disconnected|s_down|o_down)/)));return this.sentinelNatResolve(function(e,n){if(0===e.length)return null;let r;if("function"==typeof n)r=n(e);else if(null!==n&&"object"==typeof n){const t=Array.isArray(n)?n:[n];t.sort(((e,t)=>(e.prio||(e.prio=1),t.prio||(t.prio=1),t.prio>e.prio?-1:e.prio>t.prio?1:0)));for(let n=0;t.length>n;n++){for(let s=0;e.length>s;s++){const i=e[s];if(i.ip===t[n].ip&&i.port===t[n].port){r=i;break}}if(r)break}}return r||(r=(0,t.sample)(e)),c(r)}(r,this.options.preferredSlaves))}sentinelNatResolve(e){return e&&this.options.natMap&&this.options.natMap[`${e.host}:${e.port}`]||e}connectToSentinel(e,t){return new i.default({port:e.port||26379,host:e.host,username:this.options.sentinelUsername||null,password:this.options.sentinelPassword||null,family:e.family||("path"in this.options&&this.options.path?void 0:this.options.family),tls:this.options.sentinelTLS,retryStrategy:null,enableReadyCheck:!1,connectTimeout:this.options.connectTimeout,commandTimeout:this.options.sentinelCommandTimeout,...t})}async resolve(e){const t=this.connectToSentinel(e);t.on("error",l);try{return"slave"===this.options.role?await this.resolveSlave(t):await this.resolveMaster(t)}finally{t.disconnect()}}async initFailoverDetector(){var e;if(!this.options.failoverDetector)return;this.sentinelIterator.reset(!0);const t=[];for(;this.options.sentinelMaxConnections>t.length;){const{done:e,value:n}=this.sentinelIterator.next();if(e)break;const r=this.connectToSentinel(n,{lazyConnect:!0,retryStrategy:this.options.sentinelReconnectStrategy});r.on("reconnecting",(()=>{var e;null===(e=this.emitter)||void 0===e||e.emit("sentinelReconnecting")})),t.push({address:n,client:r})}this.sentinelIterator.reset(!1),this.failoverDetector&&this.failoverDetector.cleanup(),this.failoverDetector=new o.FailoverDetector(this,t),await this.failoverDetector.subscribe(),null===(e=this.emitter)||void 0===e||e.emit("failoverSubscribed")}},kN}IN.FailoverDetector=class{constructor(e,t){this.isDisconnected=!1,this.connector=e,this.sentinels=t}cleanup(){this.isDisconnected=!0;for(const e of this.sentinels)e.client.disconnect()}async subscribe(){RN("Starting FailoverDetector");const e=[];for(const t of this.sentinels){const n=t.client.subscribe(ON).catch((e=>{RN("Failed to subscribe to failover messages on sentinel %s:%s (%s)",t.address.host||"127.0.0.1",t.address.port||26739,e.message)}));e.push(n),t.client.on("message",(e=>{this.isDisconnected||e!==ON||this.disconnect()}))}await Promise.all(e)}disconnect(){this.isDisconnected=!0,RN("Failover detected, disconnecting"),this.connector.disconnect()}};var LN={},MN={},BN={};Object.defineProperty(BN,"__esModule",{value:!0});const jN=gR;BN.default=class extends jN.AbortError{constructor(e){super(`Reached the max retries per request limit (which is ${e}). Refer to "maxRetriesPerRequest" option for details.`),Error.captureStackTrace(this,this.constructor)}get name(){return this.constructor.name}},Object.defineProperty(MN,"__esModule",{value:!0}),MN.MaxRetriesPerRequestError=void 0,MN.MaxRetriesPerRequestError=BN.default;var FN={};const $N=f.Buffer,UN=new(0,x.StringDecoder),HN=gR.ReplyError,GN=gR.ParserError;var qN=$N.allocUnsafe(32768),zN=0,VN=null,YN=0,KN=0;function QN(e){const t=e.offset,n=e.buffer,r=n.length-1;for(var s=t;r>s;)if(13===n[s++])return e.offset=s+1,!0===e.optionReturnBuffers?e.buffer.slice(t,s-1):e.buffer.toString("utf8",t,s-1)}function WN(e){const t=e.buffer.length-1;for(var n=e.offset,r=0;t>n;){const t=e.buffer[n++];if(13===t)return e.offset=n+1,r;r=10*r+(t-48)}}function JN(e,t,n){e.arrayCache.push(t),e.arrayPos.push(n)}function XN(e){const t=e.arrayCache.pop();var n=e.arrayPos.pop();if(e.arrayCache.length){const r=XN(e);if(void 0===r)return void JN(e,t,n);t[n++]=r}return ZN(e,t,n)}function ZN(e,t,n){const r=e.buffer.length;for(;t.length>n;){const s=e.offset;if(e.offset>=r)return void JN(e,t,n);const i=eD(e,e.buffer[e.offset++]);if(void 0===i)return e.arrayCache.length||e.bufferCache.length||(e.offset=s),void JN(e,t,n);t[n]=i,n++}return t}function eD(e,t){switch(t){case 36:return function(e){const t=WN(e);if(void 0===t)return;if(0>t)return null;const n=e.offset+t;if(n+2>e.buffer.length)return e.bigStrSize=n+2,e.totalChunkSize=e.buffer.length,void e.bufferCache.push(e.buffer);const r=e.offset;return e.offset=n+2,!0===e.optionReturnBuffers?e.buffer.slice(r,n):e.buffer.toString("utf8",r,n)}(e);case 43:return QN(e);case 42:return function(e){const t=WN(e);if(void 0!==t)return 0>t?null:ZN(e,Array(t),0)}(e);case 58:return function(e){return!0===e.optionStringNumbers?function(e){const t=e.buffer.length-1;var n=e.offset,r=0,s="";for(45===e.buffer[n]&&(s+="-",n++);t>n;){var i=e.buffer[n++];if(13===i)return e.offset=n+1,0!==r&&(s+=r),s;r>429496728?(s+=10*r+(i-48),r=0):48===i&&0===r?s+=0:r=10*r+(i-48)}}(e):function(e){const t=e.buffer.length-1;var n=e.offset,r=0,s=1;for(45===e.buffer[n]&&(s=-1,n++);t>n;){const t=e.buffer[n++];if(13===t)return e.offset=n+1,s*r;r=10*r+(t-48)}}(e)}(e);case 45:return function(e){var t=QN(e);if(void 0!==t)return!0===e.optionReturnBuffers&&(t=""+t),new HN(t)}(e);default:return function(e,t){const n=new GN("Protocol error, got "+JSON.stringify(String.fromCharCode(t))+" as reply type byte",JSON.stringify(e.buffer),e.offset);e.buffer=null,e.returnFatalError(n)}(e,t)}}function tD(){if(qN.length>51200)if(1===YN||KN>2*YN){const e=Math.floor(qN.length/10),t=zN>e?zN:e;zN=0,qN=qN.slice(t,qN.length)}else KN++,YN--;else clearInterval(VN),YN=0,KN=0,VN=null}var nD={};function rD(e){return"unsubscribe"===e?"subscribe":"punsubscribe"===e?"psubscribe":"sunsubscribe"===e?"ssubscribe":e}Object.defineProperty(nD,"__esModule",{value:!0}),nD.default=class{constructor(){this.set={subscribe:{},psubscribe:{},ssubscribe:{}}}add(e,t){this.set[rD(e)][t]=!0}del(e,t){delete this.set[rD(e)][t]}channels(e){return Object.keys(this.set[rD(e)])}isEmpty(){return 0===this.channels("subscribe").length&&0===this.channels("psubscribe").length&&0===this.channels("ssubscribe").length}},Object.defineProperty(FN,"__esModule",{value:!0});const sD=yR,iD=class{constructor(e){if(!e)throw new TypeError("Options are mandatory.");if("function"!=typeof e.returnError||"function"!=typeof e.returnReply)throw new TypeError("The returnReply and returnError options have to be functions.");this.setReturnBuffers(!!e.returnBuffers),this.setStringNumbers(!!e.stringNumbers),this.returnError=e.returnError,this.returnFatalError=e.returnFatalError||e.returnError,this.returnReply=e.returnReply,this.reset()}reset(){this.offset=0,this.buffer=null,this.bigStrSize=0,this.totalChunkSize=0,this.bufferCache=[],this.arrayCache=[],this.arrayPos=[]}setReturnBuffers(e){if("boolean"!=typeof e)throw new TypeError("The returnBuffers argument has to be a boolean");this.optionReturnBuffers=e}setStringNumbers(e){if("boolean"!=typeof e)throw new TypeError("The stringNumbers argument has to be a boolean");this.optionStringNumbers=e}execute(e){if(null===this.buffer)this.buffer=e,this.offset=0;else if(0===this.bigStrSize){const t=this.buffer.length,n=t-this.offset,r=$N.allocUnsafe(n+e.length);if(this.buffer.copy(r,0,this.offset,t),e.copy(r,n,0,e.length),this.buffer=r,this.offset=0,this.arrayCache.length){const e=XN(this);if(void 0===e)return;this.returnReply(e)}}else{if(this.bigStrSize>this.totalChunkSize+e.length)return this.bufferCache.push(e),void(this.totalChunkSize+=e.length);this.bufferCache.push(e);var t=this.optionReturnBuffers?function(e){const t=e.bufferCache,n=e.offset,r=e.bigStrSize-n-2;var s=t.length,i=e.bigStrSize-e.totalChunkSize;if(e.offset=i,2>=i){if(2===s)return t[0].slice(n,t[0].length+i-2);s--,i=t[t.length-2].length+i}!function(e){e+zN>qN.length&&(zN>116391936&&(zN=52428800),qN=$N.allocUnsafe(e*(e>78643200?2:3)+zN),zN=0,YN++,null===VN&&(VN=setInterval(tD,50)))}(r);const o=zN;t[0].copy(qN,o,n,t[0].length),zN+=t[0].length-n;for(var a=1;s-1>a;a++)t[a].copy(qN,zN),zN+=t[a].length;return t[a].copy(qN,zN,0,i-2),qN.slice(o,zN+=i-2)}(this):function(e){const t=e.bufferCache,n=e.offset;var r=t.length,s=e.bigStrSize-e.totalChunkSize;if(e.offset=s,2>=s){if(2===r)return t[0].toString("utf8",n,t[0].length+s-2);r--,s=t[t.length-2].length+s}for(var i=UN.write(t[0].slice(n)),o=1;r-1>o;o++)i+=UN.write(t[o]);return i+UN.end(t[o].slice(0,s-2))}(this);if(this.bigStrSize=0,this.bufferCache=[],this.buffer=e,this.arrayCache.length&&(this.arrayCache[0][this.arrayPos[0]++]=t,void 0===(t=XN(this))))return;this.returnReply(t)}for(;this.buffer.length>this.offset;){const e=this.offset,t=this.buffer[this.offset++],n=eD(this,t);if(void 0===n)return void(this.arrayCache.length||this.bufferCache.length||(this.offset=e));45===t?this.returnError(n):this.returnReply(n)}this.buffer=null}},oD=nD,aD=(0,AR.Debug)("dataHandler");FN.default=class{constructor(e,t){this.redis=e;const n=new iD({stringNumbers:t.stringNumbers,returnBuffers:!0,returnError:e=>{this.returnError(e)},returnFatalError:e=>{this.returnFatalError(e)},returnReply:e=>{this.returnReply(e)}});e.stream.on("data",(e=>{n.execute(e)}))}returnFatalError(e){e.message+=". Please report this.",this.redis.recoverFromFatalError(e,e,{offlineQueue:!1})}returnError(e){const t=this.shiftCommand(e);t&&(e.command={name:t.command.name,args:t.command.args},this.redis.handleReconnection(e,t))}returnReply(e){if(this.handleMonitorReply(e))return;if(this.handleSubscriberReply(e))return;const t=this.shiftCommand(e);t&&(sD.default.checkFlag("ENTER_SUBSCRIBER_MODE",t.command.name)?(this.redis.condition.subscriber=new oD.default,this.redis.condition.subscriber.add(t.command.name,""+e[1]),lD(t.command,e[2])||this.redis.commandQueue.unshift(t)):sD.default.checkFlag("EXIT_SUBSCRIBER_MODE",t.command.name)?uD(t.command,e[2])||this.redis.commandQueue.unshift(t):t.command.resolve(e))}handleSubscriberReply(e){if(!this.redis.condition.subscriber)return!1;const t=Array.isArray(e)?""+e[0]:null;switch(aD('receive reply "%s" in subscriber mode',t),t){case"message":this.redis.listeners("message").length>0&&this.redis.emit("message",""+e[1],e[2]?""+e[2]:""),this.redis.emit("messageBuffer",e[1],e[2]);break;case"pmessage":{const t=""+e[1];this.redis.listeners("pmessage").length>0&&this.redis.emit("pmessage",t,""+e[2],""+e[3]),this.redis.emit("pmessageBuffer",t,e[2],e[3]);break}case"smessage":this.redis.listeners("smessage").length>0&&this.redis.emit("smessage",""+e[1],e[2]?""+e[2]:""),this.redis.emit("smessageBuffer",e[1],e[2]);break;case"ssubscribe":case"subscribe":case"psubscribe":{this.redis.condition.subscriber.add(t,""+e[1]);const n=this.shiftCommand(e);if(!n)return;lD(n.command,e[2])||this.redis.commandQueue.unshift(n);break}case"sunsubscribe":case"unsubscribe":case"punsubscribe":{const n=e[1]?""+e[1]:null;n&&this.redis.condition.subscriber.del(t,n);const r=e[2];0==+r&&(this.redis.condition.subscriber=!1);const s=this.shiftCommand(e);if(!s)return;uD(s.command,r)||this.redis.commandQueue.unshift(s);break}default:{const t=this.shiftCommand(e);if(!t)return;t.command.resolve(e)}}return!0}handleMonitorReply(e){if("monitoring"!==this.redis.status)return!1;const t=""+e;if("OK"===t)return!1;const n=t.indexOf(" "),r=t.slice(0,n),s=t.indexOf('"'),i=t.slice(s+1,-1).split('" "').map((e=>e.replace(/\\"/g,'"'))),o=t.slice(n+2,s-2).split(" ");return this.redis.emit("monitor",r,i,o[1],o[0]),!0}shiftCommand(e){return this.redis.commandQueue.shift()||(this.redis.emit("error",Error("Command queue state error. If you can reproduce this, please report it."+(e instanceof Error?" Last error: "+e.message:" Last reply: "+e))),null)}};const cD=new WeakMap;function lD(e,t){let n=cD.has(e)?cD.get(e):e.args.length;return n-=1,n>0?(cD.set(e,n),!1):(e.resolve(t),cD.delete(e),!0)}function uD(e,t){let n=cD.has(e)?cD.get(e):e.args.length;return 0===n?0==+t&&(cD.delete(e),e.resolve(t),!0):(n-=1,n>0?(cD.set(e,n),!1):(e.resolve(t),!0))}!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.readyHandler=e.errorHandler=e.closeHandler=e.connectHandler=void 0;const t=gR,n=yR,r=MN,s=AR,i=FN,o=(0,s.Debug)("connection");function a(e){const n=new t.AbortError("Command aborted due to connection close");return n.command={name:e.name,args:e.args},n}e.connectHandler=function(t){return function(){t.setStatus("connect"),t.resetCommandQueue();let n=!1;const{connectionEpoch:r}=t;t.condition.auth&&t.auth(t.condition.auth,(function(e){r===t.connectionEpoch&&e&&(-1!==e.message.indexOf("no password is set")||-1!==e.message.indexOf("without any password configured for the default user")||-1!==e.message.indexOf("wrong number of arguments for 'auth' command")||(n=!0,t.recoverFromFatalError(e,e)))})),t.condition.select&&t.select(t.condition.select).catch((e=>{t.silentEmit("error",e)})),t.options.enableReadyCheck||e.readyHandler(t)(),new i.default(t,{stringNumbers:t.options.stringNumbers}),t.options.enableReadyCheck&&t._readyCheck((function(s,i){r===t.connectionEpoch&&(s?n||t.recoverFromFatalError(Error("Ready check failed: "+s.message),s):t.connector.check(i)?e.readyHandler(t)():t.disconnect(!0))}))}},e.closeHandler=function(e){return function(){const n=e.status;if(e.setStatus("close"),e.commandQueue.length&&function(e){var t;let n=0;for(let r=0;e.length>r;){const s=null===(t=e.peekAt(r))||void 0===t?void 0:t.command,i=s.pipelineIndex;void 0!==i&&0!==i||(n=0),void 0===i||i===n++?r++:(e.remove(r,1),s.reject(a(s)))}}(e.commandQueue),e.offlineQueue.length&&function(e){var t;for(let n=0;e.length>n;){const r=null===(t=e.peekAt(n))||void 0===t?void 0:t.command;if("multi"===r.name)break;if("exec"===r.name){e.remove(n,1),r.reject(a(r));break}r.inTransaction?(e.remove(n,1),r.reject(a(r))):n++}}(e.offlineQueue),"ready"===n&&(e.prevCondition||(e.prevCondition=e.condition),e.commandQueue.length&&(e.prevCommandQueue=e.commandQueue)),e.manuallyClosing)return e.manuallyClosing=!1,o("skip reconnecting since the connection is manually closed."),t();if("function"!=typeof e.options.retryStrategy)return o("skip reconnecting because `retryStrategy` is not a function"),t();const i=e.options.retryStrategy(++e.retryAttempts);if("number"!=typeof i)return o("skip reconnecting because `retryStrategy` doesn't return a number"),t();o("reconnect in %sms",i),e.setStatus("reconnecting",i),e.reconnectTimeout=setTimeout((function(){e.reconnectTimeout=null,e.connect().catch(s.noop)}),i);const{maxRetriesPerRequest:c}=e.options;"number"==typeof c&&(0>c?o("maxRetriesPerRequest is negative, ignoring..."):0==e.retryAttempts%(c+1)&&(o("reach maxRetriesPerRequest limitation, flushing command queue..."),e.flushQueue(new r.MaxRetriesPerRequestError(c))))};function t(){e.setStatus("end"),e.flushQueue(Error(s.CONNECTION_CLOSED_ERROR_MSG))}},e.errorHandler=function(e){return function(t){o("error: %s",t),e.silentEmit("error",t)}},e.readyHandler=function(e){return function(){if(e.setStatus("ready"),e.retryAttempts=0,e.options.monitor){e.call("monitor").then((()=>e.setStatus("monitoring")),(t=>e.emit("error",t)));const{sendCommand:t}=e;return e.sendCommand=function(r){return n.default.checkFlag("VALID_IN_MONITOR_MODE",r.name)?t.call(e,r):(r.reject(Error("Connection is in monitoring mode, can't process commands.")),r.promise)},void e.once("close",(function(){delete e.sendCommand}))}const t=e.prevCondition?e.prevCondition.select:e.condition.select;if(e.options.connectionName&&(o("set the connection name [%s]",e.options.connectionName),e.client("setname",e.options.connectionName).catch(s.noop)),e.options.readOnly&&(o("set the connection to readonly mode"),e.readonly().catch(s.noop)),e.prevCondition){const n=e.prevCondition;if(e.prevCondition=null,n.subscriber&&e.options.autoResubscribe){e.condition.select!==t&&(o("connect to db [%d]",t),e.select(t));const r=n.subscriber.channels("subscribe");r.length&&(o("subscribe %d channels",r.length),e.subscribe(r));const s=n.subscriber.channels("psubscribe");s.length&&(o("psubscribe %d channels",s.length),e.psubscribe(s));const i=n.subscriber.channels("ssubscribe");i.length&&(o("ssubscribe %d channels",i.length),e.ssubscribe(i))}}if(e.prevCommandQueue)if(e.options.autoResendUnfulfilledCommands)for(o("resend %d unfulfilled commands",e.prevCommandQueue.length);e.prevCommandQueue.length>0;){const t=e.prevCommandQueue.shift();t.select!==e.condition.select&&"select"!==t.command.name&&e.select(t.select),e.sendCommand(t.command,t.stream)}else e.prevCommandQueue=null;if(e.offlineQueue.length){o("send %d commands in offline queue",e.offlineQueue.length);const t=e.offlineQueue;for(e.resetOfflineQueue();t.length>0;){const n=t.shift();n.select!==e.condition.select&&"select"!==n.command.name&&e.select(n.select),e.sendCommand(n.command,n.stream)}}e.condition.select!==t&&(o("connect to db [%d]",t),e.select(t))}}}(LN);var pD,dD={};function hD(){if(pD)return rR;pD=1,Object.defineProperty(rR,"__esModule",{value:!0});const e=sR,t=a,n=oR,r=vN(),s=yR,i=function(){if(DN)return bN;DN=1,Object.defineProperty(bN,"__esModule",{value:!0}),bN.SentinelConnector=bN.StandaloneConnector=void 0,bN.StandaloneConnector=EN.default;const e=PN();return bN.SentinelConnector=e.default,bN}(),o=PN(),c=LN,l=dD,u=xO,p=CO,d=AR,h=rN,f=RO,m=SR,g=fN,y=(0,d.Debug)("redis");class v extends f.default{constructor(e,n,r){if(super(),this.status="wait",this.isCluster=!1,this.reconnectTimeout=null,this.connectionEpoch=0,this.retryAttempts=0,this.manuallyClosing=!1,this._autoPipelines=new Map,this._runningAutoPipelines=new Set,this.parseOptions(e,n,r),t.EventEmitter.call(this),this.resetCommandQueue(),this.resetOfflineQueue(),this.options.Connector)this.connector=new this.options.Connector(this.options);else if(this.options.sentinels){const e=new o.default(this.options);e.emitter=this,this.connector=e}else this.connector=new i.StandaloneConnector(this.options);this.options.scripts&&Object.entries(this.options.scripts).forEach((([e,t])=>{this.defineCommand(e,t)})),this.options.lazyConnect?this.setStatus("wait"):this.connect().catch(m.noop)}static createClient(...e){return new v(...e)}get autoPipelineQueueSize(){let e=0;for(const t of this._autoPipelines.values())e+=t.length;return e}connect(e){const t=new Promise(((e,t)=>{if("connecting"===this.status||"connect"===this.status||"ready"===this.status)return void t(Error("Redis is already connecting/connected"));this.connectionEpoch+=1,this.setStatus("connecting");const{options:r}=this;this.condition={select:r.db,auth:r.username?[r.username,r.password]:r.password,subscriber:!1};const s=this;(0,n.default)(this.connector.connect((function(e,t){s.silentEmit(e,t)})),(function(n,i){if(n)return s.flushQueue(n),s.silentEmit("error",n),t(n),void s.setStatus("end");let o=r.tls?"secureConnect":"connect";if("sentinels"in r&&r.sentinels&&!r.enableTLSForSentinelMode&&(o="connect"),s.stream=i,r.noDelay&&i.setNoDelay(!0),"number"==typeof r.keepAlive&&(i.connecting?i.once(o,(()=>{i.setKeepAlive(!0,r.keepAlive)})):i.setKeepAlive(!0,r.keepAlive)),i.connecting){if(i.once(o,c.connectHandler(s)),r.connectTimeout){let e=!1;i.setTimeout(r.connectTimeout,(function(){if(e)return;i.setTimeout(0),i.destroy();const t=Error("connect ETIMEDOUT");t.errorno="ETIMEDOUT",t.code="ETIMEDOUT",t.syscall="connect",c.errorHandler(s)(t)})),i.once(o,(function(){e=!0,i.setTimeout(0)}))}}else if(i.destroyed){const e=s.connector.firstError;e&&process.nextTick((()=>{c.errorHandler(s)(e)})),process.nextTick(c.closeHandler(s))}else process.nextTick(c.connectHandler(s));i.destroyed||(i.once("error",c.errorHandler(s)),i.once("close",c.closeHandler(s)));const a=function(){s.removeListener("close",l),e()};var l=function(){s.removeListener("ready",a),t(Error(d.CONNECTION_CLOSED_ERROR_MSG))};s.once("ready",a),s.once("close",l)}))}));return(0,n.default)(t,e)}disconnect(e=!1){e||(this.manuallyClosing=!0),this.reconnectTimeout&&!e&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=null),"wait"===this.status?c.closeHandler(this)():this.connector.disconnect()}end(){this.disconnect()}duplicate(e){return new v({...this.options,...e})}get mode(){var e;return this.options.monitor?"monitor":(null===(e=this.condition)||void 0===e?void 0:e.subscriber)?"subscriber":"normal"}monitor(e){const t=this.duplicate({monitor:!0,lazyConnect:!1});return(0,n.default)(new Promise((function(e,n){t.once("error",n),t.once("monitoring",(function(){e(t)}))})),e)}sendCommand(t,n){var r,i;if("wait"===this.status&&this.connect().catch(m.noop),"end"===this.status)return t.reject(Error(d.CONNECTION_CLOSED_ERROR_MSG)),t.promise;if((null===(r=this.condition)||void 0===r?void 0:r.subscriber)&&!s.default.checkFlag("VALID_IN_SUBSCRIBER_MODE",t.name))return t.reject(Error("Connection in subscriber mode, only subscriber commands may be used")),t.promise;"number"==typeof this.options.commandTimeout&&t.setTimeout(this.options.commandTimeout);let o="ready"===this.status||!n&&"connect"===this.status&&(0,e.exists)(t.name)&&(0,e.hasFlag)(t.name,"loading");if(this.stream&&this.stream.writable?this.stream._writableState&&this.stream._writableState.ended&&(o=!1):o=!1,o)y.enabled&&y("write command[%s]: %d -> %s(%o)",this._getDescription(),null===(i=this.condition)||void 0===i?void 0:i.select,t.name,t.args),n?n.write(t.toWritable("isPipeline"in n&&n.isPipeline?n.destination.redis.stream:n)):this.stream.write(t.toWritable(this.stream)),this.commandQueue.push({command:t,stream:n,select:this.condition.select}),s.default.checkFlag("WILL_DISCONNECT",t.name)&&(this.manuallyClosing=!0),void 0!==this.options.socketTimeout&&void 0===this.socketTimeoutTimer&&this.setSocketTimeout();else{if(!this.options.enableOfflineQueue)return t.reject(Error("Stream isn't writeable and enableOfflineQueue options is false")),t.promise;if("quit"===t.name&&0===this.offlineQueue.length)return this.disconnect(),t.resolve(Buffer.from("OK")),t.promise;y.enabled&&y("queue command[%s]: %d -> %s(%o)",this._getDescription(),this.condition.select,t.name,t.args),this.offlineQueue.push({command:t,stream:n,select:this.condition.select})}if("select"===t.name&&(0,d.isInt)(t.args[0])){const e=parseInt(t.args[0],10);this.condition.select!==e&&(this.condition.select=e,this.emit("select",e),y("switch to db [%d]",this.condition.select))}return t.promise}setSocketTimeout(){this.socketTimeoutTimer=setTimeout((()=>{this.stream.destroy(Error(`Socket timeout. Expecting data, but didn't receive any in ${this.options.socketTimeout}ms.`)),this.socketTimeoutTimer=void 0}),this.options.socketTimeout),this.stream.once("data",(()=>{clearTimeout(this.socketTimeoutTimer),this.socketTimeoutTimer=void 0,0!==this.commandQueue.length&&this.setSocketTimeout()}))}scanStream(e){return this.createScanStream("scan",{options:e})}scanBufferStream(e){return this.createScanStream("scanBuffer",{options:e})}sscanStream(e,t){return this.createScanStream("sscan",{key:e,options:t})}sscanBufferStream(e,t){return this.createScanStream("sscanBuffer",{key:e,options:t})}hscanStream(e,t){return this.createScanStream("hscan",{key:e,options:t})}hscanBufferStream(e,t){return this.createScanStream("hscanBuffer",{key:e,options:t})}zscanStream(e,t){return this.createScanStream("zscan",{key:e,options:t})}zscanBufferStream(e,t){return this.createScanStream("zscanBuffer",{key:e,options:t})}silentEmit(e,t){let n;if("error"===e){if(n=t,"end"===this.status)return;if(this.manuallyClosing&&n instanceof Error&&(n.message===d.CONNECTION_CLOSED_ERROR_MSG||"connect"===n.syscall||"read"===n.syscall))return}return this.listeners(e).length>0&&this.emit.apply(this,arguments)}recoverFromFatalError(e,t,n){this.flushQueue(t,n),this.silentEmit("error",t),this.disconnect(!0)}handleReconnection(e,t){var n;let r=!1;switch(this.options.reconnectOnError&&(r=this.options.reconnectOnError(e)),r){case 1:case!0:"reconnecting"!==this.status&&this.disconnect(!0),t.command.reject(e);break;case 2:"reconnecting"!==this.status&&this.disconnect(!0),(null===(n=this.condition)||void 0===n?void 0:n.select)!==t.select&&"select"!==t.command.name&&this.select(t.select),this.sendCommand(t.command);break;default:t.command.reject(e)}}_getDescription(){let e;return e="path"in this.options&&this.options.path?this.options.path:this.stream&&this.stream.remoteAddress&&this.stream.remotePort?this.stream.remoteAddress+":"+this.stream.remotePort:"host"in this.options&&this.options.host?this.options.host+":"+this.options.port:"",this.options.connectionName&&(e+=` (${this.options.connectionName})`),e}resetCommandQueue(){this.commandQueue=new g}resetOfflineQueue(){this.offlineQueue=new g}parseOptions(...e){const t={};let n=!1;for(let r=0;e.length>r;++r){const s=e[r];if(null!=s)if("object"==typeof s)(0,m.defaults)(t,s);else if("string"==typeof s)(0,m.defaults)(t,(0,d.parseURL)(s)),s.startsWith("rediss://")&&(n=!0);else{if("number"!=typeof s)throw Error("Invalid argument "+s);t.port=s}}n&&(0,m.defaults)(t,{tls:!0}),(0,m.defaults)(t,v.defaultOptions),"string"==typeof t.port&&(t.port=parseInt(t.port,10)),"string"==typeof t.db&&(t.db=parseInt(t.db,10)),this.options=(0,d.resolveTLSProfile)(t)}setStatus(e,t){y.enabled&&y("status[%s]: %s -> %s",this._getDescription(),this.status||"[empty]",e),this.status=e,process.nextTick(this.emit.bind(this,e,t))}createScanStream(e,{key:t,options:n={}}){return new u.default({objectMode:!0,key:t,redis:this,command:e,...n})}flushQueue(e,t){let n;if((t=(0,m.defaults)({},t,{offlineQueue:!0,commandQueue:!0})).offlineQueue)for(;n=this.offlineQueue.shift();)n.command.reject(e);if(t.commandQueue&&this.commandQueue.length>0)for(this.stream&&this.stream.removeAllListeners("data");n=this.commandQueue.shift();)n.command.reject(e)}_readyCheck(e){const t=this;this.info((function(n,r){if(n)return n.message&&n.message.includes("NOPERM")?e(null,{}):e(n);if("string"!=typeof r)return e(null,r);const s={},i=r.split("\r\n");for(let e=0;i.length>e;++e){const[t,...n]=i[e].split(":"),r=n.join(":");r&&(s[t]=r)}if(s.loading&&"0"!==s.loading){const n=1e3*(s.loading_eta_seconds||1),r=t.options.maxLoadingRetryTime&&n>t.options.maxLoadingRetryTime?t.options.maxLoadingRetryTime:n;y("Redis server still loading, trying again in "+r+"ms"),setTimeout((function(){t._readyCheck(e)}),r)}else e(null,s)})).catch(m.noop)}}return v.Cluster=r.default,v.Command=s.default,v.defaultOptions=l.DEFAULT_REDIS_OPTIONS,(0,h.default)(v,t.EventEmitter),(0,p.addTransactionSupport)(v.prototype),rR.default=v,rR}Object.defineProperty(dD,"__esModule",{value:!0}),dD.DEFAULT_REDIS_OPTIONS=void 0,dD.DEFAULT_REDIS_OPTIONS={port:6379,host:"localhost",family:4,connectTimeout:1e4,disconnectTimeout:2e3,retryStrategy:function(e){return Math.min(50*e,2e3)},keepAlive:0,noDelay:!0,connectionName:null,sentinels:null,name:null,role:"master",sentinelRetryStrategy:function(e){return Math.min(10*e,1e3)},sentinelReconnectStrategy:function(){return 6e4},natMap:null,enableTLSForSentinelMode:!1,updateSentinels:!0,failoverDetector:!1,username:null,password:null,db:0,enableOfflineQueue:!0,enableReadyCheck:!0,autoResubscribe:!0,autoResendUnfulfilledCommands:!0,lazyConnect:!1,keyPrefix:"",reconnectOnError:null,readOnly:!1,stringNumbers:!1,maxRetriesPerRequest:20,maxLoadingRetryTime:1e4,enableAutoPipelining:!1,autoPipeliningIgnoredCommands:[],sentinelMaxConnections:10},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.print=t.ReplyError=t.SentinelIterator=t.SentinelConnector=t.AbstractConnector=t.Pipeline=t.ScanStream=t.Command=t.Cluster=t.Redis=t.default=void 0,t=e.exports=hD().default;var n=hD();Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n.default}});var r=hD();Object.defineProperty(t,"Redis",{enumerable:!0,get:function(){return r.default}});var s=vN();Object.defineProperty(t,"Cluster",{enumerable:!0,get:function(){return s.default}});var i=yR;Object.defineProperty(t,"Command",{enumerable:!0,get:function(){return i.default}});var o=xO;Object.defineProperty(t,"ScanStream",{enumerable:!0,get:function(){return o.default}});var a=IO;Object.defineProperty(t,"Pipeline",{enumerable:!0,get:function(){return a.default}});var c=_N;Object.defineProperty(t,"AbstractConnector",{enumerable:!0,get:function(){return c.default}});var l=PN();Object.defineProperty(t,"SentinelConnector",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"SentinelIterator",{enumerable:!0,get:function(){return l.SentinelIterator}}),t.ReplyError=gR.ReplyError,Object.defineProperty(t,"Promise",{get:()=>Promise,set(e){}}),t.print=function(e,t){}}(nR,nR.exports);var fD=nR.exports;const mD=fD;function gD(e,t,n){const{namespace:r,url:s,closeClient:i=!1,...o}=t;let a=t.client||null;if(r){if(e.redis||e.decorate("redis",Object.create(null)),e.redis[r])return n(Error(`Redis '${r}' instance namespace has already been registered`));const t=e=>e.redis[r].quit();if(a)!0===i&&e.addHook("onClose",t);else{try{a=s?new mD(s,o):new mD(o)}catch(e){return n(e)}e.addHook("onClose",t)}e.redis[r]=a}else{if(e.redis)return n(Error("@fastify/redis has already been registered"));if(a)!0===i&&e.addHook("onClose",yD);else{try{a=s?new mD(s,o):new mD(o)}catch(e){return n(e)}e.addHook("onClose",yD)}e.decorate("redis",a)}const c=function(e){a.off("ready",l).off("error",u).off("end",c).quit(),n(e)},l=function(){a.off("end",c).off("error",u).off("ready",l),n()},u=function(e){"ENOTFOUND"!==e.code?e instanceof mD.ReplyError&&c(e):c(e)};"ready"===a.status?n():(a.on("end",c).on("error",u).on("ready",l),a.ping().catch(u))}function yD(e){return e.redis.quit()}tR.exports=GI(gD,{fastify:"4.x",name:"@fastify/redis"}),tR.exports.default=gD,tR.exports.fastifyRedis=gD;var vD=P(tR.exports);function bD(e,t){return function(){return e.apply(t,arguments)}}const{toString:ED}=Object.prototype,{getPrototypeOf:_D}=Object,AD=(e=>t=>{const n=ED.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),SD=e=>(e=e.toLowerCase(),t=>AD(t)===e),TD=e=>t=>typeof t===e,{isArray:wD}=Array,xD=TD("undefined"),kD=SD("ArrayBuffer"),CD=TD("string"),ID=TD("function"),RD=TD("number"),OD=e=>null!==e&&"object"==typeof e,ND=e=>{if("object"!==AD(e))return!1;const t=_D(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)},DD=SD("Date"),PD=SD("File"),LD=SD("Blob"),MD=SD("FileList"),BD=SD("URLSearchParams"),[jD,FD,$D,UD]=["ReadableStream","Request","Response","Headers"].map(SD);function HD(e,t,{allOwnKeys:n=!1}={}){if(null==e)return;let r,s;if("object"!=typeof e&&(e=[e]),wD(e))for(r=0,s=e.length;s>r;r++)t.call(null,e[r],r,e);else{const s=n?Object.getOwnPropertyNames(e):Object.keys(e),i=s.length;let o;for(r=0;i>r;r++)o=s[r],t.call(null,e[o],o,e)}}function GD(e,t){t=t.toLowerCase();const n=Object.keys(e);let r,s=n.length;for(;s-- >0;)if(r=n[s],t===r.toLowerCase())return r;return null}const qD="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,zD=e=>!xD(e)&&e!==qD,VD=(YD="undefined"!=typeof Uint8Array&&_D(Uint8Array),e=>YD&&e instanceof YD);var YD;const KD=SD("HTMLFormElement"),QD=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),WD=SD("RegExp"),JD=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};HD(n,((n,s)=>{let i;!1!==(i=t(n,s,e))&&(r[s]=i||n)})),Object.defineProperties(e,r)},XD="abcdefghijklmnopqrstuvwxyz",ZD="0123456789",eP={DIGIT:ZD,ALPHA:XD,ALPHA_DIGIT:XD+XD.toUpperCase()+ZD},tP=SD("AsyncFunction");var nP={isArray:wD,isArrayBuffer:kD,isBuffer:function(e){return null!==e&&!xD(e)&&null!==e.constructor&&!xD(e.constructor)&&ID(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"==typeof FormData&&e instanceof FormData||ID(e.append)&&("formdata"===(t=AD(e))||"object"===t&&ID(e.toString)&&""+e=="[object FormData]"))},isArrayBufferView:function(e){let t;return t="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&kD(e.buffer),t},isString:CD,isNumber:RD,isBoolean:e=>!0===e||!1===e,isObject:OD,isPlainObject:ND,isReadableStream:jD,isRequest:FD,isResponse:$D,isHeaders:UD,isUndefined:xD,isDate:DD,isFile:PD,isBlob:LD,isRegExp:WD,isFunction:ID,isStream:e=>OD(e)&&ID(e.pipe),isURLSearchParams:BD,isTypedArray:VD,isFileList:MD,forEach:HD,merge:function e(){const{caseless:t}=zD(this)&&this||{},n={},r=(r,s)=>{const i=t&&GD(n,s)||s;n[i]=ND(n[i])&&ND(r)?e(n[i],r):ND(r)?e({},r):wD(r)?r.slice():r};for(let e=0,t=arguments.length;t>e;e++)arguments[e]&&HD(arguments[e],r);return n},extend:(e,t,n,{allOwnKeys:r}={})=>(HD(t,((t,r)=>{e[r]=n&&ID(t)?bD(t,n):t}),{allOwnKeys:r}),e),trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,r)=>{let s,i,o;const a={};if(t=t||{},null==e)return t;do{for(s=Object.getOwnPropertyNames(e),i=s.length;i-- >0;)o=s[i],r&&!r(o,e,t)||a[o]||(t[o]=e[o],a[o]=!0);e=!1!==n&&_D(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:AD,kindOfTest:SD,endsWith:(e,t,n)=>{e+="",(void 0===n||n>e.length)&&(n=e.length);const r=e.indexOf(t,n-=t.length);return-1!==r&&r===n},toArray:e=>{if(!e)return null;if(wD(e))return e;let t=e.length;if(!RD(t))return null;const n=Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[Symbol.iterator]).call(e);let r;for(;(r=n.next())&&!r.done;){const n=r.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const r=[];for(;null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:KD,hasOwnProperty:QD,hasOwnProp:QD,reduceDescriptors:JD,freezeMethods:e=>{JD(e,((t,n)=>{if(ID(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;ID(e[n])&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:(e,t)=>{const n={},r=e=>{e.forEach((e=>{n[e]=!0}))};return wD(e)?r(e):r((e+"").split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n})),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:GD,global:qD,isContextDefined:zD,ALPHABET:eP,generateString:(e=16,t=eP.ALPHA_DIGIT)=>{let n="";const{length:r}=t;for(;e--;)n+=t[Math.random()*r|0];return n},isSpecCompliantForm:function(e){return!!(e&&ID(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:e=>{const t=[,,,,,,,,,,],n=(e,r)=>{if(OD(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[r]=e;const s=wD(e)?[]:{};return HD(e,((e,t)=>{const i=n(e,r+1);!xD(i)&&(s[t]=i)})),t[r]=void 0,s}}return e};return n(e,0)},isAsyncFn:tP,isThenable:e=>e&&(OD(e)||ID(e))&&ID(e.then)&&ID(e.catch)};function rP(e,t,n,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),s&&(this.response=s)}nP.inherits(rP,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:nP.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const sP=rP.prototype,iP={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{iP[e]={value:e}})),Object.defineProperties(rP,iP),Object.defineProperty(sP,"isAxiosError",{value:!0}),rP.from=(e,t,n,r,s,i)=>{const o=Object.create(sP);return nP.toFlatObject(e,o,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),rP.call(o,e.message,t,n,r,s),o.cause=e,o.name=e.name,i&&Object.assign(o,i),o};var oP=_.Stream,aP=cP;function cP(){this.source=null,this.dataSize=0,this.maxDataSize=1048576,this.pauseStream=!0,this._maxDataSizeExceeded=!1,this._released=!1,this._bufferedEvents=[]}l.inherits(cP,oP),cP.create=function(e,t){var n=new this;for(var r in t=t||{})n[r]=t[r];n.source=e;var s=e.emit;return e.emit=function(){return n._handleEmit(arguments),s.apply(e,arguments)},e.on("error",(function(){})),n.pauseStream&&e.pause(),n},Object.defineProperty(cP.prototype,"readable",{configurable:!0,enumerable:!0,get:function(){return this.source.readable}}),cP.prototype.setEncoding=function(){return this.source.setEncoding.apply(this.source,arguments)},cP.prototype.resume=function(){this._released||this.release(),this.source.resume()},cP.prototype.pause=function(){this.source.pause()},cP.prototype.release=function(){this._released=!0,this._bufferedEvents.forEach(function(e){this.emit.apply(this,e)}.bind(this)),this._bufferedEvents=[]},cP.prototype.pipe=function(){var e=oP.prototype.pipe.apply(this,arguments);return this.resume(),e},cP.prototype._handleEmit=function(e){this._released?this.emit.apply(this,e):("data"===e[0]&&(this.dataSize+=e[1].length,this._checkIfMaxDataSizeExceeded()),this._bufferedEvents.push(e))},cP.prototype._checkIfMaxDataSizeExceeded=function(){this._maxDataSizeExceeded||this.dataSize>this.maxDataSize&&(this._maxDataSizeExceeded=!0,this.emit("error",Error("DelayedStream#maxDataSize of "+this.maxDataSize+" bytes exceeded.")))};var lP=_.Stream,uP=aP,pP=dP;function dP(){this.writable=!1,this.readable=!0,this.dataSize=0,this.maxDataSize=2097152,this.pauseStreams=!0,this._released=!1,this._streams=[],this._currentStream=null,this._insideLoop=!1,this._pendingNext=!1}l.inherits(dP,lP),dP.create=function(e){var t=new this;for(var n in e=e||{})t[n]=e[n];return t},dP.isStreamLike=function(e){return"function"!=typeof e&&"string"!=typeof e&&"boolean"!=typeof e&&"number"!=typeof e&&!Buffer.isBuffer(e)},dP.prototype.append=function(e){if(dP.isStreamLike(e)){if(!(e instanceof uP)){var t=uP.create(e,{maxDataSize:1/0,pauseStream:this.pauseStreams});e.on("data",this._checkDataSize.bind(this)),e=t}this._handleErrors(e),this.pauseStreams&&e.pause()}return this._streams.push(e),this},dP.prototype.pipe=function(e,t){return lP.prototype.pipe.call(this,e,t),this.resume(),e},dP.prototype._getNext=function(){if(this._currentStream=null,this._insideLoop)this._pendingNext=!0;else{this._insideLoop=!0;try{do{this._pendingNext=!1,this._realGetNext()}while(this._pendingNext)}finally{this._insideLoop=!1}}},dP.prototype._realGetNext=function(){var e=this._streams.shift();void 0!==e?"function"==typeof e?e(function(e){dP.isStreamLike(e)&&(e.on("data",this._checkDataSize.bind(this)),this._handleErrors(e)),this._pipeNext(e)}.bind(this)):this._pipeNext(e):this.end()},dP.prototype._pipeNext=function(e){if(this._currentStream=e,dP.isStreamLike(e))return e.on("end",this._getNext.bind(this)),void e.pipe(this,{end:!1});this.write(e),this._getNext()},dP.prototype._handleErrors=function(e){var t=this;e.on("error",(function(e){t._emitError(e)}))},dP.prototype.write=function(e){this.emit("data",e)},dP.prototype.pause=function(){this.pauseStreams&&(this.pauseStreams&&this._currentStream&&"function"==typeof this._currentStream.pause&&this._currentStream.pause(),this.emit("pause"))},dP.prototype.resume=function(){this._released||(this._released=!0,this.writable=!0,this._getNext()),this.pauseStreams&&this._currentStream&&"function"==typeof this._currentStream.resume&&this._currentStream.resume(),this.emit("resume")},dP.prototype.end=function(){this._reset(),this.emit("end")},dP.prototype.destroy=function(){this._reset(),this.emit("close")},dP.prototype._reset=function(){this.writable=!1,this._streams=[],this._currentStream=null},dP.prototype._checkDataSize=function(){this._updateDataSize(),this.dataSize>this.maxDataSize&&this._emitError(Error("DelayedStream#maxDataSize of "+this.maxDataSize+" bytes exceeded."))},dP.prototype._updateDataSize=function(){this.dataSize=0;var e=this;this._streams.forEach((function(t){t.dataSize&&(e.dataSize+=t.dataSize)})),this._currentStream&&this._currentStream.dataSize&&(this.dataSize+=this._currentStream.dataSize)},dP.prototype._emitError=function(e){this._reset(),this.emit("error",e)};var hP={},fP={"application/1d-interleaved-parityfec":{source:"iana"},"application/3gpdash-qoe-report+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/3gpp-ims+xml":{source:"iana",compressible:!0},"application/3gpphal+json":{source:"iana",compressible:!0},"application/3gpphalforms+json":{source:"iana",compressible:!0},"application/a2l":{source:"iana"},"application/ace+cbor":{source:"iana"},"application/activemessage":{source:"iana"},"application/activity+json":{source:"iana",compressible:!0},"application/alto-costmap+json":{source:"iana",compressible:!0},"application/alto-costmapfilter+json":{source:"iana",compressible:!0},"application/alto-directory+json":{source:"iana",compressible:!0},"application/alto-endpointcost+json":{source:"iana",compressible:!0},"application/alto-endpointcostparams+json":{source:"iana",compressible:!0},"application/alto-endpointprop+json":{source:"iana",compressible:!0},"application/alto-endpointpropparams+json":{source:"iana",compressible:!0},"application/alto-error+json":{source:"iana",compressible:!0},"application/alto-networkmap+json":{source:"iana",compressible:!0},"application/alto-networkmapfilter+json":{source:"iana",compressible:!0},"application/alto-updatestreamcontrol+json":{source:"iana",compressible:!0},"application/alto-updatestreamparams+json":{source:"iana",compressible:!0},"application/aml":{source:"iana"},"application/andrew-inset":{source:"iana",extensions:["ez"]},"application/applefile":{source:"iana"},"application/applixware":{source:"apache",extensions:["aw"]},"application/at+jwt":{source:"iana"},"application/atf":{source:"iana"},"application/atfx":{source:"iana"},"application/atom+xml":{source:"iana",compressible:!0,extensions:["atom"]},"application/atomcat+xml":{source:"iana",compressible:!0,extensions:["atomcat"]},"application/atomdeleted+xml":{source:"iana",compressible:!0,extensions:["atomdeleted"]},"application/atomicmail":{source:"iana"},"application/atomsvc+xml":{source:"iana",compressible:!0,extensions:["atomsvc"]},"application/atsc-dwd+xml":{source:"iana",compressible:!0,extensions:["dwd"]},"application/atsc-dynamic-event-message":{source:"iana"},"application/atsc-held+xml":{source:"iana",compressible:!0,extensions:["held"]},"application/atsc-rdt+json":{source:"iana",compressible:!0},"application/atsc-rsat+xml":{source:"iana",compressible:!0,extensions:["rsat"]},"application/atxml":{source:"iana"},"application/auth-policy+xml":{source:"iana",compressible:!0},"application/bacnet-xdd+zip":{source:"iana",compressible:!1},"application/batch-smtp":{source:"iana"},"application/bdoc":{compressible:!1,extensions:["bdoc"]},"application/beep+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/calendar+json":{source:"iana",compressible:!0},"application/calendar+xml":{source:"iana",compressible:!0,extensions:["xcs"]},"application/call-completion":{source:"iana"},"application/cals-1840":{source:"iana"},"application/captive+json":{source:"iana",compressible:!0},"application/cbor":{source:"iana"},"application/cbor-seq":{source:"iana"},"application/cccex":{source:"iana"},"application/ccmp+xml":{source:"iana",compressible:!0},"application/ccxml+xml":{source:"iana",compressible:!0,extensions:["ccxml"]},"application/cdfx+xml":{source:"iana",compressible:!0,extensions:["cdfx"]},"application/cdmi-capability":{source:"iana",extensions:["cdmia"]},"application/cdmi-container":{source:"iana",extensions:["cdmic"]},"application/cdmi-domain":{source:"iana",extensions:["cdmid"]},"application/cdmi-object":{source:"iana",extensions:["cdmio"]},"application/cdmi-queue":{source:"iana",extensions:["cdmiq"]},"application/cdni":{source:"iana"},"application/cea":{source:"iana"},"application/cea-2018+xml":{source:"iana",compressible:!0},"application/cellml+xml":{source:"iana",compressible:!0},"application/cfw":{source:"iana"},"application/city+json":{source:"iana",compressible:!0},"application/clr":{source:"iana"},"application/clue+xml":{source:"iana",compressible:!0},"application/clue_info+xml":{source:"iana",compressible:!0},"application/cms":{source:"iana"},"application/cnrp+xml":{source:"iana",compressible:!0},"application/coap-group+json":{source:"iana",compressible:!0},"application/coap-payload":{source:"iana"},"application/commonground":{source:"iana"},"application/conference-info+xml":{source:"iana",compressible:!0},"application/cose":{source:"iana"},"application/cose-key":{source:"iana"},"application/cose-key-set":{source:"iana"},"application/cpl+xml":{source:"iana",compressible:!0,extensions:["cpl"]},"application/csrattrs":{source:"iana"},"application/csta+xml":{source:"iana",compressible:!0},"application/cstadata+xml":{source:"iana",compressible:!0},"application/csvm+json":{source:"iana",compressible:!0},"application/cu-seeme":{source:"apache",extensions:["cu"]},"application/cwt":{source:"iana"},"application/cybercash":{source:"iana"},"application/dart":{compressible:!0},"application/dash+xml":{source:"iana",compressible:!0,extensions:["mpd"]},"application/dash-patch+xml":{source:"iana",compressible:!0,extensions:["mpp"]},"application/dashdelta":{source:"iana"},"application/davmount+xml":{source:"iana",compressible:!0,extensions:["davmount"]},"application/dca-rft":{source:"iana"},"application/dcd":{source:"iana"},"application/dec-dx":{source:"iana"},"application/dialog-info+xml":{source:"iana",compressible:!0},"application/dicom":{source:"iana"},"application/dicom+json":{source:"iana",compressible:!0},"application/dicom+xml":{source:"iana",compressible:!0},"application/dii":{source:"iana"},"application/dit":{source:"iana"},"application/dns":{source:"iana"},"application/dns+json":{source:"iana",compressible:!0},"application/dns-message":{source:"iana"},"application/docbook+xml":{source:"apache",compressible:!0,extensions:["dbk"]},"application/dots+cbor":{source:"iana"},"application/dskpp+xml":{source:"iana",compressible:!0},"application/dssc+der":{source:"iana",extensions:["dssc"]},"application/dssc+xml":{source:"iana",compressible:!0,extensions:["xdssc"]},"application/dvcs":{source:"iana"},"application/ecmascript":{source:"iana",compressible:!0,extensions:["es","ecma"]},"application/edi-consent":{source:"iana"},"application/edi-x12":{source:"iana",compressible:!1},"application/edifact":{source:"iana",compressible:!1},"application/efi":{source:"iana"},"application/elm+json":{source:"iana",charset:"UTF-8",compressible:!0},"application/elm+xml":{source:"iana",compressible:!0},"application/emergencycalldata.cap+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/emergencycalldata.comment+xml":{source:"iana",compressible:!0},"application/emergencycalldata.control+xml":{source:"iana",compressible:!0},"application/emergencycalldata.deviceinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.ecall.msd":{source:"iana"},"application/emergencycalldata.providerinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.serviceinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.subscriberinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.veds+xml":{source:"iana",compressible:!0},"application/emma+xml":{source:"iana",compressible:!0,extensions:["emma"]},"application/emotionml+xml":{source:"iana",compressible:!0,extensions:["emotionml"]},"application/encaprtp":{source:"iana"},"application/epp+xml":{source:"iana",compressible:!0},"application/epub+zip":{source:"iana",compressible:!1,extensions:["epub"]},"application/eshop":{source:"iana"},"application/exi":{source:"iana",extensions:["exi"]},"application/expect-ct-report+json":{source:"iana",compressible:!0},"application/express":{source:"iana",extensions:["exp"]},"application/fastinfoset":{source:"iana"},"application/fastsoap":{source:"iana"},"application/fdt+xml":{source:"iana",compressible:!0,extensions:["fdt"]},"application/fhir+json":{source:"iana",charset:"UTF-8",compressible:!0},"application/fhir+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/fido.trusted-apps+json":{compressible:!0},"application/fits":{source:"iana"},"application/flexfec":{source:"iana"},"application/font-sfnt":{source:"iana"},"application/font-tdpfr":{source:"iana",extensions:["pfr"]},"application/font-woff":{source:"iana",compressible:!1},"application/framework-attributes+xml":{source:"iana",compressible:!0},"application/geo+json":{source:"iana",compressible:!0,extensions:["geojson"]},"application/geo+json-seq":{source:"iana"},"application/geopackage+sqlite3":{source:"iana"},"application/geoxacml+xml":{source:"iana",compressible:!0},"application/gltf-buffer":{source:"iana"},"application/gml+xml":{source:"iana",compressible:!0,extensions:["gml"]},"application/gpx+xml":{source:"apache",compressible:!0,extensions:["gpx"]},"application/gxf":{source:"apache",extensions:["gxf"]},"application/gzip":{source:"iana",compressible:!1,extensions:["gz"]},"application/h224":{source:"iana"},"application/held+xml":{source:"iana",compressible:!0},"application/hjson":{extensions:["hjson"]},"application/http":{source:"iana"},"application/hyperstudio":{source:"iana",extensions:["stk"]},"application/ibe-key-request+xml":{source:"iana",compressible:!0},"application/ibe-pkg-reply+xml":{source:"iana",compressible:!0},"application/ibe-pp-data":{source:"iana"},"application/iges":{source:"iana"},"application/im-iscomposing+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/index":{source:"iana"},"application/index.cmd":{source:"iana"},"application/index.obj":{source:"iana"},"application/index.response":{source:"iana"},"application/index.vnd":{source:"iana"},"application/inkml+xml":{source:"iana",compressible:!0,extensions:["ink","inkml"]},"application/iotp":{source:"iana"},"application/ipfix":{source:"iana",extensions:["ipfix"]},"application/ipp":{source:"iana"},"application/isup":{source:"iana"},"application/its+xml":{source:"iana",compressible:!0,extensions:["its"]},"application/java-archive":{source:"apache",compressible:!1,extensions:["jar","war","ear"]},"application/java-serialized-object":{source:"apache",compressible:!1,extensions:["ser"]},"application/java-vm":{source:"apache",compressible:!1,extensions:["class"]},"application/javascript":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["js","mjs"]},"application/jf2feed+json":{source:"iana",compressible:!0},"application/jose":{source:"iana"},"application/jose+json":{source:"iana",compressible:!0},"application/jrd+json":{source:"iana",compressible:!0},"application/jscalendar+json":{source:"iana",compressible:!0},"application/json":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["json","map"]},"application/json-patch+json":{source:"iana",compressible:!0},"application/json-seq":{source:"iana"},"application/json5":{extensions:["json5"]},"application/jsonml+json":{source:"apache",compressible:!0,extensions:["jsonml"]},"application/jwk+json":{source:"iana",compressible:!0},"application/jwk-set+json":{source:"iana",compressible:!0},"application/jwt":{source:"iana"},"application/kpml-request+xml":{source:"iana",compressible:!0},"application/kpml-response+xml":{source:"iana",compressible:!0},"application/ld+json":{source:"iana",compressible:!0,extensions:["jsonld"]},"application/lgr+xml":{source:"iana",compressible:!0,extensions:["lgr"]},"application/link-format":{source:"iana"},"application/load-control+xml":{source:"iana",compressible:!0},"application/lost+xml":{source:"iana",compressible:!0,extensions:["lostxml"]},"application/lostsync+xml":{source:"iana",compressible:!0},"application/lpf+zip":{source:"iana",compressible:!1},"application/lxf":{source:"iana"},"application/mac-binhex40":{source:"iana",extensions:["hqx"]},"application/mac-compactpro":{source:"apache",extensions:["cpt"]},"application/macwriteii":{source:"iana"},"application/mads+xml":{source:"iana",compressible:!0,extensions:["mads"]},"application/manifest+json":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["webmanifest"]},"application/marc":{source:"iana",extensions:["mrc"]},"application/marcxml+xml":{source:"iana",compressible:!0,extensions:["mrcx"]},"application/mathematica":{source:"iana",extensions:["ma","nb","mb"]},"application/mathml+xml":{source:"iana",compressible:!0,extensions:["mathml"]},"application/mathml-content+xml":{source:"iana",compressible:!0},"application/mathml-presentation+xml":{source:"iana",compressible:!0},"application/mbms-associated-procedure-description+xml":{source:"iana",compressible:!0},"application/mbms-deregister+xml":{source:"iana",compressible:!0},"application/mbms-envelope+xml":{source:"iana",compressible:!0},"application/mbms-msk+xml":{source:"iana",compressible:!0},"application/mbms-msk-response+xml":{source:"iana",compressible:!0},"application/mbms-protection-description+xml":{source:"iana",compressible:!0},"application/mbms-reception-report+xml":{source:"iana",compressible:!0},"application/mbms-register+xml":{source:"iana",compressible:!0},"application/mbms-register-response+xml":{source:"iana",compressible:!0},"application/mbms-schedule+xml":{source:"iana",compressible:!0},"application/mbms-user-service-description+xml":{source:"iana",compressible:!0},"application/mbox":{source:"iana",extensions:["mbox"]},"application/media-policy-dataset+xml":{source:"iana",compressible:!0,extensions:["mpf"]},"application/media_control+xml":{source:"iana",compressible:!0},"application/mediaservercontrol+xml":{source:"iana",compressible:!0,extensions:["mscml"]},"application/merge-patch+json":{source:"iana",compressible:!0},"application/metalink+xml":{source:"apache",compressible:!0,extensions:["metalink"]},"application/metalink4+xml":{source:"iana",compressible:!0,extensions:["meta4"]},"application/mets+xml":{source:"iana",compressible:!0,extensions:["mets"]},"application/mf4":{source:"iana"},"application/mikey":{source:"iana"},"application/mipc":{source:"iana"},"application/missing-blocks+cbor-seq":{source:"iana"},"application/mmt-aei+xml":{source:"iana",compressible:!0,extensions:["maei"]},"application/mmt-usd+xml":{source:"iana",compressible:!0,extensions:["musd"]},"application/mods+xml":{source:"iana",compressible:!0,extensions:["mods"]},"application/moss-keys":{source:"iana"},"application/moss-signature":{source:"iana"},"application/mosskey-data":{source:"iana"},"application/mosskey-request":{source:"iana"},"application/mp21":{source:"iana",extensions:["m21","mp21"]},"application/mp4":{source:"iana",extensions:["mp4s","m4p"]},"application/mpeg4-generic":{source:"iana"},"application/mpeg4-iod":{source:"iana"},"application/mpeg4-iod-xmt":{source:"iana"},"application/mrb-consumer+xml":{source:"iana",compressible:!0},"application/mrb-publish+xml":{source:"iana",compressible:!0},"application/msc-ivr+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/msc-mixer+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/msword":{source:"iana",compressible:!1,extensions:["doc","dot"]},"application/mud+json":{source:"iana",compressible:!0},"application/multipart-core":{source:"iana"},"application/mxf":{source:"iana",extensions:["mxf"]},"application/n-quads":{source:"iana",extensions:["nq"]},"application/n-triples":{source:"iana",extensions:["nt"]},"application/nasdata":{source:"iana"},"application/news-checkgroups":{source:"iana",charset:"US-ASCII"},"application/news-groupinfo":{source:"iana",charset:"US-ASCII"},"application/news-transmission":{source:"iana"},"application/nlsml+xml":{source:"iana",compressible:!0},"application/node":{source:"iana",extensions:["cjs"]},"application/nss":{source:"iana"},"application/oauth-authz-req+jwt":{source:"iana"},"application/oblivious-dns-message":{source:"iana"},"application/ocsp-request":{source:"iana"},"application/ocsp-response":{source:"iana"},"application/octet-stream":{source:"iana",compressible:!1,extensions:["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"]},"application/oda":{source:"iana",extensions:["oda"]},"application/odm+xml":{source:"iana",compressible:!0},"application/odx":{source:"iana"},"application/oebps-package+xml":{source:"iana",compressible:!0,extensions:["opf"]},"application/ogg":{source:"iana",compressible:!1,extensions:["ogx"]},"application/omdoc+xml":{source:"apache",compressible:!0,extensions:["omdoc"]},"application/onenote":{source:"apache",extensions:["onetoc","onetoc2","onetmp","onepkg"]},"application/opc-nodeset+xml":{source:"iana",compressible:!0},"application/oscore":{source:"iana"},"application/oxps":{source:"iana",extensions:["oxps"]},"application/p21":{source:"iana"},"application/p21+zip":{source:"iana",compressible:!1},"application/p2p-overlay+xml":{source:"iana",compressible:!0,extensions:["relo"]},"application/parityfec":{source:"iana"},"application/passport":{source:"iana"},"application/patch-ops-error+xml":{source:"iana",compressible:!0,extensions:["xer"]},"application/pdf":{source:"iana",compressible:!1,extensions:["pdf"]},"application/pdx":{source:"iana"},"application/pem-certificate-chain":{source:"iana"},"application/pgp-encrypted":{source:"iana",compressible:!1,extensions:["pgp"]},"application/pgp-keys":{source:"iana",extensions:["asc"]},"application/pgp-signature":{source:"iana",extensions:["asc","sig"]},"application/pics-rules":{source:"apache",extensions:["prf"]},"application/pidf+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/pidf-diff+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/pkcs10":{source:"iana",extensions:["p10"]},"application/pkcs12":{source:"iana"},"application/pkcs7-mime":{source:"iana",extensions:["p7m","p7c"]},"application/pkcs7-signature":{source:"iana",extensions:["p7s"]},"application/pkcs8":{source:"iana",extensions:["p8"]},"application/pkcs8-encrypted":{source:"iana"},"application/pkix-attr-cert":{source:"iana",extensions:["ac"]},"application/pkix-cert":{source:"iana",extensions:["cer"]},"application/pkix-crl":{source:"iana",extensions:["crl"]},"application/pkix-pkipath":{source:"iana",extensions:["pkipath"]},"application/pkixcmp":{source:"iana",extensions:["pki"]},"application/pls+xml":{source:"iana",compressible:!0,extensions:["pls"]},"application/poc-settings+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/postscript":{source:"iana",compressible:!0,extensions:["ai","eps","ps"]},"application/ppsp-tracker+json":{source:"iana",compressible:!0},"application/problem+json":{source:"iana",compressible:!0},"application/problem+xml":{source:"iana",compressible:!0},"application/provenance+xml":{source:"iana",compressible:!0,extensions:["provx"]},"application/prs.alvestrand.titrax-sheet":{source:"iana"},"application/prs.cww":{source:"iana",extensions:["cww"]},"application/prs.cyn":{source:"iana",charset:"7-BIT"},"application/prs.hpub+zip":{source:"iana",compressible:!1},"application/prs.nprend":{source:"iana"},"application/prs.plucker":{source:"iana"},"application/prs.rdf-xml-crypt":{source:"iana"},"application/prs.xsf+xml":{source:"iana",compressible:!0},"application/pskc+xml":{source:"iana",compressible:!0,extensions:["pskcxml"]},"application/pvd+json":{source:"iana",compressible:!0},"application/qsig":{source:"iana"},"application/raml+yaml":{compressible:!0,extensions:["raml"]},"application/raptorfec":{source:"iana"},"application/rdap+json":{source:"iana",compressible:!0},"application/rdf+xml":{source:"iana",compressible:!0,extensions:["rdf","owl"]},"application/reginfo+xml":{source:"iana",compressible:!0,extensions:["rif"]},"application/relax-ng-compact-syntax":{source:"iana",extensions:["rnc"]},"application/remote-printing":{source:"iana"},"application/reputon+json":{source:"iana",compressible:!0},"application/resource-lists+xml":{source:"iana",compressible:!0,extensions:["rl"]},"application/resource-lists-diff+xml":{source:"iana",compressible:!0,extensions:["rld"]},"application/rfc+xml":{source:"iana",compressible:!0},"application/riscos":{source:"iana"},"application/rlmi+xml":{source:"iana",compressible:!0},"application/rls-services+xml":{source:"iana",compressible:!0,extensions:["rs"]},"application/route-apd+xml":{source:"iana",compressible:!0,extensions:["rapd"]},"application/route-s-tsid+xml":{source:"iana",compressible:!0,extensions:["sls"]},"application/route-usd+xml":{source:"iana",compressible:!0,extensions:["rusd"]},"application/rpki-ghostbusters":{source:"iana",extensions:["gbr"]},"application/rpki-manifest":{source:"iana",extensions:["mft"]},"application/rpki-publication":{source:"iana"},"application/rpki-roa":{source:"iana",extensions:["roa"]},"application/rpki-updown":{source:"iana"},"application/rsd+xml":{source:"apache",compressible:!0,extensions:["rsd"]},"application/rss+xml":{source:"apache",compressible:!0,extensions:["rss"]},"application/rtf":{source:"iana",compressible:!0,extensions:["rtf"]},"application/rtploopback":{source:"iana"},"application/rtx":{source:"iana"},"application/samlassertion+xml":{source:"iana",compressible:!0},"application/samlmetadata+xml":{source:"iana",compressible:!0},"application/sarif+json":{source:"iana",compressible:!0},"application/sarif-external-properties+json":{source:"iana",compressible:!0},"application/sbe":{source:"iana"},"application/sbml+xml":{source:"iana",compressible:!0,extensions:["sbml"]},"application/scaip+xml":{source:"iana",compressible:!0},"application/scim+json":{source:"iana",compressible:!0},"application/scvp-cv-request":{source:"iana",extensions:["scq"]},"application/scvp-cv-response":{source:"iana",extensions:["scs"]},"application/scvp-vp-request":{source:"iana",extensions:["spq"]},"application/scvp-vp-response":{source:"iana",extensions:["spp"]},"application/sdp":{source:"iana",extensions:["sdp"]},"application/secevent+jwt":{source:"iana"},"application/senml+cbor":{source:"iana"},"application/senml+json":{source:"iana",compressible:!0},"application/senml+xml":{source:"iana",compressible:!0,extensions:["senmlx"]},"application/senml-etch+cbor":{source:"iana"},"application/senml-etch+json":{source:"iana",compressible:!0},"application/senml-exi":{source:"iana"},"application/sensml+cbor":{source:"iana"},"application/sensml+json":{source:"iana",compressible:!0},"application/sensml+xml":{source:"iana",compressible:!0,extensions:["sensmlx"]},"application/sensml-exi":{source:"iana"},"application/sep+xml":{source:"iana",compressible:!0},"application/sep-exi":{source:"iana"},"application/session-info":{source:"iana"},"application/set-payment":{source:"iana"},"application/set-payment-initiation":{source:"iana",extensions:["setpay"]},"application/set-registration":{source:"iana"},"application/set-registration-initiation":{source:"iana",extensions:["setreg"]},"application/sgml":{source:"iana"},"application/sgml-open-catalog":{source:"iana"},"application/shf+xml":{source:"iana",compressible:!0,extensions:["shf"]},"application/sieve":{source:"iana",extensions:["siv","sieve"]},"application/simple-filter+xml":{source:"iana",compressible:!0},"application/simple-message-summary":{source:"iana"},"application/simplesymbolcontainer":{source:"iana"},"application/sipc":{source:"iana"},"application/slate":{source:"iana"},"application/smil":{source:"iana"},"application/smil+xml":{source:"iana",compressible:!0,extensions:["smi","smil"]},"application/smpte336m":{source:"iana"},"application/soap+fastinfoset":{source:"iana"},"application/soap+xml":{source:"iana",compressible:!0},"application/sparql-query":{source:"iana",extensions:["rq"]},"application/sparql-results+xml":{source:"iana",compressible:!0,extensions:["srx"]},"application/spdx+json":{source:"iana",compressible:!0},"application/spirits-event+xml":{source:"iana",compressible:!0},"application/sql":{source:"iana"},"application/srgs":{source:"iana",extensions:["gram"]},"application/srgs+xml":{source:"iana",compressible:!0,extensions:["grxml"]},"application/sru+xml":{source:"iana",compressible:!0,extensions:["sru"]},"application/ssdl+xml":{source:"apache",compressible:!0,extensions:["ssdl"]},"application/ssml+xml":{source:"iana",compressible:!0,extensions:["ssml"]},"application/stix+json":{source:"iana",compressible:!0},"application/swid+xml":{source:"iana",compressible:!0,extensions:["swidtag"]},"application/tamp-apex-update":{source:"iana"},"application/tamp-apex-update-confirm":{source:"iana"},"application/tamp-community-update":{source:"iana"},"application/tamp-community-update-confirm":{source:"iana"},"application/tamp-error":{source:"iana"},"application/tamp-sequence-adjust":{source:"iana"},"application/tamp-sequence-adjust-confirm":{source:"iana"},"application/tamp-status-query":{source:"iana"},"application/tamp-status-response":{source:"iana"},"application/tamp-update":{source:"iana"},"application/tamp-update-confirm":{source:"iana"},"application/tar":{compressible:!0},"application/taxii+json":{source:"iana",compressible:!0},"application/td+json":{source:"iana",compressible:!0},"application/tei+xml":{source:"iana",compressible:!0,extensions:["tei","teicorpus"]},"application/tetra_isi":{source:"iana"},"application/thraud+xml":{source:"iana",compressible:!0,extensions:["tfi"]},"application/timestamp-query":{source:"iana"},"application/timestamp-reply":{source:"iana"},"application/timestamped-data":{source:"iana",extensions:["tsd"]},"application/tlsrpt+gzip":{source:"iana"},"application/tlsrpt+json":{source:"iana",compressible:!0},"application/tnauthlist":{source:"iana"},"application/token-introspection+jwt":{source:"iana"},"application/toml":{compressible:!0,extensions:["toml"]},"application/trickle-ice-sdpfrag":{source:"iana"},"application/trig":{source:"iana",extensions:["trig"]},"application/ttml+xml":{source:"iana",compressible:!0,extensions:["ttml"]},"application/tve-trigger":{source:"iana"},"application/tzif":{source:"iana"},"application/tzif-leap":{source:"iana"},"application/ubjson":{compressible:!1,extensions:["ubj"]},"application/ulpfec":{source:"iana"},"application/urc-grpsheet+xml":{source:"iana",compressible:!0},"application/urc-ressheet+xml":{source:"iana",compressible:!0,extensions:["rsheet"]},"application/urc-targetdesc+xml":{source:"iana",compressible:!0,extensions:["td"]},"application/urc-uisocketdesc+xml":{source:"iana",compressible:!0},"application/vcard+json":{source:"iana",compressible:!0},"application/vcard+xml":{source:"iana",compressible:!0},"application/vemmi":{source:"iana"},"application/vividence.scriptfile":{source:"apache"},"application/vnd.1000minds.decision-model+xml":{source:"iana",compressible:!0,extensions:["1km"]},"application/vnd.3gpp-prose+xml":{source:"iana",compressible:!0},"application/vnd.3gpp-prose-pc3ch+xml":{source:"iana",compressible:!0},"application/vnd.3gpp-v2x-local-service-information":{source:"iana"},"application/vnd.3gpp.5gnas":{source:"iana"},"application/vnd.3gpp.access-transfer-events+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.bsf+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.gmop+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.gtpc":{source:"iana"},"application/vnd.3gpp.interworking-data":{source:"iana"},"application/vnd.3gpp.lpp":{source:"iana"},"application/vnd.3gpp.mc-signalling-ear":{source:"iana"},"application/vnd.3gpp.mcdata-affiliation-command+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-payload":{source:"iana"},"application/vnd.3gpp.mcdata-service-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-signalling":{source:"iana"},"application/vnd.3gpp.mcdata-ue-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-user-profile+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-affiliation-command+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-floor-request+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-location-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-mbms-usage-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-service-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-signed+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-ue-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-ue-init-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-user-profile+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-affiliation-command+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-affiliation-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-location-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-mbms-usage-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-service-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-transmission-request+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-ue-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-user-profile+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mid-call+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.ngap":{source:"iana"},"application/vnd.3gpp.pfcp":{source:"iana"},"application/vnd.3gpp.pic-bw-large":{source:"iana",extensions:["plb"]},"application/vnd.3gpp.pic-bw-small":{source:"iana",extensions:["psb"]},"application/vnd.3gpp.pic-bw-var":{source:"iana",extensions:["pvb"]},"application/vnd.3gpp.s1ap":{source:"iana"},"application/vnd.3gpp.sms":{source:"iana"},"application/vnd.3gpp.sms+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.srvcc-ext+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.srvcc-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.state-and-event-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.ussd+xml":{source:"iana",compressible:!0},"application/vnd.3gpp2.bcmcsinfo+xml":{source:"iana",compressible:!0},"application/vnd.3gpp2.sms":{source:"iana"},"application/vnd.3gpp2.tcap":{source:"iana",extensions:["tcap"]},"application/vnd.3lightssoftware.imagescal":{source:"iana"},"application/vnd.3m.post-it-notes":{source:"iana",extensions:["pwn"]},"application/vnd.accpac.simply.aso":{source:"iana",extensions:["aso"]},"application/vnd.accpac.simply.imp":{source:"iana",extensions:["imp"]},"application/vnd.acucobol":{source:"iana",extensions:["acu"]},"application/vnd.acucorp":{source:"iana",extensions:["atc","acutc"]},"application/vnd.adobe.air-application-installer-package+zip":{source:"apache",compressible:!1,extensions:["air"]},"application/vnd.adobe.flash.movie":{source:"iana"},"application/vnd.adobe.formscentral.fcdt":{source:"iana",extensions:["fcdt"]},"application/vnd.adobe.fxp":{source:"iana",extensions:["fxp","fxpl"]},"application/vnd.adobe.partial-upload":{source:"iana"},"application/vnd.adobe.xdp+xml":{source:"iana",compressible:!0,extensions:["xdp"]},"application/vnd.adobe.xfdf":{source:"iana",extensions:["xfdf"]},"application/vnd.aether.imp":{source:"iana"},"application/vnd.afpc.afplinedata":{source:"iana"},"application/vnd.afpc.afplinedata-pagedef":{source:"iana"},"application/vnd.afpc.cmoca-cmresource":{source:"iana"},"application/vnd.afpc.foca-charset":{source:"iana"},"application/vnd.afpc.foca-codedfont":{source:"iana"},"application/vnd.afpc.foca-codepage":{source:"iana"},"application/vnd.afpc.modca":{source:"iana"},"application/vnd.afpc.modca-cmtable":{source:"iana"},"application/vnd.afpc.modca-formdef":{source:"iana"},"application/vnd.afpc.modca-mediummap":{source:"iana"},"application/vnd.afpc.modca-objectcontainer":{source:"iana"},"application/vnd.afpc.modca-overlay":{source:"iana"},"application/vnd.afpc.modca-pagesegment":{source:"iana"},"application/vnd.age":{source:"iana",extensions:["age"]},"application/vnd.ah-barcode":{source:"iana"},"application/vnd.ahead.space":{source:"iana",extensions:["ahead"]},"application/vnd.airzip.filesecure.azf":{source:"iana",extensions:["azf"]},"application/vnd.airzip.filesecure.azs":{source:"iana",extensions:["azs"]},"application/vnd.amadeus+json":{source:"iana",compressible:!0},"application/vnd.amazon.ebook":{source:"apache",extensions:["azw"]},"application/vnd.amazon.mobi8-ebook":{source:"iana"},"application/vnd.americandynamics.acc":{source:"iana",extensions:["acc"]},"application/vnd.amiga.ami":{source:"iana",extensions:["ami"]},"application/vnd.amundsen.maze+xml":{source:"iana",compressible:!0},"application/vnd.android.ota":{source:"iana"},"application/vnd.android.package-archive":{source:"apache",compressible:!1,extensions:["apk"]},"application/vnd.anki":{source:"iana"},"application/vnd.anser-web-certificate-issue-initiation":{source:"iana",extensions:["cii"]},"application/vnd.anser-web-funds-transfer-initiation":{source:"apache",extensions:["fti"]},"application/vnd.antix.game-component":{source:"iana",extensions:["atx"]},"application/vnd.apache.arrow.file":{source:"iana"},"application/vnd.apache.arrow.stream":{source:"iana"},"application/vnd.apache.thrift.binary":{source:"iana"},"application/vnd.apache.thrift.compact":{source:"iana"},"application/vnd.apache.thrift.json":{source:"iana"},"application/vnd.api+json":{source:"iana",compressible:!0},"application/vnd.aplextor.warrp+json":{source:"iana",compressible:!0},"application/vnd.apothekende.reservation+json":{source:"iana",compressible:!0},"application/vnd.apple.installer+xml":{source:"iana",compressible:!0,extensions:["mpkg"]},"application/vnd.apple.keynote":{source:"iana",extensions:["key"]},"application/vnd.apple.mpegurl":{source:"iana",extensions:["m3u8"]},"application/vnd.apple.numbers":{source:"iana",extensions:["numbers"]},"application/vnd.apple.pages":{source:"iana",extensions:["pages"]},"application/vnd.apple.pkpass":{compressible:!1,extensions:["pkpass"]},"application/vnd.arastra.swi":{source:"iana"},"application/vnd.aristanetworks.swi":{source:"iana",extensions:["swi"]},"application/vnd.artisan+json":{source:"iana",compressible:!0},"application/vnd.artsquare":{source:"iana"},"application/vnd.astraea-software.iota":{source:"iana",extensions:["iota"]},"application/vnd.audiograph":{source:"iana",extensions:["aep"]},"application/vnd.autopackage":{source:"iana"},"application/vnd.avalon+json":{source:"iana",compressible:!0},"application/vnd.avistar+xml":{source:"iana",compressible:!0},"application/vnd.balsamiq.bmml+xml":{source:"iana",compressible:!0,extensions:["bmml"]},"application/vnd.balsamiq.bmpr":{source:"iana"},"application/vnd.banana-accounting":{source:"iana"},"application/vnd.bbf.usp.error":{source:"iana"},"application/vnd.bbf.usp.msg":{source:"iana"},"application/vnd.bbf.usp.msg+json":{source:"iana",compressible:!0},"application/vnd.bekitzur-stech+json":{source:"iana",compressible:!0},"application/vnd.bint.med-content":{source:"iana"},"application/vnd.biopax.rdf+xml":{source:"iana",compressible:!0},"application/vnd.blink-idb-value-wrapper":{source:"iana"},"application/vnd.blueice.multipass":{source:"iana",extensions:["mpm"]},"application/vnd.bluetooth.ep.oob":{source:"iana"},"application/vnd.bluetooth.le.oob":{source:"iana"},"application/vnd.bmi":{source:"iana",extensions:["bmi"]},"application/vnd.bpf":{source:"iana"},"application/vnd.bpf3":{source:"iana"},"application/vnd.businessobjects":{source:"iana",extensions:["rep"]},"application/vnd.byu.uapi+json":{source:"iana",compressible:!0},"application/vnd.cab-jscript":{source:"iana"},"application/vnd.canon-cpdl":{source:"iana"},"application/vnd.canon-lips":{source:"iana"},"application/vnd.capasystems-pg+json":{source:"iana",compressible:!0},"application/vnd.cendio.thinlinc.clientconf":{source:"iana"},"application/vnd.century-systems.tcp_stream":{source:"iana"},"application/vnd.chemdraw+xml":{source:"iana",compressible:!0,extensions:["cdxml"]},"application/vnd.chess-pgn":{source:"iana"},"application/vnd.chipnuts.karaoke-mmd":{source:"iana",extensions:["mmd"]},"application/vnd.ciedi":{source:"iana"},"application/vnd.cinderella":{source:"iana",extensions:["cdy"]},"application/vnd.cirpack.isdn-ext":{source:"iana"},"application/vnd.citationstyles.style+xml":{source:"iana",compressible:!0,extensions:["csl"]},"application/vnd.claymore":{source:"iana",extensions:["cla"]},"application/vnd.cloanto.rp9":{source:"iana",extensions:["rp9"]},"application/vnd.clonk.c4group":{source:"iana",extensions:["c4g","c4d","c4f","c4p","c4u"]},"application/vnd.cluetrust.cartomobile-config":{source:"iana",extensions:["c11amc"]},"application/vnd.cluetrust.cartomobile-config-pkg":{source:"iana",extensions:["c11amz"]},"application/vnd.coffeescript":{source:"iana"},"application/vnd.collabio.xodocuments.document":{source:"iana"},"application/vnd.collabio.xodocuments.document-template":{source:"iana"},"application/vnd.collabio.xodocuments.presentation":{source:"iana"},"application/vnd.collabio.xodocuments.presentation-template":{source:"iana"},"application/vnd.collabio.xodocuments.spreadsheet":{source:"iana"},"application/vnd.collabio.xodocuments.spreadsheet-template":{source:"iana"},"application/vnd.collection+json":{source:"iana",compressible:!0},"application/vnd.collection.doc+json":{source:"iana",compressible:!0},"application/vnd.collection.next+json":{source:"iana",compressible:!0},"application/vnd.comicbook+zip":{source:"iana",compressible:!1},"application/vnd.comicbook-rar":{source:"iana"},"application/vnd.commerce-battelle":{source:"iana"},"application/vnd.commonspace":{source:"iana",extensions:["csp"]},"application/vnd.contact.cmsg":{source:"iana",extensions:["cdbcmsg"]},"application/vnd.coreos.ignition+json":{source:"iana",compressible:!0},"application/vnd.cosmocaller":{source:"iana",extensions:["cmc"]},"application/vnd.crick.clicker":{source:"iana",extensions:["clkx"]},"application/vnd.crick.clicker.keyboard":{source:"iana",extensions:["clkk"]},"application/vnd.crick.clicker.palette":{source:"iana",extensions:["clkp"]},"application/vnd.crick.clicker.template":{source:"iana",extensions:["clkt"]},"application/vnd.crick.clicker.wordbank":{source:"iana",extensions:["clkw"]},"application/vnd.criticaltools.wbs+xml":{source:"iana",compressible:!0,extensions:["wbs"]},"application/vnd.cryptii.pipe+json":{source:"iana",compressible:!0},"application/vnd.crypto-shade-file":{source:"iana"},"application/vnd.cryptomator.encrypted":{source:"iana"},"application/vnd.cryptomator.vault":{source:"iana"},"application/vnd.ctc-posml":{source:"iana",extensions:["pml"]},"application/vnd.ctct.ws+xml":{source:"iana",compressible:!0},"application/vnd.cups-pdf":{source:"iana"},"application/vnd.cups-postscript":{source:"iana"},"application/vnd.cups-ppd":{source:"iana",extensions:["ppd"]},"application/vnd.cups-raster":{source:"iana"},"application/vnd.cups-raw":{source:"iana"},"application/vnd.curl":{source:"iana"},"application/vnd.curl.car":{source:"apache",extensions:["car"]},"application/vnd.curl.pcurl":{source:"apache",extensions:["pcurl"]},"application/vnd.cyan.dean.root+xml":{source:"iana",compressible:!0},"application/vnd.cybank":{source:"iana"},"application/vnd.cyclonedx+json":{source:"iana",compressible:!0},"application/vnd.cyclonedx+xml":{source:"iana",compressible:!0},"application/vnd.d2l.coursepackage1p0+zip":{source:"iana",compressible:!1},"application/vnd.d3m-dataset":{source:"iana"},"application/vnd.d3m-problem":{source:"iana"},"application/vnd.dart":{source:"iana",compressible:!0,extensions:["dart"]},"application/vnd.data-vision.rdz":{source:"iana",extensions:["rdz"]},"application/vnd.datapackage+json":{source:"iana",compressible:!0},"application/vnd.dataresource+json":{source:"iana",compressible:!0},"application/vnd.dbf":{source:"iana",extensions:["dbf"]},"application/vnd.debian.binary-package":{source:"iana"},"application/vnd.dece.data":{source:"iana",extensions:["uvf","uvvf","uvd","uvvd"]},"application/vnd.dece.ttml+xml":{source:"iana",compressible:!0,extensions:["uvt","uvvt"]},"application/vnd.dece.unspecified":{source:"iana",extensions:["uvx","uvvx"]},"application/vnd.dece.zip":{source:"iana",extensions:["uvz","uvvz"]},"application/vnd.denovo.fcselayout-link":{source:"iana",extensions:["fe_launch"]},"application/vnd.desmume.movie":{source:"iana"},"application/vnd.dir-bi.plate-dl-nosuffix":{source:"iana"},"application/vnd.dm.delegation+xml":{source:"iana",compressible:!0},"application/vnd.dna":{source:"iana",extensions:["dna"]},"application/vnd.document+json":{source:"iana",compressible:!0},"application/vnd.dolby.mlp":{source:"apache",extensions:["mlp"]},"application/vnd.dolby.mobile.1":{source:"iana"},"application/vnd.dolby.mobile.2":{source:"iana"},"application/vnd.doremir.scorecloud-binary-document":{source:"iana"},"application/vnd.dpgraph":{source:"iana",extensions:["dpg"]},"application/vnd.dreamfactory":{source:"iana",extensions:["dfac"]},"application/vnd.drive+json":{source:"iana",compressible:!0},"application/vnd.ds-keypoint":{source:"apache",extensions:["kpxx"]},"application/vnd.dtg.local":{source:"iana"},"application/vnd.dtg.local.flash":{source:"iana"},"application/vnd.dtg.local.html":{source:"iana"},"application/vnd.dvb.ait":{source:"iana",extensions:["ait"]},"application/vnd.dvb.dvbisl+xml":{source:"iana",compressible:!0},"application/vnd.dvb.dvbj":{source:"iana"},"application/vnd.dvb.esgcontainer":{source:"iana"},"application/vnd.dvb.ipdcdftnotifaccess":{source:"iana"},"application/vnd.dvb.ipdcesgaccess":{source:"iana"},"application/vnd.dvb.ipdcesgaccess2":{source:"iana"},"application/vnd.dvb.ipdcesgpdd":{source:"iana"},"application/vnd.dvb.ipdcroaming":{source:"iana"},"application/vnd.dvb.iptv.alfec-base":{source:"iana"},"application/vnd.dvb.iptv.alfec-enhancement":{source:"iana"},"application/vnd.dvb.notif-aggregate-root+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-container+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-generic+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-ia-msglist+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-ia-registration-request+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-ia-registration-response+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-init+xml":{source:"iana",compressible:!0},"application/vnd.dvb.pfr":{source:"iana"},"application/vnd.dvb.service":{source:"iana",extensions:["svc"]},"application/vnd.dxr":{source:"iana"},"application/vnd.dynageo":{source:"iana",extensions:["geo"]},"application/vnd.dzr":{source:"iana"},"application/vnd.easykaraoke.cdgdownload":{source:"iana"},"application/vnd.ecdis-update":{source:"iana"},"application/vnd.ecip.rlp":{source:"iana"},"application/vnd.eclipse.ditto+json":{source:"iana",compressible:!0},"application/vnd.ecowin.chart":{source:"iana",extensions:["mag"]},"application/vnd.ecowin.filerequest":{source:"iana"},"application/vnd.ecowin.fileupdate":{source:"iana"},"application/vnd.ecowin.series":{source:"iana"},"application/vnd.ecowin.seriesrequest":{source:"iana"},"application/vnd.ecowin.seriesupdate":{source:"iana"},"application/vnd.efi.img":{source:"iana"},"application/vnd.efi.iso":{source:"iana"},"application/vnd.emclient.accessrequest+xml":{source:"iana",compressible:!0},"application/vnd.enliven":{source:"iana",extensions:["nml"]},"application/vnd.enphase.envoy":{source:"iana"},"application/vnd.eprints.data+xml":{source:"iana",compressible:!0},"application/vnd.epson.esf":{source:"iana",extensions:["esf"]},"application/vnd.epson.msf":{source:"iana",extensions:["msf"]},"application/vnd.epson.quickanime":{source:"iana",extensions:["qam"]},"application/vnd.epson.salt":{source:"iana",extensions:["slt"]},"application/vnd.epson.ssf":{source:"iana",extensions:["ssf"]},"application/vnd.ericsson.quickcall":{source:"iana"},"application/vnd.espass-espass+zip":{source:"iana",compressible:!1},"application/vnd.eszigno3+xml":{source:"iana",compressible:!0,extensions:["es3","et3"]},"application/vnd.etsi.aoc+xml":{source:"iana",compressible:!0},"application/vnd.etsi.asic-e+zip":{source:"iana",compressible:!1},"application/vnd.etsi.asic-s+zip":{source:"iana",compressible:!1},"application/vnd.etsi.cug+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvcommand+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvdiscovery+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvprofile+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsad-bc+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsad-cod+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsad-npvr+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvservice+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsync+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvueprofile+xml":{source:"iana",compressible:!0},"application/vnd.etsi.mcid+xml":{source:"iana",compressible:!0},"application/vnd.etsi.mheg5":{source:"iana"},"application/vnd.etsi.overload-control-policy-dataset+xml":{source:"iana",compressible:!0},"application/vnd.etsi.pstn+xml":{source:"iana",compressible:!0},"application/vnd.etsi.sci+xml":{source:"iana",compressible:!0},"application/vnd.etsi.simservs+xml":{source:"iana",compressible:!0},"application/vnd.etsi.timestamp-token":{source:"iana"},"application/vnd.etsi.tsl+xml":{source:"iana",compressible:!0},"application/vnd.etsi.tsl.der":{source:"iana"},"application/vnd.eu.kasparian.car+json":{source:"iana",compressible:!0},"application/vnd.eudora.data":{source:"iana"},"application/vnd.evolv.ecig.profile":{source:"iana"},"application/vnd.evolv.ecig.settings":{source:"iana"},"application/vnd.evolv.ecig.theme":{source:"iana"},"application/vnd.exstream-empower+zip":{source:"iana",compressible:!1},"application/vnd.exstream-package":{source:"iana"},"application/vnd.ezpix-album":{source:"iana",extensions:["ez2"]},"application/vnd.ezpix-package":{source:"iana",extensions:["ez3"]},"application/vnd.f-secure.mobile":{source:"iana"},"application/vnd.familysearch.gedcom+zip":{source:"iana",compressible:!1},"application/vnd.fastcopy-disk-image":{source:"iana"},"application/vnd.fdf":{source:"iana",extensions:["fdf"]},"application/vnd.fdsn.mseed":{source:"iana",extensions:["mseed"]},"application/vnd.fdsn.seed":{source:"iana",extensions:["seed","dataless"]},"application/vnd.ffsns":{source:"iana"},"application/vnd.ficlab.flb+zip":{source:"iana",compressible:!1},"application/vnd.filmit.zfc":{source:"iana"},"application/vnd.fints":{source:"iana"},"application/vnd.firemonkeys.cloudcell":{source:"iana"},"application/vnd.flographit":{source:"iana",extensions:["gph"]},"application/vnd.fluxtime.clip":{source:"iana",extensions:["ftc"]},"application/vnd.font-fontforge-sfd":{source:"iana"},"application/vnd.framemaker":{source:"iana",extensions:["fm","frame","maker","book"]},"application/vnd.frogans.fnc":{source:"iana",extensions:["fnc"]},"application/vnd.frogans.ltf":{source:"iana",extensions:["ltf"]},"application/vnd.fsc.weblaunch":{source:"iana",extensions:["fsc"]},"application/vnd.fujifilm.fb.docuworks":{source:"iana"},"application/vnd.fujifilm.fb.docuworks.binder":{source:"iana"},"application/vnd.fujifilm.fb.docuworks.container":{source:"iana"},"application/vnd.fujifilm.fb.jfi+xml":{source:"iana",compressible:!0},"application/vnd.fujitsu.oasys":{source:"iana",extensions:["oas"]},"application/vnd.fujitsu.oasys2":{source:"iana",extensions:["oa2"]},"application/vnd.fujitsu.oasys3":{source:"iana",extensions:["oa3"]},"application/vnd.fujitsu.oasysgp":{source:"iana",extensions:["fg5"]},"application/vnd.fujitsu.oasysprs":{source:"iana",extensions:["bh2"]},"application/vnd.fujixerox.art-ex":{source:"iana"},"application/vnd.fujixerox.art4":{source:"iana"},"application/vnd.fujixerox.ddd":{source:"iana",extensions:["ddd"]},"application/vnd.fujixerox.docuworks":{source:"iana",extensions:["xdw"]},"application/vnd.fujixerox.docuworks.binder":{source:"iana",extensions:["xbd"]},"application/vnd.fujixerox.docuworks.container":{source:"iana"},"application/vnd.fujixerox.hbpl":{source:"iana"},"application/vnd.fut-misnet":{source:"iana"},"application/vnd.futoin+cbor":{source:"iana"},"application/vnd.futoin+json":{source:"iana",compressible:!0},"application/vnd.fuzzysheet":{source:"iana",extensions:["fzs"]},"application/vnd.genomatix.tuxedo":{source:"iana",extensions:["txd"]},"application/vnd.gentics.grd+json":{source:"iana",compressible:!0},"application/vnd.geo+json":{source:"iana",compressible:!0},"application/vnd.geocube+xml":{source:"iana",compressible:!0},"application/vnd.geogebra.file":{source:"iana",extensions:["ggb"]},"application/vnd.geogebra.slides":{source:"iana"},"application/vnd.geogebra.tool":{source:"iana",extensions:["ggt"]},"application/vnd.geometry-explorer":{source:"iana",extensions:["gex","gre"]},"application/vnd.geonext":{source:"iana",extensions:["gxt"]},"application/vnd.geoplan":{source:"iana",extensions:["g2w"]},"application/vnd.geospace":{source:"iana",extensions:["g3w"]},"application/vnd.gerber":{source:"iana"},"application/vnd.globalplatform.card-content-mgt":{source:"iana"},"application/vnd.globalplatform.card-content-mgt-response":{source:"iana"},"application/vnd.gmx":{source:"iana",extensions:["gmx"]},"application/vnd.google-apps.document":{compressible:!1,extensions:["gdoc"]},"application/vnd.google-apps.presentation":{compressible:!1,extensions:["gslides"]},"application/vnd.google-apps.spreadsheet":{compressible:!1,extensions:["gsheet"]},"application/vnd.google-earth.kml+xml":{source:"iana",compressible:!0,extensions:["kml"]},"application/vnd.google-earth.kmz":{source:"iana",compressible:!1,extensions:["kmz"]},"application/vnd.gov.sk.e-form+xml":{source:"iana",compressible:!0},"application/vnd.gov.sk.e-form+zip":{source:"iana",compressible:!1},"application/vnd.gov.sk.xmldatacontainer+xml":{source:"iana",compressible:!0},"application/vnd.grafeq":{source:"iana",extensions:["gqf","gqs"]},"application/vnd.gridmp":{source:"iana"},"application/vnd.groove-account":{source:"iana",extensions:["gac"]},"application/vnd.groove-help":{source:"iana",extensions:["ghf"]},"application/vnd.groove-identity-message":{source:"iana",extensions:["gim"]},"application/vnd.groove-injector":{source:"iana",extensions:["grv"]},"application/vnd.groove-tool-message":{source:"iana",extensions:["gtm"]},"application/vnd.groove-tool-template":{source:"iana",extensions:["tpl"]},"application/vnd.groove-vcard":{source:"iana",extensions:["vcg"]},"application/vnd.hal+json":{source:"iana",compressible:!0},"application/vnd.hal+xml":{source:"iana",compressible:!0,extensions:["hal"]},"application/vnd.handheld-entertainment+xml":{source:"iana",compressible:!0,extensions:["zmm"]},"application/vnd.hbci":{source:"iana",extensions:["hbci"]},"application/vnd.hc+json":{source:"iana",compressible:!0},"application/vnd.hcl-bireports":{source:"iana"},"application/vnd.hdt":{source:"iana"},"application/vnd.heroku+json":{source:"iana",compressible:!0},"application/vnd.hhe.lesson-player":{source:"iana",extensions:["les"]},"application/vnd.hl7cda+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.hl7v2+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.hp-hpgl":{source:"iana",extensions:["hpgl"]},"application/vnd.hp-hpid":{source:"iana",extensions:["hpid"]},"application/vnd.hp-hps":{source:"iana",extensions:["hps"]},"application/vnd.hp-jlyt":{source:"iana",extensions:["jlt"]},"application/vnd.hp-pcl":{source:"iana",extensions:["pcl"]},"application/vnd.hp-pclxl":{source:"iana",extensions:["pclxl"]},"application/vnd.httphone":{source:"iana"},"application/vnd.hydrostatix.sof-data":{source:"iana",extensions:["sfd-hdstx"]},"application/vnd.hyper+json":{source:"iana",compressible:!0},"application/vnd.hyper-item+json":{source:"iana",compressible:!0},"application/vnd.hyperdrive+json":{source:"iana",compressible:!0},"application/vnd.hzn-3d-crossword":{source:"iana"},"application/vnd.ibm.afplinedata":{source:"iana"},"application/vnd.ibm.electronic-media":{source:"iana"},"application/vnd.ibm.minipay":{source:"iana",extensions:["mpy"]},"application/vnd.ibm.modcap":{source:"iana",extensions:["afp","listafp","list3820"]},"application/vnd.ibm.rights-management":{source:"iana",extensions:["irm"]},"application/vnd.ibm.secure-container":{source:"iana",extensions:["sc"]},"application/vnd.iccprofile":{source:"iana",extensions:["icc","icm"]},"application/vnd.ieee.1905":{source:"iana"},"application/vnd.igloader":{source:"iana",extensions:["igl"]},"application/vnd.imagemeter.folder+zip":{source:"iana",compressible:!1},"application/vnd.imagemeter.image+zip":{source:"iana",compressible:!1},"application/vnd.immervision-ivp":{source:"iana",extensions:["ivp"]},"application/vnd.immervision-ivu":{source:"iana",extensions:["ivu"]},"application/vnd.ims.imsccv1p1":{source:"iana"},"application/vnd.ims.imsccv1p2":{source:"iana"},"application/vnd.ims.imsccv1p3":{source:"iana"},"application/vnd.ims.lis.v2.result+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolconsumerprofile+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolproxy+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolproxy.id+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolsettings+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolsettings.simple+json":{source:"iana",compressible:!0},"application/vnd.informedcontrol.rms+xml":{source:"iana",compressible:!0},"application/vnd.informix-visionary":{source:"iana"},"application/vnd.infotech.project":{source:"iana"},"application/vnd.infotech.project+xml":{source:"iana",compressible:!0},"application/vnd.innopath.wamp.notification":{source:"iana"},"application/vnd.insors.igm":{source:"iana",extensions:["igm"]},"application/vnd.intercon.formnet":{source:"iana",extensions:["xpw","xpx"]},"application/vnd.intergeo":{source:"iana",extensions:["i2g"]},"application/vnd.intertrust.digibox":{source:"iana"},"application/vnd.intertrust.nncp":{source:"iana"},"application/vnd.intu.qbo":{source:"iana",extensions:["qbo"]},"application/vnd.intu.qfx":{source:"iana",extensions:["qfx"]},"application/vnd.iptc.g2.catalogitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.conceptitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.knowledgeitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.newsitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.newsmessage+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.packageitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.planningitem+xml":{source:"iana",compressible:!0},"application/vnd.ipunplugged.rcprofile":{source:"iana",extensions:["rcprofile"]},"application/vnd.irepository.package+xml":{source:"iana",compressible:!0,extensions:["irp"]},"application/vnd.is-xpr":{source:"iana",extensions:["xpr"]},"application/vnd.isac.fcs":{source:"iana",extensions:["fcs"]},"application/vnd.iso11783-10+zip":{source:"iana",compressible:!1},"application/vnd.jam":{source:"iana",extensions:["jam"]},"application/vnd.japannet-directory-service":{source:"iana"},"application/vnd.japannet-jpnstore-wakeup":{source:"iana"},"application/vnd.japannet-payment-wakeup":{source:"iana"},"application/vnd.japannet-registration":{source:"iana"},"application/vnd.japannet-registration-wakeup":{source:"iana"},"application/vnd.japannet-setstore-wakeup":{source:"iana"},"application/vnd.japannet-verification":{source:"iana"},"application/vnd.japannet-verification-wakeup":{source:"iana"},"application/vnd.jcp.javame.midlet-rms":{source:"iana",extensions:["rms"]},"application/vnd.jisp":{source:"iana",extensions:["jisp"]},"application/vnd.joost.joda-archive":{source:"iana",extensions:["joda"]},"application/vnd.jsk.isdn-ngn":{source:"iana"},"application/vnd.kahootz":{source:"iana",extensions:["ktz","ktr"]},"application/vnd.kde.karbon":{source:"iana",extensions:["karbon"]},"application/vnd.kde.kchart":{source:"iana",extensions:["chrt"]},"application/vnd.kde.kformula":{source:"iana",extensions:["kfo"]},"application/vnd.kde.kivio":{source:"iana",extensions:["flw"]},"application/vnd.kde.kontour":{source:"iana",extensions:["kon"]},"application/vnd.kde.kpresenter":{source:"iana",extensions:["kpr","kpt"]},"application/vnd.kde.kspread":{source:"iana",extensions:["ksp"]},"application/vnd.kde.kword":{source:"iana",extensions:["kwd","kwt"]},"application/vnd.kenameaapp":{source:"iana",extensions:["htke"]},"application/vnd.kidspiration":{source:"iana",extensions:["kia"]},"application/vnd.kinar":{source:"iana",extensions:["kne","knp"]},"application/vnd.koan":{source:"iana",extensions:["skp","skd","skt","skm"]},"application/vnd.kodak-descriptor":{source:"iana",extensions:["sse"]},"application/vnd.las":{source:"iana"},"application/vnd.las.las+json":{source:"iana",compressible:!0},"application/vnd.las.las+xml":{source:"iana",compressible:!0,extensions:["lasxml"]},"application/vnd.laszip":{source:"iana"},"application/vnd.leap+json":{source:"iana",compressible:!0},"application/vnd.liberty-request+xml":{source:"iana",compressible:!0},"application/vnd.llamagraphics.life-balance.desktop":{source:"iana",extensions:["lbd"]},"application/vnd.llamagraphics.life-balance.exchange+xml":{source:"iana",compressible:!0,extensions:["lbe"]},"application/vnd.logipipe.circuit+zip":{source:"iana",compressible:!1},"application/vnd.loom":{source:"iana"},"application/vnd.lotus-1-2-3":{source:"iana",extensions:["123"]},"application/vnd.lotus-approach":{source:"iana",extensions:["apr"]},"application/vnd.lotus-freelance":{source:"iana",extensions:["pre"]},"application/vnd.lotus-notes":{source:"iana",extensions:["nsf"]},"application/vnd.lotus-organizer":{source:"iana",extensions:["org"]},"application/vnd.lotus-screencam":{source:"iana",extensions:["scm"]},"application/vnd.lotus-wordpro":{source:"iana",extensions:["lwp"]},"application/vnd.macports.portpkg":{source:"iana",extensions:["portpkg"]},"application/vnd.mapbox-vector-tile":{source:"iana",extensions:["mvt"]},"application/vnd.marlin.drm.actiontoken+xml":{source:"iana",compressible:!0},"application/vnd.marlin.drm.conftoken+xml":{source:"iana",compressible:!0},"application/vnd.marlin.drm.license+xml":{source:"iana",compressible:!0},"application/vnd.marlin.drm.mdcf":{source:"iana"},"application/vnd.mason+json":{source:"iana",compressible:!0},"application/vnd.maxar.archive.3tz+zip":{source:"iana",compressible:!1},"application/vnd.maxmind.maxmind-db":{source:"iana"},"application/vnd.mcd":{source:"iana",extensions:["mcd"]},"application/vnd.medcalcdata":{source:"iana",extensions:["mc1"]},"application/vnd.mediastation.cdkey":{source:"iana",extensions:["cdkey"]},"application/vnd.meridian-slingshot":{source:"iana"},"application/vnd.mfer":{source:"iana",extensions:["mwf"]},"application/vnd.mfmp":{source:"iana",extensions:["mfm"]},"application/vnd.micro+json":{source:"iana",compressible:!0},"application/vnd.micrografx.flo":{source:"iana",extensions:["flo"]},"application/vnd.micrografx.igx":{source:"iana",extensions:["igx"]},"application/vnd.microsoft.portable-executable":{source:"iana"},"application/vnd.microsoft.windows.thumbnail-cache":{source:"iana"},"application/vnd.miele+json":{source:"iana",compressible:!0},"application/vnd.mif":{source:"iana",extensions:["mif"]},"application/vnd.minisoft-hp3000-save":{source:"iana"},"application/vnd.mitsubishi.misty-guard.trustweb":{source:"iana"},"application/vnd.mobius.daf":{source:"iana",extensions:["daf"]},"application/vnd.mobius.dis":{source:"iana",extensions:["dis"]},"application/vnd.mobius.mbk":{source:"iana",extensions:["mbk"]},"application/vnd.mobius.mqy":{source:"iana",extensions:["mqy"]},"application/vnd.mobius.msl":{source:"iana",extensions:["msl"]},"application/vnd.mobius.plc":{source:"iana",extensions:["plc"]},"application/vnd.mobius.txf":{source:"iana",extensions:["txf"]},"application/vnd.mophun.application":{source:"iana",extensions:["mpn"]},"application/vnd.mophun.certificate":{source:"iana",extensions:["mpc"]},"application/vnd.motorola.flexsuite":{source:"iana"},"application/vnd.motorola.flexsuite.adsi":{source:"iana"},"application/vnd.motorola.flexsuite.fis":{source:"iana"},"application/vnd.motorola.flexsuite.gotap":{source:"iana"},"application/vnd.motorola.flexsuite.kmr":{source:"iana"},"application/vnd.motorola.flexsuite.ttc":{source:"iana"},"application/vnd.motorola.flexsuite.wem":{source:"iana"},"application/vnd.motorola.iprm":{source:"iana"},"application/vnd.mozilla.xul+xml":{source:"iana",compressible:!0,extensions:["xul"]},"application/vnd.ms-3mfdocument":{source:"iana"},"application/vnd.ms-artgalry":{source:"iana",extensions:["cil"]},"application/vnd.ms-asf":{source:"iana"},"application/vnd.ms-cab-compressed":{source:"iana",extensions:["cab"]},"application/vnd.ms-color.iccprofile":{source:"apache"},"application/vnd.ms-excel":{source:"iana",compressible:!1,extensions:["xls","xlm","xla","xlc","xlt","xlw"]},"application/vnd.ms-excel.addin.macroenabled.12":{source:"iana",extensions:["xlam"]},"application/vnd.ms-excel.sheet.binary.macroenabled.12":{source:"iana",extensions:["xlsb"]},"application/vnd.ms-excel.sheet.macroenabled.12":{source:"iana",extensions:["xlsm"]},"application/vnd.ms-excel.template.macroenabled.12":{source:"iana",extensions:["xltm"]},"application/vnd.ms-fontobject":{source:"iana",compressible:!0,extensions:["eot"]},"application/vnd.ms-htmlhelp":{source:"iana",extensions:["chm"]},"application/vnd.ms-ims":{source:"iana",extensions:["ims"]},"application/vnd.ms-lrm":{source:"iana",extensions:["lrm"]},"application/vnd.ms-office.activex+xml":{source:"iana",compressible:!0},"application/vnd.ms-officetheme":{source:"iana",extensions:["thmx"]},"application/vnd.ms-opentype":{source:"apache",compressible:!0},"application/vnd.ms-outlook":{compressible:!1,extensions:["msg"]},"application/vnd.ms-package.obfuscated-opentype":{source:"apache"},"application/vnd.ms-pki.seccat":{source:"apache",extensions:["cat"]},"application/vnd.ms-pki.stl":{source:"apache",extensions:["stl"]},"application/vnd.ms-playready.initiator+xml":{source:"iana",compressible:!0},"application/vnd.ms-powerpoint":{source:"iana",compressible:!1,extensions:["ppt","pps","pot"]},"application/vnd.ms-powerpoint.addin.macroenabled.12":{source:"iana",extensions:["ppam"]},"application/vnd.ms-powerpoint.presentation.macroenabled.12":{source:"iana",extensions:["pptm"]},"application/vnd.ms-powerpoint.slide.macroenabled.12":{source:"iana",extensions:["sldm"]},"application/vnd.ms-powerpoint.slideshow.macroenabled.12":{source:"iana",extensions:["ppsm"]},"application/vnd.ms-powerpoint.template.macroenabled.12":{source:"iana",extensions:["potm"]},"application/vnd.ms-printdevicecapabilities+xml":{source:"iana",compressible:!0},"application/vnd.ms-printing.printticket+xml":{source:"apache",compressible:!0},"application/vnd.ms-printschematicket+xml":{source:"iana",compressible:!0},"application/vnd.ms-project":{source:"iana",extensions:["mpp","mpt"]},"application/vnd.ms-tnef":{source:"iana"},"application/vnd.ms-windows.devicepairing":{source:"iana"},"application/vnd.ms-windows.nwprinting.oob":{source:"iana"},"application/vnd.ms-windows.printerpairing":{source:"iana"},"application/vnd.ms-windows.wsd.oob":{source:"iana"},"application/vnd.ms-wmdrm.lic-chlg-req":{source:"iana"},"application/vnd.ms-wmdrm.lic-resp":{source:"iana"},"application/vnd.ms-wmdrm.meter-chlg-req":{source:"iana"},"application/vnd.ms-wmdrm.meter-resp":{source:"iana"},"application/vnd.ms-word.document.macroenabled.12":{source:"iana",extensions:["docm"]},"application/vnd.ms-word.template.macroenabled.12":{source:"iana",extensions:["dotm"]},"application/vnd.ms-works":{source:"iana",extensions:["wps","wks","wcm","wdb"]},"application/vnd.ms-wpl":{source:"iana",extensions:["wpl"]},"application/vnd.ms-xpsdocument":{source:"iana",compressible:!1,extensions:["xps"]},"application/vnd.msa-disk-image":{source:"iana"},"application/vnd.mseq":{source:"iana",extensions:["mseq"]},"application/vnd.msign":{source:"iana"},"application/vnd.multiad.creator":{source:"iana"},"application/vnd.multiad.creator.cif":{source:"iana"},"application/vnd.music-niff":{source:"iana"},"application/vnd.musician":{source:"iana",extensions:["mus"]},"application/vnd.muvee.style":{source:"iana",extensions:["msty"]},"application/vnd.mynfc":{source:"iana",extensions:["taglet"]},"application/vnd.nacamar.ybrid+json":{source:"iana",compressible:!0},"application/vnd.ncd.control":{source:"iana"},"application/vnd.ncd.reference":{source:"iana"},"application/vnd.nearst.inv+json":{source:"iana",compressible:!0},"application/vnd.nebumind.line":{source:"iana"},"application/vnd.nervana":{source:"iana"},"application/vnd.netfpx":{source:"iana"},"application/vnd.neurolanguage.nlu":{source:"iana",extensions:["nlu"]},"application/vnd.nimn":{source:"iana"},"application/vnd.nintendo.nitro.rom":{source:"iana"},"application/vnd.nintendo.snes.rom":{source:"iana"},"application/vnd.nitf":{source:"iana",extensions:["ntf","nitf"]},"application/vnd.noblenet-directory":{source:"iana",extensions:["nnd"]},"application/vnd.noblenet-sealer":{source:"iana",extensions:["nns"]},"application/vnd.noblenet-web":{source:"iana",extensions:["nnw"]},"application/vnd.nokia.catalogs":{source:"iana"},"application/vnd.nokia.conml+wbxml":{source:"iana"},"application/vnd.nokia.conml+xml":{source:"iana",compressible:!0},"application/vnd.nokia.iptv.config+xml":{source:"iana",compressible:!0},"application/vnd.nokia.isds-radio-presets":{source:"iana"},"application/vnd.nokia.landmark+wbxml":{source:"iana"},"application/vnd.nokia.landmark+xml":{source:"iana",compressible:!0},"application/vnd.nokia.landmarkcollection+xml":{source:"iana",compressible:!0},"application/vnd.nokia.n-gage.ac+xml":{source:"iana",compressible:!0,extensions:["ac"]},"application/vnd.nokia.n-gage.data":{source:"iana",extensions:["ngdat"]},"application/vnd.nokia.n-gage.symbian.install":{source:"iana",extensions:["n-gage"]},"application/vnd.nokia.ncd":{source:"iana"},"application/vnd.nokia.pcd+wbxml":{source:"iana"},"application/vnd.nokia.pcd+xml":{source:"iana",compressible:!0},"application/vnd.nokia.radio-preset":{source:"iana",extensions:["rpst"]},"application/vnd.nokia.radio-presets":{source:"iana",extensions:["rpss"]},"application/vnd.novadigm.edm":{source:"iana",extensions:["edm"]},"application/vnd.novadigm.edx":{source:"iana",extensions:["edx"]},"application/vnd.novadigm.ext":{source:"iana",extensions:["ext"]},"application/vnd.ntt-local.content-share":{source:"iana"},"application/vnd.ntt-local.file-transfer":{source:"iana"},"application/vnd.ntt-local.ogw_remote-access":{source:"iana"},"application/vnd.ntt-local.sip-ta_remote":{source:"iana"},"application/vnd.ntt-local.sip-ta_tcp_stream":{source:"iana"},"application/vnd.oasis.opendocument.chart":{source:"iana",extensions:["odc"]},"application/vnd.oasis.opendocument.chart-template":{source:"iana",extensions:["otc"]},"application/vnd.oasis.opendocument.database":{source:"iana",extensions:["odb"]},"application/vnd.oasis.opendocument.formula":{source:"iana",extensions:["odf"]},"application/vnd.oasis.opendocument.formula-template":{source:"iana",extensions:["odft"]},"application/vnd.oasis.opendocument.graphics":{source:"iana",compressible:!1,extensions:["odg"]},"application/vnd.oasis.opendocument.graphics-template":{source:"iana",extensions:["otg"]},"application/vnd.oasis.opendocument.image":{source:"iana",extensions:["odi"]},"application/vnd.oasis.opendocument.image-template":{source:"iana",extensions:["oti"]},"application/vnd.oasis.opendocument.presentation":{source:"iana",compressible:!1,extensions:["odp"]},"application/vnd.oasis.opendocument.presentation-template":{source:"iana",extensions:["otp"]},"application/vnd.oasis.opendocument.spreadsheet":{source:"iana",compressible:!1,extensions:["ods"]},"application/vnd.oasis.opendocument.spreadsheet-template":{source:"iana",extensions:["ots"]},"application/vnd.oasis.opendocument.text":{source:"iana",compressible:!1,extensions:["odt"]},"application/vnd.oasis.opendocument.text-master":{source:"iana",extensions:["odm"]},"application/vnd.oasis.opendocument.text-template":{source:"iana",extensions:["ott"]},"application/vnd.oasis.opendocument.text-web":{source:"iana",extensions:["oth"]},"application/vnd.obn":{source:"iana"},"application/vnd.ocf+cbor":{source:"iana"},"application/vnd.oci.image.manifest.v1+json":{source:"iana",compressible:!0},"application/vnd.oftn.l10n+json":{source:"iana",compressible:!0},"application/vnd.oipf.contentaccessdownload+xml":{source:"iana",compressible:!0},"application/vnd.oipf.contentaccessstreaming+xml":{source:"iana",compressible:!0},"application/vnd.oipf.cspg-hexbinary":{source:"iana"},"application/vnd.oipf.dae.svg+xml":{source:"iana",compressible:!0},"application/vnd.oipf.dae.xhtml+xml":{source:"iana",compressible:!0},"application/vnd.oipf.mippvcontrolmessage+xml":{source:"iana",compressible:!0},"application/vnd.oipf.pae.gem":{source:"iana"},"application/vnd.oipf.spdiscovery+xml":{source:"iana",compressible:!0},"application/vnd.oipf.spdlist+xml":{source:"iana",compressible:!0},"application/vnd.oipf.ueprofile+xml":{source:"iana",compressible:!0},"application/vnd.oipf.userprofile+xml":{source:"iana",compressible:!0},"application/vnd.olpc-sugar":{source:"iana",extensions:["xo"]},"application/vnd.oma-scws-config":{source:"iana"},"application/vnd.oma-scws-http-request":{source:"iana"},"application/vnd.oma-scws-http-response":{source:"iana"},"application/vnd.oma.bcast.associated-procedure-parameter+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.drm-trigger+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.imd+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.ltkm":{source:"iana"},"application/vnd.oma.bcast.notification+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.provisioningtrigger":{source:"iana"},"application/vnd.oma.bcast.sgboot":{source:"iana"},"application/vnd.oma.bcast.sgdd+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.sgdu":{source:"iana"},"application/vnd.oma.bcast.simple-symbol-container":{source:"iana"},"application/vnd.oma.bcast.smartcard-trigger+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.sprov+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.stkm":{source:"iana"},"application/vnd.oma.cab-address-book+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-feature-handler+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-pcc+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-subs-invite+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-user-prefs+xml":{source:"iana",compressible:!0},"application/vnd.oma.dcd":{source:"iana"},"application/vnd.oma.dcdc":{source:"iana"},"application/vnd.oma.dd2+xml":{source:"iana",compressible:!0,extensions:["dd2"]},"application/vnd.oma.drm.risd+xml":{source:"iana",compressible:!0},"application/vnd.oma.group-usage-list+xml":{source:"iana",compressible:!0},"application/vnd.oma.lwm2m+cbor":{source:"iana"},"application/vnd.oma.lwm2m+json":{source:"iana",compressible:!0},"application/vnd.oma.lwm2m+tlv":{source:"iana"},"application/vnd.oma.pal+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.detailed-progress-report+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.final-report+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.groups+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.invocation-descriptor+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.optimized-progress-report+xml":{source:"iana",compressible:!0},"application/vnd.oma.push":{source:"iana"},"application/vnd.oma.scidm.messages+xml":{source:"iana",compressible:!0},"application/vnd.oma.xcap-directory+xml":{source:"iana",compressible:!0},"application/vnd.omads-email+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.omads-file+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.omads-folder+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.omaloc-supl-init":{source:"iana"},"application/vnd.onepager":{source:"iana"},"application/vnd.onepagertamp":{source:"iana"},"application/vnd.onepagertamx":{source:"iana"},"application/vnd.onepagertat":{source:"iana"},"application/vnd.onepagertatp":{source:"iana"},"application/vnd.onepagertatx":{source:"iana"},"application/vnd.openblox.game+xml":{source:"iana",compressible:!0,extensions:["obgx"]},"application/vnd.openblox.game-binary":{source:"iana"},"application/vnd.openeye.oeb":{source:"iana"},"application/vnd.openofficeorg.extension":{source:"apache",extensions:["oxt"]},"application/vnd.openstreetmap.data+xml":{source:"iana",compressible:!0,extensions:["osm"]},"application/vnd.opentimestamps.ots":{source:"iana"},"application/vnd.openxmlformats-officedocument.custom-properties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.customxmlproperties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawing+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.chart+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramcolors+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramdata+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramlayout+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramstyle+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.extended-properties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.commentauthors+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.comments+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.handoutmaster+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.notesmaster+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.notesslide+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.presentation":{source:"iana",compressible:!1,extensions:["pptx"]},"application/vnd.openxmlformats-officedocument.presentationml.presentation.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.presprops+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slide":{source:"iana",extensions:["sldx"]},"application/vnd.openxmlformats-officedocument.presentationml.slide+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slidelayout+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slidemaster+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slideshow":{source:"iana",extensions:["ppsx"]},"application/vnd.openxmlformats-officedocument.presentationml.slideshow.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slideupdateinfo+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.tablestyles+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.tags+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.template":{source:"iana",extensions:["potx"]},"application/vnd.openxmlformats-officedocument.presentationml.template.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.viewprops+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.calcchain+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.externallink+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcachedefinition+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcacherecords+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivottable+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.querytable+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionheaders+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionlog+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedstrings+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":{source:"iana",compressible:!1,extensions:["xlsx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetmetadata+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.tablesinglecells+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.template":{source:"iana",extensions:["xltx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.usernames+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.volatiledependencies+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.theme+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.themeoverride+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.vmldrawing":{source:"iana"},"application/vnd.openxmlformats-officedocument.wordprocessingml.comments+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.document":{source:"iana",compressible:!1,extensions:["docx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.document.glossary+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.document.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.endnotes+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.fonttable+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.footer+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.footnotes+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.numbering+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.settings+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.styles+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.template":{source:"iana",extensions:["dotx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.template.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.websettings+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-package.core-properties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-package.digital-signature-xmlsignature+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-package.relationships+xml":{source:"iana",compressible:!0},"application/vnd.oracle.resource+json":{source:"iana",compressible:!0},"application/vnd.orange.indata":{source:"iana"},"application/vnd.osa.netdeploy":{source:"iana"},"application/vnd.osgeo.mapguide.package":{source:"iana",extensions:["mgp"]},"application/vnd.osgi.bundle":{source:"iana"},"application/vnd.osgi.dp":{source:"iana",extensions:["dp"]},"application/vnd.osgi.subsystem":{source:"iana",extensions:["esa"]},"application/vnd.otps.ct-kip+xml":{source:"iana",compressible:!0},"application/vnd.oxli.countgraph":{source:"iana"},"application/vnd.pagerduty+json":{source:"iana",compressible:!0},"application/vnd.palm":{source:"iana",extensions:["pdb","pqa","oprc"]},"application/vnd.panoply":{source:"iana"},"application/vnd.paos.xml":{source:"iana"},"application/vnd.patentdive":{source:"iana"},"application/vnd.patientecommsdoc":{source:"iana"},"application/vnd.pawaafile":{source:"iana",extensions:["paw"]},"application/vnd.pcos":{source:"iana"},"application/vnd.pg.format":{source:"iana",extensions:["str"]},"application/vnd.pg.osasli":{source:"iana",extensions:["ei6"]},"application/vnd.piaccess.application-licence":{source:"iana"},"application/vnd.picsel":{source:"iana",extensions:["efif"]},"application/vnd.pmi.widget":{source:"iana",extensions:["wg"]},"application/vnd.poc.group-advertisement+xml":{source:"iana",compressible:!0},"application/vnd.pocketlearn":{source:"iana",extensions:["plf"]},"application/vnd.powerbuilder6":{source:"iana",extensions:["pbd"]},"application/vnd.powerbuilder6-s":{source:"iana"},"application/vnd.powerbuilder7":{source:"iana"},"application/vnd.powerbuilder7-s":{source:"iana"},"application/vnd.powerbuilder75":{source:"iana"},"application/vnd.powerbuilder75-s":{source:"iana"},"application/vnd.preminet":{source:"iana"},"application/vnd.previewsystems.box":{source:"iana",extensions:["box"]},"application/vnd.proteus.magazine":{source:"iana",extensions:["mgz"]},"application/vnd.psfs":{source:"iana"},"application/vnd.publishare-delta-tree":{source:"iana",extensions:["qps"]},"application/vnd.pvi.ptid1":{source:"iana",extensions:["ptid"]},"application/vnd.pwg-multiplexed":{source:"iana"},"application/vnd.pwg-xhtml-print+xml":{source:"iana",compressible:!0},"application/vnd.qualcomm.brew-app-res":{source:"iana"},"application/vnd.quarantainenet":{source:"iana"},"application/vnd.quark.quarkxpress":{source:"iana",extensions:["qxd","qxt","qwd","qwt","qxl","qxb"]},"application/vnd.quobject-quoxdocument":{source:"iana"},"application/vnd.radisys.moml+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-conf+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-conn+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-dialog+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-stream+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-conf+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-base+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-fax-detect+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-fax-sendrecv+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-group+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-speech+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-transform+xml":{source:"iana",compressible:!0},"application/vnd.rainstor.data":{source:"iana"},"application/vnd.rapid":{source:"iana"},"application/vnd.rar":{source:"iana",extensions:["rar"]},"application/vnd.realvnc.bed":{source:"iana",extensions:["bed"]},"application/vnd.recordare.musicxml":{source:"iana",extensions:["mxl"]},"application/vnd.recordare.musicxml+xml":{source:"iana",compressible:!0,extensions:["musicxml"]},"application/vnd.renlearn.rlprint":{source:"iana"},"application/vnd.resilient.logic":{source:"iana"},"application/vnd.restful+json":{source:"iana",compressible:!0},"application/vnd.rig.cryptonote":{source:"iana",extensions:["cryptonote"]},"application/vnd.rim.cod":{source:"apache",extensions:["cod"]},"application/vnd.rn-realmedia":{source:"apache",extensions:["rm"]},"application/vnd.rn-realmedia-vbr":{source:"apache",extensions:["rmvb"]},"application/vnd.route66.link66+xml":{source:"iana",compressible:!0,extensions:["link66"]},"application/vnd.rs-274x":{source:"iana"},"application/vnd.ruckus.download":{source:"iana"},"application/vnd.s3sms":{source:"iana"},"application/vnd.sailingtracker.track":{source:"iana",extensions:["st"]},"application/vnd.sar":{source:"iana"},"application/vnd.sbm.cid":{source:"iana"},"application/vnd.sbm.mid2":{source:"iana"},"application/vnd.scribus":{source:"iana"},"application/vnd.sealed.3df":{source:"iana"},"application/vnd.sealed.csf":{source:"iana"},"application/vnd.sealed.doc":{source:"iana"},"application/vnd.sealed.eml":{source:"iana"},"application/vnd.sealed.mht":{source:"iana"},"application/vnd.sealed.net":{source:"iana"},"application/vnd.sealed.ppt":{source:"iana"},"application/vnd.sealed.tiff":{source:"iana"},"application/vnd.sealed.xls":{source:"iana"},"application/vnd.sealedmedia.softseal.html":{source:"iana"},"application/vnd.sealedmedia.softseal.pdf":{source:"iana"},"application/vnd.seemail":{source:"iana",extensions:["see"]},"application/vnd.seis+json":{source:"iana",compressible:!0},"application/vnd.sema":{source:"iana",extensions:["sema"]},"application/vnd.semd":{source:"iana",extensions:["semd"]},"application/vnd.semf":{source:"iana",extensions:["semf"]},"application/vnd.shade-save-file":{source:"iana"},"application/vnd.shana.informed.formdata":{source:"iana",extensions:["ifm"]},"application/vnd.shana.informed.formtemplate":{source:"iana",extensions:["itp"]},"application/vnd.shana.informed.interchange":{source:"iana",extensions:["iif"]},"application/vnd.shana.informed.package":{source:"iana",extensions:["ipk"]},"application/vnd.shootproof+json":{source:"iana",compressible:!0},"application/vnd.shopkick+json":{source:"iana",compressible:!0},"application/vnd.shp":{source:"iana"},"application/vnd.shx":{source:"iana"},"application/vnd.sigrok.session":{source:"iana"},"application/vnd.simtech-mindmapper":{source:"iana",extensions:["twd","twds"]},"application/vnd.siren+json":{source:"iana",compressible:!0},"application/vnd.smaf":{source:"iana",extensions:["mmf"]},"application/vnd.smart.notebook":{source:"iana"},"application/vnd.smart.teacher":{source:"iana",extensions:["teacher"]},"application/vnd.snesdev-page-table":{source:"iana"},"application/vnd.software602.filler.form+xml":{source:"iana",compressible:!0,extensions:["fo"]},"application/vnd.software602.filler.form-xml-zip":{source:"iana"},"application/vnd.solent.sdkm+xml":{source:"iana",compressible:!0,extensions:["sdkm","sdkd"]},"application/vnd.spotfire.dxp":{source:"iana",extensions:["dxp"]},"application/vnd.spotfire.sfs":{source:"iana",extensions:["sfs"]},"application/vnd.sqlite3":{source:"iana"},"application/vnd.sss-cod":{source:"iana"},"application/vnd.sss-dtf":{source:"iana"},"application/vnd.sss-ntf":{source:"iana"},"application/vnd.stardivision.calc":{source:"apache",extensions:["sdc"]},"application/vnd.stardivision.draw":{source:"apache",extensions:["sda"]},"application/vnd.stardivision.impress":{source:"apache",extensions:["sdd"]},"application/vnd.stardivision.math":{source:"apache",extensions:["smf"]},"application/vnd.stardivision.writer":{source:"apache",extensions:["sdw","vor"]},"application/vnd.stardivision.writer-global":{source:"apache",extensions:["sgl"]},"application/vnd.stepmania.package":{source:"iana",extensions:["smzip"]},"application/vnd.stepmania.stepchart":{source:"iana",extensions:["sm"]},"application/vnd.street-stream":{source:"iana"},"application/vnd.sun.wadl+xml":{source:"iana",compressible:!0,extensions:["wadl"]},"application/vnd.sun.xml.calc":{source:"apache",extensions:["sxc"]},"application/vnd.sun.xml.calc.template":{source:"apache",extensions:["stc"]},"application/vnd.sun.xml.draw":{source:"apache",extensions:["sxd"]},"application/vnd.sun.xml.draw.template":{source:"apache",extensions:["std"]},"application/vnd.sun.xml.impress":{source:"apache",extensions:["sxi"]},"application/vnd.sun.xml.impress.template":{source:"apache",extensions:["sti"]},"application/vnd.sun.xml.math":{source:"apache",extensions:["sxm"]},"application/vnd.sun.xml.writer":{source:"apache",extensions:["sxw"]},"application/vnd.sun.xml.writer.global":{source:"apache",extensions:["sxg"]},"application/vnd.sun.xml.writer.template":{source:"apache",extensions:["stw"]},"application/vnd.sus-calendar":{source:"iana",extensions:["sus","susp"]},"application/vnd.svd":{source:"iana",extensions:["svd"]},"application/vnd.swiftview-ics":{source:"iana"},"application/vnd.sycle+xml":{source:"iana",compressible:!0},"application/vnd.syft+json":{source:"iana",compressible:!0},"application/vnd.symbian.install":{source:"apache",extensions:["sis","sisx"]},"application/vnd.syncml+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["xsm"]},"application/vnd.syncml.dm+wbxml":{source:"iana",charset:"UTF-8",extensions:["bdm"]},"application/vnd.syncml.dm+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["xdm"]},"application/vnd.syncml.dm.notification":{source:"iana"},"application/vnd.syncml.dmddf+wbxml":{source:"iana"},"application/vnd.syncml.dmddf+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["ddf"]},"application/vnd.syncml.dmtnds+wbxml":{source:"iana"},"application/vnd.syncml.dmtnds+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.syncml.ds.notification":{source:"iana"},"application/vnd.tableschema+json":{source:"iana",compressible:!0},"application/vnd.tao.intent-module-archive":{source:"iana",extensions:["tao"]},"application/vnd.tcpdump.pcap":{source:"iana",extensions:["pcap","cap","dmp"]},"application/vnd.think-cell.ppttc+json":{source:"iana",compressible:!0},"application/vnd.tmd.mediaflex.api+xml":{source:"iana",compressible:!0},"application/vnd.tml":{source:"iana"},"application/vnd.tmobile-livetv":{source:"iana",extensions:["tmo"]},"application/vnd.tri.onesource":{source:"iana"},"application/vnd.trid.tpt":{source:"iana",extensions:["tpt"]},"application/vnd.triscape.mxs":{source:"iana",extensions:["mxs"]},"application/vnd.trueapp":{source:"iana",extensions:["tra"]},"application/vnd.truedoc":{source:"iana"},"application/vnd.ubisoft.webplayer":{source:"iana"},"application/vnd.ufdl":{source:"iana",extensions:["ufd","ufdl"]},"application/vnd.uiq.theme":{source:"iana",extensions:["utz"]},"application/vnd.umajin":{source:"iana",extensions:["umj"]},"application/vnd.unity":{source:"iana",extensions:["unityweb"]},"application/vnd.uoml+xml":{source:"iana",compressible:!0,extensions:["uoml"]},"application/vnd.uplanet.alert":{source:"iana"},"application/vnd.uplanet.alert-wbxml":{source:"iana"},"application/vnd.uplanet.bearer-choice":{source:"iana"},"application/vnd.uplanet.bearer-choice-wbxml":{source:"iana"},"application/vnd.uplanet.cacheop":{source:"iana"},"application/vnd.uplanet.cacheop-wbxml":{source:"iana"},"application/vnd.uplanet.channel":{source:"iana"},"application/vnd.uplanet.channel-wbxml":{source:"iana"},"application/vnd.uplanet.list":{source:"iana"},"application/vnd.uplanet.list-wbxml":{source:"iana"},"application/vnd.uplanet.listcmd":{source:"iana"},"application/vnd.uplanet.listcmd-wbxml":{source:"iana"},"application/vnd.uplanet.signal":{source:"iana"},"application/vnd.uri-map":{source:"iana"},"application/vnd.valve.source.material":{source:"iana"},"application/vnd.vcx":{source:"iana",extensions:["vcx"]},"application/vnd.vd-study":{source:"iana"},"application/vnd.vectorworks":{source:"iana"},"application/vnd.vel+json":{source:"iana",compressible:!0},"application/vnd.verimatrix.vcas":{source:"iana"},"application/vnd.veritone.aion+json":{source:"iana",compressible:!0},"application/vnd.veryant.thin":{source:"iana"},"application/vnd.ves.encrypted":{source:"iana"},"application/vnd.vidsoft.vidconference":{source:"iana"},"application/vnd.visio":{source:"iana",extensions:["vsd","vst","vss","vsw"]},"application/vnd.visionary":{source:"iana",extensions:["vis"]},"application/vnd.vividence.scriptfile":{source:"iana"},"application/vnd.vsf":{source:"iana",extensions:["vsf"]},"application/vnd.wap.sic":{source:"iana"},"application/vnd.wap.slc":{source:"iana"},"application/vnd.wap.wbxml":{source:"iana",charset:"UTF-8",extensions:["wbxml"]},"application/vnd.wap.wmlc":{source:"iana",extensions:["wmlc"]},"application/vnd.wap.wmlscriptc":{source:"iana",extensions:["wmlsc"]},"application/vnd.webturbo":{source:"iana",extensions:["wtb"]},"application/vnd.wfa.dpp":{source:"iana"},"application/vnd.wfa.p2p":{source:"iana"},"application/vnd.wfa.wsc":{source:"iana"},"application/vnd.windows.devicepairing":{source:"iana"},"application/vnd.wmc":{source:"iana"},"application/vnd.wmf.bootstrap":{source:"iana"},"application/vnd.wolfram.mathematica":{source:"iana"},"application/vnd.wolfram.mathematica.package":{source:"iana"},"application/vnd.wolfram.player":{source:"iana",extensions:["nbp"]},"application/vnd.wordperfect":{source:"iana",extensions:["wpd"]},"application/vnd.wqd":{source:"iana",extensions:["wqd"]},"application/vnd.wrq-hp3000-labelled":{source:"iana"},"application/vnd.wt.stf":{source:"iana",extensions:["stf"]},"application/vnd.wv.csp+wbxml":{source:"iana"},"application/vnd.wv.csp+xml":{source:"iana",compressible:!0},"application/vnd.wv.ssp+xml":{source:"iana",compressible:!0},"application/vnd.xacml+json":{source:"iana",compressible:!0},"application/vnd.xara":{source:"iana",extensions:["xar"]},"application/vnd.xfdl":{source:"iana",extensions:["xfdl"]},"application/vnd.xfdl.webform":{source:"iana"},"application/vnd.xmi+xml":{source:"iana",compressible:!0},"application/vnd.xmpie.cpkg":{source:"iana"},"application/vnd.xmpie.dpkg":{source:"iana"},"application/vnd.xmpie.plan":{source:"iana"},"application/vnd.xmpie.ppkg":{source:"iana"},"application/vnd.xmpie.xlim":{source:"iana"},"application/vnd.yamaha.hv-dic":{source:"iana",extensions:["hvd"]},"application/vnd.yamaha.hv-script":{source:"iana",extensions:["hvs"]},"application/vnd.yamaha.hv-voice":{source:"iana",extensions:["hvp"]},"application/vnd.yamaha.openscoreformat":{source:"iana",extensions:["osf"]},"application/vnd.yamaha.openscoreformat.osfpvg+xml":{source:"iana",compressible:!0,extensions:["osfpvg"]},"application/vnd.yamaha.remote-setup":{source:"iana"},"application/vnd.yamaha.smaf-audio":{source:"iana",extensions:["saf"]},"application/vnd.yamaha.smaf-phrase":{source:"iana",extensions:["spf"]},"application/vnd.yamaha.through-ngn":{source:"iana"},"application/vnd.yamaha.tunnel-udpencap":{source:"iana"},"application/vnd.yaoweme":{source:"iana"},"application/vnd.yellowriver-custom-menu":{source:"iana",extensions:["cmp"]},"application/vnd.youtube.yt":{source:"iana"},"application/vnd.zul":{source:"iana",extensions:["zir","zirz"]},"application/vnd.zzazz.deck+xml":{source:"iana",compressible:!0,extensions:["zaz"]},"application/voicexml+xml":{source:"iana",compressible:!0,extensions:["vxml"]},"application/voucher-cms+json":{source:"iana",compressible:!0},"application/vq-rtcpxr":{source:"iana"},"application/wasm":{source:"iana",compressible:!0,extensions:["wasm"]},"application/watcherinfo+xml":{source:"iana",compressible:!0,extensions:["wif"]},"application/webpush-options+json":{source:"iana",compressible:!0},"application/whoispp-query":{source:"iana"},"application/whoispp-response":{source:"iana"},"application/widget":{source:"iana",extensions:["wgt"]},"application/winhlp":{source:"apache",extensions:["hlp"]},"application/wita":{source:"iana"},"application/wordperfect5.1":{source:"iana"},"application/wsdl+xml":{source:"iana",compressible:!0,extensions:["wsdl"]},"application/wspolicy+xml":{source:"iana",compressible:!0,extensions:["wspolicy"]},"application/x-7z-compressed":{source:"apache",compressible:!1,extensions:["7z"]},"application/x-abiword":{source:"apache",extensions:["abw"]},"application/x-ace-compressed":{source:"apache",extensions:["ace"]},"application/x-amf":{source:"apache"},"application/x-apple-diskimage":{source:"apache",extensions:["dmg"]},"application/x-arj":{compressible:!1,extensions:["arj"]},"application/x-authorware-bin":{source:"apache",extensions:["aab","x32","u32","vox"]},"application/x-authorware-map":{source:"apache",extensions:["aam"]},"application/x-authorware-seg":{source:"apache",extensions:["aas"]},"application/x-bcpio":{source:"apache",extensions:["bcpio"]},"application/x-bdoc":{compressible:!1,extensions:["bdoc"]},"application/x-bittorrent":{source:"apache",extensions:["torrent"]},"application/x-blorb":{source:"apache",extensions:["blb","blorb"]},"application/x-bzip":{source:"apache",compressible:!1,extensions:["bz"]},"application/x-bzip2":{source:"apache",compressible:!1,extensions:["bz2","boz"]},"application/x-cbr":{source:"apache",extensions:["cbr","cba","cbt","cbz","cb7"]},"application/x-cdlink":{source:"apache",extensions:["vcd"]},"application/x-cfs-compressed":{source:"apache",extensions:["cfs"]},"application/x-chat":{source:"apache",extensions:["chat"]},"application/x-chess-pgn":{source:"apache",extensions:["pgn"]},"application/x-chrome-extension":{extensions:["crx"]},"application/x-cocoa":{source:"nginx",extensions:["cco"]},"application/x-compress":{source:"apache"},"application/x-conference":{source:"apache",extensions:["nsc"]},"application/x-cpio":{source:"apache",extensions:["cpio"]},"application/x-csh":{source:"apache",extensions:["csh"]},"application/x-deb":{compressible:!1},"application/x-debian-package":{source:"apache",extensions:["deb","udeb"]},"application/x-dgc-compressed":{source:"apache",extensions:["dgc"]},"application/x-director":{source:"apache",extensions:["dir","dcr","dxr","cst","cct","cxt","w3d","fgd","swa"]},"application/x-doom":{source:"apache",extensions:["wad"]},"application/x-dtbncx+xml":{source:"apache",compressible:!0,extensions:["ncx"]},"application/x-dtbook+xml":{source:"apache",compressible:!0,extensions:["dtb"]},"application/x-dtbresource+xml":{source:"apache",compressible:!0,extensions:["res"]},"application/x-dvi":{source:"apache",compressible:!1,extensions:["dvi"]},"application/x-envoy":{source:"apache",extensions:["evy"]},"application/x-eva":{source:"apache",extensions:["eva"]},"application/x-font-bdf":{source:"apache",extensions:["bdf"]},"application/x-font-dos":{source:"apache"},"application/x-font-framemaker":{source:"apache"},"application/x-font-ghostscript":{source:"apache",extensions:["gsf"]},"application/x-font-libgrx":{source:"apache"},"application/x-font-linux-psf":{source:"apache",extensions:["psf"]},"application/x-font-pcf":{source:"apache",extensions:["pcf"]},"application/x-font-snf":{source:"apache",extensions:["snf"]},"application/x-font-speedo":{source:"apache"},"application/x-font-sunos-news":{source:"apache"},"application/x-font-type1":{source:"apache",extensions:["pfa","pfb","pfm","afm"]},"application/x-font-vfont":{source:"apache"},"application/x-freearc":{source:"apache",extensions:["arc"]},"application/x-futuresplash":{source:"apache",extensions:["spl"]},"application/x-gca-compressed":{source:"apache",extensions:["gca"]},"application/x-glulx":{source:"apache",extensions:["ulx"]},"application/x-gnumeric":{source:"apache",extensions:["gnumeric"]},"application/x-gramps-xml":{source:"apache",extensions:["gramps"]},"application/x-gtar":{source:"apache",extensions:["gtar"]},"application/x-gzip":{source:"apache"},"application/x-hdf":{source:"apache",extensions:["hdf"]},"application/x-httpd-php":{compressible:!0,extensions:["php"]},"application/x-install-instructions":{source:"apache",extensions:["install"]},"application/x-iso9660-image":{source:"apache",extensions:["iso"]},"application/x-iwork-keynote-sffkey":{extensions:["key"]},"application/x-iwork-numbers-sffnumbers":{extensions:["numbers"]},"application/x-iwork-pages-sffpages":{extensions:["pages"]},"application/x-java-archive-diff":{source:"nginx",extensions:["jardiff"]},"application/x-java-jnlp-file":{source:"apache",compressible:!1,extensions:["jnlp"]},"application/x-javascript":{compressible:!0},"application/x-keepass2":{extensions:["kdbx"]},"application/x-latex":{source:"apache",compressible:!1,extensions:["latex"]},"application/x-lua-bytecode":{extensions:["luac"]},"application/x-lzh-compressed":{source:"apache",extensions:["lzh","lha"]},"application/x-makeself":{source:"nginx",extensions:["run"]},"application/x-mie":{source:"apache",extensions:["mie"]},"application/x-mobipocket-ebook":{source:"apache",extensions:["prc","mobi"]},"application/x-mpegurl":{compressible:!1},"application/x-ms-application":{source:"apache",extensions:["application"]},"application/x-ms-shortcut":{source:"apache",extensions:["lnk"]},"application/x-ms-wmd":{source:"apache",extensions:["wmd"]},"application/x-ms-wmz":{source:"apache",extensions:["wmz"]},"application/x-ms-xbap":{source:"apache",extensions:["xbap"]},"application/x-msaccess":{source:"apache",extensions:["mdb"]},"application/x-msbinder":{source:"apache",extensions:["obd"]},"application/x-mscardfile":{source:"apache",extensions:["crd"]},"application/x-msclip":{source:"apache",extensions:["clp"]},"application/x-msdos-program":{extensions:["exe"]},"application/x-msdownload":{source:"apache",extensions:["exe","dll","com","bat","msi"]},"application/x-msmediaview":{source:"apache",extensions:["mvb","m13","m14"]},"application/x-msmetafile":{source:"apache",extensions:["wmf","wmz","emf","emz"]},"application/x-msmoney":{source:"apache",extensions:["mny"]},"application/x-mspublisher":{source:"apache",extensions:["pub"]},"application/x-msschedule":{source:"apache",extensions:["scd"]},"application/x-msterminal":{source:"apache",extensions:["trm"]},"application/x-mswrite":{source:"apache",extensions:["wri"]},"application/x-netcdf":{source:"apache",extensions:["nc","cdf"]},"application/x-ns-proxy-autoconfig":{compressible:!0,extensions:["pac"]},"application/x-nzb":{source:"apache",extensions:["nzb"]},"application/x-perl":{source:"nginx",extensions:["pl","pm"]},"application/x-pilot":{source:"nginx",extensions:["prc","pdb"]},"application/x-pkcs12":{source:"apache",compressible:!1,extensions:["p12","pfx"]},"application/x-pkcs7-certificates":{source:"apache",extensions:["p7b","spc"]},"application/x-pkcs7-certreqresp":{source:"apache",extensions:["p7r"]},"application/x-pki-message":{source:"iana"},"application/x-rar-compressed":{source:"apache",compressible:!1,extensions:["rar"]},"application/x-redhat-package-manager":{source:"nginx",extensions:["rpm"]},"application/x-research-info-systems":{source:"apache",extensions:["ris"]},"application/x-sea":{source:"nginx",extensions:["sea"]},"application/x-sh":{source:"apache",compressible:!0,extensions:["sh"]},"application/x-shar":{source:"apache",extensions:["shar"]},"application/x-shockwave-flash":{source:"apache",compressible:!1,extensions:["swf"]},"application/x-silverlight-app":{source:"apache",extensions:["xap"]},"application/x-sql":{source:"apache",extensions:["sql"]},"application/x-stuffit":{source:"apache",compressible:!1,extensions:["sit"]},"application/x-stuffitx":{source:"apache",extensions:["sitx"]},"application/x-subrip":{source:"apache",extensions:["srt"]},"application/x-sv4cpio":{source:"apache",extensions:["sv4cpio"]},"application/x-sv4crc":{source:"apache",extensions:["sv4crc"]},"application/x-t3vm-image":{source:"apache",extensions:["t3"]},"application/x-tads":{source:"apache",extensions:["gam"]},"application/x-tar":{source:"apache",compressible:!0,extensions:["tar"]},"application/x-tcl":{source:"apache",extensions:["tcl","tk"]},"application/x-tex":{source:"apache",extensions:["tex"]},"application/x-tex-tfm":{source:"apache",extensions:["tfm"]},"application/x-texinfo":{source:"apache",extensions:["texinfo","texi"]},"application/x-tgif":{source:"apache",extensions:["obj"]},"application/x-ustar":{source:"apache",extensions:["ustar"]},"application/x-virtualbox-hdd":{compressible:!0,extensions:["hdd"]},"application/x-virtualbox-ova":{compressible:!0,extensions:["ova"]},"application/x-virtualbox-ovf":{compressible:!0,extensions:["ovf"]},"application/x-virtualbox-vbox":{compressible:!0,extensions:["vbox"]},"application/x-virtualbox-vbox-extpack":{compressible:!1,extensions:["vbox-extpack"]},"application/x-virtualbox-vdi":{compressible:!0,extensions:["vdi"]},"application/x-virtualbox-vhd":{compressible:!0,extensions:["vhd"]},"application/x-virtualbox-vmdk":{compressible:!0,extensions:["vmdk"]},"application/x-wais-source":{source:"apache",extensions:["src"]},"application/x-web-app-manifest+json":{compressible:!0,extensions:["webapp"]},"application/x-www-form-urlencoded":{source:"iana",compressible:!0},"application/x-x509-ca-cert":{source:"iana",extensions:["der","crt","pem"]},"application/x-x509-ca-ra-cert":{source:"iana"},"application/x-x509-next-ca-cert":{source:"iana"},"application/x-xfig":{source:"apache",extensions:["fig"]},"application/x-xliff+xml":{source:"apache",compressible:!0,extensions:["xlf"]},"application/x-xpinstall":{source:"apache",compressible:!1,extensions:["xpi"]},"application/x-xz":{source:"apache",extensions:["xz"]},"application/x-zmachine":{source:"apache",extensions:["z1","z2","z3","z4","z5","z6","z7","z8"]},"application/x400-bp":{source:"iana"},"application/xacml+xml":{source:"iana",compressible:!0},"application/xaml+xml":{source:"apache",compressible:!0,extensions:["xaml"]},"application/xcap-att+xml":{source:"iana",compressible:!0,extensions:["xav"]},"application/xcap-caps+xml":{source:"iana",compressible:!0,extensions:["xca"]},"application/xcap-diff+xml":{source:"iana",compressible:!0,extensions:["xdf"]},"application/xcap-el+xml":{source:"iana",compressible:!0,extensions:["xel"]},"application/xcap-error+xml":{source:"iana",compressible:!0},"application/xcap-ns+xml":{source:"iana",compressible:!0,extensions:["xns"]},"application/xcon-conference-info+xml":{source:"iana",compressible:!0},"application/xcon-conference-info-diff+xml":{source:"iana",compressible:!0},"application/xenc+xml":{source:"iana",compressible:!0,extensions:["xenc"]},"application/xhtml+xml":{source:"iana",compressible:!0,extensions:["xhtml","xht"]},"application/xhtml-voice+xml":{source:"apache",compressible:!0},"application/xliff+xml":{source:"iana",compressible:!0,extensions:["xlf"]},"application/xml":{source:"iana",compressible:!0,extensions:["xml","xsl","xsd","rng"]},"application/xml-dtd":{source:"iana",compressible:!0,extensions:["dtd"]},"application/xml-external-parsed-entity":{source:"iana"},"application/xml-patch+xml":{source:"iana",compressible:!0},"application/xmpp+xml":{source:"iana",compressible:!0},"application/xop+xml":{source:"iana",compressible:!0,extensions:["xop"]},"application/xproc+xml":{source:"apache",compressible:!0,extensions:["xpl"]},"application/xslt+xml":{source:"iana",compressible:!0,extensions:["xsl","xslt"]},"application/xspf+xml":{source:"apache",compressible:!0,extensions:["xspf"]},"application/xv+xml":{source:"iana",compressible:!0,extensions:["mxml","xhvml","xvml","xvm"]},"application/yang":{source:"iana",extensions:["yang"]},"application/yang-data+json":{source:"iana",compressible:!0},"application/yang-data+xml":{source:"iana",compressible:!0},"application/yang-patch+json":{source:"iana",compressible:!0},"application/yang-patch+xml":{source:"iana",compressible:!0},"application/yin+xml":{source:"iana",compressible:!0,extensions:["yin"]},"application/zip":{source:"iana",compressible:!1,extensions:["zip"]},"application/zlib":{source:"iana"},"application/zstd":{source:"iana"},"audio/1d-interleaved-parityfec":{source:"iana"},"audio/32kadpcm":{source:"iana"},"audio/3gpp":{source:"iana",compressible:!1,extensions:["3gpp"]},"audio/3gpp2":{source:"iana"},"audio/aac":{source:"iana"},"audio/ac3":{source:"iana"},"audio/adpcm":{source:"apache",extensions:["adp"]},"audio/amr":{source:"iana",extensions:["amr"]},"audio/amr-wb":{source:"iana"},"audio/amr-wb+":{source:"iana"},"audio/aptx":{source:"iana"},"audio/asc":{source:"iana"},"audio/atrac-advanced-lossless":{source:"iana"},"audio/atrac-x":{source:"iana"},"audio/atrac3":{source:"iana"},"audio/basic":{source:"iana",compressible:!1,extensions:["au","snd"]},"audio/bv16":{source:"iana"},"audio/bv32":{source:"iana"},"audio/clearmode":{source:"iana"},"audio/cn":{source:"iana"},"audio/dat12":{source:"iana"},"audio/dls":{source:"iana"},"audio/dsr-es201108":{source:"iana"},"audio/dsr-es202050":{source:"iana"},"audio/dsr-es202211":{source:"iana"},"audio/dsr-es202212":{source:"iana"},"audio/dv":{source:"iana"},"audio/dvi4":{source:"iana"},"audio/eac3":{source:"iana"},"audio/encaprtp":{source:"iana"},"audio/evrc":{source:"iana"},"audio/evrc-qcp":{source:"iana"},"audio/evrc0":{source:"iana"},"audio/evrc1":{source:"iana"},"audio/evrcb":{source:"iana"},"audio/evrcb0":{source:"iana"},"audio/evrcb1":{source:"iana"},"audio/evrcnw":{source:"iana"},"audio/evrcnw0":{source:"iana"},"audio/evrcnw1":{source:"iana"},"audio/evrcwb":{source:"iana"},"audio/evrcwb0":{source:"iana"},"audio/evrcwb1":{source:"iana"},"audio/evs":{source:"iana"},"audio/flexfec":{source:"iana"},"audio/fwdred":{source:"iana"},"audio/g711-0":{source:"iana"},"audio/g719":{source:"iana"},"audio/g722":{source:"iana"},"audio/g7221":{source:"iana"},"audio/g723":{source:"iana"},"audio/g726-16":{source:"iana"},"audio/g726-24":{source:"iana"},"audio/g726-32":{source:"iana"},"audio/g726-40":{source:"iana"},"audio/g728":{source:"iana"},"audio/g729":{source:"iana"},"audio/g7291":{source:"iana"},"audio/g729d":{source:"iana"},"audio/g729e":{source:"iana"},"audio/gsm":{source:"iana"},"audio/gsm-efr":{source:"iana"},"audio/gsm-hr-08":{source:"iana"},"audio/ilbc":{source:"iana"},"audio/ip-mr_v2.5":{source:"iana"},"audio/isac":{source:"apache"},"audio/l16":{source:"iana"},"audio/l20":{source:"iana"},"audio/l24":{source:"iana",compressible:!1},"audio/l8":{source:"iana"},"audio/lpc":{source:"iana"},"audio/melp":{source:"iana"},"audio/melp1200":{source:"iana"},"audio/melp2400":{source:"iana"},"audio/melp600":{source:"iana"},"audio/mhas":{source:"iana"},"audio/midi":{source:"apache",extensions:["mid","midi","kar","rmi"]},"audio/mobile-xmf":{source:"iana",extensions:["mxmf"]},"audio/mp3":{compressible:!1,extensions:["mp3"]},"audio/mp4":{source:"iana",compressible:!1,extensions:["m4a","mp4a"]},"audio/mp4a-latm":{source:"iana"},"audio/mpa":{source:"iana"},"audio/mpa-robust":{source:"iana"},"audio/mpeg":{source:"iana",compressible:!1,extensions:["mpga","mp2","mp2a","mp3","m2a","m3a"]},"audio/mpeg4-generic":{source:"iana"},"audio/musepack":{source:"apache"},"audio/ogg":{source:"iana",compressible:!1,extensions:["oga","ogg","spx","opus"]},"audio/opus":{source:"iana"},"audio/parityfec":{source:"iana"},"audio/pcma":{source:"iana"},"audio/pcma-wb":{source:"iana"},"audio/pcmu":{source:"iana"},"audio/pcmu-wb":{source:"iana"},"audio/prs.sid":{source:"iana"},"audio/qcelp":{source:"iana"},"audio/raptorfec":{source:"iana"},"audio/red":{source:"iana"},"audio/rtp-enc-aescm128":{source:"iana"},"audio/rtp-midi":{source:"iana"},"audio/rtploopback":{source:"iana"},"audio/rtx":{source:"iana"},"audio/s3m":{source:"apache",extensions:["s3m"]},"audio/scip":{source:"iana"},"audio/silk":{source:"apache",extensions:["sil"]},"audio/smv":{source:"iana"},"audio/smv-qcp":{source:"iana"},"audio/smv0":{source:"iana"},"audio/sofa":{source:"iana"},"audio/sp-midi":{source:"iana"},"audio/speex":{source:"iana"},"audio/t140c":{source:"iana"},"audio/t38":{source:"iana"},"audio/telephone-event":{source:"iana"},"audio/tetra_acelp":{source:"iana"},"audio/tetra_acelp_bb":{source:"iana"},"audio/tone":{source:"iana"},"audio/tsvcis":{source:"iana"},"audio/uemclip":{source:"iana"},"audio/ulpfec":{source:"iana"},"audio/usac":{source:"iana"},"audio/vdvi":{source:"iana"},"audio/vmr-wb":{source:"iana"},"audio/vnd.3gpp.iufp":{source:"iana"},"audio/vnd.4sb":{source:"iana"},"audio/vnd.audiokoz":{source:"iana"},"audio/vnd.celp":{source:"iana"},"audio/vnd.cisco.nse":{source:"iana"},"audio/vnd.cmles.radio-events":{source:"iana"},"audio/vnd.cns.anp1":{source:"iana"},"audio/vnd.cns.inf1":{source:"iana"},"audio/vnd.dece.audio":{source:"iana",extensions:["uva","uvva"]},"audio/vnd.digital-winds":{source:"iana",extensions:["eol"]},"audio/vnd.dlna.adts":{source:"iana"},"audio/vnd.dolby.heaac.1":{source:"iana"},"audio/vnd.dolby.heaac.2":{source:"iana"},"audio/vnd.dolby.mlp":{source:"iana"},"audio/vnd.dolby.mps":{source:"iana"},"audio/vnd.dolby.pl2":{source:"iana"},"audio/vnd.dolby.pl2x":{source:"iana"},"audio/vnd.dolby.pl2z":{source:"iana"},"audio/vnd.dolby.pulse.1":{source:"iana"},"audio/vnd.dra":{source:"iana",extensions:["dra"]},"audio/vnd.dts":{source:"iana",extensions:["dts"]},"audio/vnd.dts.hd":{source:"iana",extensions:["dtshd"]},"audio/vnd.dts.uhd":{source:"iana"},"audio/vnd.dvb.file":{source:"iana"},"audio/vnd.everad.plj":{source:"iana"},"audio/vnd.hns.audio":{source:"iana"},"audio/vnd.lucent.voice":{source:"iana",extensions:["lvp"]},"audio/vnd.ms-playready.media.pya":{source:"iana",extensions:["pya"]},"audio/vnd.nokia.mobile-xmf":{source:"iana"},"audio/vnd.nortel.vbk":{source:"iana"},"audio/vnd.nuera.ecelp4800":{source:"iana",extensions:["ecelp4800"]},"audio/vnd.nuera.ecelp7470":{source:"iana",extensions:["ecelp7470"]},"audio/vnd.nuera.ecelp9600":{source:"iana",extensions:["ecelp9600"]},"audio/vnd.octel.sbc":{source:"iana"},"audio/vnd.presonus.multitrack":{source:"iana"},"audio/vnd.qcelp":{source:"iana"},"audio/vnd.rhetorex.32kadpcm":{source:"iana"},"audio/vnd.rip":{source:"iana",extensions:["rip"]},"audio/vnd.rn-realaudio":{compressible:!1},"audio/vnd.sealedmedia.softseal.mpeg":{source:"iana"},"audio/vnd.vmx.cvsd":{source:"iana"},"audio/vnd.wave":{compressible:!1},"audio/vorbis":{source:"iana",compressible:!1},"audio/vorbis-config":{source:"iana"},"audio/wav":{compressible:!1,extensions:["wav"]},"audio/wave":{compressible:!1,extensions:["wav"]},"audio/webm":{source:"apache",compressible:!1,extensions:["weba"]},"audio/x-aac":{source:"apache",compressible:!1,extensions:["aac"]},"audio/x-aiff":{source:"apache",extensions:["aif","aiff","aifc"]},"audio/x-caf":{source:"apache",compressible:!1,extensions:["caf"]},"audio/x-flac":{source:"apache",extensions:["flac"]},"audio/x-m4a":{source:"nginx",extensions:["m4a"]},"audio/x-matroska":{source:"apache",extensions:["mka"]},"audio/x-mpegurl":{source:"apache",extensions:["m3u"]},"audio/x-ms-wax":{source:"apache",extensions:["wax"]},"audio/x-ms-wma":{source:"apache",extensions:["wma"]},"audio/x-pn-realaudio":{source:"apache",extensions:["ram","ra"]},"audio/x-pn-realaudio-plugin":{source:"apache",extensions:["rmp"]},"audio/x-realaudio":{source:"nginx",extensions:["ra"]},"audio/x-tta":{source:"apache"},"audio/x-wav":{source:"apache",extensions:["wav"]},"audio/xm":{source:"apache",extensions:["xm"]},"chemical/x-cdx":{source:"apache",extensions:["cdx"]},"chemical/x-cif":{source:"apache",extensions:["cif"]},"chemical/x-cmdf":{source:"apache",extensions:["cmdf"]},"chemical/x-cml":{source:"apache",extensions:["cml"]},"chemical/x-csml":{source:"apache",extensions:["csml"]},"chemical/x-pdb":{source:"apache"},"chemical/x-xyz":{source:"apache",extensions:["xyz"]},"font/collection":{source:"iana",extensions:["ttc"]},"font/otf":{source:"iana",compressible:!0,extensions:["otf"]},"font/sfnt":{source:"iana"},"font/ttf":{source:"iana",compressible:!0,extensions:["ttf"]},"font/woff":{source:"iana",extensions:["woff"]},"font/woff2":{source:"iana",extensions:["woff2"]},"image/aces":{source:"iana",extensions:["exr"]},"image/apng":{compressible:!1,extensions:["apng"]},"image/avci":{source:"iana",extensions:["avci"]},"image/avcs":{source:"iana",extensions:["avcs"]},"image/avif":{source:"iana",compressible:!1,extensions:["avif"]},"image/bmp":{source:"iana",compressible:!0,extensions:["bmp"]},"image/cgm":{source:"iana",extensions:["cgm"]},"image/dicom-rle":{source:"iana",extensions:["drle"]},"image/emf":{source:"iana",extensions:["emf"]},"image/fits":{source:"iana",extensions:["fits"]},"image/g3fax":{source:"iana",extensions:["g3"]},"image/gif":{source:"iana",compressible:!1,extensions:["gif"]},"image/heic":{source:"iana",extensions:["heic"]},"image/heic-sequence":{source:"iana",extensions:["heics"]},"image/heif":{source:"iana",extensions:["heif"]},"image/heif-sequence":{source:"iana",extensions:["heifs"]},"image/hej2k":{source:"iana",extensions:["hej2"]},"image/hsj2":{source:"iana",extensions:["hsj2"]},"image/ief":{source:"iana",extensions:["ief"]},"image/jls":{source:"iana",extensions:["jls"]},"image/jp2":{source:"iana",compressible:!1,extensions:["jp2","jpg2"]},"image/jpeg":{source:"iana",compressible:!1,extensions:["jpeg","jpg","jpe"]},"image/jph":{source:"iana",extensions:["jph"]},"image/jphc":{source:"iana",extensions:["jhc"]},"image/jpm":{source:"iana",compressible:!1,extensions:["jpm"]},"image/jpx":{source:"iana",compressible:!1,extensions:["jpx","jpf"]},"image/jxr":{source:"iana",extensions:["jxr"]},"image/jxra":{source:"iana",extensions:["jxra"]},"image/jxrs":{source:"iana",extensions:["jxrs"]},"image/jxs":{source:"iana",extensions:["jxs"]},"image/jxsc":{source:"iana",extensions:["jxsc"]},"image/jxsi":{source:"iana",extensions:["jxsi"]},"image/jxss":{source:"iana",extensions:["jxss"]},"image/ktx":{source:"iana",extensions:["ktx"]},"image/ktx2":{source:"iana",extensions:["ktx2"]},"image/naplps":{source:"iana"},"image/pjpeg":{compressible:!1},"image/png":{source:"iana",compressible:!1,extensions:["png"]},"image/prs.btif":{source:"iana",extensions:["btif"]},"image/prs.pti":{source:"iana",extensions:["pti"]},"image/pwg-raster":{source:"iana"},"image/sgi":{source:"apache",extensions:["sgi"]},"image/svg+xml":{source:"iana",compressible:!0,extensions:["svg","svgz"]},"image/t38":{source:"iana",extensions:["t38"]},"image/tiff":{source:"iana",compressible:!1,extensions:["tif","tiff"]},"image/tiff-fx":{source:"iana",extensions:["tfx"]},"image/vnd.adobe.photoshop":{source:"iana",compressible:!0,extensions:["psd"]},"image/vnd.airzip.accelerator.azv":{source:"iana",extensions:["azv"]},"image/vnd.cns.inf2":{source:"iana"},"image/vnd.dece.graphic":{source:"iana",extensions:["uvi","uvvi","uvg","uvvg"]},"image/vnd.djvu":{source:"iana",extensions:["djvu","djv"]},"image/vnd.dvb.subtitle":{source:"iana",extensions:["sub"]},"image/vnd.dwg":{source:"iana",extensions:["dwg"]},"image/vnd.dxf":{source:"iana",extensions:["dxf"]},"image/vnd.fastbidsheet":{source:"iana",extensions:["fbs"]},"image/vnd.fpx":{source:"iana",extensions:["fpx"]},"image/vnd.fst":{source:"iana",extensions:["fst"]},"image/vnd.fujixerox.edmics-mmr":{source:"iana",extensions:["mmr"]},"image/vnd.fujixerox.edmics-rlc":{source:"iana",extensions:["rlc"]},"image/vnd.globalgraphics.pgb":{source:"iana"},"image/vnd.microsoft.icon":{source:"iana",compressible:!0,extensions:["ico"]},"image/vnd.mix":{source:"iana"},"image/vnd.mozilla.apng":{source:"iana"},"image/vnd.ms-dds":{compressible:!0,extensions:["dds"]},"image/vnd.ms-modi":{source:"iana",extensions:["mdi"]},"image/vnd.ms-photo":{source:"apache",extensions:["wdp"]},"image/vnd.net-fpx":{source:"iana",extensions:["npx"]},"image/vnd.pco.b16":{source:"iana",extensions:["b16"]},"image/vnd.radiance":{source:"iana"},"image/vnd.sealed.png":{source:"iana"},"image/vnd.sealedmedia.softseal.gif":{source:"iana"},"image/vnd.sealedmedia.softseal.jpg":{source:"iana"},"image/vnd.svf":{source:"iana"},"image/vnd.tencent.tap":{source:"iana",extensions:["tap"]},"image/vnd.valve.source.texture":{source:"iana",extensions:["vtf"]},"image/vnd.wap.wbmp":{source:"iana",extensions:["wbmp"]},"image/vnd.xiff":{source:"iana",extensions:["xif"]},"image/vnd.zbrush.pcx":{source:"iana",extensions:["pcx"]},"image/webp":{source:"apache",extensions:["webp"]},"image/wmf":{source:"iana",extensions:["wmf"]},"image/x-3ds":{source:"apache",extensions:["3ds"]},"image/x-cmu-raster":{source:"apache",extensions:["ras"]},"image/x-cmx":{source:"apache",extensions:["cmx"]},"image/x-freehand":{source:"apache",extensions:["fh","fhc","fh4","fh5","fh7"]},"image/x-icon":{source:"apache",compressible:!0,extensions:["ico"]},"image/x-jng":{source:"nginx",extensions:["jng"]},"image/x-mrsid-image":{source:"apache",extensions:["sid"]},"image/x-ms-bmp":{source:"nginx",compressible:!0,extensions:["bmp"]},"image/x-pcx":{source:"apache",extensions:["pcx"]},"image/x-pict":{source:"apache",extensions:["pic","pct"]},"image/x-portable-anymap":{source:"apache",extensions:["pnm"]},"image/x-portable-bitmap":{source:"apache",extensions:["pbm"]},"image/x-portable-graymap":{source:"apache",extensions:["pgm"]},"image/x-portable-pixmap":{source:"apache",extensions:["ppm"]},"image/x-rgb":{source:"apache",extensions:["rgb"]},"image/x-tga":{source:"apache",extensions:["tga"]},"image/x-xbitmap":{source:"apache",extensions:["xbm"]},"image/x-xcf":{compressible:!1},"image/x-xpixmap":{source:"apache",extensions:["xpm"]},"image/x-xwindowdump":{source:"apache",extensions:["xwd"]},"message/cpim":{source:"iana"},"message/delivery-status":{source:"iana"},"message/disposition-notification":{source:"iana",extensions:["disposition-notification"]},"message/external-body":{source:"iana"},"message/feedback-report":{source:"iana"},"message/global":{source:"iana",extensions:["u8msg"]},"message/global-delivery-status":{source:"iana",extensions:["u8dsn"]},"message/global-disposition-notification":{source:"iana",extensions:["u8mdn"]},"message/global-headers":{source:"iana",extensions:["u8hdr"]},"message/http":{source:"iana",compressible:!1},"message/imdn+xml":{source:"iana",compressible:!0},"message/news":{source:"iana"},"message/partial":{source:"iana",compressible:!1},"message/rfc822":{source:"iana",compressible:!0,extensions:["eml","mime"]},"message/s-http":{source:"iana"},"message/sip":{source:"iana"},"message/sipfrag":{source:"iana"},"message/tracking-status":{source:"iana"},"message/vnd.si.simp":{source:"iana"},"message/vnd.wfa.wsc":{source:"iana",extensions:["wsc"]},"model/3mf":{source:"iana",extensions:["3mf"]},"model/e57":{source:"iana"},"model/gltf+json":{source:"iana",compressible:!0,extensions:["gltf"]},"model/gltf-binary":{source:"iana",compressible:!0,extensions:["glb"]},"model/iges":{source:"iana",compressible:!1,extensions:["igs","iges"]},"model/mesh":{source:"iana",compressible:!1,extensions:["msh","mesh","silo"]},"model/mtl":{source:"iana",extensions:["mtl"]},"model/obj":{source:"iana",extensions:["obj"]},"model/step":{source:"iana"},"model/step+xml":{source:"iana",compressible:!0,extensions:["stpx"]},"model/step+zip":{source:"iana",compressible:!1,extensions:["stpz"]},"model/step-xml+zip":{source:"iana",compressible:!1,extensions:["stpxz"]},"model/stl":{source:"iana",extensions:["stl"]},"model/vnd.collada+xml":{source:"iana",compressible:!0,extensions:["dae"]},"model/vnd.dwf":{source:"iana",extensions:["dwf"]},"model/vnd.flatland.3dml":{source:"iana"},"model/vnd.gdl":{source:"iana",extensions:["gdl"]},"model/vnd.gs-gdl":{source:"apache"},"model/vnd.gs.gdl":{source:"iana"},"model/vnd.gtw":{source:"iana",extensions:["gtw"]},"model/vnd.moml+xml":{source:"iana",compressible:!0},"model/vnd.mts":{source:"iana",extensions:["mts"]},"model/vnd.opengex":{source:"iana",extensions:["ogex"]},"model/vnd.parasolid.transmit.binary":{source:"iana",extensions:["x_b"]},"model/vnd.parasolid.transmit.text":{source:"iana",extensions:["x_t"]},"model/vnd.pytha.pyox":{source:"iana"},"model/vnd.rosette.annotated-data-model":{source:"iana"},"model/vnd.sap.vds":{source:"iana",extensions:["vds"]},"model/vnd.usdz+zip":{source:"iana",compressible:!1,extensions:["usdz"]},"model/vnd.valve.source.compiled-map":{source:"iana",extensions:["bsp"]},"model/vnd.vtu":{source:"iana",extensions:["vtu"]},"model/vrml":{source:"iana",compressible:!1,extensions:["wrl","vrml"]},"model/x3d+binary":{source:"apache",compressible:!1,extensions:["x3db","x3dbz"]},"model/x3d+fastinfoset":{source:"iana",extensions:["x3db"]},"model/x3d+vrml":{source:"apache",compressible:!1,extensions:["x3dv","x3dvz"]},"model/x3d+xml":{source:"iana",compressible:!0,extensions:["x3d","x3dz"]},"model/x3d-vrml":{source:"iana",extensions:["x3dv"]},"multipart/alternative":{source:"iana",compressible:!1},"multipart/appledouble":{source:"iana"},"multipart/byteranges":{source:"iana"},"multipart/digest":{source:"iana"},"multipart/encrypted":{source:"iana",compressible:!1},"multipart/form-data":{source:"iana",compressible:!1},"multipart/header-set":{source:"iana"},"multipart/mixed":{source:"iana"},"multipart/multilingual":{source:"iana"},"multipart/parallel":{source:"iana"},"multipart/related":{source:"iana",compressible:!1},"multipart/report":{source:"iana"},"multipart/signed":{source:"iana",compressible:!1},"multipart/vnd.bint.med-plus":{source:"iana"},"multipart/voice-message":{source:"iana"},"multipart/x-mixed-replace":{source:"iana"},"text/1d-interleaved-parityfec":{source:"iana"},"text/cache-manifest":{source:"iana",compressible:!0,extensions:["appcache","manifest"]},"text/calendar":{source:"iana",extensions:["ics","ifb"]},"text/calender":{compressible:!0},"text/cmd":{compressible:!0},"text/coffeescript":{extensions:["coffee","litcoffee"]},"text/cql":{source:"iana"},"text/cql-expression":{source:"iana"},"text/cql-identifier":{source:"iana"},"text/css":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["css"]},"text/csv":{source:"iana",compressible:!0,extensions:["csv"]},"text/csv-schema":{source:"iana"},"text/directory":{source:"iana"},"text/dns":{source:"iana"},"text/ecmascript":{source:"iana"},"text/encaprtp":{source:"iana"},"text/enriched":{source:"iana"},"text/fhirpath":{source:"iana"},"text/flexfec":{source:"iana"},"text/fwdred":{source:"iana"},"text/gff3":{source:"iana"},"text/grammar-ref-list":{source:"iana"},"text/html":{source:"iana",compressible:!0,extensions:["html","htm","shtml"]},"text/jade":{extensions:["jade"]},"text/javascript":{source:"iana",compressible:!0},"text/jcr-cnd":{source:"iana"},"text/jsx":{compressible:!0,extensions:["jsx"]},"text/less":{compressible:!0,extensions:["less"]},"text/markdown":{source:"iana",compressible:!0,extensions:["markdown","md"]},"text/mathml":{source:"nginx",extensions:["mml"]},"text/mdx":{compressible:!0,extensions:["mdx"]},"text/mizar":{source:"iana"},"text/n3":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["n3"]},"text/parameters":{source:"iana",charset:"UTF-8"},"text/parityfec":{source:"iana"},"text/plain":{source:"iana",compressible:!0,extensions:["txt","text","conf","def","list","log","in","ini"]},"text/provenance-notation":{source:"iana",charset:"UTF-8"},"text/prs.fallenstein.rst":{source:"iana"},"text/prs.lines.tag":{source:"iana",extensions:["dsc"]},"text/prs.prop.logic":{source:"iana"},"text/raptorfec":{source:"iana"},"text/red":{source:"iana"},"text/rfc822-headers":{source:"iana"},"text/richtext":{source:"iana",compressible:!0,extensions:["rtx"]},"text/rtf":{source:"iana",compressible:!0,extensions:["rtf"]},"text/rtp-enc-aescm128":{source:"iana"},"text/rtploopback":{source:"iana"},"text/rtx":{source:"iana"},"text/sgml":{source:"iana",extensions:["sgml","sgm"]},"text/shaclc":{source:"iana"},"text/shex":{source:"iana",extensions:["shex"]},"text/slim":{extensions:["slim","slm"]},"text/spdx":{source:"iana",extensions:["spdx"]},"text/strings":{source:"iana"},"text/stylus":{extensions:["stylus","styl"]},"text/t140":{source:"iana"},"text/tab-separated-values":{source:"iana",compressible:!0,extensions:["tsv"]},"text/troff":{source:"iana",extensions:["t","tr","roff","man","me","ms"]},"text/turtle":{source:"iana",charset:"UTF-8",extensions:["ttl"]},"text/ulpfec":{source:"iana"},"text/uri-list":{source:"iana",compressible:!0,extensions:["uri","uris","urls"]},"text/vcard":{source:"iana",compressible:!0,extensions:["vcard"]},"text/vnd.a":{source:"iana"},"text/vnd.abc":{source:"iana"},"text/vnd.ascii-art":{source:"iana"},"text/vnd.curl":{source:"iana",extensions:["curl"]},"text/vnd.curl.dcurl":{source:"apache",extensions:["dcurl"]},"text/vnd.curl.mcurl":{source:"apache",extensions:["mcurl"]},"text/vnd.curl.scurl":{source:"apache",extensions:["scurl"]},"text/vnd.debian.copyright":{source:"iana",charset:"UTF-8"},"text/vnd.dmclientscript":{source:"iana"},"text/vnd.dvb.subtitle":{source:"iana",extensions:["sub"]},"text/vnd.esmertec.theme-descriptor":{source:"iana",charset:"UTF-8"},"text/vnd.familysearch.gedcom":{source:"iana",extensions:["ged"]},"text/vnd.ficlab.flt":{source:"iana"},"text/vnd.fly":{source:"iana",extensions:["fly"]},"text/vnd.fmi.flexstor":{source:"iana",extensions:["flx"]},"text/vnd.gml":{source:"iana"},"text/vnd.graphviz":{source:"iana",extensions:["gv"]},"text/vnd.hans":{source:"iana"},"text/vnd.hgl":{source:"iana"},"text/vnd.in3d.3dml":{source:"iana",extensions:["3dml"]},"text/vnd.in3d.spot":{source:"iana",extensions:["spot"]},"text/vnd.iptc.newsml":{source:"iana"},"text/vnd.iptc.nitf":{source:"iana"},"text/vnd.latex-z":{source:"iana"},"text/vnd.motorola.reflex":{source:"iana"},"text/vnd.ms-mediapackage":{source:"iana"},"text/vnd.net2phone.commcenter.command":{source:"iana"},"text/vnd.radisys.msml-basic-layout":{source:"iana"},"text/vnd.senx.warpscript":{source:"iana"},"text/vnd.si.uricatalogue":{source:"iana"},"text/vnd.sosi":{source:"iana"},"text/vnd.sun.j2me.app-descriptor":{source:"iana",charset:"UTF-8",extensions:["jad"]},"text/vnd.trolltech.linguist":{source:"iana",charset:"UTF-8"},"text/vnd.wap.si":{source:"iana"},"text/vnd.wap.sl":{source:"iana"},"text/vnd.wap.wml":{source:"iana",extensions:["wml"]},"text/vnd.wap.wmlscript":{source:"iana",extensions:["wmls"]},"text/vtt":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["vtt"]},"text/x-asm":{source:"apache",extensions:["s","asm"]},"text/x-c":{source:"apache",extensions:["c","cc","cxx","cpp","h","hh","dic"]},"text/x-component":{source:"nginx",extensions:["htc"]},"text/x-fortran":{source:"apache",extensions:["f","for","f77","f90"]},"text/x-gwt-rpc":{compressible:!0},"text/x-handlebars-template":{extensions:["hbs"]},"text/x-java-source":{source:"apache",extensions:["java"]},"text/x-jquery-tmpl":{compressible:!0},"text/x-lua":{extensions:["lua"]},"text/x-markdown":{compressible:!0,extensions:["mkd"]},"text/x-nfo":{source:"apache",extensions:["nfo"]},"text/x-opml":{source:"apache",extensions:["opml"]},"text/x-org":{compressible:!0,extensions:["org"]},"text/x-pascal":{source:"apache",extensions:["p","pas"]},"text/x-processing":{compressible:!0,extensions:["pde"]},"text/x-sass":{extensions:["sass"]},"text/x-scss":{extensions:["scss"]},"text/x-setext":{source:"apache",extensions:["etx"]},"text/x-sfv":{source:"apache",extensions:["sfv"]},"text/x-suse-ymp":{compressible:!0,extensions:["ymp"]},"text/x-uuencode":{source:"apache",extensions:["uu"]},"text/x-vcalendar":{source:"apache",extensions:["vcs"]},"text/x-vcard":{source:"apache",extensions:["vcf"]},"text/xml":{source:"iana",compressible:!0,extensions:["xml"]},"text/xml-external-parsed-entity":{source:"iana"},"text/yaml":{compressible:!0,extensions:["yaml","yml"]},"video/1d-interleaved-parityfec":{source:"iana"},"video/3gpp":{source:"iana",extensions:["3gp","3gpp"]},"video/3gpp-tt":{source:"iana"},"video/3gpp2":{source:"iana",extensions:["3g2"]},"video/av1":{source:"iana"},"video/bmpeg":{source:"iana"},"video/bt656":{source:"iana"},"video/celb":{source:"iana"},"video/dv":{source:"iana"},"video/encaprtp":{source:"iana"},"video/ffv1":{source:"iana"},"video/flexfec":{source:"iana"},"video/h261":{source:"iana",extensions:["h261"]},"video/h263":{source:"iana",extensions:["h263"]},"video/h263-1998":{source:"iana"},"video/h263-2000":{source:"iana"},"video/h264":{source:"iana",extensions:["h264"]},"video/h264-rcdo":{source:"iana"},"video/h264-svc":{source:"iana"},"video/h265":{source:"iana"},"video/iso.segment":{source:"iana",extensions:["m4s"]},"video/jpeg":{source:"iana",extensions:["jpgv"]},"video/jpeg2000":{source:"iana"},"video/jpm":{source:"apache",extensions:["jpm","jpgm"]},"video/jxsv":{source:"iana"},"video/mj2":{source:"iana",extensions:["mj2","mjp2"]},"video/mp1s":{source:"iana"},"video/mp2p":{source:"iana"},"video/mp2t":{source:"iana",extensions:["ts"]},"video/mp4":{source:"iana",compressible:!1,extensions:["mp4","mp4v","mpg4"]},"video/mp4v-es":{source:"iana"},"video/mpeg":{source:"iana",compressible:!1,extensions:["mpeg","mpg","mpe","m1v","m2v"]},"video/mpeg4-generic":{source:"iana"},"video/mpv":{source:"iana"},"video/nv":{source:"iana"},"video/ogg":{source:"iana",compressible:!1,extensions:["ogv"]},"video/parityfec":{source:"iana"},"video/pointer":{source:"iana"},"video/quicktime":{source:"iana",compressible:!1,extensions:["qt","mov"]},"video/raptorfec":{source:"iana"},"video/raw":{source:"iana"},"video/rtp-enc-aescm128":{source:"iana"},"video/rtploopback":{source:"iana"},"video/rtx":{source:"iana"},"video/scip":{source:"iana"},"video/smpte291":{source:"iana"},"video/smpte292m":{source:"iana"},"video/ulpfec":{source:"iana"},"video/vc1":{source:"iana"},"video/vc2":{source:"iana"},"video/vnd.cctv":{source:"iana"},"video/vnd.dece.hd":{source:"iana",extensions:["uvh","uvvh"]},"video/vnd.dece.mobile":{source:"iana",extensions:["uvm","uvvm"]},"video/vnd.dece.mp4":{source:"iana"},"video/vnd.dece.pd":{source:"iana",extensions:["uvp","uvvp"]},"video/vnd.dece.sd":{source:"iana",extensions:["uvs","uvvs"]},"video/vnd.dece.video":{source:"iana",extensions:["uvv","uvvv"]},"video/vnd.directv.mpeg":{source:"iana"},"video/vnd.directv.mpeg-tts":{source:"iana"},"video/vnd.dlna.mpeg-tts":{source:"iana"},"video/vnd.dvb.file":{source:"iana",extensions:["dvb"]},"video/vnd.fvt":{source:"iana",extensions:["fvt"]},"video/vnd.hns.video":{source:"iana"},"video/vnd.iptvforum.1dparityfec-1010":{source:"iana"},"video/vnd.iptvforum.1dparityfec-2005":{source:"iana"},"video/vnd.iptvforum.2dparityfec-1010":{source:"iana"},"video/vnd.iptvforum.2dparityfec-2005":{source:"iana"},"video/vnd.iptvforum.ttsavc":{source:"iana"},"video/vnd.iptvforum.ttsmpeg2":{source:"iana"},"video/vnd.motorola.video":{source:"iana"},"video/vnd.motorola.videop":{source:"iana"},"video/vnd.mpegurl":{source:"iana",extensions:["mxu","m4u"]},"video/vnd.ms-playready.media.pyv":{source:"iana",extensions:["pyv"]},"video/vnd.nokia.interleaved-multimedia":{source:"iana"},"video/vnd.nokia.mp4vr":{source:"iana"},"video/vnd.nokia.videovoip":{source:"iana"},"video/vnd.objectvideo":{source:"iana"},"video/vnd.radgamettools.bink":{source:"iana"},"video/vnd.radgamettools.smacker":{source:"iana"},"video/vnd.sealed.mpeg1":{source:"iana"},"video/vnd.sealed.mpeg4":{source:"iana"},"video/vnd.sealed.swf":{source:"iana"},"video/vnd.sealedmedia.softseal.mov":{source:"iana"},"video/vnd.uvvu.mp4":{source:"iana",extensions:["uvu","uvvu"]},"video/vnd.vivo":{source:"iana",extensions:["viv"]},"video/vnd.youtube.yt":{source:"iana"},"video/vp8":{source:"iana"},"video/vp9":{source:"iana"},"video/webm":{source:"apache",compressible:!1,extensions:["webm"]},"video/x-f4v":{source:"apache",extensions:["f4v"]},"video/x-fli":{source:"apache",extensions:["fli"]},"video/x-flv":{source:"apache",compressible:!1,extensions:["flv"]},"video/x-m4v":{source:"apache",extensions:["m4v"]},"video/x-matroska":{source:"apache",compressible:!1,extensions:["mkv","mk3d","mks"]},"video/x-mng":{source:"apache",extensions:["mng"]},"video/x-ms-asf":{source:"apache",extensions:["asf","asx"]},"video/x-ms-vob":{source:"apache",extensions:["vob"]},"video/x-ms-wm":{source:"apache",extensions:["wm"]},"video/x-ms-wmv":{source:"apache",compressible:!1,extensions:["wmv"]},"video/x-ms-wmx":{source:"apache",extensions:["wmx"]},"video/x-ms-wvx":{source:"apache",extensions:["wvx"]},"video/x-msvideo":{source:"apache",extensions:["avi"]},"video/x-sgi-movie":{source:"apache",extensions:["movie"]},"video/x-smv":{source:"apache",extensions:["smv"]},"x-conference/x-cooltalk":{source:"apache",extensions:["ice"]},"x-shader/x-fragment":{compressible:!0},"x-shader/x-vertex":{compressible:!0}};
/*!
 * mime-types
 * Copyright(c) 2014 Jonathan Ong
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */
!function(e){var t=fP,n=u.extname,r=/^\s*([^;\s]*)(?:;|\s|$)/,s=/^text\//i;function i(e){if(!e||"string"!=typeof e)return!1;var n=r.exec(e),i=n&&t[n[1].toLowerCase()];return i&&i.charset?i.charset:!(!n||!s.test(n[1]))&&"UTF-8"}e.charset=i,e.charsets={lookup:i},e.contentType=function(t){if(!t||"string"!=typeof t)return!1;var n=-1===t.indexOf("/")?e.lookup(t):t;if(!n)return!1;if(-1===n.indexOf("charset")){var r=e.charset(n);r&&(n+="; charset="+r.toLowerCase())}return n},e.extension=function(t){if(!t||"string"!=typeof t)return!1;var n=r.exec(t),s=n&&e.extensions[n[1].toLowerCase()];return!(!s||!s.length)&&s[0]},e.extensions=Object.create(null),e.lookup=function(t){if(!t||"string"!=typeof t)return!1;var r=n("x."+t).toLowerCase().substr(1);return r&&e.types[r]||!1},e.types=Object.create(null),function(e,n){var r=["nginx","apache",void 0,"iana"];Object.keys(t).forEach((function(s){var i=t[s],o=i.extensions;if(o&&o.length){e[s]=o;for(var a=0;o.length>a;a++){var c=o[a];if(n[c]){var l=r.indexOf(t[n[c]].source),u=r.indexOf(i.source);if("application/octet-stream"!==n[c]&&(l>u||l===u&&"application/"===n[c].substr(0,12)))continue}n[c]=s}}}))}(e.extensions,e.types)}(hP);var mP=function(e){var t="function"==typeof setImmediate?setImmediate:"object"==typeof process&&"function"==typeof process.nextTick?process.nextTick:null;t?t(e):setTimeout(e,0)},gP=function(e){var t=!1;return mP((function(){t=!0})),function(n,r){t?e(n,r):mP((function(){e(n,r)}))}},yP=function(e){Object.keys(e.jobs).forEach(vP.bind(e)),e.jobs={}};function vP(e){"function"==typeof this.jobs[e]&&this.jobs[e]()}var bP=gP,EP=yP,_P=function(e,t,n,r){var s=n.keyedList?n.keyedList[n.index]:n.index;n.jobs[s]=function(e,t,n,r){return 2==e.length?e(n,bP(r)):e(n,t,bP(r))}(t,s,e[s],(function(e,t){s in n.jobs&&(delete n.jobs[s],e?EP(n):n.results[s]=t,r(e,n.results))}))},AP=function(e,t){var n=!Array.isArray(e),r={index:0,keyedList:n||t?Object.keys(e):null,jobs:{},results:n?{}:[],size:n?Object.keys(e).length:e.length};return t&&r.keyedList.sort(n?t:function(n,r){return t(e[n],e[r])}),r},SP=yP,TP=gP,wP=function(e){Object.keys(this.jobs).length&&(this.index=this.size,SP(this),TP(e)(null,this.results))},xP=_P,kP=AP,CP=wP,IP={exports:{}},RP=_P,OP=AP,NP=wP;function DP(e,t){return t>e?-1:e>t?1:0}IP.exports=function(e,t,n,r){var s=OP(e,n);return RP(e,t,s,(function n(i,o){i?r(i,o):(s.index++,(s.keyedList||e).length>s.index?RP(e,t,s,n):r(null,s.results))})),NP.bind(s,r)},IP.exports.ascending=DP,IP.exports.descending=function(e,t){return-1*DP(e,t)};var PP=pP,LP=l,MP=u,BP=C,jP=I,FP=h.parse,$P=c,UP=_.Stream,HP=hP,GP=function(e,t){return Object.keys(t).forEach((function(n){e[n]=e[n]||t[n]})),e},qP=zP;function zP(e){if(!(this instanceof zP))return new zP(e);for(var t in this._overheadLength=0,this._valueLength=0,this._valuesToMeasure=[],PP.call(this),e=e||{})this[t]=e[t]}LP.inherits(zP,PP),zP.LINE_BREAK="\r\n",zP.DEFAULT_CONTENT_TYPE="application/octet-stream",zP.prototype.append=function(e,t,n){"string"==typeof(n=n||{})&&(n={filename:n});var r=PP.prototype.append.bind(this);if("number"==typeof t&&(t=""+t),LP.isArray(t))this._error(Error("Arrays are not supported."));else{var s=this._multiPartHeader(e,t,n),i=this._multiPartFooter();r(s),r(t),r(i),this._trackLength(s,t,n)}},zP.prototype._trackLength=function(e,t,n){var r=0;null!=n.knownLength?r+=+n.knownLength:Buffer.isBuffer(t)?r=t.length:"string"==typeof t&&(r=Buffer.byteLength(t)),this._valueLength+=r,this._overheadLength+=Buffer.byteLength(e)+zP.LINE_BREAK.length,t&&(t.path||t.readable&&t.hasOwnProperty("httpVersion")||t instanceof UP)&&(n.knownLength||this._valuesToMeasure.push(t))},zP.prototype._lengthRetriever=function(e,t){e.hasOwnProperty("fd")?null!=e.end&&e.end!=1/0&&null!=e.start?t(null,e.end+1-(e.start?e.start:0)):$P.stat(e.path,(function(n,r){n?t(n):t(null,r.size-(e.start?e.start:0))})):e.hasOwnProperty("httpVersion")?t(null,+e.headers["content-length"]):e.hasOwnProperty("httpModule")?(e.on("response",(function(n){e.pause(),t(null,+n.headers["content-length"])})),e.resume()):t("Unknown stream")},zP.prototype._multiPartHeader=function(e,t,n){if("string"==typeof n.header)return n.header;var r,s=this._getContentDisposition(t,n),i=this._getContentType(t,n),o="",a={"Content-Disposition":["form-data",'name="'+e+'"'].concat(s||[]),"Content-Type":[].concat(i||[])};for(var c in"object"==typeof n.header&&GP(a,n.header),a)a.hasOwnProperty(c)&&null!=(r=a[c])&&(Array.isArray(r)||(r=[r]),r.length&&(o+=c+": "+r.join("; ")+zP.LINE_BREAK));return"--"+this.getBoundary()+zP.LINE_BREAK+o+zP.LINE_BREAK},zP.prototype._getContentDisposition=function(e,t){var n,r;return"string"==typeof t.filepath?n=MP.normalize(t.filepath).replace(/\\/g,"/"):t.filename||e.name||e.path?n=MP.basename(t.filename||e.name||e.path):e.readable&&e.hasOwnProperty("httpVersion")&&(n=MP.basename(e.client._httpMessage.path||"")),n&&(r='filename="'+n+'"'),r},zP.prototype._getContentType=function(e,t){var n=t.contentType;return!n&&e.name&&(n=HP.lookup(e.name)),!n&&e.path&&(n=HP.lookup(e.path)),!n&&e.readable&&e.hasOwnProperty("httpVersion")&&(n=e.headers["content-type"]),n||!t.filepath&&!t.filename||(n=HP.lookup(t.filepath||t.filename)),n||"object"!=typeof e||(n=zP.DEFAULT_CONTENT_TYPE),n},zP.prototype._multiPartFooter=function(){return function(e){var t=zP.LINE_BREAK;0===this._streams.length&&(t+=this._lastBoundary()),e(t)}.bind(this)},zP.prototype._lastBoundary=function(){return"--"+this.getBoundary()+"--"+zP.LINE_BREAK},zP.prototype.getHeaders=function(e){var t,n={"content-type":"multipart/form-data; boundary="+this.getBoundary()};for(t in e)e.hasOwnProperty(t)&&(n[t.toLowerCase()]=e[t]);return n},zP.prototype.setBoundary=function(e){this._boundary=e},zP.prototype.getBoundary=function(){return this._boundary||this._generateBoundary(),this._boundary},zP.prototype.getBuffer=function(){for(var e=new Buffer.alloc(0),t=this.getBoundary(),n=0,r=this._streams.length;r>n;n++)"function"!=typeof this._streams[n]&&(e=Buffer.isBuffer(this._streams[n])?Buffer.concat([e,this._streams[n]]):Buffer.concat([e,Buffer.from(this._streams[n])]),"string"==typeof this._streams[n]&&this._streams[n].substring(2,t.length+2)===t||(e=Buffer.concat([e,Buffer.from(zP.LINE_BREAK)])));return Buffer.concat([e,Buffer.from(this._lastBoundary())])},zP.prototype._generateBoundary=function(){for(var e="--------------------------",t=0;24>t;t++)e+=Math.floor(10*Math.random()).toString(16);this._boundary=e},zP.prototype.getLengthSync=function(){var e=this._overheadLength+this._valueLength;return this._streams.length&&(e+=this._lastBoundary().length),this.hasKnownLength()||this._error(Error("Cannot calculate proper length in synchronous way.")),e},zP.prototype.hasKnownLength=function(){var e=!0;return this._valuesToMeasure.length&&(e=!1),e},zP.prototype.getLength=function(e){var t=this._overheadLength+this._valueLength;this._streams.length&&(t+=this._lastBoundary().length),this._valuesToMeasure.length?function(e,t,n){for(var r=kP(e);(r.keyedList||e).length>r.index;)xP(e,t,r,(function(e,t){e?n(e,t):0!==Object.keys(r.jobs).length||n(null,r.results)})),r.index++;CP.bind(r,n)}(this._valuesToMeasure,this._lengthRetriever,(function(n,r){n?e(n):(r.forEach((function(e){t+=e})),e(null,t))})):process.nextTick(e.bind(this,null,t))},zP.prototype.submit=function(e,t){var n,r,s={method:"post"};return"string"==typeof e?(e=FP(e),r=GP({port:e.port,path:e.pathname,host:e.hostname,protocol:e.protocol},s)):(r=GP(e,s)).port||(r.port="https:"==r.protocol?443:80),r.headers=this.getHeaders(e.headers),n="https:"==r.protocol?jP.request(r):BP.request(r),this.getLength(function(e,r){if(e&&"Unknown stream"!==e)this._error(e);else if(r&&n.setHeader("Content-Length",r),this.pipe(n),t){var s,i=function(e,r){return n.removeListener("error",i),n.removeListener("response",s),t.call(this,e,r)};s=i.bind(this,null),n.on("error",i),n.on("response",s)}}.bind(this)),n},zP.prototype._error=function(e){this.error||(this.error=e,this.pause(),this.emit("error",e))},zP.prototype.toString=function(){return"[object FormData]"};var VP=P(qP);function YP(e){return nP.isPlainObject(e)||nP.isArray(e)}function KP(e){return nP.endsWith(e,"[]")?e.slice(0,-2):e}function QP(e,t,n){return e?e.concat(t).map((function(e,t){return e=KP(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}const WP=nP.toFlatObject(nP,{},null,(function(e){return/^is[A-Z]/.test(e)}));function JP(e,t,n){if(!nP.isObject(e))throw new TypeError("target must be an object");t=t||new(VP||FormData);const r=(n=nP.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!nP.isUndefined(t[e])}))).metaTokens,s=n.visitor||l,i=n.dots,o=n.indexes,a=(n.Blob||"undefined"!=typeof Blob&&Blob)&&nP.isSpecCompliantForm(t);if(!nP.isFunction(s))throw new TypeError("visitor must be a function");function c(e){if(null===e)return"";if(nP.isDate(e))return e.toISOString();if(!a&&nP.isBlob(e))throw new rP("Blob is not supported. Use a Buffer instead.");return nP.isArrayBuffer(e)||nP.isTypedArray(e)?a&&"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}function l(e,n,s){let a=e;if(e&&!s&&"object"==typeof e)if(nP.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else if(nP.isArray(e)&&function(e){return nP.isArray(e)&&!e.some(YP)}(e)||(nP.isFileList(e)||nP.endsWith(n,"[]"))&&(a=nP.toArray(e)))return n=KP(n),a.forEach((function(e,r){!nP.isUndefined(e)&&null!==e&&t.append(!0===o?QP([n],r,i):null===o?n:n+"[]",c(e))})),!1;return!!YP(e)||(t.append(QP(s,n,i),c(e)),!1)}const u=[],p=Object.assign(WP,{defaultVisitor:l,convertValue:c,isVisitable:YP});if(!nP.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!nP.isUndefined(n)){if(-1!==u.indexOf(n))throw Error("Circular reference detected in "+r.join("."));u.push(n),nP.forEach(n,(function(n,i){!0===(!(nP.isUndefined(n)||null===n)&&s.call(t,n,nP.isString(i)?i.trim():i,r,p))&&e(n,r?r.concat(i):[i])})),u.pop()}}(e),t}function XP(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function ZP(e,t){this._pairs=[],e&&JP(e,this,t)}const eL=ZP.prototype;function tL(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function nL(e,t,n){if(!t)return e;const r=n&&n.encode||tL,s=n&&n.serialize;let i;if(i=s?s(t,n):nP.isURLSearchParams(t)?""+t:new ZP(t,n).toString(r),i){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+i}return e}eL.append=function(e,t){this._pairs.push([e,t])},eL.toString=function(e){const t=e?function(t){return e.call(this,t,XP)}:XP;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};class rL{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){nP.forEach(this.handlers,(function(t){null!==t&&e(t)}))}}var sL={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},iL={isNode:!0,classes:{URLSearchParams:h.URLSearchParams,FormData:VP,Blob:"undefined"!=typeof Blob&&Blob||null},protocols:["http","https","file","data"]};const oL="undefined"!=typeof window&&"undefined"!=typeof document,aL=(cL="undefined"!=typeof navigator&&navigator.product,oL&&0>["ReactNative","NativeScript","NS"].indexOf(cL));var cL;const lL="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,uL=oL&&window.location.href||"http://localhost";var pL={...Object.freeze({__proto__:null,hasBrowserEnv:oL,hasStandardBrowserEnv:aL,hasStandardBrowserWebWorkerEnv:lL,origin:uL}),...iL};function dL(e){function t(e,n,r,s){let i=e[s++];if("__proto__"===i)return!0;const o=Number.isFinite(+i),a=s>=e.length;return i=!i&&nP.isArray(r)?r.length:i,a?(r[i]=nP.hasOwnProp(r,i)?[r[i],n]:n,!o):(r[i]&&nP.isObject(r[i])||(r[i]=[]),t(e,n,r[i],s)&&nP.isArray(r[i])&&(r[i]=function(e){const t={},n=Object.keys(e);let r;const s=n.length;let i;for(r=0;s>r;r++)i=n[r],t[i]=e[i];return t}(r[i])),!o)}if(nP.isFormData(e)&&nP.isFunction(e.entries)){const n={};return nP.forEachEntry(e,((e,r)=>{t(function(e){return nP.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),r,n,0)})),n}return null}const hL={transitional:sL,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",r=n.indexOf("application/json")>-1,s=nP.isObject(e);if(s&&nP.isHTMLForm(e)&&(e=new FormData(e)),nP.isFormData(e))return r?JSON.stringify(dL(e)):e;if(nP.isArrayBuffer(e)||nP.isBuffer(e)||nP.isStream(e)||nP.isFile(e)||nP.isBlob(e)||nP.isReadableStream(e))return e;if(nP.isArrayBufferView(e))return e.buffer;if(nP.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),""+e;let i;if(s){if(n.indexOf("application/x-www-form-urlencoded")>-1)return""+function(e,t){return JP(e,new pL.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,r){return pL.isNode&&nP.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer);if((i=nP.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return JP(i?{"files[]":e}:e,t&&new t,this.formSerializer)}}return s||r?(t.setContentType("application/json",!1),function(e,t,n){if(nP.isString(e))try{return(0,JSON.parse)(e),nP.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(0,JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||hL.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(nP.isResponse(e)||nP.isReadableStream(e))return e;if(e&&nP.isString(e)&&(n&&!this.responseType||r)){const n=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(e){if(n){if("SyntaxError"===e.name)throw rP.from(e,rP.ERR_BAD_RESPONSE,this,null,this.response);throw e}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:pL.classes.FormData,Blob:pL.classes.Blob},validateStatus:function(e){return e>=200&&300>e},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};nP.forEach(["delete","get","head","post","put","patch"],(e=>{hL.headers[e]={}}));const fL=nP.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),mL=Symbol("internals");function gL(e){return e&&(e+"").trim().toLowerCase()}function yL(e){return!1===e||null==e?e:nP.isArray(e)?e.map(yL):e+""}function vL(e,t,n,r,s){return nP.isFunction(r)?r.call(this,t,n):(s&&(t=n),nP.isString(t)?nP.isString(r)?-1!==t.indexOf(r):nP.isRegExp(r)?r.test(t):void 0:void 0)}class bL{constructor(e){e&&this.set(e)}set(e,t,n){const r=this;function s(e,t,n){const s=gL(t);if(!s)throw Error("header name must be a non-empty string");const i=nP.findKey(r,s);(!i||void 0===r[i]||!0===n||void 0===n&&!1!==r[i])&&(r[i||t]=yL(e))}const i=(e,t)=>nP.forEach(e,((e,n)=>s(e,n,t)));if(nP.isPlainObject(e)||e instanceof this.constructor)i(e,t);else if(nP.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))i((e=>{const t={};let n,r,s;return e&&e.split("\n").forEach((function(e){s=e.indexOf(":"),n=e.substring(0,s).trim().toLowerCase(),r=e.substring(s+1).trim(),!n||t[n]&&fL[n]||("set-cookie"===n?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)})),t})(e),t);else if(nP.isHeaders(e))for(const[t,r]of e.entries())s(r,t,n);else null!=e&&s(t,e,n);return this}get(e,t){if(e=gL(e)){const n=nP.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}(e);if(nP.isFunction(t))return t.call(this,e,n);if(nP.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=gL(e)){const n=nP.findKey(this,e);return!(!n||void 0===this[n]||t&&!vL(0,this[n],n,t))}return!1}delete(e,t){const n=this;let r=!1;function s(e){if(e=gL(e)){const s=nP.findKey(n,e);!s||t&&!vL(0,n[s],s,t)||(delete n[s],r=!0)}}return nP.isArray(e)?e.forEach(s):s(e),r}clear(e){const t=Object.keys(this);let n=t.length,r=!1;for(;n--;){const s=t[n];e&&!vL(0,this[s],s,e,!0)||(delete this[s],r=!0)}return r}normalize(e){const t=this,n={};return nP.forEach(this,((r,s)=>{const i=nP.findKey(n,s);if(i)return t[i]=yL(r),void delete t[s];const o=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,n)=>t.toUpperCase()+n))}(s):(s+"").trim();o!==s&&delete t[s],t[o]=yL(r),n[o]=!0})),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return nP.forEach(this,((n,r)=>{null!=n&&!1!==n&&(t[r]=e&&nP.isArray(n)?n.join(", "):n)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((([e,t])=>e+": "+t)).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const n=new this(e);return t.forEach((e=>n.set(e))),n}static accessor(e){const t=(this[mL]=this[mL]={accessors:{}}).accessors,n=this.prototype;function r(e){const r=gL(e);t[r]||(function(e,t){const n=nP.toCamelCase(" "+t);["get","set","has"].forEach((r=>{Object.defineProperty(e,r+n,{value:function(e,n,s){return this[r].call(this,t,e,n,s)},configurable:!0})}))}(n,e),t[r]=!0)}return nP.isArray(e)?e.forEach(r):r(e),this}}function EL(e,t){const n=this||hL,r=t||n,s=bL.from(r.headers);let i=r.data;return nP.forEach(e,(function(e){i=e.call(n,i,s.normalize(),t?t.status:void 0)})),s.normalize(),i}function _L(e){return!(!e||!e.__CANCEL__)}function AL(e,t,n){rP.call(this,null==e?"canceled":e,rP.ERR_CANCELED,t,n),this.name="CanceledError"}function SL(e,t,n){const r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new rP("Request failed with status code "+n.status,[rP.ERR_BAD_REQUEST,rP.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}function TL(e,t){return e&&!function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}(t)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}bL.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),nP.reduceDescriptors(bL.prototype,(({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(e){this[n]=e}}})),nP.freezeMethods(bL),nP.inherits(AL,rP,{__CANCEL__:!0});var wL=h.parse,xL={ftp:21,gopher:70,http:80,https:443,ws:80,wss:443},kL="".endsWith||function(e){return this.length>=e.length&&-1!==this.indexOf(e,this.length-e.length)};function CL(e){return process.env[e.toLowerCase()]||process.env[e.toUpperCase()]||""}var IL,RL={exports:{}},OL=h,NL=OL.URL,DL=C,PL=I,LL=_.Writable,ML=m,BL=function(){if(!IL){try{IL=lO("follow-redirects")}catch(e){}"function"!=typeof IL&&(IL=function(){})}IL.apply(null,arguments)},jL=!1;try{ML(new NL)}catch(gX){jL="ERR_INVALID_URL"===gX.code}var FL=["auth","host","hostname","href","path","pathname","port","protocol","query","search","hash"],$L=["abort","aborted","connect","error","socket","timeout"],UL=Object.create(null);$L.forEach((function(e){UL[e]=function(t,n,r){this._redirectable.emit(e,t,n,r)}}));var HL=tM("ERR_INVALID_URL","Invalid URL",TypeError),GL=tM("ERR_FR_REDIRECTION_FAILURE","Redirected request failed"),qL=tM("ERR_FR_TOO_MANY_REDIRECTS","Maximum number of redirects exceeded",GL),zL=tM("ERR_FR_MAX_BODY_LENGTH_EXCEEDED","Request body larger than maxBodyLength limit"),VL=tM("ERR_STREAM_WRITE_AFTER_END","write after end"),YL=LL.prototype.destroy||WL;function KL(e,t){LL.call(this),this._sanitizeOptions(e),this._options=e,this._ended=!1,this._ending=!1,this._redirectCount=0,this._redirects=[],this._requestBodyLength=0,this._requestBodyBuffers=[],t&&this.on("response",t);var n=this;this._onNativeResponse=function(e){try{n._processResponse(e)}catch(e){n.emit("error",e instanceof GL?e:new GL({cause:e}))}},this._performRequest()}function QL(e){var t={maxRedirects:21,maxBodyLength:10485760},n={};return Object.keys(e).forEach((function(r){var s=r+":",i=n[s]=e[r],o=t[r]=Object.create(i);Object.defineProperties(o,{request:{value:function(e,r,i){return NL&&e instanceof NL?e=ZL(e):rM(e)?e=ZL(JL(e)):(i=r,r=XL(e),e={protocol:s}),sM(r)&&(i=r,r=null),(r=Object.assign({maxRedirects:t.maxRedirects,maxBodyLength:t.maxBodyLength},e,r)).nativeProtocols=n,rM(r.host)||rM(r.hostname)||(r.hostname="::1"),ML.equal(r.protocol,s,"protocol mismatch"),BL("options",r),new KL(r,i)},configurable:!0,enumerable:!0,writable:!0},get:{value:function(e,t,n){var r=o.request(e,t,n);return r.end(),r},configurable:!0,enumerable:!0,writable:!0}})})),t}function WL(){}function JL(e){var t;if(jL)t=new NL(e);else if(!rM((t=XL(OL.parse(e))).protocol))throw new HL({input:e});return t}function XL(e){if(/^\[/.test(e.hostname)&&!/^\[[:0-9a-f]+\]$/i.test(e.hostname))throw new HL({input:e.href||e});if(/^\[/.test(e.host)&&!/^\[[:0-9a-f]+\](:\d+)?$/i.test(e.host))throw new HL({input:e.href||e});return e}function ZL(e,t){var n=t||{};for(var r of FL)n[r]=e[r];return n.hostname.startsWith("[")&&(n.hostname=n.hostname.slice(1,-1)),""!==n.port&&(n.port=+n.port),n.path=n.search?n.pathname+n.search:n.pathname,n}function eM(e,t){var n;for(var r in t)e.test(r)&&(n=t[r],delete t[r]);return null==n?void 0:(n+"").trim()}function tM(e,t,n){function r(n){Error.captureStackTrace(this,this.constructor),Object.assign(this,n||{}),this.code=e,this.message=this.cause?t+": "+this.cause.message:t}return r.prototype=new(n||Error),Object.defineProperties(r.prototype,{constructor:{value:r,enumerable:!1},name:{value:"Error ["+e+"]",enumerable:!1}}),r}function nM(e,t){for(var n of $L)e.removeListener(n,UL[n]);e.on("error",WL),e.destroy(t)}function rM(e){return"string"==typeof e||e instanceof String}function sM(e){return"function"==typeof e}(KL.prototype=Object.create(LL.prototype)).abort=function(){nM(this._currentRequest),this._currentRequest.abort(),this.emit("abort")},KL.prototype.destroy=function(e){return nM(this._currentRequest,e),YL.call(this,e),this},KL.prototype.write=function(e,t,n){if(this._ending)throw new VL;if(!(rM(e)||"object"==typeof(r=e)&&"length"in r))throw new TypeError("data should be a string, Buffer or Uint8Array");var r;sM(t)&&(n=t,t=null),0!==e.length?this._requestBodyLength+e.length>this._options.maxBodyLength?(this.emit("error",new zL),this.abort()):(this._requestBodyLength+=e.length,this._requestBodyBuffers.push({data:e,encoding:t}),this._currentRequest.write(e,t,n)):n&&n()},KL.prototype.end=function(e,t,n){if(sM(e)?(n=e,e=t=null):sM(t)&&(n=t,t=null),e){var r=this,s=this._currentRequest;this.write(e,t,(function(){r._ended=!0,s.end(null,null,n)})),this._ending=!0}else this._ended=this._ending=!0,this._currentRequest.end(null,null,n)},KL.prototype.setHeader=function(e,t){this._options.headers[e]=t,this._currentRequest.setHeader(e,t)},KL.prototype.removeHeader=function(e){delete this._options.headers[e],this._currentRequest.removeHeader(e)},KL.prototype.setTimeout=function(e,t){var n=this;function r(t){t.setTimeout(e),t.removeListener("timeout",t.destroy),t.addListener("timeout",t.destroy)}function s(t){n._timeout&&clearTimeout(n._timeout),n._timeout=setTimeout((function(){n.emit("timeout"),i()}),e),r(t)}function i(){n._timeout&&(clearTimeout(n._timeout),n._timeout=null),n.removeListener("abort",i),n.removeListener("error",i),n.removeListener("response",i),n.removeListener("close",i),t&&n.removeListener("timeout",t),n.socket||n._currentRequest.removeListener("socket",s)}return t&&this.on("timeout",t),this.socket?s(this.socket):this._currentRequest.once("socket",s),this.on("socket",r),this.on("abort",i),this.on("error",i),this.on("response",i),this.on("close",i),this},["flushHeaders","getHeader","setNoDelay","setSocketKeepAlive"].forEach((function(e){KL.prototype[e]=function(t,n){return this._currentRequest[e](t,n)}})),["aborted","connection","socket"].forEach((function(e){Object.defineProperty(KL.prototype,e,{get:function(){return this._currentRequest[e]}})})),KL.prototype._sanitizeOptions=function(e){if(e.headers||(e.headers={}),e.host&&(e.hostname||(e.hostname=e.host),delete e.host),!e.pathname&&e.path){var t=e.path.indexOf("?");0>t?e.pathname=e.path:(e.pathname=e.path.substring(0,t),e.search=e.path.substring(t))}},KL.prototype._performRequest=function(){var e=this._options.protocol,t=this._options.nativeProtocols[e];if(!t)throw new TypeError("Unsupported protocol "+e);if(this._options.agents){var n=e.slice(0,-1);this._options.agent=this._options.agents[n]}var r=this._currentRequest=t.request(this._options,this._onNativeResponse);for(var s of(r._redirectable=this,$L))r.on(s,UL[s]);if(this._currentUrl=/^\//.test(this._options.path)?OL.format(this._options):this._options.path,this._isRedirect){var i=0,o=this,a=this._requestBodyBuffers;!function e(t){if(r===o._currentRequest)if(t)o.emit("error",t);else if(a.length>i){var n=a[i++];r.finished||r.write(n.data,n.encoding,e)}else o._ended&&r.end()}()}},KL.prototype._processResponse=function(e){var t=e.statusCode;this._options.trackRedirects&&this._redirects.push({url:this._currentUrl,headers:e.headers,statusCode:t});var n,r=e.headers.location;if(!r||!1===this._options.followRedirects||300>t||t>=400)return e.responseUrl=this._currentUrl,e.redirects=this._redirects,this.emit("response",e),void(this._requestBodyBuffers=[]);if(nM(this._currentRequest),e.destroy(),++this._redirectCount>this._options.maxRedirects)throw new qL;var s=this._options.beforeRedirect;s&&(n=Object.assign({Host:e.req.getHeader("host")},this._options.headers));var i=this._options.method;((301===t||302===t)&&"POST"===this._options.method||303===t&&!/^(?:GET|HEAD)$/.test(this._options.method))&&(this._options.method="GET",this._requestBodyBuffers=[],eM(/^content-/i,this._options.headers));var o=eM(/^host$/i,this._options.headers),a=JL(this._currentUrl),c=o||a.host,l=/^\w+:/.test(r)?this._currentUrl:OL.format(Object.assign(a,{host:c})),u=function(e,t){return jL?new NL(e,t):JL(OL.resolve(t,e))}(r,l);BL("redirecting to",u.href),this._isRedirect=!0,ZL(u,this._options),(u.protocol!==a.protocol&&"https:"!==u.protocol||u.host!==c&&!function(e,t){ML(rM(e)&&rM(t));var n=e.length-t.length-1;return n>0&&"."===e[n]&&e.endsWith(t)}(u.host,c))&&eM(/^(?:(?:proxy-)?authorization|cookie)$/i,this._options.headers),sM(s)&&(s(this._options,{headers:e.headers,statusCode:t},{url:l,method:i,headers:n}),this._sanitizeOptions(this._options)),this._performRequest()},RL.exports=QL({http:DL,https:PL}),RL.exports.wrap=QL;var iM=P(RL.exports);const oM="1.7.2";function aM(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}const cM=/^(?:([^;]+);)?(?:[^;]+;)?(base64|),([\s\S]*)$/;function lM(e,t){let n=0;const r=1e3/t;let s=null;return function(){const t=!0===this,i=Date.now();if(t||i-n>r)return s&&(clearTimeout(s),s=null),n=i,e.apply(null,arguments);s||(s=setTimeout((()=>(s=null,n=Date.now(),e.apply(null,arguments))),r-(i-n)))}}function uM(e,t){const n=Array(e=e||10),r=Array(e);let s,i=0,o=0;return t=void 0!==t?t:1e3,function(a){const c=Date.now(),l=r[o];s||(s=c),n[i]=a,r[i]=c;let u=o,p=0;for(;u!==i;)p+=n[u++],u%=e;if(i=(i+1)%e,i===o&&(o=(o+1)%e),t>c-s)return;const d=l&&c-l;return d?Math.round(1e3*p/d):void 0}}const pM=Symbol("internals");class dM extends _.Transform{constructor(e){super({readableHighWaterMark:(e=nP.toFlatObject(e,{maxRate:0,chunkSize:65536,minChunkSize:100,timeWindow:500,ticksRate:2,samplesCount:15},null,((e,t)=>!nP.isUndefined(t[e])))).chunkSize});const t=this,n=this[pM]={length:e.length,timeWindow:e.timeWindow,ticksRate:e.ticksRate,chunkSize:e.chunkSize,maxRate:e.maxRate,minChunkSize:e.minChunkSize,bytesSeen:0,isCaptured:!1,notifiedBytesLoaded:0,ts:Date.now(),bytes:0,onReadCallback:null},r=uM(n.ticksRate*e.samplesCount,n.timeWindow);this.on("newListener",(e=>{"progress"===e&&(n.isCaptured||(n.isCaptured=!0))}));let s=0;n.updateProgress=lM((function(){const e=n.length,i=n.bytesSeen,o=i-s;if(!o||t.destroyed)return;const a=r(o);s=i,process.nextTick((()=>{t.emit("progress",{loaded:i,total:e,progress:e?i/e:void 0,bytes:o,rate:a||void 0,estimated:a&&e&&e>=i?(e-i)/a:void 0,lengthComputable:null!=e})}))}),n.ticksRate);const i=()=>{n.updateProgress.call(!0)};this.once("end",i),this.once("error",i)}_read(e){const t=this[pM];return t.onReadCallback&&t.onReadCallback(),super._read(e)}_transform(e,t,n){const r=this,s=this[pM],i=s.maxRate,o=this.readableHighWaterMark,a=s.timeWindow,c=i/(1e3/a),l=!1!==s.minChunkSize?Math.max(s.minChunkSize,.01*c):0,u=(e,t)=>{const n=Buffer.byteLength(e);let u,p=null,d=o,h=0;if(i){const e=Date.now();s.ts&&(h=e-s.ts)<a||(s.ts=e,u=c-s.bytes,s.bytes=0>u?-u:0,h=0),u=c-s.bytes}if(i){if(0>=u)return setTimeout((()=>{t(null,e)}),a-h);d>u&&(d=u)}d&&n>d&&n-d>l&&(p=e.subarray(d),e=e.subarray(0,d)),function(e,t){const n=Buffer.byteLength(e);s.bytesSeen+=n,s.bytes+=n,s.isCaptured&&s.updateProgress(),r.push(e)?process.nextTick(t):s.onReadCallback=()=>{s.onReadCallback=null,process.nextTick(t)}}(e,p?()=>{process.nextTick(t,null,p)}:t)};u(e,(function e(t,r){if(t)return n(t);r?u(r,e):n(null)}))}setLength(e){return this[pM].length=+e,this}}const{asyncIterator:hM}=Symbol,fM=async function*(e){e.stream?yield*e.stream():e.arrayBuffer?yield await e.arrayBuffer():e[hM]?yield*e[hM]():yield e},mM=nP.ALPHABET.ALPHA_DIGIT+"-_",gM=new l.TextEncoder,yM="\r\n",vM=gM.encode(yM);class bM{constructor(e,t){const{escapeName:n}=this.constructor,r=nP.isString(t);let s=`Content-Disposition: form-data; name="${n(e)}"${!r&&t.name?`; filename="${n(t.name)}"`:""}${yM}`;r?t=gM.encode((t+"").replace(/\r?\n|\r\n?/g,yM)):s+=`Content-Type: ${t.type||"application/octet-stream"}${yM}`,this.headers=gM.encode(s+yM),this.contentLength=r?t.byteLength:t.size,this.size=this.headers.byteLength+this.contentLength+2,this.name=e,this.value=t}async*encode(){yield this.headers;const{value:e}=this;nP.isTypedArray(e)?yield e:yield*fM(e),yield vM}static escapeName(e){return(e+"").replace(/[\r\n"]/g,(e=>({"\r":"%0D","\n":"%0A",'"':"%22"}[e])))}}class EM extends _.Transform{__transform(e,t,n){this.push(e),n()}_transform(e,t,n){if(0!==e.length&&(this._transform=this.__transform,120!==e[0])){const e=Buffer.alloc(2);e[0]=120,e[1]=156,this.push(e,t)}this.__transform(e,t,n)}}const _M=(e,t)=>nP.isAsyncFn(e)?function(...n){const r=n.pop();e.apply(this,n).then((e=>{try{t?r(null,...t(e)):r(null,e)}catch(e){r(e)}}),r)}:e,AM={flush:R.constants.Z_SYNC_FLUSH,finishFlush:R.constants.Z_SYNC_FLUSH},SM={flush:R.constants.BROTLI_OPERATION_FLUSH,finishFlush:R.constants.BROTLI_OPERATION_FLUSH},TM=nP.isFunction(R.createBrotliDecompress),{http:wM,https:xM}=iM,kM=/https:?/,CM=pL.protocols.map((e=>e+":"));function IM(e,t){e.beforeRedirects.proxy&&e.beforeRedirects.proxy(e),e.beforeRedirects.config&&e.beforeRedirects.config(e,t)}function RM(e,t,n){let r=t;if(!r&&!1!==r){const e=function(e){var t="string"==typeof e?wL(e):e||{},n=t.protocol,r=t.host,s=t.port;if("string"!=typeof r||!r||"string"!=typeof n)return"";if(n=n.split(":",1)[0],!function(e,t){var n=(CL("npm_config_no_proxy")||CL("no_proxy")).toLowerCase();return!n||"*"!==n&&n.split(/[,\s]/).every((function(n){if(!n)return!0;var r=n.match(/^(.+):(\d+)$/),s=r?r[1]:n,i=r?parseInt(r[2]):0;return!(!i||i===t)||(/^[.*]/.test(s)?("*"===s.charAt(0)&&(s=s.slice(1)),!kL.call(e,s)):e!==s)}))}(r=r.replace(/:\d*$/,""),s=parseInt(s)||xL[n]||0))return"";var i=CL("npm_config_"+n+"_proxy")||CL(n+"_proxy")||CL("npm_config_proxy")||CL("all_proxy");return i&&-1===i.indexOf("://")&&(i=n+"://"+i),i}(n);e&&(r=new URL(e))}if(r){if(r.username&&(r.auth=(r.username||"")+":"+(r.password||"")),r.auth){(r.auth.username||r.auth.password)&&(r.auth=(r.auth.username||"")+":"+(r.auth.password||""));const t=Buffer.from(r.auth,"utf8").toString("base64");e.headers["Proxy-Authorization"]="Basic "+t}e.headers.host=e.hostname+(e.port?":"+e.port:"");const t=r.hostname||r.host;e.hostname=t,e.host=t,e.port=r.port,e.path=n,r.protocol&&(e.protocol=r.protocol.includes(":")?r.protocol:r.protocol+":")}e.beforeRedirects.proxy=function(e){RM(e,t,e.href)}}const OM="undefined"!=typeof process&&"process"===nP.kindOf(process),NM=(e,t)=>(({address:e,family:t})=>{if(!nP.isString(e))throw TypeError("address must be a string");return{address:e,family:t||(0>e.indexOf(".")?6:4)}})(nP.isObject(e)?e:{address:e,family:t});var DM=OM&&function(e){return t=async function(t,n,r){let{data:s,lookup:i,family:o}=e;const{responseType:c,responseEncoding:u}=e,p=e.method.toUpperCase();let d,h,f=!1;if(i){const e=_M(i,(e=>nP.isArray(e)?e:[e]));i=(t,n,r)=>{e(t,n,((e,t,s)=>{if(e)return r(e);const i=nP.isArray(t)?t.map((e=>NM(e))):[NM(t,s)];n.all?r(e,i):r(e,i[0].address,i[0].family)}))}}const m=new a.EventEmitter,g=()=>{e.cancelToken&&e.cancelToken.unsubscribe(y),e.signal&&e.signal.removeEventListener("abort",y),m.removeAllListeners()};function y(t){m.emit("abort",!t||t.type?new AL(null,e,h):t)}r(((e,t)=>{d=!0,t&&(f=!0,g())})),m.once("abort",n),(e.cancelToken||e.signal)&&(e.cancelToken&&e.cancelToken.subscribe(y),e.signal&&(e.signal.aborted?y():e.signal.addEventListener("abort",y)));const v=TL(e.baseURL,e.url),b=new URL(v,"http://localhost"),E=b.protocol||CM[0];if("data:"===E){let r;if("GET"!==p)return SL(t,n,{status:405,statusText:"method not allowed",headers:{},config:e});try{r=function(e,t,n){const r=n&&n.Blob||pL.classes.Blob,s=aM(e);if(void 0===t&&r&&(t=!0),"data"===s){e=s.length?e.slice(s.length+1):e;const n=cM.exec(e);if(!n)throw new rP("Invalid URL",rP.ERR_INVALID_URL);const i=n[1],o=n[2],a=Buffer.from(decodeURIComponent(n[3]),o?"base64":"utf8");if(t){if(!r)throw new rP("Blob is not supported",rP.ERR_NOT_SUPPORT);return new r([a],{type:i})}return a}throw new rP("Unsupported protocol "+s,rP.ERR_NOT_SUPPORT)}(e.url,"blob"===c,{Blob:e.env&&e.env.Blob})}catch(t){throw rP.from(t,rP.ERR_BAD_REQUEST,e)}return"text"===c?(r=r.toString(u),u&&"utf8"!==u||(r=nP.stripBOM(r))):"stream"===c&&(r=_.Readable.from(r)),SL(t,n,{data:r,status:200,statusText:"OK",headers:new bL,config:e})}if(-1===CM.indexOf(E))return n(new rP("Unsupported protocol "+E,rP.ERR_BAD_REQUEST,e));const A=bL.from(e.headers).normalize();A.set("User-Agent","axios/"+oM,!1);const S=e.onDownloadProgress,T=e.onUploadProgress,w=e.maxRate;let x,k;if(nP.isSpecCompliantForm(s)){const e=A.getContentType(/boundary=([-_\w\d]{10,70})/i);s=((e,t,n)=>{const{tag:r="form-data-boundary",size:s=25,boundary:i=r+"-"+nP.generateString(s,mM)}=n||{};if(!nP.isFormData(e))throw TypeError("FormData instance required");if(1>i.length||i.length>70)throw Error("boundary must be 10-70 characters long");const o=gM.encode("--"+i+yM),a=gM.encode("--"+i+"--"+yM+yM);let c=a.byteLength;const l=Array.from(e.entries()).map((([e,t])=>{const n=new bM(e,t);return c+=n.size,n}));c+=o.byteLength*l.length,c=nP.toFiniteNumber(c);const u={"Content-Type":"multipart/form-data; boundary="+i};return Number.isFinite(c)&&(u["Content-Length"]=c),t&&t(u),_.Readable.from(async function*(){for(const e of l)yield o,yield*e.encode();yield a}())})(s,(e=>{A.set(e)}),{tag:`axios-${oM}-boundary`,boundary:e&&e[1]||void 0})}else if(nP.isFormData(s)&&nP.isFunction(s.getHeaders)){if(A.set(s.getHeaders()),!A.hasContentLength())try{const e=await l.promisify(s.getLength).call(s);Number.isFinite(e)&&e>=0&&A.setContentLength(e)}catch(e){}}else if(nP.isBlob(s))s.size&&A.setContentType(s.type||"application/octet-stream"),A.setContentLength(s.size||0),s=_.Readable.from(fM(s));else if(s&&!nP.isStream(s)){if(Buffer.isBuffer(s));else if(nP.isArrayBuffer(s))s=Buffer.from(new Uint8Array(s));else{if(!nP.isString(s))return n(new rP("Data after transformation must be a string, an ArrayBuffer, a Buffer, or a Stream",rP.ERR_BAD_REQUEST,e));s=Buffer.from(s,"utf-8")}if(A.setContentLength(s.length,!1),e.maxBodyLength>-1&&s.length>e.maxBodyLength)return n(new rP("Request body larger than maxBodyLength limit",rP.ERR_BAD_REQUEST,e))}const O=nP.toFiniteNumber(A.getContentLength());let N,D;nP.isArray(w)?(x=w[0],k=w[1]):x=k=w,s&&(T||x)&&(nP.isStream(s)||(s=_.Readable.from(s,{objectMode:!1})),s=_.pipeline([s,new dM({length:O,maxRate:nP.toFiniteNumber(x)})],nP.noop),T&&s.on("progress",(e=>{T(Object.assign(e,{upload:!0}))}))),e.auth&&(N=(e.auth.username||"")+":"+(e.auth.password||"")),!N&&b.username&&(N=b.username+":"+b.password),N&&A.delete("authorization");try{D=nL(b.pathname+b.search,e.params,e.paramsSerializer).replace(/^\?/,"")}catch(t){const r=Error(t.message);return r.config=e,r.url=e.url,r.exists=!0,n(r)}A.set("Accept-Encoding","gzip, compress, deflate"+(TM?", br":""),!1);const P={path:D,method:p,headers:A.toJSON(),agents:{http:e.httpAgent,https:e.httpsAgent},auth:N,protocol:E,family:o,beforeRedirect:IM,beforeRedirects:{}};let L;!nP.isUndefined(i)&&(P.lookup=i),e.socketPath?P.socketPath=e.socketPath:(P.hostname=b.hostname,P.port=b.port,RM(P,e.proxy,E+"//"+b.hostname+(b.port?":"+b.port:"")+P.path));const M=kM.test(P.protocol);if(P.agent=M?e.httpsAgent:e.httpAgent,e.transport?L=e.transport:0===e.maxRedirects?L=M?I:C:(e.maxRedirects&&(P.maxRedirects=e.maxRedirects),e.beforeRedirect&&(P.beforeRedirects.config=e.beforeRedirect),L=M?xM:wM),P.maxBodyLength=e.maxBodyLength>-1?e.maxBodyLength:1/0,e.insecureHTTPParser&&(P.insecureHTTPParser=e.insecureHTTPParser),h=L.request(P,(function(r){if(h.destroyed)return;const s=[r];if(S){const e=new dM({length:nP.toFiniteNumber(+r.headers["content-length"]),maxRate:nP.toFiniteNumber(k)});S&&e.on("progress",(e=>{S(Object.assign(e,{download:!0}))})),s.push(e)}let i=r;const o=r.req||h;if(!1!==e.decompress&&r.headers["content-encoding"])switch("HEAD"!==p&&204!==r.statusCode||delete r.headers["content-encoding"],(r.headers["content-encoding"]||"").toLowerCase()){case"gzip":case"x-gzip":case"compress":case"x-compress":s.push(R.createUnzip(AM)),delete r.headers["content-encoding"];break;case"deflate":s.push(new EM),s.push(R.createUnzip(AM)),delete r.headers["content-encoding"];break;case"br":TM&&(s.push(R.createBrotliDecompress(SM)),delete r.headers["content-encoding"])}i=s.length>1?_.pipeline(s,nP.noop):s[0];const a=_.finished(i,(()=>{a(),g()})),l={status:r.statusCode,statusText:r.statusMessage,headers:new bL(r.headers),config:e,request:o};if("stream"===c)l.data=i,SL(t,n,l);else{const r=[];let s=0;i.on("data",(function(t){r.push(t),s+=t.length,e.maxContentLength>-1&&s>e.maxContentLength&&(f=!0,i.destroy(),n(new rP("maxContentLength size of "+e.maxContentLength+" exceeded",rP.ERR_BAD_RESPONSE,e,o)))})),i.on("aborted",(function(){if(f)return;const t=new rP("maxContentLength size of "+e.maxContentLength+" exceeded",rP.ERR_BAD_RESPONSE,e,o);i.destroy(t),n(t)})),i.on("error",(function(t){h.destroyed||n(rP.from(t,null,e,o))})),i.on("end",(function(){try{let e=1===r.length?r[0]:Buffer.concat(r);"arraybuffer"!==c&&(e=e.toString(u),u&&"utf8"!==u||(e=nP.stripBOM(e))),l.data=e}catch(t){return n(rP.from(t,null,e,l.request,l))}SL(t,n,l)}))}m.once("abort",(e=>{i.destroyed||(i.emit("error",e),i.destroy())}))})),m.once("abort",(e=>{n(e),h.destroy(e)})),h.on("error",(function(t){n(rP.from(t,null,e,h))})),h.on("socket",(function(e){e.setKeepAlive(!0,6e4)})),e.timeout){const t=parseInt(e.timeout,10);if(Number.isNaN(t))return void n(new rP("error trying to parse `config.timeout` to int",rP.ERR_BAD_OPTION_VALUE,e,h));h.setTimeout(t,(function(){if(d)return;let t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(new rP(t,(e.transitional||sL).clarifyTimeoutError?rP.ETIMEDOUT:rP.ECONNABORTED,e,h)),y()}))}if(nP.isStream(s)){let t=!1,n=!1;s.on("end",(()=>{t=!0})),s.once("error",(e=>{n=!0,h.destroy(e)})),s.on("close",(()=>{t||n||y(new AL("Request stream has been aborted",e,h))})),s.pipe(h)}else h.end(s)},new Promise(((e,n)=>{let r,s;const i=(e,t)=>{s||(s=!0,r&&r(e,t))},o=e=>{i(e,!0),n(e)};t((t=>{i(t),e(t)}),o,(e=>r=e)).catch(o)}));var t},PM=(e,t,n=3)=>{let r=0;const s=uM(50,250);return lM((n=>{const i=n.loaded,o=n.lengthComputable?n.total:void 0,a=i-r,c=s(a);r=i;const l={loaded:i,total:o,progress:o?i/o:void 0,bytes:a,rate:c||void 0,estimated:c&&o&&o>=i?(o-i)/c:void 0,event:n,lengthComputable:null!=o};l[t?"download":"upload"]=!0,e(l)}),n)},LM=pL.hasStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a");let n;function r(n){let r=n;return e&&(t.setAttribute("href",r),r=t.href),t.setAttribute("href",r),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:"/"===t.pathname.charAt(0)?t.pathname:"/"+t.pathname}}return n=r(window.location.href),function(e){const t=nP.isString(e)?r(e):e;return t.protocol===n.protocol&&t.host===n.host}}():function(){return!0},MM=pL.hasStandardBrowserEnv?{write(e,t,n,r,s,i){const o=[e+"="+encodeURIComponent(t)];nP.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),nP.isString(r)&&o.push("path="+r),nP.isString(s)&&o.push("domain="+s),!0===i&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};const BM=e=>e instanceof bL?{...e}:e;function jM(e,t){const n={};function r(e,t,n){return nP.isPlainObject(e)&&nP.isPlainObject(t)?nP.merge.call({caseless:n},e,t):nP.isPlainObject(t)?nP.merge({},t):nP.isArray(t)?t.slice():t}function s(e,t,n){return nP.isUndefined(t)?nP.isUndefined(e)?void 0:r(void 0,e,n):r(e,t,n)}function i(e,t){if(!nP.isUndefined(t))return r(void 0,t)}function o(e,t){return nP.isUndefined(t)?nP.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function a(n,s,i){return i in t?r(n,s):i in e?r(void 0,n):void 0}const c={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(e,t)=>s(BM(e),BM(t),!0)};return nP.forEach(Object.keys(Object.assign({},e,t=t||{})),(function(r){const i=c[r]||s,o=i(e[r],t[r],r);nP.isUndefined(o)&&i!==a||(n[r]=o)})),n}var FM=e=>{const t=jM({},e);let n,{data:r,withXSRFToken:s,xsrfHeaderName:i,xsrfCookieName:o,headers:a,auth:c}=t;if(t.headers=a=bL.from(a),t.url=nL(TL(t.baseURL,t.url),e.params,e.paramsSerializer),c&&a.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):""))),nP.isFormData(r))if(pL.hasStandardBrowserEnv||pL.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if(!1!==(n=a.getContentType())){const[e,...t]=n?n.split(";").map((e=>e.trim())).filter(Boolean):[];a.setContentType([e||"multipart/form-data",...t].join("; "))}if(pL.hasStandardBrowserEnv&&(s&&nP.isFunction(s)&&(s=s(t)),s||!1!==s&&LM(t.url))){const e=i&&o&&MM.read(o);e&&a.set(i,e)}return t},$M="undefined"!=typeof XMLHttpRequest&&function(e){return new Promise((function(t,n){const r=FM(e);let s=r.data;const i=bL.from(r.headers).normalize();let o,{responseType:a}=r;function c(){r.cancelToken&&r.cancelToken.unsubscribe(o),r.signal&&r.signal.removeEventListener("abort",o)}let l=new XMLHttpRequest;function u(){if(!l)return;const r=bL.from("getAllResponseHeaders"in l&&l.getAllResponseHeaders());SL((function(e){t(e),c()}),(function(e){n(e),c()}),{data:a&&"text"!==a&&"json"!==a?l.response:l.responseText,status:l.status,statusText:l.statusText,headers:r,config:e,request:l}),l=null}l.open(r.method.toUpperCase(),r.url,!0),l.timeout=r.timeout,"onloadend"in l?l.onloadend=u:l.onreadystatechange=function(){l&&4===l.readyState&&(0!==l.status||l.responseURL&&0===l.responseURL.indexOf("file:"))&&setTimeout(u)},l.onabort=function(){l&&(n(new rP("Request aborted",rP.ECONNABORTED,r,l)),l=null)},l.onerror=function(){n(new rP("Network Error",rP.ERR_NETWORK,r,l)),l=null},l.ontimeout=function(){let e=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";r.timeoutErrorMessage&&(e=r.timeoutErrorMessage),n(new rP(e,(r.transitional||sL).clarifyTimeoutError?rP.ETIMEDOUT:rP.ECONNABORTED,r,l)),l=null},void 0===s&&i.setContentType(null),"setRequestHeader"in l&&nP.forEach(i.toJSON(),(function(e,t){l.setRequestHeader(t,e)})),nP.isUndefined(r.withCredentials)||(l.withCredentials=!!r.withCredentials),a&&"json"!==a&&(l.responseType=r.responseType),"function"==typeof r.onDownloadProgress&&l.addEventListener("progress",PM(r.onDownloadProgress,!0)),"function"==typeof r.onUploadProgress&&l.upload&&l.upload.addEventListener("progress",PM(r.onUploadProgress)),(r.cancelToken||r.signal)&&(o=t=>{l&&(n(!t||t.type?new AL(null,e,l):t),l.abort(),l=null)},r.cancelToken&&r.cancelToken.subscribe(o),r.signal&&(r.signal.aborted?o():r.signal.addEventListener("abort",o)));const p=aM(r.url);p&&-1===pL.protocols.indexOf(p)?n(new rP("Unsupported protocol "+p+":",rP.ERR_BAD_REQUEST,e)):l.send(s||null)}))};const UM=(e,t)=>{let n,r=new AbortController;const s=function(e){if(!n){n=!0,o();const t=e instanceof Error?e:this.reason;r.abort(t instanceof rP?t:new AL(t instanceof Error?t.message:t))}};let i=t&&setTimeout((()=>{s(new rP(`timeout ${t} of ms exceeded`,rP.ETIMEDOUT))}),t);const o=()=>{e&&(i&&clearTimeout(i),i=null,e.forEach((e=>{e&&(e.removeEventListener?e.removeEventListener("abort",s):e.unsubscribe(s))})),e=null)};e.forEach((e=>e&&e.addEventListener&&e.addEventListener("abort",s)));const{signal:a}=r;return a.unsubscribe=o,[a,()=>{i&&clearTimeout(i),i=null}]},HM=function*(e,t){let n=e.byteLength;if(!t||t>n)return void(yield e);let r,s=0;for(;n>s;)r=s+t,yield e.slice(s,r),s=r},GM=(e,t,n,r,s)=>{const i=async function*(e,t,n){for await(const r of e)yield*HM(ArrayBuffer.isView(r)?r:await n(r+""),t)}(e,t,s);let o=0;return new ReadableStream({type:"bytes",async pull(e){const{done:t,value:s}=await i.next();if(t)return e.close(),void r();n&&n(o+=s.byteLength),e.enqueue(new Uint8Array(s))},cancel:e=>(r(e),i.return())},{highWaterMark:2})},qM=(e,t)=>{const n=null!=e;return r=>setTimeout((()=>t({lengthComputable:n,total:e,loaded:r})))},zM="function"==typeof fetch&&"function"==typeof Request&&"function"==typeof Response,VM=zM&&"function"==typeof ReadableStream,YM=zM&&("function"==typeof TextEncoder?(KM=new TextEncoder,e=>KM.encode(e)):async e=>new Uint8Array(await new Response(e).arrayBuffer()));var KM;const QM=VM&&(()=>{let e=!1;const t=new Request(pL.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t})(),WM=VM&&!!(()=>{try{return nP.isReadableStream(new Response("").body)}catch(e){}})(),JM={stream:WM&&(e=>e.body)};zM&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach((t=>{!JM[t]&&(JM[t]=nP.isFunction(e[t])?e=>e[t]():(e,n)=>{throw new rP(`Response type '${t}' is not supported`,rP.ERR_NOT_SUPPORT,n)})}))})(new Response);var XM=zM&&(async e=>{let{url:t,method:n,data:r,signal:s,cancelToken:i,timeout:o,onDownloadProgress:a,onUploadProgress:c,responseType:l,headers:u,withCredentials:p="same-origin",fetchOptions:d}=FM(e);l=l?(l+"").toLowerCase():"text";let h,f,[m,g]=s||i||o?UM([s,i],o):[];const y=()=>{!h&&setTimeout((()=>{m&&m.unsubscribe()})),h=!0};let v;try{if(c&&QM&&"get"!==n&&"head"!==n&&0!==(v=await(async(e,t)=>{const n=nP.toFiniteNumber(e.getContentLength());return null==n?(async e=>null==e?0:nP.isBlob(e)?e.size:nP.isSpecCompliantForm(e)?(await new Request(e).arrayBuffer()).byteLength:nP.isArrayBufferView(e)?e.byteLength:(nP.isURLSearchParams(e)&&(e+=""),nP.isString(e)?(await YM(e)).byteLength:void 0))(t):n})(u,r))){let e,n=new Request(t,{method:"POST",body:r,duplex:"half"});nP.isFormData(r)&&(e=n.headers.get("content-type"))&&u.setContentType(e),n.body&&(r=GM(n.body,65536,qM(v,PM(c)),null,YM))}nP.isString(p)||(p=p?"cors":"omit"),f=new Request(t,{...d,signal:m,method:n.toUpperCase(),headers:u.normalize().toJSON(),body:r,duplex:"half",withCredentials:p});let s=await fetch(f);const i=WM&&("stream"===l||"response"===l);if(WM&&(a||i)){const e={};["status","statusText","headers"].forEach((t=>{e[t]=s[t]}));const t=nP.toFiniteNumber(s.headers.get("content-length"));s=new Response(GM(s.body,65536,a&&qM(t,PM(a,!0)),i&&y,YM),e)}l=l||"text";let o=await JM[nP.findKey(JM,l)||"text"](s,e);return!i&&y(),g&&g(),await new Promise(((t,n)=>{SL(t,n,{data:o,headers:bL.from(s.headers),status:s.status,statusText:s.statusText,config:e,request:f})}))}catch(t){if(y(),t&&"TypeError"===t.name&&/fetch/i.test(t.message))throw Object.assign(new rP("Network Error",rP.ERR_NETWORK,e,f),{cause:t.cause||t});throw rP.from(t,t&&t.code,e,f)}});const ZM={http:DM,xhr:$M,fetch:XM};nP.forEach(ZM,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(e){}Object.defineProperty(e,"adapterName",{value:t})}}));const eB=e=>"- "+e,tB=e=>nP.isFunction(e)||null===e||!1===e;var nB=e=>{e=nP.isArray(e)?e:[e];const{length:t}=e;let n,r;const s={};for(let i=0;t>i;i++){let t;if(n=e[i],r=n,!tB(n)&&(r=ZM[(t=n+"").toLowerCase()],void 0===r))throw new rP(`Unknown adapter '${t}'`);if(r)break;s[t||"#"+i]=r}if(!r){const e=Object.entries(s).map((([e,t])=>`adapter ${e} `+(!1===t?"is not supported by the environment":"is not available in the build")));throw new rP("There is no suitable adapter to dispatch the request "+(t?e.length>1?"since :\n"+e.map(eB).join("\n"):" "+eB(e[0]):"as no adapter specified"),"ERR_NOT_SUPPORT")}return r};function rB(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new AL(null,e)}function sB(e){return rB(e),e.headers=bL.from(e.headers),e.data=EL.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1),nB(e.adapter||hL.adapter)(e).then((function(t){return rB(e),t.data=EL.call(e,e.transformResponse,t),t.headers=bL.from(t.headers),t}),(function(t){return _L(t)||(rB(e),t&&t.response&&(t.response.data=EL.call(e,e.transformResponse,t.response),t.response.headers=bL.from(t.response.headers))),Promise.reject(t)}))}const iB={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{iB[e]=function(n){return typeof n===e||"a"+(1>t?"n ":" ")+e}}));const oB={};iB.transitional=function(e,t,n){return(r,s,i)=>{if(!1===e)throw new rP(function(e,t){return"[Axios v1.7.2] Transitional option '"+e+"'"+t+(n?". "+n:"")}(s," has been removed"+(t?" in "+t:"")),rP.ERR_DEPRECATED);return t&&!oB[s]&&(oB[s]=!0),!e||e(r,s,i)}};var aB={assertOptions:function(e,t,n){if("object"!=typeof e)throw new rP("options must be an object",rP.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let s=r.length;for(;s-- >0;){const i=r[s],o=t[i];if(o){const t=e[i],n=void 0===t||o(t,i,e);if(!0!==n)throw new rP("option "+i+" must be "+n,rP.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new rP("Unknown option "+i,rP.ERR_BAD_OPTION)}},validators:iB};const cB=aB.validators;class lB{constructor(e){this.defaults=e,this.interceptors={request:new rL,response:new rL}}async request(e,t){try{return await this._request(e,t)}catch(e){if(e instanceof Error){let t;Error.captureStackTrace?Error.captureStackTrace(t={}):t=Error();const n=t.stack?t.stack.replace(/^.+\n/,""):"";try{e.stack?n&&!(e.stack+"").endsWith(n.replace(/^.+\n.+\n/,""))&&(e.stack+="\n"+n):e.stack=n}catch(e){}}throw e}}_request(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},t=jM(this.defaults,t);const{transitional:n,paramsSerializer:r,headers:s}=t;void 0!==n&&aB.assertOptions(n,{silentJSONParsing:cB.transitional(cB.boolean),forcedJSONParsing:cB.transitional(cB.boolean),clarifyTimeoutError:cB.transitional(cB.boolean)},!1),null!=r&&(nP.isFunction(r)?t.paramsSerializer={serialize:r}:aB.assertOptions(r,{encode:cB.function,serialize:cB.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();let i=s&&nP.merge(s.common,s[t.method]);s&&nP.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete s[e]})),t.headers=bL.concat(i,s);const o=[];let a=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(a=a&&e.synchronous,o.unshift(e.fulfilled,e.rejected))}));const c=[];let l;this.interceptors.response.forEach((function(e){c.push(e.fulfilled,e.rejected)}));let u,p=0;if(!a){const e=[sB.bind(this),void 0];for(e.unshift.apply(e,o),e.push.apply(e,c),u=e.length,l=Promise.resolve(t);u>p;)l=l.then(e[p++],e[p++]);return l}u=o.length;let d=t;for(p=0;u>p;){const e=o[p++],t=o[p++];try{d=e(d)}catch(e){t.call(this,e);break}}try{l=sB(d)}catch(e){return Promise.reject(e)}for(p=0,u=c.length;u>p;)l=l.then(c[p++],c[p++]);return l}getUri(e){return nL(TL((e=jM(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}}nP.forEach(["delete","get","head","options"],(function(e){lB.prototype[e]=function(t,n){return this.request(jM(n||{},{method:e,url:t,data:(n||{}).data}))}})),nP.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,s){return this.request(jM(s||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}lB.prototype[e]=t(),lB.prototype[e+"Form"]=t(!0)}));class uB{constructor(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const n=this;this.promise.then((e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null})),this.promise.then=e=>{let t;const r=new Promise((e=>{n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e,r,s){n.reason||(n.reason=new AL(e,r,s),t(n.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}static source(){let e;return{token:new uB((function(t){e=t})),cancel:e}}}const pB={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(pB).forEach((([e,t])=>{pB[t]=e}));const dB=function e(t){const n=new lB(t),r=bD(lB.prototype.request,n);return nP.extend(r,lB.prototype,n,{allOwnKeys:!0}),nP.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e(jM(t,n))},r}(hL);dB.Axios=lB,dB.CanceledError=AL,dB.CancelToken=uB,dB.isCancel=_L,dB.VERSION=oM,dB.toFormData=JP,dB.AxiosError=rP,dB.Cancel=dB.CanceledError,dB.all=function(e){return Promise.all(e)},dB.spread=function(e){return function(t){return e.apply(null,t)}},dB.isAxiosError=function(e){return nP.isObject(e)&&!0===e.isAxiosError},dB.mergeConfig=jM,dB.AxiosHeaders=bL,dB.formToJSON=e=>dL(nP.isHTMLForm(e)?new FormData(e):e),dB.getAdapter=nB,dB.HttpStatusCode=pB,dB.default=dB;class hB{constructor(){this.subExt=["srt","ass","ssa","vtt","scc","stl","ttml"],this.removeExt=e=>e.includes(".")?e.substring(0,e.lastIndexOf(".")):e,this._cookie={},this._http=dB.create({timeout:15e3,httpsAgent:new I.Agent({keepAlive:!0,rejectUnauthorized:!1}),httpAgent:new C.Agent({keepAlive:!0})}),this._http.interceptors.request.use((e=>(Object.keys(this._cookie).length&&(e.headers.Cookie=Object.entries(this._cookie).map((([e,t])=>`${e}=${t}`)).join("; ")),e)),(e=>Promise.reject(e))),this._http.interceptors.response.use((e=>{for(const t of e.headers.get("set-cookie")||[]){const e=t.split(";",1);if(1>e.length)continue;const n=e[0],r=n.indexOf("=");if(-1===n)continue;const s=n.substring(0,r),i=n.substring(r+1);this._cookie[s]=i}return e}),(e=>Promise.reject(e)))}setCookie(e){if(e&&"string"==typeof e)for(const t of e.split(";")||[]){const e=t.indexOf("=");if(-1===t)continue;const n=t.substring(0,e),r=t.substring(e+1);this._cookie[n]=r}}delay(e){return new Promise((t=>setTimeout(t,e)))}matchShare(e){}async getVod(e){}async play(e,t,n){}pair(){}findSubs(){}}var fB,mB={},gB=[],yB={exports:{}},vB={exports:{}};function bB(){return fB||(fB=1,vB.exports=function(){var e=e||function(e,t){var n;if("undefined"!=typeof window&&window.crypto&&(n=window.crypto),"undefined"!=typeof self&&self.crypto&&(n=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(n=globalThis.crypto),!n&&"undefined"!=typeof window&&window.msCrypto&&(n=window.msCrypto),!n&&void 0!==D&&D.crypto&&(n=D.crypto),!n)try{n=require("crypto")}catch(e){}var r=function(){if(n){if("function"==typeof n.getRandomValues)try{return n.getRandomValues(new Uint32Array(1))[0]}catch(e){}if("function"==typeof n.randomBytes)try{return n.randomBytes(4).readInt32LE()}catch(e){}}throw Error("Native crypto module could not be used to get secure random number.")},s=Object.create||function(){function e(){}return function(t){var n;return e.prototype=t,n=new e,e.prototype=null,n}}(),i={},o=i.lib={},a=o.Base={extend:function(e){var t=s(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},c=o.WordArray=a.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||u).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes,s=e.sigBytes;if(this.clamp(),r%4)for(var i=0;s>i;i++)t[r+i>>>2]|=(n[i>>>2]>>>24-i%4*8&255)<<24-(r+i)%4*8;else for(var o=0;s>o;o+=4)t[r+o>>>2]=n[o>>>2];return this.sigBytes+=s,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=a.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],n=0;e>n;n+=4)t.push(r());return new c.init(t,e)}}),l=i.enc={},u=l.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],s=0;n>s;s++){var i=t[s>>>2]>>>24-s%4*8&255;r.push((i>>>4).toString(16)),r.push((15&i).toString(16))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;t>r;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new c.init(n,t/2)}},p=l.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],s=0;n>s;s++)r.push(String.fromCharCode(t[s>>>2]>>>24-s%4*8&255));return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;t>r;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new c.init(n,t)}},d=l.Utf8={stringify:function(e){try{return decodeURIComponent(escape(p.stringify(e)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(e){return p.parse(unescape(encodeURIComponent(e)))}},h=o.BufferedBlockAlgorithm=a.extend({reset:function(){this._data=new c.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=d.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n,r=this._data,s=r.words,i=r.sigBytes,o=this.blockSize,a=i/(4*o),l=(a=t?e.ceil(a):e.max((0|a)-this._minBufferSize,0))*o,u=e.min(4*l,i);if(l){for(var p=0;l>p;p+=o)this._doProcessBlock(s,p);n=s.splice(0,l),r.sigBytes-=u}return new c.init(n,u)},clone:function(){var e=a.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});o.Hasher=h.extend({cfg:a.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){h.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new f.HMAC.init(e,n).finalize(t)}}});var f=i.algo={};return i}(Math);return e}()),vB.exports}var EB,_B={exports:{}};function AB(){return EB||(EB=1,_B.exports=function(e){return n=(t=e.lib).Base,r=t.WordArray,(s=e.x64={}).Word=n.extend({init:function(e,t){this.high=e,this.low=t}}),s.WordArray=n.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:8*e.length},toX32:function(){for(var e=this.words,t=e.length,n=[],s=0;t>s;s++){var i=e[s];n.push(i.high),n.push(i.low)}return r.create(n,this.sigBytes)},clone:function(){for(var e=n.clone.call(this),t=e.words=this.words.slice(0),r=t.length,s=0;r>s;s++)t[s]=t[s].clone();return e}}),e;var t,n,r,s}(bB())),_B.exports}var SB,TB,wB,xB={exports:{}};function kB(){return wB||(wB=1,xB.exports=function(e){return t=e.lib.WordArray,e.enc.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,r=this._map;e.clamp();for(var s=[],i=0;n>i;i+=3)for(var o=(t[i>>>2]>>>24-i%4*8&255)<<16|(t[i+1>>>2]>>>24-(i+1)%4*8&255)<<8|t[i+2>>>2]>>>24-(i+2)%4*8&255,a=0;4>a&&n>i+.75*a;a++)s.push(r.charAt(o>>>6*(3-a)&63));var c=r.charAt(64);if(c)for(;s.length%4;)s.push(c);return s.join("")},parse:function(e){var n=e.length,r=this._map,s=this._reverseMap;if(!s){s=this._reverseMap=[];for(var i=0;r.length>i;i++)s[r.charCodeAt(i)]=i}var o=r.charAt(64);if(o){var a=e.indexOf(o);-1!==a&&(n=a)}return function(e,n,r){for(var s=[],i=0,o=0;n>o;o++)if(o%4){var a=r[e.charCodeAt(o-1)]<<o%4*2,c=r[e.charCodeAt(o)]>>>6-o%4*2;s[i>>>2]|=(a|c)<<24-i%4*8,i++}return t.create(s,i)}(e,n,s)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},e.enc.Base64;var t}(bB())),xB.exports}var CB,IB,RB={exports:{}};function OB(){return IB||(IB=1,RB.exports=function(e){return function(t){var n=e,r=n.lib,s=r.WordArray,i=r.Hasher,o=n.algo,a=[];!function(){for(var e=0;64>e;e++)a[e]=4294967296*t.abs(t.sin(e+1))|0}();var c=o.MD5=i.extend({_doReset:function(){this._hash=new s.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var n=0;16>n;n++){var r=t+n,s=e[r];e[r]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8)}var i=this._hash.words,o=e[t+0],c=e[t+1],h=e[t+2],f=e[t+3],m=e[t+4],g=e[t+5],y=e[t+6],v=e[t+7],b=e[t+8],E=e[t+9],_=e[t+10],A=e[t+11],S=e[t+12],T=e[t+13],w=e[t+14],x=e[t+15],k=i[0],C=i[1],I=i[2],R=i[3];k=l(k,C,I,R,o,7,a[0]),R=l(R,k,C,I,c,12,a[1]),I=l(I,R,k,C,h,17,a[2]),C=l(C,I,R,k,f,22,a[3]),k=l(k,C,I,R,m,7,a[4]),R=l(R,k,C,I,g,12,a[5]),I=l(I,R,k,C,y,17,a[6]),C=l(C,I,R,k,v,22,a[7]),k=l(k,C,I,R,b,7,a[8]),R=l(R,k,C,I,E,12,a[9]),I=l(I,R,k,C,_,17,a[10]),C=l(C,I,R,k,A,22,a[11]),k=l(k,C,I,R,S,7,a[12]),R=l(R,k,C,I,T,12,a[13]),I=l(I,R,k,C,w,17,a[14]),k=u(k,C=l(C,I,R,k,x,22,a[15]),I,R,c,5,a[16]),R=u(R,k,C,I,y,9,a[17]),I=u(I,R,k,C,A,14,a[18]),C=u(C,I,R,k,o,20,a[19]),k=u(k,C,I,R,g,5,a[20]),R=u(R,k,C,I,_,9,a[21]),I=u(I,R,k,C,x,14,a[22]),C=u(C,I,R,k,m,20,a[23]),k=u(k,C,I,R,E,5,a[24]),R=u(R,k,C,I,w,9,a[25]),I=u(I,R,k,C,f,14,a[26]),C=u(C,I,R,k,b,20,a[27]),k=u(k,C,I,R,T,5,a[28]),R=u(R,k,C,I,h,9,a[29]),I=u(I,R,k,C,v,14,a[30]),k=p(k,C=u(C,I,R,k,S,20,a[31]),I,R,g,4,a[32]),R=p(R,k,C,I,b,11,a[33]),I=p(I,R,k,C,A,16,a[34]),C=p(C,I,R,k,w,23,a[35]),k=p(k,C,I,R,c,4,a[36]),R=p(R,k,C,I,m,11,a[37]),I=p(I,R,k,C,v,16,a[38]),C=p(C,I,R,k,_,23,a[39]),k=p(k,C,I,R,T,4,a[40]),R=p(R,k,C,I,o,11,a[41]),I=p(I,R,k,C,f,16,a[42]),C=p(C,I,R,k,y,23,a[43]),k=p(k,C,I,R,E,4,a[44]),R=p(R,k,C,I,S,11,a[45]),I=p(I,R,k,C,x,16,a[46]),k=d(k,C=p(C,I,R,k,h,23,a[47]),I,R,o,6,a[48]),R=d(R,k,C,I,v,10,a[49]),I=d(I,R,k,C,w,15,a[50]),C=d(C,I,R,k,g,21,a[51]),k=d(k,C,I,R,S,6,a[52]),R=d(R,k,C,I,f,10,a[53]),I=d(I,R,k,C,_,15,a[54]),C=d(C,I,R,k,c,21,a[55]),k=d(k,C,I,R,b,6,a[56]),R=d(R,k,C,I,x,10,a[57]),I=d(I,R,k,C,y,15,a[58]),C=d(C,I,R,k,T,21,a[59]),k=d(k,C,I,R,m,6,a[60]),R=d(R,k,C,I,A,10,a[61]),I=d(I,R,k,C,h,15,a[62]),C=d(C,I,R,k,E,21,a[63]),i[0]=i[0]+k|0,i[1]=i[1]+C|0,i[2]=i[2]+I|0,i[3]=i[3]+R|0},_doFinalize:function(){var e=this._data,n=e.words,r=8*this._nDataBytes,s=8*e.sigBytes;n[s>>>5]|=128<<24-s%32;var i=t.floor(r/4294967296),o=r;n[15+(s+64>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),n[14+(s+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),e.sigBytes=4*(n.length+1),this._process();for(var a=this._hash,c=a.words,l=0;4>l;l++){var u=c[l];c[l]=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8)}return a},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}});function l(e,t,n,r,s,i,o){var a=e+(t&n|~t&r)+s+o;return(a<<i|a>>>32-i)+t}function u(e,t,n,r,s,i,o){var a=e+(t&r|n&~r)+s+o;return(a<<i|a>>>32-i)+t}function p(e,t,n,r,s,i,o){var a=e+(t^n^r)+s+o;return(a<<i|a>>>32-i)+t}function d(e,t,n,r,s,i,o){var a=e+(n^(t|~r))+s+o;return(a<<i|a>>>32-i)+t}n.MD5=i._createHelper(c),n.HmacMD5=i._createHmacHelper(c)}(Math),e.MD5}(bB())),RB.exports}var NB,DB={exports:{}};function PB(){return NB||(NB=1,DB.exports=function(e){return r=(n=(t=e).lib).WordArray,i=[],o=t.algo.SHA1=(s=n.Hasher).extend({_doReset:function(){this._hash=new r.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],s=n[1],o=n[2],a=n[3],c=n[4],l=0;80>l;l++){if(16>l)i[l]=0|e[t+l];else{var u=i[l-3]^i[l-8]^i[l-14]^i[l-16];i[l]=u<<1|u>>>31}var p=(r<<5|r>>>27)+c+i[l];p+=20>l?1518500249+(s&o|~s&a):40>l?1859775393+(s^o^a):60>l?(s&o|s&a|o&a)-1894007588:(s^o^a)-899497514,c=a,a=o,o=s<<30|s>>>2,s=r,r=p}n[0]=n[0]+r|0,n[1]=n[1]+s|0,n[2]=n[2]+o|0,n[3]=n[3]+a|0,n[4]=n[4]+c|0},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;return t[r>>>5]|=128<<24-r%32,t[14+(r+64>>>9<<4)]=Math.floor(n/4294967296),t[15+(r+64>>>9<<4)]=n,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=s.clone.call(this);return e._hash=this._hash.clone(),e}}),t.SHA1=s._createHelper(o),t.HmacSHA1=s._createHmacHelper(o),e.SHA1;var t,n,r,s,i,o}(bB())),DB.exports}var LB,MB={exports:{}};function BB(){return LB||(LB=1,MB.exports=function(e){return function(t){var n=e,r=n.lib,s=r.WordArray,i=r.Hasher,o=n.algo,a=[],c=[];!function(){function e(e){for(var n=t.sqrt(e),r=2;n>=r;r++)if(!(e%r))return!1;return!0}function n(e){return 4294967296*(e-(0|e))|0}for(var r=2,s=0;64>s;)e(r)&&(8>s&&(a[s]=n(t.pow(r,.5))),c[s]=n(t.pow(r,1/3)),s++),r++}();var l=[],u=o.SHA256=i.extend({_doReset:function(){this._hash=new s.init(a.slice(0))},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],s=n[1],i=n[2],o=n[3],a=n[4],u=n[5],p=n[6],d=n[7],h=0;64>h;h++){if(16>h)l[h]=0|e[t+h];else{var f=l[h-15],m=l[h-2];l[h]=((f<<25|f>>>7)^(f<<14|f>>>18)^f>>>3)+l[h-7]+((m<<15|m>>>17)^(m<<13|m>>>19)^m>>>10)+l[h-16]}var g=r&s^r&i^s&i,y=d+((a<<26|a>>>6)^(a<<21|a>>>11)^(a<<7|a>>>25))+(a&u^~a&p)+c[h]+l[h];d=p,p=u,u=a,a=o+y|0,o=i,i=s,s=r,r=y+(((r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22))+g)|0}n[0]=n[0]+r|0,n[1]=n[1]+s|0,n[2]=n[2]+i|0,n[3]=n[3]+o|0,n[4]=n[4]+a|0,n[5]=n[5]+u|0,n[6]=n[6]+p|0,n[7]=n[7]+d|0},_doFinalize:function(){var e=this._data,n=e.words,r=8*this._nDataBytes,s=8*e.sigBytes;return n[s>>>5]|=128<<24-s%32,n[14+(s+64>>>9<<4)]=t.floor(r/4294967296),n[15+(s+64>>>9<<4)]=r,e.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}});n.SHA256=i._createHelper(u),n.HmacSHA256=i._createHmacHelper(u)}(Math),e.SHA256}(bB())),MB.exports}var jB,FB,$B={exports:{}};function UB(){return FB||(FB=1,$B.exports=function(e){return function(){var t=e,n=t.lib.Hasher,r=t.x64,s=r.Word,i=r.WordArray,o=t.algo;function a(){return s.create.apply(s,arguments)}var c=[a(1116352408,3609767458),a(1899447441,602891725),a(3049323471,3964484399),a(3921009573,2173295548),a(961987163,4081628472),a(1508970993,3053834265),a(2453635748,2937671579),a(2870763221,3664609560),a(3624381080,2734883394),a(310598401,1164996542),a(607225278,1323610764),a(1426881987,3590304994),a(1925078388,4068182383),a(2162078206,991336113),a(2614888103,633803317),a(3248222580,3479774868),a(3835390401,2666613458),a(4022224774,944711139),a(264347078,2341262773),a(604807628,2007800933),a(770255983,1495990901),a(1249150122,1856431235),a(1555081692,3175218132),a(1996064986,2198950837),a(2554220882,3999719339),a(2821834349,766784016),a(2952996808,2566594879),a(3210313671,3203337956),a(3336571891,1034457026),a(3584528711,2466948901),a(113926993,3758326383),a(338241895,168717936),a(666307205,1188179964),a(773529912,1546045734),a(1294757372,1522805485),a(1396182291,2643833823),a(1695183700,2343527390),a(1986661051,1014477480),a(2177026350,1206759142),a(2456956037,344077627),a(2730485921,1290863460),a(2820302411,3158454273),a(3259730800,3505952657),a(3345764771,106217008),a(3516065817,3606008344),a(3600352804,1432725776),a(4094571909,1467031594),a(275423344,851169720),a(430227734,3100823752),a(506948616,1363258195),a(659060556,3750685593),a(883997877,3785050280),a(958139571,3318307427),a(1322822218,3812723403),a(1537002063,2003034995),a(1747873779,3602036899),a(1955562222,1575990012),a(2024104815,1125592928),a(2227730452,2716904306),a(2361852424,442776044),a(2428436474,593698344),a(2756734187,3733110249),a(3204031479,2999351573),a(3329325298,3815920427),a(3391569614,3928383900),a(3515267271,566280711),a(3940187606,3454069534),a(4118630271,4000239992),a(116418474,1914138554),a(174292421,2731055270),a(289380356,3203993006),a(460393269,320620315),a(685471733,587496836),a(852142971,1086792851),a(1017036298,365543100),a(1126000580,2618297676),a(1288033470,3409855158),a(1501505948,4234509866),a(1607167915,987167468),a(1816402316,1246189591)],l=[];!function(){for(var e=0;80>e;e++)l[e]=a()}();var u=o.SHA512=n.extend({_doReset:function(){this._hash=new i.init([new s.init(1779033703,4089235720),new s.init(3144134277,2227873595),new s.init(1013904242,4271175723),new s.init(2773480762,1595750129),new s.init(1359893119,2917565137),new s.init(2600822924,725511199),new s.init(528734635,4215389547),new s.init(1541459225,327033209)])},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],s=n[1],i=n[2],o=n[3],a=n[4],u=n[5],p=n[6],d=n[7],h=r.high,f=r.low,m=s.high,g=s.low,y=i.high,v=i.low,b=o.high,E=o.low,_=a.high,A=a.low,S=u.high,T=u.low,w=p.high,x=p.low,k=d.high,C=d.low,I=h,R=f,O=m,N=g,D=y,P=v,L=b,M=E,B=_,j=A,F=S,$=T,U=w,H=x,G=k,q=C,z=0;80>z;z++){var V,Y,K=l[z];if(16>z)Y=K.high=0|e[t+2*z],V=K.low=0|e[t+2*z+1];else{var Q=l[z-15],W=Q.high,J=Q.low,X=(J>>>1|W<<31)^(J>>>8|W<<24)^(J>>>7|W<<25),Z=l[z-2],ee=Z.high,te=Z.low,ne=(te>>>19|ee<<13)^(te<<3|ee>>>29)^(te>>>6|ee<<26),re=l[z-7],se=l[z-16],ie=se.low;K.high=Y=(Y=(Y=((W>>>1|J<<31)^(W>>>8|J<<24)^W>>>7)+re.high+(X>>>0>(V=X+re.low)>>>0?1:0))+((ee>>>19|te<<13)^(ee<<3|te>>>29)^ee>>>6)+(ne>>>0>(V+=ne)>>>0?1:0))+se.high+(ie>>>0>(V+=ie)>>>0?1:0),K.low=V}var oe,ae=B&F^~B&U,ce=j&$^~j&H,le=I&O^I&D^O&D,ue=(R>>>28|I<<4)^(R<<30|I>>>2)^(R<<25|I>>>7),pe=c[z],de=pe.low,he=G+((B>>>14|j<<18)^(B>>>18|j<<14)^(B<<23|j>>>9))+(q>>>0>(oe=q+((j>>>14|B<<18)^(j>>>18|B<<14)^(j<<23|B>>>9)))>>>0?1:0),fe=ue+(R&N^R&P^N&P);G=U,q=H,U=F,H=$,F=B,$=j,B=L+(he=(he=(he=he+ae+(ce>>>0>(oe+=ce)>>>0?1:0))+pe.high+(de>>>0>(oe+=de)>>>0?1:0))+Y+(V>>>0>(oe+=V)>>>0?1:0))+(M>>>0>(j=M+oe|0)>>>0?1:0)|0,L=D,M=P,D=O,P=N,O=I,N=R,I=he+(((I>>>28|R<<4)^(I<<30|R>>>2)^(I<<25|R>>>7))+le+(ue>>>0>fe>>>0?1:0))+(oe>>>0>(R=oe+fe|0)>>>0?1:0)|0}f=r.low=f+R,r.high=h+I+(R>>>0>f>>>0?1:0),g=s.low=g+N,s.high=m+O+(N>>>0>g>>>0?1:0),v=i.low=v+P,i.high=y+D+(P>>>0>v>>>0?1:0),E=o.low=E+M,o.high=b+L+(M>>>0>E>>>0?1:0),A=a.low=A+j,a.high=_+B+(j>>>0>A>>>0?1:0),T=u.low=T+$,u.high=S+F+($>>>0>T>>>0?1:0),x=p.low=x+H,p.high=w+U+(H>>>0>x>>>0?1:0),C=d.low=C+q,d.high=k+G+(q>>>0>C>>>0?1:0)},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;return t[r>>>5]|=128<<24-r%32,t[30+(r+128>>>10<<5)]=Math.floor(n/4294967296),t[31+(r+128>>>10<<5)]=n,e.sigBytes=4*t.length,this._process(),this._hash.toX32()},clone:function(){var e=n.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:32});t.SHA512=n._createHelper(u),t.HmacSHA512=n._createHmacHelper(u)}(),e.SHA512}(bB(),AB())),$B.exports}var HB,GB,qB,zB,VB={exports:{}};function YB(){return zB||(zB=1,VB.exports=function(e){var t;t=e.enc.Utf8,e.algo.HMAC=e.lib.Base.extend({init:function(e,n){e=this._hasher=new e.init,"string"==typeof n&&(n=t.parse(n));var r=e.blockSize,s=4*r;n.sigBytes>s&&(n=e.finalize(n)),n.clamp();for(var i=this._oKey=n.clone(),o=this._iKey=n.clone(),a=i.words,c=o.words,l=0;r>l;l++)a[l]^=1549556828,c[l]^=909522486;i.sigBytes=o.sigBytes=s,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,n=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(n))}})}(bB())),VB.exports}var KB,QB,WB={exports:{}};function JB(){return QB||(QB=1,WB.exports=function(e){return s=(n=(t=e).lib).WordArray,o=(i=t.algo).EvpKDF=(r=n.Base).extend({cfg:r.extend({keySize:4,hasher:i.MD5,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n,r=this.cfg,i=r.hasher.create(),o=s.create(),a=o.words,c=r.keySize,l=r.iterations;c>a.length;){n&&i.update(n),n=i.update(e).finalize(t),i.reset();for(var u=1;l>u;u++)n=i.finalize(n),i.reset();o.concat(n)}return o.sigBytes=4*c,o}}),t.EvpKDF=function(e,t,n){return o.create(n).compute(e,t)},e.EvpKDF;var t,n,r,s,i,o}(bB(),PB(),YB())),WB.exports}var XB,ZB={exports:{}};function ej(){return XB||(XB=1,ZB.exports=function(e){e.lib.Cipher||function(t){var n=e,r=n.lib,s=r.Base,i=r.WordArray,o=r.BufferedBlockAlgorithm,a=n.enc.Base64,c=n.algo.EvpKDF,l=r.Cipher=o.extend({cfg:s.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,n){this.cfg=this.cfg.extend(n),this._xformMode=e,this._key=t,this.reset()},reset:function(){o.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function e(e){return"string"==typeof e?v:g}return function(t){return{encrypt:function(n,r,s){return e(r).encrypt(t,n,r,s)},decrypt:function(n,r,s){return e(r).decrypt(t,n,r,s)}}}}()});r.StreamCipher=l.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var u=n.mode={},p=r.BlockCipherMode=s.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),d=u.CBC=function(){var e=p.extend();function t(e,t,n){var r,s=this._iv;s?(r=s,this._iv=void 0):r=this._prevBlock;for(var i=0;n>i;i++)e[t+i]^=r[i]}return e.Encryptor=e.extend({processBlock:function(e,n){var r=this._cipher,s=r.blockSize;t.call(this,e,n,s),r.encryptBlock(e,n),this._prevBlock=e.slice(n,n+s)}}),e.Decryptor=e.extend({processBlock:function(e,n){var r=this._cipher,s=r.blockSize,i=e.slice(n,n+s);r.decryptBlock(e,n),t.call(this,e,n,s),this._prevBlock=i}}),e}(),h=(n.pad={}).Pkcs7={pad:function(e,t){for(var n=4*t,r=n-e.sigBytes%n,s=r<<24|r<<16|r<<8|r,o=[],a=0;r>a;a+=4)o.push(s);var c=i.create(o,r);e.concat(c)},unpad:function(e){e.sigBytes-=255&e.words[e.sigBytes-1>>>2]}};r.BlockCipher=l.extend({cfg:l.cfg.extend({mode:d,padding:h}),reset:function(){var e;l.reset.call(this);var t=this.cfg,n=t.iv,r=t.mode;this._xformMode==this._ENC_XFORM_MODE?e=r.createEncryptor:(e=r.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==e?this._mode.init(this,n&&n.words):(this._mode=e.call(r,this,n&&n.words),this._mode.__creator=e)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e,t=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(t.pad(this._data,this.blockSize),e=this._process(!0)):(e=this._process(!0),t.unpad(e)),e},blockSize:4});var f=r.CipherParams=s.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),m=(n.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext,n=e.salt;return(n?i.create([1398893684,1701076831]).concat(n).concat(t):t).toString(a)},parse:function(e){var t,n=a.parse(e),r=n.words;return 1398893684==r[0]&&1701076831==r[1]&&(t=i.create(r.slice(2,4)),r.splice(0,4),n.sigBytes-=16),f.create({ciphertext:n,salt:t})}},g=r.SerializableCipher=s.extend({cfg:s.extend({format:m}),encrypt:function(e,t,n,r){r=this.cfg.extend(r);var s=e.createEncryptor(n,r),i=s.finalize(t),o=s.cfg;return f.create({ciphertext:i,key:n,iv:o.iv,algorithm:e,mode:o.mode,padding:o.padding,blockSize:e.blockSize,formatter:r.format})},decrypt:function(e,t,n,r){return r=this.cfg.extend(r),t=this._parse(t,r.format),e.createDecryptor(n,r).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),y=(n.kdf={}).OpenSSL={execute:function(e,t,n,r,s){if(r||(r=i.random(8)),s)o=c.create({keySize:t+n,hasher:s}).compute(e,r);else var o=c.create({keySize:t+n}).compute(e,r);var a=i.create(o.words.slice(t),4*n);return o.sigBytes=4*t,f.create({key:o,iv:a,salt:r})}},v=r.PasswordBasedCipher=g.extend({cfg:g.cfg.extend({kdf:y}),encrypt:function(e,t,n,r){var s=(r=this.cfg.extend(r)).kdf.execute(n,e.keySize,e.ivSize,r.salt,r.hasher);r.iv=s.iv;var i=g.encrypt.call(this,e,t,s.key,r);return i.mixIn(s),i},decrypt:function(e,t,n,r){r=this.cfg.extend(r),t=this._parse(t,r.format);var s=r.kdf.execute(n,e.keySize,e.ivSize,t.salt,r.hasher);return r.iv=s.iv,g.decrypt.call(this,e,t,s.key,r)}})}()}(bB(),JB())),ZB.exports}var tj,nj,rj,sj,ij,oj,aj,cj,lj,uj,pj,dj,hj,fj,mj,gj,yj;yB.exports=function(e){return e}(bB(),AB(),SB||(SB=1,function(e){(function(){if("function"==typeof ArrayBuffer){var t=e.lib.WordArray,n=t.init,r=t.init=function(e){if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),(e instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)&&(e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),e instanceof Uint8Array){for(var t=e.byteLength,r=[],s=0;t>s;s++)r[s>>>2]|=e[s]<<24-s%4*8;n.call(this,r,t)}else n.apply(this,arguments)};r.prototype=t}})()}(bB())),TB||(TB=1,function(e){(function(){var t=e.lib.WordArray,n=e.enc;function r(e){return e<<8&4278255360|e>>>8&16711935}n.Utf16=n.Utf16BE={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],s=0;n>s;s+=2)r.push(String.fromCharCode(t[s>>>2]>>>16-s%4*8&65535));return r.join("")},parse:function(e){for(var n=e.length,r=[],s=0;n>s;s++)r[s>>>1]|=e.charCodeAt(s)<<16-s%2*16;return t.create(r,2*n)}},n.Utf16LE={stringify:function(e){for(var t=e.words,n=e.sigBytes,s=[],i=0;n>i;i+=2){var o=r(t[i>>>2]>>>16-i%4*8&65535);s.push(String.fromCharCode(o))}return s.join("")},parse:function(e){for(var n=e.length,s=[],i=0;n>i;i++)s[i>>>1]|=r(e.charCodeAt(i)<<16-i%2*16);return t.create(s,2*n)}}})()}(bB())),kB(),CB||(CB=1,function(e){return t=e.lib.WordArray,e.enc.Base64url={stringify:function(e,t){void 0===t&&(t=!0);var n=e.words,r=e.sigBytes,s=t?this._safe_map:this._map;e.clamp();for(var i=[],o=0;r>o;o+=3)for(var a=(n[o>>>2]>>>24-o%4*8&255)<<16|(n[o+1>>>2]>>>24-(o+1)%4*8&255)<<8|n[o+2>>>2]>>>24-(o+2)%4*8&255,c=0;4>c&&r>o+.75*c;c++)i.push(s.charAt(a>>>6*(3-c)&63));var l=s.charAt(64);if(l)for(;i.length%4;)i.push(l);return i.join("")},parse:function(e,n){void 0===n&&(n=!0);var r=e.length,s=n?this._safe_map:this._map,i=this._reverseMap;if(!i){i=this._reverseMap=[];for(var o=0;s.length>o;o++)i[s.charCodeAt(o)]=o}var a=s.charAt(64);if(a){var c=e.indexOf(a);-1!==c&&(r=c)}return function(e,n,r){for(var s=[],i=0,o=0;n>o;o++)if(o%4){var a=r[e.charCodeAt(o-1)]<<o%4*2,c=r[e.charCodeAt(o)]>>>6-o%4*2;s[i>>>2]|=(a|c)<<24-i%4*8,i++}return t.create(s,i)}(e,r,i)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"},e.enc.Base64url;var t}(bB())),OB(),PB(),BB(),jB||(jB=1,function(e){return n=(t=e).lib.WordArray,i=(r=t.algo).SHA224=(s=r.SHA256).extend({_doReset:function(){this._hash=new n.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var e=s._doFinalize.call(this);return e.sigBytes-=4,e}}),t.SHA224=s._createHelper(i),t.HmacSHA224=s._createHmacHelper(i),e.SHA224;var t,n,r,s,i}(bB(),BB())),UB(),HB||(HB=1,function(e){return r=(n=(t=e).x64).Word,s=n.WordArray,a=(i=t.algo).SHA384=(o=i.SHA512).extend({_doReset:function(){this._hash=new s.init([new r.init(3418070365,3238371032),new r.init(1654270250,914150663),new r.init(2438529370,812702999),new r.init(355462360,4144912697),new r.init(1731405415,4290775857),new r.init(2394180231,1750603025),new r.init(3675008525,1694076839),new r.init(1203062813,3204075428)])},_doFinalize:function(){var e=o._doFinalize.call(this);return e.sigBytes-=16,e}}),t.SHA384=o._createHelper(a),t.HmacSHA384=o._createHmacHelper(a),e.SHA384;var t,n,r,s,i,o,a}(bB(),AB(),UB())),GB||(GB=1,function(e){(function(t){var n=e,r=n.lib,s=r.WordArray,i=r.Hasher,o=n.x64.Word,a=n.algo,c=[],l=[],u=[];!function(){for(var e=1,t=0,n=0;24>n;n++){c[e+5*t]=(n+1)*(n+2)/2%64;var r=(2*e+3*t)%5;e=t%5,t=r}for(e=0;5>e;e++)for(t=0;5>t;t++)l[e+5*t]=t+(2*e+3*t)%5*5;for(var s=1,i=0;24>i;i++){for(var a=0,p=0,d=0;7>d;d++){if(1&s){var h=(1<<d)-1;32>h?p^=1<<h:a^=1<<h-32}128&s?s=s<<1^113:s<<=1}u[i]=o.create(a,p)}}();var p=[];!function(){for(var e=0;25>e;e++)p[e]=o.create()}();var d=a.SHA3=i.extend({cfg:i.cfg.extend({outputLength:512}),_doReset:function(){for(var e=this._state=[],t=0;25>t;t++)e[t]=new o.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(e,t){for(var n=this._state,r=this.blockSize/2,s=0;r>s;s++){var i=e[t+2*s],o=e[t+2*s+1];i=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),(O=n[s]).high^=o=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),O.low^=i}for(var a=0;24>a;a++){for(var d=0;5>d;d++){for(var h=0,f=0,m=0;5>m;m++)h^=(O=n[d+5*m]).high,f^=O.low;var g=p[d];g.high=h,g.low=f}for(d=0;5>d;d++){var y=p[(d+4)%5],v=p[(d+1)%5],b=v.high,E=v.low;for(h=y.high^(b<<1|E>>>31),f=y.low^(E<<1|b>>>31),m=0;5>m;m++)(O=n[d+5*m]).high^=h,O.low^=f}for(var _=1;25>_;_++){var A=(O=n[_]).high,S=O.low,T=c[_];32>T?(h=A<<T|S>>>32-T,f=S<<T|A>>>32-T):(h=S<<T-32|A>>>64-T,f=A<<T-32|S>>>64-T);var w=p[l[_]];w.high=h,w.low=f}var x=p[0],k=n[0];for(x.high=k.high,x.low=k.low,d=0;5>d;d++)for(m=0;5>m;m++){var C=p[_=d+5*m],I=p[(d+1)%5+5*m],R=p[(d+2)%5+5*m];(O=n[_]).high=C.high^~I.high&R.high,O.low=C.low^~I.low&R.low}var O,N=u[a];(O=n[0]).high^=N.high,O.low^=N.low}},_doFinalize:function(){var e=this._data,n=e.words,r=8*e.sigBytes,i=32*this.blockSize;n[r>>>5]|=1<<24-r%32,n[(t.ceil((r+1)/i)*i>>>5)-1]|=128,e.sigBytes=4*n.length,this._process();for(var o=this._state,a=this.cfg.outputLength/8,c=a/8,l=[],u=0;c>u;u++){var p=o[u],d=p.high,h=p.low;d=16711935&(d<<8|d>>>24)|4278255360&(d<<24|d>>>8),l.push(h=16711935&(h<<8|h>>>24)|4278255360&(h<<24|h>>>8)),l.push(d)}return new s.init(l,a)},clone:function(){for(var e=i.clone.call(this),t=e._state=this._state.slice(0),n=0;25>n;n++)t[n]=t[n].clone();return e}});n.SHA3=i._createHelper(d),n.HmacSHA3=i._createHmacHelper(d)})(Math)}(bB(),AB())),qB||(qB=1,function(e){
/** @preserve
			(c) 2012 by Cédric Mesnil. All rights reserved.

			Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

			    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
			    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

			THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
			*/
!function(t){var n=e,r=n.lib,s=r.WordArray,i=r.Hasher,o=n.algo,a=s.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),c=s.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),l=s.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),u=s.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),p=s.create([0,1518500249,1859775393,2400959708,2840853838]),d=s.create([1352829926,1548603684,1836072691,2053994217,0]),h=o.RIPEMD160=i.extend({_doReset:function(){this._hash=s.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=0;16>n;n++){var r=t+n,s=e[r];e[r]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8)}var i,o,h,E,_,A,S,T,w,x,k,C=this._hash.words,I=p.words,R=d.words,O=a.words,N=c.words,D=l.words,P=u.words;for(A=i=C[0],S=o=C[1],T=h=C[2],w=E=C[3],x=_=C[4],n=0;80>n;n+=1)k=i+e[t+O[n]]|0,k+=16>n?f(o,h,E)+I[0]:32>n?m(o,h,E)+I[1]:48>n?g(o,h,E)+I[2]:64>n?y(o,h,E)+I[3]:v(o,h,E)+I[4],k=(k=b(k|=0,D[n]))+_|0,i=_,_=E,E=b(h,10),h=o,o=k,k=A+e[t+N[n]]|0,k+=16>n?v(S,T,w)+R[0]:32>n?y(S,T,w)+R[1]:48>n?g(S,T,w)+R[2]:64>n?m(S,T,w)+R[3]:f(S,T,w)+R[4],k=(k=b(k|=0,P[n]))+x|0,A=x,x=w,w=b(T,10),T=S,S=k;k=C[1]+h+w|0,C[1]=C[2]+E+x|0,C[2]=C[3]+_+A|0,C[3]=C[4]+i+S|0,C[4]=C[0]+o+T|0,C[0]=k},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;t[r>>>5]|=128<<24-r%32,t[14+(r+64>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),e.sigBytes=4*(t.length+1),this._process();for(var s=this._hash,i=s.words,o=0;5>o;o++){var a=i[o];i[o]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8)}return s},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}});function f(e,t,n){return e^t^n}function m(e,t,n){return e&t|~e&n}function g(e,t,n){return(e|~t)^n}function y(e,t,n){return e&n|t&~n}function v(e,t,n){return e^(t|~n)}function b(e,t){return e<<t|e>>>32-t}n.RIPEMD160=i._createHelper(h),n.HmacRIPEMD160=i._createHmacHelper(h)}()}(bB())),YB(),KB||(KB=1,function(e){return s=(n=(t=e).lib).WordArray,o=(i=t.algo).HMAC,a=i.PBKDF2=(r=n.Base).extend({cfg:r.extend({keySize:4,hasher:i.SHA256,iterations:25e4}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n=this.cfg,r=o.create(n.hasher,e),i=s.create(),a=s.create([1]),c=i.words,l=a.words,u=n.keySize,p=n.iterations;u>c.length;){var d=r.update(t).finalize(a);r.reset();for(var h=d.words,f=h.length,m=d,g=1;p>g;g++){m=r.finalize(m),r.reset();for(var y=m.words,v=0;f>v;v++)h[v]^=y[v]}i.concat(d),l[0]++}return i.sigBytes=4*u,i}}),t.PBKDF2=function(e,t,n){return a.create(n).compute(e,t)},e.PBKDF2;var t,n,r,s,i,o,a}(bB(),BB(),YB())),JB(),ej(),tj||(tj=1,function(e){e.mode.CFB=function(){var t=e.lib.BlockCipherMode.extend();function n(e,t,n,r){var s,i=this._iv;i?(s=i.slice(0),this._iv=void 0):s=this._prevBlock,r.encryptBlock(s,0);for(var o=0;n>o;o++)e[t+o]^=s[o]}return t.Encryptor=t.extend({processBlock:function(e,t){var r=this._cipher,s=r.blockSize;n.call(this,e,t,s,r),this._prevBlock=e.slice(t,t+s)}}),t.Decryptor=t.extend({processBlock:function(e,t){var r=this._cipher,s=r.blockSize,i=e.slice(t,t+s);n.call(this,e,t,s,r),this._prevBlock=i}}),t}()}(bB(),ej())),nj||(nj=1,function(e){return e.mode.CTR=(n=(t=e.lib.BlockCipherMode.extend()).Encryptor=t.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize,s=this._iv,i=this._counter;s&&(i=this._counter=s.slice(0),this._iv=void 0);var o=i.slice(0);n.encryptBlock(o,0),i[r-1]=i[r-1]+1|0;for(var a=0;r>a;a++)e[t+a]^=o[a]}}),t.Decryptor=n,t),e.mode.CTR;var t,n}(bB(),ej())),rj||(rj=1,function(e){
/** @preserve
			 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
			 * derived from CryptoJS.mode.CTR
			 * Jan Hruby jhruby.web@gmail.com
			 */
e.mode.CTRGladman=function(){var t=e.lib.BlockCipherMode.extend();function n(e){if(255&~(e>>24))e+=1<<24;else{var t=e>>16&255,n=e>>8&255,r=255&e;255===t?(t=0,255===n?(n=0,255===r?r=0:++r):++n):++t,e=0,e+=t<<16,e+=n<<8,e+=r}return e}var r=t.Encryptor=t.extend({processBlock:function(e,t){var r=this._cipher,s=r.blockSize,i=this._iv,o=this._counter;i&&(o=this._counter=i.slice(0),this._iv=void 0),function(e){0===(e[0]=n(e[0]))&&(e[1]=n(e[1]))}(o);var a=o.slice(0);r.encryptBlock(a,0);for(var c=0;s>c;c++)e[t+c]^=a[c]}});return t.Decryptor=r,t}()}(bB(),ej())),sj||(sj=1,function(e){return e.mode.OFB=(n=(t=e.lib.BlockCipherMode.extend()).Encryptor=t.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize,s=this._iv,i=this._keystream;s&&(i=this._keystream=s.slice(0),this._iv=void 0),n.encryptBlock(i,0);for(var o=0;r>o;o++)e[t+o]^=i[o]}}),t.Decryptor=n,t),e.mode.OFB;var t,n}(bB(),ej())),ij||(ij=1,function(e){return e.mode.ECB=((t=e.lib.BlockCipherMode.extend()).Encryptor=t.extend({processBlock:function(e,t){this._cipher.encryptBlock(e,t)}}),t.Decryptor=t.extend({processBlock:function(e,t){this._cipher.decryptBlock(e,t)}}),t),e.mode.ECB;var t}(bB(),ej())),oj||(oj=1,function(e){e.pad.AnsiX923={pad:function(e,t){var n=e.sigBytes,r=4*t,s=r-n%r,i=n+s-1;e.clamp(),e.words[i>>>2]|=s<<24-i%4*8,e.sigBytes+=s},unpad:function(e){e.sigBytes-=255&e.words[e.sigBytes-1>>>2]}}}(bB(),ej())),aj||(aj=1,function(e){e.pad.Iso10126={pad:function(t,n){var r=4*n,s=r-t.sigBytes%r;t.concat(e.lib.WordArray.random(s-1)).concat(e.lib.WordArray.create([s<<24],1))},unpad:function(e){e.sigBytes-=255&e.words[e.sigBytes-1>>>2]}}}(bB(),ej())),cj||(cj=1,function(e){e.pad.Iso97971={pad:function(t,n){t.concat(e.lib.WordArray.create([2147483648],1)),e.pad.ZeroPadding.pad(t,n)},unpad:function(t){e.pad.ZeroPadding.unpad(t),t.sigBytes--}}}(bB(),ej())),lj||(lj=1,function(e){e.pad.ZeroPadding={pad:function(e,t){var n=4*t;e.clamp(),e.sigBytes+=n-(e.sigBytes%n||n)},unpad:function(e){var t=e.words,n=e.sigBytes-1;for(n=e.sigBytes-1;n>=0;n--)if(t[n>>>2]>>>24-n%4*8&255){e.sigBytes=n+1;break}}}}(bB(),ej())),uj||(uj=1,function(e){e.pad.NoPadding={pad:function(){},unpad:function(){}}}(bB(),ej())),pj||(pj=1,function(e){return t=e.lib.CipherParams,n=e.enc.Hex,e.format.Hex={stringify:function(e){return e.ciphertext.toString(n)},parse:function(e){var r=n.parse(e);return t.create({ciphertext:r})}},e.format.Hex;var t,n}(bB(),ej())),dj||(dj=1,function(e){!function(){var t=e,n=t.lib.BlockCipher,r=t.algo,s=[],i=[],o=[],a=[],c=[],l=[],u=[],p=[],d=[],h=[];!function(){for(var e=[],t=0;256>t;t++)e[t]=128>t?t<<1:t<<1^283;var n=0,r=0;for(t=0;256>t;t++){var f=r^r<<1^r<<2^r<<3^r<<4;s[n]=f=f>>>8^255&f^99,i[f]=n;var m,g=e[n],y=e[g],v=e[y];o[n]=(m=257*e[f]^16843008*f)<<24|m>>>8,a[n]=m<<16|m>>>16,c[n]=m<<8|m>>>24,l[n]=m,u[f]=(m=16843009*v^65537*y^257*g^16843008*n)<<24|m>>>8,p[f]=m<<16|m>>>16,d[f]=m<<8|m>>>24,h[f]=m,n?(n=g^e[e[e[v^g]]],r^=e[e[r]]):n=r=1}}();var f=[0,1,2,4,8,16,32,64,128,27,54],m=r.AES=n.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var e=this._keyPriorReset=this._key,t=e.words,n=e.sigBytes/4,r=4*((this._nRounds=n+6)+1),i=this._keySchedule=[],o=0;r>o;o++)n>o?i[o]=t[o]:(l=i[o-1],o%n?n>6&&o%n==4&&(l=s[l>>>24]<<24|s[l>>>16&255]<<16|s[l>>>8&255]<<8|s[255&l]):(l=s[(l=l<<8|l>>>24)>>>24]<<24|s[l>>>16&255]<<16|s[l>>>8&255]<<8|s[255&l],l^=f[o/n|0]<<24),i[o]=i[o-n]^l);for(var a=this._invKeySchedule=[],c=0;r>c;c++){if(o=r-c,c%4)var l=i[o];else l=i[o-4];a[c]=4>c||4>=o?l:u[s[l>>>24]]^p[s[l>>>16&255]]^d[s[l>>>8&255]]^h[s[255&l]]}}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,o,a,c,l,s)},decryptBlock:function(e,t){var n=e[t+1];e[t+1]=e[t+3],e[t+3]=n,this._doCryptBlock(e,t,this._invKeySchedule,u,p,d,h,i),n=e[t+1],e[t+1]=e[t+3],e[t+3]=n},_doCryptBlock:function(e,t,n,r,s,i,o,a){for(var c=this._nRounds,l=e[t]^n[0],u=e[t+1]^n[1],p=e[t+2]^n[2],d=e[t+3]^n[3],h=4,f=1;c>f;f++){var m=r[l>>>24]^s[u>>>16&255]^i[p>>>8&255]^o[255&d]^n[h++],g=r[u>>>24]^s[p>>>16&255]^i[d>>>8&255]^o[255&l]^n[h++],y=r[p>>>24]^s[d>>>16&255]^i[l>>>8&255]^o[255&u]^n[h++],v=r[d>>>24]^s[l>>>16&255]^i[u>>>8&255]^o[255&p]^n[h++];l=m,u=g,p=y,d=v}m=(a[l>>>24]<<24|a[u>>>16&255]<<16|a[p>>>8&255]<<8|a[255&d])^n[h++],g=(a[u>>>24]<<24|a[p>>>16&255]<<16|a[d>>>8&255]<<8|a[255&l])^n[h++],y=(a[p>>>24]<<24|a[d>>>16&255]<<16|a[l>>>8&255]<<8|a[255&u])^n[h++],v=(a[d>>>24]<<24|a[l>>>16&255]<<16|a[u>>>8&255]<<8|a[255&p])^n[h++],e[t]=m,e[t+1]=g,e[t+2]=y,e[t+3]=v},keySize:8});t.AES=n._createHelper(m)}()}(bB(),kB(),OB(),JB(),ej())),hj||(hj=1,function(e){(function(){var t=e,n=t.lib,r=n.WordArray,s=n.BlockCipher,i=t.algo,o=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],a=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],c=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],l=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],u=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],p=i.DES=s.extend({_doReset:function(){for(var e=this._key.words,t=[],n=0;56>n;n++){var r=o[n]-1;t[n]=e[r>>>5]>>>31-r%32&1}for(var s=this._subKeys=[],i=0;16>i;i++){var l=s[i]=[],u=c[i];for(n=0;24>n;n++)l[n/6|0]|=t[(a[n]-1+u)%28]<<31-n%6,l[4+(n/6|0)]|=t[28+(a[n+24]-1+u)%28]<<31-n%6;for(l[0]=l[0]<<1|l[0]>>>31,n=1;7>n;n++)l[n]=l[n]>>>4*(n-1)+3;l[7]=l[7]<<5|l[7]>>>27}var p=this._invSubKeys=[];for(n=0;16>n;n++)p[n]=s[15-n]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._subKeys)},decryptBlock:function(e,t){this._doCryptBlock(e,t,this._invSubKeys)},_doCryptBlock:function(e,t,n){this._lBlock=e[t],this._rBlock=e[t+1],d.call(this,4,252645135),d.call(this,16,65535),h.call(this,2,858993459),h.call(this,8,16711935),d.call(this,1,1431655765);for(var r=0;16>r;r++){for(var s=n[r],i=this._lBlock,o=this._rBlock,a=0,c=0;8>c;c++)a|=l[c][((o^s[c])&u[c])>>>0];this._lBlock=o,this._rBlock=i^a}var p=this._lBlock;this._lBlock=this._rBlock,this._rBlock=p,d.call(this,1,1431655765),h.call(this,8,16711935),h.call(this,2,858993459),d.call(this,16,65535),d.call(this,4,252645135),e[t]=this._lBlock,e[t+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});function d(e,t){var n=(this._lBlock>>>e^this._rBlock)&t;this._rBlock^=n,this._lBlock^=n<<e}function h(e,t){var n=(this._rBlock>>>e^this._lBlock)&t;this._lBlock^=n,this._rBlock^=n<<e}t.DES=s._createHelper(p);var f=i.TripleDES=s.extend({_doReset:function(){var e=this._key.words;if(2!==e.length&&4!==e.length&&6>e.length)throw Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var t=e.slice(0,2),n=4>e.length?e.slice(0,2):e.slice(2,4),s=6>e.length?e.slice(0,2):e.slice(4,6);this._des1=p.createEncryptor(r.create(t)),this._des2=p.createEncryptor(r.create(n)),this._des3=p.createEncryptor(r.create(s))},encryptBlock:function(e,t){this._des1.encryptBlock(e,t),this._des2.decryptBlock(e,t),this._des3.encryptBlock(e,t)},decryptBlock:function(e,t){this._des3.decryptBlock(e,t),this._des2.encryptBlock(e,t),this._des1.decryptBlock(e,t)},keySize:6,ivSize:2,blockSize:2});t.TripleDES=s._createHelper(f)})()}(bB(),kB(),OB(),JB(),ej())),fj||(fj=1,function(e){!function(){var t=e,n=t.lib.StreamCipher,r=t.algo,s=r.RC4=n.extend({_doReset:function(){for(var e=this._key,t=e.words,n=e.sigBytes,r=this._S=[],s=0;256>s;s++)r[s]=s;s=0;for(var i=0;256>s;s++){var o=s%n,a=r[s];r[s]=r[i=(i+r[s]+(t[o>>>2]>>>24-o%4*8&255))%256],r[i]=a}this._i=this._j=0},_doProcessBlock:function(e,t){e[t]^=i.call(this)},keySize:8,ivSize:0});function i(){for(var e=this._S,t=this._i,n=this._j,r=0,s=0;4>s;s++){var i=e[t=(t+1)%256];e[t]=e[n=(n+e[t])%256],e[n]=i,r|=e[(e[t]+e[n])%256]<<24-8*s}return this._i=t,this._j=n,r}t.RC4=n._createHelper(s);var o=r.RC4Drop=s.extend({cfg:s.cfg.extend({drop:192}),_doReset:function(){s._doReset.call(this);for(var e=this.cfg.drop;e>0;e--)i.call(this)}});t.RC4Drop=n._createHelper(o)}()}(bB(),kB(),OB(),JB(),ej())),mj||(mj=1,function(e){!function(){var t=e,n=t.lib.StreamCipher,r=[],s=[],i=[],o=t.algo.Rabbit=n.extend({_doReset:function(){for(var e=this._key.words,t=this.cfg.iv,n=0;4>n;n++)e[n]=16711935&(e[n]<<8|e[n]>>>24)|4278255360&(e[n]<<24|e[n]>>>8);var r=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],s=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];for(this._b=0,n=0;4>n;n++)a.call(this);for(n=0;8>n;n++)s[n]^=r[n+4&7];if(t){var i=t.words,o=i[0],c=i[1],l=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),u=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8),p=l>>>16|4294901760&u,d=u<<16|65535&l;for(s[0]^=l,s[1]^=p,s[2]^=u,s[3]^=d,s[4]^=l,s[5]^=p,s[6]^=u,s[7]^=d,n=0;4>n;n++)a.call(this)}},_doProcessBlock:function(e,t){var n=this._X;a.call(this),r[0]=n[0]^n[5]>>>16^n[3]<<16,r[1]=n[2]^n[7]>>>16^n[5]<<16,r[2]=n[4]^n[1]>>>16^n[7]<<16,r[3]=n[6]^n[3]>>>16^n[1]<<16;for(var s=0;4>s;s++)r[s]=16711935&(r[s]<<8|r[s]>>>24)|4278255360&(r[s]<<24|r[s]>>>8),e[t+s]^=r[s]},blockSize:4,ivSize:2});function a(){for(var e=this._X,t=this._C,n=0;8>n;n++)s[n]=t[n];for(t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(s[0]>>>0>t[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(s[1]>>>0>t[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(s[2]>>>0>t[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(s[3]>>>0>t[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(s[4]>>>0>t[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(s[5]>>>0>t[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(s[6]>>>0>t[6]>>>0?1:0)|0,this._b=s[7]>>>0>t[7]>>>0?1:0,n=0;8>n;n++){var r=e[n]+t[n],o=65535&r,a=r>>>16;i[n]=((o*o>>>17)+o*a>>>15)+a*a^((4294901760&r)*r|0)+((65535&r)*r|0)}e[0]=i[0]+(i[7]<<16|i[7]>>>16)+(i[6]<<16|i[6]>>>16)|0,e[1]=i[1]+(i[0]<<8|i[0]>>>24)+i[7]|0,e[2]=i[2]+(i[1]<<16|i[1]>>>16)+(i[0]<<16|i[0]>>>16)|0,e[3]=i[3]+(i[2]<<8|i[2]>>>24)+i[1]|0,e[4]=i[4]+(i[3]<<16|i[3]>>>16)+(i[2]<<16|i[2]>>>16)|0,e[5]=i[5]+(i[4]<<8|i[4]>>>24)+i[3]|0,e[6]=i[6]+(i[5]<<16|i[5]>>>16)+(i[4]<<16|i[4]>>>16)|0,e[7]=i[7]+(i[6]<<8|i[6]>>>24)+i[5]|0}t.Rabbit=n._createHelper(o)}()}(bB(),kB(),OB(),JB(),ej())),gj||(gj=1,function(e){!function(){var t=e,n=t.lib.StreamCipher,r=[],s=[],i=[],o=t.algo.RabbitLegacy=n.extend({_doReset:function(){var e=this._key.words,t=this.cfg.iv,n=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],r=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];this._b=0;for(var s=0;4>s;s++)a.call(this);for(s=0;8>s;s++)r[s]^=n[s+4&7];if(t){var i=t.words,o=i[0],c=i[1],l=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),u=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8),p=l>>>16|4294901760&u,d=u<<16|65535&l;for(r[0]^=l,r[1]^=p,r[2]^=u,r[3]^=d,r[4]^=l,r[5]^=p,r[6]^=u,r[7]^=d,s=0;4>s;s++)a.call(this)}},_doProcessBlock:function(e,t){var n=this._X;a.call(this),r[0]=n[0]^n[5]>>>16^n[3]<<16,r[1]=n[2]^n[7]>>>16^n[5]<<16,r[2]=n[4]^n[1]>>>16^n[7]<<16,r[3]=n[6]^n[3]>>>16^n[1]<<16;for(var s=0;4>s;s++)r[s]=16711935&(r[s]<<8|r[s]>>>24)|4278255360&(r[s]<<24|r[s]>>>8),e[t+s]^=r[s]},blockSize:4,ivSize:2});function a(){for(var e=this._X,t=this._C,n=0;8>n;n++)s[n]=t[n];for(t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(s[0]>>>0>t[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(s[1]>>>0>t[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(s[2]>>>0>t[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(s[3]>>>0>t[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(s[4]>>>0>t[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(s[5]>>>0>t[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(s[6]>>>0>t[6]>>>0?1:0)|0,this._b=s[7]>>>0>t[7]>>>0?1:0,n=0;8>n;n++){var r=e[n]+t[n],o=65535&r,a=r>>>16;i[n]=((o*o>>>17)+o*a>>>15)+a*a^((4294901760&r)*r|0)+((65535&r)*r|0)}e[0]=i[0]+(i[7]<<16|i[7]>>>16)+(i[6]<<16|i[6]>>>16)|0,e[1]=i[1]+(i[0]<<8|i[0]>>>24)+i[7]|0,e[2]=i[2]+(i[1]<<16|i[1]>>>16)+(i[0]<<16|i[0]>>>16)|0,e[3]=i[3]+(i[2]<<8|i[2]>>>24)+i[1]|0,e[4]=i[4]+(i[3]<<16|i[3]>>>16)+(i[2]<<16|i[2]>>>16)|0,e[5]=i[5]+(i[4]<<8|i[4]>>>24)+i[3]|0,e[6]=i[6]+(i[5]<<16|i[5]>>>16)+(i[4]<<16|i[4]>>>16)|0,e[7]=i[7]+(i[6]<<8|i[6]>>>24)+i[5]|0}t.RabbitLegacy=n._createHelper(o)}()}(bB(),kB(),OB(),JB(),ej())),yj||(yj=1,function(e){(function(){var t=e,n=t.lib.BlockCipher;const r=16,s=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],i=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var o={pbox:[],sbox:[]};function a(e,t){let n=e.sbox[0][t>>24&255]+e.sbox[1][t>>16&255];return n^=e.sbox[2][t>>8&255],n+=e.sbox[3][255&t],n}function c(e,t,n){let s,i=t,o=n;for(let t=0;r>t;++t)i^=e.pbox[t],o=a(e,i)^o,s=i,i=o,o=s;return s=i,i=o,o=s,o^=e.pbox[r],i^=e.pbox[17],{left:i,right:o}}var l=t.algo.Blowfish=n.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var e=this._keyPriorReset=this._key;!function(e,t,n){for(let t=0;4>t;t++){e.sbox[t]=[];for(let n=0;256>n;n++)e.sbox[t][n]=i[t][n]}let r=0;for(let i=0;18>i;i++)e.pbox[i]=s[i]^t[r],r++,n>r||(r=0);let o=0,a=0,l=0;for(let t=0;18>t;t+=2)l=c(e,o,a),o=l.left,a=l.right,e.pbox[t]=o,e.pbox[t+1]=a;for(let t=0;4>t;t++)for(let n=0;256>n;n+=2)l=c(e,o,a),o=l.left,a=l.right,e.sbox[t][n]=o,e.sbox[t][n+1]=a}(o,e.words,e.sigBytes/4)}},encryptBlock:function(e,t){var n=c(o,e[t],e[t+1]);e[t]=n.left,e[t+1]=n.right},decryptBlock:function(e,t){var n=function(e,t,n){let r,s=t,i=n;for(let t=17;t>1;--t)s^=e.pbox[t],i=a(e,s)^i,r=s,s=i,i=r;return r=s,s=i,i=r,i^=e.pbox[1],s^=e.pbox[0],{left:s,right:i}}(o,e[t],e[t+1]);e[t]=n.left,e[t+1]=n.right},blockSize:2,keySize:4,ivSize:2});t.Blowfish=n._createHelper(l)})()}(bB(),kB(),OB(),JB(),ej())));var vj=P(yB.exports);const bj=dB.create({timeout:15e3,httpsAgent:new I.Agent({keepAlive:!0,rejectUnauthorized:!1}),httpAgent:new C.Agent({keepAlive:!0})}),Ej=e=>/:\d+$/.test(e.hostname)?/1443$/.test(e.hostname)?"https":"http":e.protocol,_j=e=>`${Ej(e)}://${e.hostname}/proxy`;class Aj{constructor(e,t,n=3){this.meta={key:e,name:t,type:n},this.cookie={},this.http=dB.create({timeout:15e3,httpsAgent:new I.Agent({keepAlive:!0,rejectUnauthorized:!1}),httpAgent:new C.Agent({keepAlive:!0}),headers:{"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/123.0.0.0 Safari/537.36 Edg/123.0.0.0"}}),this.http.interceptors.request.use((e=>(Object.keys(this.cookie).length&&(e.headers.Cookie=Object.entries(this.cookie).map((([e,t])=>`${e}=${t}`)).join("; ")),e)),(e=>Promise.reject(e))),this.http.interceptors.response.use((e=>{for(const t of e.headers.get("set-cookie")||[]){const e=t.split(";",1);if(1>e.length)continue;const n=e[0],r=n.indexOf("=");if(-1===n)continue;const s=n.substring(0,r),i=n.substring(r+1);this.cookie[s]=i}return e}),(e=>Promise.reject(e))),this._home&&(this.home=this.cachedFunction(this._home)),this._category&&(this.category=this.cachedFunction(this._category)),this._detail&&(this.detail=this.cachedFunction(this._detail)),this._search&&(this.search=this.cachedFunction(this._search)),this._play&&(this.play_=this.cachedFunction(this._play,600)),this.handlers=[],this._init=!1}setCookie(e){if(e&&"string"==typeof e)for(const t of e.split(";")||[]){const e=t.indexOf("=");if(-1===t)continue;const n=t.substring(0,e),r=t.substring(e+1);this.cookie[n]=r}}hasCookie(e){return this.cookie.hasOwnProperty(e)&&""!==this.cookie[e]}async fetch(e,t){return(await this.http(e,t)).data}async init(e){this._redis=e.redis,this._log=e.log;try{this.handlers=[{match:mB.ali.matchShare.bind(mB.ali),getVod:mB.ali.getVod.bind(mB.ali),t:"ali"},{match:mB.quark.matchShare.bind(mB.quark),getVod:mB.quark.getVod.bind(mB.quark),t:"quark"},{match:mB.xunlei.matchShare.bind(mB.xunlei),getVod:mB.xunlei.getVod.bind(mB.xunlei),t:"xunlei"},{match:mB.pikpak.matchShare.bind(mB.pikpak),getVod:mB.pikpak.getVod.bind(mB.pikpak),t:"pikpak"},{match:mB.uc.matchShare.bind(mB.uc),getVod:mB.uc.getVod.bind(mB.uc),t:"uc"}]}catch(e){this._log.error(e)}return this._init=!0,this.meta}async home(){return{class:[{type_id:1,type_name:"纯搜|无资源"}],list:[]}}async category(e){return{list:[{vod_id:1,vod_name:"无资源",vod_pic:"",vod_remarks:"纯搜"}],page:1,pagecount:1}}async detail(e){return{}}async play(e){const t=e.flag,n=e.id;if(this.isMedia(n))return{url:n,jx:0,parse:0};if(/阿里/.test(t))return await mB.ali.play(n,t,e.proxyUrl);if(/夸克/.test(t))return await mB.quark.play(n,t,e.proxyUrl);if(/迅雷/.test(t))return await mB.xunlei.play(n,t,e.proxyUrl);if(/^PikPak/.test(t))return await mB.pikpak.play(n,t,e.proxyUrl);if(/^UC$/i.test(t))return await mB.uc.play(n,t,e.proxyUrl);try{if("qq"===t||/\.qq\.com/i.test(n)){const t=(await Promise.resolve().then((function(){return kz}))).vod;if(t._init)return await t.play_(e)}else if("youku"===t||/\.youku\.com/i.test(n)){const t=(await Promise.resolve().then((function(){return Tz}))).vod;if(t._init)return await t.play_(e)}}catch{}for(const e of gB)if(!(1!==e.type||e.flags&&Array.isArray(e.flags)&&-1===e.flags.indexOf(t)))try{const r={flag:t,url:n},s=(await this.http.get(e.url,{params:r})).data;if(0==s.parse||0==s.jx||this.isMedia(s.url))return s}catch{}try{return await(async e=>{const t=(new Date).getTime(),n=encodeURIComponent(e),r=new URLSearchParams;r.append("wap",1),r.append("url",n),r.append("time",t),r.append("key",((e,t)=>{const n=vj.enc.Utf8.parse(vj.MD5(`${e}${t}`)),r=vj.enc.Utf8.parse(vj.MD5(n)),s=vj.enc.Utf8.parse("3cccf88181408f19");return""+vj.AES.encrypt(n,r,{iv:s,mode:vj.mode.CBC,padding:vj.pad.ZeroPadding})})(t,n));const s=(await bj.post("https://122.228.8.29:4433/xmflv.js",r,{headers:{Origin:"https://jx.xmflv.com"}})).data;if(200!==s.code)throw Error(s.msg||"xm解析异常!");const i=vj.enc.Utf8.parse(s.aes_key),o=vj.enc.Utf8.parse(s.aes_iv),a=vj.AES.decrypt(s.url,i,{iv:o,mode:vj.mode.CBC});return{parse:0,jx:0,url:vj.enc.Utf8.stringify(a),header:{Origin:"https://jx.xmflv.com","User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/123.0.0.0 Safari/537.36 Edg/123.0.0.0"}}})(n)}catch(e){return{url:n,parse:1}}}async search(e){return{page:1,pagecount:1,total:0,list:[]}}isMedia(e){return/\.(m3u8|mp4|rmvb|avi|wmv|flv|mkv|webm|mov)(?!\w)/i.test(e)}async spider(e){this._init||await this.init(e.server);const t=e.query,n={};if(t.play)return Object.assign(n,{id:t.play,flag:t.flag,proxyUrl:_j(e)}),await this.play(n);if(t.wd)return Object.assign(n,{wd:t.wd}),await this.search(n);if(!t.ac)return await this.home(n);if("detail"===t.ac){if(t.t){if(t.ext)try{n.filters=JSON.parse(vj.enc.Base64.parse(t.ext).toString(vj.enc.Utf8))}catch{}return Object.assign(n,{id:t.t,page:t.pg||1}),await this.category(n)}if(t.ids)return n.id=t.ids.split(",").map((e=>e.trim())).filter(Boolean),await this.detail(n)}return t}cachedFunction(e,t=3600){return async(...n)=>{this._log.info(n);const r=`${this.meta.key}${e.name}:${vj.MD5(JSON.stringify(n))}`;let s=await this._redis.get(r);return s?JSON.parse(s):(s=await e.apply(this,n),await this._redis.set(r,JSON.stringify(s)),(t??0)>0&&await this._redis.expire(r,t),s)}}}const Sj=/^((https|http|ftp|rtsp|mms)?:\/\/)[^\s]+/gim,Tj=new class extends Aj{async support({clip:e}){const[t,n]=e.match(Sj);return!!this.isMedia(t)||!!/\.?(qq|iqiyi|youku|bilibili|sohu|douyin|mgtv|le|ixigua|aliyundrive|alipan|quark|uc|xunlei|mypikpak)\./i.test(t)}async detail({id:e}){let t;for(const{match:n,getVod:r}of this.handlers)if(n(e)){try{t=await r(e),t&&(t.vod_content=e)}catch(t){this._log.error(t,"Error fetching VOD for id "+e)}break}if(!t){const[n,r]=e.match(Sj);t={vod_id:n,vod_content:e,vod_name:n,vod_pic:"https://pic.rmb.bdstatic.com/bjh/1d0b02d0f57f0a42201f92caba5107ed.jpeg",vod_play_from:"推送",vod_play_url:"播放$"+n}}return{list:[t]}}}("push","推送",4);var wj={meta:Tj.meta,api:async e=>{e.post("/init",((e,t)=>Tj.init(e.server))),e.post("/support",((e,t)=>Tj.support(e.body))),e.post("/detail",((e,t)=>Tj.detail(e.body))),e.post("/play",((e,t)=>(e.body.proxyUrl=_j(e),Tj.play(e.body))))}},xj={exports:{}};xj.exports=function(){var e=6e4,t=36e5,n="millisecond",r="second",s="minute",i="hour",o="day",a="week",c="month",l="quarter",u="year",p="date",d="Invalid Date",h=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,f=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,m={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],n=e%100;return"["+e+(t[(n-20)%10]||t[n]||"th")+"]"}},g=function(e,t,n){var r=e+"";return r&&t>r.length?""+Array(t+1-r.length).join(n)+e:e},y={s:g,z:function(e){var t=-e.utcOffset(),n=Math.abs(t),r=n%60;return(t>0?"-":"+")+g(Math.floor(n/60),2,"0")+":"+g(r,2,"0")},m:function e(t,n){if(t.date()<n.date())return-e(n,t);var r=12*(n.year()-t.year())+(n.month()-t.month()),s=t.clone().add(r,c),i=0>n-s,o=t.clone().add(r+(i?-1:1),c);return+(-(r+(n-s)/(i?s-o:o-s))||0)},a:function(e){return 0>e?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:c,y:u,w:a,d:o,D:p,h:i,m:s,s:r,ms:n,Q:l}[e]||((e||"")+"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},v="en",b={};b[v]=m;var E="$isDayjsObject",_=function(e){return e instanceof w||!(!e||!e[E])},A=function e(t,n,r){var s;if(!t)return v;if("string"==typeof t){var i=t.toLowerCase();b[i]&&(s=i),n&&(b[i]=n,s=i);var o=t.split("-");if(!s&&o.length>1)return e(o[0])}else{var a=t.name;b[a]=t,s=a}return!r&&s&&(v=s),s||!r&&v},S=function(e,t){if(_(e))return e.clone();var n="object"==typeof t?t:{};return n.date=e,n.args=arguments,new w(n)},T=y;T.l=A,T.i=_,T.w=function(e,t){return S(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var w=function(){function m(e){this.$L=A(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[E]=!0}var g=m.prototype;return g.parse=function(e){this.$d=function(e){var t=e.date,n=e.utc;if(null===t)return new Date(NaN);if(T.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var r=t.match(h);if(r){var s=r[2]-1||0,i=(r[7]||"0").substring(0,3);return n?new Date(Date.UTC(r[1],s,r[3]||1,r[4]||0,r[5]||0,r[6]||0,i)):new Date(r[1],s,r[3]||1,r[4]||0,r[5]||0,r[6]||0,i)}}return new Date(t)}(e),this.init()},g.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},g.$utils=function(){return T},g.isValid=function(){return!(""+this.$d===d)},g.isSame=function(e,t){var n=S(e);return this.startOf(t)<=n&&n<=this.endOf(t)},g.isAfter=function(e,t){return S(e)<this.startOf(t)},g.isBefore=function(e,t){return this.endOf(t)<S(e)},g.$g=function(e,t,n){return T.u(e)?this[t]:this.set(n,e)},g.unix=function(){return Math.floor(this.valueOf()/1e3)},g.valueOf=function(){return this.$d.getTime()},g.startOf=function(e,t){var n=this,l=!!T.u(t)||t,d=T.p(e),h=function(e,t){var r=T.w(n.$u?Date.UTC(n.$y,t,e):new Date(n.$y,t,e),n);return l?r:r.endOf(o)},f=function(e,t){return T.w(n.toDate()[e].apply(n.toDate("s"),(l?[0,0,0,0]:[23,59,59,999]).slice(t)),n)},m=this.$W,g=this.$M,y=this.$D,v="set"+(this.$u?"UTC":"");switch(d){case u:return l?h(1,0):h(31,11);case c:return l?h(1,g):h(0,g+1);case a:var b=this.$locale().weekStart||0,E=(b>m?m+7:m)-b;return h(l?y-E:y+(6-E),g);case o:case p:return f(v+"Hours",0);case i:return f(v+"Minutes",1);case s:return f(v+"Seconds",2);case r:return f(v+"Milliseconds",3);default:return this.clone()}},g.endOf=function(e){return this.startOf(e,!1)},g.$set=function(e,t){var a,l=T.p(e),d="set"+(this.$u?"UTC":""),h=(a={},a[o]=d+"Date",a[p]=d+"Date",a[c]=d+"Month",a[u]=d+"FullYear",a[i]=d+"Hours",a[s]=d+"Minutes",a[r]=d+"Seconds",a[n]=d+"Milliseconds",a)[l],f=l===o?this.$D+(t-this.$W):t;if(l===c||l===u){var m=this.clone().set(p,1);m.$d[h](f),m.init(),this.$d=m.set(p,Math.min(this.$D,m.daysInMonth())).$d}else h&&this.$d[h](f);return this.init(),this},g.set=function(e,t){return this.clone().$set(e,t)},g.get=function(e){return this[T.p(e)]()},g.add=function(n,l){var p,d=this;n=+n;var h=T.p(l),f=function(e){var t=S(d);return T.w(t.date(t.date()+Math.round(e*n)),d)};if(h===c)return this.set(c,this.$M+n);if(h===u)return this.set(u,this.$y+n);if(h===o)return f(1);if(h===a)return f(7);var m=(p={},p[s]=e,p[i]=t,p[r]=1e3,p)[h]||1,g=this.$d.getTime()+n*m;return T.w(g,this)},g.subtract=function(e,t){return this.add(-1*e,t)},g.format=function(e){var t=this,n=this.$locale();if(!this.isValid())return n.invalidDate||d;var r=e||"YYYY-MM-DDTHH:mm:ssZ",s=T.z(this),i=this.$H,o=this.$m,a=this.$M,c=n.weekdays,l=n.months,u=function(e,n,s,i){return e&&(e[n]||e(t,r))||s[n].slice(0,i)},p=function(e){return T.s(i%12||12,e,"0")},h=n.meridiem||function(e,t,n){var r=12>e?"AM":"PM";return n?r.toLowerCase():r};return r.replace(f,(function(e,r){return r||function(e){switch(e){case"YY":return(t.$y+"").slice(-2);case"YYYY":return T.s(t.$y,4,"0");case"M":return a+1;case"MM":return T.s(a+1,2,"0");case"MMM":return u(n.monthsShort,a,l,3);case"MMMM":return u(l,a);case"D":return t.$D;case"DD":return T.s(t.$D,2,"0");case"d":return t.$W+"";case"dd":return u(n.weekdaysMin,t.$W,c,2);case"ddd":return u(n.weekdaysShort,t.$W,c,3);case"dddd":return c[t.$W];case"H":return i+"";case"HH":return T.s(i,2,"0");case"h":return p(1);case"hh":return p(2);case"a":return h(i,o,!0);case"A":return h(i,o,!1);case"m":return o+"";case"mm":return T.s(o,2,"0");case"s":return t.$s+"";case"ss":return T.s(t.$s,2,"0");case"SSS":return T.s(t.$ms,3,"0");case"Z":return s}return null}(e)||s.replace(":","")}))},g.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},g.diff=function(n,p,d){var h,f=this,m=T.p(p),g=S(n),y=(g.utcOffset()-this.utcOffset())*e,v=this-g,b=function(){return T.m(f,g)};switch(m){case u:h=b()/12;break;case c:h=b();break;case l:h=b()/3;break;case a:h=(v-y)/6048e5;break;case o:h=(v-y)/864e5;break;case i:h=v/t;break;case s:h=v/e;break;case r:h=v/1e3;break;default:h=v}return d?h:T.a(h)},g.daysInMonth=function(){return this.endOf(c).$D},g.$locale=function(){return b[this.$L]},g.locale=function(e,t){if(!e)return this.$L;var n=this.clone(),r=A(e,t,!0);return r&&(n.$L=r),n},g.clone=function(){return T.w(this.$d,this)},g.toDate=function(){return new Date(this.valueOf())},g.toJSON=function(){return this.isValid()?this.toISOString():null},g.toISOString=function(){return this.$d.toISOString()},g.toString=function(){return this.$d.toUTCString()},m}(),x=w.prototype;return S.prototype=x,[["$ms",n],["$s",r],["$m",s],["$H",i],["$W",o],["$M",c],["$y",u],["$D",p]].forEach((function(e){x[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),S.extend=function(e,t){return e.$i||(e(t,w,S),e.$i=!0),S},S.locale=A,S.isDayjs=_,S.unix=function(e){return S(1e3*e)},S.en=b[v],S.Ls=b,S.p={},S}();var kj=P(xj.exports);const Cj=new class extends Aj{async init(e){const t="douban_deviceId";return this.deviceId=await e.redis.get(t),this.deviceId||(this.deviceId=function(e){for(var t="",n=0;40>n;n++)t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(62*Math.random()));return t}().toLowerCase(),await e.redis.set(t,this.deviceId,"EX",86400)),Object.assign(this.http.defaults.headers,{"User-Agent":`Rexxar-Core/0.1.3 api-client/1 com.douban.frodo/7.9.0(216) Android/28 product/Xiaomi11 rom/android network/wifi udid/${this.deviceId} platform/mobile com.douban.frodo/7.9.0(216) Rexxar/1.2.151 platform/mobile 1.2.151`}),this.api="https://frodo.douban.com",await super.init(e)}async _home({}){const e=await this.fetch("/api/v2/movie/tag",{sort:"U",start:0,count:30,q:"全部形式,全部类型,全部地区,全部年代",score_rang:"0,10"}),t={t1:[{key:"u",name:"",init:"movie/hot_gaia",value:[{n:"电影",v:"movie/hot_gaia"},{n:"电视剧",v:"subject_collection/tv_hot/items"},{n:"国产剧",v:"subject_collection/tv_domestic/items"},{n:"美剧",v:"subject_collection/tv_american/items"},{n:"日剧",v:"subject_collection/tv_japanese/items"},{n:"韩剧",v:"subject_collection/tv_korean/items"},{n:"动漫",v:"subject_collection/tv_animation/items"},{n:"综艺",v:"subject_collection/show_hot/items"}]}],t2:[],t4:[{key:"type",name:"",init:"",value:[{n:"全部",v:""},{n:"电影",v:"movie"},{n:"电视剧",v:"tv"}]},{key:"cate",name:"",init:"all",value:[{n:"全部",v:"all"},{n:"豆瓣片单",v:"official"},{n:"精选",v:"selected"},{n:"经典",v:"classical"},{n:"获奖",v:"prize"},{n:"高分",v:"high_score"},{n:"榜单",v:"movie_list"},{n:"冷门佳片",v:"dark_horse"},{n:"主题",v:"topic"},{n:"导演",v:"director"},{n:"演员",v:"actor"},{n:"系列",v:"series"}]},{key:"cate",name:"",init:"all",value:[{n:"华语",v:"chinese"},{n:"欧美",v:"western"},{n:"日本",v:"japanese"},{n:"韩国",v:"korea"}]},{key:"cate",name:"",init:"all",value:[{n:"喜剧",v:"comedy"},{n:"动作",v:"action"},{n:"爱情",v:"love"},{n:"科幻",v:"science_fiction"},{n:"动画",v:"cartoon"},{n:"悬疑",v:"mystery"},{n:"惊悚",v:"panic"},{n:"恐怖",v:"horrible"},{n:"犯罪",v:"criminal"},{n:"同性",v:"lgbt"},{n:"战争",v:"war"},{n:"奇幻",v:"fantasy"},{n:"情色",v:"erotica"},{n:"音乐",v:"music"},{n:"纪录片",v:"documentary"},{n:"治愈",v:"cure"},{n:"艺术",v:"art"},{n:"黑色幽默",v:"dark_humor"},{n:"青春",v:"youth"},{n:"女性",v:"female"},{n:"真实事件改编",v:"real_event"},{n:"暴力",v:"violence"},{n:"黑白",v:"black_white"},{n:"美食",v:"food"},{n:"旅行",v:"travel"},{n:"儿童",v:"child"},{n:"人性",v:"humanity"},{n:"家庭",v:"family"},{n:"文艺",v:"literary_art"},{n:"小说改编",v:"novel"},{n:"感人",v:"moving"},{n:"励志",v:"inspiration"}]}]};for(const n of e.tags){if("特色"==n.type)continue;let e={key:n.type,name:"",init:n.data[0]},r=[];if("年代"==n.type){let e=kj().year();0>n.data.indexOf(""+e)&&(n.data.splice(1,0,""+e),e--,0>n.data.indexOf(""+e)&&n.data.splice(2,0,""+e))}for(const e of n.data){let t=e;0>e.indexOf("全部")||(t="全部"),r.push({n:t,v:e})}e.value=r,t.t2.push(e)}return t.t2.push({key:"sort",name:"",init:e.sorts[0].name,value:e.sorts.map((e=>({n:e.text,v:e.name})))}),{class:[{type_id:"t1",type_name:"热播"},{type_id:"t2",type_name:"片库"},{type_id:"t250",type_name:"Top250"},{type_id:"t3",type_name:"榜单",ratio:1},{type_id:"t4",type_name:"片单",ratio:1}],filters:t}}async _category({id:e,page:t,filters:n}){const r=t||1,s=n||{};if("t1"==e){const e={area:"全部",sort:"recommend",playable:0,loc_id:0,start:30*(r-1),count:30},t=await this.fetch("/api/v2/"+s.u,e);let n=[];for(const e of t.items||t.subject_collection_items||[]){let t=""+(e.rating?.value||"");n.push({vod_id:e.id,vod_name:e.title,vod_pic:e.pic.normal||e.pic.large,vod_remarks:t?"评分:"+t:e.year})}return{page:r,pagecount:Math.ceil(t.total/30),list:n}}if("t250"==e){const e={area:"全部",sort:"recommend",playable:0,loc_id:0,start:30*(r-1),count:30},t=await this.fetch("/api/v2/subject_collection/movie_top250/items",e);let n=[];for(const e of t.items||t.subject_collection_items||[]){let t=""+(e.rating?.value||"");n.push({vod_id:e.id,vod_name:e.title,vod_pic:e.pic.normal||e.pic.large,vod_remarks:t?"评分:"+t:e.year})}return{page:r,pagecount:Math.ceil(t.total/30),list:n}}if("t2"==e){const e={sort:s.sort,start:30*(r-1),count:30,q:`${s["形式"]},${s["类型"]},${s["地区"]},${s["年代"]}`,score_rang:"0,10"},t=await this.fetch("/api/v2/movie/tag",e);let n=[];for(const e of t.data){let t=""+(e.rating?.value||"");n.push({vod_id:e.id,vod_name:e.title,vod_pic:e.pic.normal||e.pic.large,vod_remarks:t?"评分:"+t:e.year})}return{page:r,pagecount:Math.ceil(t.total/30),list:n}}if("t3"==e){let e=await this.fetch("/api/v2/movie/category_ranks",{count:30,category:"recent_hot"}),t=[];for(const n of e.selected_collections)t.push({vod_id:"cr_"+n.id,vod_name:n.short_name||n.title,vod_pic:n.cover_url,vod_remarks:"",cate:{}});e=await this.fetch("/api/v2/tv/category_ranks",{count:30,category:"recent_hot"});for(const n of e.selected_collections)t.push({vod_id:"cr_"+n.id,vod_name:n.short_name||n.title,vod_pic:n.cover_url,vod_remarks:"",cate:{}});return{page:r,pagecount:r,list:t}}if("t4"==e){const e={subject_type:s.type||"",category:s.cate||"all",loc_id:0,start:30*(r-1),count:30},t=await this.fetch("/api/v2/skynet/new_playlists",e);let n=[];for(const e of t.data[0].items)n.push({vod_id:e.owner?"dl_"+e.id:"cr_"+e.id,vod_name:e.title,vod_pic:e.cover_url,vod_remarks:"",cate:{}});return{page:r,pagecount:Math.ceil(t.total/30),list:n}}if(e.startsWith("cr_")){const t={start:30*(r-1),count:30,updated_at:"",items_only:1},n=await this.fetch(`/api/v2/subject_collection/${e.substring(3)}/items`,t);let s=[];for(const e of n.subject_collection_items){let t=""+(e.rating?.value||"");s.push({vod_id:e.id,vod_name:e.title,vod_pic:e.pic.normal||e.pic.large,vod_remarks:t?"评分:"+t:e.year})}return{page:r,pagecount:Math.ceil(n.total/30),list:s}}if(e.startsWith("dl_")){const t={start:30*(r-1),count:30,updated_at:"",items_only:1},n=await this.fetch(`/api/v2/doulist/${e.substring(3)}/posts`,t);let s=[];for(const e of n.items){const t=e.content.subject;if(!t)continue;let n=""+(t.rating?.value||"");s.push({vod_id:t.id,vod_name:t.title,vod_pic:t.pic.normal||t.pic.large,vod_remarks:n?"评分:"+n:t.year})}return{page:r,pagecount:Math.ceil(n.total/30),list:s}}}async fetch(e,t){return this.sign(e,t),(await this.http.get(`${this.api}${e}`,{params:t})).data}sign(e,t){const n=kj().unix();let r=vj.HmacSHA1(`GET&${encodeURIComponent(e)}&${n}`,"bf7dddc7c9cfe6f7");const s=vj.enc.Base64.stringify(r);Object.assign(t,{udid:this.deviceId,uuid:this.deviceId,rom:"android",apikey:"0dad551ec0f84ed02907ff5c42e8ec70",s:"rexxar_new",channel:"Yingyongbao_Market",timezone:"Asia/Shanghai",device_id:this.deviceId,os_rom:"android",apple:"c52fbb99b908be4d026954cc4374f16d",mooncake:"0f607264fc6318a92b9e13c65db7cd3c",sugar:0,_sig:s,_ts:n})}}("douban","豆瓣电影");var Ij={meta:Object.assign({indexs:1},Cj.meta),api:async e=>{e.get("",((e,t)=>Cj.spider(e))),e.post("/init",((e,t)=>Cj.init(e.server))),e.post("/home",((e,t)=>Cj.home(e.body))),e.post("/category",((e,t)=>Cj.category(e.body))),e.post("/detail",((e,t)=>Cj.detail(e.body))),e.post("/play",((e,t)=>Cj.play(e.body))),e.post("/search",((e,t)=>Cj.search(e.body)))}};const Rj={xml:!1,decodeEntities:!0},Oj={_useHtmlParser2:!0,xmlMode:!0};function Nj(e){return(null==e?void 0:e.xml)?"boolean"==typeof e.xml?Oj:{...Oj,...e.xml}:null!=e?e:void 0}var Dj;!function(e){e.Root="root",e.Text="text",e.Directive="directive",e.Comment="comment",e.Script="script",e.Style="style",e.Tag="tag",e.CDATA="cdata",e.Doctype="doctype"}(Dj||(Dj={}));const Pj=Dj.Root,Lj=Dj.Text,Mj=Dj.Directive,Bj=Dj.Comment,jj=Dj.Script,Fj=Dj.Style,$j=Dj.Tag,Uj=Dj.CDATA,Hj=Dj.Doctype;class Gj{constructor(){this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}get parentNode(){return this.parent}set parentNode(e){this.parent=e}get previousSibling(){return this.prev}set previousSibling(e){this.prev=e}get nextSibling(){return this.next}set nextSibling(e){this.next=e}cloneNode(e=!1){return iF(this,e)}}class qj extends Gj{constructor(e){super(),this.data=e}get nodeValue(){return this.data}set nodeValue(e){this.data=e}}class zj extends qj{constructor(){super(...arguments),this.type=Dj.Text}get nodeType(){return 3}}class Vj extends qj{constructor(){super(...arguments),this.type=Dj.Comment}get nodeType(){return 8}}class Yj extends qj{constructor(e,t){super(t),this.name=e,this.type=Dj.Directive}get nodeType(){return 1}}class Kj extends Gj{constructor(e){super(),this.children=e}get firstChild(){var e;return null!==(e=this.children[0])&&void 0!==e?e:null}get lastChild(){return this.children.length>0?this.children[this.children.length-1]:null}get childNodes(){return this.children}set childNodes(e){this.children=e}}class Qj extends Kj{constructor(){super(...arguments),this.type=Dj.CDATA}get nodeType(){return 4}}class Wj extends Kj{constructor(){super(...arguments),this.type=Dj.Root}get nodeType(){return 9}}class Jj extends Kj{constructor(e,t,n=[],r=("script"===e?Dj.Script:"style"===e?Dj.Style:Dj.Tag)){super(n),this.name=e,this.attribs=t,this.type=r}get nodeType(){return 1}get tagName(){return this.name}set tagName(e){this.name=e}get attributes(){return Object.keys(this.attribs).map((e=>{var t,n;return{name:e,value:this.attribs[e],namespace:null===(t=this["x-attribsNamespace"])||void 0===t?void 0:t[e],prefix:null===(n=this["x-attribsPrefix"])||void 0===n?void 0:n[e]}}))}}function Xj(e){return(t=e).type===Dj.Tag||t.type===Dj.Script||t.type===Dj.Style;var t}function Zj(e){return e.type===Dj.CDATA}function eF(e){return e.type===Dj.Text}function tF(e){return e.type===Dj.Comment}function nF(e){return e.type===Dj.Directive}function rF(e){return e.type===Dj.Root}function sF(e){return{}.hasOwnProperty.call(e,"children")}function iF(e,t=!1){let n;if(eF(e))n=new zj(e.data);else if(tF(e))n=new Vj(e.data);else if(Xj(e)){const r=t?oF(e.children):[],s=new Jj(e.name,{...e.attribs},r);r.forEach((e=>e.parent=s)),null!=e.namespace&&(s.namespace=e.namespace),e["x-attribsNamespace"]&&(s["x-attribsNamespace"]={...e["x-attribsNamespace"]}),e["x-attribsPrefix"]&&(s["x-attribsPrefix"]={...e["x-attribsPrefix"]}),n=s}else if(Zj(e)){const r=t?oF(e.children):[],s=new Qj(r);r.forEach((e=>e.parent=s)),n=s}else if(rF(e)){const r=t?oF(e.children):[],s=new Wj(r);r.forEach((e=>e.parent=s)),e["x-mode"]&&(s["x-mode"]=e["x-mode"]),n=s}else{if(!nF(e))throw Error("Not implemented yet: "+e.type);{const t=new Yj(e.name,e.data);null!=e["x-name"]&&(t["x-name"]=e["x-name"],t["x-publicId"]=e["x-publicId"],t["x-systemId"]=e["x-systemId"]),n=t}}return n.startIndex=e.startIndex,n.endIndex=e.endIndex,null!=e.sourceCodeLocation&&(n.sourceCodeLocation=e.sourceCodeLocation),n}function oF(e){const t=e.map((e=>iF(e,!0)));for(let e=1;t.length>e;e++)t[e].prev=t[e-1],t[e-1].next=t[e];return t}const aF={withStartIndices:!1,withEndIndices:!1,xmlMode:!1};class cF{constructor(e,t,n){this.dom=[],this.root=new Wj(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null,"function"==typeof t&&(n=t,t=aF),"object"==typeof e&&(t=e,e=void 0),this.callback=null!=e?e:null,this.options=null!=t?t:aF,this.elementCB=null!=n?n:null}onparserinit(e){this.parser=e}onreset(){this.dom=[],this.root=new Wj(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null}onend(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))}onerror(e){this.handleCallback(e)}onclosetag(){this.lastNode=null;const e=this.tagStack.pop();this.options.withEndIndices&&(e.endIndex=this.parser.endIndex),this.elementCB&&this.elementCB(e)}onopentag(e,t){const n=new Jj(e,t,void 0,this.options.xmlMode?Dj.Tag:void 0);this.addNode(n),this.tagStack.push(n)}ontext(e){const{lastNode:t}=this;if(t&&t.type===Dj.Text)t.data+=e,this.options.withEndIndices&&(t.endIndex=this.parser.endIndex);else{const t=new zj(e);this.addNode(t),this.lastNode=t}}oncomment(e){if(this.lastNode&&this.lastNode.type===Dj.Comment)return void(this.lastNode.data+=e);const t=new Vj(e);this.addNode(t),this.lastNode=t}oncommentend(){this.lastNode=null}oncdatastart(){const e=new zj(""),t=new Qj([e]);this.addNode(t),e.parent=t,this.lastNode=e}oncdataend(){this.lastNode=null}onprocessinginstruction(e,t){const n=new Yj(e,t);this.addNode(n)}handleCallback(e){if("function"==typeof this.callback)this.callback(e,this.dom);else if(e)throw e}addNode(e){const t=this.tagStack[this.tagStack.length-1],n=t.children[t.children.length-1];this.options.withStartIndices&&(e.startIndex=this.parser.startIndex),this.options.withEndIndices&&(e.endIndex=this.parser.endIndex),t.children.push(e),n&&(e.prev=n,n.next=e),e.parent=t,this.lastNode=null}}var lF,uF=new Uint16Array('ᵁ<Õıʊҝջאٵ۞ޢߖࠏ੊ઑඡ๭༉༦჊ረዡᐕᒝᓃᓟᔥ\0\0\0\0\0\0ᕫᛍᦍᰒᷝ὾⁠↰⊍⏀⏻⑂⠤⤒ⴈ⹈⿎〖㊺㘹㞬㣾㨨㩱㫠㬮ࠀEMabcfglmnoprstu\\bfms¦³¹ÈÏlig耻Æ䃆P耻&䀦cute耻Á䃁reve;䄂Āiyx}rc耻Â䃂;䐐r;쀀𝔄rave耻À䃀pha;䎑acr;䄀d;橓Āgp¡on;䄄f;쀀𝔸plyFunction;恡ing耻Å䃅Ācs¾Ãr;쀀𝒜ign;扔ilde耻Ã䃃ml耻Ä䃄ЀaceforsuåûþėĜĢħĪĀcrêòkslash;或Ŷöø;櫧ed;挆y;䐑ƀcrtąċĔause;戵noullis;愬a;䎒r;쀀𝔅pf;쀀𝔹eve;䋘còēmpeq;扎܀HOacdefhilorsuōőŖƀƞƢƵƷƺǜȕɳɸɾcy;䐧PY耻©䂩ƀcpyŝŢźute;䄆Ā;iŧŨ拒talDifferentialD;慅leys;愭ȀaeioƉƎƔƘron;䄌dil耻Ç䃇rc;䄈nint;戰ot;䄊ĀdnƧƭilla;䂸terDot;䂷òſi;䎧rcleȀDMPTǇǋǑǖot;抙inus;抖lus;投imes;抗oĀcsǢǸkwiseContourIntegral;戲eCurlyĀDQȃȏoubleQuote;思uote;怙ȀlnpuȞȨɇɕonĀ;eȥȦ户;橴ƀgitȯȶȺruent;扡nt;戯ourIntegral;戮ĀfrɌɎ;愂oduct;成nterClockwiseContourIntegral;戳oss;樯cr;쀀𝒞pĀ;Cʄʅ拓ap;才րDJSZacefiosʠʬʰʴʸˋ˗ˡ˦̳ҍĀ;oŹʥtrahd;椑cy;䐂cy;䐅cy;䐏ƀgrsʿ˄ˇger;怡r;憡hv;櫤Āayː˕ron;䄎;䐔lĀ;t˝˞戇a;䎔r;쀀𝔇Āaf˫̧Ācm˰̢riticalȀADGT̖̜̀̆cute;䂴oŴ̋̍;䋙bleAcute;䋝rave;䁠ilde;䋜ond;拄ferentialD;慆Ѱ̽\0\0\0͔͂\0Ѕf;쀀𝔻ƀ;DE͈͉͍䂨ot;惜qual;扐blèCDLRUVͣͲ΂ϏϢϸontourIntegraìȹoɴ͹\0\0ͻ»͉nArrow;懓Āeo·ΤftƀARTΐΖΡrrow;懐ightArrow;懔eåˊngĀLRΫτeftĀARγιrrow;柸ightArrow;柺ightArrow;柹ightĀATϘϞrrow;懒ee;抨pɁϩ\0\0ϯrrow;懑ownArrow;懕erticalBar;戥ǹABLRTaВЪаўѿͼrrowƀ;BUНОТ憓ar;椓pArrow;懵reve;䌑eft˒к\0ц\0ѐightVector;楐eeVector;楞ectorĀ;Bљњ憽ar;楖ightǔѧ\0ѱeeVector;楟ectorĀ;BѺѻ懁ar;楗eeĀ;A҆҇护rrow;憧ĀctҒҗr;쀀𝒟rok;䄐ࠀNTacdfglmopqstuxҽӀӄӋӞӢӧӮӵԡԯԶՒ՝ՠեG;䅊H耻Ð䃐cute耻É䃉ƀaiyӒӗӜron;䄚rc耻Ê䃊;䐭ot;䄖r;쀀𝔈rave耻È䃈ement;戈ĀapӺӾcr;䄒tyɓԆ\0\0ԒmallSquare;旻erySmallSquare;斫ĀgpԦԪon;䄘f;쀀𝔼silon;䎕uĀaiԼՉlĀ;TՂՃ橵ilde;扂librium;懌Āci՗՚r;愰m;橳a;䎗ml耻Ë䃋Āipժկsts;戃onentialE;慇ʀcfiosօֈ֍ֲ׌y;䐤r;쀀𝔉lledɓ֗\0\0֣mallSquare;旼erySmallSquare;斪Ͱֺ\0ֿ\0\0ׄf;쀀𝔽All;戀riertrf;愱cò׋؀JTabcdfgorstר׬ׯ׺؀ؒؖ؛؝أ٬ٲcy;䐃耻>䀾mmaĀ;d׷׸䎓;䏜reve;䄞ƀeiy؇،ؐdil;䄢rc;䄜;䐓ot;䄠r;쀀𝔊;拙pf;쀀𝔾eater̀EFGLSTصلَٖٛ٦qualĀ;Lؾؿ扥ess;招ullEqual;执reater;檢ess;扷lantEqual;橾ilde;扳cr;쀀𝒢;扫ЀAacfiosuڅڋږڛڞڪھۊRDcy;䐪Āctڐڔek;䋇;䁞irc;䄤r;愌lbertSpace;愋ǰگ\0ڲf;愍izontalLine;攀Āctۃۅòکrok;䄦mpńېۘownHumðįqual;扏܀EJOacdfgmnostuۺ۾܃܇܎ܚܞܡܨ݄ݸދޏޕcy;䐕lig;䄲cy;䐁cute耻Í䃍Āiyܓܘrc耻Î䃎;䐘ot;䄰r;愑rave耻Ì䃌ƀ;apܠܯܿĀcgܴܷr;䄪inaryI;慈lieóϝǴ݉\0ݢĀ;eݍݎ戬Āgrݓݘral;戫section;拂isibleĀCTݬݲomma;恣imes;恢ƀgptݿރވon;䄮f;쀀𝕀a;䎙cr;愐ilde;䄨ǫޚ\0ޞcy;䐆l耻Ï䃏ʀcfosuެ޷޼߂ߐĀiyޱ޵rc;䄴;䐙r;쀀𝔍pf;쀀𝕁ǣ߇\0ߌr;쀀𝒥rcy;䐈kcy;䐄΀HJacfosߤߨ߽߬߱ࠂࠈcy;䐥cy;䐌ppa;䎚Āey߶߻dil;䄶;䐚r;쀀𝔎pf;쀀𝕂cr;쀀𝒦րJTaceflmostࠥࠩࠬࡐࡣ঳সে্਷ੇcy;䐉耻<䀼ʀcmnpr࠷࠼ࡁࡄࡍute;䄹bda;䎛g;柪lacetrf;愒r;憞ƀaeyࡗ࡜ࡡron;䄽dil;䄻;䐛Āfsࡨ॰tԀACDFRTUVarࡾࢩࢱࣦ࣠ࣼयज़ΐ४Ānrࢃ࢏gleBracket;柨rowƀ;BR࢙࢚࢞憐ar;懤ightArrow;懆eiling;挈oǵࢷ\0ࣃbleBracket;柦nǔࣈ\0࣒eeVector;楡ectorĀ;Bࣛࣜ懃ar;楙loor;挊ightĀAV࣯ࣵrrow;憔ector;楎Āerँगeƀ;AVउऊऐ抣rrow;憤ector;楚iangleƀ;BEतथऩ抲ar;槏qual;抴pƀDTVषूौownVector;楑eeVector;楠ectorĀ;Bॖॗ憿ar;楘ectorĀ;B॥०憼ar;楒ightáΜs̀EFGLSTॾঋকঝঢভqualGreater;拚ullEqual;扦reater;扶ess;檡lantEqual;橽ilde;扲r;쀀𝔏Ā;eঽা拘ftarrow;懚idot;䄿ƀnpw৔ਖਛgȀLRlr৞৷ਂਐeftĀAR০৬rrow;柵ightArrow;柷ightArrow;柶eftĀarγਊightáοightáϊf;쀀𝕃erĀLRਢਬeftArrow;憙ightArrow;憘ƀchtਾੀੂòࡌ;憰rok;䅁;扪Ѐacefiosuਗ਼੝੠੷੼અઋ઎p;椅y;䐜Ādl੥੯iumSpace;恟lintrf;愳r;쀀𝔐nusPlus;戓pf;쀀𝕄cò੶;䎜ҀJacefostuણધભીଔଙඑ඗ඞcy;䐊cute;䅃ƀaey઴હાron;䅇dil;䅅;䐝ƀgswે૰଎ativeƀMTV૓૟૨ediumSpace;怋hiĀcn૦૘ë૙eryThiî૙tedĀGL૸ଆreaterGreateòٳessLesóੈLine;䀊r;쀀𝔑ȀBnptଢନଷ଺reak;恠BreakingSpace;䂠f;愕ڀ;CDEGHLNPRSTV୕ୖ୪୼஡௫ఄ౞಄ದ೘ൡඅ櫬Āou୛୤ngruent;扢pCap;扭oubleVerticalBar;戦ƀlqxஃஊ஛ement;戉ualĀ;Tஒஓ扠ilde;쀀≂̸ists;戄reater΀;EFGLSTஶஷ஽௉௓௘௥扯qual;扱ullEqual;쀀≧̸reater;쀀≫̸ess;批lantEqual;쀀⩾̸ilde;扵umpń௲௽ownHump;쀀≎̸qual;쀀≏̸eĀfsఊధtTriangleƀ;BEచఛడ拪ar;쀀⧏̸qual;括s̀;EGLSTవశ఼ౄోౘ扮qual;扰reater;扸ess;쀀≪̸lantEqual;쀀⩽̸ilde;扴estedĀGL౨౹reaterGreater;쀀⪢̸essLess;쀀⪡̸recedesƀ;ESಒಓಛ技qual;쀀⪯̸lantEqual;拠ĀeiಫಹverseElement;戌ghtTriangleƀ;BEೋೌ೒拫ar;쀀⧐̸qual;拭ĀquೝഌuareSuĀbp೨೹setĀ;E೰ೳ쀀⊏̸qual;拢ersetĀ;Eഃആ쀀⊐̸qual;拣ƀbcpഓതൎsetĀ;Eഛഞ쀀⊂⃒qual;抈ceedsȀ;ESTലള഻െ抁qual;쀀⪰̸lantEqual;拡ilde;쀀≿̸ersetĀ;E൘൛쀀⊃⃒qual;抉ildeȀ;EFT൮൯൵ൿ扁qual;扄ullEqual;扇ilde;扉erticalBar;戤cr;쀀𝒩ilde耻Ñ䃑;䎝܀Eacdfgmoprstuvලෂ෉෕ෛ෠෧෼ขภยา฿ไlig;䅒cute耻Ó䃓Āiy෎ීrc耻Ô䃔;䐞blac;䅐r;쀀𝔒rave耻Ò䃒ƀaei෮ෲ෶cr;䅌ga;䎩cron;䎟pf;쀀𝕆enCurlyĀDQฎบoubleQuote;怜uote;怘;橔Āclวฬr;쀀𝒪ash耻Ø䃘iŬื฼de耻Õ䃕es;樷ml耻Ö䃖erĀBP๋๠Āar๐๓r;怾acĀek๚๜;揞et;掴arenthesis;揜Ҁacfhilors๿ງຊຏຒດຝະ໼rtialD;戂y;䐟r;쀀𝔓i;䎦;䎠usMinus;䂱Āipຢອncareplanåڝf;愙Ȁ;eio຺ູ໠໤檻cedesȀ;EST່້໏໚扺qual;檯lantEqual;扼ilde;找me;怳Ādp໩໮uct;戏ortionĀ;aȥ໹l;戝Āci༁༆r;쀀𝒫;䎨ȀUfos༑༖༛༟OT耻"䀢r;쀀𝔔pf;愚cr;쀀𝒬؀BEacefhiorsu༾གྷཇའཱིྦྷྪྭ႖ႩႴႾarr;椐G耻®䂮ƀcnrཎནབute;䅔g;柫rĀ;tཛྷཝ憠l;椖ƀaeyཧཬཱron;䅘dil;䅖;䐠Ā;vླྀཹ愜erseĀEUྂྙĀlq྇ྎement;戋uilibrium;懋pEquilibrium;楯r»ཹo;䎡ghtЀACDFTUVa࿁࿫࿳ဢဨၛႇϘĀnr࿆࿒gleBracket;柩rowƀ;BL࿜࿝࿡憒ar;懥eftArrow;懄eiling;按oǵ࿹\0စbleBracket;柧nǔည\0နeeVector;楝ectorĀ;Bဝသ懂ar;楕loor;挋Āerိ၃eƀ;AVဵံြ抢rrow;憦ector;楛iangleƀ;BEၐၑၕ抳ar;槐qual;抵pƀDTVၣၮၸownVector;楏eeVector;楜ectorĀ;Bႂႃ憾ar;楔ectorĀ;B႑႒懀ar;楓Āpuႛ႞f;愝ndImplies;楰ightarrow;懛ĀchႹႼr;愛;憱leDelayed;槴ڀHOacfhimoqstuფჱჷჽᄙᄞᅑᅖᅡᅧᆵᆻᆿĀCcჩხHcy;䐩y;䐨FTcy;䐬cute;䅚ʀ;aeiyᄈᄉᄎᄓᄗ檼ron;䅠dil;䅞rc;䅜;䐡r;쀀𝔖ortȀDLRUᄪᄴᄾᅉownArrow»ОeftArrow»࢚ightArrow»࿝pArrow;憑gma;䎣allCircle;战pf;쀀𝕊ɲᅭ\0\0ᅰt;戚areȀ;ISUᅻᅼᆉᆯ斡ntersection;抓uĀbpᆏᆞsetĀ;Eᆗᆘ抏qual;抑ersetĀ;Eᆨᆩ抐qual;抒nion;抔cr;쀀𝒮ar;拆ȀbcmpᇈᇛሉላĀ;sᇍᇎ拐etĀ;Eᇍᇕqual;抆ĀchᇠህeedsȀ;ESTᇭᇮᇴᇿ扻qual;檰lantEqual;扽ilde;承Tháྌ;我ƀ;esሒሓሣ拑rsetĀ;Eሜም抃qual;抇et»ሓրHRSacfhiorsሾቄ቉ቕ቞ቱቶኟዂወዑORN耻Þ䃞ADE;愢ĀHc቎ቒcy;䐋y;䐦Ābuቚቜ;䀉;䎤ƀaeyብቪቯron;䅤dil;䅢;䐢r;쀀𝔗Āeiቻ኉ǲኀ\0ኇefore;戴a;䎘Ācn኎ኘkSpace;쀀  Space;怉ldeȀ;EFTካኬኲኼ戼qual;扃ullEqual;扅ilde;扈pf;쀀𝕋ipleDot;惛Āctዖዛr;쀀𝒯rok;䅦ૡዷጎጚጦ\0ጬጱ\0\0\0\0\0ጸጽ፷ᎅ\0᏿ᐄᐊᐐĀcrዻጁute耻Ú䃚rĀ;oጇገ憟cir;楉rǣጓ\0጖y;䐎ve;䅬Āiyጞጣrc耻Û䃛;䐣blac;䅰r;쀀𝔘rave耻Ù䃙acr;䅪Ādiፁ፩erĀBPፈ፝Āarፍፐr;䁟acĀekፗፙ;揟et;掵arenthesis;揝onĀ;P፰፱拃lus;抎Āgp፻፿on;䅲f;쀀𝕌ЀADETadps᎕ᎮᎸᏄϨᏒᏗᏳrrowƀ;BDᅐᎠᎤar;椒ownArrow;懅ownArrow;憕quilibrium;楮eeĀ;AᏋᏌ报rrow;憥ownáϳerĀLRᏞᏨeftArrow;憖ightArrow;憗iĀ;lᏹᏺ䏒on;䎥ing;䅮cr;쀀𝒰ilde;䅨ml耻Ü䃜ҀDbcdefosvᐧᐬᐰᐳᐾᒅᒊᒐᒖash;披ar;櫫y;䐒ashĀ;lᐻᐼ抩;櫦Āerᑃᑅ;拁ƀbtyᑌᑐᑺar;怖Ā;iᑏᑕcalȀBLSTᑡᑥᑪᑴar;戣ine;䁼eparator;杘ilde;所ThinSpace;怊r;쀀𝔙pf;쀀𝕍cr;쀀𝒱dash;抪ʀcefosᒧᒬᒱᒶᒼirc;䅴dge;拀r;쀀𝔚pf;쀀𝕎cr;쀀𝒲Ȁfiosᓋᓐᓒᓘr;쀀𝔛;䎞pf;쀀𝕏cr;쀀𝒳ҀAIUacfosuᓱᓵᓹᓽᔄᔏᔔᔚᔠcy;䐯cy;䐇cy;䐮cute耻Ý䃝Āiyᔉᔍrc;䅶;䐫r;쀀𝔜pf;쀀𝕐cr;쀀𝒴ml;䅸ЀHacdefosᔵᔹᔿᕋᕏᕝᕠᕤcy;䐖cute;䅹Āayᕄᕉron;䅽;䐗ot;䅻ǲᕔ\0ᕛoWidtè૙a;䎖r;愨pf;愤cr;쀀𝒵௡ᖃᖊᖐ\0ᖰᖶᖿ\0\0\0\0ᗆᗛᗫᙟ᙭\0ᚕ᚛ᚲᚹ\0ᚾcute耻á䃡reve;䄃̀;Ediuyᖜᖝᖡᖣᖨᖭ戾;쀀∾̳;房rc耻â䃢te肻´̆;䐰lig耻æ䃦Ā;r²ᖺ;쀀𝔞rave耻à䃠ĀepᗊᗖĀfpᗏᗔsym;愵èᗓha;䎱ĀapᗟcĀclᗤᗧr;䄁g;樿ɤᗰ\0\0ᘊʀ;adsvᗺᗻᗿᘁᘇ戧nd;橕;橜lope;橘;橚΀;elmrszᘘᘙᘛᘞᘿᙏᙙ戠;榤e»ᘙsdĀ;aᘥᘦ戡ѡᘰᘲᘴᘶᘸᘺᘼᘾ;榨;榩;榪;榫;榬;榭;榮;榯tĀ;vᙅᙆ戟bĀ;dᙌᙍ抾;榝Āptᙔᙗh;戢»¹arr;捼Āgpᙣᙧon;䄅f;쀀𝕒΀;Eaeiop዁ᙻᙽᚂᚄᚇᚊ;橰cir;橯;扊d;手s;䀧roxĀ;e዁ᚒñᚃing耻å䃥ƀctyᚡᚦᚨr;쀀𝒶;䀪mpĀ;e዁ᚯñʈilde耻ã䃣ml耻ä䃤Āciᛂᛈoninôɲnt;樑ࠀNabcdefiklnoprsu᛭ᛱᜰ᜼ᝃᝈ᝸᝽០៦ᠹᡐᜍ᤽᥈ᥰot;櫭Ācrᛶ᜞kȀcepsᜀᜅᜍᜓong;扌psilon;䏶rime;怵imĀ;e᜚᜛戽q;拍Ŷᜢᜦee;抽edĀ;gᜬᜭ挅e»ᜭrkĀ;t፜᜷brk;掶Āoyᜁᝁ;䐱quo;怞ʀcmprtᝓ᝛ᝡᝤᝨausĀ;eĊĉptyv;榰séᜌnoõēƀahwᝯ᝱ᝳ;䎲;愶een;扬r;쀀𝔟g΀costuvwឍឝឳេ៕៛៞ƀaiuបពរðݠrc;旯p»፱ƀdptឤឨឭot;樀lus;樁imes;樂ɱឹ\0\0ើcup;樆ar;昅riangleĀdu៍្own;施p;斳plus;樄eåᑄåᒭarow;植ƀako៭ᠦᠵĀcn៲ᠣkƀlst៺֫᠂ozenge;槫riangleȀ;dlr᠒᠓᠘᠝斴own;斾eft;旂ight;斸k;搣Ʊᠫ\0ᠳƲᠯ\0ᠱ;斒;斑4;斓ck;斈ĀeoᠾᡍĀ;qᡃᡆ쀀=⃥uiv;쀀≡⃥t;挐Ȁptwxᡙᡞᡧᡬf;쀀𝕓Ā;tᏋᡣom»Ꮜtie;拈؀DHUVbdhmptuvᢅᢖᢪᢻᣗᣛᣬ᣿ᤅᤊᤐᤡȀLRlrᢎᢐᢒᢔ;敗;敔;敖;敓ʀ;DUduᢡᢢᢤᢦᢨ敐;敦;敩;敤;敧ȀLRlrᢳᢵᢷᢹ;敝;敚;敜;教΀;HLRhlrᣊᣋᣍᣏᣑᣓᣕ救;敬;散;敠;敫;敢;敟ox;槉ȀLRlrᣤᣦᣨᣪ;敕;敒;攐;攌ʀ;DUduڽ᣷᣹᣻᣽;敥;敨;攬;攴inus;抟lus;択imes;抠ȀLRlrᤙᤛᤝ᤟;敛;敘;攘;攔΀;HLRhlrᤰᤱᤳᤵᤷ᤻᤹攂;敪;敡;敞;攼;攤;攜Āevģ᥂bar耻¦䂦Ȁceioᥑᥖᥚᥠr;쀀𝒷mi;恏mĀ;e᜚᜜lƀ;bhᥨᥩᥫ䁜;槅sub;柈Ŭᥴ᥾lĀ;e᥹᥺怢t»᥺pƀ;Eeįᦅᦇ;檮Ā;qۜۛೡᦧ\0᧨ᨑᨕᨲ\0ᨷᩐ\0\0᪴\0\0᫁\0\0ᬡᬮ᭍᭒\0᯽\0ᰌƀcpr᦭ᦲ᧝ute;䄇̀;abcdsᦿᧀᧄ᧊᧕᧙戩nd;橄rcup;橉Āau᧏᧒p;橋p;橇ot;橀;쀀∩︀Āeo᧢᧥t;恁îړȀaeiu᧰᧻ᨁᨅǰ᧵\0᧸s;橍on;䄍dil耻ç䃧rc;䄉psĀ;sᨌᨍ橌m;橐ot;䄋ƀdmnᨛᨠᨦil肻¸ƭptyv;榲t脀¢;eᨭᨮ䂢räƲr;쀀𝔠ƀceiᨽᩀᩍy;䑇ckĀ;mᩇᩈ朓ark»ᩈ;䏇r΀;Ecefms᩟᩠ᩢᩫ᪤᪪᪮旋;槃ƀ;elᩩᩪᩭ䋆q;扗eɡᩴ\0\0᪈rrowĀlr᩼᪁eft;憺ight;憻ʀRSacd᪒᪔᪖᪚᪟»ཇ;擈st;抛irc;抚ash;抝nint;樐id;櫯cir;槂ubsĀ;u᪻᪼晣it»᪼ˬ᫇᫔᫺\0ᬊonĀ;eᫍᫎ䀺Ā;qÇÆɭ᫙\0\0᫢aĀ;t᫞᫟䀬;䁀ƀ;fl᫨᫩᫫戁îᅠeĀmx᫱᫶ent»᫩eóɍǧ᫾\0ᬇĀ;dኻᬂot;橭nôɆƀfryᬐᬔᬗ;쀀𝕔oäɔ脀©;sŕᬝr;愗Āaoᬥᬩrr;憵ss;朗Ācuᬲᬷr;쀀𝒸Ābpᬼ᭄Ā;eᭁᭂ櫏;櫑Ā;eᭉᭊ櫐;櫒dot;拯΀delprvw᭠᭬᭷ᮂᮬᯔ᯹arrĀlr᭨᭪;椸;椵ɰ᭲\0\0᭵r;拞c;拟arrĀ;p᭿ᮀ憶;椽̀;bcdosᮏᮐᮖᮡᮥᮨ截rcap;橈Āauᮛᮞp;橆p;橊ot;抍r;橅;쀀∪︀Ȁalrv᮵ᮿᯞᯣrrĀ;mᮼᮽ憷;椼yƀevwᯇᯔᯘqɰᯎ\0\0ᯒreã᭳uã᭵ee;拎edge;拏en耻¤䂤earrowĀlrᯮ᯳eft»ᮀight»ᮽeäᯝĀciᰁᰇoninôǷnt;戱lcty;挭ঀAHabcdefhijlorstuwz᰸᰻᰿ᱝᱩᱵᲊᲞᲬᲷ᳻᳿ᴍᵻᶑᶫᶻ᷆᷍rò΁ar;楥Ȁglrs᱈ᱍ᱒᱔ger;怠eth;愸òᄳhĀ;vᱚᱛ怐»ऊūᱡᱧarow;椏aã̕Āayᱮᱳron;䄏;䐴ƀ;ao̲ᱼᲄĀgrʿᲁr;懊tseq;橷ƀglmᲑᲔᲘ耻°䂰ta;䎴ptyv;榱ĀirᲣᲨsht;楿;쀀𝔡arĀlrᲳᲵ»ࣜ»သʀaegsv᳂͸᳖᳜᳠mƀ;oș᳊᳔ndĀ;ș᳑uit;晦amma;䏝in;拲ƀ;io᳧᳨᳸䃷de脀÷;o᳧ᳰntimes;拇nø᳷cy;䑒cɯᴆ\0\0ᴊrn;挞op;挍ʀlptuwᴘᴝᴢᵉᵕlar;䀤f;쀀𝕕ʀ;emps̋ᴭᴷᴽᵂqĀ;d͒ᴳot;扑inus;戸lus;戔quare;抡blebarwedgåúnƀadhᄮᵝᵧownarrowóᲃarpoonĀlrᵲᵶefôᲴighôᲶŢᵿᶅkaro÷གɯᶊ\0\0ᶎrn;挟op;挌ƀcotᶘᶣᶦĀryᶝᶡ;쀀𝒹;䑕l;槶rok;䄑Ādrᶰᶴot;拱iĀ;fᶺ᠖斿Āah᷀᷃ròЩaòྦangle;榦Āci᷒ᷕy;䑟grarr;柿ऀDacdefglmnopqrstuxḁḉḙḸոḼṉṡṾấắẽỡἪἷὄ὎὚ĀDoḆᴴoôᲉĀcsḎḔute耻é䃩ter;橮ȀaioyḢḧḱḶron;䄛rĀ;cḭḮ扖耻ê䃪lon;払;䑍ot;䄗ĀDrṁṅot;扒;쀀𝔢ƀ;rsṐṑṗ檚ave耻è䃨Ā;dṜṝ檖ot;檘Ȁ;ilsṪṫṲṴ檙nters;揧;愓Ā;dṹṺ檕ot;檗ƀapsẅẉẗcr;䄓tyƀ;svẒẓẕ戅et»ẓpĀ1;ẝẤĳạả;怄;怅怃ĀgsẪẬ;䅋p;怂ĀgpẴẸon;䄙f;쀀𝕖ƀalsỄỎỒrĀ;sỊị拕l;槣us;橱iƀ;lvỚớở䎵on»ớ;䏵ȀcsuvỪỳἋἣĀioữḱrc»Ḯɩỹ\0\0ỻíՈantĀglἂἆtr»ṝess»Ṻƀaeiἒ἖Ἒls;䀽st;扟vĀ;DȵἠD;橸parsl;槥ĀDaἯἳot;打rr;楱ƀcdiἾὁỸr;愯oô͒ĀahὉὋ;䎷耻ð䃰Āmrὓὗl耻ë䃫o;悬ƀcipὡὤὧl;䀡sôծĀeoὬὴctatioîՙnentialåչৡᾒ\0ᾞ\0ᾡᾧ\0\0ῆῌ\0ΐ\0ῦῪ \0 ⁚llingdotseñṄy;䑄male;晀ƀilrᾭᾳ῁lig;耀ﬃɩᾹ\0\0᾽g;耀ﬀig;耀ﬄ;쀀𝔣lig;耀ﬁlig;쀀fjƀaltῙ῜ῡt;晭ig;耀ﬂns;斱of;䆒ǰ΅\0ῳf;쀀𝕗ĀakֿῷĀ;vῼ´拔;櫙artint;樍Āao‌⁕Ācs‑⁒α‚‰‸⁅⁈\0⁐β•‥‧‪‬\0‮耻½䂽;慓耻¼䂼;慕;慙;慛Ƴ‴\0‶;慔;慖ʴ‾⁁\0\0⁃耻¾䂾;慗;慜5;慘ƶ⁌\0⁎;慚;慝8;慞l;恄wn;挢cr;쀀𝒻ࢀEabcdefgijlnorstv₂₉₟₥₰₴⃰⃵⃺⃿℃ℒℸ̗ℾ⅒↞Ā;lٍ₇;檌ƀcmpₐₕ₝ute;䇵maĀ;dₜ᳚䎳;檆reve;䄟Āiy₪₮rc;䄝;䐳ot;䄡Ȁ;lqsؾق₽⃉ƀ;qsؾٌ⃄lanô٥Ȁ;cdl٥⃒⃥⃕c;檩otĀ;o⃜⃝檀Ā;l⃢⃣檂;檄Ā;e⃪⃭쀀⋛︀s;檔r;쀀𝔤Ā;gٳ؛mel;愷cy;䑓Ȁ;Eajٚℌℎℐ;檒;檥;檤ȀEaesℛℝ℩ℴ;扩pĀ;p℣ℤ檊rox»ℤĀ;q℮ℯ檈Ā;q℮ℛim;拧pf;쀀𝕘Āci⅃ⅆr;愊mƀ;el٫ⅎ⅐;檎;檐茀>;cdlqr׮ⅠⅪⅮⅳⅹĀciⅥⅧ;檧r;橺ot;拗Par;榕uest;橼ʀadelsↄⅪ←ٖ↛ǰ↉\0↎proø₞r;楸qĀlqؿ↖lesó₈ií٫Āen↣↭rtneqq;쀀≩︀Å↪ԀAabcefkosy⇄⇇⇱⇵⇺∘∝∯≨≽ròΠȀilmr⇐⇔⇗⇛rsðᒄf»․ilôکĀdr⇠⇤cy;䑊ƀ;cwࣴ⇫⇯ir;楈;憭ar;意irc;䄥ƀalr∁∎∓rtsĀ;u∉∊晥it»∊lip;怦con;抹r;쀀𝔥sĀew∣∩arow;椥arow;椦ʀamopr∺∾≃≞≣rr;懿tht;戻kĀlr≉≓eftarrow;憩ightarrow;憪f;쀀𝕙bar;怕ƀclt≯≴≸r;쀀𝒽asè⇴rok;䄧Ābp⊂⊇ull;恃hen»ᱛૡ⊣\0⊪\0⊸⋅⋎\0⋕⋳\0\0⋸⌢⍧⍢⍿\0⎆⎪⎴cute耻í䃭ƀ;iyݱ⊰⊵rc耻î䃮;䐸Ācx⊼⊿y;䐵cl耻¡䂡ĀfrΟ⋉;쀀𝔦rave耻ì䃬Ȁ;inoܾ⋝⋩⋮Āin⋢⋦nt;樌t;戭fin;槜ta;愩lig;䄳ƀaop⋾⌚⌝ƀcgt⌅⌈⌗r;䄫ƀelpܟ⌏⌓inåގarôܠh;䄱f;抷ed;䆵ʀ;cfotӴ⌬⌱⌽⍁are;愅inĀ;t⌸⌹戞ie;槝doô⌙ʀ;celpݗ⍌⍐⍛⍡al;抺Āgr⍕⍙eróᕣã⍍arhk;樗rod;樼Ȁcgpt⍯⍲⍶⍻y;䑑on;䄯f;쀀𝕚a;䎹uest耻¿䂿Āci⎊⎏r;쀀𝒾nʀ;EdsvӴ⎛⎝⎡ӳ;拹ot;拵Ā;v⎦⎧拴;拳Ā;iݷ⎮lde;䄩ǫ⎸\0⎼cy;䑖l耻ï䃯̀cfmosu⏌⏗⏜⏡⏧⏵Āiy⏑⏕rc;䄵;䐹r;쀀𝔧ath;䈷pf;쀀𝕛ǣ⏬\0⏱r;쀀𝒿rcy;䑘kcy;䑔Ѐacfghjos␋␖␢␧␭␱␵␻ppaĀ;v␓␔䎺;䏰Āey␛␠dil;䄷;䐺r;쀀𝔨reen;䄸cy;䑅cy;䑜pf;쀀𝕜cr;쀀𝓀஀ABEHabcdefghjlmnoprstuv⑰⒁⒆⒍⒑┎┽╚▀♎♞♥♹♽⚚⚲⛘❝❨➋⟀⠁⠒ƀart⑷⑺⑼rò৆òΕail;椛arr;椎Ā;gঔ⒋;檋ar;楢ॣ⒥\0⒪\0⒱\0\0\0\0\0⒵Ⓔ\0ⓆⓈⓍ\0⓹ute;䄺mptyv;榴raîࡌbda;䎻gƀ;dlࢎⓁⓃ;榑åࢎ;檅uo耻«䂫rЀ;bfhlpst࢙ⓞⓦⓩ⓫⓮⓱⓵Ā;f࢝ⓣs;椟s;椝ë≒p;憫l;椹im;楳l;憢ƀ;ae⓿─┄檫il;椙Ā;s┉┊檭;쀀⪭︀ƀabr┕┙┝rr;椌rk;杲Āak┢┬cĀek┨┪;䁻;䁛Āes┱┳;榋lĀdu┹┻;榏;榍Ȁaeuy╆╋╖╘ron;䄾Ādi═╔il;䄼ìࢰâ┩;䐻Ȁcqrs╣╦╭╽a;椶uoĀ;rนᝆĀdu╲╷har;楧shar;楋h;憲ʀ;fgqs▋▌উ◳◿扤tʀahlrt▘▤▷◂◨rrowĀ;t࢙□aé⓶arpoonĀdu▯▴own»њp»०eftarrows;懇ightƀahs◍◖◞rrowĀ;sࣴࢧarpoonó྘quigarro÷⇰hreetimes;拋ƀ;qs▋ও◺lanôবʀ;cdgsব☊☍☝☨c;檨otĀ;o☔☕橿Ā;r☚☛檁;檃Ā;e☢☥쀀⋚︀s;檓ʀadegs☳☹☽♉♋pproøⓆot;拖qĀgq♃♅ôউgtò⒌ôছiíলƀilr♕࣡♚sht;楼;쀀𝔩Ā;Eজ♣;檑š♩♶rĀdu▲♮Ā;l॥♳;楪lk;斄cy;䑙ʀ;achtੈ⚈⚋⚑⚖rò◁orneòᴈard;楫ri;旺Āio⚟⚤dot;䅀ustĀ;a⚬⚭掰che»⚭ȀEaes⚻⚽⛉⛔;扨pĀ;p⛃⛄檉rox»⛄Ā;q⛎⛏檇Ā;q⛎⚻im;拦Ѐabnoptwz⛩⛴⛷✚✯❁❇❐Ānr⛮⛱g;柬r;懽rëࣁgƀlmr⛿✍✔eftĀar০✇ightá৲apsto;柼ightá৽parrowĀlr✥✩efô⓭ight;憬ƀafl✶✹✽r;榅;쀀𝕝us;樭imes;樴š❋❏st;戗áፎƀ;ef❗❘᠀旊nge»❘arĀ;l❤❥䀨t;榓ʀachmt❳❶❼➅➇ròࢨorneòᶌarĀ;d྘➃;業;怎ri;抿̀achiqt➘➝ੀ➢➮➻quo;怹r;쀀𝓁mƀ;egল➪➬;檍;檏Ābu┪➳oĀ;rฟ➹;怚rok;䅂萀<;cdhilqrࠫ⟒☹⟜⟠⟥⟪⟰Āci⟗⟙;檦r;橹reå◲mes;拉arr;楶uest;橻ĀPi⟵⟹ar;榖ƀ;ef⠀भ᠛旃rĀdu⠇⠍shar;楊har;楦Āen⠗⠡rtneqq;쀀≨︀Å⠞܀Dacdefhilnopsu⡀⡅⢂⢎⢓⢠⢥⢨⣚⣢⣤ઃ⣳⤂Dot;戺Ȁclpr⡎⡒⡣⡽r耻¯䂯Āet⡗⡙;時Ā;e⡞⡟朠se»⡟Ā;sျ⡨toȀ;dluျ⡳⡷⡻owîҌefôएðᏑker;斮Āoy⢇⢌mma;権;䐼ash;怔asuredangle»ᘦr;쀀𝔪o;愧ƀcdn⢯⢴⣉ro耻µ䂵Ȁ;acdᑤ⢽⣀⣄sôᚧir;櫰ot肻·Ƶusƀ;bd⣒ᤃ⣓戒Ā;uᴼ⣘;横ţ⣞⣡p;櫛ò−ðઁĀdp⣩⣮els;抧f;쀀𝕞Āct⣸⣽r;쀀𝓂pos»ᖝƀ;lm⤉⤊⤍䎼timap;抸ఀGLRVabcdefghijlmoprstuvw⥂⥓⥾⦉⦘⧚⧩⨕⨚⩘⩝⪃⪕⪤⪨⬄⬇⭄⭿⮮ⰴⱧⱼ⳩Āgt⥇⥋;쀀⋙̸Ā;v⥐௏쀀≫⃒ƀelt⥚⥲⥶ftĀar⥡⥧rrow;懍ightarrow;懎;쀀⋘̸Ā;v⥻ే쀀≪⃒ightarrow;懏ĀDd⦎⦓ash;抯ash;抮ʀbcnpt⦣⦧⦬⦱⧌la»˞ute;䅄g;쀀∠⃒ʀ;Eiop඄⦼⧀⧅⧈;쀀⩰̸d;쀀≋̸s;䅉roø඄urĀ;a⧓⧔普lĀ;s⧓ସǳ⧟\0⧣p肻 ଷmpĀ;e௹ఀʀaeouy⧴⧾⨃⨐⨓ǰ⧹\0⧻;橃on;䅈dil;䅆ngĀ;dൾ⨊ot;쀀⩭̸p;橂;䐽ash;怓΀;Aadqsxஒ⨩⨭⨻⩁⩅⩐rr;懗rĀhr⨳⨶k;椤Ā;oᏲᏰot;쀀≐̸uiöୣĀei⩊⩎ar;椨í஘istĀ;s஠டr;쀀𝔫ȀEest௅⩦⩹⩼ƀ;qs஼⩭௡ƀ;qs஼௅⩴lanô௢ií௪Ā;rஶ⪁»ஷƀAap⪊⪍⪑rò⥱rr;憮ar;櫲ƀ;svྍ⪜ྌĀ;d⪡⪢拼;拺cy;䑚΀AEadest⪷⪺⪾⫂⫅⫶⫹rò⥦;쀀≦̸rr;憚r;急Ȁ;fqs఻⫎⫣⫯tĀar⫔⫙rro÷⫁ightarro÷⪐ƀ;qs఻⪺⫪lanôౕĀ;sౕ⫴»శiíౝĀ;rవ⫾iĀ;eచథiäඐĀpt⬌⬑f;쀀𝕟膀¬;in⬙⬚⬶䂬nȀ;Edvஉ⬤⬨⬮;쀀⋹̸ot;쀀⋵̸ǡஉ⬳⬵;拷;拶iĀ;vಸ⬼ǡಸ⭁⭃;拾;拽ƀaor⭋⭣⭩rȀ;ast୻⭕⭚⭟lleì୻l;쀀⫽⃥;쀀∂̸lint;樔ƀ;ceಒ⭰⭳uåಥĀ;cಘ⭸Ā;eಒ⭽ñಘȀAait⮈⮋⮝⮧rò⦈rrƀ;cw⮔⮕⮙憛;쀀⤳̸;쀀↝̸ghtarrow»⮕riĀ;eೋೖ΀chimpqu⮽⯍⯙⬄୸⯤⯯Ȁ;cerല⯆ഷ⯉uå൅;쀀𝓃ortɭ⬅\0\0⯖ará⭖mĀ;e൮⯟Ā;q൴൳suĀbp⯫⯭å೸åഋƀbcp⯶ⰑⰙȀ;Ees⯿ⰀഢⰄ抄;쀀⫅̸etĀ;eഛⰋqĀ;qണⰀcĀ;eലⰗñസȀ;EesⰢⰣൟⰧ抅;쀀⫆̸etĀ;e൘ⰮqĀ;qൠⰣȀgilrⰽⰿⱅⱇìௗlde耻ñ䃱çృiangleĀlrⱒⱜeftĀ;eచⱚñదightĀ;eೋⱥñ೗Ā;mⱬⱭ䎽ƀ;esⱴⱵⱹ䀣ro;愖p;怇ҀDHadgilrsⲏⲔⲙⲞⲣⲰⲶⳓⳣash;抭arr;椄p;쀀≍⃒ash;抬ĀetⲨⲬ;쀀≥⃒;쀀>⃒nfin;槞ƀAetⲽⳁⳅrr;椂;쀀≤⃒Ā;rⳊⳍ쀀<⃒ie;쀀⊴⃒ĀAtⳘⳜrr;椃rie;쀀⊵⃒im;쀀∼⃒ƀAan⳰⳴ⴂrr;懖rĀhr⳺⳽k;椣Ā;oᏧᏥear;椧ቓ᪕\0\0\0\0\0\0\0\0\0\0\0\0\0ⴭ\0ⴸⵈⵠⵥ⵲ⶄᬇ\0\0ⶍⶫ\0ⷈⷎ\0ⷜ⸙⸫⸾⹃Ācsⴱ᪗ute耻ó䃳ĀiyⴼⵅrĀ;c᪞ⵂ耻ô䃴;䐾ʀabios᪠ⵒⵗǈⵚlac;䅑v;樸old;榼lig;䅓Ācr⵩⵭ir;榿;쀀𝔬ͯ⵹\0\0⵼\0ⶂn;䋛ave耻ò䃲;槁Ābmⶈ෴ar;榵Ȁacitⶕ⶘ⶥⶨrò᪀Āir⶝ⶠr;榾oss;榻nå๒;槀ƀaeiⶱⶵⶹcr;䅍ga;䏉ƀcdnⷀⷅǍron;䎿;榶pf;쀀𝕠ƀaelⷔ⷗ǒr;榷rp;榹΀;adiosvⷪⷫⷮ⸈⸍⸐⸖戨rò᪆Ȁ;efmⷷⷸ⸂⸅橝rĀ;oⷾⷿ愴f»ⷿ耻ª䂪耻º䂺gof;抶r;橖lope;橗;橛ƀclo⸟⸡⸧ò⸁ash耻ø䃸l;折iŬⸯ⸴de耻õ䃵esĀ;aǛ⸺s;樶ml耻ö䃶bar;挽ૡ⹞\0⹽\0⺀⺝\0⺢⺹\0\0⻋ຜ\0⼓\0\0⼫⾼\0⿈rȀ;astЃ⹧⹲຅脀¶;l⹭⹮䂶leìЃɩ⹸\0\0⹻m;櫳;櫽y;䐿rʀcimpt⺋⺏⺓ᡥ⺗nt;䀥od;䀮il;怰enk;怱r;쀀𝔭ƀimo⺨⺰⺴Ā;v⺭⺮䏆;䏕maô੶ne;明ƀ;tv⺿⻀⻈䏀chfork»´;䏖Āau⻏⻟nĀck⻕⻝kĀ;h⇴⻛;愎ö⇴sҀ;abcdemst⻳⻴ᤈ⻹⻽⼄⼆⼊⼎䀫cir;樣ir;樢Āouᵀ⼂;樥;橲n肻±ຝim;樦wo;樧ƀipu⼙⼠⼥ntint;樕f;쀀𝕡nd耻£䂣Ԁ;Eaceinosu່⼿⽁⽄⽇⾁⾉⾒⽾⾶;檳p;檷uå໙Ā;c໎⽌̀;acens່⽙⽟⽦⽨⽾pproø⽃urlyeñ໙ñ໎ƀaes⽯⽶⽺pprox;檹qq;檵im;拨iíໟmeĀ;s⾈ຮ怲ƀEas⽸⾐⽺ð⽵ƀdfp໬⾙⾯ƀals⾠⾥⾪lar;挮ine;挒urf;挓Ā;t໻⾴ï໻rel;抰Āci⿀⿅r;쀀𝓅;䏈ncsp;怈̀fiopsu⿚⋢⿟⿥⿫⿱r;쀀𝔮pf;쀀𝕢rime;恗cr;쀀𝓆ƀaeo⿸〉〓tĀei⿾々rnionóڰnt;樖stĀ;e【】䀿ñἙô༔઀ABHabcdefhilmnoprstux぀けさすムㄎㄫㅇㅢㅲㆎ㈆㈕㈤㈩㉘㉮㉲㊐㊰㊷ƀartぇおがròႳòϝail;検aròᱥar;楤΀cdenqrtとふへみわゔヌĀeuねぱ;쀀∽̱te;䅕iãᅮmptyv;榳gȀ;del࿑らるろ;榒;榥å࿑uo耻»䂻rր;abcfhlpstw࿜ガクシスゼゾダッデナp;極Ā;f࿠ゴs;椠;椳s;椞ë≝ð✮l;楅im;楴l;憣;憝Āaiパフil;椚oĀ;nホボ戶aló༞ƀabrョリヮrò៥rk;杳ĀakンヽcĀekヹ・;䁽;䁝Āes㄂㄄;榌lĀduㄊㄌ;榎;榐Ȁaeuyㄗㄜㄧㄩron;䅙Ādiㄡㄥil;䅗ì࿲âヺ;䑀Ȁclqsㄴㄷㄽㅄa;椷dhar;楩uoĀ;rȎȍh;憳ƀacgㅎㅟངlȀ;ipsླྀㅘㅛႜnåႻarôྩt;断ƀilrㅩဣㅮsht;楽;쀀𝔯ĀaoㅷㆆrĀduㅽㅿ»ѻĀ;l႑ㆄ;楬Ā;vㆋㆌ䏁;䏱ƀgns㆕ㇹㇼht̀ahlrstㆤㆰ㇂㇘㇤㇮rrowĀ;t࿜ㆭaéトarpoonĀduㆻㆿowîㅾp»႒eftĀah㇊㇐rrowó࿪arpoonóՑightarrows;應quigarro÷ニhreetimes;拌g;䋚ingdotseñἲƀahm㈍㈐㈓rò࿪aòՑ;怏oustĀ;a㈞㈟掱che»㈟mid;櫮Ȁabpt㈲㈽㉀㉒Ānr㈷㈺g;柭r;懾rëဃƀafl㉇㉊㉎r;榆;쀀𝕣us;樮imes;樵Āap㉝㉧rĀ;g㉣㉤䀩t;榔olint;樒arò㇣Ȁachq㉻㊀Ⴜ㊅quo;怺r;쀀𝓇Ābu・㊊oĀ;rȔȓƀhir㊗㊛㊠reåㇸmes;拊iȀ;efl㊪ၙᠡ㊫方tri;槎luhar;楨;愞ൡ㋕㋛㋟㌬㌸㍱\0㍺㎤\0\0㏬㏰\0㐨㑈㑚㒭㒱㓊㓱\0㘖\0\0㘳cute;䅛quï➺Ԁ;Eaceinpsyᇭ㋳㋵㋿㌂㌋㌏㌟㌦㌩;檴ǰ㋺\0㋼;檸on;䅡uåᇾĀ;dᇳ㌇il;䅟rc;䅝ƀEas㌖㌘㌛;檶p;檺im;择olint;樓iíሄ;䑁otƀ;be㌴ᵇ㌵担;橦΀Aacmstx㍆㍊㍗㍛㍞㍣㍭rr;懘rĀhr㍐㍒ë∨Ā;oਸ਼਴t耻§䂧i;䀻war;椩mĀin㍩ðnuóñt;朶rĀ;o㍶⁕쀀𝔰Ȁacoy㎂㎆㎑㎠rp;景Āhy㎋㎏cy;䑉;䑈rtɭ㎙\0\0㎜iäᑤaraì⹯耻­䂭Āgm㎨㎴maƀ;fv㎱㎲㎲䏃;䏂Ѐ;deglnprካ㏅㏉㏎㏖㏞㏡㏦ot;橪Ā;q኱ኰĀ;E㏓㏔檞;檠Ā;E㏛㏜檝;檟e;扆lus;樤arr;楲aròᄽȀaeit㏸㐈㐏㐗Āls㏽㐄lsetmé㍪hp;樳parsl;槤Ādlᑣ㐔e;挣Ā;e㐜㐝檪Ā;s㐢㐣檬;쀀⪬︀ƀflp㐮㐳㑂tcy;䑌Ā;b㐸㐹䀯Ā;a㐾㐿槄r;挿f;쀀𝕤aĀdr㑍ЂesĀ;u㑔㑕晠it»㑕ƀcsu㑠㑹㒟Āau㑥㑯pĀ;sᆈ㑫;쀀⊓︀pĀ;sᆴ㑵;쀀⊔︀uĀbp㑿㒏ƀ;esᆗᆜ㒆etĀ;eᆗ㒍ñᆝƀ;esᆨᆭ㒖etĀ;eᆨ㒝ñᆮƀ;afᅻ㒦ְrť㒫ֱ»ᅼaròᅈȀcemt㒹㒾㓂㓅r;쀀𝓈tmîñiì㐕aræᆾĀar㓎㓕rĀ;f㓔ឿ昆Āan㓚㓭ightĀep㓣㓪psiloîỠhé⺯s»⡒ʀbcmnp㓻㕞ሉ㖋㖎Ҁ;Edemnprs㔎㔏㔑㔕㔞㔣㔬㔱㔶抂;櫅ot;檽Ā;dᇚ㔚ot;櫃ult;櫁ĀEe㔨㔪;櫋;把lus;檿arr;楹ƀeiu㔽㕒㕕tƀ;en㔎㕅㕋qĀ;qᇚ㔏eqĀ;q㔫㔨m;櫇Ābp㕚㕜;櫕;櫓c̀;acensᇭ㕬㕲㕹㕻㌦pproø㋺urlyeñᇾñᇳƀaes㖂㖈㌛pproø㌚qñ㌗g;晪ڀ123;Edehlmnps㖩㖬㖯ሜ㖲㖴㗀㗉㗕㗚㗟㗨㗭耻¹䂹耻²䂲耻³䂳;櫆Āos㖹㖼t;檾ub;櫘Ā;dሢ㗅ot;櫄sĀou㗏㗒l;柉b;櫗arr;楻ult;櫂ĀEe㗤㗦;櫌;抋lus;櫀ƀeiu㗴㘉㘌tƀ;enሜ㗼㘂qĀ;qሢ㖲eqĀ;q㗧㗤m;櫈Ābp㘑㘓;櫔;櫖ƀAan㘜㘠㘭rr;懙rĀhr㘦㘨ë∮Ā;oਫ਩war;椪lig耻ß䃟௡㙑㙝㙠ዎ㙳㙹\0㙾㛂\0\0\0\0\0㛛㜃\0㜉㝬\0\0\0㞇ɲ㙖\0\0㙛get;挖;䏄rë๟ƀaey㙦㙫㙰ron;䅥dil;䅣;䑂lrec;挕r;쀀𝔱Ȁeiko㚆㚝㚵㚼ǲ㚋\0㚑eĀ4fኄኁaƀ;sv㚘㚙㚛䎸ym;䏑Ācn㚢㚲kĀas㚨㚮pproø዁im»ኬsðኞĀas㚺㚮ð዁rn耻þ䃾Ǭ̟㛆⋧es膀×;bd㛏㛐㛘䃗Ā;aᤏ㛕r;樱;樰ƀeps㛡㛣㜀á⩍Ȁ;bcf҆㛬㛰㛴ot;挶ir;櫱Ā;o㛹㛼쀀𝕥rk;櫚á㍢rime;怴ƀaip㜏㜒㝤dåቈ΀adempst㜡㝍㝀㝑㝗㝜㝟ngleʀ;dlqr㜰㜱㜶㝀㝂斵own»ᶻeftĀ;e⠀㜾ñम;扜ightĀ;e㊪㝋ñၚot;旬inus;樺lus;樹b;槍ime;樻ezium;揢ƀcht㝲㝽㞁Āry㝷㝻;쀀𝓉;䑆cy;䑛rok;䅧Āio㞋㞎xô᝷headĀlr㞗㞠eftarro÷ࡏightarrow»ཝऀAHabcdfghlmoprstuw㟐㟓㟗㟤㟰㟼㠎㠜㠣㠴㡑㡝㡫㢩㣌㣒㣪㣶ròϭar;楣Ācr㟜㟢ute耻ú䃺òᅐrǣ㟪\0㟭y;䑞ve;䅭Āiy㟵㟺rc耻û䃻;䑃ƀabh㠃㠆㠋ròᎭlac;䅱aòᏃĀir㠓㠘sht;楾;쀀𝔲rave耻ù䃹š㠧㠱rĀlr㠬㠮»ॗ»ႃlk;斀Āct㠹㡍ɯ㠿\0\0㡊rnĀ;e㡅㡆挜r»㡆op;挏ri;旸Āal㡖㡚cr;䅫肻¨͉Āgp㡢㡦on;䅳f;쀀𝕦̀adhlsuᅋ㡸㡽፲㢑㢠ownáᎳarpoonĀlr㢈㢌efô㠭ighô㠯iƀ;hl㢙㢚㢜䏅»ᏺon»㢚parrows;懈ƀcit㢰㣄㣈ɯ㢶\0\0㣁rnĀ;e㢼㢽挝r»㢽op;挎ng;䅯ri;旹cr;쀀𝓊ƀdir㣙㣝㣢ot;拰lde;䅩iĀ;f㜰㣨»᠓Āam㣯㣲rò㢨l耻ü䃼angle;榧ހABDacdeflnoprsz㤜㤟㤩㤭㦵㦸㦽㧟㧤㧨㧳㧹㧽㨁㨠ròϷarĀ;v㤦㤧櫨;櫩asèϡĀnr㤲㤷grt;榜΀eknprst㓣㥆㥋㥒㥝㥤㦖appá␕othinçẖƀhir㓫⻈㥙opô⾵Ā;hᎷ㥢ïㆍĀiu㥩㥭gmá㎳Ābp㥲㦄setneqĀ;q㥽㦀쀀⊊︀;쀀⫋︀setneqĀ;q㦏㦒쀀⊋︀;쀀⫌︀Āhr㦛㦟etá㚜iangleĀlr㦪㦯eft»थight»ၑy;䐲ash»ံƀelr㧄㧒㧗ƀ;beⷪ㧋㧏ar;抻q;扚lip;拮Ābt㧜ᑨaòᑩr;쀀𝔳tré㦮suĀbp㧯㧱»ജ»൙pf;쀀𝕧roð໻tré㦴Ācu㨆㨋r;쀀𝓋Ābp㨐㨘nĀEe㦀㨖»㥾nĀEe㦒㨞»㦐igzag;榚΀cefoprs㨶㨻㩖㩛㩔㩡㩪irc;䅵Ādi㩀㩑Ābg㩅㩉ar;機eĀ;qᗺ㩏;扙erp;愘r;쀀𝔴pf;쀀𝕨Ā;eᑹ㩦atèᑹcr;쀀𝓌ૣណ㪇\0㪋\0㪐㪛\0\0㪝㪨㪫㪯\0\0㫃㫎\0㫘ៜ៟tré៑r;쀀𝔵ĀAa㪔㪗ròσrò৶;䎾ĀAa㪡㪤ròθrò৫að✓is;拻ƀdptឤ㪵㪾Āfl㪺ឩ;쀀𝕩imåឲĀAa㫇㫊ròώròਁĀcq㫒ីr;쀀𝓍Āpt៖㫜ré។Ѐacefiosu㫰㫽㬈㬌㬑㬕㬛㬡cĀuy㫶㫻te耻ý䃽;䑏Āiy㬂㬆rc;䅷;䑋n耻¥䂥r;쀀𝔶cy;䑗pf;쀀𝕪cr;쀀𝓎Ācm㬦㬩y;䑎l耻ÿ䃿Ԁacdefhiosw㭂㭈㭔㭘㭤㭩㭭㭴㭺㮀cute;䅺Āay㭍㭒ron;䅾;䐷ot;䅼Āet㭝㭡træᕟa;䎶r;쀀𝔷cy;䐶grarr;懝pf;쀀𝕫cr;쀀𝓏Ājn㮅㮇;怍j;怌'.split("").map((e=>e.charCodeAt(0)))),pF=new Uint16Array("Ȁaglq\tɭ\0\0p;䀦os;䀧t;䀾t;䀼uot;䀢".split("").map((e=>e.charCodeAt(0))));const dF=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),hF=null!==(lF=String.fromCodePoint)&&void 0!==lF?lF:function(e){let t="";return e>65535&&(t+=String.fromCharCode((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=String.fromCharCode(e),t};function fF(e){var t;return e>=55296&&57343>=e||e>1114111?65533:null!==(t=dF.get(e))&&void 0!==t?t:e}var mF,gF,yF,vF;function bF(e){return e>=mF.ZERO&&mF.NINE>=e}function EF(e){return e>=mF.UPPER_A&&mF.UPPER_F>=e||e>=mF.LOWER_A&&mF.LOWER_F>=e}function _F(e){return e===mF.EQUALS||function(e){return e>=mF.UPPER_A&&mF.UPPER_Z>=e||e>=mF.LOWER_A&&mF.LOWER_Z>=e||bF(e)}(e)}!function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"}(mF||(mF={})),function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"}(gF||(gF={})),function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"}(yF||(yF={})),function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"}(vF||(vF={}));class AF{constructor(e,t,n){this.decodeTree=e,this.emitCodePoint=t,this.errors=n,this.state=yF.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=vF.Strict}startEntity(e){this.decodeMode=e,this.state=yF.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(e,t){switch(this.state){case yF.EntityStart:return e.charCodeAt(t)===mF.NUM?(this.state=yF.NumericStart,this.consumed+=1,this.stateNumericStart(e,t+1)):(this.state=yF.NamedEntity,this.stateNamedEntity(e,t));case yF.NumericStart:return this.stateNumericStart(e,t);case yF.NumericDecimal:return this.stateNumericDecimal(e,t);case yF.NumericHex:return this.stateNumericHex(e,t);case yF.NamedEntity:return this.stateNamedEntity(e,t)}}stateNumericStart(e,t){return e.length>t?(32|e.charCodeAt(t))===mF.LOWER_X?(this.state=yF.NumericHex,this.consumed+=1,this.stateNumericHex(e,t+1)):(this.state=yF.NumericDecimal,this.stateNumericDecimal(e,t)):-1}addToNumericResult(e,t,n,r){if(t!==n){const s=n-t;this.result=this.result*Math.pow(r,s)+parseInt(e.substr(t,s),r),this.consumed+=s}}stateNumericHex(e,t){const n=t;for(;e.length>t;){const r=e.charCodeAt(t);if(!bF(r)&&!EF(r))return this.addToNumericResult(e,n,t,16),this.emitNumericEntity(r,3);t+=1}return this.addToNumericResult(e,n,t,16),-1}stateNumericDecimal(e,t){const n=t;for(;e.length>t;){const r=e.charCodeAt(t);if(!bF(r))return this.addToNumericResult(e,n,t,10),this.emitNumericEntity(r,2);t+=1}return this.addToNumericResult(e,n,t,10),-1}emitNumericEntity(e,t){var n;if(t>=this.consumed)return null===(n=this.errors)||void 0===n||n.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(e===mF.SEMI)this.consumed+=1;else if(this.decodeMode===vF.Strict)return 0;return this.emitCodePoint(fF(this.result),this.consumed),this.errors&&(e!==mF.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(e,t){const{decodeTree:n}=this;let r=n[this.treeIndex],s=(r&gF.VALUE_LENGTH)>>14;for(;e.length>t;t++,this.excess++){const i=e.charCodeAt(t);if(this.treeIndex=TF(n,r,this.treeIndex+Math.max(1,s),i),0>this.treeIndex)return 0===this.result||this.decodeMode===vF.Attribute&&(0===s||_F(i))?0:this.emitNotTerminatedNamedEntity();if(r=n[this.treeIndex],s=(r&gF.VALUE_LENGTH)>>14,0!==s){if(i===mF.SEMI)return this.emitNamedEntityData(this.treeIndex,s,this.consumed+this.excess);this.decodeMode!==vF.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var e;const{result:t,decodeTree:n}=this;return this.emitNamedEntityData(t,(n[t]&gF.VALUE_LENGTH)>>14,this.consumed),null===(e=this.errors)||void 0===e||e.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(e,t,n){const{decodeTree:r}=this;return this.emitCodePoint(1===t?r[e]&~gF.VALUE_LENGTH:r[e+1],n),3===t&&this.emitCodePoint(r[e+2],n),n}end(){var e;switch(this.state){case yF.NamedEntity:return 0===this.result||this.decodeMode===vF.Attribute&&this.result!==this.treeIndex?0:this.emitNotTerminatedNamedEntity();case yF.NumericDecimal:return this.emitNumericEntity(0,2);case yF.NumericHex:return this.emitNumericEntity(0,3);case yF.NumericStart:return null===(e=this.errors)||void 0===e||e.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case yF.EntityStart:return 0}}}function SF(e){let t="";const n=new AF(e,(e=>t+=hF(e)));return function(e,r){let s=0,i=0;for(;(i=e.indexOf("&",i))>=0;){t+=e.slice(s,i),n.startEntity(r);const o=n.write(e,i+1);if(0>o){s=i+n.end();break}s=i+o,i=0===o?s+1:s}const o=t+e.slice(s);return t="",o}}function TF(e,t,n,r){const s=(t&gF.BRANCH_LENGTH)>>7,i=t&gF.JUMP_TABLE;if(0===s)return 0!==i&&r===i?n:-1;if(i){const t=r-i;return 0>t||t>=s?-1:e[n+t]-1}let o=n,a=o+s-1;for(;a>=o;){const t=o+a>>>1,n=e[t];if(r>n)o=t+1;else{if(r>=n)return e[t+s];a=t-1}}return-1}SF(uF),SF(pF);const wF=/["&'<>$\x80-\uFFFF]/g,xF=new Map([[34,"&quot;"],[38,"&amp;"],[39,"&apos;"],[60,"&lt;"],[62,"&gt;"]]),kF=null!="".codePointAt?(e,t)=>e.codePointAt(t):(e,t)=>55296==(64512&e.charCodeAt(t))?1024*(e.charCodeAt(t)-55296)+e.charCodeAt(t+1)-56320+65536:e.charCodeAt(t);function CF(e){let t,n="",r=0;for(;null!==(t=wF.exec(e));){const s=t.index,i=e.charCodeAt(s),o=xF.get(i);void 0!==o?(n+=e.substring(r,s)+o,r=s+1):(n+=`${e.substring(r,s)}&#x${kF(e,s).toString(16)};`,r=wF.lastIndex+=+(55296==(64512&i)))}return n+e.substr(r)}function IF(e,t){return function(n){let r,s=0,i="";for(;r=e.exec(n);)s!==r.index&&(i+=n.substring(s,r.index)),i+=t.get(r[0].charCodeAt(0)),s=r.index+1;return i+n.substring(s)}}const RF=IF(/["&\u00A0]/g,new Map([[34,"&quot;"],[38,"&amp;"],[160,"&nbsp;"]])),OF=IF(/[&<>\u00A0]/g,new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[160,"&nbsp;"]])),NF=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map((e=>[e.toLowerCase(),e]))),DF=new Map(["definitionURL","attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map((e=>[e.toLowerCase(),e]))),PF=new Set(["style","script","xmp","iframe","noembed","noframes","plaintext","noscript"]);function LF(e){return e.replace(/"/g,"&quot;")}const MF=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]);function BF(e,t={}){const n="length"in e?e:[e];let r="";for(let e=0;n.length>e;e++)r+=jF(n[e],t);return r}function jF(e,t){switch(e.type){case Pj:return BF(e.children,t);case Hj:case Mj:return`<${e.data}>`;case Bj:return`\x3c!--${e.data}--\x3e`;case Uj:return`<![CDATA[${e.children[0].data}]]>`;case jj:case Fj:case $j:return function(e,t){var n;"foreign"===t.xmlMode&&(e.name=null!==(n=NF.get(e.name))&&void 0!==n?n:e.name,e.parent&&FF.has(e.parent.name)&&(t={...t,xmlMode:!1})),!t.xmlMode&&$F.has(e.name)&&(t={...t,xmlMode:"foreign"});let r="<"+e.name;const s=function(e,t){var n;if(!e)return;const r=!1===(null!==(n=t.encodeEntities)&&void 0!==n?n:t.decodeEntities)?LF:t.xmlMode||"utf8"!==t.encodeEntities?CF:RF;return Object.keys(e).map((n=>{var s,i;const o=null!==(s=e[n])&&void 0!==s?s:"";return"foreign"===t.xmlMode&&(n=null!==(i=DF.get(n))&&void 0!==i?i:n),t.emptyAttrs||t.xmlMode||""!==o?`${n}="${r(o)}"`:n})).join(" ")}(e.attribs,t);return s&&(r+=" "+s),0===e.children.length&&(t.xmlMode?!1!==t.selfClosingTags:t.selfClosingTags&&MF.has(e.name))?(t.xmlMode||(r+=" "),r+="/>"):(r+=">",e.children.length>0&&(r+=BF(e.children,t)),!t.xmlMode&&MF.has(e.name)||(r+=`</${e.name}>`)),r}(e,t);case Lj:return function(e,t){var n;let r=e.data||"";return!1===(null!==(n=t.encodeEntities)&&void 0!==n?n:t.decodeEntities)||!t.xmlMode&&e.parent&&PF.has(e.parent.name)||(r=t.xmlMode||"utf8"!==t.encodeEntities?CF(r):OF(r)),r}(e,t)}}const FF=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignObject","desc","title"]),$F=new Set(["svg","math"]);function UF(e,t){return BF(e,t)}function HF(e){return Array.isArray(e)?e.map(HF).join(""):sF(e)&&!tF(e)?HF(e.children):eF(e)?e.data:""}function GF(e){return Array.isArray(e)?e.map(GF).join(""):sF(e)&&(e.type===Dj.Tag||Zj(e))?GF(e.children):eF(e)?e.data:""}function qF(e){return sF(e)?e.children:[]}function zF(e){return e.parent||null}function VF(e){const t=zF(e);if(null!=t)return qF(t);const n=[e];let{prev:r,next:s}=e;for(;null!=r;)n.unshift(r),({prev:r}=r);for(;null!=s;)n.push(s),({next:s}=s);return n}function YF(e){let{next:t}=e;for(;null!==t&&!Xj(t);)({next:t}=t);return t}function KF(e){let{prev:t}=e;for(;null!==t&&!Xj(t);)({prev:t}=t);return t}function QF(e){if(e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),e.parent){const t=e.parent.children,n=t.lastIndexOf(e);0>n||t.splice(n,1)}e.next=null,e.prev=null,e.parent=null}function WF(e,t,n=!0,r=1/0){return JF(e,Array.isArray(t)?t:[t],n,r)}function JF(e,t,n,r){const s=[],i=[t],o=[0];for(;;){if(o[0]>=i[0].length){if(1===o.length)return s;i.shift(),o.shift();continue}const t=i[0][o[0]++];if(e(t)&&(s.push(t),0>=--r))return s;n&&sF(t)&&t.children.length>0&&(o.unshift(0),i.unshift(t.children))}}function XF(e,t,n=!0){let r=null;for(let s=0;t.length>s&&!r;s++){const i=t[s];Xj(i)&&(e(i)?r=i:n&&i.children.length>0&&(r=XF(e,i.children,!0)))}return r}const ZF={tag_name:e=>"function"==typeof e?t=>Xj(t)&&e(t.name):"*"===e?Xj:t=>Xj(t)&&t.name===e,tag_type:e=>"function"==typeof e?t=>e(t.type):t=>t.type===e,tag_contains:e=>"function"==typeof e?t=>eF(t)&&e(t.data):t=>eF(t)&&t.data===e};function e$(e,t){return"function"==typeof t?n=>Xj(n)&&t(n.attribs[e]):n=>Xj(n)&&n.attribs[e]===t}function t$(e,t){return n=>e(n)||t(n)}function n$(e){const t=Object.keys(e).map((t=>{const n=e[t];return{}.hasOwnProperty.call(ZF,t)?ZF[t](n):e$(t,n)}));return 0===t.length?null:t.reduce(t$)}function r$(e,t,n=!0,r=1/0){return WF(ZF.tag_name(e),t,n,r)}var s$;function i$(e,t){const n=[],r=[];if(e===t)return 0;let s=sF(e)?e:e.parent;for(;s;)n.unshift(s),s=s.parent;for(s=sF(t)?t:t.parent;s;)r.unshift(s),s=s.parent;const i=Math.min(n.length,r.length);let o=0;for(;i>o&&n[o]===r[o];)o++;if(0===o)return s$.DISCONNECTED;const a=n[o-1],c=a.children,l=r[o];return c.indexOf(n[o])>c.indexOf(l)?a===t?s$.FOLLOWING|s$.CONTAINED_BY:s$.FOLLOWING:a===e?s$.PRECEDING|s$.CONTAINS:s$.PRECEDING}function o$(e){return e=e.filter(((e,t,n)=>!n.includes(e,t+1))),e.sort(((e,t)=>{const n=i$(e,t);return n&s$.PRECEDING?-1:n&s$.FOLLOWING?1:0})),e}!function(e){e[e.DISCONNECTED=1]="DISCONNECTED",e[e.PRECEDING=2]="PRECEDING",e[e.FOLLOWING=4]="FOLLOWING",e[e.CONTAINS=8]="CONTAINS",e[e.CONTAINED_BY=16]="CONTAINED_BY"}(s$||(s$={}));const a$=["url","type","lang"],c$=["fileSize","bitrate","framerate","samplingrate","channels","duration","height","width"];function l$(e){return r$("media:content",e).map((e=>{const{attribs:t}=e,n={medium:t.medium,isDefault:!!t.isDefault};for(const e of a$)t[e]&&(n[e]=t[e]);for(const e of c$)t[e]&&(n[e]=parseInt(t[e],10));return t.expression&&(n.expression=t.expression),n}))}function u$(e,t){return r$(e,t,!0,1)[0]}function p$(e,t,n=!1){return HF(r$(e,t,n,1)).trim()}function d$(e,t,n,r,s=!1){const i=p$(n,r,s);i&&(e[t]=i)}function h$(e){return"rss"===e||"feed"===e||"rdf:RDF"===e}var f$=Object.freeze({__proto__:null,get DocumentPosition(){return s$},append:function(e,t){QF(t);const{parent:n}=e,r=e.next;if(t.next=r,t.prev=e,e.next=t,t.parent=n,r){if(r.prev=t,n){const e=n.children;e.splice(e.lastIndexOf(r),0,t)}}else n&&n.children.push(t)},appendChild:function(e,t){if(QF(t),t.next=null,t.parent=e,e.children.push(t)>1){const n=e.children[e.children.length-2];n.next=t,t.prev=n}else t.prev=null},compareDocumentPosition:i$,existsOne:function e(t,n){return n.some((n=>Xj(n)&&(t(n)||e(t,n.children))))},filter:WF,find:JF,findAll:function(e,t){const n=[],r=[t],s=[0];for(;;){if(s[0]>=r[0].length){if(1===r.length)return n;r.shift(),s.shift();continue}const t=r[0][s[0]++];Xj(t)&&(e(t)&&n.push(t),t.children.length>0&&(s.unshift(0),r.unshift(t.children)))}},findOne:XF,findOneChild:function(e,t){return t.find(e)},getAttributeValue:function(e,t){var n;return null===(n=e.attribs)||void 0===n?void 0:n[t]},getChildren:qF,getElementById:function(e,t,n=!0){return Array.isArray(t)||(t=[t]),XF(e$("id",e),t,n)},getElements:function(e,t,n,r=1/0){const s=n$(e);return s?WF(s,t,n,r):[]},getElementsByTagName:r$,getElementsByTagType:function(e,t,n=!0,r=1/0){return WF(ZF.tag_type(e),t,n,r)},getFeed:function(e){const t=u$(h$,e);return t?"feed"===t.name?function(e){var t;const n=e.children,r={type:"atom",items:r$("entry",n).map((e=>{var t;const{children:n}=e,r={media:l$(n)};d$(r,"id","id",n),d$(r,"title","title",n);const s=null===(t=u$("link",n))||void 0===t?void 0:t.attribs.href;s&&(r.link=s);const i=p$("summary",n)||p$("content",n);i&&(r.description=i);const o=p$("updated",n);return o&&(r.pubDate=new Date(o)),r}))};d$(r,"id","id",n),d$(r,"title","title",n);const s=null===(t=u$("link",n))||void 0===t?void 0:t.attribs.href;s&&(r.link=s),d$(r,"description","subtitle",n);const i=p$("updated",n);return i&&(r.updated=new Date(i)),d$(r,"author","email",n,!0),r}(t):function(e){var t,n;const r=null!==(n=null===(t=u$("channel",e.children))||void 0===t?void 0:t.children)&&void 0!==n?n:[],s={type:e.name.substr(0,3),id:"",items:r$("item",e.children).map((e=>{const{children:t}=e,n={media:l$(t)};d$(n,"id","guid",t),d$(n,"title","title",t),d$(n,"link","link",t),d$(n,"description","description",t);const r=p$("pubDate",t)||p$("dc:date",t);return r&&(n.pubDate=new Date(r)),n}))};d$(s,"title","title",r),d$(s,"link","link",r),d$(s,"description","description",r);const i=p$("lastBuildDate",r);return i&&(s.updated=new Date(i)),d$(s,"author","managingEditor",r,!0),s}(t):null},getInnerHTML:function(e,t){return sF(e)?e.children.map((e=>UF(e,t))).join(""):""},getName:function(e){return e.name},getOuterHTML:UF,getParent:zF,getSiblings:VF,getText:function e(t){return Array.isArray(t)?t.map(e).join(""):Xj(t)?"br"===t.name?"\n":e(t.children):Zj(t)?e(t.children):eF(t)?t.data:""},hasAttrib:function(e,t){return null!=e.attribs&&{}.hasOwnProperty.call(e.attribs,t)&&null!=e.attribs[t]},hasChildren:sF,innerText:GF,isCDATA:Zj,isComment:tF,isDocument:rF,isTag:Xj,isText:eF,nextElementSibling:YF,prepend:function(e,t){QF(t);const{parent:n}=e;if(n){const r=n.children;r.splice(r.indexOf(e),0,t)}e.prev&&(e.prev.next=t),t.parent=n,t.prev=e.prev,t.next=e,e.prev=t},prependChild:function(e,t){if(QF(t),t.parent=e,t.prev=null,1!==e.children.unshift(t)){const n=e.children[1];n.prev=t,t.next=n}else t.next=null},prevElementSibling:KF,removeElement:QF,removeSubsets:function(e){let t=e.length;for(;--t>=0;){const n=e[t];if(0>=t||0>e.lastIndexOf(n,t-1)){for(let r=n.parent;r;r=r.parent)if(e.includes(r)){e.splice(t,1);break}}else e.splice(t,1)}return e},replaceElement:function(e,t){const n=t.prev=e.prev;n&&(n.next=t);const r=t.next=e.next;r&&(r.prev=t);const s=t.parent=e.parent;if(s){const n=s.children;n[n.lastIndexOf(e)]=t,e.parent=null}},testElement:function(e,t){const n=n$(e);return!n||n(t)},textContent:HF,uniqueSort:o$});function m$(e,t,n){return e?""+e(null!=t?t:e._root.children,null,void 0,n):""}function g$(e){const t=e||(this?this.root():[]);let n="";for(let e=0;t.length>e;e++)n+=HF(t[e]);return n}function y$(e,t){if(t===e)return!1;let n=t;for(;n&&n!==n.parent;)if(n=n.parent,n===e)return!0;return!1}function v$(e){if(Array.isArray(e))return!0;if("object"!=typeof e||!{}.hasOwnProperty.call(e,"length")||"number"!=typeof e.length||0>e.length)return!1;for(let t=0;e.length>t;t++)if(!(t in e))return!1;return!0}var b$,E$=Object.freeze({__proto__:null,contains:y$,html:function(e,t){return m$(this,function(e,t){return"object"==typeof e&&null!=e&&!("length"in e)&&!("type"in e)}(e)?void(t=e):e,{...Rj,...null==this?void 0:this._options,...Nj(null!=t?t:{})})},merge:function(e,t){if(!v$(e)||!v$(t))return;let n=e.length;const r=+t.length;for(let s=0;r>s;s++)e[n++]=t[s];return e.length=n,e},parseHTML:function(e,t,n="boolean"==typeof t&&t){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t);const r=this.load(e,Rj,!1);return n||r("script").remove(),r.root()[0].children.slice()},root:function(){return this(this._root)},text:g$,xml:function(e){return m$(this,e,{...this._options,xmlMode:!0})}});function _$(e){return null!=e.cheerio}function A$(e,t){const n=e.length;for(let r=0;n>r;r++)t(e[r],r);return e}function S$(e){const t="length"in e?[].map.call(e,(e=>iF(e,!0))):[iF(e,!0)],n=new Wj(t);return t.forEach((e=>{e.parent=n})),t}function T$(e){const t=e.indexOf("<");if(0>t||t>e.length-3)return!1;const n=e.charCodeAt(t+1);return(n>=b$.LowerA&&b$.LowerZ>=n||n>=b$.UpperA&&b$.UpperZ>=n||n===b$.Exclamation)&&e.includes(">",t+2)}!function(e){e[e.LowerA=97]="LowerA",e[e.LowerZ=122]="LowerZ",e[e.UpperA=65]="UpperA",e[e.UpperZ=90]="UpperZ",e[e.Exclamation=33]="Exclamation"}(b$||(b$={}));const w$={}.hasOwnProperty,x$=/\s+/,k$="data-",C$={null:null,true:!0,false:!1},I$=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,R$=/^{[^]*}$|^\[[^]*]$/;function O$(e,t,n){var r;if(e&&Xj(e))return null!==(r=e.attribs)&&void 0!==r||(e.attribs={}),t?w$.call(e.attribs,t)?!n&&I$.test(t)?t:e.attribs[t]:"option"===e.name&&"value"===t?g$(e.children):"input"!==e.name||"radio"!==e.attribs.type&&"checkbox"!==e.attribs.type||"value"!==t?void 0:"on":e.attribs}function N$(e,t,n){null===n?B$(e,t):e.attribs[t]=""+n}function D$(e,t,n){return t in e?e[t]:!n&&I$.test(t)?void 0!==O$(e,t,!1):O$(e,t,n)}function P$(e,t,n,r){t in e?e[t]=n:N$(e,t,!r&&I$.test(t)?n?"":null:""+n)}function L$(e,t,n){var r;const s=e;null!==(r=s.data)&&void 0!==r||(s.data={}),"object"==typeof t?Object.assign(s.data,t):"string"==typeof t&&void 0!==n&&(s.data[t]=n)}function M$(e,t){let n,r,s;var i;null==t?(n=Object.keys(e.attribs).filter((e=>e.startsWith(k$))),r=n.map((e=>e.slice(5).replace(/[_.-](\w|$)/g,((e,t)=>t.toUpperCase()))))):(n=[k$+(i=t,i.replace(/[A-Z]/g,"-$&").toLowerCase())],r=[t]);for(let t=0;n.length>t;++t){const i=n[t],o=r[t];if(w$.call(e.attribs,i)&&!w$.call(e.data,o)){if(s=e.attribs[i],w$.call(C$,s))s=C$[s];else if(s===+s+"")s=+s;else if(R$.test(s))try{s=JSON.parse(s)}catch(e){}e.data[o]=s}}return null==t?e.data:s}function B$(e,t){e.attribs&&w$.call(e.attribs,t)&&delete e.attribs[t]}function j$(e){return e?e.trim().split(x$):[]}var F$,$$,U$=Object.freeze({__proto__:null,addClass:function e(t){if("function"==typeof t)return A$(this,((n,r)=>{Xj(n)&&e.call([n],t.call(n,r,n.attribs.class||""))}));if(!t||"string"!=typeof t)return this;const n=t.split(x$),r=this.length;for(let e=0;r>e;e++){const t=this[e];if(!Xj(t))continue;const r=O$(t,"class",!1);if(r){let e=` ${r} `;for(let t=0;n.length>t;t++){const r=n[t]+" ";e.includes(" "+r)||(e+=r)}N$(t,"class",e.trim())}else N$(t,"class",n.join(" ").trim())}return this},attr:function(e,t){if("object"==typeof e||void 0!==t){if("function"==typeof t){if("string"!=typeof e)throw Error("Bad combination of arguments.");return A$(this,((n,r)=>{Xj(n)&&N$(n,e,t.call(n,r,n.attribs[e]))}))}return A$(this,(n=>{Xj(n)&&("object"==typeof e?Object.keys(e).forEach((t=>{N$(n,t,e[t])})):N$(n,e,t))}))}return arguments.length>1?this:O$(this[0],e,this.options.xmlMode)},data:function(e,t){var n;const r=this[0];if(!r||!Xj(r))return;const s=r;return null!==(n=s.data)&&void 0!==n||(s.data={}),e?"object"==typeof e||void 0!==t?(A$(this,(n=>{Xj(n)&&("object"==typeof e?L$(n,e):L$(n,e,t))})),this):w$.call(s.data,e)?s.data[e]:M$(s,e):M$(s)},hasClass:function(e){return this.toArray().some((t=>{const n=Xj(t)&&t.attribs.class;let r=-1;if(n&&e.length)for(;(r=n.indexOf(e,r+1))>-1;){const t=r+e.length;if((0===r||x$.test(n[r-1]))&&(t===n.length||x$.test(n[t])))return!0}return!1}))},prop:function(e,t){var n;if("string"==typeof e&&void 0===t){const t=this[0];if(!t||!Xj(t))return;switch(e){case"style":{const e=this.css(),t=Object.keys(e);return t.forEach(((t,n)=>{e[n]=t})),e.length=t.length,e}case"tagName":case"nodeName":return t.name.toUpperCase();case"href":case"src":{const r=null===(n=t.attribs)||void 0===n?void 0:n[e];return"undefined"==typeof URL||("href"!==e||"a"!==t.tagName&&"link"!==t.name)&&("src"!==e||"img"!==t.tagName&&"iframe"!==t.tagName&&"audio"!==t.tagName&&"video"!==t.tagName&&"source"!==t.tagName)||void 0===r||!this.options.baseURI?r:new URL(r,this.options.baseURI).href}case"innerText":return GF(t);case"textContent":return HF(t);case"outerHTML":return this.clone().wrap("<container />").parent().html();case"innerHTML":return this.html();default:return D$(t,e,this.options.xmlMode)}}if("object"==typeof e||void 0!==t){if("function"==typeof t){if("object"==typeof e)throw Error("Bad combination of arguments.");return A$(this,((n,r)=>{Xj(n)&&P$(n,e,t.call(n,r,D$(n,e,this.options.xmlMode)),this.options.xmlMode)}))}return A$(this,(n=>{Xj(n)&&("object"==typeof e?Object.keys(e).forEach((t=>{P$(n,t,e[t],this.options.xmlMode)})):P$(n,e,t,this.options.xmlMode))}))}},removeAttr:function(e){const t=j$(e);for(let e=0;t.length>e;e++)A$(this,(n=>{Xj(n)&&B$(n,t[e])}));return this},removeClass:function e(t){if("function"==typeof t)return A$(this,((n,r)=>{Xj(n)&&e.call([n],t.call(n,r,n.attribs.class||""))}));const n=j$(t),r=n.length,s=0===arguments.length;return A$(this,(e=>{if(Xj(e))if(s)e.attribs.class="";else{const t=j$(e.attribs.class);let s=!1;for(let e=0;r>e;e++){const r=t.indexOf(n[e]);0>r||(t.splice(r,1),s=!0,e--)}s&&(e.attribs.class=t.join(" "))}}))},toggleClass:function e(t,n){if("function"==typeof t)return A$(this,((r,s)=>{Xj(r)&&e.call([r],t.call(r,s,r.attribs.class||"",n),n)}));if(!t||"string"!=typeof t)return this;const r=t.split(x$),s=r.length,i="boolean"==typeof n?n?1:-1:0,o=this.length;for(let e=0;o>e;e++){const t=this[e];if(!Xj(t))continue;const n=j$(t.attribs.class);for(let e=0;s>e;e++){const t=n.indexOf(r[e]);i>=0&&0>t?n.push(r[e]):i>0||0>t||n.splice(t,1)}t.attribs.class=n.join(" ")}return this},val:function(e){const t=0===arguments.length,n=this[0];if(!n||!Xj(n))return t?void 0:this;switch(n.name){case"textarea":return this.text(e);case"select":{const n=this.find("option:selected");if(!t){if(null==this.attr("multiple")&&"object"==typeof e)return this;this.find("option").removeAttr("selected");const t="object"!=typeof e?[e]:e;for(let e=0;t.length>e;e++)this.find(`option[value="${t[e]}"]`).attr("selected","");return this}return this.attr("multiple")?n.toArray().map((e=>g$(e.children))):n.attr("value")}case"input":case"option":return t?this.attr("value"):this.attr("value",e)}}});!function(e){e.Attribute="attribute",e.Pseudo="pseudo",e.PseudoElement="pseudo-element",e.Tag="tag",e.Universal="universal",e.Adjacent="adjacent",e.Child="child",e.Descendant="descendant",e.Parent="parent",e.Sibling="sibling",e.ColumnCombinator="column-combinator"}(F$||(F$={})),function(e){e.Any="any",e.Element="element",e.End="end",e.Equals="equals",e.Exists="exists",e.Hyphen="hyphen",e.Not="not",e.Start="start"}($$||($$={}));const H$=/^[^\\#]?(?:\\(?:[\da-f]{1,6}\s?|.)|[\w\-\u00b0-\uFFFF])+/,G$=/\\([\da-f]{1,6}\s?|(\s)|.)/gi,q$=new Map([[126,$$.Element],[94,$$.Start],[36,$$.End],[42,$$.Any],[33,$$.Not],[124,$$.Hyphen]]),z$=new Set(["has","not","matches","is","where","host","host-context"]);function V$(e){switch(e.type){case F$.Adjacent:case F$.Child:case F$.Descendant:case F$.Parent:case F$.Sibling:case F$.ColumnCombinator:return!0;default:return!1}}const Y$=new Set(["contains","icontains"]);function K$(e,t,n){const r=parseInt(t,16)-65536;return r!=r||n?t:0>r?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)}function Q$(e){return e.replace(G$,K$)}function W$(e){return 39===e||34===e}function J$(e){return 32===e||9===e||10===e||12===e||13===e}function X$(e){const t=[],n=Z$(t,""+e,0);if(e.length>n)throw Error("Unmatched selector: "+e.slice(n));return t}function Z$(e,t,n){let r=[];function s(e){const r=t.slice(n+e).match(H$);if(!r)throw Error("Expected name, found "+t.slice(n));const[s]=r;return n+=e+s.length,Q$(s)}function i(e){for(n+=e;t.length>n&&J$(t.charCodeAt(n));)n++}function o(){const e=n+=1;let r=1;for(;r>0&&t.length>n;n++)40!==t.charCodeAt(n)||a(n)?41!==t.charCodeAt(n)||a(n)||r--:r++;if(r)throw Error("Parenthesis not matched");return Q$(t.slice(e,n-1))}function a(e){let n=0;for(;92===t.charCodeAt(--e);)n++;return!(1&~n)}function c(){if(r.length>0&&V$(r[r.length-1]))throw Error("Did not expect successive traversals.")}function l(e){r.length>0&&r[r.length-1].type===F$.Descendant?r[r.length-1].type=e:(c(),r.push({type:e}))}function u(e,t){r.push({type:F$.Attribute,name:e,action:t,value:s(1),namespace:null,ignoreCase:"quirks"})}function p(){if(r.length&&r[r.length-1].type===F$.Descendant&&r.pop(),0===r.length)throw Error("Empty sub-selector");e.push(r)}if(i(0),t.length===n)return n;e:for(;t.length>n;){const e=t.charCodeAt(n);switch(e){case 32:case 9:case 10:case 12:case 13:0!==r.length&&r[0].type===F$.Descendant||(c(),r.push({type:F$.Descendant})),i(1);break;case 62:l(F$.Child),i(1);break;case 60:l(F$.Parent),i(1);break;case 126:l(F$.Sibling),i(1);break;case 43:l(F$.Adjacent),i(1);break;case 46:u("class",$$.Element);break;case 35:u("id",$$.Equals);break;case 91:{let e;i(1);let o=null;124===t.charCodeAt(n)?e=s(1):t.startsWith("*|",n)?(o="*",e=s(2)):(e=s(0),124===t.charCodeAt(n)&&61!==t.charCodeAt(n+1)&&(o=e,e=s(1))),i(0);let c=$$.Exists;const l=q$.get(t.charCodeAt(n));if(l){if(c=l,61!==t.charCodeAt(n+1))throw Error("Expected `=`");i(2)}else 61===t.charCodeAt(n)&&(c=$$.Equals,i(1));let u="",p=null;if("exists"!==c){if(W$(t.charCodeAt(n))){const e=t.charCodeAt(n);let r=n+1;for(;t.length>r&&(t.charCodeAt(r)!==e||a(r));)r+=1;if(t.charCodeAt(r)!==e)throw Error("Attribute value didn't end");u=Q$(t.slice(n+1,r)),n=r+1}else{const e=n;for(;t.length>n&&(!J$(t.charCodeAt(n))&&93!==t.charCodeAt(n)||a(n));)n+=1;u=Q$(t.slice(e,n))}i(0);const e=32|t.charCodeAt(n);115===e?(p=!1,i(1)):105===e&&(p=!0,i(1))}if(93!==t.charCodeAt(n))throw Error("Attribute selector didn't terminate");n+=1,r.push({type:F$.Attribute,name:e,action:c,value:u,namespace:o,ignoreCase:p});break}case 58:{if(58===t.charCodeAt(n+1)){r.push({type:F$.PseudoElement,name:s(2).toLowerCase(),data:40===t.charCodeAt(n)?o():null});continue}const e=s(1).toLowerCase();let i=null;if(40===t.charCodeAt(n))if(z$.has(e)){if(W$(t.charCodeAt(n+1)))throw Error(`Pseudo-selector ${e} cannot be quoted`);if(i=[],n=Z$(i,t,n+1),41!==t.charCodeAt(n))throw Error(`Missing closing parenthesis in :${e} (${t})`);n+=1}else{if(i=o(),Y$.has(e)){const e=i.charCodeAt(0);e===i.charCodeAt(i.length-1)&&W$(e)&&(i=i.slice(1,-1))}i=Q$(i)}r.push({type:F$.Pseudo,name:e,data:i});break}case 44:p(),r=[],i(1);break;default:{if(t.startsWith("/*",n)){const e=t.indexOf("*/",n+2);if(0>e)throw Error("Comment was not terminated");n=e+2,0===r.length&&i(0);break}let o,a=null;if(42===e)n+=1,o="*";else if(124===e){if(o="",124===t.charCodeAt(n+1)){l(F$.ColumnCombinator),i(2);break}}else{if(!H$.test(t.slice(n)))break e;o=s(0)}124===t.charCodeAt(n)&&124!==t.charCodeAt(n+1)&&(a=o,42===t.charCodeAt(n+1)?(o="*",n+=2):o=s(1)),r.push("*"===o?{type:F$.Universal,namespace:a}:{type:F$.Tag,name:o,namespace:a})}}}return p(),n}var eU={trueFunc:function(){return!0},falseFunc:function(){return!1}},tU=P(eU);const nU=new Map([[F$.Universal,50],[F$.Tag,30],[F$.Attribute,1],[F$.Pseudo,0]]);function rU(e){return!nU.has(e.type)}const sU=new Map([[$$.Exists,10],[$$.Equals,8],[$$.Not,7],[$$.Start,6],[$$.End,6],[$$.Any,5]]);function iU(e){const t=e.map(oU);for(let n=1;e.length>n;n++){const r=t[n];if(r>=0)for(let s=n-1;s>=0&&t[s]>r;s--){const n=e[s+1];e[s+1]=e[s],e[s]=n,t[s+1]=t[s],t[s]=r}}}function oU(e){var t,n;let r=null!==(t=nU.get(e.type))&&void 0!==t?t:-1;return e.type===F$.Attribute?(r=null!==(n=sU.get(e.action))&&void 0!==n?n:4,e.action===$$.Equals&&"id"===e.name&&(r=9),e.ignoreCase&&(r>>=1)):e.type===F$.Pseudo&&(e.data?"has"===e.name||"contains"===e.name?r=0:Array.isArray(e.data)?(r=Math.min(...e.data.map((e=>Math.min(...e.map(oU))))),0>r&&(r=0)):r=2:r=3),r}const aU=/[-[\]{}()*+?.,\\^$|#\s]/g;function cU(e){return e.replace(aU,"\\$&")}const lU=new Set(["accept","accept-charset","align","alink","axis","bgcolor","charset","checked","clear","codetype","color","compact","declare","defer","dir","direction","disabled","enctype","face","frame","hreflang","http-equiv","lang","language","link","media","method","multiple","nohref","noresize","noshade","nowrap","readonly","rel","rev","rules","scope","scrolling","selected","shape","target","text","type","valign","valuetype","vlink"]);function uU(e,t){return"boolean"==typeof e.ignoreCase?e.ignoreCase:"quirks"===e.ignoreCase?!!t.quirksMode:!t.xmlMode&&lU.has(e.name)}const pU={equals(e,t,n){const{adapter:r}=n,{name:s}=t;let{value:i}=t;return uU(t,n)?(i=i.toLowerCase(),t=>{const n=r.getAttributeValue(t,s);return null!=n&&n.length===i.length&&n.toLowerCase()===i&&e(t)}):t=>r.getAttributeValue(t,s)===i&&e(t)},hyphen(e,t,n){const{adapter:r}=n,{name:s}=t;let{value:i}=t;const o=i.length;return uU(t,n)?(i=i.toLowerCase(),function(t){const n=r.getAttributeValue(t,s);return null!=n&&(n.length===o||"-"===n.charAt(o))&&n.substr(0,o).toLowerCase()===i&&e(t)}):function(t){const n=r.getAttributeValue(t,s);return null!=n&&(n.length===o||"-"===n.charAt(o))&&n.substr(0,o)===i&&e(t)}},element(e,t,n){const{adapter:r}=n,{name:s,value:i}=t;if(/\s/.test(i))return tU.falseFunc;const o=RegExp(`(?:^|\\s)${cU(i)}(?:$|\\s)`,uU(t,n)?"i":"");return function(t){const n=r.getAttributeValue(t,s);return null!=n&&n.length>=i.length&&o.test(n)&&e(t)}},exists:(e,{name:t},{adapter:n})=>r=>n.hasAttrib(r,t)&&e(r),start(e,t,n){const{adapter:r}=n,{name:s}=t;let{value:i}=t;const o=i.length;return 0===o?tU.falseFunc:uU(t,n)?(i=i.toLowerCase(),t=>{const n=r.getAttributeValue(t,s);return null!=n&&n.length>=o&&n.substr(0,o).toLowerCase()===i&&e(t)}):t=>{var n;return!!(null===(n=r.getAttributeValue(t,s))||void 0===n?void 0:n.startsWith(i))&&e(t)}},end(e,t,n){const{adapter:r}=n,{name:s}=t;let{value:i}=t;const o=-i.length;return 0===o?tU.falseFunc:uU(t,n)?(i=i.toLowerCase(),t=>{var n;return(null===(n=r.getAttributeValue(t,s))||void 0===n?void 0:n.substr(o).toLowerCase())===i&&e(t)}):t=>{var n;return!!(null===(n=r.getAttributeValue(t,s))||void 0===n?void 0:n.endsWith(i))&&e(t)}},any(e,t,n){const{adapter:r}=n,{name:s,value:i}=t;if(""===i)return tU.falseFunc;if(uU(t,n)){const t=RegExp(cU(i),"i");return function(n){const o=r.getAttributeValue(n,s);return null!=o&&o.length>=i.length&&t.test(o)&&e(n)}}return t=>{var n;return!!(null===(n=r.getAttributeValue(t,s))||void 0===n?void 0:n.includes(i))&&e(t)}},not(e,t,n){const{adapter:r}=n,{name:s}=t;let{value:i}=t;return""===i?t=>!!r.getAttributeValue(t,s)&&e(t):uU(t,n)?(i=i.toLowerCase(),t=>{const n=r.getAttributeValue(t,s);return(null==n||n.length!==i.length||n.toLowerCase()!==i)&&e(t)}):t=>r.getAttributeValue(t,s)!==i&&e(t)}},dU=new Set([9,10,12,13,32]);function hU(e){return function(e){const t=e[0],n=e[1]-1;if(0>n&&0>=t)return tU.falseFunc;if(-1===t)return e=>n>=e;if(0===t)return e=>e===n;if(1===t)return 0>n?tU.trueFunc:e=>e>=n;const r=Math.abs(t),s=(n%r+r)%r;return t>1?e=>e>=n&&e%r===s:e=>n>=e&&e%r===s}(function(e){if("even"===(e=e.trim().toLowerCase()))return[2,0];if("odd"===e)return[2,1];let t=0,n=0,r=i(),s=o();if(e.length>t&&"n"===e.charAt(t)&&(t++,n=r*(null!=s?s:1),a(),e.length>t?(r=i(),a(),s=o()):r=s=0),null===s||e.length>t)throw Error(`n-th rule couldn't be parsed ('${e}')`);return[n,r*s];function i(){return"-"===e.charAt(t)?(t++,-1):("+"===e.charAt(t)&&t++,1)}function o(){const n=t;let r=0;for(;e.length>t&&e.charCodeAt(t)>=48&&57>=e.charCodeAt(t);)r=10*r+(e.charCodeAt(t)-48),t++;return t===n?null:r}function a(){for(;e.length>t&&dU.has(e.charCodeAt(t));)t++}}(e))}function fU(e,t){return n=>{const r=t.getParent(n);return null!=r&&t.isTag(r)&&e(n)}}const mU={contains:(e,t,{adapter:n})=>function(r){return e(r)&&n.getText(r).includes(t)},icontains(e,t,{adapter:n}){const r=t.toLowerCase();return function(t){return e(t)&&n.getText(t).toLowerCase().includes(r)}},"nth-child"(e,t,{adapter:n,equals:r}){const s=hU(t);return s===tU.falseFunc?tU.falseFunc:s===tU.trueFunc?fU(e,n):function(t){const i=n.getSiblings(t);let o=0;for(let e=0;i.length>e&&!r(t,i[e]);e++)n.isTag(i[e])&&o++;return s(o)&&e(t)}},"nth-last-child"(e,t,{adapter:n,equals:r}){const s=hU(t);return s===tU.falseFunc?tU.falseFunc:s===tU.trueFunc?fU(e,n):function(t){const i=n.getSiblings(t);let o=0;for(let e=i.length-1;e>=0&&!r(t,i[e]);e--)n.isTag(i[e])&&o++;return s(o)&&e(t)}},"nth-of-type"(e,t,{adapter:n,equals:r}){const s=hU(t);return s===tU.falseFunc?tU.falseFunc:s===tU.trueFunc?fU(e,n):function(t){const i=n.getSiblings(t);let o=0;for(let e=0;i.length>e;e++){const s=i[e];if(r(t,s))break;n.isTag(s)&&n.getName(s)===n.getName(t)&&o++}return s(o)&&e(t)}},"nth-last-of-type"(e,t,{adapter:n,equals:r}){const s=hU(t);return s===tU.falseFunc?tU.falseFunc:s===tU.trueFunc?fU(e,n):function(t){const i=n.getSiblings(t);let o=0;for(let e=i.length-1;e>=0;e--){const s=i[e];if(r(t,s))break;n.isTag(s)&&n.getName(s)===n.getName(t)&&o++}return s(o)&&e(t)}},root:(e,t,{adapter:n})=>t=>{const r=n.getParent(t);return(null==r||!n.isTag(r))&&e(t)},scope(e,t,n,r){const{equals:s}=n;return r&&0!==r.length?1===r.length?t=>s(r[0],t)&&e(t):t=>r.includes(t)&&e(t):mU.root(e,t,n)},hover:gU("isHovered"),visited:gU("isVisited"),active:gU("isActive")};function gU(e){return function(t,n,{adapter:r}){const s=r[e];return"function"!=typeof s?tU.falseFunc:function(e){return s(e)&&t(e)}}}const yU={empty:(e,{adapter:t})=>!t.getChildren(e).some((e=>t.isTag(e)||""!==t.getText(e))),"first-child"(e,{adapter:t,equals:n}){if(t.prevElementSibling)return null==t.prevElementSibling(e);const r=t.getSiblings(e).find((e=>t.isTag(e)));return null!=r&&n(e,r)},"last-child"(e,{adapter:t,equals:n}){const r=t.getSiblings(e);for(let s=r.length-1;s>=0;s--){if(n(e,r[s]))return!0;if(t.isTag(r[s]))break}return!1},"first-of-type"(e,{adapter:t,equals:n}){const r=t.getSiblings(e),s=t.getName(e);for(let i=0;r.length>i;i++){const o=r[i];if(n(e,o))return!0;if(t.isTag(o)&&t.getName(o)===s)break}return!1},"last-of-type"(e,{adapter:t,equals:n}){const r=t.getSiblings(e),s=t.getName(e);for(let i=r.length-1;i>=0;i--){const o=r[i];if(n(e,o))return!0;if(t.isTag(o)&&t.getName(o)===s)break}return!1},"only-of-type"(e,{adapter:t,equals:n}){const r=t.getName(e);return t.getSiblings(e).every((s=>n(e,s)||!t.isTag(s)||t.getName(s)!==r))},"only-child":(e,{adapter:t,equals:n})=>t.getSiblings(e).every((r=>n(e,r)||!t.isTag(r)))};function vU(e,t,n,r){if(null===n){if(e.length>r)throw Error(`Pseudo-class :${t} requires an argument`)}else if(e.length===r)throw Error(`Pseudo-class :${t} doesn't have any arguments`)}const bU={"any-link":":is(a, area, link)[href]",link:":any-link:not(:visited)",disabled:":is(\n        :is(button, input, select, textarea, optgroup, option)[disabled],\n        optgroup[disabled] > option,\n        fieldset[disabled]:not(fieldset[disabled] legend:first-of-type *)\n    )",enabled:":not(:disabled)",checked:":is(:is(input[type=radio], input[type=checkbox])[checked], option:selected)",required:":is(input, select, textarea)[required]",optional:":is(input, select, textarea):not([required])",selected:"option:is([selected], select:not([multiple]):not(:has(> option[selected])) > :first-of-type)",checkbox:"[type=checkbox]",file:"[type=file]",password:"[type=password]",radio:"[type=radio]",reset:"[type=reset]",image:"[type=image]",submit:"[type=submit]",parent:":not(:empty)",header:":is(h1, h2, h3, h4, h5, h6)",button:":is(button, input[type=button])",input:":is(input, textarea, select, button)",text:"input:is(:not([type!='']), [type=text])"},EU={};function _U(e,t){const n=t.getSiblings(e);if(1>=n.length)return[];const r=n.indexOf(e);return 0>r||r===n.length-1?[]:n.slice(r+1).filter(t.isTag)}function AU(e){return{xmlMode:!!e.xmlMode,lowerCaseAttributeNames:!!e.lowerCaseAttributeNames,lowerCaseTags:!!e.lowerCaseTags,quirksMode:!!e.quirksMode,cacheResults:!!e.cacheResults,pseudos:e.pseudos,adapter:e.adapter,equals:e.equals}}const SU=(e,t,n,r,s)=>{const i=s(t,AU(n),r);return i===tU.trueFunc?e:i===tU.falseFunc?tU.falseFunc:t=>i(t)&&e(t)},TU={is:SU,matches:SU,where:SU,not(e,t,n,r,s){const i=s(t,AU(n),r);return i===tU.falseFunc?e:i===tU.trueFunc?tU.falseFunc:t=>!i(t)&&e(t)},has(e,t,n,r,s){const{adapter:i}=n,o=AU(n);o.relativeSelector=!0;const a=t.some((e=>e.some(rU)))?[EU]:void 0,c=s(t,o,a);if(c===tU.falseFunc)return tU.falseFunc;const l=function(e,t){return e===tU.falseFunc?tU.falseFunc:n=>t.isTag(n)&&e(n)}(c,i);if(a&&c!==tU.trueFunc){const{shouldTestNextSiblings:t=!1}=c;return n=>{if(!e(n))return!1;a[0]=n;const r=i.getChildren(n),s=t?[...r,..._U(n,i)]:r;return i.existsOne(l,s)}}return t=>e(t)&&i.existsOne(l,i.getChildren(t))}};function wU(e,t){const n=t.getParent(e);return n&&t.isTag(n)?n:null}function xU(e){return e.type===F$.Pseudo&&("scope"===e.name||Array.isArray(e.data)&&e.data.some((e=>e.some(xU))))}const kU={type:F$.Descendant},CU={type:"_flexibleDescendant"},IU={type:F$.Pseudo,name:"scope",data:null};function RU(e,t){return t===tU.falseFunc||e===tU.trueFunc?e:e===tU.falseFunc||t===tU.trueFunc?t:function(n){return e(n)||t(n)}}const OU=(e,t)=>e===t,NU={adapter:f$,equals:OU},DU=(PU=function e(t,n,r){var s;t.forEach(iU),r=null!==(s=n.context)&&void 0!==s?s:r;const i=Array.isArray(r),o=r&&(Array.isArray(r)?r:[r]);if(!1!==n.relativeSelector)!function(e,{adapter:t},n){const r=!!(null==n?void 0:n.every((e=>{const n=t.isTag(e)&&t.getParent(e);return e===EU||n&&t.isTag(n)})));for(const t of e){if(t.length>0&&rU(t[0])&&t[0].type!==F$.Descendant);else{if(!r||t.some(xU))continue;t.unshift(kU)}t.unshift(IU)}}(t,n,o);else if(t.some((e=>e.length>0&&rU(e[0]))))throw Error("Relative selectors are not allowed when the `relativeSelector` option is disabled");let a=!1;const c=t.map((t=>{if(t.length>=2){const[e,n]=t;e.type!==F$.Pseudo||"scope"!==e.name||(i&&n.type===F$.Descendant?t[1]=CU:n.type!==F$.Adjacent&&n.type!==F$.Sibling||(a=!0))}return function(t,n,r){var s;return t.reduce(((t,s)=>t===tU.falseFunc?tU.falseFunc:function(e,t,n,r,s){const{adapter:i,equals:o}=n;switch(t.type){case F$.PseudoElement:throw Error("Pseudo-elements are not supported by css-select");case F$.ColumnCombinator:throw Error("Column combinators are not yet supported by css-select");case F$.Attribute:if(null!=t.namespace)throw Error("Namespaced attributes are not yet supported by css-select");return n.xmlMode&&!n.lowerCaseAttributeNames||(t.name=t.name.toLowerCase()),pU[t.action](e,t,n);case F$.Pseudo:return function(e,t,n,r,s){var i;const{name:o,data:a}=t;if(Array.isArray(a)){if(!(o in TU))throw Error(`Unknown pseudo-class :${o}(${a})`);return TU[o](e,a,n,r,s)}const c=null===(i=n.pseudos)||void 0===i?void 0:i[o],l="string"==typeof c?c:bU[o];if("string"==typeof l){if(null!=a)throw Error(`Pseudo ${o} doesn't have any arguments`);const t=X$(l);return TU.is(e,t,n,r,s)}if("function"==typeof c)return vU(c,o,a,1),t=>c(t,a)&&e(t);if(o in mU)return mU[o](e,a,n,r);if(o in yU){const t=yU[o];return vU(t,o,a,2),r=>t(r,n,a)&&e(r)}throw Error("Unknown pseudo-class :"+o)}(e,t,n,r,s);case F$.Tag:{if(null!=t.namespace)throw Error("Namespaced tag names are not yet supported by css-select");let{name:r}=t;return n.xmlMode&&!n.lowerCaseTags||(r=r.toLowerCase()),function(t){return i.getName(t)===r&&e(t)}}case F$.Descendant:{if(!1===n.cacheResults||"undefined"==typeof WeakSet)return function(t){let n=t;for(;n=wU(n,i);)if(e(n))return!0;return!1};const t=new WeakSet;return function(n){let r=n;for(;r=wU(r,i);)if(!t.has(r)){if(i.isTag(r)&&e(r))return!0;t.add(r)}return!1}}case"_flexibleDescendant":return function(t){let n=t;do{if(e(n))return!0}while(n=wU(n,i));return!1};case F$.Parent:return function(t){return i.getChildren(t).some((t=>i.isTag(t)&&e(t)))};case F$.Child:return function(t){const n=i.getParent(t);return null!=n&&i.isTag(n)&&e(n)};case F$.Sibling:return function(t){const n=i.getSiblings(t);for(let r=0;n.length>r;r++){const s=n[r];if(o(t,s))break;if(i.isTag(s)&&e(s))return!0}return!1};case F$.Adjacent:return i.prevElementSibling?function(t){const n=i.prevElementSibling(t);return null!=n&&e(n)}:function(t){const n=i.getSiblings(t);let r;for(let e=0;n.length>e;e++){const s=n[e];if(o(t,s))break;i.isTag(s)&&(r=s)}return!!r&&e(r)};case F$.Universal:if(null!=t.namespace&&"*"!==t.namespace)throw Error("Namespaced universal selectors are not yet supported by css-select");return e}}(t,s,n,r,e)),null!==(s=n.rootFunc)&&void 0!==s?s:tU.trueFunc)}(t,n,o)})).reduce(RU,tU.falseFunc);return c.shouldTestNextSiblings=a,c},function(e,t,n){const r=function(e){var t,n,r,s;const i=null!=e?e:NU;return null!==(t=i.adapter)&&void 0!==t||(i.adapter=f$),null!==(n=i.equals)&&void 0!==n||(i.equals=null!==(s=null===(r=i.adapter)||void 0===r?void 0:r.equals)&&void 0!==s?s:OU),i}(t);return PU(e,r,n)});var PU;function LU(e,t,n=!1){return n&&(e=function(e,t){const n=Array.isArray(e)?e.slice(0):[e],r=n.length;for(let e=0;r>e;e++){const r=_U(n[e],t);n.push(...r)}return n}(e,t)),Array.isArray(e)?t.removeSubsets(e):t.getChildren(e)}const MU=new Set(["first","last","eq","gt","nth","lt","even","odd"]);function BU(e){return"pseudo"===e.type&&(!!MU.has(e.name)||!("not"!==e.name||!Array.isArray(e.data))&&e.data.some((e=>e.some(BU))))}function jU(e){const t=[],n=[];for(const r of e)r.some(BU)?t.push(r):n.push(r);return[n,t]}const FU={type:F$.Universal,namespace:null},$U={type:F$.Pseudo,name:"scope",data:null};function UU(e,t,n={}){return HU([e],t,n)}function HU(e,t,n={}){if("function"==typeof t)return e.some(t);const[r,s]=jU(X$(t));return r.length>0&&e.some(DU(r,n))||s.some((t=>zU(t,e,n).length>0))}function GU(e,t,n={}){return qU(X$(e),t,n)}function qU(e,t,n){if(0===t.length)return[];const[r,s]=jU(e);let i;if(r.length){const e=QU(t,r,n);if(0===s.length)return e;e.length&&(i=new Set(e))}for(let e=0;s.length>e&&(null==i?void 0:i.size)!==t.length;e++){const r=s[e];if(0===(i?t.filter((e=>Xj(e)&&!i.has(e))):t).length)break;const o=zU(r,t,n);if(o.length)if(i)o.forEach((e=>i.add(e)));else{if(e===s.length-1)return o;i=new Set(o)}}return void 0!==i?i.size===t.length?t:t.filter((e=>i.has(e))):[]}function zU(e,t,n){var r;if(e.some(V$)){const s=null!==(r=n.root)&&void 0!==r?r:function(e){for(;e.parent;)e=e.parent;return e}(t[0]),i={...n,context:t,relativeSelector:!1};return e.push($U),VU(s,e,i,!0,t.length)}return VU(t,e,n,!1,t.length)}function VU(e,t,n,r,s){const i=t.findIndex(BU),o=t.slice(0,i),a=t[i],c=function(e,t,n){const r=null!=t?parseInt(t,10):NaN;switch(e){case"first":return 1;case"nth":case"eq":return isFinite(r)?0>r?1/0:r+1:0;case"lt":return isFinite(r)?0>r?1/0:Math.min(r,n):0;case"gt":return isFinite(r)?1/0:0;case"odd":return 2*n;case"even":return 2*n-1;case"last":case"not":return 1/0}}(a.name,a.data,t.length-1===i?s:1/0);if(0===c)return[];const l=(0!==o.length||Array.isArray(e)?0===o.length?(Array.isArray(e)?e:[e]).filter(Xj):r||o.some(V$)?YU(e,[o],n,c):QU(e,[o],n):qF(e).filter(Xj)).slice(0,c);let u=function(e,t,n,r){const s="string"==typeof n?parseInt(n,10):NaN;switch(e){case"first":case"lt":return t;case"last":return t.length>0?[t[t.length-1]]:t;case"nth":case"eq":return isFinite(s)&&t.length>Math.abs(s)?[0>s?t[t.length+s]:t[s]]:[];case"gt":return isFinite(s)?t.slice(s+1):[];case"even":return t.filter(((e,t)=>t%2==0));case"odd":return t.filter(((e,t)=>t%2==1));case"not":{const e=new Set(qU(n,t,r));return t.filter((t=>!e.has(t)))}}}(a.name,l,a.data,n);if(0===u.length||t.length===i+1)return u;const p=t.slice(i+1),d=p.some(V$);if(d){if(V$(p[0])){const{type:e}=p[0];e!==F$.Sibling&&e!==F$.Adjacent||(u=LU(u,f$,!0)),p.unshift(FU)}n={...n,relativeSelector:!1,rootFunc:e=>u.includes(e)}}else n.rootFunc&&n.rootFunc!==eU.trueFunc&&(n={...n,rootFunc:eU.trueFunc});return p.some(BU)?VU(u,p,n,!1,s):d?YU(u,[p],n,s):QU(u,[p],n)}function YU(e,t,n,r){return KU(e,DU(t,n,e),r)}function KU(e,t,n=1/0){return JF((e=>Xj(e)&&t(e)),LU(e,f$,t.shouldTestNextSiblings),!0,n)}function QU(e,t,n){const r=(Array.isArray(e)?e:[e]).filter(Xj);if(0===r.length)return r;const s=DU(t,n);return s===eU.trueFunc?r:r.filter(s)}const WU=/^\s*[~+]/;function JU(e){return function(t,...n){return function(r){var s;let i=e(t,this);return r&&(i=fH(i,r,this.options.xmlMode,null===(s=this._root)||void 0===s?void 0:s[0])),this._make(this.length>1&&i.length>1?n.reduce(((e,t)=>t(e)),i):i)}}}const XU=JU(((e,t)=>{const n=[];for(let r=0;t.length>r;r++){const s=e(t[r]);n.push(s)}return[].concat(...n)})),ZU=JU(((e,t)=>{const n=[];for(let r=0;t.length>r;r++){const s=e(t[r]);null!==s&&n.push(s)}return n}));function eH(e,...t){let n=null;const r=JU(((e,t)=>{const r=[];return A$(t,(t=>{for(let s;(s=e(t))&&!(null==n?void 0:n(s,r.length));t=s)r.push(s)})),r}))(e,...t);return function(e,t){n="string"==typeof e?t=>UU(t,e,this.options):e?hH(e):null;const s=r.call(this,t);return n=null,s}}function tH(e){return Array.from(new Set(e))}const nH=ZU((({parent:e})=>e&&!rF(e)?e:null),tH),rH=XU((e=>{const t=[];for(;e.parent&&!rF(e.parent);)t.push(e.parent),e=e.parent;return t}),o$,(e=>e.reverse())),sH=eH((({parent:e})=>e&&!rF(e)?e:null),o$,(e=>e.reverse())),iH=ZU((e=>YF(e))),oH=XU((e=>{const t=[];for(;e.next;)Xj(e=e.next)&&t.push(e);return t}),tH),aH=eH((e=>YF(e)),tH),cH=ZU((e=>KF(e))),lH=XU((e=>{const t=[];for(;e.prev;)Xj(e=e.prev)&&t.push(e);return t}),tH),uH=eH((e=>KF(e)),tH),pH=XU((e=>VF(e).filter((t=>Xj(t)&&t!==e))),o$),dH=XU((e=>qF(e).filter(Xj)),tH);function hH(e){return"function"==typeof e?(t,n)=>e.call(t,n,t):_$(e)?t=>[].includes.call(e,t):function(t){return e===t}}function fH(e,t,n,r){return"string"==typeof t?GU(t,e,{xmlMode:n,root:r}):e.filter(hH(t))}var mH=Object.freeze({__proto__:null,add:function(e,t){const n=this._make(e,t),r=o$([...this.get(),...n.get()]);return this._make(r)},addBack:function(e){return this.prevObject?this.add(e?this.prevObject.filter(e):this.prevObject):this},children:dH,closest:function(e){var t;const n=[];if(!e)return this._make(n);const r={xmlMode:this.options.xmlMode,root:null===(t=this._root)||void 0===t?void 0:t[0]},s="string"==typeof e?t=>UU(t,e,r):hH(e);return A$(this,(e=>{for(;e&&Xj(e);){if(s(e,0)){n.includes(e)||n.push(e);break}e=e.parent}})),this._make(n)},contents:function(){const e=this.toArray().reduce(((e,t)=>sF(t)?e.concat(t.children):e),[]);return this._make(e)},each:function(e){let t=0;const n=this.length;for(;n>t&&!1!==e.call(this[t],t,this[t]);)++t;return this},end:function(){var e;return null!==(e=this.prevObject)&&void 0!==e?e:this._make([])},eq:function(e){var t;return 0!=(e=+e)||this.length>1?(0>e&&(e=this.length+e),this._make(null!==(t=this[e])&&void 0!==t?t:[])):this},filter:function(e){var t;return this._make(fH(this.toArray(),e,this.options.xmlMode,null===(t=this._root)||void 0===t?void 0:t[0]))},filterArray:fH,find:function(e){var t;if(!e)return this._make([]);const n=this.toArray();if("string"!=typeof e){const t=_$(e)?e.toArray():[e];return this._make(t.filter((e=>n.some((t=>y$(t,e))))))}const r=WU.test(e)?n:this.children().toArray(),s={context:n,root:null===(t=this._root)||void 0===t?void 0:t[0],xmlMode:this.options.xmlMode,lowerCaseTags:this.options.lowerCaseTags,lowerCaseAttributeNames:this.options.lowerCaseAttributeNames,pseudos:this.options.pseudos,quirksMode:this.options.quirksMode};return this._make(function(e,t,n={},r=1/0){if("function"==typeof e)return KU(t,e);const[s,i]=jU(X$(e)),o=i.map((e=>VU(t,e,n,!0,r)));return s.length&&o.push(YU(t,s,n,r)),0===o.length?[]:1===o.length?o[0]:o$(o.reduce(((e,t)=>[...e,...t])))}(e,r,s))},first:function(){return this.length>1?this._make(this[0]):this},get:function(e){return null==e?this.toArray():this[0>e?this.length+e:e]},has:function(e){return this.filter("string"==typeof e?`:has(${e})`:(t,n)=>this._make(n).find(e).length>0)},index:function(e){let t,n;return null==e?(t=this.parent().children(),n=this[0]):"string"==typeof e?(t=this._make(e),n=this[0]):(t=this,n=_$(e)?e[0]:e),[].indexOf.call(t,n)},is:function(e){const t=this.toArray();return"string"==typeof e?HU(t.filter(Xj),e,this.options):!!e&&t.some(hH(e))},last:function(){return this.length>0?this._make(this[this.length-1]):this},map:function(e){let t=[];for(let n=0;this.length>n;n++){const r=this[n],s=e.call(r,n,r);null!=s&&(t=t.concat(s))}return this._make(t)},next:iH,nextAll:oH,nextUntil:aH,not:function(e){let t=this.toArray();if("string"==typeof e){const n=new Set(GU(e,t,this.options));t=t.filter((e=>!n.has(e)))}else{const n=hH(e);t=t.filter(((e,t)=>!n(e,t)))}return this._make(t)},parent:nH,parents:rH,parentsUntil:sH,prev:cH,prevAll:lH,prevUntil:uH,siblings:pH,slice:function(e,t){return this._make([].slice.call(this,e,t))},toArray:function(){return[].slice.call(this)}});function gH(e,t){const n=Array.isArray(e)?e:[e];t?t.children=n:t=null;for(let e=0;n.length>e;e++){const r=n[e];r.parent&&r.parent.children!==n&&QF(r),t?(r.prev=n[e-1]||null,r.next=n[e+1]||null):r.prev=r.next=null,r.parent=t}return t}function yH(e){return function(...t){const n=this.length-1;return A$(this,((r,s)=>{if(!sF(r))return;const i="function"==typeof t[0]?t[0].call(r,s,this._render(r.children)):t,o=this._makeDomArray(i,n>s);e(o,r.children,r)}))}}function vH(e,t,n,r,s){var i,o;const a=[t,n,...r],c=0===t?null:e[t-1],l=e.length>t+n?e[t+n]:null;for(let e=0;r.length>e;++e){const n=r[e],u=n.parent;if(u){const e=u.children.indexOf(n);e>-1&&(u.children.splice(e,1),s===u&&t>e&&a[0]--)}n.parent=s,n.prev&&(n.prev.next=null!==(i=n.next)&&void 0!==i?i:null),n.next&&(n.next.prev=null!==(o=n.prev)&&void 0!==o?o:null),n.prev=0===e?c:r[e-1],n.next=e===r.length-1?l:r[e+1]}return c&&(c.next=r[0]),l&&(l.prev=r[r.length-1]),e.splice(...a)}const bH=yH(((e,t,n)=>{vH(t,t.length,0,e,n)})),EH=yH(((e,t,n)=>{vH(t,0,0,e,n)}));function _H(e){return function(t){const n=this.length-1,r=this.parents().last();for(let s=0;this.length>s;s++){const i=this[s],o="function"==typeof t?t.call(i,s,i):"string"!=typeof t||T$(t)?t:r.find(t).clone(),[a]=this._makeDomArray(o,n>s);if(!a||!sF(a))continue;let c=a,l=0;for(;c.children.length>l;){const e=c.children[l];Xj(e)?(c=e,l=0):l++}e(i,c,[a])}return this}}const AH=_H(((e,t,n)=>{const{parent:r}=e;if(!r)return;const s=r.children,i=s.indexOf(e);gH([e],t),vH(s,i,0,n,r)})),SH=_H(((e,t,n)=>{sF(e)&&(gH(e.children,t),gH(n,e))}));var TH=Object.freeze({__proto__:null,_makeDomArray:function(e,t){return null==e?[]:_$(e)?t?S$(e.get()):e.get():Array.isArray(e)?e.reduce(((e,n)=>e.concat(this._makeDomArray(n,t))),[]):"string"==typeof e?this._parse(e,this.options,!1,null).children:t?S$([e]):[e]},after:function(...e){const t=this.length-1;return A$(this,((n,r)=>{const{parent:s}=n;if(!sF(n)||!s)return;const i=s.children,o=i.indexOf(n);if(0>o)return;const a="function"==typeof e[0]?e[0].call(n,r,this._render(n.children)):e;vH(i,o+1,0,this._makeDomArray(a,t>r),s)}))},append:bH,appendTo:function(e){return(_$(e)?e:this._make(e)).append(this),this},before:function(...e){const t=this.length-1;return A$(this,((n,r)=>{const{parent:s}=n;if(!sF(n)||!s)return;const i=s.children,o=i.indexOf(n);if(0>o)return;const a="function"==typeof e[0]?e[0].call(n,r,this._render(n.children)):e;vH(i,o,0,this._makeDomArray(a,t>r),s)}))},clone:function(){return this._make(S$(this.get()))},empty:function(){return A$(this,(e=>{sF(e)&&(e.children.forEach((e=>{e.next=e.prev=e.parent=null})),e.children.length=0)}))},html:function(e){if(void 0===e){const e=this[0];return e&&sF(e)?this._render(e.children):null}return A$(this,(t=>{sF(t)&&(t.children.forEach((e=>{e.next=e.prev=e.parent=null})),gH(_$(e)?e.toArray():this._parse(""+e,this.options,!1,t).children,t))}))},insertAfter:function(e){"string"==typeof e&&(e=this._make(e)),this.remove();const t=[];return this._makeDomArray(e).forEach((e=>{const n=this.clone().toArray(),{parent:r}=e;if(!r)return;const s=r.children,i=s.indexOf(e);0>i||(vH(s,i+1,0,n,r),t.push(...n))})),this._make(t)},insertBefore:function(e){const t=this._make(e);this.remove();const n=[];return A$(t,(e=>{const t=this.clone().toArray(),{parent:r}=e;if(!r)return;const s=r.children,i=s.indexOf(e);0>i||(vH(s,i,0,t,r),n.push(...t))})),this._make(n)},prepend:EH,prependTo:function(e){return(_$(e)?e:this._make(e)).prepend(this),this},remove:function(e){return A$(e?this.filter(e):this,(e=>{QF(e),e.prev=e.next=e.parent=null})),this},replaceWith:function(e){return A$(this,((t,n)=>{const{parent:r}=t;if(!r)return;const s=r.children,i="function"==typeof e?e.call(t,n,t):e,o=this._makeDomArray(i);gH(o,null);const a=s.indexOf(t);vH(s,a,1,o,r),o.includes(t)||(t.parent=t.prev=t.next=null)}))},text:function(e){return void 0===e?g$(this):A$(this,"function"==typeof e?(t,n)=>this._make(t).text(e.call(t,n,g$([t]))):t=>{sF(t)&&(t.children.forEach((e=>{e.next=e.prev=e.parent=null})),gH(new zj(""+e),t))})},toString:function(){return this._render(this)},unwrap:function(e){return this.parent(e).not("body").each(((e,t)=>{this._make(t).replaceWith(t.children)})),this},wrap:AH,wrapAll:function(e){const t=this[0];if(t){const n=this._make("function"==typeof e?e.call(t,0,t):e).insertBefore(t);let r;for(let e=0;n.length>e;e++)"tag"===n[e].type&&(r=n[e]);let s=0;for(;r&&r.children.length>s;){const e=r.children[s];"tag"===e.type?(r=e,s=0):s++}r&&this._make(r).append(this)}return this},wrapInner:SH});function wH(e,t,n,r){if("string"==typeof t){const i=xH(e),o="function"==typeof n?n.call(e,r,i[t]):n;""===o?delete i[t]:null!=o&&(i[t]=o),e.attribs.style=Object.keys(s=i).reduce(((e,t)=>`${e}${e?" ":""}${t}: ${s[t]};`),"")}else"object"==typeof t&&Object.keys(t).forEach(((n,r)=>{wH(e,n,t[n],r)}));var s}function xH(e,t){if(!e||!Xj(e))return;const n=function(e){if(!(e=(e||"").trim()))return{};const t={};let n;for(const r of e.split(";")){const e=r.indexOf(":");if(1>e||e===r.length-1){const e=r.trimEnd();e.length>0&&void 0!==n&&(t[n]+=";"+e)}else n=r.slice(0,e).trim(),t[n]=r.slice(e+1).trim()}return t}(e.attribs.style);if("string"==typeof t)return n[t];if(Array.isArray(t)){const e={};return t.forEach((t=>{null!=n[t]&&(e[t]=n[t])})),e}return n}var kH=Object.freeze({__proto__:null,css:function(e,t){return null!=e&&null!=t||"object"==typeof e&&!Array.isArray(e)?A$(this,((n,r)=>{Xj(n)&&wH(n,e,t,r)})):0!==this.length?xH(this[0],e):void 0}});const CH="input,select,textarea,keygen",IH=/%20/g,RH=/\r?\n/g;var OH=Object.freeze({__proto__:null,serialize:function(){return this.serializeArray().map((e=>`${encodeURIComponent(e.name)}=${encodeURIComponent(e.value)}`)).join("&").replace(IH,"+")},serializeArray:function(){return this.map(((e,t)=>{const n=this._make(t);return Xj(t)&&"form"===t.name?n.find(CH).toArray():n.filter(CH).toArray()})).filter('[name!=""]:enabled:not(:submit, :button, :image, :reset, :file):matches([checked], :not(:checkbox, :radio))').map(((e,t)=>{var n;const r=this._make(t),s=r.attr("name"),i=null!==(n=r.val())&&void 0!==n?n:"";return Array.isArray(i)?i.map((e=>({name:s,value:e.replace(RH,"\r\n")}))):{name:s,value:i.replace(RH,"\r\n")}})).toArray()}});class NH{constructor(e,t,n){if(this.length=0,this.options=n,this._root=t,e){for(let t=0;e.length>t;t++)this[t]=e[t];this.length=e.length}}}NH.prototype.cheerio="[cheerio object]",NH.prototype.splice=[].splice,NH.prototype[Symbol.iterator]=Array.prototype[Symbol.iterator],Object.assign(NH.prototype,U$,mH,TH,kH,OH);const DH=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),PH="�";var LH;!function(e){e[e.EOF=-1]="EOF",e[e.NULL=0]="NULL",e[e.TABULATION=9]="TABULATION",e[e.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",e[e.LINE_FEED=10]="LINE_FEED",e[e.FORM_FEED=12]="FORM_FEED",e[e.SPACE=32]="SPACE",e[e.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",e[e.QUOTATION_MARK=34]="QUOTATION_MARK",e[e.NUMBER_SIGN=35]="NUMBER_SIGN",e[e.AMPERSAND=38]="AMPERSAND",e[e.APOSTROPHE=39]="APOSTROPHE",e[e.HYPHEN_MINUS=45]="HYPHEN_MINUS",e[e.SOLIDUS=47]="SOLIDUS",e[e.DIGIT_0=48]="DIGIT_0",e[e.DIGIT_9=57]="DIGIT_9",e[e.SEMICOLON=59]="SEMICOLON",e[e.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",e[e.EQUALS_SIGN=61]="EQUALS_SIGN",e[e.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",e[e.QUESTION_MARK=63]="QUESTION_MARK",e[e.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",e[e.LATIN_CAPITAL_F=70]="LATIN_CAPITAL_F",e[e.LATIN_CAPITAL_X=88]="LATIN_CAPITAL_X",e[e.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",e[e.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",e[e.GRAVE_ACCENT=96]="GRAVE_ACCENT",e[e.LATIN_SMALL_A=97]="LATIN_SMALL_A",e[e.LATIN_SMALL_F=102]="LATIN_SMALL_F",e[e.LATIN_SMALL_X=120]="LATIN_SMALL_X",e[e.LATIN_SMALL_Z=122]="LATIN_SMALL_Z",e[e.REPLACEMENT_CHARACTER=65533]="REPLACEMENT_CHARACTER"}(LH=LH||(LH={}));const MH="script";function BH(e){return e>=55296&&57343>=e}function jH(e){return 32!==e&&10!==e&&13!==e&&9!==e&&12!==e&&e>=1&&31>=e||e>=127&&159>=e}function FH(e){return e>=64976&&65007>=e||DH.has(e)}var $H,UH,HH,GH,qH,zH,VH;!function(e){e.controlCharacterInInputStream="control-character-in-input-stream",e.noncharacterInInputStream="noncharacter-in-input-stream",e.surrogateInInputStream="surrogate-in-input-stream",e.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",e.endTagWithAttributes="end-tag-with-attributes",e.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",e.unexpectedSolidusInTag="unexpected-solidus-in-tag",e.unexpectedNullCharacter="unexpected-null-character",e.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",e.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",e.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",e.missingEndTagName="missing-end-tag-name",e.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",e.unknownNamedCharacterReference="unknown-named-character-reference",e.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",e.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",e.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",e.eofBeforeTagName="eof-before-tag-name",e.eofInTag="eof-in-tag",e.missingAttributeValue="missing-attribute-value",e.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",e.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",e.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",e.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",e.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",e.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",e.missingDoctypePublicIdentifier="missing-doctype-public-identifier",e.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",e.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",e.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",e.cdataInHtmlContent="cdata-in-html-content",e.incorrectlyOpenedComment="incorrectly-opened-comment",e.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",e.eofInDoctype="eof-in-doctype",e.nestedComment="nested-comment",e.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",e.eofInComment="eof-in-comment",e.incorrectlyClosedComment="incorrectly-closed-comment",e.eofInCdata="eof-in-cdata",e.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",e.nullCharacterReference="null-character-reference",e.surrogateCharacterReference="surrogate-character-reference",e.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",e.controlCharacterReference="control-character-reference",e.noncharacterCharacterReference="noncharacter-character-reference",e.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",e.missingDoctypeName="missing-doctype-name",e.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",e.duplicateAttribute="duplicate-attribute",e.nonConformingDoctype="non-conforming-doctype",e.missingDoctype="missing-doctype",e.misplacedDoctype="misplaced-doctype",e.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",e.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",e.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",e.openElementsLeftAfterEof="open-elements-left-after-eof",e.abandonedHeadElementChild="abandoned-head-element-child",e.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",e.nestedNoscriptInHead="nested-noscript-in-head",e.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"}($H=$H||($H={}));class YH{constructor(e){this.handler=e,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=65536,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+ +(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(e){const{line:t,col:n,offset:r}=this;return{code:e,startLine:t,endLine:t,startCol:n,endCol:n,startOffset:r,endOffset:r}}_err(e){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(e)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(e){if(this.pos!==this.html.length-1){const t=this.html.charCodeAt(this.pos+1);if(function(e){return e>=56320&&57343>=e}(t))return this.pos++,this._addGap(),1024*(e-55296)+9216+t}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,LH.EOF;return this._err($H.surrogateInInputStream),e}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(e,t){this.html.length>0?this.html+=e:this.html=e,this.endOfChunkHit=!1,this.lastChunkWritten=t}insertHtmlAtCurrentPos(e){this.html=this.html.substring(0,this.pos+1)+e+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(e,t){if(this.pos+e.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(t)return this.html.startsWith(e,this.pos);for(let t=0;e.length>t;t++)if((32|this.html.charCodeAt(this.pos+t))!==e.charCodeAt(t))return!1;return!0}peek(e){const t=this.pos+e;if(t>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,LH.EOF;const n=this.html.charCodeAt(t);return n===LH.CARRIAGE_RETURN?LH.LINE_FEED:n}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,LH.EOF;let e=this.html.charCodeAt(this.pos);return e===LH.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,LH.LINE_FEED):e===LH.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,BH(e)&&(e=this._processSurrogate(e)),null===this.handler.onParseError||e>31&&127>e||e===LH.LINE_FEED||e===LH.CARRIAGE_RETURN||e>159&&64976>e||this._checkForProblematicCharacters(e),e)}_checkForProblematicCharacters(e){jH(e)?this._err($H.controlCharacterInInputStream):FH(e)&&this._err($H.noncharacterInInputStream)}retreat(e){for(this.pos-=e;this.lastGapPos>this.pos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}function KH(e,t){for(let n=e.attrs.length-1;n>=0;n--)if(e.attrs[n].name===t)return e.attrs[n].value;return null}!function(e){e[e.CHARACTER=0]="CHARACTER",e[e.NULL_CHARACTER=1]="NULL_CHARACTER",e[e.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",e[e.START_TAG=3]="START_TAG",e[e.END_TAG=4]="END_TAG",e[e.COMMENT=5]="COMMENT",e[e.DOCTYPE=6]="DOCTYPE",e[e.EOF=7]="EOF",e[e.HIBERNATION=8]="HIBERNATION"}(UH=UH||(UH={})),function(e){e.HTML="http://www.w3.org/1999/xhtml",e.MATHML="http://www.w3.org/1998/Math/MathML",e.SVG="http://www.w3.org/2000/svg",e.XLINK="http://www.w3.org/1999/xlink",e.XML="http://www.w3.org/XML/1998/namespace",e.XMLNS="http://www.w3.org/2000/xmlns/"}(HH=HH||(HH={})),function(e){e.TYPE="type",e.ACTION="action",e.ENCODING="encoding",e.PROMPT="prompt",e.NAME="name",e.COLOR="color",e.FACE="face",e.SIZE="size"}(GH=GH||(GH={})),function(e){e.NO_QUIRKS="no-quirks",e.QUIRKS="quirks",e.LIMITED_QUIRKS="limited-quirks"}(qH=qH||(qH={})),function(e){e.A="a",e.ADDRESS="address",e.ANNOTATION_XML="annotation-xml",e.APPLET="applet",e.AREA="area",e.ARTICLE="article",e.ASIDE="aside",e.B="b",e.BASE="base",e.BASEFONT="basefont",e.BGSOUND="bgsound",e.BIG="big",e.BLOCKQUOTE="blockquote",e.BODY="body",e.BR="br",e.BUTTON="button",e.CAPTION="caption",e.CENTER="center",e.CODE="code",e.COL="col",e.COLGROUP="colgroup",e.DD="dd",e.DESC="desc",e.DETAILS="details",e.DIALOG="dialog",e.DIR="dir",e.DIV="div",e.DL="dl",e.DT="dt",e.EM="em",e.EMBED="embed",e.FIELDSET="fieldset",e.FIGCAPTION="figcaption",e.FIGURE="figure",e.FONT="font",e.FOOTER="footer",e.FOREIGN_OBJECT="foreignObject",e.FORM="form",e.FRAME="frame",e.FRAMESET="frameset",e.H1="h1",e.H2="h2",e.H3="h3",e.H4="h4",e.H5="h5",e.H6="h6",e.HEAD="head",e.HEADER="header",e.HGROUP="hgroup",e.HR="hr",e.HTML="html",e.I="i",e.IMG="img",e.IMAGE="image",e.INPUT="input",e.IFRAME="iframe",e.KEYGEN="keygen",e.LABEL="label",e.LI="li",e.LINK="link",e.LISTING="listing",e.MAIN="main",e.MALIGNMARK="malignmark",e.MARQUEE="marquee",e.MATH="math",e.MENU="menu",e.META="meta",e.MGLYPH="mglyph",e.MI="mi",e.MO="mo",e.MN="mn",e.MS="ms",e.MTEXT="mtext",e.NAV="nav",e.NOBR="nobr",e.NOFRAMES="noframes",e.NOEMBED="noembed",e.NOSCRIPT="noscript",e.OBJECT="object",e.OL="ol",e.OPTGROUP="optgroup",e.OPTION="option",e.P="p",e.PARAM="param",e.PLAINTEXT="plaintext",e.PRE="pre",e.RB="rb",e.RP="rp",e.RT="rt",e.RTC="rtc",e.RUBY="ruby",e.S="s",e.SCRIPT="script",e.SECTION="section",e.SELECT="select",e.SOURCE="source",e.SMALL="small",e.SPAN="span",e.STRIKE="strike",e.STRONG="strong",e.STYLE="style",e.SUB="sub",e.SUMMARY="summary",e.SUP="sup",e.TABLE="table",e.TBODY="tbody",e.TEMPLATE="template",e.TEXTAREA="textarea",e.TFOOT="tfoot",e.TD="td",e.TH="th",e.THEAD="thead",e.TITLE="title",e.TR="tr",e.TRACK="track",e.TT="tt",e.U="u",e.UL="ul",e.SVG="svg",e.VAR="var",e.WBR="wbr",e.XMP="xmp"}(zH=zH||(zH={})),function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.A=1]="A",e[e.ADDRESS=2]="ADDRESS",e[e.ANNOTATION_XML=3]="ANNOTATION_XML",e[e.APPLET=4]="APPLET",e[e.AREA=5]="AREA",e[e.ARTICLE=6]="ARTICLE",e[e.ASIDE=7]="ASIDE",e[e.B=8]="B",e[e.BASE=9]="BASE",e[e.BASEFONT=10]="BASEFONT",e[e.BGSOUND=11]="BGSOUND",e[e.BIG=12]="BIG",e[e.BLOCKQUOTE=13]="BLOCKQUOTE",e[e.BODY=14]="BODY",e[e.BR=15]="BR",e[e.BUTTON=16]="BUTTON",e[e.CAPTION=17]="CAPTION",e[e.CENTER=18]="CENTER",e[e.CODE=19]="CODE",e[e.COL=20]="COL",e[e.COLGROUP=21]="COLGROUP",e[e.DD=22]="DD",e[e.DESC=23]="DESC",e[e.DETAILS=24]="DETAILS",e[e.DIALOG=25]="DIALOG",e[e.DIR=26]="DIR",e[e.DIV=27]="DIV",e[e.DL=28]="DL",e[e.DT=29]="DT",e[e.EM=30]="EM",e[e.EMBED=31]="EMBED",e[e.FIELDSET=32]="FIELDSET",e[e.FIGCAPTION=33]="FIGCAPTION",e[e.FIGURE=34]="FIGURE",e[e.FONT=35]="FONT",e[e.FOOTER=36]="FOOTER",e[e.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",e[e.FORM=38]="FORM",e[e.FRAME=39]="FRAME",e[e.FRAMESET=40]="FRAMESET",e[e.H1=41]="H1",e[e.H2=42]="H2",e[e.H3=43]="H3",e[e.H4=44]="H4",e[e.H5=45]="H5",e[e.H6=46]="H6",e[e.HEAD=47]="HEAD",e[e.HEADER=48]="HEADER",e[e.HGROUP=49]="HGROUP",e[e.HR=50]="HR",e[e.HTML=51]="HTML",e[e.I=52]="I",e[e.IMG=53]="IMG",e[e.IMAGE=54]="IMAGE",e[e.INPUT=55]="INPUT",e[e.IFRAME=56]="IFRAME",e[e.KEYGEN=57]="KEYGEN",e[e.LABEL=58]="LABEL",e[e.LI=59]="LI",e[e.LINK=60]="LINK",e[e.LISTING=61]="LISTING",e[e.MAIN=62]="MAIN",e[e.MALIGNMARK=63]="MALIGNMARK",e[e.MARQUEE=64]="MARQUEE",e[e.MATH=65]="MATH",e[e.MENU=66]="MENU",e[e.META=67]="META",e[e.MGLYPH=68]="MGLYPH",e[e.MI=69]="MI",e[e.MO=70]="MO",e[e.MN=71]="MN",e[e.MS=72]="MS",e[e.MTEXT=73]="MTEXT",e[e.NAV=74]="NAV",e[e.NOBR=75]="NOBR",e[e.NOFRAMES=76]="NOFRAMES",e[e.NOEMBED=77]="NOEMBED",e[e.NOSCRIPT=78]="NOSCRIPT",e[e.OBJECT=79]="OBJECT",e[e.OL=80]="OL",e[e.OPTGROUP=81]="OPTGROUP",e[e.OPTION=82]="OPTION",e[e.P=83]="P",e[e.PARAM=84]="PARAM",e[e.PLAINTEXT=85]="PLAINTEXT",e[e.PRE=86]="PRE",e[e.RB=87]="RB",e[e.RP=88]="RP",e[e.RT=89]="RT",e[e.RTC=90]="RTC",e[e.RUBY=91]="RUBY",e[e.S=92]="S",e[e.SCRIPT=93]="SCRIPT",e[e.SECTION=94]="SECTION",e[e.SELECT=95]="SELECT",e[e.SOURCE=96]="SOURCE",e[e.SMALL=97]="SMALL",e[e.SPAN=98]="SPAN",e[e.STRIKE=99]="STRIKE",e[e.STRONG=100]="STRONG",e[e.STYLE=101]="STYLE",e[e.SUB=102]="SUB",e[e.SUMMARY=103]="SUMMARY",e[e.SUP=104]="SUP",e[e.TABLE=105]="TABLE",e[e.TBODY=106]="TBODY",e[e.TEMPLATE=107]="TEMPLATE",e[e.TEXTAREA=108]="TEXTAREA",e[e.TFOOT=109]="TFOOT",e[e.TD=110]="TD",e[e.TH=111]="TH",e[e.THEAD=112]="THEAD",e[e.TITLE=113]="TITLE",e[e.TR=114]="TR",e[e.TRACK=115]="TRACK",e[e.TT=116]="TT",e[e.U=117]="U",e[e.UL=118]="UL",e[e.SVG=119]="SVG",e[e.VAR=120]="VAR",e[e.WBR=121]="WBR",e[e.XMP=122]="XMP"}(VH=VH||(VH={}));const QH=new Map([[zH.A,VH.A],[zH.ADDRESS,VH.ADDRESS],[zH.ANNOTATION_XML,VH.ANNOTATION_XML],[zH.APPLET,VH.APPLET],[zH.AREA,VH.AREA],[zH.ARTICLE,VH.ARTICLE],[zH.ASIDE,VH.ASIDE],[zH.B,VH.B],[zH.BASE,VH.BASE],[zH.BASEFONT,VH.BASEFONT],[zH.BGSOUND,VH.BGSOUND],[zH.BIG,VH.BIG],[zH.BLOCKQUOTE,VH.BLOCKQUOTE],[zH.BODY,VH.BODY],[zH.BR,VH.BR],[zH.BUTTON,VH.BUTTON],[zH.CAPTION,VH.CAPTION],[zH.CENTER,VH.CENTER],[zH.CODE,VH.CODE],[zH.COL,VH.COL],[zH.COLGROUP,VH.COLGROUP],[zH.DD,VH.DD],[zH.DESC,VH.DESC],[zH.DETAILS,VH.DETAILS],[zH.DIALOG,VH.DIALOG],[zH.DIR,VH.DIR],[zH.DIV,VH.DIV],[zH.DL,VH.DL],[zH.DT,VH.DT],[zH.EM,VH.EM],[zH.EMBED,VH.EMBED],[zH.FIELDSET,VH.FIELDSET],[zH.FIGCAPTION,VH.FIGCAPTION],[zH.FIGURE,VH.FIGURE],[zH.FONT,VH.FONT],[zH.FOOTER,VH.FOOTER],[zH.FOREIGN_OBJECT,VH.FOREIGN_OBJECT],[zH.FORM,VH.FORM],[zH.FRAME,VH.FRAME],[zH.FRAMESET,VH.FRAMESET],[zH.H1,VH.H1],[zH.H2,VH.H2],[zH.H3,VH.H3],[zH.H4,VH.H4],[zH.H5,VH.H5],[zH.H6,VH.H6],[zH.HEAD,VH.HEAD],[zH.HEADER,VH.HEADER],[zH.HGROUP,VH.HGROUP],[zH.HR,VH.HR],[zH.HTML,VH.HTML],[zH.I,VH.I],[zH.IMG,VH.IMG],[zH.IMAGE,VH.IMAGE],[zH.INPUT,VH.INPUT],[zH.IFRAME,VH.IFRAME],[zH.KEYGEN,VH.KEYGEN],[zH.LABEL,VH.LABEL],[zH.LI,VH.LI],[zH.LINK,VH.LINK],[zH.LISTING,VH.LISTING],[zH.MAIN,VH.MAIN],[zH.MALIGNMARK,VH.MALIGNMARK],[zH.MARQUEE,VH.MARQUEE],[zH.MATH,VH.MATH],[zH.MENU,VH.MENU],[zH.META,VH.META],[zH.MGLYPH,VH.MGLYPH],[zH.MI,VH.MI],[zH.MO,VH.MO],[zH.MN,VH.MN],[zH.MS,VH.MS],[zH.MTEXT,VH.MTEXT],[zH.NAV,VH.NAV],[zH.NOBR,VH.NOBR],[zH.NOFRAMES,VH.NOFRAMES],[zH.NOEMBED,VH.NOEMBED],[zH.NOSCRIPT,VH.NOSCRIPT],[zH.OBJECT,VH.OBJECT],[zH.OL,VH.OL],[zH.OPTGROUP,VH.OPTGROUP],[zH.OPTION,VH.OPTION],[zH.P,VH.P],[zH.PARAM,VH.PARAM],[zH.PLAINTEXT,VH.PLAINTEXT],[zH.PRE,VH.PRE],[zH.RB,VH.RB],[zH.RP,VH.RP],[zH.RT,VH.RT],[zH.RTC,VH.RTC],[zH.RUBY,VH.RUBY],[zH.S,VH.S],[zH.SCRIPT,VH.SCRIPT],[zH.SECTION,VH.SECTION],[zH.SELECT,VH.SELECT],[zH.SOURCE,VH.SOURCE],[zH.SMALL,VH.SMALL],[zH.SPAN,VH.SPAN],[zH.STRIKE,VH.STRIKE],[zH.STRONG,VH.STRONG],[zH.STYLE,VH.STYLE],[zH.SUB,VH.SUB],[zH.SUMMARY,VH.SUMMARY],[zH.SUP,VH.SUP],[zH.TABLE,VH.TABLE],[zH.TBODY,VH.TBODY],[zH.TEMPLATE,VH.TEMPLATE],[zH.TEXTAREA,VH.TEXTAREA],[zH.TFOOT,VH.TFOOT],[zH.TD,VH.TD],[zH.TH,VH.TH],[zH.THEAD,VH.THEAD],[zH.TITLE,VH.TITLE],[zH.TR,VH.TR],[zH.TRACK,VH.TRACK],[zH.TT,VH.TT],[zH.U,VH.U],[zH.UL,VH.UL],[zH.SVG,VH.SVG],[zH.VAR,VH.VAR],[zH.WBR,VH.WBR],[zH.XMP,VH.XMP]]);function WH(e){var t;return null!==(t=QH.get(e))&&void 0!==t?t:VH.UNKNOWN}const JH=VH,XH={[HH.HTML]:new Set([JH.ADDRESS,JH.APPLET,JH.AREA,JH.ARTICLE,JH.ASIDE,JH.BASE,JH.BASEFONT,JH.BGSOUND,JH.BLOCKQUOTE,JH.BODY,JH.BR,JH.BUTTON,JH.CAPTION,JH.CENTER,JH.COL,JH.COLGROUP,JH.DD,JH.DETAILS,JH.DIR,JH.DIV,JH.DL,JH.DT,JH.EMBED,JH.FIELDSET,JH.FIGCAPTION,JH.FIGURE,JH.FOOTER,JH.FORM,JH.FRAME,JH.FRAMESET,JH.H1,JH.H2,JH.H3,JH.H4,JH.H5,JH.H6,JH.HEAD,JH.HEADER,JH.HGROUP,JH.HR,JH.HTML,JH.IFRAME,JH.IMG,JH.INPUT,JH.LI,JH.LINK,JH.LISTING,JH.MAIN,JH.MARQUEE,JH.MENU,JH.META,JH.NAV,JH.NOEMBED,JH.NOFRAMES,JH.NOSCRIPT,JH.OBJECT,JH.OL,JH.P,JH.PARAM,JH.PLAINTEXT,JH.PRE,JH.SCRIPT,JH.SECTION,JH.SELECT,JH.SOURCE,JH.STYLE,JH.SUMMARY,JH.TABLE,JH.TBODY,JH.TD,JH.TEMPLATE,JH.TEXTAREA,JH.TFOOT,JH.TH,JH.THEAD,JH.TITLE,JH.TR,JH.TRACK,JH.UL,JH.WBR,JH.XMP]),[HH.MATHML]:new Set([JH.MI,JH.MO,JH.MN,JH.MS,JH.MTEXT,JH.ANNOTATION_XML]),[HH.SVG]:new Set([JH.TITLE,JH.FOREIGN_OBJECT,JH.DESC]),[HH.XLINK]:new Set,[HH.XML]:new Set,[HH.XMLNS]:new Set};function ZH(e){return e===JH.H1||e===JH.H2||e===JH.H3||e===JH.H4||e===JH.H5||e===JH.H6}const eG=new Set([zH.STYLE,zH.SCRIPT,zH.XMP,zH.IFRAME,zH.NOEMBED,zH.NOFRAMES,zH.PLAINTEXT]),tG=new Map([[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);var nG;!function(e){e[e.DATA=0]="DATA",e[e.RCDATA=1]="RCDATA",e[e.RAWTEXT=2]="RAWTEXT",e[e.SCRIPT_DATA=3]="SCRIPT_DATA",e[e.PLAINTEXT=4]="PLAINTEXT",e[e.TAG_OPEN=5]="TAG_OPEN",e[e.END_TAG_OPEN=6]="END_TAG_OPEN",e[e.TAG_NAME=7]="TAG_NAME",e[e.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",e[e.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",e[e.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",e[e.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",e[e.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",e[e.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",e[e.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",e[e.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",e[e.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",e[e.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",e[e.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",e[e.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",e[e.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",e[e.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",e[e.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",e[e.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",e[e.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",e[e.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",e[e.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",e[e.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",e[e.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",e[e.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",e[e.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",e[e.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",e[e.BOGUS_COMMENT=40]="BOGUS_COMMENT",e[e.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",e[e.COMMENT_START=42]="COMMENT_START",e[e.COMMENT_START_DASH=43]="COMMENT_START_DASH",e[e.COMMENT=44]="COMMENT",e[e.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",e[e.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",e[e.COMMENT_END_DASH=49]="COMMENT_END_DASH",e[e.COMMENT_END=50]="COMMENT_END",e[e.COMMENT_END_BANG=51]="COMMENT_END_BANG",e[e.DOCTYPE=52]="DOCTYPE",e[e.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",e[e.DOCTYPE_NAME=54]="DOCTYPE_NAME",e[e.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",e[e.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",e[e.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",e[e.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",e[e.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",e[e.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",e[e.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",e[e.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",e[e.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",e[e.CDATA_SECTION=68]="CDATA_SECTION",e[e.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",e[e.CDATA_SECTION_END=70]="CDATA_SECTION_END",e[e.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",e[e.NAMED_CHARACTER_REFERENCE=72]="NAMED_CHARACTER_REFERENCE",e[e.AMBIGUOUS_AMPERSAND=73]="AMBIGUOUS_AMPERSAND",e[e.NUMERIC_CHARACTER_REFERENCE=74]="NUMERIC_CHARACTER_REFERENCE",e[e.HEXADEMICAL_CHARACTER_REFERENCE_START=75]="HEXADEMICAL_CHARACTER_REFERENCE_START",e[e.HEXADEMICAL_CHARACTER_REFERENCE=76]="HEXADEMICAL_CHARACTER_REFERENCE",e[e.DECIMAL_CHARACTER_REFERENCE=77]="DECIMAL_CHARACTER_REFERENCE",e[e.NUMERIC_CHARACTER_REFERENCE_END=78]="NUMERIC_CHARACTER_REFERENCE_END"}(nG||(nG={}));const rG={DATA:nG.DATA,RCDATA:nG.RCDATA,RAWTEXT:nG.RAWTEXT,SCRIPT_DATA:nG.SCRIPT_DATA,PLAINTEXT:nG.PLAINTEXT,CDATA_SECTION:nG.CDATA_SECTION};function sG(e){return e>=LH.DIGIT_0&&LH.DIGIT_9>=e}function iG(e){return e>=LH.LATIN_CAPITAL_A&&LH.LATIN_CAPITAL_Z>=e}function oG(e){return function(e){return e>=LH.LATIN_SMALL_A&&LH.LATIN_SMALL_Z>=e}(e)||iG(e)}function aG(e){return oG(e)||sG(e)}function cG(e){return e>=LH.LATIN_CAPITAL_A&&LH.LATIN_CAPITAL_F>=e}function lG(e){return e>=LH.LATIN_SMALL_A&&LH.LATIN_SMALL_F>=e}function uG(e){return e+32}function pG(e){return e===LH.SPACE||e===LH.LINE_FEED||e===LH.TABULATION||e===LH.FORM_FEED}function dG(e){return pG(e)||e===LH.SOLIDUS||e===LH.GREATER_THAN_SIGN}let hG=class{constructor(e,t){this.options=e,this.handler=t,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=nG.DATA,this.returnState=nG.DATA,this.charRefCode=-1,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new YH(t),this.currentLocation=this.getCurrentLocation(-1)}_err(e){var t,n;null===(n=(t=this.handler).onParseError)||void 0===n||n.call(t,this.preprocessor.getError(e))}getCurrentLocation(e){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-e,startOffset:this.preprocessor.offset-e,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const e=this._consume();this._ensureHibernation()||this._callState(e)}this.inLoop=!1}}pause(){this.paused=!0}resume(e){if(!this.paused)throw Error("Parser was already resumed");this.paused=!1,this.inLoop||(this._runParsingLoop(),this.paused||null==e||e())}write(e,t,n){this.active=!0,this.preprocessor.write(e,t),this._runParsingLoop(),this.paused||null==n||n()}insertHtmlAtCurrentPos(e){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(e),this._runParsingLoop()}_ensureHibernation(){return!!this.preprocessor.endOfChunkHit&&(this._unconsume(this.consumedAfterSnapshot),this.active=!1,!0)}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_unconsume(e){this.consumedAfterSnapshot-=e,this.preprocessor.retreat(e)}_reconsumeInState(e,t){this.state=e,this._callState(t)}_advanceBy(e){this.consumedAfterSnapshot+=e;for(let t=0;e>t;t++)this.preprocessor.advance()}_consumeSequenceIfMatch(e,t){return!!this.preprocessor.startsWith(e,t)&&(this._advanceBy(e.length-1),!0)}_createStartTagToken(){this.currentToken={type:UH.START_TAG,tagName:"",tagID:VH.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:UH.END_TAG,tagName:"",tagID:VH.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(e){this.currentToken={type:UH.COMMENT,data:"",location:this.getCurrentLocation(e)}}_createDoctypeToken(e){this.currentToken={type:UH.DOCTYPE,name:e,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(e,t){this.currentCharacterToken={type:e,chars:t,location:this.currentLocation}}_createAttr(e){this.currentAttr={name:e,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var e,t;const n=this.currentToken;null===KH(n,this.currentAttr.name)?(n.attrs.push(this.currentAttr),n.location&&this.currentLocation&&((null!==(e=(t=n.location).attrs)&&void 0!==e?e:t.attrs=Object.create(null))[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue())):this._err($H.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(e){this._emitCurrentCharacterToken(e.location),this.currentToken=null,e.location&&(e.location.endLine=this.preprocessor.line,e.location.endCol=this.preprocessor.col+1,e.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){const e=this.currentToken;this.prepareToken(e),e.tagID=WH(e.tagName),e.type===UH.START_TAG?(this.lastStartTagName=e.tagName,this.handler.onStartTag(e)):(e.attrs.length>0&&this._err($H.endTagWithAttributes),e.selfClosing&&this._err($H.endTagWithTrailingSolidus),this.handler.onEndTag(e)),this.preprocessor.dropParsedChunk()}emitCurrentComment(e){this.prepareToken(e),this.handler.onComment(e),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(e){this.prepareToken(e),this.handler.onDoctype(e),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(e){if(this.currentCharacterToken){switch(e&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=e.startLine,this.currentCharacterToken.location.endCol=e.startCol,this.currentCharacterToken.location.endOffset=e.startOffset),this.currentCharacterToken.type){case UH.CHARACTER:this.handler.onCharacter(this.currentCharacterToken);break;case UH.NULL_CHARACTER:this.handler.onNullCharacter(this.currentCharacterToken);break;case UH.WHITESPACE_CHARACTER:this.handler.onWhitespaceCharacter(this.currentCharacterToken)}this.currentCharacterToken=null}}_emitEOFToken(){const e=this.getCurrentLocation(0);e&&(e.endLine=e.startLine,e.endCol=e.startCol,e.endOffset=e.startOffset),this._emitCurrentCharacterToken(e),this.handler.onEof({type:UH.EOF,location:e}),this.active=!1}_appendCharToCurrentCharacterToken(e,t){if(this.currentCharacterToken){if(this.currentCharacterToken.type===e)return void(this.currentCharacterToken.chars+=t);this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk()}this._createCharacterToken(e,t)}_emitCodePoint(e){const t=pG(e)?UH.WHITESPACE_CHARACTER:e===LH.NULL?UH.NULL_CHARACTER:UH.CHARACTER;this._appendCharToCurrentCharacterToken(t,String.fromCodePoint(e))}_emitChars(e){this._appendCharToCurrentCharacterToken(UH.CHARACTER,e)}_matchNamedCharacterReference(e){let t=null,n=0,r=!1;for(let i=0,o=uF[0];i>=0&&(i=TF(uF,o,i+1,e),i>=0);e=this._consume()){n+=1,o=uF[i];const a=o&gF.VALUE_LENGTH;if(a){const o=(a>>14)-1;if(e!==LH.SEMICOLON&&this._isCharacterReferenceInAttribute()&&((s=this.preprocessor.peek(1))===LH.EQUALS_SIGN||aG(s))?(t=[LH.AMPERSAND],i+=o):(t=0===o?[uF[i]&~gF.VALUE_LENGTH]:1===o?[uF[++i]]:[uF[++i],uF[++i]],n=0,r=e!==LH.SEMICOLON),0===o){this._consume();break}}}var s;return this._unconsume(n),r&&!this.preprocessor.endOfChunkHit&&this._err($H.missingSemicolonAfterCharacterReference),this._unconsume(1),t}_isCharacterReferenceInAttribute(){return this.returnState===nG.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===nG.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===nG.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(e){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(e):this._emitCodePoint(e)}_callState(e){switch(this.state){case nG.DATA:this._stateData(e);break;case nG.RCDATA:this._stateRcdata(e);break;case nG.RAWTEXT:this._stateRawtext(e);break;case nG.SCRIPT_DATA:this._stateScriptData(e);break;case nG.PLAINTEXT:this._statePlaintext(e);break;case nG.TAG_OPEN:this._stateTagOpen(e);break;case nG.END_TAG_OPEN:this._stateEndTagOpen(e);break;case nG.TAG_NAME:this._stateTagName(e);break;case nG.RCDATA_LESS_THAN_SIGN:this._stateRcdataLessThanSign(e);break;case nG.RCDATA_END_TAG_OPEN:this._stateRcdataEndTagOpen(e);break;case nG.RCDATA_END_TAG_NAME:this._stateRcdataEndTagName(e);break;case nG.RAWTEXT_LESS_THAN_SIGN:this._stateRawtextLessThanSign(e);break;case nG.RAWTEXT_END_TAG_OPEN:this._stateRawtextEndTagOpen(e);break;case nG.RAWTEXT_END_TAG_NAME:this._stateRawtextEndTagName(e);break;case nG.SCRIPT_DATA_LESS_THAN_SIGN:this._stateScriptDataLessThanSign(e);break;case nG.SCRIPT_DATA_END_TAG_OPEN:this._stateScriptDataEndTagOpen(e);break;case nG.SCRIPT_DATA_END_TAG_NAME:this._stateScriptDataEndTagName(e);break;case nG.SCRIPT_DATA_ESCAPE_START:this._stateScriptDataEscapeStart(e);break;case nG.SCRIPT_DATA_ESCAPE_START_DASH:this._stateScriptDataEscapeStartDash(e);break;case nG.SCRIPT_DATA_ESCAPED:this._stateScriptDataEscaped(e);break;case nG.SCRIPT_DATA_ESCAPED_DASH:this._stateScriptDataEscapedDash(e);break;case nG.SCRIPT_DATA_ESCAPED_DASH_DASH:this._stateScriptDataEscapedDashDash(e);break;case nG.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:this._stateScriptDataEscapedLessThanSign(e);break;case nG.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:this._stateScriptDataEscapedEndTagOpen(e);break;case nG.SCRIPT_DATA_ESCAPED_END_TAG_NAME:this._stateScriptDataEscapedEndTagName(e);break;case nG.SCRIPT_DATA_DOUBLE_ESCAPE_START:this._stateScriptDataDoubleEscapeStart(e);break;case nG.SCRIPT_DATA_DOUBLE_ESCAPED:this._stateScriptDataDoubleEscaped(e);break;case nG.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:this._stateScriptDataDoubleEscapedDash(e);break;case nG.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:this._stateScriptDataDoubleEscapedDashDash(e);break;case nG.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:this._stateScriptDataDoubleEscapedLessThanSign(e);break;case nG.SCRIPT_DATA_DOUBLE_ESCAPE_END:this._stateScriptDataDoubleEscapeEnd(e);break;case nG.BEFORE_ATTRIBUTE_NAME:this._stateBeforeAttributeName(e);break;case nG.ATTRIBUTE_NAME:this._stateAttributeName(e);break;case nG.AFTER_ATTRIBUTE_NAME:this._stateAfterAttributeName(e);break;case nG.BEFORE_ATTRIBUTE_VALUE:this._stateBeforeAttributeValue(e);break;case nG.ATTRIBUTE_VALUE_DOUBLE_QUOTED:this._stateAttributeValueDoubleQuoted(e);break;case nG.ATTRIBUTE_VALUE_SINGLE_QUOTED:this._stateAttributeValueSingleQuoted(e);break;case nG.ATTRIBUTE_VALUE_UNQUOTED:this._stateAttributeValueUnquoted(e);break;case nG.AFTER_ATTRIBUTE_VALUE_QUOTED:this._stateAfterAttributeValueQuoted(e);break;case nG.SELF_CLOSING_START_TAG:this._stateSelfClosingStartTag(e);break;case nG.BOGUS_COMMENT:this._stateBogusComment(e);break;case nG.MARKUP_DECLARATION_OPEN:this._stateMarkupDeclarationOpen(e);break;case nG.COMMENT_START:this._stateCommentStart(e);break;case nG.COMMENT_START_DASH:this._stateCommentStartDash(e);break;case nG.COMMENT:this._stateComment(e);break;case nG.COMMENT_LESS_THAN_SIGN:this._stateCommentLessThanSign(e);break;case nG.COMMENT_LESS_THAN_SIGN_BANG:this._stateCommentLessThanSignBang(e);break;case nG.COMMENT_LESS_THAN_SIGN_BANG_DASH:this._stateCommentLessThanSignBangDash(e);break;case nG.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:this._stateCommentLessThanSignBangDashDash(e);break;case nG.COMMENT_END_DASH:this._stateCommentEndDash(e);break;case nG.COMMENT_END:this._stateCommentEnd(e);break;case nG.COMMENT_END_BANG:this._stateCommentEndBang(e);break;case nG.DOCTYPE:this._stateDoctype(e);break;case nG.BEFORE_DOCTYPE_NAME:this._stateBeforeDoctypeName(e);break;case nG.DOCTYPE_NAME:this._stateDoctypeName(e);break;case nG.AFTER_DOCTYPE_NAME:this._stateAfterDoctypeName(e);break;case nG.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._stateAfterDoctypePublicKeyword(e);break;case nG.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:this._stateBeforeDoctypePublicIdentifier(e);break;case nG.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:this._stateDoctypePublicIdentifierDoubleQuoted(e);break;case nG.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:this._stateDoctypePublicIdentifierSingleQuoted(e);break;case nG.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:this._stateAfterDoctypePublicIdentifier(e);break;case nG.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:this._stateBetweenDoctypePublicAndSystemIdentifiers(e);break;case nG.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._stateAfterDoctypeSystemKeyword(e);break;case nG.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:this._stateBeforeDoctypeSystemIdentifier(e);break;case nG.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:this._stateDoctypeSystemIdentifierDoubleQuoted(e);break;case nG.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:this._stateDoctypeSystemIdentifierSingleQuoted(e);break;case nG.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:this._stateAfterDoctypeSystemIdentifier(e);break;case nG.BOGUS_DOCTYPE:this._stateBogusDoctype(e);break;case nG.CDATA_SECTION:this._stateCdataSection(e);break;case nG.CDATA_SECTION_BRACKET:this._stateCdataSectionBracket(e);break;case nG.CDATA_SECTION_END:this._stateCdataSectionEnd(e);break;case nG.CHARACTER_REFERENCE:this._stateCharacterReference(e);break;case nG.NAMED_CHARACTER_REFERENCE:this._stateNamedCharacterReference(e);break;case nG.AMBIGUOUS_AMPERSAND:this._stateAmbiguousAmpersand(e);break;case nG.NUMERIC_CHARACTER_REFERENCE:this._stateNumericCharacterReference(e);break;case nG.HEXADEMICAL_CHARACTER_REFERENCE_START:this._stateHexademicalCharacterReferenceStart(e);break;case nG.HEXADEMICAL_CHARACTER_REFERENCE:this._stateHexademicalCharacterReference(e);break;case nG.DECIMAL_CHARACTER_REFERENCE:this._stateDecimalCharacterReference(e);break;case nG.NUMERIC_CHARACTER_REFERENCE_END:this._stateNumericCharacterReferenceEnd(e);break;default:throw Error("Unknown state")}}_stateData(e){switch(e){case LH.LESS_THAN_SIGN:this.state=nG.TAG_OPEN;break;case LH.AMPERSAND:this.returnState=nG.DATA,this.state=nG.CHARACTER_REFERENCE;break;case LH.NULL:this._err($H.unexpectedNullCharacter),this._emitCodePoint(e);break;case LH.EOF:this._emitEOFToken();break;default:this._emitCodePoint(e)}}_stateRcdata(e){switch(e){case LH.AMPERSAND:this.returnState=nG.RCDATA,this.state=nG.CHARACTER_REFERENCE;break;case LH.LESS_THAN_SIGN:this.state=nG.RCDATA_LESS_THAN_SIGN;break;case LH.NULL:this._err($H.unexpectedNullCharacter),this._emitChars(PH);break;case LH.EOF:this._emitEOFToken();break;default:this._emitCodePoint(e)}}_stateRawtext(e){switch(e){case LH.LESS_THAN_SIGN:this.state=nG.RAWTEXT_LESS_THAN_SIGN;break;case LH.NULL:this._err($H.unexpectedNullCharacter),this._emitChars(PH);break;case LH.EOF:this._emitEOFToken();break;default:this._emitCodePoint(e)}}_stateScriptData(e){switch(e){case LH.LESS_THAN_SIGN:this.state=nG.SCRIPT_DATA_LESS_THAN_SIGN;break;case LH.NULL:this._err($H.unexpectedNullCharacter),this._emitChars(PH);break;case LH.EOF:this._emitEOFToken();break;default:this._emitCodePoint(e)}}_statePlaintext(e){switch(e){case LH.NULL:this._err($H.unexpectedNullCharacter),this._emitChars(PH);break;case LH.EOF:this._emitEOFToken();break;default:this._emitCodePoint(e)}}_stateTagOpen(e){if(oG(e))this._createStartTagToken(),this.state=nG.TAG_NAME,this._stateTagName(e);else switch(e){case LH.EXCLAMATION_MARK:this.state=nG.MARKUP_DECLARATION_OPEN;break;case LH.SOLIDUS:this.state=nG.END_TAG_OPEN;break;case LH.QUESTION_MARK:this._err($H.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=nG.BOGUS_COMMENT,this._stateBogusComment(e);break;case LH.EOF:this._err($H.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break;default:this._err($H.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=nG.DATA,this._stateData(e)}}_stateEndTagOpen(e){if(oG(e))this._createEndTagToken(),this.state=nG.TAG_NAME,this._stateTagName(e);else switch(e){case LH.GREATER_THAN_SIGN:this._err($H.missingEndTagName),this.state=nG.DATA;break;case LH.EOF:this._err($H.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break;default:this._err($H.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=nG.BOGUS_COMMENT,this._stateBogusComment(e)}}_stateTagName(e){const t=this.currentToken;switch(e){case LH.SPACE:case LH.LINE_FEED:case LH.TABULATION:case LH.FORM_FEED:this.state=nG.BEFORE_ATTRIBUTE_NAME;break;case LH.SOLIDUS:this.state=nG.SELF_CLOSING_START_TAG;break;case LH.GREATER_THAN_SIGN:this.state=nG.DATA,this.emitCurrentTagToken();break;case LH.NULL:this._err($H.unexpectedNullCharacter),t.tagName+=PH;break;case LH.EOF:this._err($H.eofInTag),this._emitEOFToken();break;default:t.tagName+=String.fromCodePoint(iG(e)?uG(e):e)}}_stateRcdataLessThanSign(e){e===LH.SOLIDUS?this.state=nG.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=nG.RCDATA,this._stateRcdata(e))}_stateRcdataEndTagOpen(e){oG(e)?(this.state=nG.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(e)):(this._emitChars("</"),this.state=nG.RCDATA,this._stateRcdata(e))}handleSpecialEndTag(e){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();switch(this._createEndTagToken(),this.currentToken.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case LH.SPACE:case LH.LINE_FEED:case LH.TABULATION:case LH.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=nG.BEFORE_ATTRIBUTE_NAME,!1;case LH.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=nG.SELF_CLOSING_START_TAG,!1;case LH.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=nG.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=nG.RCDATA,this._stateRcdata(e))}_stateRawtextLessThanSign(e){e===LH.SOLIDUS?this.state=nG.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=nG.RAWTEXT,this._stateRawtext(e))}_stateRawtextEndTagOpen(e){oG(e)?(this.state=nG.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(e)):(this._emitChars("</"),this.state=nG.RAWTEXT,this._stateRawtext(e))}_stateRawtextEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=nG.RAWTEXT,this._stateRawtext(e))}_stateScriptDataLessThanSign(e){switch(e){case LH.SOLIDUS:this.state=nG.SCRIPT_DATA_END_TAG_OPEN;break;case LH.EXCLAMATION_MARK:this.state=nG.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break;default:this._emitChars("<"),this.state=nG.SCRIPT_DATA,this._stateScriptData(e)}}_stateScriptDataEndTagOpen(e){oG(e)?(this.state=nG.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(e)):(this._emitChars("</"),this.state=nG.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=nG.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEscapeStart(e){e===LH.HYPHEN_MINUS?(this.state=nG.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=nG.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEscapeStartDash(e){e===LH.HYPHEN_MINUS?(this.state=nG.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=nG.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEscaped(e){switch(e){case LH.HYPHEN_MINUS:this.state=nG.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break;case LH.LESS_THAN_SIGN:this.state=nG.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break;case LH.NULL:this._err($H.unexpectedNullCharacter),this._emitChars(PH);break;case LH.EOF:this._err($H.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break;default:this._emitCodePoint(e)}}_stateScriptDataEscapedDash(e){switch(e){case LH.HYPHEN_MINUS:this.state=nG.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break;case LH.LESS_THAN_SIGN:this.state=nG.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break;case LH.NULL:this._err($H.unexpectedNullCharacter),this.state=nG.SCRIPT_DATA_ESCAPED,this._emitChars(PH);break;case LH.EOF:this._err($H.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break;default:this.state=nG.SCRIPT_DATA_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataEscapedDashDash(e){switch(e){case LH.HYPHEN_MINUS:this._emitChars("-");break;case LH.LESS_THAN_SIGN:this.state=nG.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break;case LH.GREATER_THAN_SIGN:this.state=nG.SCRIPT_DATA,this._emitChars(">");break;case LH.NULL:this._err($H.unexpectedNullCharacter),this.state=nG.SCRIPT_DATA_ESCAPED,this._emitChars(PH);break;case LH.EOF:this._err($H.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break;default:this.state=nG.SCRIPT_DATA_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataEscapedLessThanSign(e){e===LH.SOLIDUS?this.state=nG.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:oG(e)?(this._emitChars("<"),this.state=nG.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(e)):(this._emitChars("<"),this.state=nG.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataEscapedEndTagOpen(e){oG(e)?(this.state=nG.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(e)):(this._emitChars("</"),this.state=nG.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataEscapedEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=nG.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataDoubleEscapeStart(e){if(this.preprocessor.startsWith(MH,!1)&&dG(this.preprocessor.peek(6))){this._emitCodePoint(e);for(let e=0;6>e;e++)this._emitCodePoint(this._consume());this.state=nG.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=nG.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataDoubleEscaped(e){switch(e){case LH.HYPHEN_MINUS:this.state=nG.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break;case LH.LESS_THAN_SIGN:this.state=nG.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break;case LH.NULL:this._err($H.unexpectedNullCharacter),this._emitChars(PH);break;case LH.EOF:this._err($H.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break;default:this._emitCodePoint(e)}}_stateScriptDataDoubleEscapedDash(e){switch(e){case LH.HYPHEN_MINUS:this.state=nG.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break;case LH.LESS_THAN_SIGN:this.state=nG.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break;case LH.NULL:this._err($H.unexpectedNullCharacter),this.state=nG.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(PH);break;case LH.EOF:this._err($H.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break;default:this.state=nG.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataDoubleEscapedDashDash(e){switch(e){case LH.HYPHEN_MINUS:this._emitChars("-");break;case LH.LESS_THAN_SIGN:this.state=nG.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break;case LH.GREATER_THAN_SIGN:this.state=nG.SCRIPT_DATA,this._emitChars(">");break;case LH.NULL:this._err($H.unexpectedNullCharacter),this.state=nG.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(PH);break;case LH.EOF:this._err($H.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break;default:this.state=nG.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataDoubleEscapedLessThanSign(e){e===LH.SOLIDUS?(this.state=nG.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=nG.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(e))}_stateScriptDataDoubleEscapeEnd(e){if(this.preprocessor.startsWith(MH,!1)&&dG(this.preprocessor.peek(6))){this._emitCodePoint(e);for(let e=0;6>e;e++)this._emitCodePoint(this._consume());this.state=nG.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=nG.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(e))}_stateBeforeAttributeName(e){switch(e){case LH.SPACE:case LH.LINE_FEED:case LH.TABULATION:case LH.FORM_FEED:break;case LH.SOLIDUS:case LH.GREATER_THAN_SIGN:case LH.EOF:this.state=nG.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(e);break;case LH.EQUALS_SIGN:this._err($H.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=nG.ATTRIBUTE_NAME;break;default:this._createAttr(""),this.state=nG.ATTRIBUTE_NAME,this._stateAttributeName(e)}}_stateAttributeName(e){switch(e){case LH.SPACE:case LH.LINE_FEED:case LH.TABULATION:case LH.FORM_FEED:case LH.SOLIDUS:case LH.GREATER_THAN_SIGN:case LH.EOF:this._leaveAttrName(),this.state=nG.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(e);break;case LH.EQUALS_SIGN:this._leaveAttrName(),this.state=nG.BEFORE_ATTRIBUTE_VALUE;break;case LH.QUOTATION_MARK:case LH.APOSTROPHE:case LH.LESS_THAN_SIGN:this._err($H.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(e);break;case LH.NULL:this._err($H.unexpectedNullCharacter),this.currentAttr.name+=PH;break;default:this.currentAttr.name+=String.fromCodePoint(iG(e)?uG(e):e)}}_stateAfterAttributeName(e){switch(e){case LH.SPACE:case LH.LINE_FEED:case LH.TABULATION:case LH.FORM_FEED:break;case LH.SOLIDUS:this.state=nG.SELF_CLOSING_START_TAG;break;case LH.EQUALS_SIGN:this.state=nG.BEFORE_ATTRIBUTE_VALUE;break;case LH.GREATER_THAN_SIGN:this.state=nG.DATA,this.emitCurrentTagToken();break;case LH.EOF:this._err($H.eofInTag),this._emitEOFToken();break;default:this._createAttr(""),this.state=nG.ATTRIBUTE_NAME,this._stateAttributeName(e)}}_stateBeforeAttributeValue(e){switch(e){case LH.SPACE:case LH.LINE_FEED:case LH.TABULATION:case LH.FORM_FEED:break;case LH.QUOTATION_MARK:this.state=nG.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break;case LH.APOSTROPHE:this.state=nG.ATTRIBUTE_VALUE_SINGLE_QUOTED;break;case LH.GREATER_THAN_SIGN:this._err($H.missingAttributeValue),this.state=nG.DATA,this.emitCurrentTagToken();break;default:this.state=nG.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(e)}}_stateAttributeValueDoubleQuoted(e){switch(e){case LH.QUOTATION_MARK:this.state=nG.AFTER_ATTRIBUTE_VALUE_QUOTED;break;case LH.AMPERSAND:this.returnState=nG.ATTRIBUTE_VALUE_DOUBLE_QUOTED,this.state=nG.CHARACTER_REFERENCE;break;case LH.NULL:this._err($H.unexpectedNullCharacter),this.currentAttr.value+=PH;break;case LH.EOF:this._err($H.eofInTag),this._emitEOFToken();break;default:this.currentAttr.value+=String.fromCodePoint(e)}}_stateAttributeValueSingleQuoted(e){switch(e){case LH.APOSTROPHE:this.state=nG.AFTER_ATTRIBUTE_VALUE_QUOTED;break;case LH.AMPERSAND:this.returnState=nG.ATTRIBUTE_VALUE_SINGLE_QUOTED,this.state=nG.CHARACTER_REFERENCE;break;case LH.NULL:this._err($H.unexpectedNullCharacter),this.currentAttr.value+=PH;break;case LH.EOF:this._err($H.eofInTag),this._emitEOFToken();break;default:this.currentAttr.value+=String.fromCodePoint(e)}}_stateAttributeValueUnquoted(e){switch(e){case LH.SPACE:case LH.LINE_FEED:case LH.TABULATION:case LH.FORM_FEED:this._leaveAttrValue(),this.state=nG.BEFORE_ATTRIBUTE_NAME;break;case LH.AMPERSAND:this.returnState=nG.ATTRIBUTE_VALUE_UNQUOTED,this.state=nG.CHARACTER_REFERENCE;break;case LH.GREATER_THAN_SIGN:this._leaveAttrValue(),this.state=nG.DATA,this.emitCurrentTagToken();break;case LH.NULL:this._err($H.unexpectedNullCharacter),this.currentAttr.value+=PH;break;case LH.QUOTATION_MARK:case LH.APOSTROPHE:case LH.LESS_THAN_SIGN:case LH.EQUALS_SIGN:case LH.GRAVE_ACCENT:this._err($H.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(e);break;case LH.EOF:this._err($H.eofInTag),this._emitEOFToken();break;default:this.currentAttr.value+=String.fromCodePoint(e)}}_stateAfterAttributeValueQuoted(e){switch(e){case LH.SPACE:case LH.LINE_FEED:case LH.TABULATION:case LH.FORM_FEED:this._leaveAttrValue(),this.state=nG.BEFORE_ATTRIBUTE_NAME;break;case LH.SOLIDUS:this._leaveAttrValue(),this.state=nG.SELF_CLOSING_START_TAG;break;case LH.GREATER_THAN_SIGN:this._leaveAttrValue(),this.state=nG.DATA,this.emitCurrentTagToken();break;case LH.EOF:this._err($H.eofInTag),this._emitEOFToken();break;default:this._err($H.missingWhitespaceBetweenAttributes),this.state=nG.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(e)}}_stateSelfClosingStartTag(e){switch(e){case LH.GREATER_THAN_SIGN:this.currentToken.selfClosing=!0,this.state=nG.DATA,this.emitCurrentTagToken();break;case LH.EOF:this._err($H.eofInTag),this._emitEOFToken();break;default:this._err($H.unexpectedSolidusInTag),this.state=nG.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(e)}}_stateBogusComment(e){const t=this.currentToken;switch(e){case LH.GREATER_THAN_SIGN:this.state=nG.DATA,this.emitCurrentComment(t);break;case LH.EOF:this.emitCurrentComment(t),this._emitEOFToken();break;case LH.NULL:this._err($H.unexpectedNullCharacter),t.data+=PH;break;default:t.data+=String.fromCodePoint(e)}}_stateMarkupDeclarationOpen(e){this._consumeSequenceIfMatch("--",!0)?(this._createCommentToken(3),this.state=nG.COMMENT_START):this._consumeSequenceIfMatch("doctype",!1)?(this.currentLocation=this.getCurrentLocation(8),this.state=nG.DOCTYPE):this._consumeSequenceIfMatch("[CDATA[",!0)?this.inForeignNode?this.state=nG.CDATA_SECTION:(this._err($H.cdataInHtmlContent),this._createCommentToken(8),this.currentToken.data="[CDATA[",this.state=nG.BOGUS_COMMENT):this._ensureHibernation()||(this._err($H.incorrectlyOpenedComment),this._createCommentToken(2),this.state=nG.BOGUS_COMMENT,this._stateBogusComment(e))}_stateCommentStart(e){switch(e){case LH.HYPHEN_MINUS:this.state=nG.COMMENT_START_DASH;break;case LH.GREATER_THAN_SIGN:this._err($H.abruptClosingOfEmptyComment),this.state=nG.DATA,this.emitCurrentComment(this.currentToken);break;default:this.state=nG.COMMENT,this._stateComment(e)}}_stateCommentStartDash(e){const t=this.currentToken;switch(e){case LH.HYPHEN_MINUS:this.state=nG.COMMENT_END;break;case LH.GREATER_THAN_SIGN:this._err($H.abruptClosingOfEmptyComment),this.state=nG.DATA,this.emitCurrentComment(t);break;case LH.EOF:this._err($H.eofInComment),this.emitCurrentComment(t),this._emitEOFToken();break;default:t.data+="-",this.state=nG.COMMENT,this._stateComment(e)}}_stateComment(e){const t=this.currentToken;switch(e){case LH.HYPHEN_MINUS:this.state=nG.COMMENT_END_DASH;break;case LH.LESS_THAN_SIGN:t.data+="<",this.state=nG.COMMENT_LESS_THAN_SIGN;break;case LH.NULL:this._err($H.unexpectedNullCharacter),t.data+=PH;break;case LH.EOF:this._err($H.eofInComment),this.emitCurrentComment(t),this._emitEOFToken();break;default:t.data+=String.fromCodePoint(e)}}_stateCommentLessThanSign(e){const t=this.currentToken;switch(e){case LH.EXCLAMATION_MARK:t.data+="!",this.state=nG.COMMENT_LESS_THAN_SIGN_BANG;break;case LH.LESS_THAN_SIGN:t.data+="<";break;default:this.state=nG.COMMENT,this._stateComment(e)}}_stateCommentLessThanSignBang(e){e===LH.HYPHEN_MINUS?this.state=nG.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=nG.COMMENT,this._stateComment(e))}_stateCommentLessThanSignBangDash(e){e===LH.HYPHEN_MINUS?this.state=nG.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=nG.COMMENT_END_DASH,this._stateCommentEndDash(e))}_stateCommentLessThanSignBangDashDash(e){e!==LH.GREATER_THAN_SIGN&&e!==LH.EOF&&this._err($H.nestedComment),this.state=nG.COMMENT_END,this._stateCommentEnd(e)}_stateCommentEndDash(e){const t=this.currentToken;switch(e){case LH.HYPHEN_MINUS:this.state=nG.COMMENT_END;break;case LH.EOF:this._err($H.eofInComment),this.emitCurrentComment(t),this._emitEOFToken();break;default:t.data+="-",this.state=nG.COMMENT,this._stateComment(e)}}_stateCommentEnd(e){const t=this.currentToken;switch(e){case LH.GREATER_THAN_SIGN:this.state=nG.DATA,this.emitCurrentComment(t);break;case LH.EXCLAMATION_MARK:this.state=nG.COMMENT_END_BANG;break;case LH.HYPHEN_MINUS:t.data+="-";break;case LH.EOF:this._err($H.eofInComment),this.emitCurrentComment(t),this._emitEOFToken();break;default:t.data+="--",this.state=nG.COMMENT,this._stateComment(e)}}_stateCommentEndBang(e){const t=this.currentToken;switch(e){case LH.HYPHEN_MINUS:t.data+="--!",this.state=nG.COMMENT_END_DASH;break;case LH.GREATER_THAN_SIGN:this._err($H.incorrectlyClosedComment),this.state=nG.DATA,this.emitCurrentComment(t);break;case LH.EOF:this._err($H.eofInComment),this.emitCurrentComment(t),this._emitEOFToken();break;default:t.data+="--!",this.state=nG.COMMENT,this._stateComment(e)}}_stateDoctype(e){switch(e){case LH.SPACE:case LH.LINE_FEED:case LH.TABULATION:case LH.FORM_FEED:this.state=nG.BEFORE_DOCTYPE_NAME;break;case LH.GREATER_THAN_SIGN:this.state=nG.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(e);break;case LH.EOF:{this._err($H.eofInDoctype),this._createDoctypeToken(null);const e=this.currentToken;e.forceQuirks=!0,this.emitCurrentDoctype(e),this._emitEOFToken();break}default:this._err($H.missingWhitespaceBeforeDoctypeName),this.state=nG.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(e)}}_stateBeforeDoctypeName(e){if(iG(e))this._createDoctypeToken(String.fromCharCode(uG(e))),this.state=nG.DOCTYPE_NAME;else switch(e){case LH.SPACE:case LH.LINE_FEED:case LH.TABULATION:case LH.FORM_FEED:break;case LH.NULL:this._err($H.unexpectedNullCharacter),this._createDoctypeToken(PH),this.state=nG.DOCTYPE_NAME;break;case LH.GREATER_THAN_SIGN:{this._err($H.missingDoctypeName),this._createDoctypeToken(null);const e=this.currentToken;e.forceQuirks=!0,this.emitCurrentDoctype(e),this.state=nG.DATA;break}case LH.EOF:{this._err($H.eofInDoctype),this._createDoctypeToken(null);const e=this.currentToken;e.forceQuirks=!0,this.emitCurrentDoctype(e),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(e)),this.state=nG.DOCTYPE_NAME}}_stateDoctypeName(e){const t=this.currentToken;switch(e){case LH.SPACE:case LH.LINE_FEED:case LH.TABULATION:case LH.FORM_FEED:this.state=nG.AFTER_DOCTYPE_NAME;break;case LH.GREATER_THAN_SIGN:this.state=nG.DATA,this.emitCurrentDoctype(t);break;case LH.NULL:this._err($H.unexpectedNullCharacter),t.name+=PH;break;case LH.EOF:this._err($H.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:t.name+=String.fromCodePoint(iG(e)?uG(e):e)}}_stateAfterDoctypeName(e){const t=this.currentToken;switch(e){case LH.SPACE:case LH.LINE_FEED:case LH.TABULATION:case LH.FORM_FEED:break;case LH.GREATER_THAN_SIGN:this.state=nG.DATA,this.emitCurrentDoctype(t);break;case LH.EOF:this._err($H.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:this._consumeSequenceIfMatch("public",!1)?this.state=nG.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch("system",!1)?this.state=nG.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err($H.invalidCharacterSequenceAfterDoctypeName),t.forceQuirks=!0,this.state=nG.BOGUS_DOCTYPE,this._stateBogusDoctype(e))}}_stateAfterDoctypePublicKeyword(e){const t=this.currentToken;switch(e){case LH.SPACE:case LH.LINE_FEED:case LH.TABULATION:case LH.FORM_FEED:this.state=nG.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break;case LH.QUOTATION_MARK:this._err($H.missingWhitespaceAfterDoctypePublicKeyword),t.publicId="",this.state=nG.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break;case LH.APOSTROPHE:this._err($H.missingWhitespaceAfterDoctypePublicKeyword),t.publicId="",this.state=nG.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break;case LH.GREATER_THAN_SIGN:this._err($H.missingDoctypePublicIdentifier),t.forceQuirks=!0,this.state=nG.DATA,this.emitCurrentDoctype(t);break;case LH.EOF:this._err($H.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:this._err($H.missingQuoteBeforeDoctypePublicIdentifier),t.forceQuirks=!0,this.state=nG.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBeforeDoctypePublicIdentifier(e){const t=this.currentToken;switch(e){case LH.SPACE:case LH.LINE_FEED:case LH.TABULATION:case LH.FORM_FEED:break;case LH.QUOTATION_MARK:t.publicId="",this.state=nG.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break;case LH.APOSTROPHE:t.publicId="",this.state=nG.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break;case LH.GREATER_THAN_SIGN:this._err($H.missingDoctypePublicIdentifier),t.forceQuirks=!0,this.state=nG.DATA,this.emitCurrentDoctype(t);break;case LH.EOF:this._err($H.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:this._err($H.missingQuoteBeforeDoctypePublicIdentifier),t.forceQuirks=!0,this.state=nG.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateDoctypePublicIdentifierDoubleQuoted(e){const t=this.currentToken;switch(e){case LH.QUOTATION_MARK:this.state=nG.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break;case LH.NULL:this._err($H.unexpectedNullCharacter),t.publicId+=PH;break;case LH.GREATER_THAN_SIGN:this._err($H.abruptDoctypePublicIdentifier),t.forceQuirks=!0,this.emitCurrentDoctype(t),this.state=nG.DATA;break;case LH.EOF:this._err($H.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:t.publicId+=String.fromCodePoint(e)}}_stateDoctypePublicIdentifierSingleQuoted(e){const t=this.currentToken;switch(e){case LH.APOSTROPHE:this.state=nG.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break;case LH.NULL:this._err($H.unexpectedNullCharacter),t.publicId+=PH;break;case LH.GREATER_THAN_SIGN:this._err($H.abruptDoctypePublicIdentifier),t.forceQuirks=!0,this.emitCurrentDoctype(t),this.state=nG.DATA;break;case LH.EOF:this._err($H.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:t.publicId+=String.fromCodePoint(e)}}_stateAfterDoctypePublicIdentifier(e){const t=this.currentToken;switch(e){case LH.SPACE:case LH.LINE_FEED:case LH.TABULATION:case LH.FORM_FEED:this.state=nG.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break;case LH.GREATER_THAN_SIGN:this.state=nG.DATA,this.emitCurrentDoctype(t);break;case LH.QUOTATION_MARK:this._err($H.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),t.systemId="",this.state=nG.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break;case LH.APOSTROPHE:this._err($H.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),t.systemId="",this.state=nG.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break;case LH.EOF:this._err($H.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:this._err($H.missingQuoteBeforeDoctypeSystemIdentifier),t.forceQuirks=!0,this.state=nG.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBetweenDoctypePublicAndSystemIdentifiers(e){const t=this.currentToken;switch(e){case LH.SPACE:case LH.LINE_FEED:case LH.TABULATION:case LH.FORM_FEED:break;case LH.GREATER_THAN_SIGN:this.emitCurrentDoctype(t),this.state=nG.DATA;break;case LH.QUOTATION_MARK:t.systemId="",this.state=nG.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break;case LH.APOSTROPHE:t.systemId="",this.state=nG.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break;case LH.EOF:this._err($H.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:this._err($H.missingQuoteBeforeDoctypeSystemIdentifier),t.forceQuirks=!0,this.state=nG.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateAfterDoctypeSystemKeyword(e){const t=this.currentToken;switch(e){case LH.SPACE:case LH.LINE_FEED:case LH.TABULATION:case LH.FORM_FEED:this.state=nG.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break;case LH.QUOTATION_MARK:this._err($H.missingWhitespaceAfterDoctypeSystemKeyword),t.systemId="",this.state=nG.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break;case LH.APOSTROPHE:this._err($H.missingWhitespaceAfterDoctypeSystemKeyword),t.systemId="",this.state=nG.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break;case LH.GREATER_THAN_SIGN:this._err($H.missingDoctypeSystemIdentifier),t.forceQuirks=!0,this.state=nG.DATA,this.emitCurrentDoctype(t);break;case LH.EOF:this._err($H.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:this._err($H.missingQuoteBeforeDoctypeSystemIdentifier),t.forceQuirks=!0,this.state=nG.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBeforeDoctypeSystemIdentifier(e){const t=this.currentToken;switch(e){case LH.SPACE:case LH.LINE_FEED:case LH.TABULATION:case LH.FORM_FEED:break;case LH.QUOTATION_MARK:t.systemId="",this.state=nG.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break;case LH.APOSTROPHE:t.systemId="",this.state=nG.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break;case LH.GREATER_THAN_SIGN:this._err($H.missingDoctypeSystemIdentifier),t.forceQuirks=!0,this.state=nG.DATA,this.emitCurrentDoctype(t);break;case LH.EOF:this._err($H.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:this._err($H.missingQuoteBeforeDoctypeSystemIdentifier),t.forceQuirks=!0,this.state=nG.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateDoctypeSystemIdentifierDoubleQuoted(e){const t=this.currentToken;switch(e){case LH.QUOTATION_MARK:this.state=nG.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break;case LH.NULL:this._err($H.unexpectedNullCharacter),t.systemId+=PH;break;case LH.GREATER_THAN_SIGN:this._err($H.abruptDoctypeSystemIdentifier),t.forceQuirks=!0,this.emitCurrentDoctype(t),this.state=nG.DATA;break;case LH.EOF:this._err($H.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:t.systemId+=String.fromCodePoint(e)}}_stateDoctypeSystemIdentifierSingleQuoted(e){const t=this.currentToken;switch(e){case LH.APOSTROPHE:this.state=nG.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break;case LH.NULL:this._err($H.unexpectedNullCharacter),t.systemId+=PH;break;case LH.GREATER_THAN_SIGN:this._err($H.abruptDoctypeSystemIdentifier),t.forceQuirks=!0,this.emitCurrentDoctype(t),this.state=nG.DATA;break;case LH.EOF:this._err($H.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:t.systemId+=String.fromCodePoint(e)}}_stateAfterDoctypeSystemIdentifier(e){const t=this.currentToken;switch(e){case LH.SPACE:case LH.LINE_FEED:case LH.TABULATION:case LH.FORM_FEED:break;case LH.GREATER_THAN_SIGN:this.emitCurrentDoctype(t),this.state=nG.DATA;break;case LH.EOF:this._err($H.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:this._err($H.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=nG.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBogusDoctype(e){const t=this.currentToken;switch(e){case LH.GREATER_THAN_SIGN:this.emitCurrentDoctype(t),this.state=nG.DATA;break;case LH.NULL:this._err($H.unexpectedNullCharacter);break;case LH.EOF:this.emitCurrentDoctype(t),this._emitEOFToken()}}_stateCdataSection(e){switch(e){case LH.RIGHT_SQUARE_BRACKET:this.state=nG.CDATA_SECTION_BRACKET;break;case LH.EOF:this._err($H.eofInCdata),this._emitEOFToken();break;default:this._emitCodePoint(e)}}_stateCdataSectionBracket(e){e===LH.RIGHT_SQUARE_BRACKET?this.state=nG.CDATA_SECTION_END:(this._emitChars("]"),this.state=nG.CDATA_SECTION,this._stateCdataSection(e))}_stateCdataSectionEnd(e){switch(e){case LH.GREATER_THAN_SIGN:this.state=nG.DATA;break;case LH.RIGHT_SQUARE_BRACKET:this._emitChars("]");break;default:this._emitChars("]]"),this.state=nG.CDATA_SECTION,this._stateCdataSection(e)}}_stateCharacterReference(e){e===LH.NUMBER_SIGN?this.state=nG.NUMERIC_CHARACTER_REFERENCE:aG(e)?(this.state=nG.NAMED_CHARACTER_REFERENCE,this._stateNamedCharacterReference(e)):(this._flushCodePointConsumedAsCharacterReference(LH.AMPERSAND),this._reconsumeInState(this.returnState,e))}_stateNamedCharacterReference(e){const t=this._matchNamedCharacterReference(e);if(this._ensureHibernation());else if(t){for(let e=0;t.length>e;e++)this._flushCodePointConsumedAsCharacterReference(t[e]);this.state=this.returnState}else this._flushCodePointConsumedAsCharacterReference(LH.AMPERSAND),this.state=nG.AMBIGUOUS_AMPERSAND}_stateAmbiguousAmpersand(e){aG(e)?this._flushCodePointConsumedAsCharacterReference(e):(e===LH.SEMICOLON&&this._err($H.unknownNamedCharacterReference),this._reconsumeInState(this.returnState,e))}_stateNumericCharacterReference(e){this.charRefCode=0,e===LH.LATIN_SMALL_X||e===LH.LATIN_CAPITAL_X?this.state=nG.HEXADEMICAL_CHARACTER_REFERENCE_START:sG(e)?(this.state=nG.DECIMAL_CHARACTER_REFERENCE,this._stateDecimalCharacterReference(e)):(this._err($H.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(LH.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(LH.NUMBER_SIGN),this._reconsumeInState(this.returnState,e))}_stateHexademicalCharacterReferenceStart(e){!function(e){return sG(e)||cG(e)||lG(e)}(e)?(this._err($H.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(LH.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(LH.NUMBER_SIGN),this._unconsume(2),this.state=this.returnState):(this.state=nG.HEXADEMICAL_CHARACTER_REFERENCE,this._stateHexademicalCharacterReference(e))}_stateHexademicalCharacterReference(e){cG(e)?this.charRefCode=16*this.charRefCode+e-55:lG(e)?this.charRefCode=16*this.charRefCode+e-87:sG(e)?this.charRefCode=16*this.charRefCode+e-48:e===LH.SEMICOLON?this.state=nG.NUMERIC_CHARACTER_REFERENCE_END:(this._err($H.missingSemicolonAfterCharacterReference),this.state=nG.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(e))}_stateDecimalCharacterReference(e){sG(e)?this.charRefCode=10*this.charRefCode+e-48:e===LH.SEMICOLON?this.state=nG.NUMERIC_CHARACTER_REFERENCE_END:(this._err($H.missingSemicolonAfterCharacterReference),this.state=nG.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(e))}_stateNumericCharacterReferenceEnd(e){if(this.charRefCode===LH.NULL)this._err($H.nullCharacterReference),this.charRefCode=LH.REPLACEMENT_CHARACTER;else if(this.charRefCode>1114111)this._err($H.characterReferenceOutsideUnicodeRange),this.charRefCode=LH.REPLACEMENT_CHARACTER;else if(BH(this.charRefCode))this._err($H.surrogateCharacterReference),this.charRefCode=LH.REPLACEMENT_CHARACTER;else if(FH(this.charRefCode))this._err($H.noncharacterCharacterReference);else if(jH(this.charRefCode)||this.charRefCode===LH.CARRIAGE_RETURN){this._err($H.controlCharacterReference);const e=tG.get(this.charRefCode);void 0!==e&&(this.charRefCode=e)}this._flushCodePointConsumedAsCharacterReference(this.charRefCode),this._reconsumeInState(this.returnState,e)}};const fG=new Set([VH.DD,VH.DT,VH.LI,VH.OPTGROUP,VH.OPTION,VH.P,VH.RB,VH.RP,VH.RT,VH.RTC]),mG=new Set([...fG,VH.CAPTION,VH.COLGROUP,VH.TBODY,VH.TD,VH.TFOOT,VH.TH,VH.THEAD,VH.TR]),gG=new Map([[VH.APPLET,HH.HTML],[VH.CAPTION,HH.HTML],[VH.HTML,HH.HTML],[VH.MARQUEE,HH.HTML],[VH.OBJECT,HH.HTML],[VH.TABLE,HH.HTML],[VH.TD,HH.HTML],[VH.TEMPLATE,HH.HTML],[VH.TH,HH.HTML],[VH.ANNOTATION_XML,HH.MATHML],[VH.MI,HH.MATHML],[VH.MN,HH.MATHML],[VH.MO,HH.MATHML],[VH.MS,HH.MATHML],[VH.MTEXT,HH.MATHML],[VH.DESC,HH.SVG],[VH.FOREIGN_OBJECT,HH.SVG],[VH.TITLE,HH.SVG]]),yG=[VH.H1,VH.H2,VH.H3,VH.H4,VH.H5,VH.H6],vG=[VH.TR,VH.TEMPLATE,VH.HTML],bG=[VH.TBODY,VH.TFOOT,VH.THEAD,VH.TEMPLATE,VH.HTML],EG=[VH.TABLE,VH.TEMPLATE,VH.HTML],_G=[VH.TD,VH.TH];class AG{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(e,t,n){this.treeAdapter=t,this.handler=n,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=VH.UNKNOWN,this.current=e}_indexOf(e){return this.items.lastIndexOf(e,this.stackTop)}_isInTemplate(){return this.currentTagId===VH.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===HH.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(e,t){this.stackTop++,this.items[this.stackTop]=e,this.current=e,this.tagIDs[this.stackTop]=t,this.currentTagId=t,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(e,t,!0)}pop(){const e=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(e,!0)}replace(e,t){const n=this._indexOf(e);this.items[n]=t,n===this.stackTop&&(this.current=t)}insertAfter(e,t,n){const r=this._indexOf(e)+1;this.items.splice(r,0,t),this.tagIDs.splice(r,0,n),this.stackTop++,r===this.stackTop&&this._updateCurrentElement(),this.handler.onItemPush(this.current,this.currentTagId,r===this.stackTop)}popUntilTagNamePopped(e){let t=this.stackTop+1;do{t=this.tagIDs.lastIndexOf(e,t-1)}while(t>0&&this.treeAdapter.getNamespaceURI(this.items[t])!==HH.HTML);this.shortenToLength(0>t?0:t)}shortenToLength(e){for(;this.stackTop>=e;){const t=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,e>this.stackTop)}}popUntilElementPopped(e){const t=this._indexOf(e);this.shortenToLength(0>t?0:t)}popUntilPopped(e,t){const n=this._indexOfTagNames(e,t);this.shortenToLength(0>n?0:n)}popUntilNumberedHeaderPopped(){this.popUntilPopped(yG,HH.HTML)}popUntilTableCellPopped(){this.popUntilPopped(_G,HH.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(e,t){for(let n=this.stackTop;n>=0;n--)if(e.includes(this.tagIDs[n])&&this.treeAdapter.getNamespaceURI(this.items[n])===t)return n;return-1}clearBackTo(e,t){const n=this._indexOfTagNames(e,t);this.shortenToLength(n+1)}clearBackToTableContext(){this.clearBackTo(EG,HH.HTML)}clearBackToTableBodyContext(){this.clearBackTo(bG,HH.HTML)}clearBackToTableRowContext(){this.clearBackTo(vG,HH.HTML)}remove(e){const t=this._indexOf(e);0>t||(t===this.stackTop?this.pop():(this.items.splice(t,1),this.tagIDs.splice(t,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(e,!1)))}tryPeekProperlyNestedBodyElement(){return 1>this.stackTop||this.tagIDs[1]!==VH.BODY?null:this.items[1]}contains(e){return this._indexOf(e)>-1}getCommonAncestor(e){const t=this._indexOf(e)-1;return 0>t?null:this.items[t]}isRootHtmlElementCurrent(){return 0===this.stackTop&&this.tagIDs[0]===VH.HTML}hasInScope(e){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t],r=this.treeAdapter.getNamespaceURI(this.items[t]);if(n===e&&r===HH.HTML)return!0;if(gG.get(n)===r)return!1}return!0}hasNumberedHeaderInScope(){for(let e=this.stackTop;e>=0;e--){const t=this.tagIDs[e],n=this.treeAdapter.getNamespaceURI(this.items[e]);if(ZH(t)&&n===HH.HTML)return!0;if(gG.get(t)===n)return!1}return!0}hasInListItemScope(e){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t],r=this.treeAdapter.getNamespaceURI(this.items[t]);if(n===e&&r===HH.HTML)return!0;if((n===VH.UL||n===VH.OL)&&r===HH.HTML||gG.get(n)===r)return!1}return!0}hasInButtonScope(e){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t],r=this.treeAdapter.getNamespaceURI(this.items[t]);if(n===e&&r===HH.HTML)return!0;if(n===VH.BUTTON&&r===HH.HTML||gG.get(n)===r)return!1}return!0}hasInTableScope(e){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t];if(this.treeAdapter.getNamespaceURI(this.items[t])===HH.HTML){if(n===e)return!0;if(n===VH.TABLE||n===VH.TEMPLATE||n===VH.HTML)return!1}}return!0}hasTableBodyContextInTableScope(){for(let e=this.stackTop;e>=0;e--){const t=this.tagIDs[e];if(this.treeAdapter.getNamespaceURI(this.items[e])===HH.HTML){if(t===VH.TBODY||t===VH.THEAD||t===VH.TFOOT)return!0;if(t===VH.TABLE||t===VH.HTML)return!1}}return!0}hasInSelectScope(e){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t];if(this.treeAdapter.getNamespaceURI(this.items[t])===HH.HTML){if(n===e)return!0;if(n!==VH.OPTION&&n!==VH.OPTGROUP)return!1}}return!0}generateImpliedEndTags(){for(;fG.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;mG.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(e){for(;this.currentTagId!==e&&mG.has(this.currentTagId);)this.pop()}}var SG;!function(e){e[e.Marker=0]="Marker",e[e.Element=1]="Element"}(SG=SG||(SG={}));const TG={type:SG.Marker};class wG{constructor(e){this.treeAdapter=e,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(e,t){const n=[],r=t.length,s=this.treeAdapter.getTagName(e),i=this.treeAdapter.getNamespaceURI(e);for(let e=0;this.entries.length>e;e++){const t=this.entries[e];if(t.type===SG.Marker)break;const{element:o}=t;if(this.treeAdapter.getTagName(o)===s&&this.treeAdapter.getNamespaceURI(o)===i){const t=this.treeAdapter.getAttrList(o);t.length===r&&n.push({idx:e,attrs:t})}}return n}_ensureNoahArkCondition(e){if(3>this.entries.length)return;const t=this.treeAdapter.getAttrList(e),n=this._getNoahArkConditionCandidates(e,t);if(3>n.length)return;const r=new Map(t.map((e=>[e.name,e.value])));let s=0;for(let e=0;n.length>e;e++){const t=n[e];t.attrs.every((e=>r.get(e.name)===e.value))&&(s+=1,3>s||this.entries.splice(t.idx,1))}}insertMarker(){this.entries.unshift(TG)}pushElement(e,t){this._ensureNoahArkCondition(e),this.entries.unshift({type:SG.Element,element:e,token:t})}insertElementAfterBookmark(e,t){const n=this.entries.indexOf(this.bookmark);this.entries.splice(n,0,{type:SG.Element,element:e,token:t})}removeEntry(e){const t=this.entries.indexOf(e);0>t||this.entries.splice(t,1)}clearToLastMarker(){const e=this.entries.indexOf(TG);0>e?this.entries.length=0:this.entries.splice(0,e+1)}getElementEntryInScopeWithTagName(e){const t=this.entries.find((t=>t.type===SG.Marker||this.treeAdapter.getTagName(t.element)===e));return t&&t.type===SG.Element?t:null}getElementEntry(e){return this.entries.find((t=>t.type===SG.Element&&t.element===e))}}function xG(e){return{nodeName:"#text",value:e,parentNode:null}}const kG={createDocument:()=>({nodeName:"#document",mode:qH.NO_QUIRKS,childNodes:[]}),createDocumentFragment:()=>({nodeName:"#document-fragment",childNodes:[]}),createElement:(e,t,n)=>({nodeName:e,tagName:e,attrs:n,namespaceURI:t,childNodes:[],parentNode:null}),createCommentNode:e=>({nodeName:"#comment",data:e,parentNode:null}),appendChild(e,t){e.childNodes.push(t),t.parentNode=e},insertBefore(e,t,n){const r=e.childNodes.indexOf(n);e.childNodes.splice(r,0,t),t.parentNode=e},setTemplateContent(e,t){e.content=t},getTemplateContent:e=>e.content,setDocumentType(e,t,n,r){const s=e.childNodes.find((e=>"#documentType"===e.nodeName));s?(s.name=t,s.publicId=n,s.systemId=r):kG.appendChild(e,{nodeName:"#documentType",name:t,publicId:n,systemId:r,parentNode:null})},setDocumentMode(e,t){e.mode=t},getDocumentMode:e=>e.mode,detachNode(e){if(e.parentNode){const t=e.parentNode.childNodes.indexOf(e);e.parentNode.childNodes.splice(t,1),e.parentNode=null}},insertText(e,t){if(e.childNodes.length>0){const n=e.childNodes[e.childNodes.length-1];if(kG.isTextNode(n))return void(n.value+=t)}kG.appendChild(e,xG(t))},insertTextBefore(e,t,n){const r=e.childNodes[e.childNodes.indexOf(n)-1];r&&kG.isTextNode(r)?r.value+=t:kG.insertBefore(e,xG(t),n)},adoptAttributes(e,t){const n=new Set(e.attrs.map((e=>e.name)));for(let r=0;t.length>r;r++)n.has(t[r].name)||e.attrs.push(t[r])},getFirstChild:e=>e.childNodes[0],getChildNodes:e=>e.childNodes,getParentNode:e=>e.parentNode,getAttrList:e=>e.attrs,getTagName:e=>e.tagName,getNamespaceURI:e=>e.namespaceURI,getTextNodeContent:e=>e.value,getCommentNodeContent:e=>e.data,getDocumentTypeNodeName:e=>e.name,getDocumentTypeNodePublicId:e=>e.publicId,getDocumentTypeNodeSystemId:e=>e.systemId,isTextNode:e=>"#text"===e.nodeName,isCommentNode:e=>"#comment"===e.nodeName,isDocumentTypeNode:e=>"#documentType"===e.nodeName,isElementNode:e=>({}.hasOwnProperty.call(e,"tagName")),setNodeSourceCodeLocation(e,t){e.sourceCodeLocation=t},getNodeSourceCodeLocation:e=>e.sourceCodeLocation,updateNodeSourceCodeLocation(e,t){e.sourceCodeLocation={...e.sourceCodeLocation,...t}}},CG="html",IG=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],RG=[...IG,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],OG=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),NG=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],DG=[...NG,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function PG(e,t){return t.some((t=>e.startsWith(t)))}const LG="definitionurl",MG="definitionURL",BG=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map((e=>[e.toLowerCase(),e]))),jG=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:HH.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:HH.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:HH.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:HH.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:HH.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:HH.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:HH.XLINK}],["xml:base",{prefix:"xml",name:"base",namespace:HH.XML}],["xml:lang",{prefix:"xml",name:"lang",namespace:HH.XML}],["xml:space",{prefix:"xml",name:"space",namespace:HH.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:HH.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:HH.XMLNS}]]),FG=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map((e=>[e.toLowerCase(),e]))),$G=new Set([VH.B,VH.BIG,VH.BLOCKQUOTE,VH.BODY,VH.BR,VH.CENTER,VH.CODE,VH.DD,VH.DIV,VH.DL,VH.DT,VH.EM,VH.EMBED,VH.H1,VH.H2,VH.H3,VH.H4,VH.H5,VH.H6,VH.HEAD,VH.HR,VH.I,VH.IMG,VH.LI,VH.LISTING,VH.MENU,VH.META,VH.NOBR,VH.OL,VH.P,VH.PRE,VH.RUBY,VH.S,VH.SMALL,VH.SPAN,VH.STRONG,VH.STRIKE,VH.SUB,VH.SUP,VH.TABLE,VH.TT,VH.U,VH.UL,VH.VAR]);function UG(e){for(let t=0;e.attrs.length>t;t++)if(e.attrs[t].name===LG){e.attrs[t].name=MG;break}}function HG(e){for(let t=0;e.attrs.length>t;t++){const n=BG.get(e.attrs[t].name);null!=n&&(e.attrs[t].name=n)}}function GG(e){for(let t=0;e.attrs.length>t;t++){const n=jG.get(e.attrs[t].name);n&&(e.attrs[t].prefix=n.prefix,e.attrs[t].name=n.name,e.attrs[t].namespace=n.namespace)}}const qG="hidden",zG=8,VG=3;var YG;!function(e){e[e.INITIAL=0]="INITIAL",e[e.BEFORE_HTML=1]="BEFORE_HTML",e[e.BEFORE_HEAD=2]="BEFORE_HEAD",e[e.IN_HEAD=3]="IN_HEAD",e[e.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",e[e.AFTER_HEAD=5]="AFTER_HEAD",e[e.IN_BODY=6]="IN_BODY",e[e.TEXT=7]="TEXT",e[e.IN_TABLE=8]="IN_TABLE",e[e.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",e[e.IN_CAPTION=10]="IN_CAPTION",e[e.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",e[e.IN_TABLE_BODY=12]="IN_TABLE_BODY",e[e.IN_ROW=13]="IN_ROW",e[e.IN_CELL=14]="IN_CELL",e[e.IN_SELECT=15]="IN_SELECT",e[e.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",e[e.IN_TEMPLATE=17]="IN_TEMPLATE",e[e.AFTER_BODY=18]="AFTER_BODY",e[e.IN_FRAMESET=19]="IN_FRAMESET",e[e.AFTER_FRAMESET=20]="AFTER_FRAMESET",e[e.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",e[e.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"}(YG||(YG={}));const KG={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},QG=new Set([VH.TABLE,VH.TBODY,VH.TFOOT,VH.THEAD,VH.TR]),WG={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:kG,onParseError:null};let JG=class{constructor(e,t,n=null,r=null){this.fragmentContext=n,this.scriptHandler=r,this.currentToken=null,this.stopped=!1,this.insertionMode=YG.INITIAL,this.originalInsertionMode=YG.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options={...WG,...e},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=null!=t?t:this.treeAdapter.createDocument(),this.tokenizer=new hG(this.options,this),this.activeFormattingElements=new wG(this.treeAdapter),this.fragmentContextID=n?WH(this.treeAdapter.getTagName(n)):VH.UNKNOWN,this._setContextModes(null!=n?n:this.document,this.fragmentContextID),this.openElements=new AG(this.document,this.treeAdapter,this)}static parse(e,t){const n=new this(t);return n.tokenizer.write(e,!0),n.document}static getFragmentParser(e,t){const n={...WG,...t};null!=e||(e=n.treeAdapter.createElement(zH.TEMPLATE,HH.HTML,[]));const r=n.treeAdapter.createElement("documentmock",HH.HTML,[]),s=new this(n,r,e);return s.fragmentContextID===VH.TEMPLATE&&s.tmplInsertionModeStack.unshift(YG.IN_TEMPLATE),s._initTokenizerForFragmentParsing(),s._insertFakeRootElement(),s._resetInsertionMode(),s._findFormInFragmentContext(),s}getFragment(){const e=this.treeAdapter.getFirstChild(this.document),t=this.treeAdapter.createDocumentFragment();return this._adoptNodes(e,t),t}_err(e,t,n){var r;if(!this.onParseError)return;const s=null!==(r=e.location)&&void 0!==r?r:KG;this.onParseError({code:t,startLine:s.startLine,startCol:s.startCol,startOffset:s.startOffset,endLine:n?s.startLine:s.endLine,endCol:n?s.startCol:s.endCol,endOffset:n?s.startOffset:s.endOffset})}onItemPush(e,t,n){var r,s;null===(s=(r=this.treeAdapter).onItemPush)||void 0===s||s.call(r,e),n&&this.openElements.stackTop>0&&this._setContextModes(e,t)}onItemPop(e,t){var n,r;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(e,this.currentToken),null===(r=(n=this.treeAdapter).onItemPop)||void 0===r||r.call(n,e,this.openElements.current),t){let e,t;0===this.openElements.stackTop&&this.fragmentContext?(e=this.fragmentContext,t=this.fragmentContextID):({current:e,currentTagId:t}=this.openElements),this._setContextModes(e,t)}}_setContextModes(e,t){const n=e===this.document||this.treeAdapter.getNamespaceURI(e)===HH.HTML;this.currentNotInHTML=!n,this.tokenizer.inForeignNode=!n&&!this._isIntegrationPoint(t,e)}_switchToTextParsing(e,t){this._insertElement(e,HH.HTML),this.tokenizer.state=t,this.originalInsertionMode=this.insertionMode,this.insertionMode=YG.TEXT}switchToPlaintextParsing(){this.insertionMode=YG.TEXT,this.originalInsertionMode=YG.IN_BODY,this.tokenizer.state=rG.PLAINTEXT}_getAdjustedCurrentElement(){return 0===this.openElements.stackTop&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let e=this.fragmentContext;for(;e;){if(this.treeAdapter.getTagName(e)===zH.FORM){this.formElement=e;break}e=this.treeAdapter.getParentNode(e)}}_initTokenizerForFragmentParsing(){if(this.fragmentContext&&this.treeAdapter.getNamespaceURI(this.fragmentContext)===HH.HTML)switch(this.fragmentContextID){case VH.TITLE:case VH.TEXTAREA:this.tokenizer.state=rG.RCDATA;break;case VH.STYLE:case VH.XMP:case VH.IFRAME:case VH.NOEMBED:case VH.NOFRAMES:case VH.NOSCRIPT:this.tokenizer.state=rG.RAWTEXT;break;case VH.SCRIPT:this.tokenizer.state=rG.SCRIPT_DATA;break;case VH.PLAINTEXT:this.tokenizer.state=rG.PLAINTEXT}}_setDocumentType(e){if(this.treeAdapter.setDocumentType(this.document,e.name||"",e.publicId||"",e.systemId||""),e.location){const t=this.treeAdapter.getChildNodes(this.document).find((e=>this.treeAdapter.isDocumentTypeNode(e)));t&&this.treeAdapter.setNodeSourceCodeLocation(t,e.location)}}_attachElementToTree(e,t){if(this.options.sourceCodeLocationInfo){const n=t&&{...t,startTag:t};this.treeAdapter.setNodeSourceCodeLocation(e,n)}this._shouldFosterParentOnInsertion()?this._fosterParentElement(e):this.treeAdapter.appendChild(this.openElements.currentTmplContentOrNode,e)}_appendElement(e,t){const n=this.treeAdapter.createElement(e.tagName,t,e.attrs);this._attachElementToTree(n,e.location)}_insertElement(e,t){const n=this.treeAdapter.createElement(e.tagName,t,e.attrs);this._attachElementToTree(n,e.location),this.openElements.push(n,e.tagID)}_insertFakeElement(e,t){const n=this.treeAdapter.createElement(e,HH.HTML,[]);this._attachElementToTree(n,null),this.openElements.push(n,t)}_insertTemplate(e){const t=this.treeAdapter.createElement(e.tagName,HH.HTML,e.attrs),n=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(t,n),this._attachElementToTree(t,e.location),this.openElements.push(t,e.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(n,null)}_insertFakeRootElement(){const e=this.treeAdapter.createElement(zH.HTML,HH.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(e,null),this.treeAdapter.appendChild(this.openElements.current,e),this.openElements.push(e,VH.HTML)}_appendCommentNode(e,t){const n=this.treeAdapter.createCommentNode(e.data);this.treeAdapter.appendChild(t,n),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(n,e.location)}_insertCharacters(e){let t,n;if(this._shouldFosterParentOnInsertion()?(({parent:t,beforeElement:n}=this._findFosterParentingLocation()),n?this.treeAdapter.insertTextBefore(t,e.chars,n):this.treeAdapter.insertText(t,e.chars)):(t=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(t,e.chars)),!e.location)return;const r=this.treeAdapter.getChildNodes(t),s=n?r.lastIndexOf(n):r.length,i=r[s-1];if(this.treeAdapter.getNodeSourceCodeLocation(i)){const{endLine:t,endCol:n,endOffset:r}=e.location;this.treeAdapter.updateNodeSourceCodeLocation(i,{endLine:t,endCol:n,endOffset:r})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(i,e.location)}_adoptNodes(e,t){for(let n=this.treeAdapter.getFirstChild(e);n;n=this.treeAdapter.getFirstChild(e))this.treeAdapter.detachNode(n),this.treeAdapter.appendChild(t,n)}_setEndLocation(e,t){if(this.treeAdapter.getNodeSourceCodeLocation(e)&&t.location){const n=t.location,r=this.treeAdapter.getTagName(e),s=t.type===UH.END_TAG&&r===t.tagName?{endTag:{...n},endLine:n.endLine,endCol:n.endCol,endOffset:n.endOffset}:{endLine:n.startLine,endCol:n.startCol,endOffset:n.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(e,s)}}shouldProcessStartTagTokenInForeignContent(e){if(!this.currentNotInHTML)return!1;let t,n;return 0===this.openElements.stackTop&&this.fragmentContext?(t=this.fragmentContext,n=this.fragmentContextID):({current:t,currentTagId:n}=this.openElements),(e.tagID!==VH.SVG||this.treeAdapter.getTagName(t)!==zH.ANNOTATION_XML||this.treeAdapter.getNamespaceURI(t)!==HH.MATHML)&&(this.tokenizer.inForeignNode||(e.tagID===VH.MGLYPH||e.tagID===VH.MALIGNMARK)&&!this._isIntegrationPoint(n,t,HH.HTML))}_processToken(e){switch(e.type){case UH.CHARACTER:this.onCharacter(e);break;case UH.NULL_CHARACTER:this.onNullCharacter(e);break;case UH.COMMENT:this.onComment(e);break;case UH.DOCTYPE:this.onDoctype(e);break;case UH.START_TAG:this._processStartTag(e);break;case UH.END_TAG:this.onEndTag(e);break;case UH.EOF:this.onEof(e);break;case UH.WHITESPACE_CHARACTER:this.onWhitespaceCharacter(e)}}_isIntegrationPoint(e,t,n){return function(e,t,n,r){return(!r||r===HH.HTML)&&function(e,t,n){if(t===HH.MATHML&&e===VH.ANNOTATION_XML)for(let e=0;n.length>e;e++)if(n[e].name===GH.ENCODING){const t=n[e].value.toLowerCase();return"text/html"===t||"application/xhtml+xml"===t}return t===HH.SVG&&(e===VH.FOREIGN_OBJECT||e===VH.DESC||e===VH.TITLE)}(e,t,n)||(!r||r===HH.MATHML)&&function(e,t){return t===HH.MATHML&&(e===VH.MI||e===VH.MO||e===VH.MN||e===VH.MS||e===VH.MTEXT)}(e,t)}(e,this.treeAdapter.getNamespaceURI(t),this.treeAdapter.getAttrList(t),n)}_reconstructActiveFormattingElements(){const e=this.activeFormattingElements.entries.length;if(e){const t=this.activeFormattingElements.entries.findIndex((e=>e.type===SG.Marker||this.openElements.contains(e.element)));for(let n=0>t?e-1:t-1;n>=0;n--){const e=this.activeFormattingElements.entries[n];this._insertElement(e.token,this.treeAdapter.getNamespaceURI(e.element)),e.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=YG.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(VH.P),this.openElements.popUntilTagNamePopped(VH.P)}_resetInsertionMode(){for(let e=this.openElements.stackTop;e>=0;e--)switch(0===e&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[e]){case VH.TR:return void(this.insertionMode=YG.IN_ROW);case VH.TBODY:case VH.THEAD:case VH.TFOOT:return void(this.insertionMode=YG.IN_TABLE_BODY);case VH.CAPTION:return void(this.insertionMode=YG.IN_CAPTION);case VH.COLGROUP:return void(this.insertionMode=YG.IN_COLUMN_GROUP);case VH.TABLE:return void(this.insertionMode=YG.IN_TABLE);case VH.BODY:return void(this.insertionMode=YG.IN_BODY);case VH.FRAMESET:return void(this.insertionMode=YG.IN_FRAMESET);case VH.SELECT:return void this._resetInsertionModeForSelect(e);case VH.TEMPLATE:return void(this.insertionMode=this.tmplInsertionModeStack[0]);case VH.HTML:return void(this.insertionMode=this.headElement?YG.AFTER_HEAD:YG.BEFORE_HEAD);case VH.TD:case VH.TH:if(e>0)return void(this.insertionMode=YG.IN_CELL);break;case VH.HEAD:if(e>0)return void(this.insertionMode=YG.IN_HEAD)}this.insertionMode=YG.IN_BODY}_resetInsertionModeForSelect(e){if(e>0)for(let t=e-1;t>0;t--){const e=this.openElements.tagIDs[t];if(e===VH.TEMPLATE)break;if(e===VH.TABLE)return void(this.insertionMode=YG.IN_SELECT_IN_TABLE)}this.insertionMode=YG.IN_SELECT}_isElementCausesFosterParenting(e){return QG.has(e)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let e=this.openElements.stackTop;e>=0;e--){const t=this.openElements.items[e];switch(this.openElements.tagIDs[e]){case VH.TEMPLATE:if(this.treeAdapter.getNamespaceURI(t)===HH.HTML)return{parent:this.treeAdapter.getTemplateContent(t),beforeElement:null};break;case VH.TABLE:{const n=this.treeAdapter.getParentNode(t);return n?{parent:n,beforeElement:t}:{parent:this.openElements.items[e-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(e){const t=this._findFosterParentingLocation();t.beforeElement?this.treeAdapter.insertBefore(t.parent,e,t.beforeElement):this.treeAdapter.appendChild(t.parent,e)}_isSpecialElement(e,t){const n=this.treeAdapter.getNamespaceURI(e);return XH[n].has(t)}onCharacter(e){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode)!function(e,t){e._insertCharacters(t),e.framesetOk=!1}(this,e);else switch(this.insertionMode){case YG.INITIAL:aq(this,e);break;case YG.BEFORE_HTML:cq(this,e);break;case YG.BEFORE_HEAD:lq(this,e);break;case YG.IN_HEAD:dq(this,e);break;case YG.IN_HEAD_NO_SCRIPT:hq(this,e);break;case YG.AFTER_HEAD:fq(this,e);break;case YG.IN_BODY:case YG.IN_CAPTION:case YG.IN_CELL:case YG.IN_TEMPLATE:yq(this,e);break;case YG.TEXT:case YG.IN_SELECT:case YG.IN_SELECT_IN_TABLE:this._insertCharacters(e);break;case YG.IN_TABLE:case YG.IN_TABLE_BODY:case YG.IN_ROW:xq(this,e);break;case YG.IN_TABLE_TEXT:Oq(this,e);break;case YG.IN_COLUMN_GROUP:Lq(this,e);break;case YG.AFTER_BODY:qq(this,e);break;case YG.AFTER_AFTER_BODY:zq(this,e)}}onNullCharacter(e){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode)!function(e,t){t.chars=PH,e._insertCharacters(t)}(this,e);else switch(this.insertionMode){case YG.INITIAL:aq(this,e);break;case YG.BEFORE_HTML:cq(this,e);break;case YG.BEFORE_HEAD:lq(this,e);break;case YG.IN_HEAD:dq(this,e);break;case YG.IN_HEAD_NO_SCRIPT:hq(this,e);break;case YG.AFTER_HEAD:fq(this,e);break;case YG.TEXT:this._insertCharacters(e);break;case YG.IN_TABLE:case YG.IN_TABLE_BODY:case YG.IN_ROW:xq(this,e);break;case YG.IN_COLUMN_GROUP:Lq(this,e);break;case YG.AFTER_BODY:qq(this,e);break;case YG.AFTER_AFTER_BODY:zq(this,e)}}onComment(e){if(this.skipNextNewLine=!1,this.currentNotInHTML)iq(this,e);else switch(this.insertionMode){case YG.INITIAL:case YG.BEFORE_HTML:case YG.BEFORE_HEAD:case YG.IN_HEAD:case YG.IN_HEAD_NO_SCRIPT:case YG.AFTER_HEAD:case YG.IN_BODY:case YG.IN_TABLE:case YG.IN_CAPTION:case YG.IN_COLUMN_GROUP:case YG.IN_TABLE_BODY:case YG.IN_ROW:case YG.IN_CELL:case YG.IN_SELECT:case YG.IN_SELECT_IN_TABLE:case YG.IN_TEMPLATE:case YG.IN_FRAMESET:case YG.AFTER_FRAMESET:iq(this,e);break;case YG.IN_TABLE_TEXT:Nq(this,e);break;case YG.AFTER_BODY:!function(e,t){e._appendCommentNode(t,e.openElements.items[0])}(this,e);break;case YG.AFTER_AFTER_BODY:case YG.AFTER_AFTER_FRAMESET:!function(e,t){e._appendCommentNode(t,e.document)}(this,e)}}onDoctype(e){switch(this.skipNextNewLine=!1,this.insertionMode){case YG.INITIAL:!function(e,t){e._setDocumentType(t);const n=t.forceQuirks?qH.QUIRKS:function(e){if(e.name!==CG)return qH.QUIRKS;const{systemId:t}=e;if(t&&"http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd"===t.toLowerCase())return qH.QUIRKS;let{publicId:n}=e;if(null!==n){if(n=n.toLowerCase(),OG.has(n))return qH.QUIRKS;let e=null===t?RG:IG;if(PG(n,e))return qH.QUIRKS;if(e=null===t?NG:DG,PG(n,e))return qH.LIMITED_QUIRKS}return qH.NO_QUIRKS}(t);(function(e){return e.name===CG&&null===e.publicId&&(null===e.systemId||"about:legacy-compat"===e.systemId)})(t)||e._err(t,$H.nonConformingDoctype),e.treeAdapter.setDocumentMode(e.document,n),e.insertionMode=YG.BEFORE_HTML}(this,e);break;case YG.BEFORE_HEAD:case YG.IN_HEAD:case YG.IN_HEAD_NO_SCRIPT:case YG.AFTER_HEAD:this._err(e,$H.misplacedDoctype);break;case YG.IN_TABLE_TEXT:Nq(this,e)}}onStartTag(e){this.skipNextNewLine=!1,this.currentToken=e,this._processStartTag(e),e.selfClosing&&!e.ackSelfClosing&&this._err(e,$H.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(e){this.shouldProcessStartTagTokenInForeignContent(e)?function(e,t){if(function(e){const t=e.tagID;return t===VH.FONT&&e.attrs.some((({name:e})=>e===GH.COLOR||e===GH.SIZE||e===GH.FACE))||$G.has(t)}(t))Vq(e),e._startTagOutsideForeignContent(t);else{const n=e._getAdjustedCurrentElement(),r=e.treeAdapter.getNamespaceURI(n);r===HH.MATHML?UG(t):r===HH.SVG&&(function(e){const t=FG.get(e.tagName);null!=t&&(e.tagName=t,e.tagID=WH(e.tagName))}(t),HG(t)),GG(t),t.selfClosing?e._appendElement(t,r):e._insertElement(t,r),t.ackSelfClosing=!0}}(this,e):this._startTagOutsideForeignContent(e)}_startTagOutsideForeignContent(e){switch(this.insertionMode){case YG.INITIAL:aq(this,e);break;case YG.BEFORE_HTML:!function(e,t){t.tagID===VH.HTML?(e._insertElement(t,HH.HTML),e.insertionMode=YG.BEFORE_HEAD):cq(e,t)}(this,e);break;case YG.BEFORE_HEAD:!function(e,t){switch(t.tagID){case VH.HTML:Aq(e,t);break;case VH.HEAD:e._insertElement(t,HH.HTML),e.headElement=e.openElements.current,e.insertionMode=YG.IN_HEAD;break;default:lq(e,t)}}(this,e);break;case YG.IN_HEAD:uq(this,e);break;case YG.IN_HEAD_NO_SCRIPT:!function(e,t){switch(t.tagID){case VH.HTML:Aq(e,t);break;case VH.BASEFONT:case VH.BGSOUND:case VH.HEAD:case VH.LINK:case VH.META:case VH.NOFRAMES:case VH.STYLE:uq(e,t);break;case VH.NOSCRIPT:e._err(t,$H.nestedNoscriptInHead);break;default:hq(e,t)}}(this,e);break;case YG.AFTER_HEAD:!function(e,t){switch(t.tagID){case VH.HTML:Aq(e,t);break;case VH.BODY:e._insertElement(t,HH.HTML),e.framesetOk=!1,e.insertionMode=YG.IN_BODY;break;case VH.FRAMESET:e._insertElement(t,HH.HTML),e.insertionMode=YG.IN_FRAMESET;break;case VH.BASE:case VH.BASEFONT:case VH.BGSOUND:case VH.LINK:case VH.META:case VH.NOFRAMES:case VH.SCRIPT:case VH.STYLE:case VH.TEMPLATE:case VH.TITLE:e._err(t,$H.abandonedHeadElementChild),e.openElements.push(e.headElement,VH.HEAD),uq(e,t),e.openElements.remove(e.headElement);break;case VH.HEAD:e._err(t,$H.misplacedStartTagForHeadElement);break;default:fq(e,t)}}(this,e);break;case YG.IN_BODY:Aq(this,e);break;case YG.IN_TABLE:kq(this,e);break;case YG.IN_TABLE_TEXT:Nq(this,e);break;case YG.IN_CAPTION:!function(e,t){Dq.has(t.tagID)?e.openElements.hasInTableScope(VH.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(VH.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=YG.IN_TABLE,kq(e,t)):Aq(e,t)}(this,e);break;case YG.IN_COLUMN_GROUP:Pq(this,e);break;case YG.IN_TABLE_BODY:Mq(this,e);break;case YG.IN_ROW:jq(this,e);break;case YG.IN_CELL:!function(e,t){Dq.has(t.tagID)?(e.openElements.hasInTableScope(VH.TD)||e.openElements.hasInTableScope(VH.TH))&&(e._closeTableCell(),jq(e,t)):Aq(e,t)}(this,e);break;case YG.IN_SELECT:$q(this,e);break;case YG.IN_SELECT_IN_TABLE:!function(e,t){const n=t.tagID;n===VH.CAPTION||n===VH.TABLE||n===VH.TBODY||n===VH.TFOOT||n===VH.THEAD||n===VH.TR||n===VH.TD||n===VH.TH?(e.openElements.popUntilTagNamePopped(VH.SELECT),e._resetInsertionMode(),e._processStartTag(t)):$q(e,t)}(this,e);break;case YG.IN_TEMPLATE:!function(e,t){switch(t.tagID){case VH.BASE:case VH.BASEFONT:case VH.BGSOUND:case VH.LINK:case VH.META:case VH.NOFRAMES:case VH.SCRIPT:case VH.STYLE:case VH.TEMPLATE:case VH.TITLE:uq(e,t);break;case VH.CAPTION:case VH.COLGROUP:case VH.TBODY:case VH.TFOOT:case VH.THEAD:e.tmplInsertionModeStack[0]=YG.IN_TABLE,e.insertionMode=YG.IN_TABLE,kq(e,t);break;case VH.COL:e.tmplInsertionModeStack[0]=YG.IN_COLUMN_GROUP,e.insertionMode=YG.IN_COLUMN_GROUP,Pq(e,t);break;case VH.TR:e.tmplInsertionModeStack[0]=YG.IN_TABLE_BODY,e.insertionMode=YG.IN_TABLE_BODY,Mq(e,t);break;case VH.TD:case VH.TH:e.tmplInsertionModeStack[0]=YG.IN_ROW,e.insertionMode=YG.IN_ROW,jq(e,t);break;default:e.tmplInsertionModeStack[0]=YG.IN_BODY,e.insertionMode=YG.IN_BODY,Aq(e,t)}}(this,e);break;case YG.AFTER_BODY:!function(e,t){t.tagID===VH.HTML?Aq(e,t):qq(e,t)}(this,e);break;case YG.IN_FRAMESET:!function(e,t){switch(t.tagID){case VH.HTML:Aq(e,t);break;case VH.FRAMESET:e._insertElement(t,HH.HTML);break;case VH.FRAME:e._appendElement(t,HH.HTML),t.ackSelfClosing=!0;break;case VH.NOFRAMES:uq(e,t)}}(this,e);break;case YG.AFTER_FRAMESET:!function(e,t){switch(t.tagID){case VH.HTML:Aq(e,t);break;case VH.NOFRAMES:uq(e,t)}}(this,e);break;case YG.AFTER_AFTER_BODY:!function(e,t){t.tagID===VH.HTML?Aq(e,t):zq(e,t)}(this,e);break;case YG.AFTER_AFTER_FRAMESET:!function(e,t){switch(t.tagID){case VH.HTML:Aq(e,t);break;case VH.NOFRAMES:uq(e,t)}}(this,e)}}onEndTag(e){this.skipNextNewLine=!1,this.currentToken=e,this.currentNotInHTML?function(e,t){if(t.tagID===VH.P||t.tagID===VH.BR)return Vq(e),void e._endTagOutsideForeignContent(t);for(let n=e.openElements.stackTop;n>0;n--){const r=e.openElements.items[n];if(e.treeAdapter.getNamespaceURI(r)===HH.HTML){e._endTagOutsideForeignContent(t);break}const s=e.treeAdapter.getTagName(r);if(s.toLowerCase()===t.tagName){t.tagName=s,e.openElements.shortenToLength(n);break}}}(this,e):this._endTagOutsideForeignContent(e)}_endTagOutsideForeignContent(e){switch(this.insertionMode){case YG.INITIAL:aq(this,e);break;case YG.BEFORE_HTML:!function(e,t){const n=t.tagID;n!==VH.HTML&&n!==VH.HEAD&&n!==VH.BODY&&n!==VH.BR||cq(e,t)}(this,e);break;case YG.BEFORE_HEAD:!function(e,t){const n=t.tagID;n===VH.HEAD||n===VH.BODY||n===VH.HTML||n===VH.BR?lq(e,t):e._err(t,$H.endTagWithoutMatchingOpenElement)}(this,e);break;case YG.IN_HEAD:!function(e,t){switch(t.tagID){case VH.HEAD:e.openElements.pop(),e.insertionMode=YG.AFTER_HEAD;break;case VH.BODY:case VH.BR:case VH.HTML:dq(e,t);break;case VH.TEMPLATE:pq(e,t);break;default:e._err(t,$H.endTagWithoutMatchingOpenElement)}}(this,e);break;case YG.IN_HEAD_NO_SCRIPT:!function(e,t){switch(t.tagID){case VH.NOSCRIPT:e.openElements.pop(),e.insertionMode=YG.IN_HEAD;break;case VH.BR:hq(e,t);break;default:e._err(t,$H.endTagWithoutMatchingOpenElement)}}(this,e);break;case YG.AFTER_HEAD:!function(e,t){switch(t.tagID){case VH.BODY:case VH.HTML:case VH.BR:fq(e,t);break;case VH.TEMPLATE:pq(e,t);break;default:e._err(t,$H.endTagWithoutMatchingOpenElement)}}(this,e);break;case YG.IN_BODY:Tq(this,e);break;case YG.TEXT:!function(e,t){var n;t.tagID===VH.SCRIPT&&(null===(n=e.scriptHandler)||void 0===n||n.call(e,e.openElements.current)),e.openElements.pop(),e.insertionMode=e.originalInsertionMode}(this,e);break;case YG.IN_TABLE:Cq(this,e);break;case YG.IN_TABLE_TEXT:Nq(this,e);break;case YG.IN_CAPTION:!function(e,t){const n=t.tagID;switch(n){case VH.CAPTION:case VH.TABLE:e.openElements.hasInTableScope(VH.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(VH.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=YG.IN_TABLE,n===VH.TABLE&&Cq(e,t));break;case VH.BODY:case VH.COL:case VH.COLGROUP:case VH.HTML:case VH.TBODY:case VH.TD:case VH.TFOOT:case VH.TH:case VH.THEAD:case VH.TR:break;default:Tq(e,t)}}(this,e);break;case YG.IN_COLUMN_GROUP:!function(e,t){switch(t.tagID){case VH.COLGROUP:e.openElements.currentTagId===VH.COLGROUP&&(e.openElements.pop(),e.insertionMode=YG.IN_TABLE);break;case VH.TEMPLATE:pq(e,t);break;case VH.COL:break;default:Lq(e,t)}}(this,e);break;case YG.IN_TABLE_BODY:Bq(this,e);break;case YG.IN_ROW:Fq(this,e);break;case YG.IN_CELL:!function(e,t){const n=t.tagID;switch(n){case VH.TD:case VH.TH:e.openElements.hasInTableScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=YG.IN_ROW);break;case VH.TABLE:case VH.TBODY:case VH.TFOOT:case VH.THEAD:case VH.TR:e.openElements.hasInTableScope(n)&&(e._closeTableCell(),Fq(e,t));break;case VH.BODY:case VH.CAPTION:case VH.COL:case VH.COLGROUP:case VH.HTML:break;default:Tq(e,t)}}(this,e);break;case YG.IN_SELECT:Uq(this,e);break;case YG.IN_SELECT_IN_TABLE:!function(e,t){const n=t.tagID;n===VH.CAPTION||n===VH.TABLE||n===VH.TBODY||n===VH.TFOOT||n===VH.THEAD||n===VH.TR||n===VH.TD||n===VH.TH?e.openElements.hasInTableScope(n)&&(e.openElements.popUntilTagNamePopped(VH.SELECT),e._resetInsertionMode(),e.onEndTag(t)):Uq(e,t)}(this,e);break;case YG.IN_TEMPLATE:!function(e,t){t.tagID===VH.TEMPLATE&&pq(e,t)}(this,e);break;case YG.AFTER_BODY:Gq(this,e);break;case YG.IN_FRAMESET:!function(e,t){t.tagID!==VH.FRAMESET||e.openElements.isRootHtmlElementCurrent()||(e.openElements.pop(),e.fragmentContext||e.openElements.currentTagId===VH.FRAMESET||(e.insertionMode=YG.AFTER_FRAMESET))}(this,e);break;case YG.AFTER_FRAMESET:!function(e,t){t.tagID===VH.HTML&&(e.insertionMode=YG.AFTER_AFTER_FRAMESET)}(this,e);break;case YG.AFTER_AFTER_BODY:zq(this,e)}}onEof(e){switch(this.insertionMode){case YG.INITIAL:aq(this,e);break;case YG.BEFORE_HTML:cq(this,e);break;case YG.BEFORE_HEAD:lq(this,e);break;case YG.IN_HEAD:dq(this,e);break;case YG.IN_HEAD_NO_SCRIPT:hq(this,e);break;case YG.AFTER_HEAD:fq(this,e);break;case YG.IN_BODY:case YG.IN_TABLE:case YG.IN_CAPTION:case YG.IN_COLUMN_GROUP:case YG.IN_TABLE_BODY:case YG.IN_ROW:case YG.IN_CELL:case YG.IN_SELECT:case YG.IN_SELECT_IN_TABLE:wq(this,e);break;case YG.TEXT:!function(e,t){e._err(t,$H.eofInElementThatCanContainOnlyText),e.openElements.pop(),e.insertionMode=e.originalInsertionMode,e.onEof(t)}(this,e);break;case YG.IN_TABLE_TEXT:Nq(this,e);break;case YG.IN_TEMPLATE:Hq(this,e);break;case YG.AFTER_BODY:case YG.IN_FRAMESET:case YG.AFTER_FRAMESET:case YG.AFTER_AFTER_BODY:case YG.AFTER_AFTER_FRAMESET:oq(this,e)}}onWhitespaceCharacter(e){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,e.chars.charCodeAt(0)===LH.LINE_FEED)){if(1===e.chars.length)return;e.chars=e.chars.substr(1)}if(this.tokenizer.inForeignNode)this._insertCharacters(e);else switch(this.insertionMode){case YG.IN_HEAD:case YG.IN_HEAD_NO_SCRIPT:case YG.AFTER_HEAD:case YG.TEXT:case YG.IN_COLUMN_GROUP:case YG.IN_SELECT:case YG.IN_SELECT_IN_TABLE:case YG.IN_FRAMESET:case YG.AFTER_FRAMESET:this._insertCharacters(e);break;case YG.IN_BODY:case YG.IN_CAPTION:case YG.IN_CELL:case YG.IN_TEMPLATE:case YG.AFTER_BODY:case YG.AFTER_AFTER_BODY:case YG.AFTER_AFTER_FRAMESET:gq(this,e);break;case YG.IN_TABLE:case YG.IN_TABLE_BODY:case YG.IN_ROW:xq(this,e);break;case YG.IN_TABLE_TEXT:Rq(this,e)}}};function XG(e,t){let n=e.activeFormattingElements.getElementEntryInScopeWithTagName(t.tagName);return n?e.openElements.contains(n.element)?e.openElements.hasInScope(t.tagID)||(n=null):(e.activeFormattingElements.removeEntry(n),n=null):Sq(e,t),n}function ZG(e,t){let n=null,r=e.openElements.stackTop;for(;r>=0;r--){const s=e.openElements.items[r];if(s===t.element)break;e._isSpecialElement(s,e.openElements.tagIDs[r])&&(n=s)}return n||(e.openElements.shortenToLength(0>r?0:r),e.activeFormattingElements.removeEntry(t)),n}function eq(e,t,n){let r=t,s=e.openElements.getCommonAncestor(t);for(let i=0,o=s;o!==n;i++,o=s){s=e.openElements.getCommonAncestor(o);const n=e.activeFormattingElements.getElementEntry(o),a=n&&i>=VG;!n||a?(a&&e.activeFormattingElements.removeEntry(n),e.openElements.remove(o)):(o=tq(e,n),r===t&&(e.activeFormattingElements.bookmark=n),e.treeAdapter.detachNode(r),e.treeAdapter.appendChild(o,r),r=o)}return r}function tq(e,t){const n=e.treeAdapter.getNamespaceURI(t.element),r=e.treeAdapter.createElement(t.token.tagName,n,t.token.attrs);return e.openElements.replace(t.element,r),t.element=r,r}function nq(e,t,n){const r=WH(e.treeAdapter.getTagName(t));if(e._isElementCausesFosterParenting(r))e._fosterParentElement(n);else{const s=e.treeAdapter.getNamespaceURI(t);r===VH.TEMPLATE&&s===HH.HTML&&(t=e.treeAdapter.getTemplateContent(t)),e.treeAdapter.appendChild(t,n)}}function rq(e,t,n){const r=e.treeAdapter.getNamespaceURI(n.element),{token:s}=n,i=e.treeAdapter.createElement(s.tagName,r,s.attrs);e._adoptNodes(t,i),e.treeAdapter.appendChild(t,i),e.activeFormattingElements.insertElementAfterBookmark(i,s),e.activeFormattingElements.removeEntry(n),e.openElements.remove(n.element),e.openElements.insertAfter(t,i,s.tagID)}function sq(e,t){for(let n=0;zG>n;n++){const n=XG(e,t);if(!n)break;const r=ZG(e,n);if(!r)break;e.activeFormattingElements.bookmark=n;const s=eq(e,r,n.element),i=e.openElements.getCommonAncestor(n.element);e.treeAdapter.detachNode(s),i&&nq(e,i,s),rq(e,r,n)}}function iq(e,t){e._appendCommentNode(t,e.openElements.currentTmplContentOrNode)}function oq(e,t){if(e.stopped=!0,t.location){const n=e.fragmentContext?0:2;for(let r=e.openElements.stackTop;r>=n;r--)e._setEndLocation(e.openElements.items[r],t);if(!e.fragmentContext&&e.openElements.stackTop>=0){const n=e.openElements.items[0],r=e.treeAdapter.getNodeSourceCodeLocation(n);if(r&&!r.endTag&&(e._setEndLocation(n,t),e.openElements.stackTop>=1)){const n=e.openElements.items[1],r=e.treeAdapter.getNodeSourceCodeLocation(n);r&&!r.endTag&&e._setEndLocation(n,t)}}}}function aq(e,t){e._err(t,$H.missingDoctype,!0),e.treeAdapter.setDocumentMode(e.document,qH.QUIRKS),e.insertionMode=YG.BEFORE_HTML,e._processToken(t)}function cq(e,t){e._insertFakeRootElement(),e.insertionMode=YG.BEFORE_HEAD,e._processToken(t)}function lq(e,t){e._insertFakeElement(zH.HEAD,VH.HEAD),e.headElement=e.openElements.current,e.insertionMode=YG.IN_HEAD,e._processToken(t)}function uq(e,t){switch(t.tagID){case VH.HTML:Aq(e,t);break;case VH.BASE:case VH.BASEFONT:case VH.BGSOUND:case VH.LINK:case VH.META:e._appendElement(t,HH.HTML),t.ackSelfClosing=!0;break;case VH.TITLE:e._switchToTextParsing(t,rG.RCDATA);break;case VH.NOSCRIPT:e.options.scriptingEnabled?e._switchToTextParsing(t,rG.RAWTEXT):(e._insertElement(t,HH.HTML),e.insertionMode=YG.IN_HEAD_NO_SCRIPT);break;case VH.NOFRAMES:case VH.STYLE:e._switchToTextParsing(t,rG.RAWTEXT);break;case VH.SCRIPT:e._switchToTextParsing(t,rG.SCRIPT_DATA);break;case VH.TEMPLATE:e._insertTemplate(t),e.activeFormattingElements.insertMarker(),e.framesetOk=!1,e.insertionMode=YG.IN_TEMPLATE,e.tmplInsertionModeStack.unshift(YG.IN_TEMPLATE);break;case VH.HEAD:e._err(t,$H.misplacedStartTagForHeadElement);break;default:dq(e,t)}}function pq(e,t){e.openElements.tmplCount>0?(e.openElements.generateImpliedEndTagsThoroughly(),e.openElements.currentTagId!==VH.TEMPLATE&&e._err(t,$H.closingOfElementWithOpenChildElements),e.openElements.popUntilTagNamePopped(VH.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode()):e._err(t,$H.endTagWithoutMatchingOpenElement)}function dq(e,t){e.openElements.pop(),e.insertionMode=YG.AFTER_HEAD,e._processToken(t)}function hq(e,t){e._err(t,t.type===UH.EOF?$H.openElementsLeftAfterEof:$H.disallowedContentInNoscriptInHead),e.openElements.pop(),e.insertionMode=YG.IN_HEAD,e._processToken(t)}function fq(e,t){e._insertFakeElement(zH.BODY,VH.BODY),e.insertionMode=YG.IN_BODY,mq(e,t)}function mq(e,t){switch(t.type){case UH.CHARACTER:yq(e,t);break;case UH.WHITESPACE_CHARACTER:gq(e,t);break;case UH.COMMENT:iq(e,t);break;case UH.START_TAG:Aq(e,t);break;case UH.END_TAG:Tq(e,t);break;case UH.EOF:wq(e,t)}}function gq(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t)}function yq(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t),e.framesetOk=!1}function vq(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,HH.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function bq(e){const t=KH(e,GH.TYPE);return null!=t&&t.toLowerCase()===qG}function Eq(e,t){e._switchToTextParsing(t,rG.RAWTEXT)}function _q(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,HH.HTML)}function Aq(e,t){switch(t.tagID){case VH.I:case VH.S:case VH.B:case VH.U:case VH.EM:case VH.TT:case VH.BIG:case VH.CODE:case VH.FONT:case VH.SMALL:case VH.STRIKE:case VH.STRONG:!function(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,HH.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}(e,t);break;case VH.A:!function(e,t){const n=e.activeFormattingElements.getElementEntryInScopeWithTagName(zH.A);n&&(sq(e,t),e.openElements.remove(n.element),e.activeFormattingElements.removeEntry(n)),e._reconstructActiveFormattingElements(),e._insertElement(t,HH.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}(e,t);break;case VH.H1:case VH.H2:case VH.H3:case VH.H4:case VH.H5:case VH.H6:!function(e,t){e.openElements.hasInButtonScope(VH.P)&&e._closePElement(),ZH(e.openElements.currentTagId)&&e.openElements.pop(),e._insertElement(t,HH.HTML)}(e,t);break;case VH.P:case VH.DL:case VH.OL:case VH.UL:case VH.DIV:case VH.DIR:case VH.NAV:case VH.MAIN:case VH.MENU:case VH.ASIDE:case VH.CENTER:case VH.FIGURE:case VH.FOOTER:case VH.HEADER:case VH.HGROUP:case VH.DIALOG:case VH.DETAILS:case VH.ADDRESS:case VH.ARTICLE:case VH.SECTION:case VH.SUMMARY:case VH.FIELDSET:case VH.BLOCKQUOTE:case VH.FIGCAPTION:!function(e,t){e.openElements.hasInButtonScope(VH.P)&&e._closePElement(),e._insertElement(t,HH.HTML)}(e,t);break;case VH.LI:case VH.DD:case VH.DT:!function(e,t){e.framesetOk=!1;const n=t.tagID;for(let t=e.openElements.stackTop;t>=0;t--){const r=e.openElements.tagIDs[t];if(n===VH.LI&&r===VH.LI||(n===VH.DD||n===VH.DT)&&(r===VH.DD||r===VH.DT)){e.openElements.generateImpliedEndTagsWithExclusion(r),e.openElements.popUntilTagNamePopped(r);break}if(r!==VH.ADDRESS&&r!==VH.DIV&&r!==VH.P&&e._isSpecialElement(e.openElements.items[t],r))break}e.openElements.hasInButtonScope(VH.P)&&e._closePElement(),e._insertElement(t,HH.HTML)}(e,t);break;case VH.BR:case VH.IMG:case VH.WBR:case VH.AREA:case VH.EMBED:case VH.KEYGEN:vq(e,t);break;case VH.HR:!function(e,t){e.openElements.hasInButtonScope(VH.P)&&e._closePElement(),e._appendElement(t,HH.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}(e,t);break;case VH.RB:case VH.RTC:!function(e,t){e.openElements.hasInScope(VH.RUBY)&&e.openElements.generateImpliedEndTags(),e._insertElement(t,HH.HTML)}(e,t);break;case VH.RT:case VH.RP:!function(e,t){e.openElements.hasInScope(VH.RUBY)&&e.openElements.generateImpliedEndTagsWithExclusion(VH.RTC),e._insertElement(t,HH.HTML)}(e,t);break;case VH.PRE:case VH.LISTING:!function(e,t){e.openElements.hasInButtonScope(VH.P)&&e._closePElement(),e._insertElement(t,HH.HTML),e.skipNextNewLine=!0,e.framesetOk=!1}(e,t);break;case VH.XMP:!function(e,t){e.openElements.hasInButtonScope(VH.P)&&e._closePElement(),e._reconstructActiveFormattingElements(),e.framesetOk=!1,e._switchToTextParsing(t,rG.RAWTEXT)}(e,t);break;case VH.SVG:!function(e,t){e._reconstructActiveFormattingElements(),HG(t),GG(t),t.selfClosing?e._appendElement(t,HH.SVG):e._insertElement(t,HH.SVG),t.ackSelfClosing=!0}(e,t);break;case VH.HTML:!function(e,t){0===e.openElements.tmplCount&&e.treeAdapter.adoptAttributes(e.openElements.items[0],t.attrs)}(e,t);break;case VH.BASE:case VH.LINK:case VH.META:case VH.STYLE:case VH.TITLE:case VH.SCRIPT:case VH.BGSOUND:case VH.BASEFONT:case VH.TEMPLATE:uq(e,t);break;case VH.BODY:!function(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&0===e.openElements.tmplCount&&(e.framesetOk=!1,e.treeAdapter.adoptAttributes(n,t.attrs))}(e,t);break;case VH.FORM:!function(e,t){const n=e.openElements.tmplCount>0;e.formElement&&!n||(e.openElements.hasInButtonScope(VH.P)&&e._closePElement(),e._insertElement(t,HH.HTML),n||(e.formElement=e.openElements.current))}(e,t);break;case VH.NOBR:!function(e,t){e._reconstructActiveFormattingElements(),e.openElements.hasInScope(VH.NOBR)&&(sq(e,t),e._reconstructActiveFormattingElements()),e._insertElement(t,HH.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}(e,t);break;case VH.MATH:!function(e,t){e._reconstructActiveFormattingElements(),UG(t),GG(t),t.selfClosing?e._appendElement(t,HH.MATHML):e._insertElement(t,HH.MATHML),t.ackSelfClosing=!0}(e,t);break;case VH.TABLE:!function(e,t){e.treeAdapter.getDocumentMode(e.document)!==qH.QUIRKS&&e.openElements.hasInButtonScope(VH.P)&&e._closePElement(),e._insertElement(t,HH.HTML),e.framesetOk=!1,e.insertionMode=YG.IN_TABLE}(e,t);break;case VH.INPUT:!function(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,HH.HTML),bq(t)||(e.framesetOk=!1),t.ackSelfClosing=!0}(e,t);break;case VH.PARAM:case VH.TRACK:case VH.SOURCE:!function(e,t){e._appendElement(t,HH.HTML),t.ackSelfClosing=!0}(e,t);break;case VH.IMAGE:!function(e,t){t.tagName=zH.IMG,t.tagID=VH.IMG,vq(e,t)}(e,t);break;case VH.BUTTON:!function(e,t){e.openElements.hasInScope(VH.BUTTON)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(VH.BUTTON)),e._reconstructActiveFormattingElements(),e._insertElement(t,HH.HTML),e.framesetOk=!1}(e,t);break;case VH.APPLET:case VH.OBJECT:case VH.MARQUEE:!function(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,HH.HTML),e.activeFormattingElements.insertMarker(),e.framesetOk=!1}(e,t);break;case VH.IFRAME:!function(e,t){e.framesetOk=!1,e._switchToTextParsing(t,rG.RAWTEXT)}(e,t);break;case VH.SELECT:!function(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,HH.HTML),e.framesetOk=!1,e.insertionMode=e.insertionMode===YG.IN_TABLE||e.insertionMode===YG.IN_CAPTION||e.insertionMode===YG.IN_TABLE_BODY||e.insertionMode===YG.IN_ROW||e.insertionMode===YG.IN_CELL?YG.IN_SELECT_IN_TABLE:YG.IN_SELECT}(e,t);break;case VH.OPTION:case VH.OPTGROUP:!function(e,t){e.openElements.currentTagId===VH.OPTION&&e.openElements.pop(),e._reconstructActiveFormattingElements(),e._insertElement(t,HH.HTML)}(e,t);break;case VH.NOEMBED:Eq(e,t);break;case VH.FRAMESET:!function(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();e.framesetOk&&n&&(e.treeAdapter.detachNode(n),e.openElements.popAllUpToHtmlElement(),e._insertElement(t,HH.HTML),e.insertionMode=YG.IN_FRAMESET)}(e,t);break;case VH.TEXTAREA:!function(e,t){e._insertElement(t,HH.HTML),e.skipNextNewLine=!0,e.tokenizer.state=rG.RCDATA,e.originalInsertionMode=e.insertionMode,e.framesetOk=!1,e.insertionMode=YG.TEXT}(e,t);break;case VH.NOSCRIPT:e.options.scriptingEnabled?Eq(e,t):_q(e,t);break;case VH.PLAINTEXT:!function(e,t){e.openElements.hasInButtonScope(VH.P)&&e._closePElement(),e._insertElement(t,HH.HTML),e.tokenizer.state=rG.PLAINTEXT}(e,t);break;case VH.COL:case VH.TH:case VH.TD:case VH.TR:case VH.HEAD:case VH.FRAME:case VH.TBODY:case VH.TFOOT:case VH.THEAD:case VH.CAPTION:case VH.COLGROUP:break;default:_q(e,t)}}function Sq(e,t){const n=t.tagName,r=t.tagID;for(let t=e.openElements.stackTop;t>0;t--){const s=e.openElements.items[t],i=e.openElements.tagIDs[t];if(r===i&&(r!==VH.UNKNOWN||e.treeAdapter.getTagName(s)===n)){e.openElements.generateImpliedEndTagsWithExclusion(r),t>e.openElements.stackTop||e.openElements.shortenToLength(t);break}if(e._isSpecialElement(s,i))break}}function Tq(e,t){switch(t.tagID){case VH.A:case VH.B:case VH.I:case VH.S:case VH.U:case VH.EM:case VH.TT:case VH.BIG:case VH.CODE:case VH.FONT:case VH.NOBR:case VH.SMALL:case VH.STRIKE:case VH.STRONG:sq(e,t);break;case VH.P:!function(e){e.openElements.hasInButtonScope(VH.P)||e._insertFakeElement(zH.P,VH.P),e._closePElement()}(e);break;case VH.DL:case VH.UL:case VH.OL:case VH.DIR:case VH.DIV:case VH.NAV:case VH.PRE:case VH.MAIN:case VH.MENU:case VH.ASIDE:case VH.BUTTON:case VH.CENTER:case VH.FIGURE:case VH.FOOTER:case VH.HEADER:case VH.HGROUP:case VH.DIALOG:case VH.ADDRESS:case VH.ARTICLE:case VH.DETAILS:case VH.SECTION:case VH.SUMMARY:case VH.LISTING:case VH.FIELDSET:case VH.BLOCKQUOTE:case VH.FIGCAPTION:!function(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n))}(e,t);break;case VH.LI:!function(e){e.openElements.hasInListItemScope(VH.LI)&&(e.openElements.generateImpliedEndTagsWithExclusion(VH.LI),e.openElements.popUntilTagNamePopped(VH.LI))}(e);break;case VH.DD:case VH.DT:!function(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTagsWithExclusion(n),e.openElements.popUntilTagNamePopped(n))}(e,t);break;case VH.H1:case VH.H2:case VH.H3:case VH.H4:case VH.H5:case VH.H6:!function(e){e.openElements.hasNumberedHeaderInScope()&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilNumberedHeaderPopped())}(e);break;case VH.BR:!function(e){e._reconstructActiveFormattingElements(),e._insertFakeElement(zH.BR,VH.BR),e.openElements.pop(),e.framesetOk=!1}(e);break;case VH.BODY:!function(e,t){if(e.openElements.hasInScope(VH.BODY)&&(e.insertionMode=YG.AFTER_BODY,e.options.sourceCodeLocationInfo)){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e._setEndLocation(n,t)}}(e,t);break;case VH.HTML:!function(e,t){e.openElements.hasInScope(VH.BODY)&&(e.insertionMode=YG.AFTER_BODY,Gq(e,t))}(e,t);break;case VH.FORM:!function(e){const t=e.openElements.tmplCount>0,{formElement:n}=e;t||(e.formElement=null),(n||t)&&e.openElements.hasInScope(VH.FORM)&&(e.openElements.generateImpliedEndTags(),t?e.openElements.popUntilTagNamePopped(VH.FORM):n&&e.openElements.remove(n))}(e);break;case VH.APPLET:case VH.OBJECT:case VH.MARQUEE:!function(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker())}(e,t);break;case VH.TEMPLATE:pq(e,t);break;default:Sq(e,t)}}function wq(e,t){e.tmplInsertionModeStack.length>0?Hq(e,t):oq(e,t)}function xq(e,t){if(QG.has(e.openElements.currentTagId))switch(e.pendingCharacterTokens.length=0,e.hasNonWhitespacePendingCharacterToken=!1,e.originalInsertionMode=e.insertionMode,e.insertionMode=YG.IN_TABLE_TEXT,t.type){case UH.CHARACTER:Oq(e,t);break;case UH.WHITESPACE_CHARACTER:Rq(e,t)}else Iq(e,t)}function kq(e,t){switch(t.tagID){case VH.TD:case VH.TH:case VH.TR:!function(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(zH.TBODY,VH.TBODY),e.insertionMode=YG.IN_TABLE_BODY,Mq(e,t)}(e,t);break;case VH.STYLE:case VH.SCRIPT:case VH.TEMPLATE:uq(e,t);break;case VH.COL:!function(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(zH.COLGROUP,VH.COLGROUP),e.insertionMode=YG.IN_COLUMN_GROUP,Pq(e,t)}(e,t);break;case VH.FORM:!function(e,t){e.formElement||0!==e.openElements.tmplCount||(e._insertElement(t,HH.HTML),e.formElement=e.openElements.current,e.openElements.pop())}(e,t);break;case VH.TABLE:!function(e,t){e.openElements.hasInTableScope(VH.TABLE)&&(e.openElements.popUntilTagNamePopped(VH.TABLE),e._resetInsertionMode(),e._processStartTag(t))}(e,t);break;case VH.TBODY:case VH.TFOOT:case VH.THEAD:!function(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,HH.HTML),e.insertionMode=YG.IN_TABLE_BODY}(e,t);break;case VH.INPUT:!function(e,t){bq(t)?e._appendElement(t,HH.HTML):Iq(e,t),t.ackSelfClosing=!0}(e,t);break;case VH.CAPTION:!function(e,t){e.openElements.clearBackToTableContext(),e.activeFormattingElements.insertMarker(),e._insertElement(t,HH.HTML),e.insertionMode=YG.IN_CAPTION}(e,t);break;case VH.COLGROUP:!function(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,HH.HTML),e.insertionMode=YG.IN_COLUMN_GROUP}(e,t);break;default:Iq(e,t)}}function Cq(e,t){switch(t.tagID){case VH.TABLE:e.openElements.hasInTableScope(VH.TABLE)&&(e.openElements.popUntilTagNamePopped(VH.TABLE),e._resetInsertionMode());break;case VH.TEMPLATE:pq(e,t);break;case VH.BODY:case VH.CAPTION:case VH.COL:case VH.COLGROUP:case VH.HTML:case VH.TBODY:case VH.TD:case VH.TFOOT:case VH.TH:case VH.THEAD:case VH.TR:break;default:Iq(e,t)}}function Iq(e,t){const n=e.fosterParentingEnabled;e.fosterParentingEnabled=!0,mq(e,t),e.fosterParentingEnabled=n}function Rq(e,t){e.pendingCharacterTokens.push(t)}function Oq(e,t){e.pendingCharacterTokens.push(t),e.hasNonWhitespacePendingCharacterToken=!0}function Nq(e,t){let n=0;if(e.hasNonWhitespacePendingCharacterToken)for(;e.pendingCharacterTokens.length>n;n++)Iq(e,e.pendingCharacterTokens[n]);else for(;e.pendingCharacterTokens.length>n;n++)e._insertCharacters(e.pendingCharacterTokens[n]);e.insertionMode=e.originalInsertionMode,e._processToken(t)}const Dq=new Set([VH.CAPTION,VH.COL,VH.COLGROUP,VH.TBODY,VH.TD,VH.TFOOT,VH.TH,VH.THEAD,VH.TR]);function Pq(e,t){switch(t.tagID){case VH.HTML:Aq(e,t);break;case VH.COL:e._appendElement(t,HH.HTML),t.ackSelfClosing=!0;break;case VH.TEMPLATE:uq(e,t);break;default:Lq(e,t)}}function Lq(e,t){e.openElements.currentTagId===VH.COLGROUP&&(e.openElements.pop(),e.insertionMode=YG.IN_TABLE,e._processToken(t))}function Mq(e,t){switch(t.tagID){case VH.TR:e.openElements.clearBackToTableBodyContext(),e._insertElement(t,HH.HTML),e.insertionMode=YG.IN_ROW;break;case VH.TH:case VH.TD:e.openElements.clearBackToTableBodyContext(),e._insertFakeElement(zH.TR,VH.TR),e.insertionMode=YG.IN_ROW,jq(e,t);break;case VH.CAPTION:case VH.COL:case VH.COLGROUP:case VH.TBODY:case VH.TFOOT:case VH.THEAD:e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=YG.IN_TABLE,kq(e,t));break;default:kq(e,t)}}function Bq(e,t){const n=t.tagID;switch(t.tagID){case VH.TBODY:case VH.TFOOT:case VH.THEAD:e.openElements.hasInTableScope(n)&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=YG.IN_TABLE);break;case VH.TABLE:e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=YG.IN_TABLE,Cq(e,t));break;case VH.BODY:case VH.CAPTION:case VH.COL:case VH.COLGROUP:case VH.HTML:case VH.TD:case VH.TH:case VH.TR:break;default:Cq(e,t)}}function jq(e,t){switch(t.tagID){case VH.TH:case VH.TD:e.openElements.clearBackToTableRowContext(),e._insertElement(t,HH.HTML),e.insertionMode=YG.IN_CELL,e.activeFormattingElements.insertMarker();break;case VH.CAPTION:case VH.COL:case VH.COLGROUP:case VH.TBODY:case VH.TFOOT:case VH.THEAD:case VH.TR:e.openElements.hasInTableScope(VH.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=YG.IN_TABLE_BODY,Mq(e,t));break;default:kq(e,t)}}function Fq(e,t){switch(t.tagID){case VH.TR:e.openElements.hasInTableScope(VH.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=YG.IN_TABLE_BODY);break;case VH.TABLE:e.openElements.hasInTableScope(VH.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=YG.IN_TABLE_BODY,Bq(e,t));break;case VH.TBODY:case VH.TFOOT:case VH.THEAD:(e.openElements.hasInTableScope(t.tagID)||e.openElements.hasInTableScope(VH.TR))&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=YG.IN_TABLE_BODY,Bq(e,t));break;case VH.BODY:case VH.CAPTION:case VH.COL:case VH.COLGROUP:case VH.HTML:case VH.TD:case VH.TH:break;default:Cq(e,t)}}function $q(e,t){switch(t.tagID){case VH.HTML:Aq(e,t);break;case VH.OPTION:e.openElements.currentTagId===VH.OPTION&&e.openElements.pop(),e._insertElement(t,HH.HTML);break;case VH.OPTGROUP:e.openElements.currentTagId===VH.OPTION&&e.openElements.pop(),e.openElements.currentTagId===VH.OPTGROUP&&e.openElements.pop(),e._insertElement(t,HH.HTML);break;case VH.INPUT:case VH.KEYGEN:case VH.TEXTAREA:case VH.SELECT:e.openElements.hasInSelectScope(VH.SELECT)&&(e.openElements.popUntilTagNamePopped(VH.SELECT),e._resetInsertionMode(),t.tagID!==VH.SELECT&&e._processStartTag(t));break;case VH.SCRIPT:case VH.TEMPLATE:uq(e,t)}}function Uq(e,t){switch(t.tagID){case VH.OPTGROUP:e.openElements.stackTop>0&&e.openElements.currentTagId===VH.OPTION&&e.openElements.tagIDs[e.openElements.stackTop-1]===VH.OPTGROUP&&e.openElements.pop(),e.openElements.currentTagId===VH.OPTGROUP&&e.openElements.pop();break;case VH.OPTION:e.openElements.currentTagId===VH.OPTION&&e.openElements.pop();break;case VH.SELECT:e.openElements.hasInSelectScope(VH.SELECT)&&(e.openElements.popUntilTagNamePopped(VH.SELECT),e._resetInsertionMode());break;case VH.TEMPLATE:pq(e,t)}}function Hq(e,t){e.openElements.tmplCount>0?(e.openElements.popUntilTagNamePopped(VH.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode(),e.onEof(t)):oq(e,t)}function Gq(e,t){var n;if(t.tagID===VH.HTML){if(e.fragmentContext||(e.insertionMode=YG.AFTER_AFTER_BODY),e.options.sourceCodeLocationInfo&&e.openElements.tagIDs[0]===VH.HTML){e._setEndLocation(e.openElements.items[0],t);const r=e.openElements.items[1];r&&!(null===(n=e.treeAdapter.getNodeSourceCodeLocation(r))||void 0===n?void 0:n.endTag)&&e._setEndLocation(r,t)}}else qq(e,t)}function qq(e,t){e.insertionMode=YG.IN_BODY,mq(e,t)}function zq(e,t){e.insertionMode=YG.IN_BODY,mq(e,t)}function Vq(e){for(;e.treeAdapter.getNamespaceURI(e.openElements.current)!==HH.HTML&&!e._isIntegrationPoint(e.openElements.currentTagId,e.openElements.current);)e.openElements.pop()}const Yq=new Set([zH.AREA,zH.BASE,zH.BASEFONT,zH.BGSOUND,zH.BR,zH.COL,zH.EMBED,zH.FRAME,zH.HR,zH.IMG,zH.INPUT,zH.KEYGEN,zH.LINK,zH.META,zH.PARAM,zH.SOURCE,zH.TRACK,zH.WBR]),Kq={treeAdapter:kG,scriptingEnabled:!0};function Qq(e,t){return Wq(e,{...Kq,...t})}function Wq(e,t){return t.treeAdapter.isElementNode(e)?function(e,t){const n=t.treeAdapter.getTagName(e);return`<${n}${function(e,{treeAdapter:t}){let n="";for(const r of t.getAttrList(e)){if(n+=" ",r.namespace)switch(r.namespace){case HH.XML:n+="xml:"+r.name;break;case HH.XMLNS:"xmlns"!==r.name&&(n+="xmlns:"),n+=r.name;break;case HH.XLINK:n+="xlink:"+r.name;break;default:n+=`${r.prefix}:${r.name}`}else n+=r.name;n+=`="${RF(r.value)}"`}return n}(e,t)}>${function(e,t){return t.treeAdapter.isElementNode(e)&&t.treeAdapter.getNamespaceURI(e)===HH.HTML&&Yq.has(t.treeAdapter.getTagName(e))}(e,t)?"":`${function(e,t){let n="";const r=t.treeAdapter.isElementNode(e)&&t.treeAdapter.getTagName(e)===zH.TEMPLATE&&t.treeAdapter.getNamespaceURI(e)===HH.HTML?t.treeAdapter.getTemplateContent(e):e,s=t.treeAdapter.getChildNodes(r);if(s)for(const e of s)n+=Wq(e,t);return n}(e,t)}</${n}>`}`}(e,t):t.treeAdapter.isTextNode(e)?function(e,t){const{treeAdapter:n}=t,r=n.getTextNodeContent(e),s=n.getParentNode(e),i=s&&n.isElementNode(s)&&n.getTagName(s);return i&&n.getNamespaceURI(s)===HH.HTML&&(a=t.scriptingEnabled,eG.has(o=i)||a&&o===zH.NOSCRIPT)?r:OF(r);var o,a}(e,t):t.treeAdapter.isCommentNode(e)?function(e,{treeAdapter:t}){return`\x3c!--${t.getCommentNodeContent(e)}--\x3e`}(e,t):t.treeAdapter.isDocumentTypeNode(e)?function(e,{treeAdapter:t}){return`<!DOCTYPE ${t.getDocumentTypeNodeName(e)}>`}(e,t):""}function Jq(e){return new zj(e)}function Xq(e){const t=e.includes('"')?"'":'"';return t+e+t}const Zq={isCommentNode:tF,isElementNode:Xj,isTextNode:eF,createDocument(){const e=new Wj([]);return e["x-mode"]=qH.NO_QUIRKS,e},createDocumentFragment:()=>new Wj([]),createElement(e,t,n){const r=Object.create(null),s=Object.create(null),i=Object.create(null);for(let e=0;n.length>e;e++){const t=n[e].name;r[t]=n[e].value,s[t]=n[e].namespace,i[t]=n[e].prefix}const o=new Jj(e,r,[]);return o.namespace=t,o["x-attribsNamespace"]=s,o["x-attribsPrefix"]=i,o},createCommentNode:e=>new Vj(e),appendChild(e,t){const n=e.children[e.children.length-1];n&&(n.next=t,t.prev=n),e.children.push(t),t.parent=e},insertBefore(e,t,n){const r=e.children.indexOf(n),{prev:s}=n;s&&(s.next=t,t.prev=s),n.prev=t,t.next=n,e.children.splice(r,0,t),t.parent=e},setTemplateContent(e,t){Zq.appendChild(e,t)},getTemplateContent:e=>e.children[0],setDocumentType(e,t,n,r){const s=function(e,t,n){let r="!DOCTYPE ";return e&&(r+=e),t?r+=" PUBLIC "+Xq(t):n&&(r+=" SYSTEM"),n&&(r+=" "+Xq(n)),r}(t,n,r);let i=e.children.find((e=>nF(e)&&"!doctype"===e.name));i?i.data=null!=s?s:null:(i=new Yj("!doctype",s),Zq.appendChild(e,i)),i["x-name"]=null!=t?t:void 0,i["x-publicId"]=null!=n?n:void 0,i["x-systemId"]=null!=r?r:void 0},setDocumentMode(e,t){e["x-mode"]=t},getDocumentMode:e=>e["x-mode"],detachNode(e){if(e.parent){const t=e.parent.children.indexOf(e),{prev:n,next:r}=e;e.prev=null,e.next=null,n&&(n.next=r),r&&(r.prev=n),e.parent.children.splice(t,1),e.parent=null}},insertText(e,t){const n=e.children[e.children.length-1];n&&eF(n)?n.data+=t:Zq.appendChild(e,Jq(t))},insertTextBefore(e,t,n){const r=e.children[e.children.indexOf(n)-1];r&&eF(r)?r.data+=t:Zq.insertBefore(e,Jq(t),n)},adoptAttributes(e,t){for(let n=0;t.length>n;n++){const r=t[n].name;void 0===e.attribs[r]&&(e.attribs[r]=t[n].value,e["x-attribsNamespace"][r]=t[n].namespace,e["x-attribsPrefix"][r]=t[n].prefix)}},getFirstChild:e=>e.children[0],getChildNodes:e=>e.children,getParentNode:e=>e.parent,getAttrList:e=>e.attributes,getTagName:e=>e.name,getNamespaceURI:e=>e.namespace,getTextNodeContent:e=>e.data,getCommentNodeContent:e=>e.data,getDocumentTypeNodeName(e){var t;return null!==(t=e["x-name"])&&void 0!==t?t:""},getDocumentTypeNodePublicId(e){var t;return null!==(t=e["x-publicId"])&&void 0!==t?t:""},getDocumentTypeNodeSystemId(e){var t;return null!==(t=e["x-systemId"])&&void 0!==t?t:""},isDocumentTypeNode:e=>nF(e)&&"!doctype"===e.name,setNodeSourceCodeLocation(e,t){t&&(e.startIndex=t.startOffset,e.endIndex=t.endOffset),e.sourceCodeLocation=t},getNodeSourceCodeLocation:e=>e.sourceCodeLocation,updateNodeSourceCodeLocation(e,t){null!=t.endOffset&&(e.endIndex=t.endOffset),e.sourceCodeLocation={...e.sourceCodeLocation,...t}}},ez={treeAdapter:Zq};var tz,nz,rz;function sz(e){return e===tz.Space||e===tz.NewLine||e===tz.Tab||e===tz.FormFeed||e===tz.CarriageReturn}function iz(e){return e===tz.Slash||e===tz.Gt||sz(e)}function oz(e){return e>=tz.Zero&&tz.Nine>=e}!function(e){e[e.Tab=9]="Tab",e[e.NewLine=10]="NewLine",e[e.FormFeed=12]="FormFeed",e[e.CarriageReturn=13]="CarriageReturn",e[e.Space=32]="Space",e[e.ExclamationMark=33]="ExclamationMark",e[e.Number=35]="Number",e[e.Amp=38]="Amp",e[e.SingleQuote=39]="SingleQuote",e[e.DoubleQuote=34]="DoubleQuote",e[e.Dash=45]="Dash",e[e.Slash=47]="Slash",e[e.Zero=48]="Zero",e[e.Nine=57]="Nine",e[e.Semi=59]="Semi",e[e.Lt=60]="Lt",e[e.Eq=61]="Eq",e[e.Gt=62]="Gt",e[e.Questionmark=63]="Questionmark",e[e.UpperA=65]="UpperA",e[e.LowerA=97]="LowerA",e[e.UpperF=70]="UpperF",e[e.LowerF=102]="LowerF",e[e.UpperZ=90]="UpperZ",e[e.LowerZ=122]="LowerZ",e[e.LowerX=120]="LowerX",e[e.OpeningSquareBracket=91]="OpeningSquareBracket"}(tz||(tz={})),function(e){e[e.Text=1]="Text",e[e.BeforeTagName=2]="BeforeTagName",e[e.InTagName=3]="InTagName",e[e.InSelfClosingTag=4]="InSelfClosingTag",e[e.BeforeClosingTagName=5]="BeforeClosingTagName",e[e.InClosingTagName=6]="InClosingTagName",e[e.AfterClosingTagName=7]="AfterClosingTagName",e[e.BeforeAttributeName=8]="BeforeAttributeName",e[e.InAttributeName=9]="InAttributeName",e[e.AfterAttributeName=10]="AfterAttributeName",e[e.BeforeAttributeValue=11]="BeforeAttributeValue",e[e.InAttributeValueDq=12]="InAttributeValueDq",e[e.InAttributeValueSq=13]="InAttributeValueSq",e[e.InAttributeValueNq=14]="InAttributeValueNq",e[e.BeforeDeclaration=15]="BeforeDeclaration",e[e.InDeclaration=16]="InDeclaration",e[e.InProcessingInstruction=17]="InProcessingInstruction",e[e.BeforeComment=18]="BeforeComment",e[e.CDATASequence=19]="CDATASequence",e[e.InSpecialComment=20]="InSpecialComment",e[e.InCommentLike=21]="InCommentLike",e[e.BeforeSpecialS=22]="BeforeSpecialS",e[e.SpecialStartSequence=23]="SpecialStartSequence",e[e.InSpecialTag=24]="InSpecialTag",e[e.BeforeEntity=25]="BeforeEntity",e[e.BeforeNumericEntity=26]="BeforeNumericEntity",e[e.InNamedEntity=27]="InNamedEntity",e[e.InNumericEntity=28]="InNumericEntity",e[e.InHexEntity=29]="InHexEntity"}(nz||(nz={})),function(e){e[e.NoValue=0]="NoValue",e[e.Unquoted=1]="Unquoted",e[e.Single=2]="Single",e[e.Double=3]="Double"}(rz||(rz={}));const az={Cdata:new Uint8Array([67,68,65,84,65,91]),CdataEnd:new Uint8Array([93,93,62]),CommentEnd:new Uint8Array([45,45,62]),ScriptEnd:new Uint8Array([60,47,115,99,114,105,112,116]),StyleEnd:new Uint8Array([60,47,115,116,121,108,101]),TitleEnd:new Uint8Array([60,47,116,105,116,108,101])};class cz{constructor({xmlMode:e=!1,decodeEntities:t=!0},n){this.cbs=n,this.state=nz.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=nz.Text,this.isSpecial=!1,this.running=!0,this.offset=0,this.currentSequence=void 0,this.sequenceIndex=0,this.trieIndex=0,this.trieCurrent=0,this.entityResult=0,this.entityExcess=0,this.xmlMode=e,this.decodeEntities=t,this.entityTrie=e?pF:uF}reset(){this.state=nz.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=nz.Text,this.currentSequence=void 0,this.running=!0,this.offset=0}write(e){this.offset+=this.buffer.length,this.buffer=e,this.parse()}end(){this.running&&this.finish()}pause(){this.running=!1}resume(){this.running=!0,this.buffer.length+this.offset>this.index&&this.parse()}getIndex(){return this.index}getSectionStart(){return this.sectionStart}stateText(e){e===tz.Lt||!this.decodeEntities&&this.fastForwardTo(tz.Lt)?(this.index>this.sectionStart&&this.cbs.ontext(this.sectionStart,this.index),this.state=nz.BeforeTagName,this.sectionStart=this.index):this.decodeEntities&&e===tz.Amp&&(this.state=nz.BeforeEntity)}stateSpecialStartSequence(e){const t=this.sequenceIndex===this.currentSequence.length;if(t?iz(e):(32|e)===this.currentSequence[this.sequenceIndex]){if(!t)return void this.sequenceIndex++}else this.isSpecial=!1;this.sequenceIndex=0,this.state=nz.InTagName,this.stateInTagName(e)}stateInSpecialTag(e){if(this.sequenceIndex===this.currentSequence.length){if(e===tz.Gt||sz(e)){const t=this.index-this.currentSequence.length;if(t>this.sectionStart){const e=this.index;this.index=t,this.cbs.ontext(this.sectionStart,t),this.index=e}return this.isSpecial=!1,this.sectionStart=t+2,void this.stateInClosingTagName(e)}this.sequenceIndex=0}(32|e)===this.currentSequence[this.sequenceIndex]?this.sequenceIndex+=1:0===this.sequenceIndex?this.currentSequence===az.TitleEnd?this.decodeEntities&&e===tz.Amp&&(this.state=nz.BeforeEntity):this.fastForwardTo(tz.Lt)&&(this.sequenceIndex=1):this.sequenceIndex=+(e===tz.Lt)}stateCDATASequence(e){e===az.Cdata[this.sequenceIndex]?++this.sequenceIndex===az.Cdata.length&&(this.state=nz.InCommentLike,this.currentSequence=az.CdataEnd,this.sequenceIndex=0,this.sectionStart=this.index+1):(this.sequenceIndex=0,this.state=nz.InDeclaration,this.stateInDeclaration(e))}fastForwardTo(e){for(;++this.index<this.buffer.length+this.offset;)if(this.buffer.charCodeAt(this.index-this.offset)===e)return!0;return this.index=this.buffer.length+this.offset-1,!1}stateInCommentLike(e){e===this.currentSequence[this.sequenceIndex]?++this.sequenceIndex===this.currentSequence.length&&(this.currentSequence===az.CdataEnd?this.cbs.oncdata(this.sectionStart,this.index,2):this.cbs.oncomment(this.sectionStart,this.index,2),this.sequenceIndex=0,this.sectionStart=this.index+1,this.state=nz.Text):0===this.sequenceIndex?this.fastForwardTo(this.currentSequence[0])&&(this.sequenceIndex=1):e!==this.currentSequence[this.sequenceIndex-1]&&(this.sequenceIndex=0)}isTagStartChar(e){return this.xmlMode?!iz(e):function(e){return e>=tz.LowerA&&tz.LowerZ>=e||e>=tz.UpperA&&tz.UpperZ>=e}(e)}startSpecial(e,t){this.isSpecial=!0,this.currentSequence=e,this.sequenceIndex=t,this.state=nz.SpecialStartSequence}stateBeforeTagName(e){if(e===tz.ExclamationMark)this.state=nz.BeforeDeclaration,this.sectionStart=this.index+1;else if(e===tz.Questionmark)this.state=nz.InProcessingInstruction,this.sectionStart=this.index+1;else if(this.isTagStartChar(e)){const t=32|e;this.sectionStart=this.index,this.xmlMode||t!==az.TitleEnd[2]?this.state=this.xmlMode||t!==az.ScriptEnd[2]?nz.InTagName:nz.BeforeSpecialS:this.startSpecial(az.TitleEnd,3)}else e===tz.Slash?this.state=nz.BeforeClosingTagName:(this.state=nz.Text,this.stateText(e))}stateInTagName(e){iz(e)&&(this.cbs.onopentagname(this.sectionStart,this.index),this.sectionStart=-1,this.state=nz.BeforeAttributeName,this.stateBeforeAttributeName(e))}stateBeforeClosingTagName(e){sz(e)||(e===tz.Gt?this.state=nz.Text:(this.state=this.isTagStartChar(e)?nz.InClosingTagName:nz.InSpecialComment,this.sectionStart=this.index))}stateInClosingTagName(e){(e===tz.Gt||sz(e))&&(this.cbs.onclosetag(this.sectionStart,this.index),this.sectionStart=-1,this.state=nz.AfterClosingTagName,this.stateAfterClosingTagName(e))}stateAfterClosingTagName(e){(e===tz.Gt||this.fastForwardTo(tz.Gt))&&(this.state=nz.Text,this.baseState=nz.Text,this.sectionStart=this.index+1)}stateBeforeAttributeName(e){e===tz.Gt?(this.cbs.onopentagend(this.index),this.isSpecial?(this.state=nz.InSpecialTag,this.sequenceIndex=0):this.state=nz.Text,this.baseState=this.state,this.sectionStart=this.index+1):e===tz.Slash?this.state=nz.InSelfClosingTag:sz(e)||(this.state=nz.InAttributeName,this.sectionStart=this.index)}stateInSelfClosingTag(e){e===tz.Gt?(this.cbs.onselfclosingtag(this.index),this.state=nz.Text,this.baseState=nz.Text,this.sectionStart=this.index+1,this.isSpecial=!1):sz(e)||(this.state=nz.BeforeAttributeName,this.stateBeforeAttributeName(e))}stateInAttributeName(e){(e===tz.Eq||iz(e))&&(this.cbs.onattribname(this.sectionStart,this.index),this.sectionStart=-1,this.state=nz.AfterAttributeName,this.stateAfterAttributeName(e))}stateAfterAttributeName(e){e===tz.Eq?this.state=nz.BeforeAttributeValue:e===tz.Slash||e===tz.Gt?(this.cbs.onattribend(rz.NoValue,this.index),this.state=nz.BeforeAttributeName,this.stateBeforeAttributeName(e)):sz(e)||(this.cbs.onattribend(rz.NoValue,this.index),this.state=nz.InAttributeName,this.sectionStart=this.index)}stateBeforeAttributeValue(e){e===tz.DoubleQuote?(this.state=nz.InAttributeValueDq,this.sectionStart=this.index+1):e===tz.SingleQuote?(this.state=nz.InAttributeValueSq,this.sectionStart=this.index+1):sz(e)||(this.sectionStart=this.index,this.state=nz.InAttributeValueNq,this.stateInAttributeValueNoQuotes(e))}handleInAttributeValue(e,t){e===t||!this.decodeEntities&&this.fastForwardTo(t)?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(t===tz.DoubleQuote?rz.Double:rz.Single,this.index),this.state=nz.BeforeAttributeName):this.decodeEntities&&e===tz.Amp&&(this.baseState=this.state,this.state=nz.BeforeEntity)}stateInAttributeValueDoubleQuotes(e){this.handleInAttributeValue(e,tz.DoubleQuote)}stateInAttributeValueSingleQuotes(e){this.handleInAttributeValue(e,tz.SingleQuote)}stateInAttributeValueNoQuotes(e){sz(e)||e===tz.Gt?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(rz.Unquoted,this.index),this.state=nz.BeforeAttributeName,this.stateBeforeAttributeName(e)):this.decodeEntities&&e===tz.Amp&&(this.baseState=this.state,this.state=nz.BeforeEntity)}stateBeforeDeclaration(e){e===tz.OpeningSquareBracket?(this.state=nz.CDATASequence,this.sequenceIndex=0):this.state=e===tz.Dash?nz.BeforeComment:nz.InDeclaration}stateInDeclaration(e){(e===tz.Gt||this.fastForwardTo(tz.Gt))&&(this.cbs.ondeclaration(this.sectionStart,this.index),this.state=nz.Text,this.sectionStart=this.index+1)}stateInProcessingInstruction(e){(e===tz.Gt||this.fastForwardTo(tz.Gt))&&(this.cbs.onprocessinginstruction(this.sectionStart,this.index),this.state=nz.Text,this.sectionStart=this.index+1)}stateBeforeComment(e){e===tz.Dash?(this.state=nz.InCommentLike,this.currentSequence=az.CommentEnd,this.sequenceIndex=2,this.sectionStart=this.index+1):this.state=nz.InDeclaration}stateInSpecialComment(e){(e===tz.Gt||this.fastForwardTo(tz.Gt))&&(this.cbs.oncomment(this.sectionStart,this.index,0),this.state=nz.Text,this.sectionStart=this.index+1)}stateBeforeSpecialS(e){const t=32|e;t===az.ScriptEnd[3]?this.startSpecial(az.ScriptEnd,4):t===az.StyleEnd[3]?this.startSpecial(az.StyleEnd,4):(this.state=nz.InTagName,this.stateInTagName(e))}stateBeforeEntity(e){this.entityExcess=1,this.entityResult=0,e===tz.Number?this.state=nz.BeforeNumericEntity:e===tz.Amp||(this.trieIndex=0,this.trieCurrent=this.entityTrie[0],this.state=nz.InNamedEntity,this.stateInNamedEntity(e))}stateInNamedEntity(e){if(this.entityExcess+=1,this.trieIndex=TF(this.entityTrie,this.trieCurrent,this.trieIndex+1,e),0>this.trieIndex)return this.emitNamedEntity(),void this.index--;this.trieCurrent=this.entityTrie[this.trieIndex];const t=this.trieCurrent&gF.VALUE_LENGTH;if(t){const n=(t>>14)-1;if(this.allowLegacyEntity()||e===tz.Semi){const e=this.index-this.entityExcess+1;e>this.sectionStart&&this.emitPartial(this.sectionStart,e),this.entityResult=this.trieIndex,this.trieIndex+=n,this.entityExcess=0,this.sectionStart=this.index+1,0===n&&this.emitNamedEntity()}else this.trieIndex+=n}}emitNamedEntity(){if(this.state=this.baseState,0!==this.entityResult)switch((this.entityTrie[this.entityResult]&gF.VALUE_LENGTH)>>14){case 1:this.emitCodePoint(this.entityTrie[this.entityResult]&~gF.VALUE_LENGTH);break;case 2:this.emitCodePoint(this.entityTrie[this.entityResult+1]);break;case 3:this.emitCodePoint(this.entityTrie[this.entityResult+1]),this.emitCodePoint(this.entityTrie[this.entityResult+2])}}stateBeforeNumericEntity(e){(32|e)===tz.LowerX?(this.entityExcess++,this.state=nz.InHexEntity):(this.state=nz.InNumericEntity,this.stateInNumericEntity(e))}emitNumericEntity(e){const t=this.index-this.entityExcess-1;t+2+ +(this.state===nz.InHexEntity)!==this.index&&(t>this.sectionStart&&this.emitPartial(this.sectionStart,t),this.sectionStart=this.index+ +e,this.emitCodePoint(fF(this.entityResult))),this.state=this.baseState}stateInNumericEntity(e){e===tz.Semi?this.emitNumericEntity(!0):oz(e)?(this.entityResult=10*this.entityResult+(e-tz.Zero),this.entityExcess++):(this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state=this.baseState,this.index--)}stateInHexEntity(e){e===tz.Semi?this.emitNumericEntity(!0):oz(e)?(this.entityResult=16*this.entityResult+(e-tz.Zero),this.entityExcess++):function(e){return e>=tz.UpperA&&tz.UpperF>=e||e>=tz.LowerA&&tz.LowerF>=e}(e)?(this.entityResult=16*this.entityResult+((32|e)-tz.LowerA)+10,this.entityExcess++):(this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state=this.baseState,this.index--)}allowLegacyEntity(){return!this.xmlMode&&(this.baseState===nz.Text||this.baseState===nz.InSpecialTag)}cleanup(){this.running&&this.sectionStart!==this.index&&(this.state===nz.Text||this.state===nz.InSpecialTag&&0===this.sequenceIndex?(this.cbs.ontext(this.sectionStart,this.index),this.sectionStart=this.index):this.state!==nz.InAttributeValueDq&&this.state!==nz.InAttributeValueSq&&this.state!==nz.InAttributeValueNq||(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=this.index))}shouldContinue(){return this.buffer.length+this.offset>this.index&&this.running}parse(){for(;this.shouldContinue();){const e=this.buffer.charCodeAt(this.index-this.offset);switch(this.state){case nz.Text:this.stateText(e);break;case nz.SpecialStartSequence:this.stateSpecialStartSequence(e);break;case nz.InSpecialTag:this.stateInSpecialTag(e);break;case nz.CDATASequence:this.stateCDATASequence(e);break;case nz.InAttributeValueDq:this.stateInAttributeValueDoubleQuotes(e);break;case nz.InAttributeName:this.stateInAttributeName(e);break;case nz.InCommentLike:this.stateInCommentLike(e);break;case nz.InSpecialComment:this.stateInSpecialComment(e);break;case nz.BeforeAttributeName:this.stateBeforeAttributeName(e);break;case nz.InTagName:this.stateInTagName(e);break;case nz.InClosingTagName:this.stateInClosingTagName(e);break;case nz.BeforeTagName:this.stateBeforeTagName(e);break;case nz.AfterAttributeName:this.stateAfterAttributeName(e);break;case nz.InAttributeValueSq:this.stateInAttributeValueSingleQuotes(e);break;case nz.BeforeAttributeValue:this.stateBeforeAttributeValue(e);break;case nz.BeforeClosingTagName:this.stateBeforeClosingTagName(e);break;case nz.AfterClosingTagName:this.stateAfterClosingTagName(e);break;case nz.BeforeSpecialS:this.stateBeforeSpecialS(e);break;case nz.InAttributeValueNq:this.stateInAttributeValueNoQuotes(e);break;case nz.InSelfClosingTag:this.stateInSelfClosingTag(e);break;case nz.InDeclaration:this.stateInDeclaration(e);break;case nz.BeforeDeclaration:this.stateBeforeDeclaration(e);break;case nz.BeforeComment:this.stateBeforeComment(e);break;case nz.InProcessingInstruction:this.stateInProcessingInstruction(e);break;case nz.InNamedEntity:this.stateInNamedEntity(e);break;case nz.BeforeEntity:this.stateBeforeEntity(e);break;case nz.InHexEntity:this.stateInHexEntity(e);break;case nz.InNumericEntity:this.stateInNumericEntity(e);break;default:this.stateBeforeNumericEntity(e)}this.index++}this.cleanup()}finish(){this.state===nz.InNamedEntity&&this.emitNamedEntity(),this.index>this.sectionStart&&this.handleTrailingData(),this.cbs.onend()}handleTrailingData(){const e=this.buffer.length+this.offset;this.state===nz.InCommentLike?this.currentSequence===az.CdataEnd?this.cbs.oncdata(this.sectionStart,e,0):this.cbs.oncomment(this.sectionStart,e,0):this.state===nz.InNumericEntity&&this.allowLegacyEntity()||this.state===nz.InHexEntity&&this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state===nz.InTagName||this.state===nz.BeforeAttributeName||this.state===nz.BeforeAttributeValue||this.state===nz.AfterAttributeName||this.state===nz.InAttributeName||this.state===nz.InAttributeValueSq||this.state===nz.InAttributeValueDq||this.state===nz.InAttributeValueNq||this.state===nz.InClosingTagName||this.cbs.ontext(this.sectionStart,e)}emitPartial(e,t){this.baseState!==nz.Text&&this.baseState!==nz.InSpecialTag?this.cbs.onattribdata(e,t):this.cbs.ontext(e,t)}emitCodePoint(e){this.baseState!==nz.Text&&this.baseState!==nz.InSpecialTag?this.cbs.onattribentity(e):this.cbs.ontextentity(e)}}const lz=new Set(["input","option","optgroup","select","button","datalist","textarea"]),uz=new Set(["p"]),pz=new Set(["thead","tbody"]),dz=new Set(["dd","dt"]),hz=new Set(["rt","rp"]),fz=new Map([["tr",new Set(["tr","th","td"])],["th",new Set(["th"])],["td",new Set(["thead","th","td"])],["body",new Set(["head","link","script"])],["li",new Set(["li"])],["p",uz],["h1",uz],["h2",uz],["h3",uz],["h4",uz],["h5",uz],["h6",uz],["select",lz],["input",lz],["output",lz],["button",lz],["datalist",lz],["textarea",lz],["option",new Set(["option"])],["optgroup",new Set(["optgroup","option"])],["dd",dz],["dt",dz],["address",uz],["article",uz],["aside",uz],["blockquote",uz],["details",uz],["div",uz],["dl",uz],["fieldset",uz],["figcaption",uz],["figure",uz],["footer",uz],["form",uz],["header",uz],["hr",uz],["main",uz],["nav",uz],["ol",uz],["pre",uz],["section",uz],["table",uz],["ul",uz],["rt",hz],["rp",hz],["tbody",pz],["tfoot",pz]]),mz=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]),gz=new Set(["math","svg"]),yz=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignobject","desc","title"]);class vz{constructor(e,t={}){var n,r,s,i,o;this.options=t,this.startIndex=0,this.endIndex=0,this.openTagStart=0,this.tagname="",this.attribname="",this.attribvalue="",this.attribs=null,this.stack=[],this.foreignContext=[],this.buffers=[],this.bufferOffset=0,this.writeIndex=0,this.ended=!1,this.cbs=null!=e?e:{},this.lowerCaseTagNames=null!==(n=t.lowerCaseTags)&&void 0!==n?n:!t.xmlMode,this.lowerCaseAttributeNames=null!==(r=t.lowerCaseAttributeNames)&&void 0!==r?r:!t.xmlMode,this.tokenizer=new(null!==(s=t.Tokenizer)&&void 0!==s?s:cz)(this.options,this),null===(o=(i=this.cbs).onparserinit)||void 0===o||o.call(i,this)}ontext(e,t){var n,r;const s=this.getSlice(e,t);this.endIndex=t-1,null===(r=(n=this.cbs).ontext)||void 0===r||r.call(n,s),this.startIndex=t}ontextentity(e){var t,n;const r=this.tokenizer.getSectionStart();this.endIndex=r-1,null===(n=(t=this.cbs).ontext)||void 0===n||n.call(t,hF(e)),this.startIndex=r}isVoidElement(e){return!this.options.xmlMode&&mz.has(e)}onopentagname(e,t){this.endIndex=t;let n=this.getSlice(e,t);this.lowerCaseTagNames&&(n=n.toLowerCase()),this.emitOpenTag(n)}emitOpenTag(e){var t,n,r,s;this.openTagStart=this.startIndex,this.tagname=e;const i=!this.options.xmlMode&&fz.get(e);if(i)for(;this.stack.length>0&&i.has(this.stack[this.stack.length-1]);){const e=this.stack.pop();null===(n=(t=this.cbs).onclosetag)||void 0===n||n.call(t,e,!0)}this.isVoidElement(e)||(this.stack.push(e),gz.has(e)?this.foreignContext.push(!0):yz.has(e)&&this.foreignContext.push(!1)),null===(s=(r=this.cbs).onopentagname)||void 0===s||s.call(r,e),this.cbs.onopentag&&(this.attribs={})}endOpenTag(e){var t,n;this.startIndex=this.openTagStart,this.attribs&&(null===(n=(t=this.cbs).onopentag)||void 0===n||n.call(t,this.tagname,this.attribs,e),this.attribs=null),this.cbs.onclosetag&&this.isVoidElement(this.tagname)&&this.cbs.onclosetag(this.tagname,!0),this.tagname=""}onopentagend(e){this.endIndex=e,this.endOpenTag(!1),this.startIndex=e+1}onclosetag(e,t){var n,r,s,i,o,a;this.endIndex=t;let c=this.getSlice(e,t);if(this.lowerCaseTagNames&&(c=c.toLowerCase()),(gz.has(c)||yz.has(c))&&this.foreignContext.pop(),this.isVoidElement(c))this.options.xmlMode||"br"!==c||(null===(r=(n=this.cbs).onopentagname)||void 0===r||r.call(n,"br"),null===(i=(s=this.cbs).onopentag)||void 0===i||i.call(s,"br",{},!0),null===(a=(o=this.cbs).onclosetag)||void 0===a||a.call(o,"br",!1));else{const e=this.stack.lastIndexOf(c);if(-1!==e)if(this.cbs.onclosetag){let t=this.stack.length-e;for(;t--;)this.cbs.onclosetag(this.stack.pop(),0!==t)}else this.stack.length=e;else this.options.xmlMode||"p"!==c||(this.emitOpenTag("p"),this.closeCurrentTag(!0))}this.startIndex=t+1}onselfclosingtag(e){this.endIndex=e,this.options.xmlMode||this.options.recognizeSelfClosing||this.foreignContext[this.foreignContext.length-1]?(this.closeCurrentTag(!1),this.startIndex=e+1):this.onopentagend(e)}closeCurrentTag(e){var t,n;const r=this.tagname;this.endOpenTag(e),this.stack[this.stack.length-1]===r&&(null===(n=(t=this.cbs).onclosetag)||void 0===n||n.call(t,r,!e),this.stack.pop())}onattribname(e,t){this.startIndex=e;const n=this.getSlice(e,t);this.attribname=this.lowerCaseAttributeNames?n.toLowerCase():n}onattribdata(e,t){this.attribvalue+=this.getSlice(e,t)}onattribentity(e){this.attribvalue+=hF(e)}onattribend(e,t){var n,r;this.endIndex=t,null===(r=(n=this.cbs).onattribute)||void 0===r||r.call(n,this.attribname,this.attribvalue,e===rz.Double?'"':e===rz.Single?"'":e===rz.NoValue?void 0:null),this.attribs&&!{}.hasOwnProperty.call(this.attribs,this.attribname)&&(this.attribs[this.attribname]=this.attribvalue),this.attribvalue=""}getInstructionName(e){const t=e.search(/\s|\//);let n=0>t?e:e.substr(0,t);return this.lowerCaseTagNames&&(n=n.toLowerCase()),n}ondeclaration(e,t){this.endIndex=t;const n=this.getSlice(e,t);if(this.cbs.onprocessinginstruction){const e=this.getInstructionName(n);this.cbs.onprocessinginstruction("!"+e,"!"+n)}this.startIndex=t+1}onprocessinginstruction(e,t){this.endIndex=t;const n=this.getSlice(e,t);if(this.cbs.onprocessinginstruction){const e=this.getInstructionName(n);this.cbs.onprocessinginstruction("?"+e,"?"+n)}this.startIndex=t+1}oncomment(e,t,n){var r,s,i,o;this.endIndex=t,null===(s=(r=this.cbs).oncomment)||void 0===s||s.call(r,this.getSlice(e,t-n)),null===(o=(i=this.cbs).oncommentend)||void 0===o||o.call(i),this.startIndex=t+1}oncdata(e,t,n){var r,s,i,o,a,c,l,u,p,d;this.endIndex=t;const h=this.getSlice(e,t-n);this.options.xmlMode||this.options.recognizeCDATA?(null===(s=(r=this.cbs).oncdatastart)||void 0===s||s.call(r),null===(o=(i=this.cbs).ontext)||void 0===o||o.call(i,h),null===(c=(a=this.cbs).oncdataend)||void 0===c||c.call(a)):(null===(u=(l=this.cbs).oncomment)||void 0===u||u.call(l,`[CDATA[${h}]]`),null===(d=(p=this.cbs).oncommentend)||void 0===d||d.call(p)),this.startIndex=t+1}onend(){var e,t;if(this.cbs.onclosetag){this.endIndex=this.startIndex;for(let e=this.stack.length;e>0;this.cbs.onclosetag(this.stack[--e],!0));}null===(t=(e=this.cbs).onend)||void 0===t||t.call(e)}reset(){var e,t,n,r;null===(t=(e=this.cbs).onreset)||void 0===t||t.call(e),this.tokenizer.reset(),this.tagname="",this.attribname="",this.attribs=null,this.stack.length=0,this.startIndex=0,this.endIndex=0,null===(r=(n=this.cbs).onparserinit)||void 0===r||r.call(n,this),this.buffers.length=0,this.bufferOffset=0,this.writeIndex=0,this.ended=!1}parseComplete(e){this.reset(),this.end(e)}getSlice(e,t){for(;e-this.bufferOffset>=this.buffers[0].length;)this.shiftBuffer();let n=this.buffers[0].slice(e-this.bufferOffset,t-this.bufferOffset);for(;t-this.bufferOffset>this.buffers[0].length;)this.shiftBuffer(),n+=this.buffers[0].slice(0,t-this.bufferOffset);return n}shiftBuffer(){this.bufferOffset+=this.buffers[0].length,this.writeIndex--,this.buffers.shift()}write(e){var t,n;this.ended?null===(n=(t=this.cbs).onerror)||void 0===n||n.call(t,Error(".write() after done!")):(this.buffers.push(e),this.tokenizer.running&&(this.tokenizer.write(e),this.writeIndex++))}end(e){var t,n;this.ended?null===(n=(t=this.cbs).onerror)||void 0===n||n.call(t,Error(".end() after done!")):(e&&this.write(e),this.ended=!0,this.tokenizer.end())}pause(){this.tokenizer.pause()}resume(){for(this.tokenizer.resume();this.tokenizer.running&&this.buffers.length>this.writeIndex;)this.tokenizer.write(this.buffers[this.writeIndex++]);this.ended&&this.tokenizer.end()}parseChunk(e){this.write(e)}done(e){this.end(e)}}const bz=function(e,t){return function n(r,s,i=!0){if(null==r)throw Error("cheerio.load() expects a string");const o={...Rj,...Nj(s)},a=e(r,o,i,null);class c extends NH{_make(e,t){const n=l(e,t);return n.prevObject=this,n}_parse(t,n,r,s){return e(t,n,r,s)}_render(e){return t(e,this.options)}}function l(t,n,r=a,s){if(t&&_$(t))return t;const i={...o,...Nj(s)},l="string"==typeof r?[e(r,i,!1,null)]:"length"in r?r:[r],u=_$(l)?l:new c(l,null,i);if(u._root=u,!t)return new c(void 0,u,i);const p="string"==typeof t&&T$(t)?e(t,i,!1,null).children:(d=t).name||"root"===d.type||"text"===d.type||"comment"===d.type?[t]:Array.isArray(t)?t:void 0;var d;const h=new c(p,u,i);if(p)return h;if("string"!=typeof t)throw Error("Unexpected type of selector");let f=t;const m=n?"string"==typeof n?T$(n)?new c([e(n,i,!1,null)],u,i):(f=`${n} ${f}`,u):_$(n)?n:new c(Array.isArray(n)?n:[n],u,i):u;return m?m.find(f):h}return Object.assign(l,E$,{load:n,_root:a,_options:o,fn:c.prototype,prototype:c.prototype}),l}}((function(e,t,n,r){if("undefined"!=typeof Buffer&&Buffer.isBuffer(e)&&(e=""+e),"string"==typeof e)return((e,t,n,r)=>t.xmlMode||t._useHtmlParser2?function(e,t){const n=new cF(void 0,t);return new vz(n,t).end(e),n.root}(e,t):function(e,t,n,r){const s={scriptingEnabled:"boolean"!=typeof t.scriptingEnabled||t.scriptingEnabled,treeAdapter:Zq,sourceCodeLocationInfo:t.sourceCodeLocationInfo};return n?function(e,t){return JG.parse(e,t)}(e,s):function(e,t,n){"string"==typeof e&&(n=t,t=e,e=null);const r=JG.getFragmentParser(e,n);return r.tokenizer.write(t,!0),r.getFragment()}(r,e,s)}(e,t,n,r))(e,t,n,r);const s=e;if(!Array.isArray(s)&&rF(s))return s;const i=new Wj([]);return gH(s,i),i}),((e,t)=>t.xmlMode||t._useHtmlParser2?BF(e,t):function(e){const t="length"in e?e:[e];for(let e=0;t.length>e;e+=1){const n=t[e];rF(n)&&[].splice.call(t,e,1,...n.children)}let n="";for(let e=0;t.length>e;e+=1)n+=Qq(t[e],ez);return n}(e)));bz([]);const Ez=new class extends Aj{async init(e){return this.http.defaults.headers["User-Agent"]="Mozilla/5.0 (iPhone; CPU iPhone OS 11_1_1 like Mac OS X) AppleWebKit/604.3.5 (KHTML, like Gecko) Mobile/15B150 MicroMessenger/6.6.1 NetType/WIFI Language/zh_CN Edg/115.0.0.0",await super.init(e)}async home({}){return{class:[{type_id:2,type_name:"电视剧"},{type_id:1,type_name:"电影"},{type_id:4,type_name:"动漫"},{type_id:15,type_name:"儿童"},{type_id:6,type_name:"综艺"},{type_id:3,type_name:"纪录片"}],list:[]}}async _category({id:e,page:t}){const n=t||1,r={list:[],page:n,pagecount:n},s={page_id:n,mode:11,channel_id:e,smart_tag:"",three_category_id:"",content_type:"",is_purchase:"",ret_num:21,pos:1,type:"list",market_release_date_level:"-",post:"list",from:"mobile_videolib",is_unified_interface:1,version:"1.0.0",device_id:"uqithti8erxbz9u1lsj6jx13",play_platform:"H5_QIYI",passport_id:"",session:""},i=await this.fetch("https://pub.m.iqiyi.com/h5/main/recVideos/lib/",{params:s});if("A00000"!==i.code)throw Error(i.code||"err");const o=i.data||{};o.nextParams&&o.nextParams.hasNext&&(r.pagecount=n+1,r.session=o.nextParams.session);for(const e of o.videos||[]){const t={vod_id:null,vod_name:e.albumName||e.shortTitle,vod_pic:null,vod_remarks:e.lowerRightCorner||e.duration||e.desc||e.vt};let n=e.pageUrl||"";/^\/\//.test(n)&&(n="https:"+n),t.vod_id=n;let s=e.albumImageUrl||e.qualityImageUrl||"";/^\/\//.test(s)&&(s="https:"+s),t.vod_pic=s,r.list.push(t)}return r}async _detail_api(e){const t=e.match(/_(\w+)\.html/i);if(!t)throw Error("未匹配到视频id");const n=`https://pub.m.iqiyi.com/h5/main/v/${t[1]}/`,r={block:vj.enc.Base64.stringify(vj.enc.Utf8.parse('{"paopao":"605251_comments","extendbar":"605091_comment","detail":"808201_comment"}')),rpage:vj.enc.Base64.stringify(vj.enc.Utf8.parse(e)),browser:"weixin"},s=await this.fetch(n,{params:r});if("A00000"!==s.code)throw Error(s.code||"err");return s.data}async _detail({id:e}){const t=Array.isArray(e)?e:[e],n={list:[]};for(const e of t){const r=(await this.fetch(e)).match(/window\.__INITIAL_STATE__=(\{.*?\});/i);if(!r)throw Error("播放页解析异常");const s=JSON.parse(r[1].replace(/undefined/g,"null"));if(s.libData){const e=s.libData,t={vod_id:e.videoInfo.pageUrl,vod_name:e.videoInfo.title,vod_pic:"",type_name:e.videoInfo.channelName,vod_year:e.videoInfo.year,vod_area:e.videoInfo.tags,vod_remarks:e.videoInfo.lowerRightCorner,vod_actor:e.videoInfo.mainCharacters,vod_director:e.videoInfo.directors,vod_content:e.videoInfo.desc,vod_play_from:"",vod_play_url:""};if(e.siteInfos&&(t.vod_play_from=e.siteInfos[0].site),e?.playListInfos?.length){const n=[];for(const t of e.playListInfos[0].list)n.push(`${t.playOrder||t.title}$${t.pageUrl}`);t.vod_play_url=n.join("#")}else t.vod_play_url="第1集$"+e.videoInfo.pageUrl;n.list.push(t)}else if(s.play){const r=s.play;if(!r.videoInfo){const t=await this._detail_api(e);r.videoInfo=t.playVideoInfo,t.playAlbumInfo&&(r.albumInfo=t.playAlbumInfo),t.videoList&&(r.videoList=t.videoList)}const i={vod_id:e,vod_name:r.albumInfo.albumName||r.videoInfo.videoName,type_name:r.videoInfo.channelName,vod_year:r.albumInfo.albumIssueTime||r.videoInfo.issueTime,vod_area:r.videoInfo.videoLocation||r.videoInfo.tags,vod_remarks:r.albumInfo.showContent||r.videoInfo.score,vod_actor:r.videoInfo.mainActors||r.videoInfo.guests,vod_director:r.videoInfo.directors,vod_content:r.albumInfo.desc||r.videoInfo.desc,vod_play_from:"iqiyi",vod_play_url:""};if(1===t.length){const t=[],n=r.videoList||{};if(n.videos&&n.videos.length>0){for(const e of n.videos){if(3==e.type)continue;let n=e.pageUrl;/^\/\//.test(n)&&(n="https:"+n),t.push(`${e.title||e.pd}$${n}`)}const e="https://pub.m.iqiyi.com/h5/main/videoList/album/",s={albumId:r.albumInfo.qipuId,size:n.pageSize,page:null,needPrevue:"true",needVipPrevue:"true"};for(;n.totalPages>n.currentPage;){s.page=n.currentPage+1;const r=await this.fetch(e,{params:s});if("A00000"!==r.code)break;n.currentPage=r.data.currentPage;for(const e of r.data.videos){if(3==e.type)continue;let n=e.pageUrl;/^\/\//.test(n)&&(n="https:"+n),t.push(`${e.title||e.pd}$${n}`)}}}else if(r.videoInfo.superAlbumId){const n="https://pub.m.iqiyi.com/h5/main/videoList/superAlbum/",s={qipuId:r.videoInfo.superAlbumId,channelId:r.channelId},i=await this.fetch(n,{params:s});if("A00000"===i.code)for(const e of i.data.items){let n=e.pageUrl;/^\/\//.test(n)&&(n="https:"+n),t.push(`${e.name}$${n}`)}else t.push("1"+e)}else t.push("1"+e);i.vod_play_url=t.join("#")}n.list.push(i)}}return n}async _search({wd:e}){const t={list:[],page:1,pagecount:1,total:1},n={key:e},r=await this.fetch("https://m.iqiyi.com/search.html",{params:n}),s=bz(r);for(const e of s("div.m-box div.m-box-items div.m-pic-text")){const n={vod_id:"",vod_name:"",vod_pic:"",vod_remarks:""},r=s(e).find("div.piclist-img a.piclist-link");if(r.length>0){const e=r.attr("href");n.vod_id="https://m.iqiyi.com"+e;const t=(r.attr("style")||"").match(/background-image:url\((.*?)\);/i);t&&(n.vod_pic=t[1]);const i=s(r).find("div.c-rb");n.vod_remarks=(i?.text()||"").trim()}const i=s(e).find("div.piclist-title div.c-title");n.vod_name=(i?.text()||"").trim(),t.list.push(n)}return t}}("iqiyi","爱奇艺");var _z={meta:Ez.meta,api:async e=>{e.get("",((e,t)=>Ez.spider(e))),e.post("/init",((e,t)=>Ez.init(e.server))),e.post("/home",((e,t)=>Ez.home(e.body))),e.post("/category",((e,t)=>Ez.category(e.body))),e.post("/detail",((e,t)=>Ez.detail(e.body))),e.post("/play",((e,t)=>Ez.play(e.body))),e.post("/search",((e,t)=>Ez.search(e.body)))}};const Az=new class extends Aj{async init(e){const t=e.config||{};return this.cats="电视剧,电影,综艺,动漫,少儿,纪录片,文化,亲子,教育,搞笑,生活,体育,音乐,游戏".split(","),this.session={},this.url="https://www.youku.com",this.http.defaults.headers.Referer="https://www.youku.com",t.account?.youku&&(this.setCookie(t.account.youku),t.account?.youku_ckey&&(this.ckey=t.account.youku_ckey.trim())),this.hasCookie("cna")||await super.fetch("https://log.mmstat.com/eg.js",{params:{t:(new Date).getTime()}}),await super.init(e)}async fetch(e,t){const n=await super.fetch(`${this.url}${e}`,{params:t});if(!n.success)throw Error(`${n.code} ${n.message}`);return n.data}async home({}){return{class:this.cats.map(((e,t)=>({type_id:t,type_name:e}))),list:[]}}async _category({id:e,page:t}){const n=parseInt(e),r=t||1,s={list:[],page:r,pagecount:r},i={params:JSON.stringify({type:this.cats[n]}),pageNo:r};if(1==r)i.optionRefresh=1,this.session[n]=null;else{if(!this.session[n])throw Error("no session err!");i.session=JSON.stringify(this.session[n])}const o=(await this.fetch("/category/data",i)).filterData;for(const e of o.listData){const t={vod_id:"",vod_name:e.title,vod_pic:e.img,vod_remarks:e.summary||e.rightTagText},n=e.videoLink.match(/id_([\w=]+)\.html/i);t.vod_id=n[1],s.list.push(t)}return o.hasMore&&(s.pagecount+=1,this.session[n]=o.session),s}async _detail({id:e}){const t=Array.isArray(e)?e:[e],n={list:[]};for(const e of t){const t=(await this.http.get(`https://v.youku.com/v_nextstage/id_${e}.html`)).data.match(/window\.__INITIAL_DATA__ =(\{.*?\});/i);if(!t)throw Error("播放页解析异常");const r=JSON.parse(t[1].replace(/undefined/g,"null")),s=r.data.data.data.extra,i=r.data.data.nodes[0].nodes,o={vod_id:e,vod_name:s.showName,vod_pic:s.showImg,type_name:s.videoCategory,vod_year:null,vod_area:null,vod_remarks:null,vod_actor:null,vod_director:null,vod_content:null,vod_play_from:"youku",vod_play_url:`1$https://v.youku.com/v_show/id_${s.videoId}.html`};for(const e of i)if(20009===e.type){const t=[],n=[];for(const r of e.nodes)if(20010===r.type){o.vod_content=r.data.desc,o.vod_remarks=r.data.updateInfo;const e=r.data.introSubTitle.split("·",3);1==e.length?o.vod_year=e[0]:3==e.length&&(o.vod_area=e[0],o.vod_year=e[1])}else 10011===r.type&&("导演"===r.data.subtitle?n.push(r.data.title):t.push(r.data.title));o.vod_actor=t.join(", "),o.vod_director=n.join(",")}else if(10013===e.type){const t=[];for(const n of e.nodes)10013===n.type&&t.push(`${n.data.stage}$https://v.youku.com/v_show/id_${n.data.action.value}.html`);o.vod_play_url=t.join("#")}n.list.push(o)}return n}async _search({wd:e}){const t={list:[],page:1,pagecount:1,total:1},n=(await this.http.get("https://search.youku.com/search_video",{params:{keyword:e}})).data.match(/window\.__INITIAL_DATA__ =(\{.*?\});/i);if(!n)throw Error("搜索页解析异常");const r=JSON.parse(n[1].replace(/undefined/g,"null"));for(const e of r.pageComponentList){if(!e.commonData||0===Object.keys(e.commonData).length)continue;const n=e.commonData;0!=n.isYouku&&0!=n.hasYouku&&t.list.push({vod_id:n.showId,vod_name:n.titleDTO.displayName,vod_pic:n.posterDTO.vThumbUrl,vod_remarks:n.stripeBottom})}return t}async _play({id:e}){if(!this.ckey)throw Error("未配置ckey");const t=e.match(/id_([\w=]+)\.html/i);if(!t)throw Error("不支持的视频链接");const n=this.cookie.cna,r={vid:t[1],ccode:"0502",client_ip:"192.168.1.1",client_ts:Math.floor(Date.now()/1e3),utid:n,ckey:this.ckey},s=(await this.http.get("https://ups.youku.com/ups/get.json",{params:r})).data,i=s.data.video?.stream_ext||{},o={};for(const e of s.data.stream){const t=e.audio_lang;o[t]||(o[t]=[]),o[t].push({url:e.m3u8_url,type:i[t]?.[e.stream_type]?.clarity_short_title||e.stream_type,width:e.width,height:e.height,size:e.size})}const a=[];for(const e in o){o[e].sort(((e,t)=>t.height-e.height));for(const t of o[e])a.push("default"===e?t.type:`${e} ${t.type}`),a.push(t.url)}return{parse:0,url:a,header:{Referer:e,"User-Agent":this.http.defaults.headers["User-Agent"]}}}}("youku","优酷");var Sz={meta:Az.meta,api:async e=>{e.get("",((e,t)=>Az.spider(e))),e.post("/init",((e,t)=>Az.init(e.server))),e.post("/home",((e,t)=>Az.home(e.body))),e.post("/category",((e,t)=>Az.category(e.body))),e.post("/detail",((e,t)=>Az.detail(e.body))),e.post("/play",((e,t)=>Az.play(e.body))),e.post("/search",((e,t)=>Az.search(e.body)))}},Tz=Object.freeze({__proto__:null,default:Sz,vod:Az});const wz=new class extends Aj{async init(e){const t=e.config||{};let n;Object.assign(this.cookie,{pgv_pvid:Math.floor(65536*Math.random()).toString(16).padStart(4,"0"),vversion_name:"8.5.50"}),t.account?.qq&&(this.setCookie(t.account.qq),this.ck=t.account.qq);try{const e=u.resolve("./player.js");await k.access(e,k.constants.F_OK),n=e}catch(e){n=null}if(n)try{const e=new(0,(await import("jsdom")).JSDOM)(`<html><head></head><body><script src="file://${n}"><\/script></body></html>`,{resources:"usable",runScripts:"dangerously",url:"https://v.qq.com/x/cover/mzc00200i3s1yd7/d0048nosrlr.html",userAgent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36 Edg/122.0.0.0"});e.window.document.addEventListener("load",(()=>{e.window.SuperPlayerExport&&(this.QimeiClient=e.window.SuperPlayerExport.jc,this.getCkey8=e.window.SuperPlayerExport.zs)}))}catch{}return await super.init(e)}async home({}){return{class:[{type_id:"tv",type_name:"电视剧"},{type_id:"movie",type_name:"电影"},{type_id:"cartoon",type_name:"动漫"},{type_id:"child",type_name:"少儿"},{type_id:"variety",type_name:"综艺"},{type_id:"doco",type_name:"纪录片"}],list:[]}}async _category({id:e,page:t}){const n=t||1,r={list:[],page:n,pagecount:n},s={_all:1,append:1,sort:75,listpage:1,channel:e,pagesize:21,offset:21*(n-1)},i=await this.fetch("https://v.qq.com/x/bu/pagesheet/list",{params:s}),o=bz(i);for(const e of o("div.list_item a.figure")){const t={vod_id:o(e).attr("data-float"),vod_name:o(e).attr("title")},n=o(e).find("img.figure_pic");if(n.length>0){let e=n.attr("src")||"";e.startsWith("//")&&(e="https:"+e),t.vod_pic=e}const s=o(e).find("div.figure_caption");s.length>0&&(t.vod_remarks=s.text().trim()),r.list.push(t)}const a=o("div.mod_pages button.page_num");return a.length>0&&(r.pagecount=parseInt(a.last().text().trim(),10)),r}async fetchPage(e,t){const n={cid:"",id_type:"1",lid:"",page_context:t,page_id:"vsite_episode_list",page_size:"50",page_type:"detail_operation",req_from:"web_mobile",vid:""};Object.assign(n,e);const r=(await this.http.post("https://pbaccess.video.qq.com/trpc.universal_backend_service.page_server_rpc.PageServer/GetPageData",{has_cache:1,page_params:n},{params:{video_appid:"1200029",vplatform:2},headers:{Referer:"https://m.v.qq.com/"}})).data;if(0!=r.ret)throw Error(r.msg);return r.data.module_list_datas[0].module_datas[0]}async play_urls(e){let t;try{t=e.playlist.playList.tabs}catch{t=[]}const n=[];if(1>t.length){for(const t of e.playlist.playList.list[0])n.push(`${t.playTitle}$https://v.qq.com/x/cover/${t.cid}/${t.vid}.html`);return n}const r={cid:e.global.currentCid,vid:""};for(let e=0;t.length>e;e++){const s=t[e],i=(await this.fetchPage(r,e>0?s.context:null)).item_data_lists.item_datas;for(let t=0;i.length>t;t++){const s=i[t].item_params;0===parseInt(s.is_trailer)&&(0===e&&0===t&&(r.vid=s.vid),n.push(`${s.play_title}$https://v.qq.com/x/cover/${s.cid}/${s.vid}.html`))}}return n}async _detail({id:e}){const t=Array.isArray(e)?e:[e],n={list:[]},r={pagelet:1};for(const e of t){r.cid=e;const s=await this.fetch("https://m.v.qq.com/x/m/play",{params:r}),i=bz(s);let o=null;for(const e of i("script"))if(/window\.__PINIA__\s*=/i.test(e.children[0]?.data)){const t=e.children[0]?.data.replace(/window\.__PINIA__\s*=/i,"").replace(/undefined/g,"null");o=JSON.parse(t);break}if(!o)throw Error("播放页解析异常");const a=o.global.coverInfo,c={vod_id:o.global.currentCid,vod_name:a.title,vod_pic:a.new_pic_vt||a.new_pic_hz,type_name:a.type_name,vod_year:a.publish_date,vod_area:a.area_name,vod_remarks:a.timelong||a.second_title,vod_actor:(a.leading_actor||[]).join(", "),vod_director:(a.director||[]).join(", "),vod_content:a.description,vod_play_from:"超清$$$高清$$$标清",vod_play_url:""};if(1===t.length){const e=(await this.play_urls(o)).join("#");c.vod_play_url=`${e}$$$${e}$$$${e}`}n.list.push(c)}return n}async _search({wd:e}){const t={list:[],page:1,pagecount:1,total:1},n={stag:"fypage",q:e},r=await this.fetch("https://v.qq.com/x/search/",{params:n}),s=bz(r);for(const e of s("div.result_item.result_item_v")){const n={vod_id:s(e).attr("data-id"),vod_name:"",vod_pic:""},r=s(e).find("span.type");r.length>0&&(n.type_name=r.text().trim());const i=s(e).find("a.figure.result_figure img.figure_pic");if(i.length>0){const e=[...i.attr("alt")||""].filter((e=>e.charCodeAt(0)>=32)).join("");n.vod_name=e.trim();let t=i.attr("src")||"";/^\/\//i.test(t)&&(t="https:"+t),n.vod_pic=t}const o=s(e).find("span.figure_caption");o.length>0&&(n.vod_remarks=o.text().trim()),t.list.push(n)}return t}async _play({flag:e,id:t}){if(!this.ck)throw Error("未配置cookie");if(/^https?:/i.test(this.ck)){const n=await this.http.post(this.ck,{flag:e,url:t});if(0===n.data.parse)return n.data;throw Error(n.data.msg||"解析失败！")}const n={url:t,flag:e,ck:this.ck};return(await this.http.get("http://128.204.223.47:32092/parse/qq",{params:n})).data}async getCkey(e){if(!this.getCkey8||!this.QimeiClient)throw Error("未实现...");if(!(e.guid&&e.vid&&e.platform&&e.appVer))throw Error("必要参数不能为空");if(!e.h38){const t=new this.QimeiClient({appKey:"0WEB05IY85DVOASP"});t.setUserId({qqOpenID:void 0,wxOpenID:void 0,guid:e.guid}),e.h38=t.h38}return this.getCkey8(e)}async sign(e){if(!this.QimeiClient)throw Error("未实现...");const t=new this.QimeiClient({appKey:"15d45fa36b498329"});e.h38&&(t.h38=e.h38);const n=Date.now(),r=`g=${e.guid}&t=${n}&r=${function(e){for(var t="",n=0;10>n;n++)t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(62*Math.random()));return t}()}`;return{h38:t.h38,q36:t.q36,s:await t.sign(r,n,!1),o_data:r}}}("qq","腾讯视频");var xz={meta:wz.meta,api:async e=>{e.get("",((e,t)=>wz.spider(e))),e.post("/init",((e,t)=>wz.init(e.server))),e.post("/home",((e,t)=>wz.home(e.body))),e.post("/category",((e,t)=>wz.category(e.body))),e.post("/detail",((e,t)=>wz.detail(e.body))),e.post("/play",((e,t)=>wz.play(e.body))),e.post("/search",((e,t)=>wz.search(e.body)))}},kz=Object.freeze({__proto__:null,default:xz,vod:wz});const Cz=new class extends Aj{async fetch(e,t){const n=await super.fetch(e,{params:t});if(0!==n.errno)throw Error(n.msg);return n}async init(e){return this.http.defaults.headers.Referer="https://www.360kan.com",await super.init(e)}async _home({}){const e={class:[{type_id:2,type_name:"电视剧"},{type_id:1,type_name:"电影"},{type_id:4,type_name:"动漫"},{type_id:3,type_name:"综艺"}],list:[]},t=await this.fetch("https://api.web.360kan.com/v1/rank",{cat:1,size:8});for(let n of t.data)e.list.push({vod_id:`${n.cat}_${n.ent_id}`,vod_name:n.title,vod_pic:n.cover,vod_remarks:n.upinfo,vod_content:n.description});return e}async _category({id:e,page:t}){const n=e,r=t||1,s={list:[],page:r,pagecount:r},i=(await this.fetch("https://api.web.360kan.com/v1/filter/list",{catid:n,size:21,pageno:r})).data;for(let e of i.movies){const t={vod_id:`${n}_${e.id}`,vod_name:e.title,vod_pic:"",vod_remarks:e.doubanscore||e.comment};let r=e.cdncover||e.cover||"";/^https?:\/\//i.test(r)||(r="https:"+r),t.vod_pic=r,s.list.push(t)}return s.total=i.total,s.pagecount=Math.ceil(i.total/21),s}async _detail({id:e}){const t=Array.isArray(e)?e:[e],n="https://api.web.360kan.com/v1/detail",r={list:[]};for(const e of t){const s=e.split("_",2),i={cat:s[0],id:s[1]},o=(await this.fetch(n,i)).data,a={vod_id:e,vod_name:o.title,vod_pic:o.cdncover,type_name:o.moviecategory?o.moviecategory.slice(-1)[0]:"",vod_year:o.pubdate,vod_area:(o.area||[]).join(", "),vod_remarks:o.doubanscore,vod_actor:(o.actor||[]).join(", "),vod_director:(o.director||[]).join(", "),vod_content:o.description,vod_play_from:"",vod_play_url:""};if(1===t.length){const e=[],t=[];if(o.allepidetail)for(const r in o.allupinfo){const s=[],a=o.allupinfo[r];if(a>(o.allepidetail[r]||[]).length){const e=50;for(let t=0;Math.ceil(a/e)>t;t++){const o=t*e+1;let c=o+e-1;c>a&&(c=a),Object.assign(i,{start:o,end:c,site:r});const l=await super.fetch(n,{params:i});if(1!==l.errno)for(const e in l.data.allepidetail[r]){const t=l.data.allepidetail[r][e];s.push(`${t.playlink_num}$${t.url}`)}}}else for(const e in o.allepidetail[r]){const t=o.allepidetail[r][e];s.push(`${t.playlink_num}$${t.url}`)}e.push(r),t.push(s.join("#"))}else if(o.playlinksdetail)for(const n in o.playlinksdetail){const r=[];r.push(`${n}$${o.playlinksdetail[n].default_url}`),e.push(n),t.push(r.join("#"))}a.vod_play_from=e.join("$$$"),a.vod_play_url=t.join("$$$")}r.list.push(a)}return r}async _search({wd:e}){const t={list:[],page:1,pagecount:1,total:1},n=await super.fetch("https://api.so.360kan.com/index",{params:{kw:e}});if(n.data&&n.data.longData)for(const e in n.data.longData.rows||[]){const r=n.data.longData.rows[e];t.list.push({vod_id:`${r.cat_id}_${r.en_id}`,vod_name:r.titleTxt,vod_pic:r.cover,vod_remarks:(r.coverInfo||{}).txt,year:r.year})}return t}}("kan360","360影视");var Iz={meta:Cz.meta,api:async e=>{e.get("",((e,t)=>Cz.spider(e))),e.post("/init",((e,t)=>Cz.init(e.server))),e.post("/home",((e,t)=>Cz.home(e.body))),e.post("/category",((e,t)=>Cz.category(e.body))),e.post("/detail",((e,t)=>Cz.detail(e.body))),e.post("/play",((e,t)=>Cz.play(e.body))),e.post("/search",((e,t)=>Cz.search(e.body)))}};const Rz=new class extends Aj{async init(e){const t=e.config;return this.url=t?.urls?.wogg||"https://api.wogg.net",await super.init(e)}fetch(e,t){return super.fetch(`${this.url}${e}`,{params:t})}async _home({}){const e={class:[],list:[]},t=await this.fetch("/"),n=bz(t);for(const t of n("div#index-nav > ul.nav-menu-items > li.nav-menu-item > a.nav-link")){const r=n(t).text().trim(),[,s]=n(t).attr("href").match(/vodtype\/(\d+)\.html/i);e.class.push({type_id:s,type_name:r.replace(/片库|玩偶/g,"")})}return e}async _category({id:e,page:t}){const n=e,r=t||1,s={list:[],page:r,pagecount:r},i=await this.fetch(`/index.php/vodshow/${n}--------${r}---.html`),o=bz(i);for(const e of o("div.module div.module-items > div.module-item")){const t={vod_id:null,vod_name:o(e).find("div.module-item-titlebox").text().trim(),vod_pic:null,vod_remarks:o(e).find("div.module-item-text").text().trim()};s.list.push(t);const n=o(e).find("div.module-item-cover");t.vod_pic=o(n).find("div.module-item-pic > img").attr("data-src");const[,r]=o(n).find("div.module-item-pic > a").attr("href").match(/voddetail\/(\d+)\.html/i);t.vod_id=r}const a=o("div#page > a:last-child");if(a){const e=(o(a).attr("href")||"").match(/vodshow\/\d+--------(\d+)---\.html/i);if(e){const t=parseInt(e[1]);t>r&&(s.pagecount=t)}}return s}async _detail({id:e}){const t=Array.isArray(e)?e:[e],n={list:[]};for(const e of t){const t=await this.fetch(`/index.php/voddetail/${e}.html`),r=bz(t),s={vod_id:e,vod_name:r("div.video-info > div.video-info-header .page-title")?.text().trim(),vod_pic:r("div.view-heading > div.video-cover > div > div > img")?.attr("data-src"),type_name:null,vod_year:null,vod_area:null,vod_remarks:null,vod_actor:null,vod_director:null,vod_content:null,vod_play_from:null,vod_play_url:null},i=r(".video-info-aux > *");4===i.length&&(s.type_name=r(i[0]).text().trim().replace(/自营|片库|玩偶/g,""),s.vod_area=r(i[3]).text().trim());for(const e of r("div.video-info > div.video-info-main > .video-info-items")){const t=r(e).find(".video-info-itemtitle")?.text()?.trim(),n=r(e).find(".video-info-item")?.text()?.trim();t&&n&&(/年代/i.test(t)?s.vod_year=n:/导演/i.test(t)?s.vod_director=n.replace(/\/\n/g,"").split(/\//).filter(Boolean).join(",").trim():/主演/i.test(t)?s.vod_actor=n.replace(/\/\n/g,"").split(/\//).filter(Boolean).join(",").trim():/备注/i.test(t)?s.vod_remarks=n:/剧情/i.test(t)&&(s.vod_content=r(e).find(".video-info-content > .sqjj_a").text()?.trim()?.replace("[收起部分]","")))}const o=[],a=[];for(const e of r("div.module-list.module-player-list a.module-row-text.copy")){const t=r(e).attr("data-clipboard-text");for(const{match:e,getVod:n,t:r}of this.handlers)if(("ali"!==r||!o.some((e=>/阿里/.test(e))))&&("quark"!==r||!o.some((e=>/夸克/.test(e))))&&("xunlei"!==r||!o.some((e=>/迅雷/.test(e))))&&("pikpak"!==r||!o.some((e=>/PikPak/i.test(e))))&&e(t))try{const e=await n(t);e&&(o.push(e.vod_play_from),a.push(e.vod_play_url))}catch{}}s.vod_play_from=o.join("$$$"),s.vod_play_url=a.join("$$$"),n.list.push(s)}return n}async _search({wd:e}){const t={list:[],page:1,pagecount:1,total:1},n=await this.fetch("/index.php/vodsearch/-------------.html",{wd:e}),r=bz(n);for(const e of r("div.module-items > div.module-search-item")){const n=r(e).find("div.video-info-header > a.video-serial"),[,s]=n?.attr("href").match(/voddetail\/(\d+)\.html/i);if(!s)continue;const i={vod_id:s,vod_name:n?.attr("title"),vod_pic:r("div.video-cover div.module-item-pic > img")?.attr("data-src"),vod_remarks:n?.text().trim()};t.list.push(i)}return t}}("wogg","玩偶哥哥");var Oz={meta:Rz.meta,api:async e=>{e.get("",((e,t)=>Rz.spider(e))),e.post("/init",((e,t)=>Rz.init(e.server))),e.post("/home",((e,t)=>Rz.home(e.body))),e.post("/category",((e,t)=>Rz.category(e.body))),e.post("/detail",((e,t)=>Rz.detail(e.body))),e.post("/play",((e,t)=>(e.body.proxyUrl=_j(e),Rz.play(e.body)))),e.post("/search",((e,t)=>Rz.search(e.body)))}};const Nz=new class extends Aj{async init(e){return this.api="https://v.funletu.com",await super.init(e)}async _detail({id:e}){const t=Array.isArray(e)?e:[e],n=[];for(const e of t){const t=vj.enc.Utf8.stringify(vj.enc.Hex.parse(e)),{id:r,t:s}=JSON.parse(t);for(const t of this.handlers)if(s===t.t){const s=await t.getVod(r);s&&(s.vod_id=e,n.push(s));break}}return{list:n}}async _search({wd:e}){const t={list:[],page:1,pagecount:1,total:1},n={style:"get",datasrc:"search",query:{id:"",datetime:"",commonid:1,parmid:"",fileid:31,reportid:"",validid:"",searchtext:e},page:{pageSize:30,pageIndex:1},order:{prop:"id",order:"desc"},message:"请求资源列表数据"},r=await this.fetch("/search",n);for(const e of r.data||[]){let n,r,s;for(const{match:t,t:i}of this.handlers){const o=t(e.url);if(o){n=o.url,r=o.pic,s=i;break}}n&&t.list.push({vod_id:""+vj.enc.Utf8.parse(JSON.stringify({t:s,id:n})),vod_name:e.title||e.filename,vod_pic:r,vod_remarks:e.updatetime})}return t}async fetch(e,t){return(await this.http.post(`${this.api}${e}`,t)).data}}("funletu","趣盘搜");var Dz={meta:Nz.meta,api:async e=>{e.get("",((e,t)=>Nz.spider(e))),e.post("/init",((e,t)=>Nz.init(e.server))),e.post("/home",((e,t)=>Nz.home(e.body))),e.post("/category",((e,t)=>Nz.category(e.body))),e.post("/detail",((e,t)=>Nz.detail(e.body))),e.post("/play",((e,t)=>(e.body.proxyUrl=_j(e),Nz.play(e.body)))),e.post("/search",((e,t)=>Nz.search(e.body)))}};const Pz=new class extends Aj{async _home({}){const e={class:[],list:[]},t=await this.fetch("/"),n=bz(t);for(const t of n("ul.erx-menu > li > a"))e.class.push({type_id:n(t).attr("href").trim(),type_name:n(t).text().trim()});return e}async _category({id:e,page:t}){const n=t||1;let r=e.replace(/\/$/,"");const s=await this.fetch(`${r}_${n}/`),i=bz(s),o={list:[],page:n,pagecount:n};for(const e of i("ul.erx-list > li")){const t=i(e).find("div.a > a").attr("href")||"";if(/^https?/i.test(t))continue;const n={vod_id:t,vod_name:i(e).find("div.a > a").text().trim(),vod_pic:"https://xpanpan.site/wp-content/uploads/2024/01/pan-logo-circle-one.png",vod_remarks:i(e).find("div.i > span").text().trim()};o.list.push(n)}const a=i("div.pagination > a.page-item").last().attr("href");if(a){const e=a.match(/(\d+)/);if(e){const[t,n]=e;o.pagecount=parseInt(n)}}return o}async _detail({id:e}){const t=Array.isArray(e)?e:[e],n=[];for(const e of t){const t=await this.fetch(e),r=bz(t);let s;const i=[],o=[];for(const e of r("div.dlipp-cont-bd > a")){const t=r(e).attr("href");for(const{match:e,getVod:n,t:r}of this.handlers)if(("ali"!==r||!i.some((e=>/阿里/.test(e))))&&("quark"!==r||!i.some((e=>/夸克/.test(e))))&&("xunlei"!==r||!i.some((e=>/迅雷/.test(e))))&&("pikpak"!==r||!i.some((e=>/PikPak/i.test(e))))&&e(t))try{const e=await n(t);e&&(s||(s=e),i.push(e.vod_play_from),o.push(e.vod_play_url))}catch{}}s&&(s.vod_id=e,s.vod_play_from=i.join("$$$"),s.vod_play_url=o.join("$$$"),n.push(s))}return{list:n}}async _search({wd:e}){const t={list:[],page:1,pagecount:1,total:1},n=await this.fetch("/search/",{keyword:e}),r=bz(n);for(const e of r("ul.erx-list > li")){const n=r(e).find("div.a > a").attr("href")||"";if(/^https?/i.test(n))continue;const s={vod_id:n,vod_name:r(e).find("div.a > a").text().trim(),vod_pic:"https://xpanpan.site/wp-content/uploads/2024/01/pan-logo-circle-one.png",vod_remarks:r(e).find("div.i > span").text().trim()};t.list.push(s)}return t}fetch(e,t){return super.fetch("https://www.star2.cn"+e,{params:t})}}("star2","星剧社");var Lz={meta:Pz.meta,api:async e=>{e.get("",((e,t)=>Pz.spider(e))),e.post("/init",((e,t)=>Pz.init(e.server))),e.post("/home",((e,t)=>Pz.home(e.body))),e.post("/category",((e,t)=>Pz.category(e.body))),e.post("/detail",((e,t)=>Pz.detail(e.body))),e.post("/play",((e,t)=>(e.body.proxyUrl=_j(e),Pz.play(e.body)))),e.post("/search",((e,t)=>Pz.search(e.body)))}};const Mz=new class extends Aj{async init(e){return this.api="https://ys.api.yingso.fun",await super.init(e)}async _detail({id:e}){const t=Array.isArray(e)?e:[e],n=[];for(const e of t){const t=vj.enc.Utf8.stringify(vj.enc.Hex.parse(e)),{id:r,t:s}=JSON.parse(t);for(const t of this.handlers)if(s===t.t){const s=await t.getVod(r);s&&(s.vod_id=e,n.push(s));break}}return{list:n}}async _search({wd:e}){const t={pageSize:30,pageNum:1,title:e,root:0,cat:"all"},n=(await this.http.post(this.api+"/v3/ali/search",t)).data;if(200!==n.code)throw Error(n.msg||"err");const r={list:[],page:1,pagecount:1,total:1};for(const e of n.data||[]){let t,n,s,i;switch(e.root){case 1:t="https://www.aliyundrive.com/s/"+e.key;break;case 2:t="https://pan.quark.cn/s/"+e.key;break;case 3:t="https://pan.xunlei.com/s/"+e.key}if(t){for(const{match:e,t:r}of this.handlers){const o=e(t);if(o){n=o.url,s=o.pic,i=r;break}}n&&r.list.push({vod_id:""+vj.enc.Utf8.parse(JSON.stringify({t:i,id:n})),vod_name:e.title,vod_pic:s,vod_remarks:e.cat})}}return r}}("yingso","影搜");var Bz={meta:Mz.meta,api:async e=>{e.get("",((e,t)=>Mz.spider(e))),e.post("/init",((e,t)=>Mz.init(e.server))),e.post("/home",((e,t)=>Mz.home(e.body))),e.post("/category",((e,t)=>Mz.category(e.body))),e.post("/detail",((e,t)=>Mz.detail(e.body))),e.post("/play",((e,t)=>(e.body.proxyUrl=_j(e),Mz.play(e.body)))),e.post("/search",((e,t)=>Mz.search(e.body)))}};const jz=[wj,Ij,_z,Sz,xz,Iz,Oz,Dz,Lz,Bz];class Fz extends Aj{constructor(e){super(e.key,e.name),this.channels=[],this.pattern=/(?:tvg-id="([^"]*)"\s+)?tvg-name="([^"]*)"\s+tvg-logo="([^"]*)"\s+group-title="([^"]*)"/i,this.urlPattern=/^https?:\/\//i,this._url=e.url}async init(e){const t=(await this.fetch(this._url)).split("\n");let n=null;for(let e of t){if(!e)continue;if(e=e.trim(),""===e)continue;const t=e.match(this.pattern);if(t){const[,e,r,s,i]=t;n={vod_id:e||r,vod_name:r,vod_pic:s,vod_play_from:"直播",vod_play_url:null,group:i}}else null!=n&&this.urlPattern.test(e)&&(n.vod_play_url=`${n.vod_name}$${e}`,this.channels.push(n),n=null)}return await super.init(e)}async _home({}){return{class:[...new Set(this.channels.map((e=>e.group)))].map((e=>({type_id:e,type_name:e}))),list:[]}}async _category({id:e}){const t=e;return{list:this.channels.filter((e=>e.group===t)),page:1,pagecount:1}}async _detail({id:e}){const t=Array.isArray(e)?e:[e],n={list:[]};for(const e of t)n.list.push(...this.channels.filter((t=>t.vod_id==e)));return n}async _search({wd:e}){return e=e.trim(),{list:this.channels.filter((t=>t.group.indexOf(e)>-1||t.vod_name.indexOf(e)>-1)),page:1,pagecount:1,total:1}}async play({id:e}){return{url:e,parse:0,jx:0}}}class $z extends Aj{constructor(e,t){super(e,"TG|"+t),this.api="https://t.me/s/"+e}async init(e){const t=e.config||{};return t.proxy&&(this.http.defaults.proxy=t.proxy),await super.init(e)}async _detail({id:e}){const t=Array.isArray(e)?e:[e],n=[];for(const e of t){const t=vj.enc.Utf8.stringify(vj.enc.Hex.parse(e)),{id:r,t:s}=JSON.parse(t);for(const t of this.handlers)if(s===t.t){const s=await t.getVod(r);s&&(s.vod_id=e,n.push(s));break}}return{list:n}}async _search({wd:e}){const t={list:[],page:1,pagecount:1,total:1},n={q:e},r=await this.fetch(this.api,{params:n}),s=bz(r);for(const e of s("div.tgme_widget_message_wrap div.tgme_widget_message_text")){const n=s(e).text();let r,i,o;for(const{match:e,t:t}of this.handlers){const s=e(n);if(s){r=s.url,i=s.pic,o=t;break}}r&&t.list.push({vod_id:""+vj.enc.Utf8.parse(JSON.stringify({t:o,id:r})),vod_name:s(e).find("mark.highlight").text().trim(),vod_pic:i,vod_remarks:o})}return t}}const Uz=async e=>{let t=await e.get("fty");if(!t){const n=await dB.get("https://www.饭太硬.com/tv",{timeout:15e3,headers:{"User-Agent":"okhttp/3.12.0"}}),r=RegExp(/[A-Za-z0-9]{8}\*\*/g).exec(n.data);if(!r)throw Error("Failed to parse fan configuration!");const s=n.data.substring(r.index+r[0].length);t=Buffer.from(s,"base64").toString("utf8").replaceAll(/^\/\/.*\n/gm,"").replaceAll(/^\/\/.*\r\n/gm,""),await e.set("fty",t,"EX",86400)}return JSON.parse(t)},Hz=Error("request for lock canceled");class Gz{constructor(e,t=Hz){this._value=e,this._cancelError=t,this._queue=[],this._weightedWaiters=[]}acquire(e=1,t=0){if(0>=e)throw Error(`invalid weight ${e}: must be positive`);return new Promise(((n,r)=>{const s={resolve:n,reject:r,weight:e,priority:t},i=qz(this._queue,(e=>e.priority>=t));-1!==i||e>this._value?this._queue.splice(i+1,0,s):this._dispatchItem(s)}))}runExclusive(e){return t=this,n=arguments,s=function*(e,t=1,n=0){const[r,s]=yield this.acquire(t,n);try{return yield e(r)}finally{s()}},new((r=void 0)||(r=Promise))((function(e,i){function o(e){try{c(s.next(e))}catch(e){i(e)}}function a(e){try{c(s.throw(e))}catch(e){i(e)}}function c(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r((function(e){e(n)}))).then(o,a)}c((s=s.apply(t,n||[])).next())}));var t,n,r,s}waitForUnlock(e=1,t=0){if(0>=e)throw Error(`invalid weight ${e}: must be positive`);return this._couldLockImmediately(e,t)?Promise.resolve():new Promise((n=>{this._weightedWaiters[e-1]||(this._weightedWaiters[e-1]=[]),function(e,t){const n=qz(e,(e=>e.priority>=t.priority));e.splice(n+1,0,t)}(this._weightedWaiters[e-1],{resolve:n,priority:t})}))}isLocked(){return 0>=this._value}getValue(){return this._value}setValue(e){this._value=e,this._dispatchQueue()}release(e=1){if(0>=e)throw Error(`invalid weight ${e}: must be positive`);this._value+=e,this._dispatchQueue()}cancel(){this._queue.forEach((e=>e.reject(this._cancelError))),this._queue=[]}_dispatchQueue(){for(this._drainUnlockWaiters();this._queue.length>0&&this._value>=this._queue[0].weight;)this._dispatchItem(this._queue.shift()),this._drainUnlockWaiters()}_dispatchItem(e){const t=this._value;this._value-=e.weight,e.resolve([t,this._newReleaser(e.weight)])}_newReleaser(e){let t=!1;return()=>{t||(t=!0,this.release(e))}}_drainUnlockWaiters(){if(0===this._queue.length)for(let e=this._value;e>0;e--){const t=this._weightedWaiters[e-1];t&&(t.forEach((e=>e.resolve())),this._weightedWaiters[e-1]=[])}else{const e=this._queue[0].priority;for(let t=this._value;t>0;t--){const n=this._weightedWaiters[t-1];if(!n)continue;const r=n.findIndex((t=>e>=t.priority));(-1===r?n:n.splice(0,r)).forEach((e=>e.resolve()))}}}_couldLockImmediately(e,t){return(0===this._queue.length||t>this._queue[0].priority)&&this._value>=e}}function qz(e,t){for(let n=e.length-1;n>=0;n--)if(t(e[n]))return n;return-1}class zz{constructor(e){this._semaphore=new Gz(1,e)}acquire(){return e=this,t=arguments,r=function*(e=0){const[,t]=yield this._semaphore.acquire(1,e);return t},new((n=void 0)||(n=Promise))((function(s,i){function o(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}));var e,t,n,r}runExclusive(e,t=0){return this._semaphore.runExclusive((()=>e()),1,t)}isLocked(){return this._semaphore.isLocked()}waitForUnlock(e=0){return this._semaphore.waitForUnlock(1,e)}release(){this._semaphore.isLocked()&&this._semaphore.release()}cancel(){return this._semaphore.cancel()}}var Vz={exports:{}},Yz={exports:{}};!function(e,t){!function(){var n,r="Expected a function",s="__lodash_hash_undefined__",i="__lodash_placeholder__",o=32,a=128,c=1/0,l=9007199254740991,u=NaN,p=4294967295,d=[["ary",a],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",o],["partialRight",64],["rearg",256]],h="[object Arguments]",f="[object Array]",m="[object Boolean]",g="[object Date]",y="[object Error]",v="[object Function]",b="[object GeneratorFunction]",E="[object Map]",_="[object Number]",A="[object Object]",S="[object Promise]",T="[object RegExp]",w="[object Set]",x="[object String]",k="[object Symbol]",C="[object WeakMap]",I="[object ArrayBuffer]",R="[object DataView]",O="[object Float32Array]",N="[object Float64Array]",P="[object Int8Array]",L="[object Int16Array]",M="[object Int32Array]",B="[object Uint8Array]",j="[object Uint8ClampedArray]",F="[object Uint16Array]",$="[object Uint32Array]",U=/\b__p \+= '';/g,H=/\b(__p \+=) '' \+/g,G=/(__e\(.*?\)|\b__t\)) \+\n'';/g,q=/&(?:amp|lt|gt|quot|#39);/g,z=/[&<>"']/g,V=RegExp(q.source),Y=RegExp(z.source),K=/<%-([\s\S]+?)%>/g,Q=/<%([\s\S]+?)%>/g,W=/<%=([\s\S]+?)%>/g,J=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,X=/^\w*$/,Z=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ee=/[\\^$.*+?()[\]{}|]/g,te=RegExp(ee.source),ne=/^\s+/,re=/\s/,se=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ie=/\{\n\/\* \[wrapped with (.+)\] \*/,oe=/,? & /,ae=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ce=/[()=,{}\[\]\/\s]/,le=/\\(\\)?/g,ue=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,pe=/\w*$/,de=/^[-+]0x[0-9a-f]+$/i,he=/^0b[01]+$/i,fe=/^\[object .+?Constructor\]$/,me=/^0o[0-7]+$/i,ge=/^(?:0|[1-9]\d*)$/,ye=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ve=/($^)/,be=/['\n\r\u2028\u2029\\]/g,Ee="\\ud800-\\udfff",_e="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Ae="\\u2700-\\u27bf",Se="a-z\\xdf-\\xf6\\xf8-\\xff",Te="A-Z\\xc0-\\xd6\\xd8-\\xde",we="\\ufe0e\\ufe0f",xe="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ke="["+Ee+"]",Ce="["+xe+"]",Ie="["+_e+"]",Re="\\d+",Oe="["+Ae+"]",Ne="["+Se+"]",De="[^"+Ee+xe+Re+Ae+Se+Te+"]",Pe="\\ud83c[\\udffb-\\udfff]",Le="[^"+Ee+"]",Me="(?:\\ud83c[\\udde6-\\uddff]){2}",Be="[\\ud800-\\udbff][\\udc00-\\udfff]",je="["+Te+"]",Fe="\\u200d",$e="(?:"+Ne+"|"+De+")",Ue="(?:"+je+"|"+De+")",He="(?:['’](?:d|ll|m|re|s|t|ve))?",Ge="(?:['’](?:D|LL|M|RE|S|T|VE))?",qe="(?:"+Ie+"|"+Pe+")?",ze="["+we+"]?",Ve=ze+qe+"(?:"+Fe+"(?:"+[Le,Me,Be].join("|")+")"+ze+qe+")*",Ye="(?:"+[Oe,Me,Be].join("|")+")"+Ve,Ke="(?:"+[Le+Ie+"?",Ie,Me,Be,ke].join("|")+")",Qe=RegExp("['’]","g"),We=RegExp(Ie,"g"),Je=RegExp(Pe+"(?="+Pe+")|"+Ke+Ve,"g"),Xe=RegExp([je+"?"+Ne+"+"+He+"(?="+[Ce,je,"$"].join("|")+")",Ue+"+"+Ge+"(?="+[Ce,je+$e,"$"].join("|")+")",je+"?"+$e+"+"+He,je+"+"+Ge,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])|\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Re,Ye].join("|"),"g"),Ze=RegExp("["+Fe+Ee+_e+we+"]"),et=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,tt=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],nt=-1,rt={};rt[O]=rt[N]=rt[P]=rt[L]=rt[M]=rt[B]=rt[j]=rt[F]=rt[$]=!0,rt[h]=rt[f]=rt[I]=rt[m]=rt[R]=rt[g]=rt[y]=rt[v]=rt[E]=rt[_]=rt[A]=rt[T]=rt[w]=rt[x]=rt[C]=!1;var st={};st[h]=st[f]=st[I]=st[R]=st[m]=st[g]=st[O]=st[N]=st[P]=st[L]=st[M]=st[E]=st[_]=st[A]=st[T]=st[w]=st[x]=st[k]=st[B]=st[j]=st[F]=st[$]=!0,st[y]=st[v]=st[C]=!1;var it={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ot=parseFloat,at=parseInt,ct="object"==typeof D&&D&&D.Object===Object&&D,lt="object"==typeof self&&self&&self.Object===Object&&self,ut=ct||lt||Function("return this")(),pt=t&&!t.nodeType&&t,dt=pt&&e&&!e.nodeType&&e,ht=dt&&dt.exports===pt,ft=ht&&ct.process,mt=function(){try{return dt&&dt.require&&dt.require("util").types||ft&&ft.binding&&ft.binding("util")}catch(e){}}(),gt=mt&&mt.isArrayBuffer,yt=mt&&mt.isDate,vt=mt&&mt.isMap,bt=mt&&mt.isRegExp,Et=mt&&mt.isSet,_t=mt&&mt.isTypedArray;function At(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function St(e,t,n,r){for(var s=-1,i=null==e?0:e.length;++s<i;){var o=e[s];t(r,o,n(o),e)}return r}function Tt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function wt(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function xt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function kt(e,t){for(var n=-1,r=null==e?0:e.length,s=0,i=[];++n<r;){var o=e[n];t(o,n,e)&&(i[s++]=o)}return i}function Ct(e,t){return!(null==e||!e.length)&&jt(e,t,0)>-1}function It(e,t,n){for(var r=-1,s=null==e?0:e.length;++r<s;)if(n(t,e[r]))return!0;return!1}function Rt(e,t){for(var n=-1,r=null==e?0:e.length,s=Array(r);++n<r;)s[n]=t(e[n],n,e);return s}function Ot(e,t){for(var n=-1,r=t.length,s=e.length;++n<r;)e[s+n]=t[n];return e}function Nt(e,t,n,r){var s=-1,i=null==e?0:e.length;for(r&&i&&(n=e[++s]);++s<i;)n=t(n,e[s],s,e);return n}function Dt(e,t,n,r){var s=null==e?0:e.length;for(r&&s&&(n=e[--s]);s--;)n=t(n,e[s],s,e);return n}function Pt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var Lt=Ht("length");function Mt(e,t,n){var r;return n(e,(function(e,n,s){if(t(e,n,s))return r=n,!1})),r}function Bt(e,t,n,r){for(var s=e.length,i=n+(r?1:-1);r?i--:++i<s;)if(t(e[i],i,e))return i;return-1}function jt(e,t,n){return t==t?function(e,t,n){for(var r=n-1,s=e.length;++r<s;)if(e[r]===t)return r;return-1}(e,t,n):Bt(e,$t,n)}function Ft(e,t,n,r){for(var s=n-1,i=e.length;++s<i;)if(r(e[s],t))return s;return-1}function $t(e){return e!=e}function Ut(e,t){var n=null==e?0:e.length;return n?zt(e,t)/n:u}function Ht(e){return function(t){return null==t?n:t[e]}}function Gt(e){return function(t){return null==e?n:e[t]}}function qt(e,t,n,r,s){return s(e,(function(e,s,i){n=r?(r=!1,e):t(n,e,s,i)})),n}function zt(e,t){for(var r,s=-1,i=e.length;++s<i;){var o=t(e[s]);o!==n&&(r=r===n?o:r+o)}return r}function Vt(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function Yt(e){return e?e.slice(0,pn(e)+1).replace(ne,""):e}function Kt(e){return function(t){return e(t)}}function Qt(e,t){return Rt(t,(function(t){return e[t]}))}function Wt(e,t){return e.has(t)}function Jt(e,t){for(var n=-1,r=e.length;++n<r&&jt(t,e[n],0)>-1;);return n}function Xt(e,t){for(var n=e.length;n--&&jt(t,e[n],0)>-1;);return n}var Zt=Gt({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),en=Gt({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function tn(e){return"\\"+it[e]}function nn(e){return Ze.test(e)}function rn(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function sn(e,t){return function(n){return e(t(n))}}function on(e,t){for(var n=-1,r=e.length,s=0,o=[];++n<r;){var a=e[n];a!==t&&a!==i||(e[n]=i,o[s++]=n)}return o}function an(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}function cn(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=[e,e]})),n}function ln(e){return nn(e)?function(e){for(var t=Je.lastIndex=0;Je.test(e);)++t;return t}(e):Lt(e)}function un(e){return nn(e)?function(e){return e.match(Je)||[]}(e):function(e){return e.split("")}(e)}function pn(e){for(var t=e.length;t--&&re.test(e.charAt(t)););return t}var dn=Gt({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),hn=function e(t){var D,re=(t=null==t?ut:hn.defaults(ut.Object(),t,hn.pick(ut,tt))).Array,Ee=t.Date,_e=t.Error,Ae=t.Function,Se=t.Math,Te=t.Object,we=t.RegExp,xe=t.String,ke=t.TypeError,Ce=re.prototype,Ie=Te.prototype,Re=t["__core-js_shared__"],Oe=Ae.prototype.toString,Ne=Ie.hasOwnProperty,De=0,Pe=(D=/[^.]+$/.exec(Re&&Re.keys&&Re.keys.IE_PROTO||""))?"Symbol(src)_1."+D:"",Le=Ie.toString,Me=Oe.call(Te),Be=ut._,je=we("^"+Oe.call(Ne).replace(ee,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Fe=ht?t.Buffer:n,$e=t.Symbol,Ue=t.Uint8Array,He=Fe?Fe.allocUnsafe:n,Ge=sn(Te.getPrototypeOf,Te),qe=Te.create,ze=Ie.propertyIsEnumerable,Ve=Ce.splice,Ye=$e?$e.isConcatSpreadable:n,Ke=$e?$e.iterator:n,Je=$e?$e.toStringTag:n,Ze=function(){try{var e=ai(Te,"defineProperty");return e({},"",{}),e}catch(e){}}(),it=t.clearTimeout!==ut.clearTimeout&&t.clearTimeout,ct=Ee&&Ee.now!==ut.Date.now&&Ee.now,lt=t.setTimeout!==ut.setTimeout&&t.setTimeout,pt=Se.ceil,dt=Se.floor,ft=Te.getOwnPropertySymbols,mt=Fe?Fe.isBuffer:n,Lt=t.isFinite,Gt=Ce.join,fn=sn(Te.keys,Te),mn=Se.max,gn=Se.min,yn=Ee.now,vn=t.parseInt,bn=Se.random,En=Ce.reverse,_n=ai(t,"DataView"),An=ai(t,"Map"),Sn=ai(t,"Promise"),Tn=ai(t,"Set"),wn=ai(t,"WeakMap"),xn=ai(Te,"create"),kn=wn&&new wn,Cn={},In=Di(_n),Rn=Di(An),On=Di(Sn),Nn=Di(Tn),Dn=Di(wn),Pn=$e?$e.prototype:n,Ln=Pn?Pn.valueOf:n,Mn=Pn?Pn.toString:n;function Bn(e){if(Jo(e)&&!$o(e)&&!(e instanceof Un)){if(e instanceof $n)return e;if(Ne.call(e,"__wrapped__"))return Pi(e)}return new $n(e)}var jn=function(){function e(){}return function(t){if(!Wo(t))return{};if(qe)return qe(t);e.prototype=t;var r=new e;return e.prototype=n,r}}();function Fn(){}function $n(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=n}function Un(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=p,this.__views__=[]}function Hn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Gn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function qn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function zn(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new qn;++t<n;)this.add(e[t])}function Vn(e){var t=this.__data__=new Gn(e);this.size=t.size}function Yn(e,t){var n=$o(e),r=!n&&Fo(e),s=!n&&!r&&qo(e),i=!n&&!r&&!s&&ia(e),o=n||r||s||i,a=o?Vt(e.length,xe):[],c=a.length;for(var l in e)!t&&!Ne.call(e,l)||o&&("length"==l||s&&("offset"==l||"parent"==l)||i&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||fi(l,c))||a.push(l);return a}function Kn(e){var t=e.length;return t?e[qr(0,t-1)]:n}function Qn(e,t){return Ri(ws(e),sr(t,0,e.length))}function Wn(e){return Ri(ws(e))}function Jn(e,t,r){(r!==n&&!Mo(e[t],r)||r===n&&!(t in e))&&nr(e,t,r)}function Xn(e,t,r){var s=e[t];Ne.call(e,t)&&Mo(s,r)&&(r!==n||t in e)||nr(e,t,r)}function Zn(e,t){for(var n=e.length;n--;)if(Mo(e[n][0],t))return n;return-1}function er(e,t,n,r){return lr(e,(function(e,s,i){t(r,e,n(e),i)})),r}function tr(e,t){return e&&xs(t,ka(t),e)}function nr(e,t,n){"__proto__"==t&&Ze?Ze(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function rr(e,t){for(var r=-1,s=t.length,i=re(s),o=null==e;++r<s;)i[r]=o?n:Aa(e,t[r]);return i}function sr(e,t,r){return e==e&&(r!==n&&(e=e>r?r:e),t!==n&&(e=t>e?t:e)),e}function ir(e,t,r,s,i,o){var a,c=1&t,l=2&t,u=4&t;if(r&&(a=i?r(e,s,i,o):r(e)),a!==n)return a;if(!Wo(e))return e;var p=$o(e);if(p){if(a=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&Ne.call(e,"index")&&(n.index=e.index,n.input=e.input),n}(e),!c)return ws(e,a)}else{var d=ui(e),f=d==v||d==b;if(qo(e))return bs(e,c);if(d==A||d==h||f&&!i){if(a=l||f?{}:di(e),!c)return l?function(e,t){return xs(e,li(e),t)}(e,function(e,t){return e&&xs(t,Ca(t),e)}(a,e)):function(e,t){return xs(e,ci(e),t)}(e,tr(a,e))}else{if(!st[d])return i?e:{};a=function(e,t,n){var r=e.constructor;switch(t){case I:return Es(e);case m:case g:return new r(+e);case R:return function(e,t){var n=t?Es(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case O:case N:case P:case L:case M:case B:case j:case F:case $:return _s(e,n);case E:return new r;case _:case x:return new r(e);case T:return function(e){var t=new e.constructor(e.source,pe.exec(e));return t.lastIndex=e.lastIndex,t}(e);case w:return new r;case k:return function(e){return Ln?Te(Ln.call(e)):{}}(e)}}(e,d,c)}}o||(o=new Vn);var y=o.get(e);if(y)return y;o.set(e,a),na(e)?e.forEach((function(n){a.add(ir(n,t,r,n,e,o))})):Xo(e)&&e.forEach((function(n,s){a.set(s,ir(n,t,r,s,e,o))}));var S=p?n:(u?l?ei:Zs:l?Ca:ka)(e);return Tt(S||e,(function(n,s){S&&(n=e[s=n]),Xn(a,s,ir(n,t,r,s,e,o))})),a}function or(e,t,r){var s=r.length;if(null==e)return!s;for(e=Te(e);s--;){var i=r[s],o=e[i];if(o===n&&!(i in e)||!(0,t[i])(o))return!1}return!0}function ar(e,t,s){if("function"!=typeof e)throw new ke(r);return xi((function(){e.apply(n,s)}),t)}function cr(e,t,n,r){var s=-1,i=Ct,o=!0,a=e.length,c=[],l=t.length;if(!a)return c;n&&(t=Rt(t,Kt(n))),r?(i=It,o=!1):200>t.length||(i=Wt,o=!1,t=new zn(t));e:for(;++s<a;){var u=e[s],p=null==n?u:n(u);if(u=r||0!==u?u:0,o&&p==p){for(var d=l;d--;)if(t[d]===p)continue e;c.push(u)}else i(t,p,r)||c.push(u)}return c}Bn.templateSettings={escape:K,evaluate:Q,interpolate:W,variable:"",imports:{_:Bn}},(Bn.prototype=Fn.prototype).constructor=Bn,($n.prototype=jn(Fn.prototype)).constructor=$n,(Un.prototype=jn(Fn.prototype)).constructor=Un,Hn.prototype.clear=function(){this.__data__=xn?xn(null):{},this.size=0},Hn.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Hn.prototype.get=function(e){var t=this.__data__;if(xn){var r=t[e];return r===s?n:r}return Ne.call(t,e)?t[e]:n},Hn.prototype.has=function(e){var t=this.__data__;return xn?t[e]!==n:Ne.call(t,e)},Hn.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=xn&&t===n?s:t,this},Gn.prototype.clear=function(){this.__data__=[],this.size=0},Gn.prototype.delete=function(e){var t=this.__data__,n=Zn(t,e);return n>=0&&(n==t.length-1?t.pop():Ve.call(t,n,1),--this.size,!0)},Gn.prototype.get=function(e){var t=this.__data__,r=Zn(t,e);return 0>r?n:t[r][1]},Gn.prototype.has=function(e){return Zn(this.__data__,e)>-1},Gn.prototype.set=function(e,t){var n=this.__data__,r=Zn(n,e);return 0>r?(++this.size,n.push([e,t])):n[r][1]=t,this},qn.prototype.clear=function(){this.size=0,this.__data__={hash:new Hn,map:new(An||Gn),string:new Hn}},qn.prototype.delete=function(e){var t=ii(this,e).delete(e);return this.size-=t?1:0,t},qn.prototype.get=function(e){return ii(this,e).get(e)},qn.prototype.has=function(e){return ii(this,e).has(e)},qn.prototype.set=function(e,t){var n=ii(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},zn.prototype.add=zn.prototype.push=function(e){return this.__data__.set(e,s),this},zn.prototype.has=function(e){return this.__data__.has(e)},Vn.prototype.clear=function(){this.__data__=new Gn,this.size=0},Vn.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Vn.prototype.get=function(e){return this.__data__.get(e)},Vn.prototype.has=function(e){return this.__data__.has(e)},Vn.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Gn){var r=n.__data__;if(!An||199>r.length)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new qn(r)}return n.set(e,t),this.size=n.size,this};var lr=Is(yr),ur=Is(vr,!0);function pr(e,t){var n=!0;return lr(e,(function(e,r,s){return n=!!t(e,r,s)})),n}function dr(e,t,r){for(var s=-1,i=e.length;++s<i;){var o=e[s],a=t(o);if(null!=a&&(c===n?a==a&&!sa(a):r(a,c)))var c=a,l=o}return l}function hr(e,t){var n=[];return lr(e,(function(e,r,s){t(e,r,s)&&n.push(e)})),n}function fr(e,t,n,r,s){var i=-1,o=e.length;for(n||(n=hi),s||(s=[]);++i<o;){var a=e[i];t>0&&n(a)?t>1?fr(a,t-1,n,r,s):Ot(s,a):r||(s[s.length]=a)}return s}var mr=Rs(),gr=Rs(!0);function yr(e,t){return e&&mr(e,t,ka)}function vr(e,t){return e&&gr(e,t,ka)}function br(e,t){return kt(t,(function(t){return Yo(e[t])}))}function Er(e,t){for(var r=0,s=(t=ms(t,e)).length;null!=e&&s>r;)e=e[Ni(t[r++])];return r&&r==s?e:n}function _r(e,t,n){var r=t(e);return $o(e)?r:Ot(r,n(e))}function Ar(e){return null==e?e===n?"[object Undefined]":"[object Null]":Je&&Je in Te(e)?function(e){var t=Ne.call(e,Je),r=e[Je];try{e[Je]=n;var s=!0}catch(e){}var i=Le.call(e);return s&&(t?e[Je]=r:delete e[Je]),i}(e):function(e){return Le.call(e)}(e)}function Sr(e,t){return e>t}function Tr(e,t){return null!=e&&Ne.call(e,t)}function wr(e,t){return null!=e&&t in Te(e)}function xr(e,t,r){for(var s=r?It:Ct,i=e[0].length,o=e.length,a=o,c=re(o),l=1/0,u=[];a--;){var p=e[a];a&&t&&(p=Rt(p,Kt(t))),l=gn(p.length,l),c[a]=r||!t&&(120>i||120>p.length)?n:new zn(a&&p)}p=e[0];var d=-1,h=c[0];e:for(;++d<i&&l>u.length;){var f=p[d],m=t?t(f):f;if(f=r||0!==f?f:0,!(h?Wt(h,m):s(u,m,r))){for(a=o;--a;){var g=c[a];if(!(g?Wt(g,m):s(e[a],m,r)))continue e}h&&h.push(m),u.push(f)}}return u}function kr(e,t,r){var s=null==(e=Si(e,t=ms(t,e)))?e:e[Ni(zi(t))];return null==s?n:At(s,e,r)}function Cr(e){return Jo(e)&&Ar(e)==h}function Ir(e,t,r,s,i){return e===t||(null==e||null==t||!Jo(e)&&!Jo(t)?e!=e&&t!=t:function(e,t,r,s,i,o){var a=$o(e),c=$o(t),l=a?f:ui(e),u=c?f:ui(t),p=(l=l==h?A:l)==A,d=(u=u==h?A:u)==A,v=l==u;if(v&&qo(e)){if(!qo(t))return!1;a=!0,p=!1}if(v&&!p)return o||(o=new Vn),a||ia(e)?Js(e,t,r,s,i,o):function(e,t,n,r,s,i,o){switch(n){case R:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case I:return!(e.byteLength!=t.byteLength||!i(new Ue(e),new Ue(t)));case m:case g:case _:return Mo(+e,+t);case y:return e.name==t.name&&e.message==t.message;case T:case x:return e==t+"";case E:var a=rn;case w:if(a||(a=an),e.size!=t.size&&!(1&r))return!1;var c=o.get(e);if(c)return c==t;r|=2,o.set(e,t);var l=Js(a(e),a(t),r,s,i,o);return o.delete(e),l;case k:if(Ln)return Ln.call(e)==Ln.call(t)}return!1}(e,t,l,r,s,i,o);if(!(1&r)){var b=p&&Ne.call(e,"__wrapped__"),S=d&&Ne.call(t,"__wrapped__");if(b||S){var C=b?e.value():e,O=S?t.value():t;return o||(o=new Vn),i(C,O,r,s,o)}}return!!v&&(o||(o=new Vn),function(e,t,r,s,i,o){var a=1&r,c=Zs(e),l=c.length;if(l!=Zs(t).length&&!a)return!1;for(var u=l;u--;){var p=c[u];if(!(a?p in t:Ne.call(t,p)))return!1}var d=o.get(e),h=o.get(t);if(d&&h)return d==t&&h==e;var f=!0;o.set(e,t),o.set(t,e);for(var m=a;++u<l;){var g=e[p=c[u]],y=t[p];if(s)var v=a?s(y,g,p,t,e,o):s(g,y,p,e,t,o);if(!(v===n?g===y||i(g,y,r,s,o):v)){f=!1;break}m||(m="constructor"==p)}if(f&&!m){var b=e.constructor,E=t.constructor;b==E||!("constructor"in e)||!("constructor"in t)||"function"==typeof b&&b instanceof b&&"function"==typeof E&&E instanceof E||(f=!1)}return o.delete(e),o.delete(t),f}(e,t,r,s,i,o))}(e,t,r,s,Ir,i))}function Rr(e,t,r,s){var i=r.length,o=i,a=!s;if(null==e)return!o;for(e=Te(e);i--;){var c=r[i];if(a&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++i<o;){var l=(c=r[i])[0],u=e[l],p=c[1];if(a&&c[2]){if(u===n&&!(l in e))return!1}else{var d=new Vn;if(s)var h=s(u,p,l,e,t,d);if(!(h===n?Ir(p,u,3,s,d):h))return!1}}return!0}function Or(e){return!(!Wo(e)||function(e){return!!Pe&&Pe in e}(e))&&(Yo(e)?je:fe).test(Di(e))}function Nr(e){return"function"==typeof e?e:null==e?Za:"object"==typeof e?$o(e)?Br(e[0],e[1]):Mr(e):cc(e)}function Dr(e){if(!bi(e))return fn(e);var t=[];for(var n in Te(e))Ne.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Pr(e,t){return t>e}function Lr(e,t){var n=-1,r=Ho(e)?re(e.length):[];return lr(e,(function(e,s,i){r[++n]=t(e,s,i)})),r}function Mr(e){var t=oi(e);return 1==t.length&&t[0][2]?_i(t[0][0],t[0][1]):function(n){return n===e||Rr(n,e,t)}}function Br(e,t){return gi(e)&&Ei(t)?_i(Ni(e),t):function(r){var s=Aa(r,e);return s===n&&s===t?Sa(r,e):Ir(t,s,3)}}function jr(e,t,r,s,i){e!==t&&mr(t,(function(o,a){if(i||(i=new Vn),Wo(o))!function(e,t,r,s,i,o,a){var c=Ti(e,r),l=Ti(t,r),u=a.get(l);if(u)Jn(e,r,u);else{var p=o?o(c,l,r+"",e,t,a):n,d=p===n;if(d){var h=$o(l),f=!h&&qo(l),m=!h&&!f&&ia(l);p=l,h||f||m?$o(c)?p=c:Go(c)?p=ws(c):f?(d=!1,p=bs(l,!0)):m?(d=!1,p=_s(l,!0)):p=[]:ea(l)||Fo(l)?(p=c,Fo(c)?p=ha(c):Wo(c)&&!Yo(c)||(p=di(l))):d=!1}d&&(a.set(l,p),i(p,l,s,o,a),a.delete(l)),Jn(e,r,p)}}(e,t,a,r,jr,s,i);else{var c=s?s(Ti(e,a),o,a+"",e,t,i):n;c===n&&(c=o),Jn(e,a,c)}}),Ca)}function Fr(e,t){var r=e.length;if(r)return fi(t+=0>t?r:0,r)?e[t]:n}function $r(e,t,n){t=t.length?Rt(t,(function(e){return $o(e)?function(t){return Er(t,1===e.length?e[0]:e)}:e})):[Za];var r=-1;t=Rt(t,Kt(si()));var s=Lr(e,(function(e,n,s){var i=Rt(t,(function(t){return t(e)}));return{criteria:i,index:++r,value:e}}));return function(e,t){var r=e.length;for(e.sort((function(e,t){return function(e,t,n){for(var r=-1,s=e.criteria,i=t.criteria,o=s.length,a=n.length;++r<o;){var c=As(s[r],i[r]);if(c)return a>r?c*("desc"==n[r]?-1:1):c}return e.index-t.index}(e,t,n)}));r--;)e[r]=e[r].value;return e}(s)}function Ur(e,t,n){for(var r=-1,s=t.length,i={};++r<s;){var o=t[r],a=Er(e,o);n(a,o)&&Qr(i,ms(o,e),a)}return i}function Hr(e,t,n,r){var s=r?Ft:jt,i=-1,o=t.length,a=e;for(e===t&&(t=ws(t)),n&&(a=Rt(e,Kt(n)));++i<o;)for(var c=0,l=t[i],u=n?n(l):l;(c=s(a,u,c,r))>-1;)a!==e&&Ve.call(a,c,1),Ve.call(e,c,1);return e}function Gr(e,t){for(var n=e?t.length:0,r=n-1;n--;){var s=t[n];if(n==r||s!==i){var i=s;fi(s)?Ve.call(e,s,1):as(e,s)}}return e}function qr(e,t){return e+dt(bn()*(t-e+1))}function zr(e,t){var n="";if(!e||1>t||t>l)return n;do{t%2&&(n+=e),(t=dt(t/2))&&(e+=e)}while(t);return n}function Vr(e,t){return ki(Ai(e,t,Za),e+"")}function Yr(e){return Kn(Ma(e))}function Kr(e,t){var n=Ma(e);return Ri(n,sr(t,0,n.length))}function Qr(e,t,r,s){if(!Wo(e))return e;for(var i=-1,o=(t=ms(t,e)).length,a=o-1,c=e;null!=c&&++i<o;){var l=Ni(t[i]),u=r;if("__proto__"===l||"constructor"===l||"prototype"===l)return e;if(i!=a){var p=c[l];(u=s?s(p,l,c):n)===n&&(u=Wo(p)?p:fi(t[i+1])?[]:{})}Xn(c,l,u),c=c[l]}return e}var Wr=kn?function(e,t){return kn.set(e,t),e}:Za,Jr=Ze?function(e,t){return Ze(e,"toString",{configurable:!0,enumerable:!1,value:Wa(t),writable:!0})}:Za;function Xr(e){return Ri(Ma(e))}function Zr(e,t,n){var r=-1,s=e.length;0>t&&(t=-t>s?0:s+t),0>(n=n>s?s:n)&&(n+=s),s=t>n?0:n-t>>>0,t>>>=0;for(var i=re(s);++r<s;)i[r]=e[r+t];return i}function es(e,t){var n;return lr(e,(function(e,r,s){return!(n=t(e,r,s))})),!!n}function ts(e,t,n){var r=0,s=null==e?r:e.length;if("number"==typeof t&&t==t&&2147483647>=s){for(;s>r;){var i=r+s>>>1,o=e[i];null===o||sa(o)||(n?o>t:o>=t)?s=i:r=i+1}return s}return ns(e,t,Za,n)}function ns(e,t,r,s){var i=0,o=null==e?0:e.length;if(0===o)return 0;for(var a=(t=r(t))!=t,c=null===t,l=sa(t),u=t===n;o>i;){var p=dt((i+o)/2),d=r(e[p]),h=d!==n,f=null===d,m=d==d,g=sa(d);if(a)var y=s||m;else y=u?m&&(s||h):c?m&&h&&(s||!f):l?m&&h&&!f&&(s||!g):!f&&!g&&(s?t>=d:t>d);y?i=p+1:o=p}return gn(o,4294967294)}function rs(e,t){for(var n=-1,r=e.length,s=0,i=[];++n<r;){var o=e[n],a=t?t(o):o;if(!n||!Mo(a,c)){var c=a;i[s++]=0===o?0:o}}return i}function ss(e){return"number"==typeof e?e:sa(e)?u:+e}function is(e){if("string"==typeof e)return e;if($o(e))return Rt(e,is)+"";if(sa(e))return Mn?Mn.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function os(e,t,n){var r=-1,s=Ct,i=e.length,o=!0,a=[],c=a;if(n)o=!1,s=It;else if(200>i)c=t?[]:a;else{var l=t?null:zs(e);if(l)return an(l);o=!1,s=Wt,c=new zn}e:for(;++r<i;){var u=e[r],p=t?t(u):u;if(u=n||0!==u?u:0,o&&p==p){for(var d=c.length;d--;)if(c[d]===p)continue e;t&&c.push(p),a.push(u)}else s(c,p,n)||(c!==a&&c.push(p),a.push(u))}return a}function as(e,t){return null==(e=Si(e,t=ms(t,e)))||delete e[Ni(zi(t))]}function cs(e,t,n,r){return Qr(e,t,n(Er(e,t)),r)}function ls(e,t,n,r){for(var s=e.length,i=r?s:-1;(r?i--:++i<s)&&t(e[i],i,e););return n?Zr(e,r?0:i,r?i+1:s):Zr(e,r?i+1:0,r?s:i)}function us(e,t){var n=e;return n instanceof Un&&(n=n.value()),Nt(t,(function(e,t){return t.func.apply(t.thisArg,Ot([e],t.args))}),n)}function ps(e,t,n){var r=e.length;if(2>r)return r?os(e[0]):[];for(var s=-1,i=re(r);++s<r;)for(var o=e[s],a=-1;++a<r;)a!=s&&(i[s]=cr(i[s]||o,e[a],t,n));return os(fr(i,1),t,n)}function ds(e,t,r){for(var s=-1,i=e.length,o=t.length,a={};++s<i;)r(a,e[s],o>s?t[s]:n);return a}function hs(e){return Go(e)?e:[]}function fs(e){return"function"==typeof e?e:Za}function ms(e,t){return $o(e)?e:gi(e,t)?[e]:Oi(fa(e))}var gs=Vr;function ys(e,t,r){var s=e.length;return r=r===n?s:r,t||s>r?Zr(e,t,r):e}var vs=it||function(e){return ut.clearTimeout(e)};function bs(e,t){if(t)return e.slice();var n=e.length,r=He?He(n):new e.constructor(n);return e.copy(r),r}function Es(e){var t=new e.constructor(e.byteLength);return new Ue(t).set(new Ue(e)),t}function _s(e,t){var n=t?Es(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function As(e,t){if(e!==t){var r=e!==n,s=null===e,i=e==e,o=sa(e),a=t!==n,c=null===t,l=t==t,u=sa(t);if(!c&&!u&&!o&&e>t||o&&a&&l&&!c&&!u||s&&a&&l||!r&&l||!i)return 1;if(!s&&!o&&!u&&t>e||u&&r&&i&&!s&&!o||c&&r&&i||!a&&i||!l)return-1}return 0}function Ss(e,t,n,r){for(var s=-1,i=e.length,o=n.length,a=-1,c=t.length,l=mn(i-o,0),u=re(c+l),p=!r;++a<c;)u[a]=t[a];for(;++s<o;)(p||i>s)&&(u[n[s]]=e[s]);for(;l--;)u[a++]=e[s++];return u}function Ts(e,t,n,r){for(var s=-1,i=e.length,o=-1,a=n.length,c=-1,l=t.length,u=mn(i-a,0),p=re(u+l),d=!r;++s<u;)p[s]=e[s];for(var h=s;++c<l;)p[h+c]=t[c];for(;++o<a;)(d||i>s)&&(p[h+n[o]]=e[s++]);return p}function ws(e,t){var n=-1,r=e.length;for(t||(t=re(r));++n<r;)t[n]=e[n];return t}function xs(e,t,r,s){var i=!r;r||(r={});for(var o=-1,a=t.length;++o<a;){var c=t[o],l=s?s(r[c],e[c],c,r,e):n;l===n&&(l=e[c]),i?nr(r,c,l):Xn(r,c,l)}return r}function ks(e,t){return function(n,r){var s=$o(n)?St:er,i=t?t():{};return s(n,e,si(r,2),i)}}function Cs(e){return Vr((function(t,r){var s=-1,i=r.length,o=i>1?r[i-1]:n,a=i>2?r[2]:n;for(o=e.length>3&&"function"==typeof o?(i--,o):n,a&&mi(r[0],r[1],a)&&(o=3>i?n:o,i=1),t=Te(t);++s<i;){var c=r[s];c&&e(t,c,s,o)}return t}))}function Is(e,t){return function(n,r){if(null==n)return n;if(!Ho(n))return e(n,r);for(var s=n.length,i=t?s:-1,o=Te(n);(t?i--:++i<s)&&!1!==r(o[i],i,o););return n}}function Rs(e){return function(t,n,r){for(var s=-1,i=Te(t),o=r(t),a=o.length;a--;){var c=o[e?a:++s];if(!1===n(i[c],c,i))break}return t}}function Os(e){return function(t){var r=nn(t=fa(t))?un(t):n,s=r?r[0]:t.charAt(0),i=r?ys(r,1).join(""):t.slice(1);return s[e]()+i}}function Ns(e){return function(t){return Nt(Ya(Fa(t).replace(Qe,"")),e,"")}}function Ds(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=jn(e.prototype),r=e.apply(n,t);return Wo(r)?r:n}}function Ps(e){return function(t,r,s){var i=Te(t);if(!Ho(t)){var o=si(r,3);t=ka(t),r=function(e){return o(i[e],e,i)}}var a=e(t,r,s);return a>-1?i[o?t[a]:a]:n}}function Ls(e){return Xs((function(t){var s=t.length,i=s,o=$n.prototype.thru;for(e&&t.reverse();i--;){var a=t[i];if("function"!=typeof a)throw new ke(r);if(o&&!c&&"wrapper"==ni(a))var c=new $n([],!0)}for(i=c?i:s;++i<s;){var l=ni(a=t[i]),u="wrapper"==l?ti(a):n;c=u&&yi(u[0])&&424==u[1]&&!u[4].length&&1==u[9]?c[ni(u[0])].apply(c,u[3]):1==a.length&&yi(a)?c[l]():c.thru(a)}return function(){var e=arguments,n=e[0];if(c&&1==e.length&&$o(n))return c.plant(n).value();for(var r=0,i=s?t[r].apply(this,e):n;++r<s;)i=t[r].call(this,i);return i}}))}function Ms(e,t,r,s,i,o,c,l,u,p){var d=t&a,h=1&t,f=2&t,m=24&t,g=512&t,y=f?n:Ds(e);return function a(){for(var v=arguments.length,b=re(v),E=v;E--;)b[E]=arguments[E];if(m)var _=ri(a),A=function(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}(b,_);if(s&&(b=Ss(b,s,i,m)),o&&(b=Ts(b,o,c,m)),v-=A,m&&p>v){var S=on(b,_);return Gs(e,t,Ms,a.placeholder,r,b,S,l,u,p-v)}var T=h?r:this,w=f?T[e]:e;return v=b.length,l?b=function(e,t){for(var r=e.length,s=gn(t.length,r),i=ws(e);s--;){var o=t[s];e[s]=fi(o,r)?i[o]:n}return e}(b,l):g&&v>1&&b.reverse(),d&&v>u&&(b.length=u),this&&this!==ut&&this instanceof a&&(w=y||Ds(w)),w.apply(T,b)}}function Bs(e,t){return function(n,r){return function(e,t,n,r){return yr(e,(function(e,s,i){t(r,n(e),s,i)})),r}(n,e,t(r),{})}}function js(e,t){return function(r,s){var i;if(r===n&&s===n)return t;if(r!==n&&(i=r),s!==n){if(i===n)return s;"string"==typeof r||"string"==typeof s?(r=is(r),s=is(s)):(r=ss(r),s=ss(s)),i=e(r,s)}return i}}function Fs(e){return Xs((function(t){return t=Rt(t,Kt(si())),Vr((function(n){var r=this;return e(t,(function(e){return At(e,r,n)}))}))}))}function $s(e,t){var r=(t=t===n?" ":is(t)).length;if(2>r)return r?zr(t,e):t;var s=zr(t,pt(e/ln(t)));return nn(t)?ys(un(s),0,e).join(""):s.slice(0,e)}function Us(e){return function(t,r,s){return s&&"number"!=typeof s&&mi(t,r,s)&&(r=s=n),t=la(t),r===n?(r=t,t=0):r=la(r),function(e,t,n,r){for(var s=-1,i=mn(pt((t-e)/(n||1)),0),o=re(i);i--;)o[r?i:++s]=e,e+=n;return o}(t,r,s=s===n?r>t?1:-1:la(s),e)}}function Hs(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=da(t),n=da(n)),e(t,n)}}function Gs(e,t,r,s,i,a,c,l,u,p){var d=8&t;t|=d?o:64,4&(t&=~(d?64:o))||(t&=-4);var h=[e,t,i,d?a:n,d?c:n,d?n:a,d?n:c,l,u,p],f=r.apply(n,h);return yi(e)&&wi(f,h),f.placeholder=s,Ci(f,e,t)}function qs(e){var t=Se[e];return function(e,n){if(e=da(e),(n=null==n?0:gn(ua(n),292))&&Lt(e)){var r=(fa(e)+"e").split("e");return+((r=(fa(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}}var zs=Tn&&1/an(new Tn([,-0]))[1]==c?function(e){return new Tn(e)}:sc;function Vs(e){return function(t){var n=ui(t);return n==E?rn(t):n==w?cn(t):function(e,t){return Rt(t,(function(t){return[t,e[t]]}))}(t,e(t))}}function Ys(e,t,s,c,l,u,p,d){var h=2&t;if(!h&&"function"!=typeof e)throw new ke(r);var f=c?c.length:0;if(f||(t&=-97,c=l=n),p=p===n?p:mn(ua(p),0),d=d===n?d:ua(d),f-=l?l.length:0,64&t){var m=c,g=l;c=l=n}var y=h?n:ti(e),v=[e,t,s,c,l,m,g,u,p,d];if(y&&function(e,t){var n=e[1],r=t[1],s=n|r;if(s>=131&&!(r==a&&8==n||r==a&&256==n&&t[8]>=e[7].length||384==r&&t[8]>=t[7].length&&8==n))return e;1&r&&(e[2]=t[2],s|=1&n?0:4);var o=t[3];if(o){var c=e[3];e[3]=c?Ss(c,o,t[4]):o,e[4]=c?on(e[3],i):t[4]}(o=t[5])&&(e[5]=(c=e[5])?Ts(c,o,t[6]):o,e[6]=c?on(e[5],i):t[6]),(o=t[7])&&(e[7]=o),r&a&&(e[8]=null==e[8]?t[8]:gn(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=s}(v,y),e=v[0],t=v[1],s=v[2],c=v[3],l=v[4],!(d=v[9]=v[9]===n?h?0:e.length:mn(v[9]-f,0))&&24&t&&(t&=-25),t&&1!=t)b=8==t||16==t?function(e,t,r){var s=Ds(e);return function i(){for(var o=arguments.length,a=re(o),c=o,l=ri(i);c--;)a[c]=arguments[c];var u=3>o&&a[0]!==l&&a[o-1]!==l?[]:on(a,l);return r>(o-=u.length)?Gs(e,t,Ms,i.placeholder,n,a,u,n,n,r-o):At(this&&this!==ut&&this instanceof i?s:e,this,a)}}(e,t,d):t!=o&&33!=t||l.length?Ms.apply(n,v):function(e,t,n,r){var s=1&t,i=Ds(e);return function t(){for(var o=-1,a=arguments.length,c=-1,l=r.length,u=re(l+a),p=this&&this!==ut&&this instanceof t?i:e;++c<l;)u[c]=r[c];for(;a--;)u[c++]=arguments[++o];return At(p,s?n:this,u)}}(e,t,s,c);else var b=function(e,t,n){var r=1&t,s=Ds(e);return function t(){return(this&&this!==ut&&this instanceof t?s:e).apply(r?n:this,arguments)}}(e,t,s);return Ci((y?Wr:wi)(b,v),e,t)}function Ks(e,t,r,s){return e===n||Mo(e,Ie[r])&&!Ne.call(s,r)?t:e}function Qs(e,t,r,s,i,o){return Wo(e)&&Wo(t)&&(o.set(t,e),jr(e,t,n,Qs,o),o.delete(t)),e}function Ws(e){return ea(e)?n:e}function Js(e,t,r,s,i,o){var a=1&r,c=e.length,l=t.length;if(!(c==l||a&&l>c))return!1;var u=o.get(e),p=o.get(t);if(u&&p)return u==t&&p==e;var d=-1,h=!0,f=2&r?new zn:n;for(o.set(e,t),o.set(t,e);++d<c;){var m=e[d],g=t[d];if(s)var y=a?s(g,m,d,t,e,o):s(m,g,d,e,t,o);if(y!==n){if(y)continue;h=!1;break}if(f){if(!Pt(t,(function(e,t){if(!Wt(f,t)&&(m===e||i(m,e,r,s,o)))return f.push(t)}))){h=!1;break}}else if(m!==g&&!i(m,g,r,s,o)){h=!1;break}}return o.delete(e),o.delete(t),h}function Xs(e){return ki(Ai(e,n,$i),e+"")}function Zs(e){return _r(e,ka,ci)}function ei(e){return _r(e,Ca,li)}var ti=kn?function(e){return kn.get(e)}:sc;function ni(e){for(var t=e.name+"",n=Cn[t],r=Ne.call(Cn,t)?n.length:0;r--;){var s=n[r],i=s.func;if(null==i||i==e)return s.name}return t}function ri(e){return(Ne.call(Bn,"placeholder")?Bn:e).placeholder}function si(){var e=Bn.iteratee||ec;return e=e===ec?Nr:e,arguments.length?e(arguments[0],arguments[1]):e}function ii(e,t){var n,r,s=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?s["string"==typeof t?"string":"hash"]:s.map}function oi(e){for(var t=ka(e),n=t.length;n--;){var r=t[n],s=e[r];t[n]=[r,s,Ei(s)]}return t}function ai(e,t){var r=function(e,t){return null==e?n:e[t]}(e,t);return Or(r)?r:n}var ci=ft?function(e){return null==e?[]:(e=Te(e),kt(ft(e),(function(t){return ze.call(e,t)})))}:pc,li=ft?function(e){for(var t=[];e;)Ot(t,ci(e)),e=Ge(e);return t}:pc,ui=Ar;function pi(e,t,n){for(var r=-1,s=(t=ms(t,e)).length,i=!1;++r<s;){var o=Ni(t[r]);if(!(i=null!=e&&n(e,o)))break;e=e[o]}return i||++r!=s?i:!!(s=null==e?0:e.length)&&Qo(s)&&fi(o,s)&&($o(e)||Fo(e))}function di(e){return"function"!=typeof e.constructor||bi(e)?{}:jn(Ge(e))}function hi(e){return $o(e)||Fo(e)||!!(Ye&&e&&e[Ye])}function fi(e,t){var n=typeof e;return!!(t=null==t?l:t)&&("number"==n||"symbol"!=n&&ge.test(e))&&e>-1&&e%1==0&&t>e}function mi(e,t,n){if(!Wo(n))return!1;var r=typeof t;return!!("number"==r?Ho(n)&&fi(t,n.length):"string"==r&&t in n)&&Mo(n[t],e)}function gi(e,t){if($o(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!sa(e))||X.test(e)||!J.test(e)||null!=t&&e in Te(t)}function yi(e){var t=ni(e),n=Bn[t];if("function"!=typeof n||!(t in Un.prototype))return!1;if(e===n)return!0;var r=ti(n);return!!r&&e===r[0]}(_n&&ui(new _n(new ArrayBuffer(1)))!=R||An&&ui(new An)!=E||Sn&&ui(Sn.resolve())!=S||Tn&&ui(new Tn)!=w||wn&&ui(new wn)!=C)&&(ui=function(e){var t=Ar(e),r=t==A?e.constructor:n,s=r?Di(r):"";if(s)switch(s){case In:return R;case Rn:return E;case On:return S;case Nn:return w;case Dn:return C}return t});var vi=Re?Yo:dc;function bi(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Ie)}function Ei(e){return e==e&&!Wo(e)}function _i(e,t){return function(r){return null!=r&&r[e]===t&&(t!==n||e in Te(r))}}function Ai(e,t,r){return t=mn(t===n?e.length-1:t,0),function(){for(var n=arguments,s=-1,i=mn(n.length-t,0),o=re(i);++s<i;)o[s]=n[t+s];s=-1;for(var a=re(t+1);++s<t;)a[s]=n[s];return a[t]=r(o),At(e,this,a)}}function Si(e,t){return 2>t.length?e:Er(e,Zr(t,0,-1))}function Ti(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var wi=Ii(Wr),xi=lt||function(e,t){return ut.setTimeout(e,t)},ki=Ii(Jr);function Ci(e,t,n){var r=t+"";return ki(e,function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(se,"{\n/* [wrapped with "+t+"] */\n")}(r,function(e,t){return Tt(d,(function(n){var r="_."+n[0];t&n[1]&&!Ct(e,r)&&e.push(r)})),e.sort()}(function(e){var t=e.match(ie);return t?t[1].split(oe):[]}(r),n)))}function Ii(e){var t=0,r=0;return function(){var s=yn(),i=16-(s-r);if(r=s,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(n,arguments)}}function Ri(e,t){var r=-1,s=e.length,i=s-1;for(t=t===n?s:t;++r<t;){var o=qr(r,i),a=e[o];e[o]=e[r],e[r]=a}return e.length=t,e}var Oi=function(e){var t=Ro((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(Z,(function(e,n,r,s){t.push(r?s.replace(le,"$1"):n||e)})),t}),(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}();function Ni(e){if("string"==typeof e||sa(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Di(e){if(null!=e){try{return Oe.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Pi(e){if(e instanceof Un)return e.clone();var t=new $n(e.__wrapped__,e.__chain__);return t.__actions__=ws(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var Li=Vr((function(e,t){return Go(e)?cr(e,fr(t,1,Go,!0)):[]})),Mi=Vr((function(e,t){var r=zi(t);return Go(r)&&(r=n),Go(e)?cr(e,fr(t,1,Go,!0),si(r,2)):[]})),Bi=Vr((function(e,t){var r=zi(t);return Go(r)&&(r=n),Go(e)?cr(e,fr(t,1,Go,!0),n,r):[]}));function ji(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var s=null==n?0:ua(n);return 0>s&&(s=mn(r+s,0)),Bt(e,si(t,3),s)}function Fi(e,t,r){var s=null==e?0:e.length;if(!s)return-1;var i=s-1;return r!==n&&(i=ua(r),i=0>r?mn(s+i,0):gn(i,s-1)),Bt(e,si(t,3),i,!0)}function $i(e){return null!=e&&e.length?fr(e,1):[]}function Ui(e){return e&&e.length?e[0]:n}var Hi=Vr((function(e){var t=Rt(e,hs);return t.length&&t[0]===e[0]?xr(t):[]})),Gi=Vr((function(e){var t=zi(e),r=Rt(e,hs);return t===zi(r)?t=n:r.pop(),r.length&&r[0]===e[0]?xr(r,si(t,2)):[]})),qi=Vr((function(e){var t=zi(e),r=Rt(e,hs);return(t="function"==typeof t?t:n)&&r.pop(),r.length&&r[0]===e[0]?xr(r,n,t):[]}));function zi(e){var t=null==e?0:e.length;return t?e[t-1]:n}var Vi=Vr(Yi);function Yi(e,t){return e&&e.length&&t&&t.length?Hr(e,t):e}var Ki=Xs((function(e,t){var n=null==e?0:e.length,r=rr(e,t);return Gr(e,Rt(t,(function(e){return fi(e,n)?+e:e})).sort(As)),r}));function Qi(e){return null==e?e:En.call(e)}var Wi=Vr((function(e){return os(fr(e,1,Go,!0))})),Ji=Vr((function(e){var t=zi(e);return Go(t)&&(t=n),os(fr(e,1,Go,!0),si(t,2))})),Xi=Vr((function(e){var t=zi(e);return t="function"==typeof t?t:n,os(fr(e,1,Go,!0),n,t)}));function Zi(e){if(!e||!e.length)return[];var t=0;return e=kt(e,(function(e){if(Go(e))return t=mn(e.length,t),!0})),Vt(t,(function(t){return Rt(e,Ht(t))}))}function eo(e,t){if(!e||!e.length)return[];var r=Zi(e);return null==t?r:Rt(r,(function(e){return At(t,n,e)}))}var to=Vr((function(e,t){return Go(e)?cr(e,t):[]})),no=Vr((function(e){return ps(kt(e,Go))})),ro=Vr((function(e){var t=zi(e);return Go(t)&&(t=n),ps(kt(e,Go),si(t,2))})),so=Vr((function(e){var t=zi(e);return t="function"==typeof t?t:n,ps(kt(e,Go),n,t)})),io=Vr(Zi),oo=Vr((function(e){var t=e.length,r=t>1?e[t-1]:n;return r="function"==typeof r?(e.pop(),r):n,eo(e,r)}));function ao(e){var t=Bn(e);return t.__chain__=!0,t}function co(e,t){return t(e)}var lo=Xs((function(e){var t=e.length,r=t?e[0]:0,s=this.__wrapped__,i=function(t){return rr(t,e)};return 1>=t&&!this.__actions__.length&&s instanceof Un&&fi(r)?((s=s.slice(r,+r+(t?1:0))).__actions__.push({func:co,args:[i],thisArg:n}),new $n(s,this.__chain__).thru((function(e){return t&&!e.length&&e.push(n),e}))):this.thru(i)})),uo=ks((function(e,t,n){Ne.call(e,n)?++e[n]:nr(e,n,1)})),po=Ps(ji),ho=Ps(Fi);function fo(e,t){return($o(e)?Tt:lr)(e,si(t,3))}function mo(e,t){return($o(e)?wt:ur)(e,si(t,3))}var go=ks((function(e,t,n){Ne.call(e,n)?e[n].push(t):nr(e,n,[t])})),yo=Vr((function(e,t,n){var r=-1,s="function"==typeof t,i=Ho(e)?re(e.length):[];return lr(e,(function(e){i[++r]=s?At(t,e,n):kr(e,t,n)})),i})),vo=ks((function(e,t,n){nr(e,n,t)}));function bo(e,t){return($o(e)?Rt:Lr)(e,si(t,3))}var Eo=ks((function(e,t,n){e[n?0:1].push(t)}),(function(){return[[],[]]})),_o=Vr((function(e,t){if(null==e)return[];var n=t.length;return n>1&&mi(e,t[0],t[1])?t=[]:n>2&&mi(t[0],t[1],t[2])&&(t=[t[0]]),$r(e,fr(t,1),[])})),Ao=ct||function(){return ut.Date.now()};function So(e,t,r){return t=r?n:t,Ys(e,a,n,n,n,n,t=e&&null==t?e.length:t)}function To(e,t){var s;if("function"!=typeof t)throw new ke(r);return e=ua(e),function(){return--e>0&&(s=t.apply(this,arguments)),e>1||(t=n),s}}var wo=Vr((function(e,t,n){var r=1;if(n.length){var s=on(n,ri(wo));r|=o}return Ys(e,r,t,n,s)})),xo=Vr((function(e,t,n){var r=3;if(n.length){var s=on(n,ri(xo));r|=o}return Ys(t,r,e,n,s)}));function ko(e,t,s){var i,o,a,c,l,u,p=0,d=!1,h=!1,f=!0;if("function"!=typeof e)throw new ke(r);function m(t){var r=i,s=o;return i=o=n,p=t,c=e.apply(s,r)}function g(e){var r=e-u;return u===n||r>=t||0>r||h&&e-p>=a}function y(){var e=Ao();if(g(e))return v(e);l=xi(y,function(e){var n=t-(e-u);return h?gn(n,a-(e-p)):n}(e))}function v(e){return l=n,f&&i?m(e):(i=o=n,c)}function b(){var e=Ao(),r=g(e);if(i=arguments,o=this,u=e,r){if(l===n)return function(e){return p=e,l=xi(y,t),d?m(e):c}(u);if(h)return vs(l),l=xi(y,t),m(u)}return l===n&&(l=xi(y,t)),c}return t=da(t)||0,Wo(s)&&(d=!!s.leading,a=(h="maxWait"in s)?mn(da(s.maxWait)||0,t):a,f="trailing"in s?!!s.trailing:f),b.cancel=function(){l!==n&&vs(l),p=0,i=u=o=l=n},b.flush=function(){return l===n?c:v(Ao())},b}var Co=Vr((function(e,t){return ar(e,1,t)})),Io=Vr((function(e,t,n){return ar(e,da(t)||0,n)}));function Ro(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new ke(r);var n=function(){var r=arguments,s=t?t.apply(this,r):r[0],i=n.cache;if(i.has(s))return i.get(s);var o=e.apply(this,r);return n.cache=i.set(s,o)||i,o};return n.cache=new(Ro.Cache||qn),n}function Oo(e){if("function"!=typeof e)throw new ke(r);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}Ro.Cache=qn;var No=gs((function(e,t){var n=(t=1==t.length&&$o(t[0])?Rt(t[0],Kt(si())):Rt(fr(t,1),Kt(si()))).length;return Vr((function(r){for(var s=-1,i=gn(r.length,n);++s<i;)r[s]=t[s].call(this,r[s]);return At(e,this,r)}))})),Do=Vr((function(e,t){var r=on(t,ri(Do));return Ys(e,o,n,t,r)})),Po=Vr((function(e,t){var r=on(t,ri(Po));return Ys(e,64,n,t,r)})),Lo=Xs((function(e,t){return Ys(e,256,n,n,n,t)}));function Mo(e,t){return e===t||e!=e&&t!=t}var Bo=Hs(Sr),jo=Hs((function(e,t){return e>=t})),Fo=Cr(function(){return arguments}())?Cr:function(e){return Jo(e)&&Ne.call(e,"callee")&&!ze.call(e,"callee")},$o=re.isArray,Uo=gt?Kt(gt):function(e){return Jo(e)&&Ar(e)==I};function Ho(e){return null!=e&&Qo(e.length)&&!Yo(e)}function Go(e){return Jo(e)&&Ho(e)}var qo=mt||dc,zo=yt?Kt(yt):function(e){return Jo(e)&&Ar(e)==g};function Vo(e){if(!Jo(e))return!1;var t=Ar(e);return t==y||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!ea(e)}function Yo(e){if(!Wo(e))return!1;var t=Ar(e);return t==v||t==b||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Ko(e){return"number"==typeof e&&e==ua(e)}function Qo(e){return"number"==typeof e&&e>-1&&e%1==0&&l>=e}function Wo(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Jo(e){return null!=e&&"object"==typeof e}var Xo=vt?Kt(vt):function(e){return Jo(e)&&ui(e)==E};function Zo(e){return"number"==typeof e||Jo(e)&&Ar(e)==_}function ea(e){if(!Jo(e)||Ar(e)!=A)return!1;var t=Ge(e);if(null===t)return!0;var n=Ne.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Oe.call(n)==Me}var ta=bt?Kt(bt):function(e){return Jo(e)&&Ar(e)==T},na=Et?Kt(Et):function(e){return Jo(e)&&ui(e)==w};function ra(e){return"string"==typeof e||!$o(e)&&Jo(e)&&Ar(e)==x}function sa(e){return"symbol"==typeof e||Jo(e)&&Ar(e)==k}var ia=_t?Kt(_t):function(e){return Jo(e)&&Qo(e.length)&&!!rt[Ar(e)]},oa=Hs(Pr),aa=Hs((function(e,t){return t>=e}));function ca(e){if(!e)return[];if(Ho(e))return ra(e)?un(e):ws(e);if(Ke&&e[Ke])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[Ke]());var t=ui(e);return(t==E?rn:t==w?an:Ma)(e)}function la(e){return e?(e=da(e))===c||e===-1/0?17976931348623157e292*(0>e?-1:1):e==e?e:0:0===e?e:0}function ua(e){var t=la(e),n=t%1;return t==t?n?t-n:t:0}function pa(e){return e?sr(ua(e),0,p):0}function da(e){if("number"==typeof e)return e;if(sa(e))return u;if(Wo(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Wo(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Yt(e);var n=he.test(e);return n||me.test(e)?at(e.slice(2),n?2:8):de.test(e)?u:+e}function ha(e){return xs(e,Ca(e))}function fa(e){return null==e?"":is(e)}var ma=Cs((function(e,t){if(bi(t)||Ho(t))xs(t,ka(t),e);else for(var n in t)Ne.call(t,n)&&Xn(e,n,t[n])})),ga=Cs((function(e,t){xs(t,Ca(t),e)})),ya=Cs((function(e,t,n,r){xs(t,Ca(t),e,r)})),va=Cs((function(e,t,n,r){xs(t,ka(t),e,r)})),ba=Xs(rr),Ea=Vr((function(e,t){e=Te(e);var r=-1,s=t.length,i=s>2?t[2]:n;for(i&&mi(t[0],t[1],i)&&(s=1);++r<s;)for(var o=t[r],a=Ca(o),c=-1,l=a.length;++c<l;){var u=a[c],p=e[u];(p===n||Mo(p,Ie[u])&&!Ne.call(e,u))&&(e[u]=o[u])}return e})),_a=Vr((function(e){return e.push(n,Qs),At(Ra,n,e)}));function Aa(e,t,r){var s=null==e?n:Er(e,t);return s===n?r:s}function Sa(e,t){return null!=e&&pi(e,t,wr)}var Ta=Bs((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Le.call(t)),e[t]=n}),Wa(Za)),wa=Bs((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Le.call(t)),Ne.call(e,t)?e[t].push(n):e[t]=[n]}),si),xa=Vr(kr);function ka(e){return Ho(e)?Yn(e):Dr(e)}function Ca(e){return Ho(e)?Yn(e,!0):function(e){if(!Wo(e))return function(e){var t=[];if(null!=e)for(var n in Te(e))t.push(n);return t}(e);var t=bi(e),n=[];for(var r in e)("constructor"!=r||!t&&Ne.call(e,r))&&n.push(r);return n}(e)}var Ia=Cs((function(e,t,n){jr(e,t,n)})),Ra=Cs((function(e,t,n,r){jr(e,t,n,r)})),Oa=Xs((function(e,t){var n={};if(null==e)return n;var r=!1;t=Rt(t,(function(t){return t=ms(t,e),r||(r=t.length>1),t})),xs(e,ei(e),n),r&&(n=ir(n,7,Ws));for(var s=t.length;s--;)as(n,t[s]);return n})),Na=Xs((function(e,t){return null==e?{}:function(e,t){return Ur(e,t,(function(t,n){return Sa(e,n)}))}(e,t)}));function Da(e,t){if(null==e)return{};var n=Rt(ei(e),(function(e){return[e]}));return t=si(t),Ur(e,n,(function(e,n){return t(e,n[0])}))}var Pa=Vs(ka),La=Vs(Ca);function Ma(e){return null==e?[]:Qt(e,ka(e))}var Ba=Ns((function(e,t,n){return t=t.toLowerCase(),e+(n?ja(t):t)}));function ja(e){return Va(fa(e).toLowerCase())}function Fa(e){return(e=fa(e))&&e.replace(ye,Zt).replace(We,"")}var $a=Ns((function(e,t,n){return e+(n?"-":"")+t.toLowerCase()})),Ua=Ns((function(e,t,n){return e+(n?" ":"")+t.toLowerCase()})),Ha=Os("toLowerCase"),Ga=Ns((function(e,t,n){return e+(n?"_":"")+t.toLowerCase()})),qa=Ns((function(e,t,n){return e+(n?" ":"")+Va(t)})),za=Ns((function(e,t,n){return e+(n?" ":"")+t.toUpperCase()})),Va=Os("toUpperCase");function Ya(e,t,r){return e=fa(e),(t=r?n:t)===n?function(e){return et.test(e)}(e)?function(e){return e.match(Xe)||[]}(e):function(e){return e.match(ae)||[]}(e):e.match(t)||[]}var Ka=Vr((function(e,t){try{return At(e,n,t)}catch(e){return Vo(e)?e:new _e(e)}})),Qa=Xs((function(e,t){return Tt(t,(function(t){t=Ni(t),nr(e,t,wo(e[t],e))})),e}));function Wa(e){return function(){return e}}var Ja=Ls(),Xa=Ls(!0);function Za(e){return e}function ec(e){return Nr("function"==typeof e?e:ir(e,1))}var tc=Vr((function(e,t){return function(n){return kr(n,e,t)}})),nc=Vr((function(e,t){return function(n){return kr(e,n,t)}}));function rc(e,t,n){var r=ka(t),s=br(t,r);null!=n||Wo(t)&&(s.length||!r.length)||(n=t,t=e,e=this,s=br(t,ka(t)));var i=!(Wo(n)&&"chain"in n&&!n.chain),o=Yo(e);return Tt(s,(function(n){var r=t[n];e[n]=r,o&&(e.prototype[n]=function(){var t=this.__chain__;if(i||t){var n=e(this.__wrapped__);return(n.__actions__=ws(this.__actions__)).push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,Ot([this.value()],arguments))})})),e}function sc(){}var ic=Fs(Rt),oc=Fs(xt),ac=Fs(Pt);function cc(e){return gi(e)?Ht(Ni(e)):function(e){return function(t){return Er(t,e)}}(e)}var lc=Us(),uc=Us(!0);function pc(){return[]}function dc(){return!1}var hc,fc=js((function(e,t){return e+t}),0),mc=qs("ceil"),gc=js((function(e,t){return e/t}),1),yc=qs("floor"),vc=js((function(e,t){return e*t}),1),bc=qs("round"),Ec=js((function(e,t){return e-t}),0);return Bn.after=function(e,t){if("function"!=typeof t)throw new ke(r);return e=ua(e),function(){if(1>--e)return t.apply(this,arguments)}},Bn.ary=So,Bn.assign=ma,Bn.assignIn=ga,Bn.assignInWith=ya,Bn.assignWith=va,Bn.at=ba,Bn.before=To,Bn.bind=wo,Bn.bindAll=Qa,Bn.bindKey=xo,Bn.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return $o(e)?e:[e]},Bn.chain=ao,Bn.chunk=function(e,t,r){t=(r?mi(e,t,r):t===n)?1:mn(ua(t),0);var s=null==e?0:e.length;if(!s||1>t)return[];for(var i=0,o=0,a=re(pt(s/t));s>i;)a[o++]=Zr(e,i,i+=t);return a},Bn.compact=function(e){for(var t=-1,n=null==e?0:e.length,r=0,s=[];++t<n;){var i=e[t];i&&(s[r++]=i)}return s},Bn.concat=function(){var e=arguments.length;if(!e)return[];for(var t=re(e-1),n=arguments[0],r=e;r--;)t[r-1]=arguments[r];return Ot($o(n)?ws(n):[n],fr(t,1))},Bn.cond=function(e){var t=null==e?0:e.length,n=si();return e=t?Rt(e,(function(e){if("function"!=typeof e[1])throw new ke(r);return[n(e[0]),e[1]]})):[],Vr((function(n){for(var r=-1;++r<t;){var s=e[r];if(At(s[0],this,n))return At(s[1],this,n)}}))},Bn.conforms=function(e){return function(e){var t=ka(e);return function(n){return or(n,e,t)}}(ir(e,1))},Bn.constant=Wa,Bn.countBy=uo,Bn.create=function(e,t){var n=jn(e);return null==t?n:tr(n,t)},Bn.curry=function e(t,r,s){var i=Ys(t,8,n,n,n,n,n,r=s?n:r);return i.placeholder=e.placeholder,i},Bn.curryRight=function e(t,r,s){var i=Ys(t,16,n,n,n,n,n,r=s?n:r);return i.placeholder=e.placeholder,i},Bn.debounce=ko,Bn.defaults=Ea,Bn.defaultsDeep=_a,Bn.defer=Co,Bn.delay=Io,Bn.difference=Li,Bn.differenceBy=Mi,Bn.differenceWith=Bi,Bn.drop=function(e,t,r){var s=null==e?0:e.length;return s?Zr(e,0>(t=r||t===n?1:ua(t))?0:t,s):[]},Bn.dropRight=function(e,t,r){var s=null==e?0:e.length;return s?Zr(e,0,0>(t=s-(t=r||t===n?1:ua(t)))?0:t):[]},Bn.dropRightWhile=function(e,t){return e&&e.length?ls(e,si(t,3),!0,!0):[]},Bn.dropWhile=function(e,t){return e&&e.length?ls(e,si(t,3),!0):[]},Bn.fill=function(e,t,r,s){var i=null==e?0:e.length;return i?(r&&"number"!=typeof r&&mi(e,t,r)&&(r=0,s=i),function(e,t,r,s){var i=e.length;for(0>(r=ua(r))&&(r=-r>i?0:i+r),0>(s=s===n||s>i?i:ua(s))&&(s+=i),s=r>s?0:pa(s);s>r;)e[r++]=t;return e}(e,t,r,s)):[]},Bn.filter=function(e,t){return($o(e)?kt:hr)(e,si(t,3))},Bn.flatMap=function(e,t){return fr(bo(e,t),1)},Bn.flatMapDeep=function(e,t){return fr(bo(e,t),c)},Bn.flatMapDepth=function(e,t,r){return r=r===n?1:ua(r),fr(bo(e,t),r)},Bn.flatten=$i,Bn.flattenDeep=function(e){return null!=e&&e.length?fr(e,c):[]},Bn.flattenDepth=function(e,t){return null!=e&&e.length?fr(e,t=t===n?1:ua(t)):[]},Bn.flip=function(e){return Ys(e,512)},Bn.flow=Ja,Bn.flowRight=Xa,Bn.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var s=e[t];r[s[0]]=s[1]}return r},Bn.functions=function(e){return null==e?[]:br(e,ka(e))},Bn.functionsIn=function(e){return null==e?[]:br(e,Ca(e))},Bn.groupBy=go,Bn.initial=function(e){return null!=e&&e.length?Zr(e,0,-1):[]},Bn.intersection=Hi,Bn.intersectionBy=Gi,Bn.intersectionWith=qi,Bn.invert=Ta,Bn.invertBy=wa,Bn.invokeMap=yo,Bn.iteratee=ec,Bn.keyBy=vo,Bn.keys=ka,Bn.keysIn=Ca,Bn.map=bo,Bn.mapKeys=function(e,t){var n={};return t=si(t,3),yr(e,(function(e,r,s){nr(n,t(e,r,s),e)})),n},Bn.mapValues=function(e,t){var n={};return t=si(t,3),yr(e,(function(e,r,s){nr(n,r,t(e,r,s))})),n},Bn.matches=function(e){return Mr(ir(e,1))},Bn.matchesProperty=function(e,t){return Br(e,ir(t,1))},Bn.memoize=Ro,Bn.merge=Ia,Bn.mergeWith=Ra,Bn.method=tc,Bn.methodOf=nc,Bn.mixin=rc,Bn.negate=Oo,Bn.nthArg=function(e){return e=ua(e),Vr((function(t){return Fr(t,e)}))},Bn.omit=Oa,Bn.omitBy=function(e,t){return Da(e,Oo(si(t)))},Bn.once=function(e){return To(2,e)},Bn.orderBy=function(e,t,r,s){return null==e?[]:($o(t)||(t=null==t?[]:[t]),$o(r=s?n:r)||(r=null==r?[]:[r]),$r(e,t,r))},Bn.over=ic,Bn.overArgs=No,Bn.overEvery=oc,Bn.overSome=ac,Bn.partial=Do,Bn.partialRight=Po,Bn.partition=Eo,Bn.pick=Na,Bn.pickBy=Da,Bn.property=cc,Bn.propertyOf=function(e){return function(t){return null==e?n:Er(e,t)}},Bn.pull=Vi,Bn.pullAll=Yi,Bn.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?Hr(e,t,si(n,2)):e},Bn.pullAllWith=function(e,t,r){return e&&e.length&&t&&t.length?Hr(e,t,n,r):e},Bn.pullAt=Ki,Bn.range=lc,Bn.rangeRight=uc,Bn.rearg=Lo,Bn.reject=function(e,t){return($o(e)?kt:hr)(e,Oo(si(t,3)))},Bn.remove=function(e,t){var n=[];if(!e||!e.length)return n;var r=-1,s=[],i=e.length;for(t=si(t,3);++r<i;){var o=e[r];t(o,r,e)&&(n.push(o),s.push(r))}return Gr(e,s),n},Bn.rest=function(e,t){if("function"!=typeof e)throw new ke(r);return Vr(e,t=t===n?t:ua(t))},Bn.reverse=Qi,Bn.sampleSize=function(e,t,r){return t=(r?mi(e,t,r):t===n)?1:ua(t),($o(e)?Qn:Kr)(e,t)},Bn.set=function(e,t,n){return null==e?e:Qr(e,t,n)},Bn.setWith=function(e,t,r,s){return s="function"==typeof s?s:n,null==e?e:Qr(e,t,r,s)},Bn.shuffle=function(e){return($o(e)?Wn:Xr)(e)},Bn.slice=function(e,t,r){var s=null==e?0:e.length;return s?(r&&"number"!=typeof r&&mi(e,t,r)?(t=0,r=s):(t=null==t?0:ua(t),r=r===n?s:ua(r)),Zr(e,t,r)):[]},Bn.sortBy=_o,Bn.sortedUniq=function(e){return e&&e.length?rs(e):[]},Bn.sortedUniqBy=function(e,t){return e&&e.length?rs(e,si(t,2)):[]},Bn.split=function(e,t,r){return r&&"number"!=typeof r&&mi(e,t,r)&&(t=r=n),(r=r===n?p:r>>>0)?(e=fa(e))&&("string"==typeof t||null!=t&&!ta(t))&&!(t=is(t))&&nn(e)?ys(un(e),0,r):e.split(t,r):[]},Bn.spread=function(e,t){if("function"!=typeof e)throw new ke(r);return t=null==t?0:mn(ua(t),0),Vr((function(n){var r=n[t],s=ys(n,0,t);return r&&Ot(s,r),At(e,this,s)}))},Bn.tail=function(e){var t=null==e?0:e.length;return t?Zr(e,1,t):[]},Bn.take=function(e,t,r){return e&&e.length?Zr(e,0,0>(t=r||t===n?1:ua(t))?0:t):[]},Bn.takeRight=function(e,t,r){var s=null==e?0:e.length;return s?Zr(e,0>(t=s-(t=r||t===n?1:ua(t)))?0:t,s):[]},Bn.takeRightWhile=function(e,t){return e&&e.length?ls(e,si(t,3),!1,!0):[]},Bn.takeWhile=function(e,t){return e&&e.length?ls(e,si(t,3)):[]},Bn.tap=function(e,t){return t(e),e},Bn.throttle=function(e,t,n){var s=!0,i=!0;if("function"!=typeof e)throw new ke(r);return Wo(n)&&(s="leading"in n?!!n.leading:s,i="trailing"in n?!!n.trailing:i),ko(e,t,{leading:s,maxWait:t,trailing:i})},Bn.thru=co,Bn.toArray=ca,Bn.toPairs=Pa,Bn.toPairsIn=La,Bn.toPath=function(e){return $o(e)?Rt(e,Ni):sa(e)?[e]:ws(Oi(fa(e)))},Bn.toPlainObject=ha,Bn.transform=function(e,t,n){var r=$o(e),s=r||qo(e)||ia(e);if(t=si(t,4),null==n){var i=e&&e.constructor;n=s?r?new i:[]:Wo(e)&&Yo(i)?jn(Ge(e)):{}}return(s?Tt:yr)(e,(function(e,r,s){return t(n,e,r,s)})),n},Bn.unary=function(e){return So(e,1)},Bn.union=Wi,Bn.unionBy=Ji,Bn.unionWith=Xi,Bn.uniq=function(e){return e&&e.length?os(e):[]},Bn.uniqBy=function(e,t){return e&&e.length?os(e,si(t,2)):[]},Bn.uniqWith=function(e,t){return t="function"==typeof t?t:n,e&&e.length?os(e,n,t):[]},Bn.unset=function(e,t){return null==e||as(e,t)},Bn.unzip=Zi,Bn.unzipWith=eo,Bn.update=function(e,t,n){return null==e?e:cs(e,t,fs(n))},Bn.updateWith=function(e,t,r,s){return s="function"==typeof s?s:n,null==e?e:cs(e,t,fs(r),s)},Bn.values=Ma,Bn.valuesIn=function(e){return null==e?[]:Qt(e,Ca(e))},Bn.without=to,Bn.words=Ya,Bn.wrap=function(e,t){return Do(fs(t),e)},Bn.xor=no,Bn.xorBy=ro,Bn.xorWith=so,Bn.zip=io,Bn.zipObject=function(e,t){return ds(e||[],t||[],Xn)},Bn.zipObjectDeep=function(e,t){return ds(e||[],t||[],Qr)},Bn.zipWith=oo,Bn.entries=Pa,Bn.entriesIn=La,Bn.extend=ga,Bn.extendWith=ya,rc(Bn,Bn),Bn.add=fc,Bn.attempt=Ka,Bn.camelCase=Ba,Bn.capitalize=ja,Bn.ceil=mc,Bn.clamp=function(e,t,r){return r===n&&(r=t,t=n),r!==n&&(r=(r=da(r))==r?r:0),t!==n&&(t=(t=da(t))==t?t:0),sr(da(e),t,r)},Bn.clone=function(e){return ir(e,4)},Bn.cloneDeep=function(e){return ir(e,5)},Bn.cloneDeepWith=function(e,t){return ir(e,5,t="function"==typeof t?t:n)},Bn.cloneWith=function(e,t){return ir(e,4,t="function"==typeof t?t:n)},Bn.conformsTo=function(e,t){return null==t||or(e,t,ka(t))},Bn.deburr=Fa,Bn.defaultTo=function(e,t){return null==e||e!=e?t:e},Bn.divide=gc,Bn.endsWith=function(e,t,r){e=fa(e),t=is(t);var s=e.length,i=r=r===n?s:sr(ua(r),0,s);return(r-=t.length)>=0&&e.slice(r,i)==t},Bn.eq=Mo,Bn.escape=function(e){return(e=fa(e))&&Y.test(e)?e.replace(z,en):e},Bn.escapeRegExp=function(e){return(e=fa(e))&&te.test(e)?e.replace(ee,"\\$&"):e},Bn.every=function(e,t,r){var s=$o(e)?xt:pr;return r&&mi(e,t,r)&&(t=n),s(e,si(t,3))},Bn.find=po,Bn.findIndex=ji,Bn.findKey=function(e,t){return Mt(e,si(t,3),yr)},Bn.findLast=ho,Bn.findLastIndex=Fi,Bn.findLastKey=function(e,t){return Mt(e,si(t,3),vr)},Bn.floor=yc,Bn.forEach=fo,Bn.forEachRight=mo,Bn.forIn=function(e,t){return null==e?e:mr(e,si(t,3),Ca)},Bn.forInRight=function(e,t){return null==e?e:gr(e,si(t,3),Ca)},Bn.forOwn=function(e,t){return e&&yr(e,si(t,3))},Bn.forOwnRight=function(e,t){return e&&vr(e,si(t,3))},Bn.get=Aa,Bn.gt=Bo,Bn.gte=jo,Bn.has=function(e,t){return null!=e&&pi(e,t,Tr)},Bn.hasIn=Sa,Bn.head=Ui,Bn.identity=Za,Bn.includes=function(e,t,n,r){e=Ho(e)?e:Ma(e),n=n&&!r?ua(n):0;var s=e.length;return 0>n&&(n=mn(s+n,0)),ra(e)?s>=n&&e.indexOf(t,n)>-1:!!s&&jt(e,t,n)>-1},Bn.indexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var s=null==n?0:ua(n);return 0>s&&(s=mn(r+s,0)),jt(e,t,s)},Bn.inRange=function(e,t,r){return t=la(t),r===n?(r=t,t=0):r=la(r),function(e,t,n){return e>=gn(t,n)&&e<mn(t,n)}(e=da(e),t,r)},Bn.invoke=xa,Bn.isArguments=Fo,Bn.isArray=$o,Bn.isArrayBuffer=Uo,Bn.isArrayLike=Ho,Bn.isArrayLikeObject=Go,Bn.isBoolean=function(e){return!0===e||!1===e||Jo(e)&&Ar(e)==m},Bn.isBuffer=qo,Bn.isDate=zo,Bn.isElement=function(e){return Jo(e)&&1===e.nodeType&&!ea(e)},Bn.isEmpty=function(e){if(null==e)return!0;if(Ho(e)&&($o(e)||"string"==typeof e||"function"==typeof e.splice||qo(e)||ia(e)||Fo(e)))return!e.length;var t=ui(e);if(t==E||t==w)return!e.size;if(bi(e))return!Dr(e).length;for(var n in e)if(Ne.call(e,n))return!1;return!0},Bn.isEqual=function(e,t){return Ir(e,t)},Bn.isEqualWith=function(e,t,r){var s=(r="function"==typeof r?r:n)?r(e,t):n;return s===n?Ir(e,t,n,r):!!s},Bn.isError=Vo,Bn.isFinite=function(e){return"number"==typeof e&&Lt(e)},Bn.isFunction=Yo,Bn.isInteger=Ko,Bn.isLength=Qo,Bn.isMap=Xo,Bn.isMatch=function(e,t){return e===t||Rr(e,t,oi(t))},Bn.isMatchWith=function(e,t,r){return r="function"==typeof r?r:n,Rr(e,t,oi(t),r)},Bn.isNaN=function(e){return Zo(e)&&e!=+e},Bn.isNative=function(e){if(vi(e))throw new _e("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Or(e)},Bn.isNil=function(e){return null==e},Bn.isNull=function(e){return null===e},Bn.isNumber=Zo,Bn.isObject=Wo,Bn.isObjectLike=Jo,Bn.isPlainObject=ea,Bn.isRegExp=ta,Bn.isSafeInteger=function(e){return Ko(e)&&e>=-9007199254740991&&l>=e},Bn.isSet=na,Bn.isString=ra,Bn.isSymbol=sa,Bn.isTypedArray=ia,Bn.isUndefined=function(e){return e===n},Bn.isWeakMap=function(e){return Jo(e)&&ui(e)==C},Bn.isWeakSet=function(e){return Jo(e)&&"[object WeakSet]"==Ar(e)},Bn.join=function(e,t){return null==e?"":Gt.call(e,t)},Bn.kebabCase=$a,Bn.last=zi,Bn.lastIndexOf=function(e,t,r){var s=null==e?0:e.length;if(!s)return-1;var i=s;return r!==n&&(i=0>(i=ua(r))?mn(s+i,0):gn(i,s-1)),t==t?function(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r}(e,t,i):Bt(e,$t,i,!0)},Bn.lowerCase=Ua,Bn.lowerFirst=Ha,Bn.lt=oa,Bn.lte=aa,Bn.max=function(e){return e&&e.length?dr(e,Za,Sr):n},Bn.maxBy=function(e,t){return e&&e.length?dr(e,si(t,2),Sr):n},Bn.mean=function(e){return Ut(e,Za)},Bn.meanBy=function(e,t){return Ut(e,si(t,2))},Bn.min=function(e){return e&&e.length?dr(e,Za,Pr):n},Bn.minBy=function(e,t){return e&&e.length?dr(e,si(t,2),Pr):n},Bn.stubArray=pc,Bn.stubFalse=dc,Bn.stubObject=function(){return{}},Bn.stubString=function(){return""},Bn.stubTrue=function(){return!0},Bn.multiply=vc,Bn.nth=function(e,t){return e&&e.length?Fr(e,ua(t)):n},Bn.noConflict=function(){return ut._===this&&(ut._=Be),this},Bn.noop=sc,Bn.now=Ao,Bn.pad=function(e,t,n){e=fa(e);var r=(t=ua(t))?ln(e):0;if(!t||r>=t)return e;var s=(t-r)/2;return $s(dt(s),n)+e+$s(pt(s),n)},Bn.padEnd=function(e,t,n){e=fa(e);var r=(t=ua(t))?ln(e):0;return t&&t>r?e+$s(t-r,n):e},Bn.padStart=function(e,t,n){e=fa(e);var r=(t=ua(t))?ln(e):0;return t&&t>r?$s(t-r,n)+e:e},Bn.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),vn(fa(e).replace(ne,""),t||0)},Bn.random=function(e,t,r){if(r&&"boolean"!=typeof r&&mi(e,t,r)&&(t=r=n),r===n&&("boolean"==typeof t?(r=t,t=n):"boolean"==typeof e&&(r=e,e=n)),e===n&&t===n?(e=0,t=1):(e=la(e),t===n?(t=e,e=0):t=la(t)),e>t){var s=e;e=t,t=s}if(r||e%1||t%1){var i=bn();return gn(e+i*(t-e+ot("1e-"+((i+"").length-1))),t)}return qr(e,t)},Bn.reduce=function(e,t,n){var r=$o(e)?Nt:qt,s=3>arguments.length;return r(e,si(t,4),n,s,lr)},Bn.reduceRight=function(e,t,n){var r=$o(e)?Dt:qt,s=3>arguments.length;return r(e,si(t,4),n,s,ur)},Bn.repeat=function(e,t,r){return t=(r?mi(e,t,r):t===n)?1:ua(t),zr(fa(e),t)},Bn.replace=function(){var e=arguments,t=fa(e[0]);return 3>e.length?t:t.replace(e[1],e[2])},Bn.result=function(e,t,r){var s=-1,i=(t=ms(t,e)).length;for(i||(i=1,e=n);++s<i;){var o=null==e?n:e[Ni(t[s])];o===n&&(s=i,o=r),e=Yo(o)?o.call(e):o}return e},Bn.round=bc,Bn.runInContext=e,Bn.sample=function(e){return($o(e)?Kn:Yr)(e)},Bn.size=function(e){if(null==e)return 0;if(Ho(e))return ra(e)?ln(e):e.length;var t=ui(e);return t==E||t==w?e.size:Dr(e).length},Bn.snakeCase=Ga,Bn.some=function(e,t,r){var s=$o(e)?Pt:es;return r&&mi(e,t,r)&&(t=n),s(e,si(t,3))},Bn.sortedIndex=function(e,t){return ts(e,t)},Bn.sortedIndexBy=function(e,t,n){return ns(e,t,si(n,2))},Bn.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var r=ts(e,t);if(n>r&&Mo(e[r],t))return r}return-1},Bn.sortedLastIndex=function(e,t){return ts(e,t,!0)},Bn.sortedLastIndexBy=function(e,t,n){return ns(e,t,si(n,2),!0)},Bn.sortedLastIndexOf=function(e,t){if(null!=e&&e.length){var n=ts(e,t,!0)-1;if(Mo(e[n],t))return n}return-1},Bn.startCase=qa,Bn.startsWith=function(e,t,n){return e=fa(e),n=null==n?0:sr(ua(n),0,e.length),t=is(t),e.slice(n,n+t.length)==t},Bn.subtract=Ec,Bn.sum=function(e){return e&&e.length?zt(e,Za):0},Bn.sumBy=function(e,t){return e&&e.length?zt(e,si(t,2)):0},Bn.template=function(e,t,r){var s=Bn.templateSettings;r&&mi(e,t,r)&&(t=n),e=fa(e),t=ya({},t,s,Ks);var i,o,a=ya({},t.imports,s.imports,Ks),c=ka(a),l=Qt(a,c),u=0,p=t.interpolate||ve,d="__p += '",h=we((t.escape||ve).source+"|"+p.source+"|"+(p===W?ue:ve).source+"|"+(t.evaluate||ve).source+"|$","g"),f="//# sourceURL="+(Ne.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++nt+"]")+"\n";e.replace(h,(function(t,n,r,s,a,c){return r||(r=s),d+=e.slice(u,c).replace(be,tn),n&&(i=!0,d+="' +\n__e("+n+") +\n'"),a&&(o=!0,d+="';\n"+a+";\n__p += '"),r&&(d+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),u=c+t.length,t})),d+="';\n";var m=Ne.call(t,"variable")&&t.variable;if(m){if(ce.test(m))throw new _e("Invalid `variable` option passed into `_.template`")}else d="with (obj) {\n"+d+"\n}\n";d=(o?d.replace(U,""):d).replace(H,"$1").replace(G,"$1;"),d="function("+(m||"obj")+") {\n"+(m?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var g=Ka((function(){return Ae(c,f+"return "+d).apply(n,l)}));if(g.source=d,Vo(g))throw g;return g},Bn.times=function(e,t){if(1>(e=ua(e))||e>l)return[];var n=p,r=gn(e,p);t=si(t),e-=p;for(var s=Vt(r,t);++n<e;)t(n);return s},Bn.toFinite=la,Bn.toInteger=ua,Bn.toLength=pa,Bn.toLower=function(e){return fa(e).toLowerCase()},Bn.toNumber=da,Bn.toSafeInteger=function(e){return e?sr(ua(e),-9007199254740991,l):0===e?e:0},Bn.toString=fa,Bn.toUpper=function(e){return fa(e).toUpperCase()},Bn.trim=function(e,t,r){if((e=fa(e))&&(r||t===n))return Yt(e);if(!e||!(t=is(t)))return e;var s=un(e),i=un(t);return ys(s,Jt(s,i),Xt(s,i)+1).join("")},Bn.trimEnd=function(e,t,r){if((e=fa(e))&&(r||t===n))return e.slice(0,pn(e)+1);if(!e||!(t=is(t)))return e;var s=un(e);return ys(s,0,Xt(s,un(t))+1).join("")},Bn.trimStart=function(e,t,r){if((e=fa(e))&&(r||t===n))return e.replace(ne,"");if(!e||!(t=is(t)))return e;var s=un(e);return ys(s,Jt(s,un(t))).join("")},Bn.truncate=function(e,t){var r=30,s="...";if(Wo(t)){var i="separator"in t?t.separator:i;r="length"in t?ua(t.length):r,s="omission"in t?is(t.omission):s}var o=(e=fa(e)).length;if(nn(e)){var a=un(e);o=a.length}if(r>=o)return e;var c=r-ln(s);if(1>c)return s;var l=a?ys(a,0,c).join(""):e.slice(0,c);if(i===n)return l+s;if(a&&(c+=l.length-c),ta(i)){if(e.slice(c).search(i)){var u,p=l;for(i.global||(i=we(i.source,fa(pe.exec(i))+"g")),i.lastIndex=0;u=i.exec(p);)var d=u.index;l=l.slice(0,d===n?c:d)}}else if(e.indexOf(is(i),c)!=c){var h=l.lastIndexOf(i);h>-1&&(l=l.slice(0,h))}return l+s},Bn.unescape=function(e){return(e=fa(e))&&V.test(e)?e.replace(q,dn):e},Bn.uniqueId=function(e){var t=++De;return fa(e)+t},Bn.upperCase=za,Bn.upperFirst=Va,Bn.each=fo,Bn.eachRight=mo,Bn.first=Ui,rc(Bn,(hc={},yr(Bn,(function(e,t){Ne.call(Bn.prototype,t)||(hc[t]=e)})),hc),{chain:!1}),Bn.VERSION="4.17.21",Tt(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){Bn[e].placeholder=Bn})),Tt(["drop","take"],(function(e,t){Un.prototype[e]=function(r){r=r===n?1:mn(ua(r),0);var s=this.__filtered__&&!t?new Un(this):this.clone();return s.__filtered__?s.__takeCount__=gn(r,s.__takeCount__):s.__views__.push({size:gn(r,p),type:e+(0>s.__dir__?"Right":"")}),s},Un.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),Tt(["filter","map","takeWhile"],(function(e,t){var n=t+1,r=1==n||3==n;Un.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:si(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}})),Tt(["head","last"],(function(e,t){var n="take"+(t?"Right":"");Un.prototype[e]=function(){return this[n](1).value()[0]}})),Tt(["initial","tail"],(function(e,t){var n="drop"+(t?"":"Right");Un.prototype[e]=function(){return this.__filtered__?new Un(this):this[n](1)}})),Un.prototype.compact=function(){return this.filter(Za)},Un.prototype.find=function(e){return this.filter(e).head()},Un.prototype.findLast=function(e){return this.reverse().find(e)},Un.prototype.invokeMap=Vr((function(e,t){return"function"==typeof e?new Un(this):this.map((function(n){return kr(n,e,t)}))})),Un.prototype.reject=function(e){return this.filter(Oo(si(e)))},Un.prototype.slice=function(e,t){e=ua(e);var r=this;return r.__filtered__&&(e>0||0>t)?new Un(r):(0>e?r=r.takeRight(-e):e&&(r=r.drop(e)),t!==n&&(r=0>(t=ua(t))?r.dropRight(-t):r.take(t-e)),r)},Un.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Un.prototype.toArray=function(){return this.take(p)},yr(Un.prototype,(function(e,t){var r=/^(?:filter|find|map|reject)|While$/.test(t),s=/^(?:head|last)$/.test(t),i=Bn[s?"take"+("last"==t?"Right":""):t],o=s||/^find/.test(t);i&&(Bn.prototype[t]=function(){var t=this.__wrapped__,a=s?[1]:arguments,c=t instanceof Un,l=a[0],u=c||$o(t),p=function(e){var t=i.apply(Bn,Ot([e],a));return s&&d?t[0]:t};u&&r&&"function"==typeof l&&1!=l.length&&(c=u=!1);var d=this.__chain__,h=o&&!d,f=c&&!this.__actions__.length;if(!o&&u){t=f?t:new Un(this);var m=e.apply(t,a);return m.__actions__.push({func:co,args:[p],thisArg:n}),new $n(m,d)}return h&&f?e.apply(this,a):(m=this.thru(p),h?s?m.value()[0]:m.value():m)})})),Tt(["pop","push","shift","sort","splice","unshift"],(function(e){var t=Ce[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);Bn.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var s=this.value();return t.apply($o(s)?s:[],e)}return this[n]((function(n){return t.apply($o(n)?n:[],e)}))}})),yr(Un.prototype,(function(e,t){var n=Bn[t];if(n){var r=n.name+"";Ne.call(Cn,r)||(Cn[r]=[]),Cn[r].push({name:t,func:n})}})),Cn[Ms(n,2).name]=[{name:"wrapper",func:n}],Un.prototype.clone=function(){var e=new Un(this.__wrapped__);return e.__actions__=ws(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=ws(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=ws(this.__views__),e},Un.prototype.reverse=function(){if(this.__filtered__){var e=new Un(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Un.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=$o(e),r=0>t,s=n?e.length:0,i=function(e,t,n){for(var r=-1,s=n.length;++r<s;){var i=n[r],o=i.size;switch(i.type){case"drop":e+=o;break;case"dropRight":t-=o;break;case"take":t=gn(t,e+o);break;case"takeRight":e=mn(e,t-o)}}return{start:e,end:t}}(0,s,this.__views__),o=i.start,a=i.end,c=a-o,l=r?a:o-1,u=this.__iteratees__,p=u.length,d=0,h=gn(c,this.__takeCount__);if(!n||!r&&s==c&&h==c)return us(e,this.__actions__);var f=[];e:for(;c--&&h>d;){for(var m=-1,g=e[l+=t];++m<p;){var y=u[m],v=y.type,b=(0,y.iteratee)(g);if(2==v)g=b;else if(!b){if(1==v)continue e;break e}}f[d++]=g}return f},Bn.prototype.at=lo,Bn.prototype.chain=function(){return ao(this)},Bn.prototype.commit=function(){return new $n(this.value(),this.__chain__)},Bn.prototype.next=function(){this.__values__===n&&(this.__values__=ca(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?n:this.__values__[this.__index__++]}},Bn.prototype.plant=function(e){for(var t,r=this;r instanceof Fn;){var s=Pi(r);s.__index__=0,s.__values__=n,t?i.__wrapped__=s:t=s;var i=s;r=r.__wrapped__}return i.__wrapped__=e,t},Bn.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof Un){var t=e;return this.__actions__.length&&(t=new Un(this)),(t=t.reverse()).__actions__.push({func:co,args:[Qi],thisArg:n}),new $n(t,this.__chain__)}return this.thru(Qi)},Bn.prototype.toJSON=Bn.prototype.valueOf=Bn.prototype.value=function(){return us(this.__wrapped__,this.__actions__)},Bn.prototype.first=Bn.prototype.head,Ke&&(Bn.prototype[Ke]=function(){return this}),Bn}();dt?((dt.exports=hn)._=hn,pt._=hn):ut._=hn}()}(Yz,Yz.exports);var Kz=Yz.exports,Qz={};const Wz={value:null};var Jz,Xz,Zz;Qz.errorObject=Wz,Qz.tryCatch=function(e,t,n){try{return e.apply(t,n)}catch(e){return Wz.value=e,Wz}},Qz.isRedisReady=function(e){return new Promise(((t,n)=>{if("ready"===e.status)t();else{function r(){e.removeListener("end",o),e.removeListener("error",i),t()}let s;function i(e){s=e}function o(){e.removeListener("ready",r),e.removeListener("error",i),n(s)}e.once("ready",r),e.on("error",i),e.once("end",o)}}))},Qz.emitSafe=function(e,t,...n){try{return e.emit(t,...n)}catch(t){try{return e.emit("error",t)}catch(e){}}},Qz.MetricsTime={ONE_MINUTE:1,FIVE_MINUTES:5,FIFTEEN_MINUTES:15,THIRTY_MINUTES:30,ONE_HOUR:60,ONE_WEEK:10080,TWO_WEEKS:20160,ONE_MONTH:80640};try{Jz=new TextDecoder}catch(gX){}var eV,tV,nV,rV,sV,iV=0,oV={},aV=0,cV=0,lV=[],uV={useRecords:!1,mapsAsObjects:!0};class pV{}const dV=new pV;dV.name="MessagePack 0xC1";var hV=!1,fV=2;try{Function("")}catch(gX){fV=1/0}class mV{constructor(e){e&&(!1===e.useRecords&&void 0===e.mapsAsObjects&&(e.mapsAsObjects=!0),e.sequential&&!1!==e.trusted&&(e.trusted=!0,e.structures||0==e.useRecords||(e.structures=[],e.maxSharedStructures||(e.maxSharedStructures=0))),e.structures?e.structures.sharedLength=e.structures.length:e.getStructures&&((e.structures=[]).uninitialized=!0,e.structures.sharedLength=0),e.int64AsNumber&&(e.int64AsType="number")),Object.assign(this,e)}unpack(e,t){if(Xz)return qV((()=>(zV(),this?this.unpack(e,t):mV.prototype.unpack.call(uV,e,t))));e.buffer||e.constructor!==ArrayBuffer||(e="undefined"!=typeof Buffer?Buffer.from(e):new Uint8Array(e)),"object"==typeof t?(Zz=t.end||e.length,iV=t.start||0):(iV=0,Zz=t>-1?t:e.length),cV=0,tV=null,nV=null,Xz=e;try{sV=e.dataView||(e.dataView=new DataView(e.buffer,e.byteOffset,e.byteLength))}catch(t){if(Xz=null,e instanceof Uint8Array)throw t;throw Error("Source must be a Uint8Array or Buffer but was a "+(e&&"object"==typeof e?e.constructor.name:typeof e))}if(this instanceof mV){if(oV=this,this.structures)return eV=this.structures,gV();eV&&0>=eV.length||(eV=[])}else oV=uV,eV&&0>=eV.length||(eV=[]);return gV()}unpackMultiple(e,t){let n,r=0;try{hV=!0;let s=e.length,i=this?this.unpack(e,s):KV.unpack(e,s);if(!t){for(n=[i];s>iV;)r=iV,n.push(gV());return n}if(!1===t(i,r,iV))return;for(;s>iV;)if(r=iV,!1===t(gV(),r,iV))return}catch(e){throw e.lastPosition=r,e.values=n,e}finally{hV=!1,zV()}}_mergeStructures(e,t){Object.isFrozen(e=e||[])&&(e=e.map((e=>e.slice(0))));for(let t=0,n=e.length;n>t;t++){let n=e[t];n&&(n.isShared=!0,32>t||(n.highByte=t-32>>5))}e.sharedLength=e.length;for(let n in t||[])if(n>=0){let r=e[n],s=t[n];s&&(r&&((e.restoreStructures||(e.restoreStructures=[]))[n]=r),e[n]=s)}return this.structures=e}decode(e,t){return this.unpack(e,t)}}function gV(e){try{if(!oV.trusted&&!hV){let e=eV.sharedLength||0;eV.length>e&&(eV.length=e)}let e;if(e=vV(),nV&&(iV=nV.postBundlePosition,nV=null),hV&&(eV.restoreStructures=null),iV==Zz)eV&&eV.restoreStructures&&yV(),eV=null,Xz=null,rV&&(rV=null);else{if(iV>Zz)throw Error("Unexpected end of MessagePack data");if(!hV){let t;try{t=JSON.stringify(e,((e,t)=>"bigint"==typeof t?t+"n":t)).slice(0,100)}catch(e){t="(JSON view not available "+e+")"}throw Error("Data read, but end of buffer not reached "+t)}}return e}catch(e){throw eV&&eV.restoreStructures&&yV(),zV(),(e instanceof RangeError||e.message.startsWith("Unexpected end of buffer")||iV>Zz)&&(e.incomplete=!0),e}}function yV(){for(let e in eV.restoreStructures)eV[e]=eV.restoreStructures[e];eV.restoreStructures=null}function vV(){let e=Xz[iV++];if(160>e){if(128>e){if(64>e)return e;{let t=eV[63&e]||oV.getStructures&&AV()[63&e];return t?(t.read||(t.read=EV(t,63&e)),t.read()):e}}if(144>e){if(e-=128,oV.mapsAsObjects){let t={};for(let n=0;e>n;n++){let e=BV();"__proto__"===e&&(e="__proto_"),t[e]=vV()}return t}{let t=new Map;for(let n=0;e>n;n++)t.set(vV(),vV());return t}}{e-=144;let t=Array(e);for(let n=0;e>n;n++)t[n]=vV();return oV.freezeData?Object.freeze(t):t}}if(192>e){let t=e-160;if(cV>=iV)return tV.slice(iV-aV,(iV+=t)-aV);if(0==cV&&140>Zz){let e=16>t?NV(t):OV(t);if(null!=e)return e}return SV(t)}{let t;switch(e){case 192:return null;case 193:return nV?(t=vV(),t>0?nV[1].slice(nV.position1,nV.position1+=t):nV[0].slice(nV.position0,nV.position0-=t)):dV;case 194:return!1;case 195:return!0;case 196:if(t=Xz[iV++],void 0===t)throw Error("Unexpected end of buffer");return PV(t);case 197:return t=sV.getUint16(iV),iV+=2,PV(t);case 198:return t=sV.getUint32(iV),iV+=4,PV(t);case 199:return LV(Xz[iV++]);case 200:return t=sV.getUint16(iV),iV+=2,LV(t);case 201:return t=sV.getUint32(iV),iV+=4,LV(t);case 202:if(t=sV.getFloat32(iV),oV.useFloat32>2){let e=VV[(127&Xz[iV])<<1|Xz[iV+1]>>7];return iV+=4,(e*t+(t>0?.5:-.5)|0)/e}return iV+=4,t;case 203:return t=sV.getFloat64(iV),iV+=8,t;case 204:return Xz[iV++];case 205:return t=sV.getUint16(iV),iV+=2,t;case 206:return t=sV.getUint32(iV),iV+=4,t;case 207:return"number"===oV.int64AsType?(t=4294967296*sV.getUint32(iV),t+=sV.getUint32(iV+4)):"string"===oV.int64AsType?t=""+sV.getBigUint64(iV):"auto"===oV.int64AsType?(t=sV.getBigUint64(iV),t>BigInt(2)<<BigInt(52)||(t=+t)):t=sV.getBigUint64(iV),iV+=8,t;case 208:return sV.getInt8(iV++);case 209:return t=sV.getInt16(iV),iV+=2,t;case 210:return t=sV.getInt32(iV),iV+=4,t;case 211:return"number"===oV.int64AsType?(t=4294967296*sV.getInt32(iV),t+=sV.getUint32(iV+4)):"string"===oV.int64AsType?t=""+sV.getBigInt64(iV):"auto"===oV.int64AsType?(t=sV.getBigInt64(iV),t<BigInt(-2)<<BigInt(52)||t>BigInt(2)<<BigInt(52)||(t=+t)):t=sV.getBigInt64(iV),iV+=8,t;case 212:if(t=Xz[iV++],114==t)return FV(63&Xz[iV++]);{let e=lV[t];if(e)return e.read?(iV++,e.read(vV())):e.noBuffer?(iV++,e()):e(Xz.subarray(iV,++iV));throw Error("Unknown extension "+t)}case 213:return t=Xz[iV],114==t?(iV++,FV(63&Xz[iV++],Xz[iV++])):LV(2);case 214:return LV(4);case 215:return LV(8);case 216:return LV(16);case 217:return t=Xz[iV++],iV>cV?TV(t):tV.slice(iV-aV,(iV+=t)-aV);case 218:return t=sV.getUint16(iV),(iV+=2)>cV?wV(t):tV.slice(iV-aV,(iV+=t)-aV);case 219:return t=sV.getUint32(iV),(iV+=4)>cV?xV(t):tV.slice(iV-aV,(iV+=t)-aV);case 220:return t=sV.getUint16(iV),iV+=2,CV(t);case 221:return t=sV.getUint32(iV),iV+=4,CV(t);case 222:return t=sV.getUint16(iV),iV+=2,IV(t);case 223:return t=sV.getUint32(iV),iV+=4,IV(t);default:if(e>=224)return e-256;if(void 0===e){let e=Error("Unexpected end of MessagePack data");throw e.incomplete=!0,e}throw Error("Unknown MessagePack token "+e)}}}const bV=/^[a-zA-Z_$][a-zA-Z\d_$]*$/;function EV(e,t){function n(){if(n.count++>fV){let n=e.read=Function("r","return function(){return "+(oV.freezeData?"Object.freeze":"")+"({"+e.map((e=>"__proto__"===e?"__proto_:r()":bV.test(e)?e+":r()":"["+JSON.stringify(e)+"]:r()")).join(",")+"})}")(vV);return 0===e.highByte&&(e.read=_V(t,e.read)),n()}let r={};for(let t=0,n=e.length;n>t;t++){let n=e[t];"__proto__"===n&&(n="__proto_"),r[n]=vV()}return oV.freezeData?Object.freeze(r):r}return n.count=0,0===e.highByte?_V(t,n):n}const _V=(e,t)=>function(){let n=Xz[iV++];if(0===n)return t();let r=32>e?-(e+(n<<5)):e+(n<<5),s=eV[r]||AV()[r];if(!s)throw Error("Record id is not defined for "+r);return s.read||(s.read=EV(s,e)),s.read()};function AV(){let e=qV((()=>(Xz=null,oV.getStructures())));return eV=oV._mergeStructures(e,eV)}var SV=kV,TV=kV,wV=kV,xV=kV;function kV(e){let t;if(16>e&&(t=NV(e)))return t;if(e>64&&Jz)return Jz.decode(Xz.subarray(iV,iV+=e));const n=iV+e,r=[];for(t="";n>iV;){const e=Xz[iV++];if(128&e)if(192==(224&e)){const t=63&Xz[iV++];r.push((31&e)<<6|t)}else if(224==(240&e)){const t=63&Xz[iV++],n=63&Xz[iV++];r.push((31&e)<<12|t<<6|n)}else if(240==(248&e)){let t=(7&e)<<18|(63&Xz[iV++])<<12|(63&Xz[iV++])<<6|63&Xz[iV++];t>65535&&(t-=65536,r.push(t>>>10&1023|55296),t=56320|1023&t),r.push(t)}else r.push(e);else r.push(e);4096>r.length||(t+=RV.apply(String,r),r.length=0)}return r.length>0&&(t+=RV.apply(String,r)),t}function CV(e){let t=Array(e);for(let n=0;e>n;n++)t[n]=vV();return oV.freezeData?Object.freeze(t):t}function IV(e){if(oV.mapsAsObjects){let t={};for(let n=0;e>n;n++){let e=BV();"__proto__"===e&&(e="__proto_"),t[e]=vV()}return t}{let t=new Map;for(let n=0;e>n;n++)t.set(vV(),vV());return t}}var RV=String.fromCharCode;function OV(e){let t=iV,n=Array(e);for(let r=0;e>r;r++){const e=Xz[iV++];if((128&e)>0)return void(iV=t);n[r]=e}return RV.apply(String,n)}function NV(e){if(4>e){if(2>e){if(0===e)return"";{let e=Xz[iV++];return(128&e)>1?void(iV-=1):RV(e)}}{let t=Xz[iV++],n=Xz[iV++];if((128&t)>0||(128&n)>0)return void(iV-=2);if(3>e)return RV(t,n);let r=Xz[iV++];return(128&r)>0?void(iV-=3):RV(t,n,r)}}{let t=Xz[iV++],n=Xz[iV++],r=Xz[iV++],s=Xz[iV++];if((128&t)>0||(128&n)>0||(128&r)>0||(128&s)>0)return void(iV-=4);if(6>e){if(4===e)return RV(t,n,r,s);{let e=Xz[iV++];return(128&e)>0?void(iV-=5):RV(t,n,r,s,e)}}if(8>e){let i=Xz[iV++],o=Xz[iV++];if((128&i)>0||(128&o)>0)return void(iV-=6);if(7>e)return RV(t,n,r,s,i,o);let a=Xz[iV++];return(128&a)>0?void(iV-=7):RV(t,n,r,s,i,o,a)}{let i=Xz[iV++],o=Xz[iV++],a=Xz[iV++],c=Xz[iV++];if((128&i)>0||(128&o)>0||(128&a)>0||(128&c)>0)return void(iV-=8);if(10>e){if(8===e)return RV(t,n,r,s,i,o,a,c);{let e=Xz[iV++];return(128&e)>0?void(iV-=9):RV(t,n,r,s,i,o,a,c,e)}}if(12>e){let l=Xz[iV++],u=Xz[iV++];if((128&l)>0||(128&u)>0)return void(iV-=10);if(11>e)return RV(t,n,r,s,i,o,a,c,l,u);let p=Xz[iV++];return(128&p)>0?void(iV-=11):RV(t,n,r,s,i,o,a,c,l,u,p)}{let l=Xz[iV++],u=Xz[iV++],p=Xz[iV++],d=Xz[iV++];if((128&l)>0||(128&u)>0||(128&p)>0||(128&d)>0)return void(iV-=12);if(14>e){if(12===e)return RV(t,n,r,s,i,o,a,c,l,u,p,d);{let e=Xz[iV++];return(128&e)>0?void(iV-=13):RV(t,n,r,s,i,o,a,c,l,u,p,d,e)}}{let h=Xz[iV++],f=Xz[iV++];if((128&h)>0||(128&f)>0)return void(iV-=14);if(15>e)return RV(t,n,r,s,i,o,a,c,l,u,p,d,h,f);let m=Xz[iV++];return(128&m)>0?void(iV-=15):RV(t,n,r,s,i,o,a,c,l,u,p,d,h,f,m)}}}}}function DV(){let e,t=Xz[iV++];if(192>t)e=t-160;else switch(t){case 217:e=Xz[iV++];break;case 218:e=sV.getUint16(iV),iV+=2;break;case 219:e=sV.getUint32(iV),iV+=4;break;default:throw Error("Expected string")}return kV(e)}function PV(e){return oV.copyBuffers?Uint8Array.prototype.slice.call(Xz,iV,iV+=e):Xz.subarray(iV,iV+=e)}function LV(e){let t=Xz[iV++];if(lV[t]){let n;return lV[t](Xz.subarray(iV,n=iV+=e),(e=>{iV=e;try{return vV()}finally{iV=n}}))}throw Error("Unknown extension type "+t)}var MV=Array(4096);function BV(){let e=Xz[iV++];if(160>e||e>=192)return iV--,jV(vV());if(e-=160,cV>=iV)return tV.slice(iV-aV,(iV+=e)-aV);if(0!=cV||Zz>=180)return SV(e);let t,n=4095&(e<<5^(e>1?sV.getUint16(iV):e>0?Xz[iV]:0)),r=MV[n],s=iV,i=iV+e-3,o=0;if(r&&r.bytes==e){for(;i>s;){if(t=sV.getUint32(s),t!=r[o++]){s=1879048192;break}s+=4}for(i+=3;i>s;)if(t=Xz[s++],t!=r[o++]){s=1879048192;break}if(s===i)return iV=s,r.string;i-=3,s=iV}for(r=[],MV[n]=r,r.bytes=e;i>s;)t=sV.getUint32(s),r.push(t),s+=4;for(i+=3;i>s;)t=Xz[s++],r.push(t);let a=16>e?NV(e):OV(e);return r.string=null!=a?a:SV(e)}function jV(e){if("string"==typeof e)return e;if("number"==typeof e||"boolean"==typeof e||"bigint"==typeof e)return""+e;if(null==e)return e+"";throw Error("Invalid property type for record",typeof e)}const FV=(e,t)=>{let n=vV().map(jV),r=e;void 0!==t&&(e=32>e?-((t<<5)+e):(t<<5)+e,n.highByte=t);let s=eV[e];return s&&(s.isShared||hV)&&((eV.restoreStructures||(eV.restoreStructures=[]))[e]=s),eV[e]=n,n.read=EV(n,r),n.read()};lV[0]=()=>{},lV[0].noBuffer=!0,lV[66]=e=>{let t=e.length,n=BigInt(128&e[0]?e[0]-256:e[0]);for(let r=1;t>r;r++)n<<=8n,n+=BigInt(e[r]);return n};let $V={Error:Error,TypeError:TypeError,ReferenceError:ReferenceError};lV[101]=()=>{let e=vV();return($V[e[0]]||Error)(e[1],{cause:e[2]})},lV[105]=e=>{if(!1===oV.structuredClone)throw Error("Structured clone extension is disabled");let t=sV.getUint32(iV-4);rV||(rV=new Map);let n,r=Xz[iV];n=r>=144&&160>r||220==r||221==r?[]:{};let s={target:n};rV.set(t,s);let i=vV();return s.used?Object.assign(n,i):(s.target=i,i)},lV[112]=e=>{if(!1===oV.structuredClone)throw Error("Structured clone extension is disabled");let t=sV.getUint32(iV-4),n=rV.get(t);return n.used=!0,n.target},lV[115]=()=>new Set(vV());const UV=["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64","BigInt64","BigUint64"].map((e=>e+"Array"));let HV="object"==typeof globalThis?globalThis:window;lV[116]=e=>{let t=e[0],n=UV[t];if(!n){if(16===t){let t=new ArrayBuffer(e.length-1);return new Uint8Array(t).set(e.subarray(1)),t}throw Error("Could not find typed array for code "+t)}return new HV[n](Uint8Array.prototype.slice.call(e,1).buffer)},lV[120]=()=>{let e=vV();return RegExp(e[0],e[1])};const GV=[];function qV(e){let t=Zz,n=iV,r=aV,s=cV,i=tV,o=rV,a=nV,c=new Uint8Array(Xz.slice(0,Zz)),l=eV,u=eV.slice(0,eV.length),p=oV,d=hV,h=e();return Zz=t,iV=n,aV=r,cV=s,tV=i,rV=o,nV=a,Xz=c,hV=d,(eV=l).splice(0,eV.length,...u),oV=p,sV=new DataView(Xz.buffer,Xz.byteOffset,Xz.byteLength),h}function zV(){Xz=null,rV=null,eV=null}lV[98]=e=>{let t=iV;return iV+=(e[0]<<24)+(e[1]<<16)+(e[2]<<8)+e[3]-e.length,nV=GV,(nV=[DV(),DV()]).position0=0,nV.position1=0,nV.postBundlePosition=iV,iV=t,vV()},lV[255]=e=>new Date(4==e.length?1e3*(16777216*e[0]+(e[1]<<16)+(e[2]<<8)+e[3]):8==e.length?((e[0]<<22)+(e[1]<<14)+(e[2]<<6)+(e[3]>>2))/1e6+1e3*(4294967296*(3&e[3])+16777216*e[4]+(e[5]<<16)+(e[6]<<8)+e[7]):12==e.length?((e[0]<<24)+(e[1]<<16)+(e[2]<<8)+e[3])/1e6+1e3*((128&e[4]?-281474976710656:0)+1099511627776*e[6]+4294967296*e[7]+16777216*e[8]+(e[9]<<16)+(e[10]<<8)+e[11]):"invalid");const VV=Array(147);for(let e=0;256>e;e++)VV[e]=+("1e"+Math.floor(45.15-.30103*e));const YV=mV;var KV=new mV({useRecords:!1});const QV=KV.unpack,WV=KV.unpackMultiple,JV=KV.unpack,XV={NEVER:0,ALWAYS:1,DECIMAL_ROUND:3,DECIMAL_FIT:4};let ZV,eY,tY,nY=new Float32Array(1),rY=new Uint8Array(nY.buffer,0,4);try{ZV=new TextEncoder}catch(gX){}const sY="undefined"!=typeof Buffer,iY=sY?function(e){return Buffer.allocUnsafeSlow(e)}:Uint8Array,oY=sY?Buffer:Uint8Array,aY=sY?4294967296:2144337920;let cY,lY,uY,pY,dY=0,hY=null;const fY=/[\u0080-\uFFFF]/,mY=Symbol("record-id");class gY extends mV{constructor(e){let t,n,r,s;super(e),this.offset=0;let i=oY.prototype.utf8Write?function(e,t){return cY.utf8Write(e,t,4294967295)}:!(!ZV||!ZV.encodeInto)&&function(e,t){return ZV.encodeInto(e,cY.subarray(t)).written},o=this;e||(e={});let a=e&&e.sequential,c=e.structures||e.saveStructures,l=e.maxSharedStructures;if(null==l&&(l=c?32:0),l>8160)throw Error("Maximum maxSharedStructure is 8160");e.structuredClone&&null==e.moreTypes&&(this.moreTypes=!0);let u=e.maxOwnStructures;null==u&&(u=c?32:64),this.structures||0==e.useRecords||(this.structures=[]);let p=l>32||u+l>64,d=l+64,h=l+u+64;if(h>8256)throw Error("Maximum maxSharedStructure + maxOwnStructure is 8192");let f=[],m=0,g=0;this.pack=this.encode=function(e,i){if(cY||(cY=new iY(8192),uY=cY.dataView||(cY.dataView=new DataView(cY.buffer,0,8192)),dY=0),pY=cY.length-10,2048>pY-dY?(cY=new iY(cY.length),uY=cY.dataView||(cY.dataView=new DataView(cY.buffer,0,cY.length)),pY=cY.length-10,dY=0):dY=dY+7&2147483640,t=dY,i&OY&&(dY+=255&i),s=o.structuredClone?new Map:null,o.bundleStrings&&"string"!=typeof e?(hY=[],hY.size=1/0):hY=null,r=o.structures,r){r.uninitialized&&(r=o._mergeStructures(o.getStructures()));let e=r.sharedLength||0;if(e>l)throw Error("Shared structures is larger than maximum shared structures, try increasing maxSharedStructures to "+r.sharedLength);if(!r.transitions){r.transitions=Object.create(null);for(let t=0;e>t;t++){let e=r[t];if(!e)continue;let n,s=r.transitions;for(let t=0,r=e.length;r>t;t++){let r=e[t];n=s[r],n||(n=s[r]=Object.create(null)),s=n}s[mY]=t+64}this.lastNamedStructuresLength=e}a||(r.nextId=e+64)}let c;n&&(n=!1);try{o.randomAccessStructure&&e&&e.constructor&&e.constructor===Object?k(e):b(e);let n=hY;if(hY&&EY(t,b,0),s&&s.idsToInsert){let e=s.idsToInsert.sort(((e,t)=>e.offset>t.offset?1:-1)),r=e.length,i=-1;for(;n&&r>0;){let s=e[--r].offset+t;n.stringsPosition+t>s&&-1===i&&(i=0),s>n.position+t?0>i||(i+=6):(0>i||(uY.setUint32(n.position+t,uY.getUint32(n.position+t)+i),i=-1),n=n.previous,r++)}i>=0&&n&&uY.setUint32(n.position+t,uY.getUint32(n.position+t)+i),dY+=6*e.length,dY>pY&&T(dY),o.offset=dY;let a=function(e,t){let n,r=6*t.length,s=e.length-r;for(;n=t.pop();){let t=n.offset,i=n.id;e.copyWithin(t+r,t,s),r-=6;let o=t+r;e[o++]=214,e[o++]=105,e[o++]=i>>24,e[o++]=i>>16&255,e[o++]=i>>8&255,e[o++]=255&i,s=t}return e}(cY.subarray(t,dY),e);return s=null,a}return o.offset=dY,i&IY?(cY.start=t,cY.end=dY,cY):cY.subarray(t,dY)}catch(e){throw c=e,e}finally{if(r&&(y(),n&&o.saveStructures)){let n=r.sharedLength||0,s=cY.subarray(t,dY),a=function(e,t){return e.isCompatible=e=>{let n=!e||(t.lastNamedStructuresLength||0)===e.length;return n||t._mergeStructures(e),n},e}(r,o);if(!c)return!1===o.saveStructures(a,a.isCompatible)?o.pack(e,i):(o.lastNamedStructuresLength=n,cY.length>1073741824&&(cY=null),s)}cY.length>1073741824&&(cY=null),i&RY&&(dY=t)}};const y=()=>{10>g&&g++;let e=r.sharedLength||0;if(r.length>e&&!a&&(r.length=e),m>1e4)r.transitions=null,g=0,m=0,f.length>0&&(f=[]);else if(f.length>0&&!a){for(let e=0,t=f.length;t>e;e++)f[e][mY]=0;f=[]}},v=e=>{var t=e.length;16>t?cY[dY++]=144|t:65536>t?(cY[dY++]=220,cY[dY++]=t>>8,cY[dY++]=255&t):(cY[dY++]=221,uY.setUint32(dY,t),dY+=4);for(let n=0;t>n;n++)b(e[n])},b=e=>{dY>pY&&(cY=T(dY));var n,r=typeof e;if("string"===r){let r,s=e.length;if(hY&&s>=4&&4096>s){if((hY.size+=s)>21760){let e,n,r=(hY[0]?3*hY[0].length+hY[1].length:0)+10;dY+r>pY&&(cY=T(dY+r)),hY.position?(n=hY,cY[dY]=200,dY+=3,cY[dY++]=98,e=dY-t,dY+=4,EY(t,b,0),uY.setUint16(e+t-3,dY-t-e)):(cY[dY++]=214,cY[dY++]=98,e=dY-t,dY+=4),hY=["",""],hY.previous=n,hY.size=0,hY.position=e}let n=fY.test(e);return hY[n?0:1]+=e,cY[dY++]=193,void b(n?-s:s)}r=32>s?1:256>s?2:65536>s?3:5;let o=3*s;if(dY+o>pY&&(cY=T(dY+o)),64>s||!i){let t,i,o,a=dY+r;for(t=0;s>t;t++)i=e.charCodeAt(t),128>i?cY[a++]=i:2048>i?(cY[a++]=i>>6|192,cY[a++]=63&i|128):55296==(64512&i)&&56320==(64512&(o=e.charCodeAt(t+1)))?(i=65536+((1023&i)<<10)+(1023&o),t++,cY[a++]=i>>18|240,cY[a++]=i>>12&63|128,cY[a++]=i>>6&63|128,cY[a++]=63&i|128):(cY[a++]=i>>12|224,cY[a++]=i>>6&63|128,cY[a++]=63&i|128);n=a-dY-r}else n=i(e,dY+r);32>n?cY[dY++]=160|n:256>n?(2>r&&cY.copyWithin(dY+2,dY+1,dY+1+n),cY[dY++]=217,cY[dY++]=n):65536>n?(3>r&&cY.copyWithin(dY+3,dY+2,dY+2+n),cY[dY++]=218,cY[dY++]=n>>8,cY[dY++]=255&n):(5>r&&cY.copyWithin(dY+5,dY+3,dY+3+n),cY[dY++]=219,uY.setUint32(dY,n),dY+=4),dY+=n}else if("number"===r)if(e>>>0===e)32>e||128>e&&!1===this.useRecords||64>e&&!this.randomAccessStructure?cY[dY++]=e:256>e?(cY[dY++]=204,cY[dY++]=e):65536>e?(cY[dY++]=205,cY[dY++]=e>>8,cY[dY++]=255&e):(cY[dY++]=206,uY.setUint32(dY,e),dY+=4);else if((0|e)===e)-32>e?-128>e?-32768>e?(cY[dY++]=210,uY.setInt32(dY,e),dY+=4):(cY[dY++]=209,uY.setInt16(dY,e),dY+=2):(cY[dY++]=208,cY[dY++]=e+256):cY[dY++]=256+e;else{let t;if((t=this.useFloat32)>0&&4294967296>e&&e>=-2147483648){let n;if(cY[dY++]=202,uY.setFloat32(dY,e),4>t||(0|(n=e*VV[(127&cY[dY])<<1|cY[dY+1]>>7]))===n)return void(dY+=4);dY--}cY[dY++]=203,uY.setFloat64(dY,e),dY+=8}else if("object"===r||"function"===r)if(e){if(s){let n=s.get(e);if(n){if(!n.id){let e=s.idsToInsert||(s.idsToInsert=[]);n.id=e.push(n)}return cY[dY++]=214,cY[dY++]=112,uY.setUint32(dY,n.id),void(dY+=4)}s.set(e,{offset:dY-t})}let i=e.constructor;if(i===Object)S(e);else if(i===Array)v(e);else if(i===Map)if(this.mapAsEmptyObject)cY[dY++]=128;else{16>(n=e.size)?cY[dY++]=128|n:65536>n?(cY[dY++]=222,cY[dY++]=n>>8,cY[dY++]=255&n):(cY[dY++]=223,uY.setUint32(dY,n),dY+=4);for(let[t,n]of e)b(t),b(n)}else{for(let t=0,n=eY.length;n>t;t++)if(e instanceof tY[t]){let n=eY[t];if(n.write){n.type&&(cY[dY++]=212,cY[dY++]=n.type,cY[dY++]=0);let t=n.write.call(this,e);return void(t===e?Array.isArray(e)?v(e):S(e):b(t))}let r,s=cY,i=uY,o=dY;cY=null;try{r=n.pack.call(this,e,(e=>(cY=s,s=null,dY+=e,dY>pY&&T(dY),{target:cY,targetView:uY,position:dY-e})),b)}finally{s&&(cY=s,uY=i,dY=o,pY=cY.length-10)}return void(r&&(r.length+dY>pY&&T(r.length+dY),dY=bY(r,cY,dY,n.type)))}if(Array.isArray(e))v(e);else{if(e.toJSON){const t=e.toJSON();if(t!==e)return b(t)}if("function"===r)return b(this.writeFunction&&this.writeFunction(e));S(e)}}}else cY[dY++]=192;else if("boolean"===r)cY[dY++]=e?195:194;else if("bigint"===r){if(e<BigInt(1)<<BigInt(63)&&e>=-(BigInt(1)<<BigInt(63)))cY[dY++]=211,uY.setBigInt64(dY,e);else if(e<BigInt(1)<<BigInt(64)&&e>0)cY[dY++]=207,uY.setBigUint64(dY,e);else{if(!this.largeBigIntToFloat){if(this.useBigIntExtension&&2n**1023n>e&&e>-(2n**1023n)){cY[dY++]=199,dY++,cY[dY++]=66;let t,n=[];do{let r=0xffn&e;t=(0x80n&r)===(0n>e?0x80n:0n),n.push(r),e>>=8n}while(0n!==e&&-1n!==e||!t);cY[dY-2]=n.length;for(let e=n.length;e>0;)cY[dY++]=+n[--e];return}throw new RangeError(e+" was too large to fit in MessagePack 64-bit integer format, use useBigIntExtension or set largeBigIntToFloat to convert to float-64")}cY[dY++]=203,uY.setFloat64(dY,+e)}dY+=8}else{if("undefined"!==r)throw Error("Unknown type: "+r);this.encodeUndefinedAsNil?cY[dY++]=192:(cY[dY++]=212,cY[dY++]=0,cY[dY++]=0)}},E=this.variableMapSize||this.coercibleKeyAsNumber||this.skipValues?e=>{let t;if(this.skipValues){t=[];for(let n in e)"function"==typeof e.hasOwnProperty&&!e.hasOwnProperty(n)||this.skipValues.includes(e[n])||t.push(n)}else t=Object.keys(e);let n,r=t.length;if(16>r?cY[dY++]=128|r:65536>r?(cY[dY++]=222,cY[dY++]=r>>8,cY[dY++]=255&r):(cY[dY++]=223,uY.setUint32(dY,r),dY+=4),this.coercibleKeyAsNumber)for(let s=0;r>s;s++){n=t[s];let r=+n;b(isNaN(r)?n:r),b(e[n])}else for(let s=0;r>s;s++)b(n=t[s]),b(e[n])}:e=>{cY[dY++]=222;let n=dY-t;dY+=2;let r=0;for(let t in e)("function"!=typeof e.hasOwnProperty||e.hasOwnProperty(t))&&(b(t),b(e[t]),r++);cY[n+++t]=r>>8,cY[n+t]=255&r},_=!1===this.useRecords?E:e.progressiveRecords&&!p?e=>{let n,s,i=r.transitions||(r.transitions=Object.create(null)),o=dY++-t;for(let a in e)if("function"!=typeof e.hasOwnProperty||e.hasOwnProperty(a)){if(n=i[a],n)i=n;else{let c=Object.keys(e),l=i;i=r.transitions;let u=0;for(let e=0,t=c.length;t>e;e++){let t=c[e];n=i[t],n||(n=i[t]=Object.create(null),u++),i=n}o+t+1==dY?(dY--,w(i,c,u)):x(i,c,o,u),s=!0,i=l[a]}b(e[a])}if(!s){let n=i[mY];n?cY[o+t]=n:x(i,Object.keys(e),o,0)}}:e=>{let t,n=r.transitions||(r.transitions=Object.create(null)),s=0;for(let r in e)("function"!=typeof e.hasOwnProperty||e.hasOwnProperty(r))&&(t=n[r],t||(t=n[r]=Object.create(null),s++),n=t);let i=n[mY];i?i>=96&&p?(cY[dY++]=96+(31&(i-=96)),cY[dY++]=i>>5):cY[dY++]=i:w(n,n.__keys__||Object.keys(e),s);for(let t in e)("function"!=typeof e.hasOwnProperty||e.hasOwnProperty(t))&&b(e[t])},A="function"==typeof this.useRecords&&this.useRecords,S=A?e=>{A(e)?_(e):E(e)}:_,T=e=>{let n;if(e>16777216){if(e-t>aY)throw Error("Packed buffer would be larger than maximum buffer size");n=Math.min(aY,4096*Math.round(Math.max((e-t)*(e>67108864?1.25:2),4194304)/4096))}else n=1+(Math.max(e-t<<2,cY.length-1)>>12)<<12;let r=new iY(n);return uY=r.dataView||(r.dataView=new DataView(r.buffer,0,n)),e=Math.min(e,cY.length),cY.copy?cY.copy(r,0,t,e):r.set(cY.slice(t,e)),dY-=t,t=0,pY=r.length-10,cY=r},w=(e,t,s)=>{let i=r.nextId;i||(i=64),d>i&&this.shouldShareStructure&&!this.shouldShareStructure(t)?(i=r.nextOwnId,h>i||(i=d),r.nextOwnId=i+1):(h>i||(i=d),r.nextId=i+1);let o=t.highByte=i>=96&&p?i-96>>5:-1;e[mY]=i,e.__keys__=t,r[i-64]=t,d>i?(t.isShared=!0,r.sharedLength=i-63,n=!0,0>o?cY[dY++]=i:(cY[dY++]=96+(31&i),cY[dY++]=o)):(0>o?(cY[dY++]=212,cY[dY++]=114,cY[dY++]=i):(cY[dY++]=213,cY[dY++]=114,cY[dY++]=96+(31&i),cY[dY++]=o),s&&(m+=g*s),u>f.length||(f.shift()[mY]=0),f.push(e),b(t))},x=(e,n,r,s)=>{let i=cY,o=dY,a=pY,c=t;cY=lY,dY=0,t=0,cY||(lY=cY=new iY(8192)),pY=cY.length-10,w(e,n,s),lY=cY;let l=dY;if(cY=i,dY=o,pY=a,t=c,l>1){let e=dY+l-1;e>pY&&T(e);let n=r+t;cY.copyWithin(n+l,n+1,dY),cY.set(lY.slice(0,l),n),dY=e}else cY[r+t]=lY[0]},k=e=>{let s=(void 0)(e,cY,t,dY,r,T,((e,t,r)=>{if(r)return n=!0;dY=t;let s=cY;return b(e),y(),s!==cY?{position:dY,targetView:uY,target:cY}:dY}),this);if(0===s)return S(e);dY=s}}useBuffer(e){cY=e,cY.dataView||(cY.dataView=new DataView(cY.buffer,cY.byteOffset,cY.byteLength)),dY=0}set position(e){dY=e}get position(){return dY}clearSharedData(){this.structures&&(this.structures=[]),this.typedStructs&&(this.typedStructs=[])}}function yY(e,t,n,r){let s=e.byteLength;if(256>s+1){var{target:i,position:o}=n(4+s);i[o++]=199,i[o++]=s+1}else if(65536>s+1){var{target:i,position:o}=n(5+s);i[o++]=200,i[o++]=s+1>>8,i[o++]=s+1&255}else{var{target:i,position:o,targetView:a}=n(7+s);i[o++]=201,a.setUint32(o,s+1),o+=4}i[o++]=116,i[o++]=t,e.buffer||(e=new Uint8Array(e)),i.set(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),o)}function vY(e,t){let n=e.byteLength;var r,s;if(256>n){var{target:r,position:s}=t(n+2);r[s++]=196,r[s++]=n}else if(65536>n){var{target:r,position:s}=t(n+3);r[s++]=197,r[s++]=n>>8,r[s++]=255&n}else{var{target:r,position:s,targetView:i}=t(n+5);r[s++]=198,i.setUint32(s,n),s+=4}r.set(e,s)}function bY(e,t,n,r){let s=e.length;switch(s){case 1:t[n++]=212;break;case 2:t[n++]=213;break;case 4:t[n++]=214;break;case 8:t[n++]=215;break;case 16:t[n++]=216;break;default:256>s?(t[n++]=199,t[n++]=s):65536>s?(t[n++]=200,t[n++]=s>>8,t[n++]=255&s):(t[n++]=201,t[n++]=s>>24,t[n++]=s>>16&255,t[n++]=s>>8&255,t[n++]=255&s)}return t[n++]=r,t.set(e,n),n+s}function EY(e,t,n){if(hY.length>0){uY.setUint32(hY.position+e,dY+n-hY.position-e),hY.stringsPosition=dY-e;let r=hY;hY=null,t(r[0]),t(r[1])}}tY=[Date,Set,Error,RegExp,ArrayBuffer,Object.getPrototypeOf(Uint8Array.prototype).constructor,pV],eY=[{pack(e,t,n){let r=e.getTime()/1e3;if(!this.useTimestamp32&&0!==e.getMilliseconds()||0>r||r>=4294967296)if(r>0&&4294967296>r){let{target:n,targetView:s,position:i}=t(10);n[i++]=215,n[i++]=255,s.setUint32(i,4e6*e.getMilliseconds()+(r/1e3/4294967296|0)),s.setUint32(i+4,r)}else if(isNaN(r)){if(this.onInvalidDate)return t(0),n(this.onInvalidDate());let{target:e,position:r}=t(3);e[r++]=212,e[r++]=255,e[r++]=255}else{let{target:n,targetView:s,position:i}=t(15);n[i++]=199,n[i++]=12,n[i++]=255,s.setUint32(i,1e6*e.getMilliseconds()),s.setBigInt64(i+4,BigInt(Math.floor(r)))}else{let{target:e,targetView:n,position:s}=t(6);e[s++]=214,e[s++]=255,n.setUint32(s,r)}}},{pack(e,t,n){if(this.setAsEmptyObject)return t(0),n({});let r=Array.from(e),{target:s,position:i}=t(this.moreTypes?3:0);this.moreTypes&&(s[i++]=212,s[i++]=115,s[i++]=0),n(r)}},{pack(e,t,n){let{target:r,position:s}=t(this.moreTypes?3:0);this.moreTypes&&(r[s++]=212,r[s++]=101,r[s++]=0),n([e.name,e.message,e.cause])}},{pack(e,t,n){let{target:r,position:s}=t(this.moreTypes?3:0);this.moreTypes&&(r[s++]=212,r[s++]=120,r[s++]=0),n([e.source,e.flags])}},{pack(e,t){this.moreTypes?yY(e,16,t):vY(sY?Buffer.from(e):new Uint8Array(e),t)}},{pack(e,t){let n=e.constructor;n!==oY&&this.moreTypes?yY(e,UV.indexOf(n.name),t):vY(e,t)}},{pack(e,t){let{target:n,position:r}=t(1);n[r]=193}}];let _Y=new gY({useRecords:!1});const AY=_Y.pack,SY=_Y.pack,TY=gY,{NEVER:wY,ALWAYS:xY,DECIMAL_ROUND:kY,DECIMAL_FIT:CY}=XV,IY=512,RY=1024,OY=2048,NY=Kz,DY=new(L(Object.freeze({__proto__:null,ALWAYS:xY,C1:dV,DECIMAL_FIT:CY,DECIMAL_ROUND:kY,Decoder:YV,Encoder:TY,FLOAT32_OPTIONS:XV,NEVER:wY,Packr:gY,RESERVE_START_SPACE:OY,RESET_BUFFER_MODE:RY,REUSE_BUFFER_MODE:IY,Unpackr:mV,addExtension:function(e){if(e.Class){if(!e.pack&&!e.write)throw Error("Extension has no pack or write function");if(e.pack&&!e.type)throw Error("Extension has no type (numeric code to identify the extension)");tY.unshift(e.Class),eY.unshift(e)}!function(e){lV[e.type]=e.unpack?e.unpack:e}(e)},clearSource:zV,decode:JV,decodeIter:function(e,t={}){if(!e||"object"!=typeof e)throw Error("first argument must be an Iterable, Async Iterable, Iterator, Async Iterator, or a promise");const n=new mV(t);let r;const s=e=>{let t;r&&(e=Buffer.concat([r,e]),r=void 0);try{t=n.unpackMultiple(e)}catch(n){if(!n.incomplete)throw n;r=e.slice(n.lastPosition),t=n.values}return t};return"function"==typeof e[Symbol.iterator]?function*(){for(const t of e)yield*s(t)}():"function"==typeof e[Symbol.asyncIterator]?async function*(){for await(const t of e)yield*s(t)}():void 0},encode:SY,encodeIter:function(e,t={}){if(e&&"object"==typeof e){if("function"==typeof e[Symbol.iterator])return function*(e,t){const n=new gY(t);for(const t of e)yield n.pack(t)}(e,t);if("function"==typeof e.then||"function"==typeof e[Symbol.asyncIterator])return async function*(e,t){const n=new gY(t);for await(const t of e)yield n.pack(t)}(e,t);throw Error("first argument must be an Iterable, Async Iterable, Iterator, Async Iterator, or a Promise")}throw Error("first argument must be an Iterable, Async Iterable, or a Promise for an Async Iterable")},isNativeAccelerationEnabled:!1,mapsAsObjects:!0,pack:AY,roundFloat32:function(e){nY[0]=e;let t=VV[(127&rY[3])<<1|rY[2]>>7];return(t*e+(e>0?.5:-.5)|0)/t},unpack:QV,unpackMultiple:WV,useRecords:!1})).Packr)({useRecords:!1,encodeUndefinedAsNil:!0}).pack,PY={isJobInList:(e,t,n)=>e.isJobInList([t,n]).then((e=>1===e)),addJob(e,t,n,r){const s=t.keys;let i=[s.wait,s.paused,s["meta-paused"],s.id,s.delayed,s.priority];const o=[s[""],NY.isUndefined(r.customJobId)?"":r.customJobId,n.name,n.data,DY(n.opts),n.timestamp,n.delay,n.delay?n.timestamp+n.delay:0,r.priority||0,r.lifo?"RPUSH":"LPUSH",t.token];return i=i.concat(o),e.addJob(i)},pause(e,t){let n="wait",r="paused";t||(n="paused",r="wait");const s=NY.map([n,r,"meta-paused",t?"paused":"resumed","meta"],(t=>e.toKey(t)));return e.client.pause(s.concat([t?"paused":"resumed"]))},async addLog(e,t,n,r){const s=await e.client,i=[e.toKey(t),e.toKey(t)+":logs"],o=await s.addLog(i.concat([t,n,r||""]));if(0>o)throw PY.finishedErrors(o,t,"addLog");return o},getCountsPerPriorityArgs:(e,t)=>[e.keys.wait,e.keys.paused,e.keys["meta-paused"],e.keys.priority].concat(t),async getCountsPerPriority(e,t){const n=await e.client,r=this.getCountsPerPriorityArgs(e,t);return n.getCountsPerPriority(r)},moveToActive(e,t){const n=e.keys,r=[n.wait,n.active,n.priority];r[3]=r[1]+"@"+e.token,r[4]=n.stalled,r[5]=n.limiter,r[6]=n.delayed,r[7]=n.drained;const s=[n[""],e.token,e.settings.lockDuration,Date.now(),t];return e.limiter&&(s.push(e.limiter.max,e.limiter.duration,!!e.limiter.bounceBack),e.limiter.groupKey&&s.push(!0)),e.client.moveToActive(r.concat(s)).then(MY)},updateProgress(e,t){const n=e.queue,r=[e.id,"progress"].map((e=>n.toKey(e))),s=JSON.stringify(t);return n.client.updateProgress(r,[s,JSON.stringify({jobId:e.id,progress:t})]).then((r=>{if(0>r)throw PY.finishedErrors(r,e.id,"updateProgress");n.emit("progress",e,t)}))},updateData(e,t){const n=e.queue,r=[e.id].map((e=>n.toKey(e))),s=JSON.stringify(t);return n.client.updateData(r,[s])},saveStacktraceArgs:(e,t,n)=>[e.queue.toKey(e.id)].concat([t,n,e.attemptsMade]),retryJobsArgs:(e,t)=>[e.toKey(""),e.toKey("failed"),e.toKey("wait"),e.toKey("meta-paused"),e.toKey("paused")].concat([t]),async retryJobs(e,t=1e3){const n=await e.client,r=this.retryJobsArgs(e,t);return n.retryJobs(r)},moveToFinishedArgs(e,t,n,r,s,i,o){const a=e.queue,c=a.keys,l=a.toKey("metrics:"+s),u=[c.active,c[s],a.toKey(e.id),c.wait,c.priority,c.active+"@"+a.token,c.delayed,c.stalled,l],p=DY("object"==typeof r?r:"number"==typeof r?{count:r}:{count:r?0:-1}),d=[e.id,e.finishedOn,n,NY.isUndefined(t)?"null":t,i?"0":a.token,p,JSON.stringify({jobId:e.id,val:t}),o||a.paused||a.closing||a.limiter?0:1,c[""],a.settings.lockDuration,a.token,a.metrics&&a.metrics.maxDataPoints];return u.concat(d)},moveToFinished(e,t,n,r,s,i,o=!1){const a=PY.moveToFinishedArgs(e,t,n,r,s,i,o,e.queue.toKey(""));return e.queue.client.moveToFinished(a).then((t=>{if(0>t)throw PY.finishedErrors(t,e.id,"finished","active");return t?MY(t):0}))},finishedErrors(e,t,n,r){switch(e){case-1:return Error("Missing key for job "+t+" "+n);case-2:return Error("Missing lock for job "+t+" "+n);case-3:return Error(`Job ${t} is not in the ${r} state. ${n}`);case-6:return Error(`Lock mismatch for job ${t}. Cmd ${n} from ${r}`)}},moveToCompleted:(e,t,n,r,s=!1)=>PY.moveToFinished(e,t,"returnvalue",n,"completed",r,s),moveToFailedArgs:(e,t,n,r)=>PY.moveToFinishedArgs(e,t,"failedReason",n,"failed",r,!0),moveToFailed(e,t,n,r){const s=PY.moveToFailedArgs(e,t,n,r);return PY.moveToFinished(s)},isFinished(e){const t=NY.map(["completed","failed"],(t=>e.queue.toKey(t)));return e.queue.client.isFinished(t.concat([e.id]))},moveToDelayedArgs:(e,t,n,r)=>((n=0>(n=+(n=NY.isUndefined(n)?0:n)||0)?0:n)>0&&(n=4096*n+(4095&t)),NY.map(["active","delayed",t,"stalled"],(t=>e.toKey(t))).concat([JSON.stringify(n),t,r?"0":e.token])),moveToDelayed(e,t,n,r){const s=PY.moveToDelayedArgs(e,t,n,r);return e.client.moveToDelayed(s).then((e=>{switch(e){case-1:throw Error("Missing Job "+t+" when trying to move from active to delayed");case-2:throw Error("Job "+t+" was locked when trying to move from active to delayed")}}))},remove(e,t){const n=[e.keys.active,e.keys.wait,e.keys.delayed,e.keys.paused,e.keys.completed,e.keys.failed,e.keys.priority,e.toKey(t),e.toKey(t+":logs"),e.keys.limiter];return e.client.removeJob(n.concat([t,e.token]))},async removeWithPattern(e,t){const n=[e.keys.active,e.keys.wait,e.keys.delayed,e.keys.paused,e.keys.completed,e.keys.failed,e.keys.priority,e.keys.limiter],r=[];let s,i="0";do{[i,s]=await e.client.removeJobs(n.concat([e.toKey(""),t,i])),r.push.apply(r,s)}while("0"!==i);return r},extendLock:(e,t,n)=>e.client.extendLock([e.toKey(t)+":lock",e.keys.stalled,e.token,n,t]),releaseLock:(e,t)=>e.client.releaseLock([e.toKey(t)+":lock",e.token]),takeLock:(e,t)=>e.client.takeLock([t.lockKey(),e.token,e.settings.lockDuration]),updateDelaySet(e,t){const n=[e.keys.delayed,e.keys.active,e.keys.wait,e.keys.priority,e.keys.paused,e.keys["meta-paused"]],r=[e.toKey(""),t,e.token];return e.client.updateDelaySet(n.concat(r))},promote(e,t){const n=[e.keys.delayed,e.keys.wait,e.keys.paused,e.keys["meta-paused"],e.keys.priority],r=[e.toKey(""),t,e.token];return e.client.promote(n.concat(r))},moveUnlockedJobsToWait(e){const t=[e.keys.stalled,e.keys.wait,e.keys.active,e.keys.failed,e.keys["stalled-check"],e.keys["meta-paused"],e.keys.paused],n=[e.settings.maxStalledCount,e.toKey(""),Date.now(),e.settings.stalledInterval];return e.client.moveStalledJobsToWait(t.concat(n))},cleanJobsInSet:(e,t,n,r)=>e.client.cleanJobsInSet([e.toKey(t),e.toKey("priority"),e.keys.limiter,e.toKey(""),n,r||0,t]),retryJobArgs(e,t){const n=e.queue,r=e.id;return NY.map(["active","wait",r,"meta-paused","paused","stalled","priority"],(e=>n.toKey(e))).concat([(e.opts.lifo?"R":"L")+"PUSH",r,t?"0":e.queue.token])},reprocessJob(e,t){const n=e.queue,r=[n.toKey(e.id),n.toKey(e.id)+":lock",n.toKey(t.state),n.toKey("wait"),n.toKey("meta-paused"),n.toKey("paused")],s=[e.id,(e.opts.lifo?"R":"L")+"PUSH",n.token,Date.now()];return n.client.reprocessJob(r.concat(s))},obliterate(e,t){const n=e.client,r=[e.keys["meta-paused"],e.toKey("")];return n.obliterate(r.concat([t.count,t.force?"force":null])).then((e=>{if(0>e)switch(e){case-1:throw Error("Cannot obliterate non-paused queue");case-2:throw Error("Cannot obliterate queue with active jobs")}return e}))}};var LY=PY;function MY(e){if(e){const t=e[0];if(t.length){const n=function(e){const t={};for(let n=0;e.length>n;n+=2)t[e[n]]=e[n+1];return t}(t);return[n,e[1]]}}return[]}var BY={Messages:{RETRY_JOB_NOT_EXIST:"Couldn't retry job: The job doesn't exist",RETRY_JOB_IS_LOCKED:"Couldn't retry job: The job is locked",RETRY_JOB_NOT_FAILED:"Couldn't retry job: The job has been already retried or has not failed",MISSING_REDIS_OPTS:"Using a redis instance with enableReadyCheck or maxRetriesPerRequest for bclient/subscriber is not permitted.\n  see https://github.com/OptimalBits/bull/issues/1873\n  "}};const jY=Kz,FY={fixed:e=>function(){return e},exponential:e=>function(t){return Math.round((Math.pow(2,t)-1)*e)}};var $Y={normalize:e=>jY.isFinite(e)?{type:"fixed",delay:e}:e||void 0,calculate(e,t,n,r,s){if(e){const i=function(e,t){if(e.type in t)return t[e.type];if(e.type in FY)return FY[e.type](e.delay);throw Error("Unknown backoff strategy "+e.type+". If a custom backoff strategy is used, specify it when the queue is created.")}(e,n);return i(t,r,s)}}};const UY=Kz,HY=Qz,GY=LY,qY=l.debuglog("bull"),zY=BY,VY=$Y,YY="__default__",KY=["opts","name","id","progress","delay","timestamp","finishedOn","processedOn","retriedOn","failedReason","attemptsMade","stacktrace","returnvalue"],QY=function(e,t,n,r){"string"!=typeof t&&(r=n,n=t,t=YY),this.opts=function(e){const t=Object.assign({},e);return t.attempts=void 0===t.attempts?1:t.attempts,t.delay=void 0===t.delay?0:+t.delay,t.timestamp=void 0===t.timestamp?Date.now():t.timestamp,t.attempts=parseInt(t.attempts),t.backoff=VY.normalize(t.backoff),t}(r),this.name=t,this.queue=e,this.data=n,this._progress=0,this.delay=0>this.opts.delay?0:this.opts.delay,this.timestamp=this.opts.timestamp,this.stacktrace=[],this.returnvalue=null,this.attemptsMade=0,this.toKey=UY.bind(e.toKey,e)};function WY(e,t,n){const r=n.opts,s=n.toData();return GY.addJob(t,e,s,{lifo:r.lifo,customJobId:r.jobId,priority:r.priority})}QY.DEFAULT_JOB_NAME=YY,QY.create=function(e,t,n,r){const s=new QY(e,t,n,r);return e.isReady().then((()=>WY(e,e.client,s))).then((e=>(s.id=e,qY("Job added",e),s)))},QY.createBulk=function(e,t){return t=t.map((t=>new QY(e,t.name,t.data,t.opts))),e.isReady().then((()=>{const n=e.client.multi();for(const r of t)WY(e,n,r);return n.exec()})).then((e=>(e.forEach(((e,n)=>{t[n].id=e[1],qY("Job added",e[1])})),t)))},QY.fromId=async function(e,t,n){if(!t)return Promise.resolve();const r=e.toKey(t);let s;return s=n&&n.excludeData?UY.zipObject(KY,await e.client.hmget(r,KY)):await e.client.hgetall(r),UY.isEmpty(s)?null:QY.fromJSON(e,s,t)},QY.remove=async function(e,t){await e.isReady(),(await GY.removeWithPattern(e,t)).forEach((t=>e.emit("removed",t)))},QY.prototype.progress=function(e){return UY.isUndefined(e)?this._progress:(this._progress=e,GY.updateProgress(this,e))},QY.prototype.update=async function(e){this.data=e;const t=await GY.updateData(this,e);if(0>t)throw GY.finishedErrors(t,this.id,"updateData")},QY.prototype.toJSON=function(){const e=Object.assign({},this.opts);return{id:this.id,name:this.name,data:this.data||{},opts:e,progress:this._progress,delay:this.delay,timestamp:this.timestamp,attemptsMade:this.attemptsMade,failedReason:this.failedReason,stacktrace:this.stacktrace||null,returnvalue:this.returnvalue||null,finishedOn:this.finishedOn||null,processedOn:this.processedOn||null}},QY.prototype.toData=function(){const e=this.toJSON();return e.data=JSON.stringify(e.data),e.opts=JSON.stringify(e.opts),e.stacktrace=JSON.stringify(e.stacktrace),e.failedReason=JSON.stringify(e.failedReason),e.returnvalue=JSON.stringify(e.returnvalue),e},QY.prototype.lockKey=function(){return this.toKey(this.id)+":lock"},QY.prototype.takeLock=function(){return GY.takeLock(this.queue,this).then((e=>e||!1))},QY.prototype.releaseLock=function(){return GY.releaseLock(this.queue,this.id).then((e=>{if(1!=e)throw Error("Could not release lock for job "+this.id)}))},QY.prototype.extendLock=function(e){return GY.extendLock(this.queue,this.id,e)},QY.prototype.moveToCompleted=function(e,t,n=!1){return this.queue.isReady().then((()=>(this.returnvalue=e||0,(e=HY.tryCatch(JSON.stringify,JSON,[e]))===HY.errorObject?Promise.reject(HY.errorObject.value):(this.finishedOn=Date.now(),GY.moveToCompleted(this,e,this.opts.removeOnComplete,t,n)))))},QY.prototype.discard=function(){this._discarded=!0},QY.prototype.moveToFailed=async function(e,t){let n;this.failedReason=(e=e||{message:"Unknown reason"}).message,await this.queue.isReady();const r=this.queue.client.multi();this._saveAttempt(r,e);let s=!1;if(this.opts.attempts>this.attemptsMade&&!this._discarded){const i=await VY.calculate(this.opts.backoff,this.attemptsMade,this.queue.settings.backoffStrategies,e,UY.get(this,"opts.backoff.options",null));if(-1===i)s=!0;else if(i){const e=GY.moveToDelayedArgs(this.queue,this.id,Date.now()+i,t);r.moveToDelayed(e),n="delayed"}else r.retryJob(GY.retryJobArgs(this,t)),n="retry"}else s=!0;if(s){this.finishedOn=Date.now();const s=GY.moveToFailedArgs(this,e.message,this.opts.removeOnFail,t);r.moveToFinished(s),n="failed"}const i=await r.exec(),o=UY.last(i)[1];if(0>o)throw GY.finishedErrors(o,this.id,n,"active")},QY.prototype.moveToDelayed=function(e,t){return GY.moveToDelayed(this.queue,this.id,e,t)},QY.prototype.promote=function(){const e=this.queue,t=this.id;return e.isReady().then((()=>GY.promote(e,t).then((e=>{if(-1===e)throw Error("Job "+t+" is not in a delayed state")}))))},QY.prototype.retry=function(){return this.queue.isReady().then((()=>(this.failedReason=null,this.finishedOn=null,this.processedOn=null,this.retriedOn=Date.now(),GY.reprocessJob(this,{state:"failed"}).then((e=>{if(1!==e){if(0===e)throw Error(zY.Messages.RETRY_JOB_NOT_EXIST);if(-1===e)throw Error(zY.Messages.RETRY_JOB_IS_LOCKED);if(-2===e)throw Error(zY.Messages.RETRY_JOB_NOT_FAILED)}})))))},QY.prototype.log=function(e){return GY.addLog(this.queue,this.id,e)},QY.prototype.isCompleted=function(){return this._isDone("completed")},QY.prototype.isFailed=function(){return this._isDone("failed")},QY.prototype.isDelayed=function(){return this._isDone("delayed")},QY.prototype.isActive=function(){return this._isInList("active")},QY.prototype.isWaiting=function(){return this._isInList("wait")},QY.prototype.isPaused=function(){return this._isInList("paused")},QY.prototype.isStuck=function(){return this.getState().then((e=>"stuck"===e))},QY.prototype.isDiscarded=function(){return this._discarded},QY.prototype.getState=function(){return[{fn:"isCompleted",state:"completed"},{fn:"isFailed",state:"failed"},{fn:"isDelayed",state:"delayed"},{fn:"isActive",state:"active"},{fn:"isWaiting",state:"waiting"},{fn:"isPaused",state:"paused"}].reduce(((e,t)=>e.then((e=>e||this[t.fn]().then((e=>e?t.state:null))))),Promise.resolve()).then((e=>e||"stuck"))},QY.prototype.remove=function(){const e=this.queue,t=this;return e.isReady().then((()=>GY.remove(e,t.id).then((n=>{if(!n)throw Error("Could not remove job "+t.id);e.emit("removed",t)}))))},QY.prototype.finished=async function(){await Promise.all([this.queue._registerEvent("global:completed"),this.queue._registerEvent("global:failed")]),await this.queue.isReady();const e=await GY.isFinished(this);if(e>0){const t=await QY.fromId(this.queue,this.id);if(2==e)throw Error(t.failedReason);return t.returnvalue}return new Promise(((e,t)=>{const n=(t,n)=>{if(t+""==this.id+""){let t;try{"string"==typeof n&&(t=JSON.parse(n))}catch(e){qY("corrupted resultValue: "+n,e)}e(t),s()}},r=(e,n)=>{e+""==this.id+""&&(t(Error(n)),s())};this.queue.on("global:completed",n),this.queue.on("global:failed",r);const s=()=>{clearInterval(i),this.queue.removeListener("global:completed",n),this.queue.removeListener("global:failed",r)},i=setInterval((()=>{this._isQueueClosing()?(s(),t(Error("cannot check if job is finished in a closing queue."))):GY.isFinished(this).then((n=>{n>0&&QY.fromId(this.queue,this.id).then((r=>{s(),2==n?t(Error(r.failedReason)):e(r.returnvalue)}))}))}),5e3)}))},QY.prototype._isQueueClosing=function(){return this.queue.closing},QY.prototype._isDone=function(e){return this.queue.client.zscore(this.queue.toKey(e),this.id).then((e=>null!==e))},QY.prototype._isInList=function(e){return GY.isJobInList(this.queue.client,this.queue.toKey(e),this.id)},QY.prototype._saveAttempt=function(e,t){this.attemptsMade++,this.stacktrace=this.stacktrace||[],t&&t.stack&&(this.stacktrace.push(t.stack),this.opts.stackTraceLimit&&(this.stacktrace=this.stacktrace.slice(-this.opts.stackTraceLimit)));const n=GY.saveStacktraceArgs(this,JSON.stringify(this.stacktrace),t&&t.message);e.saveStacktrace(n)},QY.fromJSON=function(e,t,n){const r=JSON.parse(t.opts||"{}"),s=r.preventParsingData?t.data:JSON.parse(t.data||"{}"),i=new QY(e,t.name||QY.DEFAULT_JOB_NAME,s,r);i.id=t.id||n;try{i._progress=JSON.parse(t.progress||0)}catch(e){}return i.delay=parseInt(t.delay),i.timestamp=parseInt(t.timestamp),t.finishedOn&&(i.finishedOn=parseInt(t.finishedOn)),t.processedOn&&(i.processedOn=parseInt(t.processedOn)),t.retriedOn&&(i.retriedOn=parseInt(t.retriedOn)),i.failedReason=t.failedReason,i.attemptsMade=parseInt(t.attemptsMade||0),i.stacktrace=function(e){const t=HY.tryCatch(JSON.parse,JSON,[e]);return t!==HY.errorObject&&t instanceof Array?t:[]}(t.stacktrace),"string"==typeof t.returnvalue&&(i.returnvalue=function(e){const t=HY.tryCatch(JSON.parse,JSON,[e]);if(t!==HY.errorObject)return t;qY("corrupted returnvalue: "+e,t)}(t.returnvalue)),i};var JY,XY=QY,ZY=new Uint8Array(16);function eK(){if(!JY&&!(JY="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return JY(ZY)}var tK=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function nK(e){return"string"==typeof e&&tK.test(e)}for(var rK,sK,iK=[],oK=0;256>oK;++oK)iK.push((oK+256).toString(16).substr(1));function aK(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(iK[e[t+0]]+iK[e[t+1]]+iK[e[t+2]]+iK[e[t+3]]+"-"+iK[e[t+4]]+iK[e[t+5]]+"-"+iK[e[t+6]]+iK[e[t+7]]+"-"+iK[e[t+8]]+iK[e[t+9]]+"-"+iK[e[t+10]]+iK[e[t+11]]+iK[e[t+12]]+iK[e[t+13]]+iK[e[t+14]]+iK[e[t+15]]).toLowerCase();if(!nK(n))throw TypeError("Stringified UUID is invalid");return n}var cK=0,lK=0;function uK(e){if(!nK(e))throw TypeError("Invalid UUID");var t,n=new Uint8Array(16);return n[0]=(t=parseInt(e.slice(0,8),16))>>>24,n[1]=t>>>16&255,n[2]=t>>>8&255,n[3]=255&t,n[4]=(t=parseInt(e.slice(9,13),16))>>>8,n[5]=255&t,n[6]=(t=parseInt(e.slice(14,18),16))>>>8,n[7]=255&t,n[8]=(t=parseInt(e.slice(19,23),16))>>>8,n[9]=255&t,n[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,n[11]=t/4294967296&255,n[12]=t>>>24&255,n[13]=t>>>16&255,n[14]=t>>>8&255,n[15]=255&t,n}function pK(e,t,n){function r(e,r,s,i){if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));for(var t=[],n=0;e.length>n;++n)t.push(e.charCodeAt(n));return t}(e)),"string"==typeof r&&(r=uK(r)),16!==r.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var o=new Uint8Array(16+e.length);if(o.set(r),o.set(e,r.length),(o=n(o))[6]=15&o[6]|t,o[8]=63&o[8]|128,s){i=i||0;for(var a=0;16>a;++a)s[i+a]=o[a];return s}return aK(o)}try{r.name=e}catch(e){}return r.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",r.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",r}function dK(e){return 15+(e+64>>>9<<4)}function hK(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function fK(e,t,n,r,s,i){return hK((o=hK(hK(t,e),hK(r,i)))<<(a=s)|o>>>32-a,n);var o,a}function mK(e,t,n,r,s,i,o){return fK(t&n|~t&r,e,t,s,i,o)}function gK(e,t,n,r,s,i,o){return fK(t&r|n&~r,e,t,s,i,o)}function yK(e,t,n,r,s,i,o){return fK(t^n^r,e,t,s,i,o)}function vK(e,t,n,r,s,i,o){return fK(n^(t|~r),e,t,s,i,o)}var bK=pK("v3",48,(function(e){if("string"==typeof e){var t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(var n=0;t.length>n;++n)e[n]=t.charCodeAt(n)}return function(e){for(var t=[],n=32*e.length,r="0123456789abcdef",s=0;n>s;s+=8){var i=e[s>>5]>>>s%32&255,o=parseInt(r.charAt(i>>>4&15)+r.charAt(15&i),16);t.push(o)}return t}(function(e,t){e[t>>5]|=128<<t%32,e[dK(t)-1]=t;for(var n=1732584193,r=-271733879,s=-1732584194,i=271733878,o=0;e.length>o;o+=16){var a=n,c=r,l=s,u=i;n=mK(n,r,s,i,e[o],7,-680876936),i=mK(i,n,r,s,e[o+1],12,-389564586),s=mK(s,i,n,r,e[o+2],17,606105819),r=mK(r,s,i,n,e[o+3],22,-1044525330),n=mK(n,r,s,i,e[o+4],7,-176418897),i=mK(i,n,r,s,e[o+5],12,1200080426),s=mK(s,i,n,r,e[o+6],17,-1473231341),r=mK(r,s,i,n,e[o+7],22,-45705983),n=mK(n,r,s,i,e[o+8],7,1770035416),i=mK(i,n,r,s,e[o+9],12,-1958414417),s=mK(s,i,n,r,e[o+10],17,-42063),r=mK(r,s,i,n,e[o+11],22,-1990404162),n=mK(n,r,s,i,e[o+12],7,1804603682),i=mK(i,n,r,s,e[o+13],12,-40341101),s=mK(s,i,n,r,e[o+14],17,-1502002290),n=gK(n,r=mK(r,s,i,n,e[o+15],22,1236535329),s,i,e[o+1],5,-165796510),i=gK(i,n,r,s,e[o+6],9,-1069501632),s=gK(s,i,n,r,e[o+11],14,643717713),r=gK(r,s,i,n,e[o],20,-373897302),n=gK(n,r,s,i,e[o+5],5,-701558691),i=gK(i,n,r,s,e[o+10],9,38016083),s=gK(s,i,n,r,e[o+15],14,-660478335),r=gK(r,s,i,n,e[o+4],20,-405537848),n=gK(n,r,s,i,e[o+9],5,568446438),i=gK(i,n,r,s,e[o+14],9,-1019803690),s=gK(s,i,n,r,e[o+3],14,-187363961),r=gK(r,s,i,n,e[o+8],20,1163531501),n=gK(n,r,s,i,e[o+13],5,-1444681467),i=gK(i,n,r,s,e[o+2],9,-51403784),s=gK(s,i,n,r,e[o+7],14,1735328473),n=yK(n,r=gK(r,s,i,n,e[o+12],20,-1926607734),s,i,e[o+5],4,-378558),i=yK(i,n,r,s,e[o+8],11,-2022574463),s=yK(s,i,n,r,e[o+11],16,1839030562),r=yK(r,s,i,n,e[o+14],23,-35309556),n=yK(n,r,s,i,e[o+1],4,-1530992060),i=yK(i,n,r,s,e[o+4],11,1272893353),s=yK(s,i,n,r,e[o+7],16,-155497632),r=yK(r,s,i,n,e[o+10],23,-1094730640),n=yK(n,r,s,i,e[o+13],4,681279174),i=yK(i,n,r,s,e[o],11,-358537222),s=yK(s,i,n,r,e[o+3],16,-722521979),r=yK(r,s,i,n,e[o+6],23,76029189),n=yK(n,r,s,i,e[o+9],4,-640364487),i=yK(i,n,r,s,e[o+12],11,-421815835),s=yK(s,i,n,r,e[o+15],16,530742520),n=vK(n,r=yK(r,s,i,n,e[o+2],23,-995338651),s,i,e[o],6,-198630844),i=vK(i,n,r,s,e[o+7],10,1126891415),s=vK(s,i,n,r,e[o+14],15,-1416354905),r=vK(r,s,i,n,e[o+5],21,-57434055),n=vK(n,r,s,i,e[o+12],6,1700485571),i=vK(i,n,r,s,e[o+3],10,-1894986606),s=vK(s,i,n,r,e[o+10],15,-1051523),r=vK(r,s,i,n,e[o+1],21,-2054922799),n=vK(n,r,s,i,e[o+8],6,1873313359),i=vK(i,n,r,s,e[o+15],10,-30611744),s=vK(s,i,n,r,e[o+6],15,-1560198380),r=vK(r,s,i,n,e[o+13],21,1309151649),n=vK(n,r,s,i,e[o+4],6,-145523070),i=vK(i,n,r,s,e[o+11],10,-1120210379),s=vK(s,i,n,r,e[o+2],15,718787259),r=vK(r,s,i,n,e[o+9],21,-343485551),n=hK(n,a),r=hK(r,c),s=hK(s,l),i=hK(i,u)}return[n,r,s,i]}(function(e){if(0===e.length)return[];for(var t=8*e.length,n=new Uint32Array(dK(t)),r=0;t>r;r+=8)n[r>>5]|=(255&e[r/8])<<r%32;return n}(e),8*e.length))})),EK=bK;function _K(e,t,n,r){switch(e){case 0:return t&n^~t&r;case 1:case 3:return t^n^r;case 2:return t&n^t&r^n&r}}function AK(e,t){return e<<t|e>>>32-t}var SK=pK("v5",80,(function(e){var t=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){var r=unescape(encodeURIComponent(e));e=[];for(var s=0;r.length>s;++s)e.push(r.charCodeAt(s))}else Array.isArray(e)||(e=[].slice.call(e));e.push(128);for(var i=Math.ceil((e.length/4+2)/16),o=Array(i),a=0;i>a;++a){for(var c=new Uint32Array(16),l=0;16>l;++l)c[l]=e[64*a+4*l]<<24|e[64*a+4*l+1]<<16|e[64*a+4*l+2]<<8|e[64*a+4*l+3];o[a]=c}o[i-1][14]=8*(e.length-1)/4294967296,o[i-1][14]=Math.floor(o[i-1][14]),o[i-1][15]=8*(e.length-1)&4294967295;for(var u=0;i>u;++u){for(var p=new Uint32Array(80),d=0;16>d;++d)p[d]=o[u][d];for(var h=16;80>h;++h)p[h]=AK(p[h-3]^p[h-8]^p[h-14]^p[h-16],1);for(var f=n[0],m=n[1],g=n[2],y=n[3],v=n[4],b=0;80>b;++b){var E=Math.floor(b/20),_=AK(f,5)+_K(E,m,g,y)+v+t[E]+p[b]>>>0;v=y,y=g,g=AK(m,30)>>>0,m=f,f=_}n[0]=n[0]+f>>>0,n[1]=n[1]+m>>>0,n[2]=n[2]+g>>>0,n[3]=n[3]+y>>>0,n[4]=n[4]+v>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,255&n[0],n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,255&n[1],n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,255&n[2],n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,255&n[3],n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,255&n[4]]})),TK=Object.freeze({__proto__:null,NIL:"00000000-0000-0000-0000-000000000000",parse:uK,stringify:aK,v1:function(e,t,n){var r=t&&n||0,s=t||Array(16),i=(e=e||{}).node||rK,o=void 0!==e.clockseq?e.clockseq:sK;if(null==i||null==o){var a=e.random||(e.rng||eK)();null==i&&(i=rK=[1|a[0],a[1],a[2],a[3],a[4],a[5]]),null==o&&(o=sK=16383&(a[6]<<8|a[7]))}var c=void 0!==e.msecs?e.msecs:Date.now(),l=void 0!==e.nsecs?e.nsecs:lK+1,u=c-cK+(l-lK)/1e4;if(0>u&&void 0===e.clockseq&&(o=o+1&16383),(0>u||c>cK)&&void 0===e.nsecs&&(l=0),l>=1e4)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");cK=c,lK=l,sK=o;var p=(1e4*(268435455&(c+=122192928e5))+l)%4294967296;s[r++]=p>>>24&255,s[r++]=p>>>16&255,s[r++]=p>>>8&255,s[r++]=255&p;var d=c/4294967296*1e4&268435455;s[r++]=d>>>8&255,s[r++]=255&d,s[r++]=d>>>24&15|16,s[r++]=d>>>16&255,s[r++]=o>>>8|128,s[r++]=255&o;for(var h=0;6>h;++h)s[r+h]=i[h];return t||aK(s)},v3:EK,v4:function(e,t,n){var r=(e=e||{}).random||(e.rng||eK)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var s=0;16>s;++s)t[n+s]=r[s];return t}return aK(r)},v5:SK,validate:nK,version:function(e){if(!nK(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}}),wK=L(TK);const xK=Kz,kK=wK;function CK(){this.idle=!0,this.listeners=[],this.timers={}}CK.prototype.set=function(e,t,n){const r=kK.v4(),s=setTimeout(((e,t)=>{e.clear(t);try{n()}catch(e){}}),t,this,r);return this.timers[r]={name:e,timer:s},this.idle=!1,r},CK.prototype.clear=function(e){const t=this.timers,n=t[e];if(n&&(clearTimeout(n.timer),delete t[e],!this.idle&&0===xK.size(t))){for(;this.listeners.length;)this.listeners.pop()();this.idle=!0}},CK.prototype.clearAll=function(){xK.each(this.timers,((e,t)=>{this.clear(t)}))},CK.prototype.whenIdle=function(){return new Promise((e=>{this.idle?e():this.listeners.unshift(e)}))};var IK=CK,RK={};class OK extends Error{constructor(e){super(e),this.name="TimeoutError"}}RK.TimeoutError=OK,RK.pTimeout=function(e,t,n,r){let s;const i=new Promise(((i,o)=>{if("number"!=typeof t||1!==Math.sign(t))throw new TypeError(`Expected \`milliseconds\` to be a positive number, got \`${t}\``);t!==1/0?(r={customTimers:{setTimeout:setTimeout,clearTimeout:clearTimeout},...r},s=r.customTimers.setTimeout.call(void 0,(()=>{if("function"==typeof n){try{i(n())}catch(e){o(e)}return}const r=n instanceof Error?n:new OK("string"==typeof n?n:`Promise timed out after ${t} milliseconds`);"function"==typeof e.cancel&&e.cancel(),o(r)}),t),(async()=>{try{i(await e)}catch(e){o(e)}finally{r.customTimers.clearTimeout.call(void 0,s)}})()):i(e)}));return i.clear=()=>{clearTimeout(s),s=void 0},i};var NK,DK,PK,LK,MK,BK,jK,FK,$K,UK,HK,GK,qK,zK,VK,YK,KK,QK={};function WK(){if(MK)return QK;MK=1,Object.defineProperty(QK,"__esModule",{value:!0});class e extends Error{}class t extends e{constructor(e){super("Invalid DateTime: "+e.toMessage())}}class n extends e{constructor(e){super("Invalid Interval: "+e.toMessage())}}class r extends e{constructor(e){super("Invalid Duration: "+e.toMessage())}}class s extends e{}class i extends e{constructor(e){super("Invalid unit "+e)}}class o extends e{}class a extends e{constructor(){super("Zone is an abstract class")}}const c="numeric",l="short",u="long",p={year:c,month:c,day:c},d={year:c,month:l,day:c},h={year:c,month:l,day:c,weekday:l},f={year:c,month:u,day:c},m={year:c,month:u,day:c,weekday:u},g={hour:c,minute:c},y={hour:c,minute:c,second:c},v={hour:c,minute:c,second:c,timeZoneName:l},b={hour:c,minute:c,second:c,timeZoneName:u},E={hour:c,minute:c,hourCycle:"h23"},_={hour:c,minute:c,second:c,hourCycle:"h23"},A={hour:c,minute:c,second:c,hourCycle:"h23",timeZoneName:l},S={hour:c,minute:c,second:c,hourCycle:"h23",timeZoneName:u},T={year:c,month:c,day:c,hour:c,minute:c},w={year:c,month:c,day:c,hour:c,minute:c,second:c},x={year:c,month:l,day:c,hour:c,minute:c},k={year:c,month:l,day:c,hour:c,minute:c,second:c},C={year:c,month:l,day:c,weekday:l,hour:c,minute:c},I={year:c,month:u,day:c,hour:c,minute:c,timeZoneName:l},R={year:c,month:u,day:c,hour:c,minute:c,second:c,timeZoneName:l},O={year:c,month:u,day:c,weekday:u,hour:c,minute:c,timeZoneName:u},N={year:c,month:u,day:c,weekday:u,hour:c,minute:c,second:c,timeZoneName:u};class D{get type(){throw new a}get name(){throw new a}get ianaName(){return this.name}get isUniversal(){throw new a}offsetName(e,t){throw new a}formatOffset(e,t){throw new a}offset(e){throw new a}equals(e){throw new a}get isValid(){throw new a}}let P=null;class L extends D{static get instance(){return null===P&&(P=new L),P}get type(){return"system"}get name(){return(new Intl.DateTimeFormat).resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,{format:t,locale:n}){return Ke(e,t,n)}formatOffset(e,t){return Xe(this.offset(e),t)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return"system"===e.type}get isValid(){return!0}}let M={};const B={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};let j={};class F extends D{static create(e){return j[e]||(j[e]=new F(e)),j[e]}static resetCache(){j={},M={}}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch(e){return!1}}constructor(e){super(),this.zoneName=e,this.valid=F.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,{format:t,locale:n}){return Ke(e,t,n,this.name)}formatOffset(e,t){return Xe(this.offset(e),t)}offset(e){const t=new Date(e);if(isNaN(t))return NaN;const n=(M[r=this.name]||(M[r]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:r,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),M[r]);var r;let[s,i,o,a,c,l,u]=n.formatToParts?function(e,t){const n=e.formatToParts(t),r=[];for(let e=0;n.length>e;e++){const{type:t,value:s}=n[e],i=B[t];"era"===t?r[i]=s:ke(i)||(r[i]=parseInt(s,10))}return r}(n,t):function(e,t){const n=e.format(t).replace(/\u200E/g,""),r=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(n),[,s,i,o,a,c,l,u]=r;return[o,s,i,a,c,l,u]}(n,t);"BC"===a&&(s=1-Math.abs(s));let p=+t;const d=p%1e3;return p-=0>d?1e3+d:d,(qe({year:s,month:i,day:o,hour:24===c?0:c,minute:l,second:u,millisecond:0})-p)/6e4}equals(e){return"iana"===e.type&&e.name===this.name}get isValid(){return this.valid}}let $={},U={};function H(e,t={}){const n=JSON.stringify([e,t]);let r=U[n];return r||(r=new Intl.DateTimeFormat(e,t),U[n]=r),r}let G={},q={},z=null,V={};function Y(e,t,n,r){const s=e.listingMode();return"error"===s?null:"en"===s?n(t):r(t)}class K{constructor(e,t,n){this.padTo=n.padTo||0,this.floor=n.floor||!1;const{padTo:r,floor:s,...i}=n;if(!t||Object.keys(i).length>0){const t={useGrouping:!1,...n};n.padTo>0&&(t.minimumIntegerDigits=n.padTo),this.inf=function(e,t={}){const n=JSON.stringify([e,t]);let r=G[n];return r||(r=new Intl.NumberFormat(e,t),G[n]=r),r}(e,t)}}format(e){return this.inf?this.inf.format(this.floor?Math.floor(e):e):Me(this.floor?Math.floor(e):$e(e,3),this.padTo)}}class Q{constructor(e,t,n){let r;if(this.opts=n,this.originalZone=void 0,this.opts.timeZone)this.dt=e;else if("fixed"===e.zone.type){const t=e.offset/60*-1,n=0>t?"Etc/GMT"+t:"Etc/GMT+"+t;0!==e.offset&&F.create(n).valid?(r=n,this.dt=e):(r="UTC",this.dt=0===e.offset?e:e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone)}else"system"===e.zone.type?this.dt=e:"iana"===e.zone.type?(this.dt=e,r=e.zone.name):(r="UTC",this.dt=e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone);const s={...this.opts};s.timeZone=s.timeZone||r,this.dtf=H(t,s)}format(){return this.originalZone?this.formatToParts().map((({value:e})=>e)).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const e=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?e.map((e=>{if("timeZoneName"===e.type){const t=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...e,value:t}}return e})):e}resolvedOptions(){return this.dtf.resolvedOptions()}}class W{constructor(e,t,n){this.opts={style:"long",...n},!t&&Re()&&(this.rtf=function(e,t={}){const{base:n,...r}=t,s=JSON.stringify([e,r]);let i=q[s];return i||(i=new Intl.RelativeTimeFormat(e,t),q[s]=i),i}(e,n))}format(e,t){return this.rtf?this.rtf.format(e,t):function(e,t,n="always",r=!1){const s={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]};if("auto"===n&&-1===["hours","minutes","seconds"].indexOf(e)){const n="days"===e;switch(t){case 1:return n?"tomorrow":"next "+s[e][0];case-1:return n?"yesterday":"last "+s[e][0];case 0:return n?"today":"this "+s[e][0]}}const i=Object.is(t,-0)||0>t,o=Math.abs(t),a=1===o,c=s[e],l=r?a?c[1]:c[2]||c[1]:a?s[e][0]:e;return i?`${o} ${l} ago`:`in ${o} ${l}`}(t,e,this.opts.numeric,"long"!==this.opts.style)}formatToParts(e,t){return this.rtf?this.rtf.formatToParts(e,t):[]}}const J={firstDay:1,minimalDays:4,weekend:[6,7]};class X{static fromOpts(e){return X.create(e.locale,e.numberingSystem,e.outputCalendar,e.weekSettings,e.defaultToEN)}static create(e,t,n,r,s=!1){const i=e||pe.defaultLocale,o=i||(s?"en-US":z||(z=(new Intl.DateTimeFormat).resolvedOptions().locale,z)),a=t||pe.defaultNumberingSystem,c=n||pe.defaultOutputCalendar,l=Pe(r)||pe.defaultWeekSettings;return new X(o,a,c,l,i)}static resetCache(){z=null,U={},G={},q={}}static fromObject({locale:e,numberingSystem:t,outputCalendar:n,weekSettings:r}={}){return X.create(e,t,n,r)}constructor(e,t,n,r,s){const[i,o,a]=function(e){const t=e.indexOf("-x-");-1!==t&&(e=e.substring(0,t));const n=e.indexOf("-u-");if(-1===n)return[e];{let t,r;try{t=H(e).resolvedOptions(),r=e}catch(s){const i=e.substring(0,n);t=H(i).resolvedOptions(),r=i}const{numberingSystem:s,calendar:i}=t;return[r,s,i]}}(e);this.locale=i,this.numberingSystem=t||o||null,this.outputCalendar=n||a||null,this.weekSettings=r,this.intl=function(e,t,n){return n||t?(e.includes("-u-")||(e+="-u"),n&&(e+="-ca-"+n),t&&(e+="-nu-"+t),e):e}(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=s,this.fastNumbersCached=null}get fastNumbers(){var e;return null==this.fastNumbersCached&&(this.fastNumbersCached=(!(e=this).numberingSystem||"latn"===e.numberingSystem)&&("latn"===e.numberingSystem||!e.locale||e.locale.startsWith("en")||"latn"===new Intl.DateTimeFormat(e.intl).resolvedOptions().numberingSystem)),this.fastNumbersCached}listingMode(){return this.isEnglish()&&!(null!==this.numberingSystem&&"latn"!==this.numberingSystem||null!==this.outputCalendar&&"gregory"!==this.outputCalendar)?"en":"intl"}clone(e){return e&&0!==Object.getOwnPropertyNames(e).length?X.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,Pe(e.weekSettings)||this.weekSettings,e.defaultToEN||!1):this}redefaultToEN(e={}){return this.clone({...e,defaultToEN:!0})}redefaultToSystem(e={}){return this.clone({...e,defaultToEN:!1})}months(e,t=!1){return Y(this,e,rt,(()=>{const n=t?{month:e,day:"numeric"}:{month:e},r=t?"format":"standalone";return this.monthsCache[r][e]||(this.monthsCache[r][e]=function(e){const t=[];for(let n=1;12>=n;n++){const r=ir.utc(2009,n,1);t.push(e(r))}return t}((e=>this.extract(e,n,"month")))),this.monthsCache[r][e]}))}weekdays(e,t=!1){return Y(this,e,at,(()=>{const n=t?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},r=t?"format":"standalone";return this.weekdaysCache[r][e]||(this.weekdaysCache[r][e]=function(e){const t=[];for(let n=1;7>=n;n++){const r=ir.utc(2016,11,13+n);t.push(e(r))}return t}((e=>this.extract(e,n,"weekday")))),this.weekdaysCache[r][e]}))}meridiems(){return Y(this,void 0,(()=>ct),(()=>{if(!this.meridiemCache){const e={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[ir.utc(2016,11,13,9),ir.utc(2016,11,13,19)].map((t=>this.extract(t,e,"dayperiod")))}return this.meridiemCache}))}eras(e){return Y(this,e,dt,(()=>{const t={era:e};return this.eraCache[e]||(this.eraCache[e]=[ir.utc(-40,1,1),ir.utc(2017,1,1)].map((e=>this.extract(e,t,"era")))),this.eraCache[e]}))}extract(e,t,n){const r=this.dtFormatter(e,t).formatToParts().find((e=>e.type.toLowerCase()===n));return r?r.value:null}numberFormatter(e={}){return new K(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e,t={}){return new Q(e,this.intl,t)}relFormatter(e={}){return new W(this.intl,this.isEnglish(),e)}listFormatter(e={}){return function(e,t={}){const n=JSON.stringify([e,t]);let r=$[n];return r||(r=new Intl.ListFormat(e,t),$[n]=r),r}(this.intl,e)}isEnglish(){return"en"===this.locale||"en-us"===this.locale.toLowerCase()||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:Oe()?function(e){let t=V[e];if(!t){const n=new Intl.Locale(e);t="getWeekInfo"in n?n.getWeekInfo():n.weekInfo,V[e]=t}return t}(this.locale):J}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}}let Z=null;class ee extends D{static get utcInstance(){return null===Z&&(Z=new ee(0)),Z}static instance(e){return 0===e?ee.utcInstance:new ee(e)}static parseSpecifier(e){if(e){const t=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(t)return new ee(Qe(t[1],t[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return 0===this.fixed?"UTC":"UTC"+Xe(this.fixed,"narrow")}get ianaName(){return 0===this.fixed?"Etc/UTC":"Etc/GMT"+Xe(-this.fixed,"narrow")}offsetName(){return this.name}formatOffset(e,t){return Xe(this.fixed,t)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return"fixed"===e.type&&e.fixed===this.fixed}get isValid(){return!0}}class te extends D{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function ne(e,t){if(ke(e)||null===e)return t;if(e instanceof D)return e;if("string"==typeof e){const n=e.toLowerCase();return"default"===n?t:"local"===n||"system"===n?L.instance:"utc"===n||"gmt"===n?ee.utcInstance:ee.parseSpecifier(n)||F.create(e)}return Ce(e)?ee.instance(e):"object"==typeof e&&"offset"in e&&"function"==typeof e.offset?e:new te(e)}let re,se=()=>Date.now(),ie="system",oe=null,ae=null,ce=null,le=60,ue=null;class pe{static get now(){return se}static set now(e){se=e}static set defaultZone(e){ie=e}static get defaultZone(){return ne(ie,L.instance)}static get defaultLocale(){return oe}static set defaultLocale(e){oe=e}static get defaultNumberingSystem(){return ae}static set defaultNumberingSystem(e){ae=e}static get defaultOutputCalendar(){return ce}static set defaultOutputCalendar(e){ce=e}static get defaultWeekSettings(){return ue}static set defaultWeekSettings(e){ue=Pe(e)}static get twoDigitCutoffYear(){return le}static set twoDigitCutoffYear(e){le=e%100}static get throwOnInvalid(){return re}static set throwOnInvalid(e){re=e}static resetCaches(){X.resetCache(),F.resetCache()}}class de{constructor(e,t){this.reason=e,this.explanation=t}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const he=[0,31,59,90,120,151,181,212,243,273,304,334],fe=[0,31,60,91,121,152,182,213,244,274,305,335];function me(e,t){return new de("unit out of range",`you specified ${t} (of type ${typeof t}) as a ${e}, which is invalid`)}function ge(e,t,n){const r=new Date(Date.UTC(e,t-1,n));100>e&&e>=0&&r.setUTCFullYear(r.getUTCFullYear()-1900);const s=r.getUTCDay();return 0===s?7:s}function ye(e,t,n){return n+(Ue(e)?fe:he)[t-1]}function ve(e,t){const n=Ue(e)?fe:he,r=n.findIndex((e=>t>e));return{month:r+1,day:t-n[r]}}function be(e,t){return(e-t+7)%7+1}function Ee(e,t=4,n=1){const{year:r,month:s,day:i}=e,o=ye(r,s,i),a=be(ge(r,s,i),n);let c,l=Math.floor((o-a+14-t)/7);return 1>l?(c=r-1,l=Ve(c,t,n)):l>Ve(r,t,n)?(c=r+1,l=1):c=r,{weekYear:c,weekNumber:l,weekday:a,...Ze(e)}}function _e(e,t=4,n=1){const{weekYear:r,weekNumber:s,weekday:i}=e,o=be(ge(r,1,t),n),a=He(r);let c,l=7*s+i-o-7+t;1>l?(c=r-1,l+=He(c)):l>a?(c=r+1,l-=He(r)):c=r;const{month:u,day:p}=ve(c,l);return{year:c,month:u,day:p,...Ze(e)}}function Ae(e){const{year:t,month:n,day:r}=e;return{year:t,ordinal:ye(t,n,r),...Ze(e)}}function Se(e){const{year:t,ordinal:n}=e,{month:r,day:s}=ve(t,n);return{year:t,month:r,day:s,...Ze(e)}}function Te(e,t){if(!ke(e.localWeekday)||!ke(e.localWeekNumber)||!ke(e.localWeekYear)){if(!ke(e.weekday)||!ke(e.weekNumber)||!ke(e.weekYear))throw new s("Cannot mix locale-based week fields with ISO-based week fields");return ke(e.localWeekday)||(e.weekday=e.localWeekday),ke(e.localWeekNumber)||(e.weekNumber=e.localWeekNumber),ke(e.localWeekYear)||(e.weekYear=e.localWeekYear),delete e.localWeekday,delete e.localWeekNumber,delete e.localWeekYear,{minDaysInFirstWeek:t.getMinDaysInFirstWeek(),startOfWeek:t.getStartOfWeek()}}return{minDaysInFirstWeek:4,startOfWeek:1}}function we(e){const t=Ie(e.year),n=Le(e.month,1,12),r=Le(e.day,1,Ge(e.year,e.month));return t?n?!r&&me("day",e.day):me("month",e.month):me("year",e.year)}function xe(e){const{hour:t,minute:n,second:r,millisecond:s}=e,i=Le(t,0,23)||24===t&&0===n&&0===r&&0===s,o=Le(n,0,59),a=Le(r,0,59),c=Le(s,0,999);return i?o?a?!c&&me("millisecond",s):me("second",r):me("minute",n):me("hour",t)}function ke(e){return void 0===e}function Ce(e){return"number"==typeof e}function Ie(e){return"number"==typeof e&&e%1==0}function Re(){try{return"undefined"!=typeof Intl&&!!Intl.RelativeTimeFormat}catch(e){return!1}}function Oe(){try{return"undefined"!=typeof Intl&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch(e){return!1}}function Ne(e,t,n){if(0!==e.length)return e.reduce(((e,r)=>{const s=[t(r),r];return e&&n(e[0],s[0])===e[0]?e:s}),null)[1]}function De(e,t){return{}.hasOwnProperty.call(e,t)}function Pe(e){if(null==e)return null;if("object"!=typeof e)throw new o("Week settings must be an object");if(!Le(e.firstDay,1,7)||!Le(e.minimalDays,1,7)||!Array.isArray(e.weekend)||e.weekend.some((e=>!Le(e,1,7))))throw new o("Invalid week settings");return{firstDay:e.firstDay,minimalDays:e.minimalDays,weekend:Array.from(e.weekend)}}function Le(e,t,n){return Ie(e)&&e>=t&&n>=e}function Me(e,t=2){let n;return n=0>e?"-"+(""+-e).padStart(t,"0"):(""+e).padStart(t,"0"),n}function Be(e){return ke(e)||null===e||""===e?void 0:parseInt(e,10)}function je(e){return ke(e)||null===e||""===e?void 0:parseFloat(e)}function Fe(e){if(!ke(e)&&null!==e&&""!==e)return Math.floor(1e3*parseFloat("0."+e))}function $e(e,t,n=!1){const r=10**t;return(n?Math.trunc:Math.round)(e*r)/r}function Ue(e){return e%4==0&&(e%100!=0||e%400==0)}function He(e){return Ue(e)?366:365}function Ge(e,t){const n=(r=t-1)-12*Math.floor(r/12)+1;var r;return 2===n?Ue(e+(t-n)/12)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][n-1]}function qe(e){let t=Date.UTC(e.year,e.month-1,e.day,e.hour,e.minute,e.second,e.millisecond);return 100>e.year&&e.year>=0&&(t=new Date(t),t.setUTCFullYear(e.year,e.month-1,e.day)),+t}function ze(e,t,n){return-be(ge(e,1,t),n)+t-1}function Ve(e,t=4,n=1){const r=ze(e,t,n),s=ze(e+1,t,n);return(He(e)-r+s)/7}function Ye(e){return e>99?e:e>pe.twoDigitCutoffYear?1900+e:2e3+e}function Ke(e,t,n,r=null){const s=new Date(e),i={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};r&&(i.timeZone=r);const o={timeZoneName:t,...i},a=new Intl.DateTimeFormat(n,o).formatToParts(s).find((e=>"timezonename"===e.type.toLowerCase()));return a?a.value:null}function Qe(e,t){let n=parseInt(e,10);Number.isNaN(n)&&(n=0);const r=parseInt(t,10)||0;return 60*n+(0>n||Object.is(n,-0)?-r:r)}function We(e){const t=+e;if("boolean"==typeof e||""===e||Number.isNaN(t))throw new o("Invalid unit value "+e);return t}function Je(e,t){const n={};for(const r in e)if(De(e,r)){const s=e[r];if(null==s)continue;n[t(r)]=We(s)}return n}function Xe(e,t){const n=Math.trunc(Math.abs(e/60)),r=Math.trunc(Math.abs(e%60)),s=0>e?"-":"+";switch(t){case"short":return`${s}${Me(n,2)}:${Me(r,2)}`;case"narrow":return`${s}${n}${r>0?":"+r:""}`;case"techie":return`${s}${Me(n,2)}${Me(r,2)}`;default:throw new RangeError(`Value format ${t} is out of range for property format`)}}function Ze(e){return function(e,t){return["hour","minute","second","millisecond"].reduce(((t,n)=>(t[n]=e[n],t)),{})}(e)}const et=["January","February","March","April","May","June","July","August","September","October","November","December"],tt=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],nt=["J","F","M","A","M","J","J","A","S","O","N","D"];function rt(e){switch(e){case"narrow":return[...nt];case"short":return[...tt];case"long":return[...et];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const st=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],it=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],ot=["M","T","W","T","F","S","S"];function at(e){switch(e){case"narrow":return[...ot];case"short":return[...it];case"long":return[...st];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const ct=["AM","PM"],lt=["Before Christ","Anno Domini"],ut=["BC","AD"],pt=["B","A"];function dt(e){switch(e){case"narrow":return[...pt];case"short":return[...ut];case"long":return[...lt];default:return null}}function ht(e,t){let n="";for(const r of e)n+=r.literal?r.val:t(r.val);return n}const ft={D:p,DD:d,DDD:f,DDDD:m,t:g,tt:y,ttt:v,tttt:b,T:E,TT:_,TTT:A,TTTT:S,f:T,ff:x,fff:I,ffff:O,F:w,FF:k,FFF:R,FFFF:N};class mt{static create(e,t={}){return new mt(e,t)}static parseFormat(e){let t=null,n="",r=!1;const s=[];for(let i=0;e.length>i;i++){const o=e.charAt(i);"'"===o?(n.length>0&&s.push({literal:r||/^\s+$/.test(n),val:n}),t=null,n="",r=!r):r||o===t?n+=o:(n.length>0&&s.push({literal:/^\s+$/.test(n),val:n}),n=o,t=o)}return n.length>0&&s.push({literal:r||/^\s+$/.test(n),val:n}),s}static macroTokenToFormatOpts(e){return ft[e]}constructor(e,t){this.opts=t,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,t){return null===this.systemLoc&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(e,{...this.opts,...t}).format()}dtFormatter(e,t={}){return this.loc.dtFormatter(e,{...this.opts,...t})}formatDateTime(e,t){return this.dtFormatter(e,t).format()}formatDateTimeParts(e,t){return this.dtFormatter(e,t).formatToParts()}formatInterval(e,t){return this.dtFormatter(e.start,t).dtf.formatRange(e.start.toJSDate(),e.end.toJSDate())}resolvedOptions(e,t){return this.dtFormatter(e,t).resolvedOptions()}num(e,t=0){if(this.opts.forceSimple)return Me(e,t);const n={...this.opts};return t>0&&(n.padTo=t),this.loc.numberFormatter(n).format(e)}formatDateTimeFromString(e,t){const n="en"===this.loc.listingMode(),r=this.loc.outputCalendar&&"gregory"!==this.loc.outputCalendar,s=(t,n)=>this.loc.extract(e,t,n),i=t=>e.isOffsetFixed&&0===e.offset&&t.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,t.format):"",o=(t,r)=>n?function(e,t){return rt(t)[e.month-1]}(e,t):s(r?{month:t}:{month:t,day:"numeric"},"month"),a=(t,r)=>n?function(e,t){return at(t)[e.weekday-1]}(e,t):s(r?{weekday:t}:{weekday:t,month:"long",day:"numeric"},"weekday"),c=t=>{const n=mt.macroTokenToFormatOpts(t);return n?this.formatWithSystemDefault(e,n):t},l=t=>n?function(e,t){return dt(t)[0>e.year?0:1]}(e,t):s({era:t},"era");return ht(mt.parseFormat(t),(t=>{switch(t){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12==0?12:e.hour%12);case"hh":return this.num(e.hour%12==0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return i({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return i({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return i({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return n?function(e){return ct[12>e.hour?0:1]}(e):s({hour:"numeric",hourCycle:"h12"},"dayperiod");case"d":return r?s({day:"numeric"},"day"):this.num(e.day);case"dd":return r?s({day:"2-digit"},"day"):this.num(e.day,2);case"c":case"E":return this.num(e.weekday);case"ccc":return a("short",!0);case"cccc":return a("long",!0);case"ccccc":return a("narrow",!0);case"EEE":return a("short",!1);case"EEEE":return a("long",!1);case"EEEEE":return a("narrow",!1);case"L":return r?s({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return r?s({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return o("short",!0);case"LLLL":return o("long",!0);case"LLLLL":return o("narrow",!0);case"M":return r?s({month:"numeric"},"month"):this.num(e.month);case"MM":return r?s({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return o("short",!1);case"MMMM":return o("long",!1);case"MMMMM":return o("narrow",!1);case"y":return r?s({year:"numeric"},"year"):this.num(e.year);case"yy":return r?s({year:"2-digit"},"year"):this.num((""+e.year).slice(-2),2);case"yyyy":return r?s({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return r?s({year:"numeric"},"year"):this.num(e.year,6);case"G":return l("short");case"GG":return l("long");case"GGGGG":return l("narrow");case"kk":return this.num((""+e.weekYear).slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"n":return this.num(e.localWeekNumber);case"nn":return this.num(e.localWeekNumber,2);case"ii":return this.num((""+e.localWeekYear).slice(-2),2);case"iiii":return this.num(e.localWeekYear,4);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return c(t)}}))}formatDurationFromString(e,t){const n=e=>{switch(e[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},r=mt.parseFormat(t),s=r.reduce(((e,{literal:t,val:n})=>t?e:e.concat(n)),[]),i=e.shiftTo(...s.map(n).filter((e=>e)));return ht(r,(e=>t=>{const r=n(t);return r?this.num(e.get(r),t.length):t})(i))}}const gt=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function yt(...e){const t=e.reduce(((e,t)=>e+t.source),"");return RegExp(`^${t}$`)}function vt(...e){return t=>e.reduce((([e,n,r],s)=>{const[i,o,a]=s(t,r);return[{...e,...i},o||n,a]}),[{},null,1]).slice(0,2)}function bt(e,...t){if(null==e)return[null,null];for(const[n,r]of t){const t=n.exec(e);if(t)return r(t)}return[null,null]}function Et(...e){return(t,n)=>{const r={};let s;for(s=0;e.length>s;s++)r[e[s]]=Be(t[n+s]);return[r,null,n+s]}}const _t=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,At=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,St=RegExp(`${At.source}(?:${_t.source}?(?:\\[(${gt.source})\\])?)?`),Tt=RegExp(`(?:T${St.source})?`),wt=Et("weekYear","weekNumber","weekDay"),xt=Et("year","ordinal"),kt=RegExp(`${At.source} ?(?:${_t.source}|(${gt.source}))?`),Ct=RegExp(`(?: ${kt.source})?`);function It(e,t,n){const r=e[t];return ke(r)?n:Be(r)}function Rt(e,t){return[{hours:It(e,t,0),minutes:It(e,t+1,0),seconds:It(e,t+2,0),milliseconds:Fe(e[t+3])},null,t+4]}function Ot(e,t){const n=!e[t]&&!e[t+1],r=Qe(e[t+1],e[t+2]);return[{},n?null:ee.instance(r),t+3]}function Nt(e,t){return[{},e[t]?F.create(e[t]):null,t+1]}const Dt=RegExp(`^T?${At.source}$`),Pt=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function Lt(e){const[t,n,r,s,i,o,a,c,l]=e,u="-"===t[0],p=c&&"-"===c[0],d=(e,t=!1)=>void 0!==e&&(t||e&&u)?-e:e;return[{years:d(je(n)),months:d(je(r)),weeks:d(je(s)),days:d(je(i)),hours:d(je(o)),minutes:d(je(a)),seconds:d(je(c),"-0"===c),milliseconds:d(Fe(l),p)}]}const Mt={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function Bt(e,t,n,r,s,i,o){const a={year:2===t.length?Ye(Be(t)):Be(t),month:tt.indexOf(n)+1,day:Be(r),hour:Be(s),minute:Be(i)};return o&&(a.second=Be(o)),e&&(a.weekday=e.length>3?st.indexOf(e)+1:it.indexOf(e)+1),a}const jt=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function Ft(e){const[,t,n,r,s,i,o,a,c,l,u,p]=e,d=Bt(t,s,r,n,i,o,a);let h;return h=c?Mt[c]:l?0:Qe(u,p),[d,new ee(h)]}const $t=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,Ut=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,Ht=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function Gt(e){const[,t,n,r,s,i,o,a]=e;return[Bt(t,s,r,n,i,o,a),ee.utcInstance]}function qt(e){const[,t,n,r,s,i,o,a]=e;return[Bt(t,a,n,r,s,i,o),ee.utcInstance]}const zt=yt(/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,Tt),Vt=yt(/(\d{4})-?W(\d\d)(?:-?(\d))?/,Tt),Yt=yt(/(\d{4})-?(\d{3})/,Tt),Kt=yt(St),Qt=vt((function(e,t){return[{year:It(e,t),month:It(e,t+1,1),day:It(e,t+2,1)},null,t+3]}),Rt,Ot,Nt),Wt=vt(wt,Rt,Ot,Nt),Jt=vt(xt,Rt,Ot,Nt),Xt=vt(Rt,Ot,Nt),Zt=vt(Rt),en=yt(/(\d{4})-(\d\d)-(\d\d)/,Ct),tn=yt(kt),nn=vt(Rt,Ot,Nt),rn="Invalid Duration",sn={weeks:{days:7,hours:168,minutes:10080,seconds:604800,milliseconds:6048e5},days:{hours:24,minutes:1440,seconds:86400,milliseconds:864e5},hours:{minutes:60,seconds:3600,milliseconds:36e5},minutes:{seconds:60,milliseconds:6e4},seconds:{milliseconds:1e3}},on={years:{quarters:4,months:12,weeks:52,days:365,hours:8760,minutes:525600,seconds:31536e3,milliseconds:31536e6},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:131040,seconds:7862400,milliseconds:78624e5},months:{weeks:4,days:30,hours:720,minutes:43200,seconds:2592e3,milliseconds:2592e6},...sn},an={years:{quarters:4,months:12,weeks:52.1775,days:365.2425,hours:8765.82,minutes:525949.2,seconds:525949.2*60,milliseconds:525949.2*1e3*60},quarters:{months:3,weeks:13.044375,days:91.310625,hours:2191.455,minutes:131487.3,seconds:525949.2*60/4,milliseconds:7889237999.999999},months:{weeks:4.3481250000000005,days:30.436875,hours:730.485,minutes:43829.1,seconds:2629746,milliseconds:2629746e3},...sn},cn=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],ln=cn.slice(0).reverse();function un(e,t,n=!1){const r={values:n?t.values:{...e.values,...t.values||{}},loc:e.loc.clone(t.loc),conversionAccuracy:t.conversionAccuracy||e.conversionAccuracy,matrix:t.matrix||e.matrix};return new hn(r)}function pn(e,t){var n;let r=null!=(n=t.milliseconds)?n:0;for(const n of ln.slice(1))t[n]&&(r+=t[n]*e[n].milliseconds);return r}function dn(e,t){const n=0>pn(e,t)?-1:1;cn.reduceRight(((r,s)=>{if(ke(t[s]))return r;if(r){const i=e[s][r],o=Math.floor(t[r]*n/i);t[s]+=o*n,t[r]-=o*i*n}return s}),null),cn.reduce(((n,r)=>{if(ke(t[r]))return n;if(n){const s=t[n]%1;t[n]-=s,t[r]+=s*e[n][r]}return r}),null)}class hn{constructor(e){const t="longterm"===e.conversionAccuracy||!1;let n=t?an:on;e.matrix&&(n=e.matrix),this.values=e.values,this.loc=e.loc||X.create(),this.conversionAccuracy=t?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=n,this.isLuxonDuration=!0}static fromMillis(e,t){return hn.fromObject({milliseconds:e},t)}static fromObject(e,t={}){if(null==e||"object"!=typeof e)throw new o("Duration.fromObject: argument expected to be an object, got "+(null===e?"null":typeof e));return new hn({values:Je(e,hn.normalizeUnit),loc:X.fromObject(t),conversionAccuracy:t.conversionAccuracy,matrix:t.matrix})}static fromDurationLike(e){if(Ce(e))return hn.fromMillis(e);if(hn.isDuration(e))return e;if("object"==typeof e)return hn.fromObject(e);throw new o(`Unknown duration argument ${e} of type ${typeof e}`)}static fromISO(e,t){const[n]=function(e){return bt(e,[Pt,Lt])}(e);return n?hn.fromObject(n,t):hn.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static fromISOTime(e,t){const[n]=function(e){return bt(e,[Dt,Zt])}(e);return n?hn.fromObject(n,t):hn.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static invalid(e,t=null){if(!e)throw new o("need to specify a reason the Duration is invalid");const n=e instanceof de?e:new de(e,t);if(pe.throwOnInvalid)throw new r(n);return new hn({invalid:n})}static normalizeUnit(e){const t={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e?e.toLowerCase():e];if(!t)throw new i(e);return t}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e,t={}){const n={...t,floor:!1!==t.round&&!1!==t.floor};return this.isValid?mt.create(this.loc,n).formatDurationFromString(this,e):rn}toHuman(e={}){if(!this.isValid)return rn;const t=cn.map((t=>{const n=this.values[t];return ke(n)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...e,unit:t.slice(0,-1)}).format(n)})).filter((e=>e));return this.loc.listFormatter({type:"conjunction",style:e.listStyle||"narrow",...e}).format(t)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return 0!==this.years&&(e+=this.years+"Y"),0===this.months&&0===this.quarters||(e+=this.months+3*this.quarters+"M"),0!==this.weeks&&(e+=this.weeks+"W"),0!==this.days&&(e+=this.days+"D"),0===this.hours&&0===this.minutes&&0===this.seconds&&0===this.milliseconds||(e+="T"),0!==this.hours&&(e+=this.hours+"H"),0!==this.minutes&&(e+=this.minutes+"M"),0===this.seconds&&0===this.milliseconds||(e+=$e(this.seconds+this.milliseconds/1e3,3)+"S"),"P"===e&&(e+="T0S"),e}toISOTime(e={}){if(!this.isValid)return null;const t=this.toMillis();return 0>t||t>=864e5?null:(e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e,includeOffset:!1},ir.fromMillis(t,{zone:"UTC"}).toISOTime(e))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?pn(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;const t=hn.fromDurationLike(e),n={};for(const e of cn)(De(t.values,e)||De(this.values,e))&&(n[e]=t.get(e)+this.get(e));return un(this,{values:n},!0)}minus(e){if(!this.isValid)return this;const t=hn.fromDurationLike(e);return this.plus(t.negate())}mapUnits(e){if(!this.isValid)return this;const t={};for(const n of Object.keys(this.values))t[n]=We(e(this.values[n],n));return un(this,{values:t},!0)}get(e){return this[hn.normalizeUnit(e)]}set(e){return this.isValid?un(this,{values:{...this.values,...Je(e,hn.normalizeUnit)}}):this}reconfigure({locale:e,numberingSystem:t,conversionAccuracy:n,matrix:r}={}){return un(this,{loc:this.loc.clone({locale:e,numberingSystem:t}),matrix:r,conversionAccuracy:n})}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;const e=this.toObject();return dn(this.matrix,e),un(this,{values:e},!0)}rescale(){return this.isValid?un(this,{values:function(e){const t={};for(const[n,r]of Object.entries(e))0!==r&&(t[n]=r);return t}(this.normalize().shiftToAll().toObject())},!0):this}shiftTo(...e){if(!this.isValid)return this;if(0===e.length)return this;e=e.map((e=>hn.normalizeUnit(e)));const t={},n={},r=this.toObject();let s;for(const i of cn)if(0>e.indexOf(i))Ce(r[i])&&(n[i]=r[i]);else{s=i;let e=0;for(const t in n)e+=this.matrix[t][i]*n[t],n[t]=0;Ce(r[i])&&(e+=r[i]);const o=Math.trunc(e);t[i]=o,n[i]=(1e3*e-1e3*o)/1e3}for(const e in n)0!==n[e]&&(t[s]+=e===s?n[e]:n[e]/this.matrix[s][e]);return dn(this.matrix,t),un(this,{values:t},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const e={};for(const t of Object.keys(this.values))e[t]=0===this.values[t]?0:-this.values[t];return un(this,{values:e},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return null===this.invalid}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid)return!1;if(!this.loc.equals(e.loc))return!1;for(const r of cn)if(n=e.values[r],!(void 0===(t=this.values[r])||0===t?void 0===n||0===n:t===n))return!1;var t,n;return!0}}const fn="Invalid Interval";class mn{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e,t=null){if(!e)throw new o("need to specify a reason the Interval is invalid");const r=e instanceof de?e:new de(e,t);if(pe.throwOnInvalid)throw new n(r);return new mn({invalid:r})}static fromDateTimes(e,t){const n=or(e),r=or(t),s=function(e,t){return e&&e.isValid?t&&t.isValid?e>t?mn.invalid("end before start",`The end of an interval must be after its start, but you had start=${e.toISO()} and end=${t.toISO()}`):null:mn.invalid("missing or invalid end"):mn.invalid("missing or invalid start")}(n,r);return null==s?new mn({start:n,end:r}):s}static after(e,t){const n=hn.fromDurationLike(t),r=or(e);return mn.fromDateTimes(r,r.plus(n))}static before(e,t){const n=hn.fromDurationLike(t),r=or(e);return mn.fromDateTimes(r.minus(n),r)}static fromISO(e,t){const[n,r]=(e||"").split("/",2);if(n&&r){let e,s,i,o;try{e=ir.fromISO(n,t),s=e.isValid}catch(r){s=!1}try{i=ir.fromISO(r,t),o=i.isValid}catch(r){o=!1}if(s&&o)return mn.fromDateTimes(e,i);if(s){const n=hn.fromISO(r,t);if(n.isValid)return mn.after(e,n)}else if(o){const e=hn.fromISO(n,t);if(e.isValid)return mn.before(i,e)}}return mn.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return null===this.invalidReason}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(e="milliseconds"){return this.isValid?this.toDuration(e).get(e):NaN}count(e="milliseconds",t){if(!this.isValid)return NaN;const n=this.start.startOf(e,t);let r;return r=null!=t&&t.useLocaleWeeks?this.end.reconfigure({locale:n.locale}):this.end,r=r.startOf(e,t),Math.floor(r.diff(n,e).get(e))+(r.valueOf()!==this.end.valueOf())}hasSame(e){return!!this.isValid&&(this.isEmpty()||this.e.minus(1).hasSame(this.s,e))}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return!!this.isValid&&this.s>e}isBefore(e){return!!this.isValid&&e>=this.e}contains(e){return!!this.isValid&&e>=this.s&&this.e>e}set({start:e,end:t}={}){return this.isValid?mn.fromDateTimes(e||this.s,t||this.e):this}splitAt(...e){if(!this.isValid)return[];const t=e.map(or).filter((e=>this.contains(e))).sort(((e,t)=>e.toMillis()-t.toMillis())),n=[];let{s:r}=this,s=0;for(;this.e>r;){const e=t[s]||this.e,i=+e>+this.e?this.e:e;n.push(mn.fromDateTimes(r,i)),r=i,s+=1}return n}splitBy(e){const t=hn.fromDurationLike(e);if(!this.isValid||!t.isValid||0===t.as("milliseconds"))return[];let n,{s:r}=this,s=1;const i=[];for(;this.e>r;){const e=this.start.plus(t.mapUnits((e=>e*s)));n=+e>+this.e?this.e:e,i.push(mn.fromDateTimes(r,n)),r=n,s+=1}return i}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&e.e>this.s}abutsStart(e){return!!this.isValid&&+this.e==+e.s}abutsEnd(e){return!!this.isValid&&+e.e==+this.s}engulfs(e){return!!this.isValid&&e.s>=this.s&&this.e>=e.e}equals(e){return!(!this.isValid||!e.isValid)&&this.s.equals(e.s)&&this.e.equals(e.e)}intersection(e){if(!this.isValid)return this;const t=this.s>e.s?this.s:e.s,n=e.e>this.e?this.e:e.e;return n>t?mn.fromDateTimes(t,n):null}union(e){return this.isValid?mn.fromDateTimes(e.s>this.s?this.s:e.s,this.e>e.e?this.e:e.e):this}static merge(e){const[t,n]=e.sort(((e,t)=>e.s-t.s)).reduce((([e,t],n)=>t?t.overlaps(n)||t.abutsStart(n)?[e,t.union(n)]:[e.concat([t]),n]:[e,n]),[[],null]);return n&&t.push(n),t}static xor(e){let t=null,n=0;const r=[],s=e.map((e=>[{time:e.s,type:"s"},{time:e.e,type:"e"}])),i=[].concat(...s).sort(((e,t)=>e.time-t.time));for(const e of i)n+="s"===e.type?1:-1,1===n?t=e.time:(t&&+t!=+e.time&&r.push(mn.fromDateTimes(t,e.time)),t=null);return mn.merge(r)}difference(...e){return mn.xor([this].concat(e)).map((e=>this.intersection(e))).filter((e=>e&&!e.isEmpty()))}toString(){return this.isValid?`[${this.s.toISO()} – ${this.e.toISO()})`:fn}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(e=p,t={}){return this.isValid?mt.create(this.s.loc.clone(t),e).formatInterval(this):fn}toISO(e){return this.isValid?`${this.s.toISO(e)}/${this.e.toISO(e)}`:fn}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:fn}toISOTime(e){return this.isValid?`${this.s.toISOTime(e)}/${this.e.toISOTime(e)}`:fn}toFormat(e,{separator:t=" – "}={}){return this.isValid?`${this.s.toFormat(e)}${t}${this.e.toFormat(e)}`:fn}toDuration(e,t){return this.isValid?this.e.diff(this.s,e,t):hn.invalid(this.invalidReason)}mapEndpoints(e){return mn.fromDateTimes(e(this.s),e(this.e))}}class gn{static hasDST(e=pe.defaultZone){const t=ir.now().setZone(e).set({month:12});return!e.isUniversal&&t.offset!==t.set({month:6}).offset}static isValidIANAZone(e){return F.isValidZone(e)}static normalizeZone(e){return ne(e,pe.defaultZone)}static getStartOfWeek({locale:e=null,locObj:t=null}={}){return(t||X.create(e)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:e=null,locObj:t=null}={}){return(t||X.create(e)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:e=null,locObj:t=null}={}){return(t||X.create(e)).getWeekendDays().slice()}static months(e="long",{locale:t=null,numberingSystem:n=null,locObj:r=null,outputCalendar:s="gregory"}={}){return(r||X.create(t,n,s)).months(e)}static monthsFormat(e="long",{locale:t=null,numberingSystem:n=null,locObj:r=null,outputCalendar:s="gregory"}={}){return(r||X.create(t,n,s)).months(e,!0)}static weekdays(e="long",{locale:t=null,numberingSystem:n=null,locObj:r=null}={}){return(r||X.create(t,n,null)).weekdays(e)}static weekdaysFormat(e="long",{locale:t=null,numberingSystem:n=null,locObj:r=null}={}){return(r||X.create(t,n,null)).weekdays(e,!0)}static meridiems({locale:e=null}={}){return X.create(e).meridiems()}static eras(e="short",{locale:t=null}={}){return X.create(t,null,"gregory").eras(e)}static features(){return{relative:Re(),localeWeek:Oe()}}}function yn(e,t){const n=e=>e.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),r=n(t)-n(e);return Math.floor(hn.fromMillis(r).as("days"))}const vn={arab:"[٠-٩]",arabext:"[۰-۹]",bali:"[᭐-᭙]",beng:"[০-৯]",deva:"[०-९]",fullwide:"[０-９]",gujr:"[૦-૯]",hanidec:"[〇|一|二|三|四|五|六|七|八|九]",khmr:"[០-៩]",knda:"[೦-೯]",laoo:"[໐-໙]",limb:"[᥆-᥏]",mlym:"[൦-൯]",mong:"[᠐-᠙]",mymr:"[၀-၉]",orya:"[୦-୯]",tamldec:"[௦-௯]",telu:"[౦-౯]",thai:"[๐-๙]",tibt:"[༠-༩]",latn:"\\d"},bn={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},En=vn.hanidec.replace(/[\[|\]]/g,"").split("");function _n({numberingSystem:e},t=""){return RegExp(`${vn[e||"latn"]}${t}`)}function An(e,t=e=>e){return{regex:e,deser:([e])=>t(function(e){let t=parseInt(e,10);if(isNaN(t)){t="";for(let n=0;e.length>n;n++){const r=e.charCodeAt(n);if(-1!==e[n].search(vn.hanidec))t+=En.indexOf(e[n]);else for(const e in bn){const[n,s]=bn[e];n>r||r>s||(t+=r-n)}}return parseInt(t,10)}return t}(e))}}const Sn="[  ]",Tn=RegExp(Sn,"g");function wn(e){return e.replace(/\./g,"\\.?").replace(Tn,Sn)}function xn(e){return e.replace(/\./g,"").replace(Tn," ").toLowerCase()}function kn(e,t){return null===e?null:{regex:RegExp(e.map(wn).join("|")),deser:([n])=>e.findIndex((e=>xn(n)===xn(e)))+t}}function Cn(e,t){return{regex:e,deser:([,e,t])=>Qe(e,t),groups:t}}function In(e){return{regex:e,deser:([e])=>e}}const Rn={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};let On=null;function Nn(e,t){return[].concat(...e.map((e=>function(e,t){if(e.literal)return e;const n=Pn(mt.macroTokenToFormatOpts(e.val),t);return null==n||n.includes(void 0)?e:n}(e,t))))}function Dn(e,t,n){const r=Nn(mt.parseFormat(n),e),i=r.map((t=>function(e,t){const n=_n(t),r=_n(t,"{2}"),s=_n(t,"{3}"),i=_n(t,"{4}"),o=_n(t,"{6}"),a=_n(t,"{1,2}"),c=_n(t,"{1,3}"),l=_n(t,"{1,6}"),u=_n(t,"{1,9}"),p=_n(t,"{2,4}"),d=_n(t,"{4,6}"),h=e=>{return{regex:RegExp((t=e.val,t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"))),deser:([e])=>e,literal:!0};var t},f=(f=>{if(e.literal)return h(f);switch(f.val){case"G":return kn(t.eras("short"),0);case"GG":return kn(t.eras("long"),0);case"y":return An(l);case"yy":case"kk":return An(p,Ye);case"yyyy":case"kkkk":return An(i);case"yyyyy":return An(d);case"yyyyyy":return An(o);case"M":case"L":case"d":case"H":case"h":case"m":case"q":case"s":case"W":return An(a);case"MM":case"LL":case"dd":case"HH":case"hh":case"mm":case"qq":case"ss":case"WW":return An(r);case"MMM":return kn(t.months("short",!0),1);case"MMMM":return kn(t.months("long",!0),1);case"LLL":return kn(t.months("short",!1),1);case"LLLL":return kn(t.months("long",!1),1);case"o":case"S":return An(c);case"ooo":case"SSS":return An(s);case"u":return In(u);case"uu":return In(a);case"uuu":case"E":case"c":return An(n);case"a":return kn(t.meridiems(),0);case"EEE":return kn(t.weekdays("short",!1),1);case"EEEE":return kn(t.weekdays("long",!1),1);case"ccc":return kn(t.weekdays("short",!0),1);case"cccc":return kn(t.weekdays("long",!0),1);case"Z":case"ZZ":return Cn(RegExp(`([+-]${a.source})(?::(${r.source}))?`),2);case"ZZZ":return Cn(RegExp(`([+-]${a.source})(${r.source})?`),2);case"z":return In(/[a-z_+-/]{1,256}?/i);case" ":return In(/[^\S\n\r]/);default:return h(f)}})(e)||{invalidReason:"missing Intl.DateTimeFormat.formatToParts support"};return f.token=e,f}(t,e))),o=i.find((e=>e.invalidReason));if(o)return{input:t,tokens:r,invalidReason:o.invalidReason};{const[e,n]=function(e){const t=e.map((e=>e.regex)).reduce(((e,t)=>`${e}(${t.source})`),"");return[`^${t}$`,e]}(i),o=RegExp(e,"i"),[a,c]=function(e,t,n){const r=e.match(t);if(r){const e={};let t=1;for(const s in n)if(De(n,s)){const i=n[s],o=i.groups?i.groups+1:1;!i.literal&&i.token&&(e[i.token.val[0]]=i.deser(r.slice(t,t+o))),t+=o}return[r,e]}return[r,{}]}(t,o,n),[l,u,p]=c?function(e){let t,n=null;ke(e.z)||(n=F.create(e.z)),ke(e.Z)||(n||(n=new ee(e.Z)),t=e.Z),ke(e.q)||(e.M=3*(e.q-1)+1),ke(e.h)||(12>e.h&&1===e.a?e.h+=12:12===e.h&&0===e.a&&(e.h=0)),0===e.G&&e.y&&(e.y=-e.y),ke(e.u)||(e.S=Fe(e.u));const r=Object.keys(e).reduce(((t,n)=>{const r=(e=>{switch(e){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}})(n);return r&&(t[r]=e[n]),t}),{});return[r,n,t]}(c):[null,null,void 0];if(De(c,"a")&&De(c,"H"))throw new s("Can't include meridiem when specifying 24-hour format");return{input:t,tokens:r,regex:o,rawMatches:a,matches:c,result:l,zone:u,specificOffset:p}}}function Pn(e,t){if(!e)return null;const n=mt.create(t,e).dtFormatter((On||(On=ir.fromMillis(1555555555555)),On)),r=n.formatToParts(),s=n.resolvedOptions();return r.map((t=>function(e,t,n){const{type:r,value:s}=e;if("literal"===r){const e=/^\s+$/.test(s);return{literal:!e,val:e?" ":s}}let i=r;"hour"===r&&(i=null!=t.hour12?t.hour12?"hour12":"hour24":null!=t.hourCycle?"h11"===t.hourCycle||"h12"===t.hourCycle?"hour12":"hour24":n.hour12?"hour12":"hour24");let o=Rn[i];if("object"==typeof o&&(o=o[t[r]]),o)return{literal:!1,val:o}}(t,e,s)))}const Ln="Invalid DateTime",Mn=864e13;function Bn(e){return new de("unsupported zone",`the zone "${e.name}" is not supported`)}function jn(e){return null===e.weekData&&(e.weekData=Ee(e.c)),e.weekData}function Fn(e){return null===e.localWeekData&&(e.localWeekData=Ee(e.c,e.loc.getMinDaysInFirstWeek(),e.loc.getStartOfWeek())),e.localWeekData}function $n(e,t){const n={ts:e.ts,zone:e.zone,c:e.c,o:e.o,loc:e.loc,invalid:e.invalid};return new ir({...n,...t,old:n})}function Un(e,t,n){let r=e-6e4*t;const s=n.offset(r);if(t===s)return[r,t];r-=6e4*(s-t);const i=n.offset(r);return s===i?[r,s]:[e-6e4*Math.min(s,i),Math.max(s,i)]}function Hn(e,t){const n=new Date(e+=6e4*t);return{year:n.getUTCFullYear(),month:n.getUTCMonth()+1,day:n.getUTCDate(),hour:n.getUTCHours(),minute:n.getUTCMinutes(),second:n.getUTCSeconds(),millisecond:n.getUTCMilliseconds()}}function Gn(e,t,n){return Un(qe(e),t,n)}function qn(e,t){const n=e.o,r=e.c.year+Math.trunc(t.years),s=e.c.month+Math.trunc(t.months)+3*Math.trunc(t.quarters),i={...e.c,year:r,month:s,day:Math.min(e.c.day,Ge(r,s))+Math.trunc(t.days)+7*Math.trunc(t.weeks)},o=hn.fromObject({years:t.years-Math.trunc(t.years),quarters:t.quarters-Math.trunc(t.quarters),months:t.months-Math.trunc(t.months),weeks:t.weeks-Math.trunc(t.weeks),days:t.days-Math.trunc(t.days),hours:t.hours,minutes:t.minutes,seconds:t.seconds,milliseconds:t.milliseconds}).as("milliseconds"),a=qe(i);let[c,l]=Un(a,n,e.zone);return 0!==o&&(c+=o,l=e.zone.offset(c)),{ts:c,o:l}}function zn(e,t,n,r,s,i){const{setZone:o,zone:a}=n;if(e&&0!==Object.keys(e).length||t){const r=t||a,s=ir.fromObject(e,{...n,zone:r,specificOffset:i});return o?s:s.setZone(a)}return ir.invalid(new de("unparsable",`the input "${s}" can't be parsed as ${r}`))}function Vn(e,t,n=!0){return e.isValid?mt.create(X.create("en-US"),{allowZ:n,forceSimple:!0}).formatDateTimeFromString(e,t):null}function Yn(e,t){const n=e.c.year>9999||0>e.c.year;let r="";return n&&e.c.year>=0&&(r+="+"),r+=Me(e.c.year,n?6:4),t?(r+="-",r+=Me(e.c.month),r+="-",r+=Me(e.c.day)):(r+=Me(e.c.month),r+=Me(e.c.day)),r}function Kn(e,t,n,r,s,i){let o=Me(e.c.hour);return t?(o+=":",o+=Me(e.c.minute),0===e.c.millisecond&&0===e.c.second&&n||(o+=":")):o+=Me(e.c.minute),0===e.c.millisecond&&0===e.c.second&&n||(o+=Me(e.c.second),0===e.c.millisecond&&r||(o+=".",o+=Me(e.c.millisecond,3))),s&&(e.isOffsetFixed&&0===e.offset&&!i?o+="Z":0>e.o?(o+="-",o+=Me(Math.trunc(-e.o/60)),o+=":",o+=Me(Math.trunc(-e.o%60))):(o+="+",o+=Me(Math.trunc(e.o/60)),o+=":",o+=Me(Math.trunc(e.o%60)))),i&&(o+="["+e.zone.ianaName+"]"),o}const Qn={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},Wn={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},Jn={ordinal:1,hour:0,minute:0,second:0,millisecond:0},Xn=["year","month","day","hour","minute","second","millisecond"],Zn=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],er=["year","ordinal","hour","minute","second","millisecond"];function tr(e){switch(e.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return function(e){const t={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[e.toLowerCase()];if(!t)throw new i(e);return t}(e)}}function nr(e,t){const n=ne(t.zone,pe.defaultZone),r=X.fromObject(t),s=pe.now();let i,o;if(ke(e.year))i=s;else{for(const t of Xn)ke(e[t])&&(e[t]=Qn[t]);const t=we(e)||xe(e);if(t)return ir.invalid(t);const r=n.offset(s);[i,o]=Gn(e,r,n)}return new ir({ts:i,zone:n,loc:r,o:o})}function rr(e,t,n){const r=!!ke(n.round)||n.round,s=(e,s)=>(e=$e(e,r||n.calendary?0:2,!0),t.loc.clone(n).relFormatter(n).format(e,s)),i=r=>n.calendary?t.hasSame(e,r)?0:t.startOf(r).diff(e.startOf(r),r).get(r):t.diff(e,r).get(r);if(n.unit)return s(i(n.unit),n.unit);for(const e of n.units){const t=i(e);if(Math.abs(t)>=1)return s(t,e)}return s(e>t?-0:0,n.units[n.units.length-1])}function sr(e){let t,n={};return e.length>0&&"object"==typeof e[e.length-1]?(n=e[e.length-1],t=Array.from(e).slice(0,e.length-1)):t=Array.from(e),[n,t]}class ir{constructor(e){const t=e.zone||pe.defaultZone;let n=e.invalid||(Number.isNaN(e.ts)?new de("invalid input"):null)||(t.isValid?null:Bn(t));this.ts=ke(e.ts)?pe.now():e.ts;let r=null,s=null;if(!n)if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(t))[r,s]=[e.old.c,e.old.o];else{const e=t.offset(this.ts);r=Hn(this.ts,e),n=Number.isNaN(r.year)?new de("invalid input"):null,r=n?null:r,s=n?null:e}this._zone=t,this.loc=e.loc||X.create(),this.invalid=n,this.weekData=null,this.localWeekData=null,this.c=r,this.o=s,this.isLuxonDateTime=!0}static now(){return new ir({})}static local(){const[e,t]=sr(arguments),[n,r,s,i,o,a,c]=t;return nr({year:n,month:r,day:s,hour:i,minute:o,second:a,millisecond:c},e)}static utc(){const[e,t]=sr(arguments),[n,r,s,i,o,a,c]=t;return e.zone=ee.utcInstance,nr({year:n,month:r,day:s,hour:i,minute:o,second:a,millisecond:c},e)}static fromJSDate(e,t={}){const n="[object Date]"==={}.toString.call(e)?e.valueOf():NaN;if(Number.isNaN(n))return ir.invalid("invalid input");const r=ne(t.zone,pe.defaultZone);return r.isValid?new ir({ts:n,zone:r,loc:X.fromObject(t)}):ir.invalid(Bn(r))}static fromMillis(e,t={}){if(Ce(e))return-Mn>e||e>Mn?ir.invalid("Timestamp out of range"):new ir({ts:e,zone:ne(t.zone,pe.defaultZone),loc:X.fromObject(t)});throw new o(`fromMillis requires a numerical input, but received a ${typeof e} with value ${e}`)}static fromSeconds(e,t={}){if(Ce(e))return new ir({ts:1e3*e,zone:ne(t.zone,pe.defaultZone),loc:X.fromObject(t)});throw new o("fromSeconds requires a numerical input")}static fromObject(e,t={}){e=e||{};const n=ne(t.zone,pe.defaultZone);if(!n.isValid)return ir.invalid(Bn(n));const r=X.fromObject(t),i=Je(e,tr),{minDaysInFirstWeek:o,startOfWeek:a}=Te(i,r),c=pe.now(),l=ke(t.specificOffset)?n.offset(c):t.specificOffset,u=!ke(i.ordinal),p=!ke(i.year),d=!ke(i.month)||!ke(i.day),h=p||d,f=i.weekYear||i.weekNumber;if((h||u)&&f)throw new s("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(d&&u)throw new s("Can't mix ordinal dates with month/day");const m=f||i.weekday&&!h;let g,y,v=Hn(c,l);m?(g=Zn,y=Wn,v=Ee(v,o,a)):u?(g=er,y=Jn,v=Ae(v)):(g=Xn,y=Qn);let b=!1;for(const e of g)ke(i[e])?i[e]=b?y[e]:v[e]:b=!0;const E=m?function(e,t=4,n=1){const r=Ie(e.weekYear),s=Le(e.weekNumber,1,Ve(e.weekYear,t,n)),i=Le(e.weekday,1,7);return r?s?!i&&me("weekday",e.weekday):me("week",e.weekNumber):me("weekYear",e.weekYear)}(i,o,a):u?function(e){const t=Ie(e.year),n=Le(e.ordinal,1,He(e.year));return t?!n&&me("ordinal",e.ordinal):me("year",e.year)}(i):we(i),_=E||xe(i);if(_)return ir.invalid(_);const A=m?_e(i,o,a):u?Se(i):i,[S,T]=Gn(A,l,n),w=new ir({ts:S,zone:n,o:T,loc:r});return i.weekday&&h&&e.weekday!==w.weekday?ir.invalid("mismatched weekday",`you can't specify both a weekday of ${i.weekday} and a date of ${w.toISO()}`):w}static fromISO(e,t={}){const[n,r]=function(e){return bt(e,[zt,Qt],[Vt,Wt],[Yt,Jt],[Kt,Xt])}(e);return zn(n,r,t,"ISO 8601",e)}static fromRFC2822(e,t={}){const[n,r]=function(e){return bt(function(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}(e),[jt,Ft])}(e);return zn(n,r,t,"RFC 2822",e)}static fromHTTP(e,t={}){const[n,r]=function(e){return bt(e,[$t,Gt],[Ut,Gt],[Ht,qt])}(e);return zn(n,r,t,"HTTP",t)}static fromFormat(e,t,n={}){if(ke(e)||ke(t))throw new o("fromFormat requires an input string and a format");const{locale:r=null,numberingSystem:s=null}=n,i=X.fromOpts({locale:r,numberingSystem:s,defaultToEN:!0}),[a,c,l,u]=function(e,t,n){const{result:r,zone:s,specificOffset:i,invalidReason:o}=Dn(e,t,n);return[r,s,i,o]}(i,e,t);return u?ir.invalid(u):zn(a,c,n,"format "+t,e,l)}static fromString(e,t,n={}){return ir.fromFormat(e,t,n)}static fromSQL(e,t={}){const[n,r]=function(e){return bt(e,[en,Qt],[tn,nn])}(e);return zn(n,r,t,"SQL",e)}static invalid(e,n=null){if(!e)throw new o("need to specify a reason the DateTime is invalid");const r=e instanceof de?e:new de(e,n);if(pe.throwOnInvalid)throw new t(r);return new ir({invalid:r})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}static parseFormatForOpts(e,t={}){const n=Pn(e,X.fromObject(t));return n?n.map((e=>e?e.val:null)).join(""):null}static expandFormat(e,t={}){return Nn(mt.parseFormat(e),X.fromObject(t)).map((e=>e.val)).join("")}get(e){return this[e]}get isValid(){return null===this.invalid}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?jn(this).weekYear:NaN}get weekNumber(){return this.isValid?jn(this).weekNumber:NaN}get weekday(){return this.isValid?jn(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?Fn(this).weekday:NaN}get localWeekNumber(){return this.isValid?Fn(this).weekNumber:NaN}get localWeekYear(){return this.isValid?Fn(this).weekYear:NaN}get ordinal(){return this.isValid?Ae(this.c).ordinal:NaN}get monthShort(){return this.isValid?gn.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?gn.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?gn.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?gn.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return!this.isOffsetFixed&&(this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset)}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const e=864e5,t=6e4,n=qe(this.c),r=this.zone.offset(n-e),s=this.zone.offset(n+e),i=this.zone.offset(n-r*t),o=this.zone.offset(n-s*t);if(i===o)return[this];const a=n-i*t,c=n-o*t,l=Hn(a,i),u=Hn(c,o);return l.hour===u.hour&&l.minute===u.minute&&l.second===u.second&&l.millisecond===u.millisecond?[$n(this,{ts:a}),$n(this,{ts:c})]:[this]}get isInLeapYear(){return Ue(this.year)}get daysInMonth(){return Ge(this.year,this.month)}get daysInYear(){return this.isValid?He(this.year):NaN}get weeksInWeekYear(){return this.isValid?Ve(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?Ve(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(e={}){const{locale:t,numberingSystem:n,calendar:r}=mt.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:t,numberingSystem:n,outputCalendar:r}}toUTC(e=0,t={}){return this.setZone(ee.instance(e),t)}toLocal(){return this.setZone(pe.defaultZone)}setZone(e,{keepLocalTime:t=!1,keepCalendarTime:n=!1}={}){if((e=ne(e,pe.defaultZone)).equals(this.zone))return this;if(e.isValid){let r=this.ts;if(t||n){const t=e.offset(this.ts),n=this.toObject();[r]=Gn(n,t,e)}return $n(this,{ts:r,zone:e})}return ir.invalid(Bn(e))}reconfigure({locale:e,numberingSystem:t,outputCalendar:n}={}){return $n(this,{loc:this.loc.clone({locale:e,numberingSystem:t,outputCalendar:n})})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;const t=Je(e,tr),{minDaysInFirstWeek:n,startOfWeek:r}=Te(t,this.loc),i=!ke(t.weekYear)||!ke(t.weekNumber)||!ke(t.weekday),o=!ke(t.ordinal),a=!ke(t.year),c=!ke(t.month)||!ke(t.day);if((a||c||o)&&(t.weekYear||t.weekNumber))throw new s("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(c&&o)throw new s("Can't mix ordinal dates with month/day");let l;i?l=_e({...Ee(this.c,n,r),...t},n,r):ke(t.ordinal)?(l={...this.toObject(),...t},ke(t.day)&&(l.day=Math.min(Ge(l.year,l.month),l.day))):l=Se({...Ae(this.c),...t});const[u,p]=Gn(l,this.o,this.zone);return $n(this,{ts:u,o:p})}plus(e){return this.isValid?$n(this,qn(this,hn.fromDurationLike(e))):this}minus(e){return this.isValid?$n(this,qn(this,hn.fromDurationLike(e).negate())):this}startOf(e,{useLocaleWeeks:t=!1}={}){if(!this.isValid)return this;const n={},r=hn.normalizeUnit(e);switch(r){case"years":n.month=1;case"quarters":case"months":n.day=1;case"weeks":case"days":n.hour=0;case"hours":n.minute=0;case"minutes":n.second=0;case"seconds":n.millisecond=0}if("weeks"===r)if(t){const e=this.loc.getStartOfWeek(),{weekday:t}=this;e>t&&(n.weekNumber=this.weekNumber-1),n.weekday=e}else n.weekday=1;return"quarters"===r&&(n.month=3*(Math.ceil(this.month/3)-1)+1),this.set(n)}endOf(e,t){return this.isValid?this.plus({[e]:1}).startOf(e,t).minus(1):this}toFormat(e,t={}){return this.isValid?mt.create(this.loc.redefaultToEN(t)).formatDateTimeFromString(this,e):Ln}toLocaleString(e=p,t={}){return this.isValid?mt.create(this.loc.clone(t),e).formatDateTime(this):Ln}toLocaleParts(e={}){return this.isValid?mt.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO({format:e="extended",suppressSeconds:t=!1,suppressMilliseconds:n=!1,includeOffset:r=!0,extendedZone:s=!1}={}){if(!this.isValid)return null;const i="extended"===e;let o=Yn(this,i);return o+="T",o+=Kn(this,i,t,n,r,s),o}toISODate({format:e="extended"}={}){return this.isValid?Yn(this,"extended"===e):null}toISOWeekDate(){return Vn(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:e=!1,suppressSeconds:t=!1,includeOffset:n=!0,includePrefix:r=!1,extendedZone:s=!1,format:i="extended"}={}){return this.isValid?(r?"T":"")+Kn(this,"extended"===i,t,e,n,s):null}toRFC2822(){return Vn(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return Vn(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?Yn(this,!0):null}toSQLTime({includeOffset:e=!0,includeZone:t=!1,includeOffsetSpace:n=!0}={}){let r="HH:mm:ss.SSS";return(t||e)&&(n&&(r+=" "),t?r+="z":e&&(r+="ZZ")),Vn(this,r,!0)}toSQL(e={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(e)}`:null}toString(){return this.isValid?this.toISO():Ln}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(e={}){if(!this.isValid)return{};const t={...this.c};return e.includeConfig&&(t.outputCalendar=this.outputCalendar,t.numberingSystem=this.loc.numberingSystem,t.locale=this.loc.locale),t}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e,t="milliseconds",n={}){if(!this.isValid||!e.isValid)return hn.invalid("created by diffing an invalid DateTime");const r={locale:this.locale,numberingSystem:this.numberingSystem,...n},s=(a=t,Array.isArray(a)?a:[a]).map(hn.normalizeUnit),i=e.valueOf()>this.valueOf(),o=function(e,t,n,r){let[s,i,o,a]=function(e,t,n){const r=[["years",(e,t)=>t.year-e.year],["quarters",(e,t)=>t.quarter-e.quarter+4*(t.year-e.year)],["months",(e,t)=>t.month-e.month+12*(t.year-e.year)],["weeks",(e,t)=>{const n=yn(e,t);return(n-n%7)/7}],["days",yn]],s={},i=e;let o,a;for(const[c,l]of r)0>n.indexOf(c)||(o=c,s[c]=l(e,t),a=i.plus(s),a>t?(s[c]--,(e=i.plus(s))>t&&(a=e,s[c]--,e=i.plus(s))):e=a);return[e,s,a,o]}(e,t,n);const c=t-s,l=n.filter((e=>["hours","minutes","seconds","milliseconds"].indexOf(e)>=0));0===l.length&&(t>o&&(o=s.plus({[a]:1})),o!==s&&(i[a]=(i[a]||0)+c/(o-s)));const u=hn.fromObject(i,r);return l.length>0?hn.fromMillis(c,r).shiftTo(...l).plus(u):u}(i?this:e,i?e:this,s,r);var a;return i?o.negate():o}diffNow(e="milliseconds",t={}){return this.diff(ir.now(),e,t)}until(e){return this.isValid?mn.fromDateTimes(this,e):this}hasSame(e,t,n){if(!this.isValid)return!1;const r=e.valueOf(),s=this.setZone(e.zone,{keepLocalTime:!0});return s.startOf(t,n)<=r&&r<=s.endOf(t,n)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(e={}){if(!this.isValid)return null;const t=e.base||ir.fromObject({},{zone:this.zone}),n=e.padding?t>this?-e.padding:e.padding:0;let r=["years","months","days","hours","minutes","seconds"],s=e.unit;return Array.isArray(e.unit)&&(r=e.unit,s=void 0),rr(t,this.plus(n),{...e,numeric:"always",units:r,unit:s})}toRelativeCalendar(e={}){return this.isValid?rr(e.base||ir.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...e){if(!e.every(ir.isDateTime))throw new o("min requires all arguments be DateTimes");return Ne(e,(e=>e.valueOf()),Math.min)}static max(...e){if(!e.every(ir.isDateTime))throw new o("max requires all arguments be DateTimes");return Ne(e,(e=>e.valueOf()),Math.max)}static fromFormatExplain(e,t,n={}){const{locale:r=null,numberingSystem:s=null}=n;return Dn(X.fromOpts({locale:r,numberingSystem:s,defaultToEN:!0}),e,t)}static fromStringExplain(e,t,n={}){return ir.fromFormatExplain(e,t,n)}static get DATE_SHORT(){return p}static get DATE_MED(){return d}static get DATE_MED_WITH_WEEKDAY(){return h}static get DATE_FULL(){return f}static get DATE_HUGE(){return m}static get TIME_SIMPLE(){return g}static get TIME_WITH_SECONDS(){return y}static get TIME_WITH_SHORT_OFFSET(){return v}static get TIME_WITH_LONG_OFFSET(){return b}static get TIME_24_SIMPLE(){return E}static get TIME_24_WITH_SECONDS(){return _}static get TIME_24_WITH_SHORT_OFFSET(){return A}static get TIME_24_WITH_LONG_OFFSET(){return S}static get DATETIME_SHORT(){return T}static get DATETIME_SHORT_WITH_SECONDS(){return w}static get DATETIME_MED(){return x}static get DATETIME_MED_WITH_SECONDS(){return k}static get DATETIME_MED_WITH_WEEKDAY(){return C}static get DATETIME_FULL(){return I}static get DATETIME_FULL_WITH_SECONDS(){return R}static get DATETIME_HUGE(){return O}static get DATETIME_HUGE_WITH_SECONDS(){return N}}function or(e){if(ir.isDateTime(e))return e;if(e&&e.valueOf&&Ce(e.valueOf()))return ir.fromJSDate(e);if(e&&"object"==typeof e)return ir.fromObject(e);throw new o(`Unknown datetime argument: ${e}, of type ${typeof e}`)}return QK.DateTime=ir,QK.Duration=hn,QK.FixedOffsetZone=ee,QK.IANAZone=F,QK.Info=gn,QK.Interval=mn,QK.InvalidZone=te,QK.Settings=pe,QK.SystemZone=L,QK.VERSION="3.4.4",QK.Zone=D,QK}function JK(){if(VK)return zK;VK=1;var e=function(){if(qK)return GK;qK=1;var e=function(){if(jK)return BK;jK=1;var e=WK();function t(n,r){var s={zone:r};if(n?n instanceof t?this._date=n._date:n instanceof Date?this._date=e.DateTime.fromJSDate(n,s):"number"==typeof n?this._date=e.DateTime.fromMillis(n,s):"string"==typeof n&&(this._date=e.DateTime.fromISO(n,s),this._date.isValid||(this._date=e.DateTime.fromRFC2822(n,s)),this._date.isValid||(this._date=e.DateTime.fromSQL(n,s)),this._date.isValid||(this._date=e.DateTime.fromFormat(n,"EEE, d MMM yyyy HH:mm:ss",s))):this._date=e.DateTime.local(),!this._date||!this._date.isValid)throw Error("CronDate: unhandled timestamp: "+JSON.stringify(n));r&&r!==this._date.zoneName&&(this._date=this._date.setZone(r))}return t.prototype.addYear=function(){this._date=this._date.plus({years:1})},t.prototype.addMonth=function(){this._date=this._date.plus({months:1}).startOf("month")},t.prototype.addDay=function(){this._date=this._date.plus({days:1}).startOf("day")},t.prototype.addHour=function(){var e=this._date;this._date=this._date.plus({hours:1}).startOf("hour"),this._date>e||(this._date=this._date.plus({hours:1}))},t.prototype.addMinute=function(){var e=this._date;this._date=this._date.plus({minutes:1}).startOf("minute"),e>this._date&&(this._date=this._date.plus({hours:1}))},t.prototype.addSecond=function(){var e=this._date;this._date=this._date.plus({seconds:1}).startOf("second"),e>this._date&&(this._date=this._date.plus({hours:1}))},t.prototype.subtractYear=function(){this._date=this._date.minus({years:1})},t.prototype.subtractMonth=function(){this._date=this._date.minus({months:1}).endOf("month").startOf("second")},t.prototype.subtractDay=function(){this._date=this._date.minus({days:1}).endOf("day").startOf("second")},t.prototype.subtractHour=function(){var e=this._date;this._date=this._date.minus({hours:1}).endOf("hour").startOf("second"),e>this._date||(this._date=this._date.minus({hours:1}))},t.prototype.subtractMinute=function(){var e=this._date;this._date=this._date.minus({minutes:1}).endOf("minute").startOf("second"),this._date>e&&(this._date=this._date.minus({hours:1}))},t.prototype.subtractSecond=function(){var e=this._date;this._date=this._date.minus({seconds:1}).startOf("second"),this._date>e&&(this._date=this._date.minus({hours:1}))},t.prototype.getDate=function(){return this._date.day},t.prototype.getFullYear=function(){return this._date.year},t.prototype.getDay=function(){var e=this._date.weekday;return 7==e?0:e},t.prototype.getMonth=function(){return this._date.month-1},t.prototype.getHours=function(){return this._date.hour},t.prototype.getMinutes=function(){return this._date.minute},t.prototype.getSeconds=function(){return this._date.second},t.prototype.getMilliseconds=function(){return this._date.millisecond},t.prototype.getTime=function(){return this._date.valueOf()},t.prototype.getUTCDate=function(){return this._getUTC().day},t.prototype.getUTCFullYear=function(){return this._getUTC().year},t.prototype.getUTCDay=function(){var e=this._getUTC().weekday;return 7==e?0:e},t.prototype.getUTCMonth=function(){return this._getUTC().month-1},t.prototype.getUTCHours=function(){return this._getUTC().hour},t.prototype.getUTCMinutes=function(){return this._getUTC().minute},t.prototype.getUTCSeconds=function(){return this._getUTC().second},t.prototype.toISOString=function(){return this._date.toUTC().toISO()},t.prototype.toJSON=function(){return this._date.toJSON()},t.prototype.setDate=function(e){this._date=this._date.set({day:e})},t.prototype.setFullYear=function(e){this._date=this._date.set({year:e})},t.prototype.setDay=function(e){this._date=this._date.set({weekday:e})},t.prototype.setMonth=function(e){this._date=this._date.set({month:e+1})},t.prototype.setHours=function(e){this._date=this._date.set({hour:e})},t.prototype.setMinutes=function(e){this._date=this._date.set({minute:e})},t.prototype.setSeconds=function(e){this._date=this._date.set({second:e})},t.prototype.setMilliseconds=function(e){this._date=this._date.set({millisecond:e})},t.prototype._getUTC=function(){return this._date.toUTC()},t.prototype.toString=function(){return""+this.toDate()},t.prototype.toDate=function(){return this._date.toJSDate()},t.prototype.isLastDayOfMonth=function(){var e=this._date.plus({days:1}).startOf("day");return this._date.month!==e.month},t.prototype.isLastWeekdayOfMonth=function(){var e=this._date.plus({days:7}).startOf("day");return this._date.month!==e.month},BK=t}(),t=function(){if(HK)return UK;HK=1;var e=function(){if($K)return FK;function e(e){return{start:e,count:1}}function t(e,t){e.end=t,e.step=t-e.start,e.count=2}function n(t,n,r){n&&(2===n.count?(t.push(e(n.start)),t.push(e(n.end))):t.push(n)),r&&t.push(r)}return $K=1,FK=function(r){for(var s=[],i=void 0,o=0;r.length>o;o++){var a=r[o];"number"!=typeof a?(n(s,i,e(a)),i=void 0):i?1===i.count?t(i,a):i.step===a-i.end?(i.count++,i.end=a):2===i.count?(s.push(e(i.start)),t(i=e(i.end),a)):(n(s,i),i=e(a)):i=e(a)}return n(s,i),s},FK}();return UK=function(t,n,r){var s=e(t);if(1===s.length){var i=s[0];if(1===(u=i.step)&&i.start===n&&i.end===r)return"*";if(1!==u&&i.start===n&&i.end===r-u+1)return"*/"+u}for(var o=[],a=0,c=s.length;c>a;++a){var l=s[a];if(1!==l.count){var u=l.step;1!==l.step?l.step*(0==l.start?l.count-1:l.count)>l.end?o=o.concat(Array.from({length:l.end-l.start+1}).map((function(e,t){var n=l.start+t;return(n-l.start)%l.step==0?n:null})).filter((function(e){return null!=e}))):o.push(l.end===r-l.step+1?l.start+"/"+l.step:l.start+"-"+l.end+"/"+l.step):o.push(l.start+"-"+l.end)}else o.push(l.start)}return o.join(",")},UK}();function n(t,r){this._options=r,this._utc=r.utc||!1,this._tz=this._utc?"UTC":r.tz,this._currentDate=new e(r.currentDate,this._tz),this._startDate=r.startDate?new e(r.startDate,this._tz):null,this._endDate=r.endDate?new e(r.endDate,this._tz):null,this._isIterator=r.iterator||!1,this._hasIterated=!1,this._nthDayOfWeek=r.nthDayOfWeek||0,this.fields=n._freezeFields(t)}return n.map=["second","minute","hour","dayOfMonth","month","dayOfWeek"],n.predefined={"@yearly":"0 0 1 1 *","@monthly":"0 0 1 * *","@weekly":"0 0 * * 0","@daily":"0 0 * * *","@hourly":"0 * * * *"},n.constraints=[{min:0,max:59,chars:[]},{min:0,max:59,chars:[]},{min:0,max:23,chars:[]},{min:1,max:31,chars:["L"]},{min:1,max:12,chars:[]},{min:0,max:7,chars:["L"]}],n.daysInMonth=[31,29,31,30,31,30,31,31,30,31,30,31],n.aliases={month:{jan:1,feb:2,mar:3,apr:4,may:5,jun:6,jul:7,aug:8,sep:9,oct:10,nov:11,dec:12},dayOfWeek:{sun:0,mon:1,tue:2,wed:3,thu:4,fri:5,sat:6}},n.parseDefaults=["0","*","*","*","*","*"],n.standardValidCharacters=/^[,*\d/-]+$/,n.dayOfWeekValidCharacters=/^[?,*\dL#/-]+$/,n.validCharacters={second:n.standardValidCharacters,minute:n.standardValidCharacters,hour:n.standardValidCharacters,dayOfMonth:n.dayOfMonthValidCharacters=/^[?,*\dL/-]+$/,month:n.standardValidCharacters,dayOfWeek:n.dayOfWeekValidCharacters},n._isValidConstraintChar=function(e,t){return"string"==typeof t&&e.chars.some((function(e){return t.indexOf(e)>-1}))},n._parseField=function(e,t,r){switch(e){case"month":case"dayOfWeek":var s=n.aliases[e];t=t.replace(/[a-z]{3}/gi,(function(e){if(e=e.toLowerCase(),void 0!==s[e])return s[e];throw Error('Validation error, cannot resolve alias "'+e+'"')}))}if(!n.validCharacters[e].test(t))throw Error("Invalid characters, got value: "+t);function i(e){var t=e.split("/");if(t.length>2)throw Error("Invalid repeat: "+e);return t.length>1?(t[0]==+t[0]&&(t=[t[0]+"-"+r.max,t[1]]),o(t[0],t[t.length-1])):o(e,1)}function o(t,n){var s=[],i=t.split("-");if(i.length>1){if(2>i.length)return+t;if(!i[0].length){if(!i[1].length)throw Error("Invalid range: "+t);return+t}var o=+i[0],a=+i[1];if(Number.isNaN(o)||Number.isNaN(a)||r.min>o||a>r.max)throw Error("Constraint error, got range "+o+"-"+a+" expected range "+r.min+"-"+r.max);if(o>a)throw Error("Invalid range: "+t);var c=+n;if(Number.isNaN(c)||0>=c)throw Error("Constraint error, cannot repeat at every "+c+" time.");"dayOfWeek"===e&&a%7==0&&s.push(0);for(var l=o,u=a;u>=l;l++)-1===s.indexOf(l)&&c>0&&c%n==0?(c=1,s.push(l)):c++;return s}return Number.isNaN(+t)?t:+t}return-1!==t.indexOf("*")?t=t.replace(/\*/g,r.min+"-"+r.max):-1!==t.indexOf("?")&&(t=t.replace(/\?/g,r.min+"-"+r.max)),function(t){var s=[];function o(t){if(t instanceof Array)for(var i=0,o=t.length;o>i;i++){var a=t[i];if(n._isValidConstraintChar(r,a))s.push(a);else{if("number"!=typeof a||Number.isNaN(a)||r.min>a||a>r.max)throw Error("Constraint error, got value "+a+" expected range "+r.min+"-"+r.max);s.push(a)}}else{if(n._isValidConstraintChar(r,t))return void s.push(t);var c=+t;if(Number.isNaN(c)||r.min>c||c>r.max)throw Error("Constraint error, got value "+t+" expected range "+r.min+"-"+r.max);"dayOfWeek"===e&&(c%=7),s.push(c)}}var a=t.split(",");if(!a.every((function(e){return e.length>0})))throw Error("Invalid list value format");if(a.length>1)for(var c=0,l=a.length;l>c;c++)o(i(a[c]));else o(i(t));return s.sort(n._sortCompareFn),s}(t)},n._sortCompareFn=function(e,t){var n="number"==typeof e,r="number"==typeof t;return n&&r?e-t:!n&&r?1:n&&!r?-1:e.localeCompare(t)},n._handleMaxDaysInMonth=function(e){if(1===e.month.length){var t=n.daysInMonth[e.month[0]-1];if(e.dayOfMonth[0]>t)throw Error("Invalid explicit day of month definition");return e.dayOfMonth.filter((function(e){return"L"===e||t>=e})).sort(n._sortCompareFn)}},n._freezeFields=function(e){for(var t=0,r=n.map.length;r>t;++t){var s=n.map[t];e[s]=Object.freeze(e[s])}return Object.freeze(e)},n.prototype._applyTimezoneShift=function(e,t,n){if("Month"===n||"Day"===n){var r=e.getTime();e[t+n](),r===e.getTime()&&(0===e.getMinutes()&&0===e.getSeconds()?e.addHour():59===e.getMinutes()&&59===e.getSeconds()&&e.subtractHour())}else{var s=e.getHours();e[t+n]();var i=e.getHours(),o=i-s;2===o?24!==this.fields.hour.length&&(this._dstStart=i):0===o&&0===e.getMinutes()&&0===e.getSeconds()&&24!==this.fields.hour.length&&(this._dstEnd=i)}},n.prototype._findSchedule=function(t){function r(e,t){for(var n=0,r=t.length;r>n;n++)if(t[n]>=e)return t[n]===e;return t[0]===e}function s(e,t){if(6>t){if(8>e.getDate()&&1===t)return!0;var n=e.getDate()%7?1:0,r=e.getDate()-e.getDate()%7;return Math.floor(r/7)+n===t}return!1}function i(e){return e.length>0&&e.some((function(e){return"string"==typeof e&&e.indexOf("L")>=0}))}for(var o=(t=t||!1)?"subtract":"add",a=new e(this._currentDate,this._tz),c=this._startDate,l=this._endDate,u=a.getTime(),p=0;1e4>p;){if(p++,t){if(c&&0>a.getTime()-c.getTime())throw Error("Out of the timespan range")}else if(l&&0>l.getTime()-a.getTime())throw Error("Out of the timespan range");var d=r(a.getDate(),this.fields.dayOfMonth);i(this.fields.dayOfMonth)&&(d=d||a.isLastDayOfMonth());var h=r(a.getDay(),this.fields.dayOfWeek);i(this.fields.dayOfWeek)&&(h=h||this.fields.dayOfWeek.some((function(e){if(!i([e]))return!1;var t=Number.parseInt(e[0])%7;if(Number.isNaN(t))throw Error("Invalid last weekday of the month expression: "+e);return a.getDay()===t&&a.isLastWeekdayOfMonth()})));var f=this.fields.dayOfMonth.length>=n.daysInMonth[a.getMonth()],m=this.fields.dayOfWeek.length===n.constraints[5].max-n.constraints[5].min+1,g=a.getHours();if(d||h&&!m)if(f||!m||d)if(!f||m||h)if(0>=this._nthDayOfWeek||s(a,this._nthDayOfWeek))if(r(a.getMonth()+1,this.fields.month)){if(r(g,this.fields.hour)){if(this._dstEnd===g&&!t){this._dstEnd=null,this._applyTimezoneShift(a,"add","Hour");continue}}else{if(this._dstStart!==g){this._dstStart=null,this._applyTimezoneShift(a,o,"Hour");continue}if(!r(g-1,this.fields.hour)){a[o+"Hour"]();continue}}if(r(a.getMinutes(),this.fields.minute))if(r(a.getSeconds(),this.fields.second)){if(u!==a.getTime())break;"add"===o||0===a.getMilliseconds()?this._applyTimezoneShift(a,o,"Second"):a.setMilliseconds(0)}else this._applyTimezoneShift(a,o,"Second");else this._applyTimezoneShift(a,o,"Minute")}else this._applyTimezoneShift(a,o,"Month");else this._applyTimezoneShift(a,o,"Day");else this._applyTimezoneShift(a,o,"Day");else this._applyTimezoneShift(a,o,"Day");else this._applyTimezoneShift(a,o,"Day")}if(p>=1e4)throw Error("Invalid expression, loop limit exceeded");return this._currentDate=new e(a,this._tz),this._hasIterated=!0,a},n.prototype.next=function(){var e=this._findSchedule();return this._isIterator?{value:e,done:!this.hasNext()}:e},n.prototype.prev=function(){var e=this._findSchedule(!0);return this._isIterator?{value:e,done:!this.hasPrev()}:e},n.prototype.hasNext=function(){var e=this._currentDate,t=this._hasIterated;try{return this._findSchedule(),!0}catch(e){return!1}finally{this._currentDate=e,this._hasIterated=t}},n.prototype.hasPrev=function(){var e=this._currentDate,t=this._hasIterated;try{return this._findSchedule(!0),!0}catch(e){return!1}finally{this._currentDate=e,this._hasIterated=t}},n.prototype.iterate=function(e,t){var n=[];if(0>e)for(r=0,s=e;r>s;r--)try{i=this.prev(),n.push(i),t&&t(i,r)}catch(e){break}else for(var r=0,s=e;s>r;r++)try{var i=this.next();n.push(i),t&&t(i,r)}catch(e){break}return n},n.prototype.reset=function(t){this._currentDate=new e(t||this._options.currentDate)},n.prototype.stringify=function(e){for(var r=[],s=e?0:1,i=n.map.length;i>s;++s){var o=n.map[s],a=this.fields[o],c=n.constraints[s];"dayOfMonth"===o&&1===this.fields.month.length?c={min:1,max:n.daysInMonth[this.fields.month[0]-1]}:"dayOfWeek"===o&&(c={min:0,max:6},a=7===a[a.length-1]?a.slice(0,-1):a),r.push(t(a,c.min,c.max))}return r.join(" ")},n.parse=function(t,r){var s=this;return"function"==typeof r&&(r={}),function(t,r){r||(r={}),void 0===r.currentDate&&(r.currentDate=new e(void 0,s._tz)),n.predefined[t]&&(t=n.predefined[t]);var i=[],o=(t+"").trim().split(/\s+/);if(o.length>6)throw Error("Invalid cron expression");for(var a=n.map.length-o.length,c=0,l=n.map.length;l>c;++c){var u=n.map[c],p=o[o.length>l?c:c-a];if(a>c||!p)i.push(n._parseField(u,n.parseDefaults[c],n.constraints[c]));else{var d="dayOfWeek"===u?m(p):p;i.push(n._parseField(u,d,n.constraints[c]))}}var h={};for(c=0,l=n.map.length;l>c;c++)h[n.map[c]]=i[c];var f=n._handleMaxDaysInMonth(h);return h.dayOfMonth=f||h.dayOfMonth,new n(h,r);function m(e){var t=e.split("#");if(t.length>1){var n=+t[t.length-1];if(/,/.test(e))throw Error("Constraint error, invalid dayOfWeek `#` and `,` special characters are incompatible");if(/\//.test(e))throw Error("Constraint error, invalid dayOfWeek `#` and `/` special characters are incompatible");if(/-/.test(e))throw Error("Constraint error, invalid dayOfWeek `#` and `-` special characters are incompatible");if(t.length>2||Number.isNaN(n)||1>n||n>5)throw Error("Constraint error, invalid dayOfWeek occurrence number (#)");return r.nthDayOfWeek=n,t[0]}return e}}(t,r)},n.fieldsToExpression=function(e,t){function r(e,t,r){if(!t)throw Error("Validation error, Field "+e+" is missing");if(0===t.length)throw Error("Validation error, Field "+e+" contains no values");for(var s=0,i=t.length;i>s;s++){var o=t[s];if(!n._isValidConstraintChar(r,o)&&("number"!=typeof o||Number.isNaN(o)||r.min>o||o>r.max))throw Error("Constraint error, got value "+o+" expected range "+r.min+"-"+r.max)}}for(var s={},i=0,o=n.map.length;o>i;++i){var a=n.map[i],c=e[a];r(a,c,n.constraints[i]);for(var l=[],u=-1;++u<c.length;)l[u]=c[u];if((c=l.sort(n._sortCompareFn).filter((function(e,t,n){return!t||e!==n[t-1]}))).length!==l.length)throw Error("Validation error, Field "+a+" contains duplicate values");s[a]=c}var p=n._handleMaxDaysInMonth(s);return s.dayOfMonth=p||s.dayOfMonth,new n(s,t||{})},GK=n}();function t(){}return t._parseEntry=function(t){var n=t.split(" ");if(6===n.length)return{interval:e.parse(t)};if(n.length>6)return{interval:e.parse(n.slice(0,6).join(" ")),command:n.slice(6,n.length)};throw Error("Invalid entry: "+t)},t.parseExpression=function(t,n){return e.parse(t,n)},t.fieldsToExpression=function(t,n){return e.fieldsToExpression(t,n)},t.parseString=function(e){for(var n=e.split("\n"),r={variables:{},expressions:[],errors:{}},s=0,i=n.length;i>s;s++){var o=null,a=n[s].trim();if(a.length>0){if(a.match(/^#/))continue;if(o=a.match(/^(.*)=(.*)$/))r.variables[o[1]]=o[2];else{var c=null;try{c=t._parseEntry("0 "+a),r.expressions.push(c.interval)}catch(e){r.errors[a]=e}}}}return r},t.parseFile=function(e,n){c.readFile(e,(function(e,r){if(!e)return n(null,t.parseString(""+r));n(e)}))},zK=t}var XK,ZK,eQ,tQ,nQ,rQ,sQ,iQ={exports:{}};function oQ(){if(XK)return iQ.exports;XK=1;const e=T;class t extends Error{constructor(e){super(e+" is locked")}}const n={old:new Set,young:new Set};let r;const s=t=>new Promise(((n,r)=>{const s=e.createServer();s.unref(),s.on("error",r),s.listen(t,(()=>{const{port:e}=s.address();s.close((()=>{n(e)}))}))}));return iQ.exports=async e=>{let i;e&&(i="number"==typeof e.port?[e.port]:e.port),void 0===r&&(r=setInterval((()=>{n.old=n.young,n.young=new Set}),15e3),r.unref&&r.unref());for(const r of function*(e){e&&(yield*e),yield 0}(i))try{let i=await s({...e,port:r});for(;n.old.has(i)||n.young.has(i);){if(0!==r)throw new t(r);i=await s({...e,port:r})}return n.young.add(i),i}catch(e){if(!(["EADDRINUSE","EACCES"].includes(e.code)||e instanceof t))throw e}throw Error("No available ports found")},iQ.exports.makeRange=(e,t)=>{if(!Number.isInteger(e)||!Number.isInteger(t))throw new TypeError("`from` and `to` must be integer numbers");if(1024>e||e>65535)throw new RangeError("`from` must be between 1024 and 65535");if(1024>t||t>65536)throw new RangeError("`to` must be between 1024 and 65536");if(e>t)throw new RangeError("`to` must be greater than or equal to `from`");return function*(e,t){for(let n=e;t>=n;n++)yield n}(e,t)},iQ.exports}function aQ(){if(eQ)return ZK;function e(e){return!(null===e.exitCode&&!e.signalCode)}return eQ=1,ZK={killAsync:function(t,n,r){if(e(t))return Promise.resolve(t);let s=function(e){return new Promise((t=>{e.once("exit",(()=>t()))}))}(t);if(t.kill(n||"SIGKILL"),0===r||isFinite(r)){const n=setTimeout((()=>{e(t)||t.kill("SIGKILL")}),r);s=s.then((()=>{clearTimeout(n)}))}return s},asyncSend:(e,t)=>new Promise(((n,r)=>{e.send(t,(e=>{e?r(e):n()}))}))},ZK}function cQ(){if(sQ)return rQ;sQ=1;const{asyncSend:e}=aQ();return rQ=function(t,n){return function(r){return n.retain(t).then((async t=>{let s,i;await e(t,{cmd:"start",job:r});return new Promise(((e,n)=>{s=function(t){switch(t.cmd){case"completed":e(t.value);break;case"failed":case"error":{const e=Error();Object.assign(e,t.value),n(e);break}case"progress":r.progress(t.value);break;case"update":r.update(t.value);break;case"discard":r.discard();break;case"log":r.log(t.value)}},i=(e,t)=>{n(Error("Unexpected exit code: "+e+" signal: "+t))},t.on("message",s),t.on("exit",i)})).finally((()=>{t.removeListener("message",s),t.removeListener("exit",i),null!==t.exitCode||/SIG.*/.test(t.signalCode)?n.remove(t):n.release(t)}))}))}},rQ}const lQ=fD,uQ=a,pQ=Kz,dQ=c,hQ=u,fQ=l,mQ=h,gQ=XY,yQ=LY,vQ=BY,bQ=Qz,EQ=IK,{promisify:_Q}=l,{pTimeout:AQ}=RK,SQ=nd,TQ=l.debuglog("bull"),wQ=wK,xQ={"addJob-6":{name:"addJob",content:'--[[\n  Adds a job to the queue by doing the following:\n    - Increases the job counter if needed.\n    - Creates a new job key with the job data.\n    - if delayed:\n      - computes timestamp.\n      - adds to delayed zset.\n      - Emits a global event \'delayed\' if the job is delayed.\n    - if not delayed\n      - Adds the jobId to the wait/paused list in one of three ways:\n         - LIFO\n         - FIFO\n         - prioritized.\n      - Adds the job to the "added" list so that workers gets notified.\n    Input:\n      KEYS[1] \'wait\',\n      KEYS[2] \'paused\'\n      KEYS[3] \'meta-paused\'\n      KEYS[4] \'id\'\n      KEYS[5] \'delayed\'\n      KEYS[6] \'priority\'\n      ARGV[1]  key prefix,\n      ARGV[2]  custom id (will not generate one automatically)\n      ARGV[3]  name\n      ARGV[4]  data (json stringified job data)\n      ARGV[5]  opts (json stringified job opts)\n      ARGV[6]  timestamp\n      ARGV[7]  delay\n      ARGV[8]  delayedTimestamp\n      ARGV[9]  priority\n      ARGV[10] LIFO\n      ARGV[11] token\n]]\nlocal jobId\nlocal jobIdKey\nlocal rcall = redis.call\n-- Includes\n--[[\n  Function to add job considering priority.\n]]\nlocal function addJobWithPriority(priorityKey, priority, jobId, targetKey)\n  rcall("ZADD", priorityKey, priority, jobId)\n  local count = rcall("ZCOUNT", priorityKey, 0, priority)\n  local len = rcall("LLEN", targetKey)\n  local id = rcall("LINDEX", targetKey, len - (count - 1))\n  if id then\n    rcall("LINSERT", targetKey, "BEFORE", id, jobId)\n  else\n    rcall("RPUSH", targetKey, jobId)\n  end\nend\n--[[\n  Function to check for the meta.paused key to decide if we are paused or not\n  (since an empty list and !EXISTS are not really the same).\n]]\nlocal function getTargetQueueList(queueMetaKey, waitKey, pausedKey)\n  if rcall("EXISTS", queueMetaKey) ~= 1 then\n    return waitKey, false\n  else\n    return pausedKey, true\n  end\nend\nlocal jobCounter = rcall("INCR", KEYS[4])\nif ARGV[2] == "" then\n  jobId = jobCounter\n  jobIdKey = ARGV[1] .. jobId\nelse\n  jobId = ARGV[2]\n  jobIdKey = ARGV[1] .. jobId\n  if rcall("EXISTS", jobIdKey) == 1 then\n    rcall("PUBLISH", ARGV[1] .. "duplicated@" .. ARGV[11], jobId)\n    return jobId .. "" -- convert to string\n  end\nend\nlocal opts = cmsgpack.unpack(ARGV[5])\n-- Store the job.\nrcall("HMSET", jobIdKey, "name", ARGV[3], "data", ARGV[4], "opts", opts, "timestamp", ARGV[6], "delay", ARGV[7], "priority", ARGV[9])\n-- Check if job is delayed\nlocal delayedTimestamp = tonumber(ARGV[8])\nif(delayedTimestamp ~= 0) then\n  local timestamp = delayedTimestamp * 0x1000 + bit.band(jobCounter, 0xfff)\n  rcall("ZADD", KEYS[5], timestamp, jobId)\n  rcall("PUBLISH", KEYS[5], delayedTimestamp)\nelse\n  local target\n  -- Whe check for the meta-paused key to decide if we are paused or not\n  -- (since an empty list and !EXISTS are not really the same)\n  local target, paused = getTargetQueueList(KEYS[3], KEYS[1], KEYS[2])\n  -- Standard or priority add\n  local priority = tonumber(ARGV[9])\n  if priority == 0 then\n      -- LIFO or FIFO\n    rcall(ARGV[10], target, jobId)\n  else\n    addJobWithPriority(KEYS[6], priority, jobId, target)\n  end\n  -- Emit waiting event (wait..ing@token)\n  rcall("PUBLISH", KEYS[1] .. "ing@" .. ARGV[11], jobId)\nend\nreturn jobId .. "" -- convert to string\n',keys:6},"addLog-2":{name:"addLog",content:'--[[\n  Add job log\n  Input:\n    KEYS[1] job id key\n    KEYS[2] job logs key\n    ARGV[1] id\n    ARGV[2] log\n    ARGV[3] keepLogs\n  Output:\n    -1 - Missing job.\n]]\nlocal rcall = redis.call\nif rcall("EXISTS", KEYS[1]) == 1 then -- // Make sure job exists\n  local logCount = rcall("RPUSH", KEYS[2], ARGV[2])\n  if ARGV[3] ~= \'\' then\n    local keepLogs = tonumber(ARGV[3])\n    rcall("LTRIM", KEYS[2], -keepLogs, -1)\n    return math.min(keepLogs, logCount)\n  end\n  return logCount\nelse\n  return -1\nend\n',keys:2},"cleanJobsInSet-3":{name:"cleanJobsInSet",content:'--[[\n  Remove jobs from the specific set.\n  Input:\n    KEYS[1]  set key,\n    KEYS[2]  priority key\n    KEYS[3]  rate limiter key\n    ARGV[1]  jobId\n    ARGV[2]  maxTimestamp\n    ARGV[3]  limit the number of jobs to be removed. 0 is unlimited\n    ARGV[4]  set name, can be any of \'wait\', \'active\', \'paused\', \'delayed\', \'completed\', or \'failed\'\n]]\nlocal setKey = KEYS[1]\nlocal priorityKey = KEYS[2]\nlocal rateLimiterKey = KEYS[3]\nlocal jobKeyPrefix = ARGV[1]\nlocal maxTimestamp = ARGV[2]\nlocal limitStr = ARGV[3]\nlocal setName = ARGV[4]\nlocal isList = false\nlocal rcall = redis.call\nif setName == "wait" or setName == "active" or setName == "paused" then\n  isList = true\nend\n-- We use ZRANGEBYSCORE to make the case where we\'re deleting a limited number\n-- of items in a sorted set only run a single iteration. If we simply used\n-- ZRANGE, we may take a long time traversing through jobs that are within the\n-- grace period.\nlocal function shouldUseZRangeByScore(isList, limit)\n  return not isList and limit > 0\nend\nlocal function getJobs(setKey, isList, rangeStart, rangeEnd, maxTimestamp, limit)\n  if isList then\n    return rcall("LRANGE", setKey, rangeStart, rangeEnd)\n  elseif shouldUseZRangeByScore(isList, limit) then\n    return rcall("ZRANGEBYSCORE", setKey, 0, maxTimestamp, "LIMIT", 0, limit)\n  else\n    return rcall("ZRANGE", setKey, rangeStart, rangeEnd)\n  end\nend\nlocal limit = tonumber(limitStr)\nlocal rangeStart = 0\nlocal rangeEnd = -1\n-- If we\'re only deleting _n_ items, avoid retrieving all items\n-- for faster performance\n--\n-- Start from the tail of the list, since that\'s where oldest elements\n-- are generally added for FIFO lists\nif limit > 0 then\n  rangeStart = -1 - limit + 1\n  rangeEnd = -1\nend\nlocal jobIds = getJobs(setKey, isList, rangeStart, rangeEnd, maxTimestamp, limit)\nlocal deleted = {}\nlocal deletedCount = 0\nlocal jobTS\n-- Run this loop:\n-- - Once, if limit is -1 or 0\n-- - As many times as needed if limit is positive\nwhile ((limit <= 0 or deletedCount < limit) and next(jobIds, nil) ~= nil) do\n  local jobIdsLen = #jobIds\n  for i, jobId in ipairs(jobIds) do\n    if limit > 0 and deletedCount >= limit then\n      break\n    end\n    local jobKey = jobKeyPrefix .. jobId\n    if (rcall("EXISTS", jobKey .. ":lock") == 0) then\n      -- Find the right timestamp of the job to compare to maxTimestamp:\n      -- * finishedOn says when the job was completed, but it isn\'t set unless the job has actually completed\n      -- * processedOn represents when the job was last attempted, but it doesn\'t get populated until the job is first tried\n      -- * timestamp is the original job submission time\n      -- Fetch all three of these (in that order) and use the first one that is set so that we\'ll leave jobs that have been active within the grace period:\n      for _, ts in ipairs(rcall("HMGET", jobKey, "finishedOn", "processedOn", "timestamp")) do\n        if (ts) then\n          jobTS = ts\n          break\n        end\n      end\n      if (not jobTS or jobTS < maxTimestamp) then\n        if isList then\n          -- Job ids can\'t be the empty string. Use the empty string as a\n          -- deletion marker. The actual deletion will occur at the end of the\n          -- script.\n          rcall("LSET", setKey, rangeEnd - jobIdsLen + i, "")\n        else\n          rcall("ZREM", setKey, jobId)\n        end\n        rcall("ZREM", priorityKey, jobId)\n        rcall("DEL", jobKey)\n        rcall("DEL", jobKey .. ":logs")\n        -- delete keys related to rate limiter\n        -- NOTE: this code is unncessary for other sets than wait, paused and delayed.\n        local limiterIndexTable = rateLimiterKey .. ":index"\n        local limitedSetKey = rcall("HGET", limiterIndexTable, jobId)\n        if limitedSetKey then\n          rcall("SREM", limitedSetKey, jobId)\n          rcall("HDEL", limiterIndexTable, jobId)\n        end\n        deletedCount = deletedCount + 1\n        table.insert(deleted, jobId)\n      end\n    end\n  end\n  -- If we didn\'t have a limit or used the single-iteration ZRANGEBYSCORE\n  -- function, return immediately. We should have deleted all the jobs we can\n  if limit <= 0 or shouldUseZRangeByScore(isList, limit) then\n    break\n  end\n  if deletedCount < limit then\n    -- We didn\'t delete enough. Look for more to delete\n    rangeStart = rangeStart - limit\n    rangeEnd = rangeEnd - limit\n    jobIds = getJobs(setKey, isList, rangeStart, rangeEnd, maxTimestamp, limit)\n  end\nend\nif isList then\n  rcall("LREM", setKey, 0, "")\nend\nreturn deleted\n',keys:3},"extendLock-2":{name:"extendLock",content:'--[[\n  Extend lock and removes the job from the stalled set.\n  Input:\n    KEYS[1] \'lock\',\n    KEYS[2] \'stalled\'\n    ARGV[1]  token\n    ARGV[2]  lock duration in milliseconds\n    ARGV[3]  jobid\n  Output:\n    "1" if lock extended succesfully.\n]]\nlocal rcall = redis.call\nif rcall("GET", KEYS[1]) == ARGV[1] then\n  if rcall("SET", KEYS[1], ARGV[1], "PX", ARGV[2]) then\n    rcall("SREM", KEYS[2], ARGV[3])\n    return 1\n  end\nend\nreturn 0\n',keys:2},"getCountsPerPriority-4":{name:"getCountsPerPriority",content:'--[[\n  Get counts per provided states\n    Input:\n      KEYS[1] wait key\n      KEYS[2] paused key\n      KEYS[3] meta-paused key\n      KEYS[4] priority key\n      ARGV[1...] priorities\n]]\nlocal rcall = redis.call\nlocal results = {}\nlocal prioritizedKey = KEYS[4]\n-- Includes\n--[[\n  Function to check for the meta.paused key to decide if we are paused or not\n  (since an empty list and !EXISTS are not really the same).\n]]\nlocal function getTargetQueueList(queueMetaKey, waitKey, pausedKey)\n  if rcall("EXISTS", queueMetaKey) ~= 1 then\n    return waitKey, false\n  else\n    return pausedKey, true\n  end\nend\nfor i = 1, #ARGV do\n  local priority = tonumber(ARGV[i])\n  if priority == 0 then\n    local target = getTargetQueueList(KEYS[3], KEYS[1], KEYS[2])\n    local count = rcall("LLEN", target) - rcall("ZCARD", prioritizedKey)\n    if count < 0 then\n      -- considering when last waiting job is moved to active before\n      -- removing priority reference\n      results[#results+1] = 0\n    else\n      results[#results+1] = count\n    end\n  else\n    results[#results+1] = rcall("ZCOUNT", prioritizedKey,\n      priority, priority)\n  end\nend\nreturn results\n',keys:4},"isFinished-2":{name:"isFinished",content:'--[[\n  Checks if a job is finished (.i.e. is in the completed or failed set)\n  Input: \n    KEYS[1] completed key\n    KEYS[2] failed key\n    ARGV[1] job id\n  Output:\n    0 - not finished.\n    1 - completed.\n    2 - failed.\n]]\nif redis.call("ZSCORE", KEYS[1], ARGV[1]) ~= false then\n  return 1\nend\nif redis.call("ZSCORE", KEYS[2], ARGV[1]) ~= false then\n  return 2\nend\nreturn redis.call("ZSCORE", KEYS[2], ARGV[1])\n',keys:2},"isJobInList-1":{name:"isJobInList",content:'--[[\n      Checks if job is in a given list.\n      Input:\n        KEYS[1]\n        ARGV[1]\n      Output:\n        1 if element found in the list.\n]]\nlocal function item_in_list (list, item)\n  for _, v in pairs(list) do\n    if v == item then\n      return 1\n    end\n  end\n  return nil\nend\nlocal items = redis.call("LRANGE", KEYS[1] , 0, -1)\nreturn item_in_list(items, ARGV[1])\n',keys:1},"moveStalledJobsToWait-7":{name:"moveStalledJobsToWait",content:'--[[\n  Move stalled jobs to wait.\n    Input:\n      KEYS[1] \'stalled\' (SET)\n      KEYS[2] \'wait\',   (LIST)\n      KEYS[3] \'active\', (LIST)\n      KEYS[4] \'failed\', (ZSET)\n      KEYS[5] \'stalled-check\', (KEY)\n      KEYS[6] \'meta-paused\', (KEY)\n      KEYS[7] \'paused\', (LIST)\n      ARGV[1]  Max stalled job count\n      ARGV[2]  queue.toKey(\'\')\n      ARGV[3]  timestamp\n      ARGV[4]  max check time\n    Events:\n      \'stalled\' with stalled job id.\n]]\nlocal rcall = redis.call\n-- Includes\n--[[\n  Function to loop in batches.\n  Just a bit of warning, some commands as ZREM\n  could receive a maximum of 7000 parameters per call.\n]]\nlocal function batches(n, batchSize)\n  local i = 0\n  return function()\n    local from = i * batchSize + 1\n    i = i + 1\n    if (from <= n) then\n      local to = math.min(from + batchSize - 1, n)\n      return from, to\n    end\n  end\nend\n--[[\n  Function to check for the meta.paused key to decide if we are paused or not\n  (since an empty list and !EXISTS are not really the same).\n]]\nlocal function getTargetQueueList(queueMetaKey, waitKey, pausedKey)\n  if rcall("EXISTS", queueMetaKey) ~= 1 then\n    return waitKey, false\n  else\n    return pausedKey, true\n  end\nend\nlocal function removeJob(jobId, baseKey)\n  local jobKey = baseKey .. jobId\n  rcall("DEL", jobKey, jobKey .. \':logs\')\nend\nlocal function removeJobsByMaxAge(timestamp, maxAge, targetSet, prefix)\n  local start = timestamp - maxAge * 1000\n  local jobIds = rcall("ZREVRANGEBYSCORE", targetSet, start, "-inf")\n  for i, jobId in ipairs(jobIds) do\n    removeJob(jobId, prefix)\n  end\n  rcall("ZREMRANGEBYSCORE", targetSet, "-inf", start)\nend\nlocal function removeJobsByMaxCount(maxCount, targetSet, prefix)\n  local start = maxCount\n  local jobIds = rcall("ZREVRANGE", targetSet, start, -1)\n  for i, jobId in ipairs(jobIds) do\n    removeJob(jobId, prefix)\n  end\n  rcall("ZREMRANGEBYRANK", targetSet, 0, -(maxCount + 1))\nend\n-- Check if we need to check for stalled jobs now.\nif rcall("EXISTS", KEYS[5]) == 1 then\n  return {{}, {}}\nend\nrcall("SET", KEYS[5], ARGV[3], "PX", ARGV[4])\n-- Move all stalled jobs to wait\nlocal stalling = rcall(\'SMEMBERS\', KEYS[1])\nlocal stalled = {}\nlocal failed = {}\nif(#stalling > 0) then\n  rcall(\'DEL\', KEYS[1])\n  local MAX_STALLED_JOB_COUNT = tonumber(ARGV[1])\n  -- Remove from active list\n  for i, jobId in ipairs(stalling) do\n    local jobKey = ARGV[2] .. jobId\n    -- Check that the lock is also missing, then we can handle this job as really stalled.\n    if(rcall("EXISTS", jobKey .. ":lock") == 0) then\n      --  Remove from the active queue.\n      local removed = rcall("LREM", KEYS[3], 1, jobId)\n      if(removed > 0) then\n        -- If this job has been stalled too many times, such as if it crashes the worker, then fail it.\n        local stalledCount = rcall("HINCRBY", jobKey, "stalledCounter", 1)\n        if(stalledCount > MAX_STALLED_JOB_COUNT) then\n          local rawOpts = rcall("HGET", jobKey, "opts")\n          local opts = cjson.decode(rawOpts)\n          local removeOnFailType = type(opts["removeOnFail"])\n          rcall("ZADD", KEYS[4], ARGV[3], jobId)\n          rcall("HMSET", jobKey, "failedReason", "job stalled more than allowable limit",\n            "finishedOn", ARGV[3])\n          rcall("PUBLISH", KEYS[4],  \'{"jobId":"\' .. jobId .. \'", "val": "job stalled more than maxStalledCount"}\')\n          if removeOnFailType == "number" then\n            removeJobsByMaxCount(opts["removeOnFail"],\n                KEYS[4], ARGV[2])\n          elseif removeOnFailType == "boolean" then\n            if opts["removeOnFail"] then\n              removeJob(jobId, ARGV[2])\n              rcall("ZREM", KEYS[4], jobId)\n            end\n          elseif removeOnFailType ~= "nil" then\n            local maxAge = opts["removeOnFail"]["age"]\n            local maxCount = opts["removeOnFail"]["count"]\n            if maxAge ~= nil then\n              removeJobsByMaxAge(ARGV[3], maxAge,\n                KEYS[4], ARGV[2])\n            end\n            if maxCount ~= nil and maxCount > 0 then\n              removeJobsByMaxCount(maxCount, KEYS[4],\n                ARGV[2])\n            end\n          end\n          table.insert(failed, jobId)\n        else\n          local target = getTargetQueueList(KEYS[6], KEYS[2], KEYS[7])\n          -- Move the job back to the wait queue, to immediately be picked up by a waiting worker.\n          rcall("RPUSH", target, jobId)\n          rcall(\'PUBLISH\', KEYS[1] .. \'@\', jobId)\n          table.insert(stalled, jobId)\n        end\n      end\n    end\n  end\nend\n-- Mark potentially stalled jobs\nlocal active = rcall(\'LRANGE\', KEYS[3], 0, -1)\nif (#active > 0) then\n  for from, to in batches(#active, 7000) do\n    rcall(\'SADD\', KEYS[1], unpack(active, from, to))\n  end\nend\nreturn {failed, stalled}\n',keys:7},"moveToActive-8":{name:"moveToActive",content:'--[[\n  Move next job to be processed to active, lock it and fetch its data. The job\n  may be delayed, in that case we need to move it to the delayed set instead.\n  This operation guarantees that the worker owns the job during the locks\n  expiration time. The worker is responsible of keeping the lock fresh\n  so that no other worker picks this job again.\n  Input:\n      KEYS[1] wait key\n      KEYS[2] active key\n      KEYS[3] priority key\n      KEYS[4] active event key\n      KEYS[5] stalled key\n      -- Rate limiting\n      KEYS[6] rate limiter key\n      KEYS[7] delayed key\n      --\n      KEYS[8] drained key\n      ARGV[1] key prefix\n      ARGV[2] lock token\n      ARGV[3] lock duration in milliseconds\n      ARGV[4] timestamp\n      ARGV[5] optional jobid\n      ARGV[6] optional jobs per time unit (rate limiter)\n      ARGV[7] optional time unit (rate limiter)\n      ARGV[8] optional do not do anything with job if rate limit hit\n      ARGV[9] optional rate limit by key\n]]\nlocal rcall = redis.call\nlocal rateLimit = function(jobId, maxJobs)\n  local rateLimiterKey = KEYS[6];\n  local limiterIndexTable = rateLimiterKey .. ":index"\n  -- Rate limit by group?\n  if(ARGV[9]) then\n    local group = string.match(jobId, "[^:]+$")\n    if group ~= nil then\n      rateLimiterKey = rateLimiterKey .. ":" .. group\n    end\n  end\n  -- -- key for storing rate limited jobs\n  -- When a job has been previously rate limited it should be part of this set\n  -- if the job is back here means that the delay time for this job has passed and now we should\n  -- be able to process it again.\n  local limitedSetKey = rateLimiterKey .. ":limited"\n  local delay = 0\n  -- -- Check if job was already limited\n  local isLimited = rcall("SISMEMBER", limitedSetKey, jobId);\n  if isLimited == 1 then\n     -- Remove from limited zset since we are going to try to process it\n     rcall("SREM", limitedSetKey, jobId)\n     rcall("HDEL", limiterIndexTable, jobId)\n  else\n    -- If not, check if there are any limited jobs\n    -- If the job has not been rate limited, we should check if there are any other rate limited jobs, because if that\n    -- is the case we do not want to process this job, just calculate a delay for it and put it to "sleep".\n    local numLimitedJobs = rcall("SCARD", limitedSetKey)\n    if numLimitedJobs > 0 then\n      -- Note, add some slack to compensate for drift.\n      delay = ((numLimitedJobs * ARGV[7] * 1.1) /  maxJobs) + tonumber(rcall("PTTL", rateLimiterKey))\n    end\n  end\n  local jobCounter = tonumber(rcall("GET", rateLimiterKey))\n  if(jobCounter == nil) then\n    jobCounter = 0\n  end\n  -- check if rate limit hit\n  if (delay == 0) and (jobCounter >= maxJobs) then\n    -- Seems like there are no current rated limited jobs, but the jobCounter has exceeded the number of jobs for this unit of time so we need to rate limit this job.\n    local exceedingJobs = jobCounter - maxJobs\n    delay = tonumber(rcall("PTTL", rateLimiterKey)) + ((exceedingJobs) * ARGV[7]) / maxJobs\n  end\n  if delay > 0 then\n    local bounceBack = ARGV[8]\n    if bounceBack == \'false\' then\n      local timestamp = delay + tonumber(ARGV[4])\n      -- put job into delayed queue\n      rcall("ZADD", KEYS[7], timestamp * 0x1000 + bit.band(jobCounter, 0xfff), jobId)\n      rcall("PUBLISH", KEYS[7], timestamp)\n      rcall("SADD", limitedSetKey, jobId)\n      -- store index so that we can delete rate limited data\n      rcall("HSET", limiterIndexTable, jobId, limitedSetKey)\n    end\n    -- remove from active queue\n    rcall("LREM", KEYS[2], 1, jobId)\n    return true\n  else\n    -- false indicates not rate limited\n    -- increment jobCounter only when a job is not rate limited\n    if (jobCounter == 0) then\n      rcall("PSETEX", rateLimiterKey, ARGV[7], 1)\n    else\n      rcall("INCR", rateLimiterKey)\n    end\n    return false\n  end\nend\nlocal jobId = ARGV[5]\nif jobId ~= \'\' then\n  -- clean stalled key\n  rcall("SREM", KEYS[5], jobId)\nelse\n  -- move from wait to active\n  jobId = rcall("RPOPLPUSH", KEYS[1], KEYS[2])\nend\nif jobId then\n  -- Check if we need to perform rate limiting.\n  local maxJobs = tonumber(ARGV[6])\n  if maxJobs then\n    if rateLimit(jobId, maxJobs) then\n       return\n    end\n  end\n  -- get a lock\n  local jobKey = ARGV[1] .. jobId\n  local lockKey = jobKey .. \':lock\'\n  rcall("SET", lockKey, ARGV[2], "PX", ARGV[3])\n  -- remove from priority\n  rcall("ZREM", KEYS[3], jobId)\n  rcall("PUBLISH", KEYS[4], jobId)\n  rcall("HSET", jobKey, "processedOn", ARGV[4])\n  return {rcall("HGETALL", jobKey), jobId} -- get job data\nelse\n  rcall("PUBLISH", KEYS[8], "")\nend\n',keys:8},"moveToDelayed-4":{name:"moveToDelayed",content:'--[[\n  Moves job from active to delayed set.\n  Input:\n    KEYS[1] active key\n    KEYS[2] delayed key\n    KEYS[3] job key\n    KEYS[4] stalled key\n    ARGV[1] delayedTimestamp\n    ARGV[2] the id of the job\n    ARGV[3] queue token\n  Output:\n    0 - OK\n   -1 - Missing job.\n   -2 - Job is locked.\n  Events:\n    - delayed key.\n]]\nlocal rcall = redis.call\n-- Includes\nlocal function removeLock(jobKey, stalledKey, token, jobId)\n  if token ~= "0" then\n    local lockKey = jobKey .. \':lock\'\n    local lockToken = rcall("GET", lockKey)\n    if lockToken == token then\n      rcall("DEL", lockKey)\n      rcall("SREM", stalledKey, jobId)\n    else\n      if lockToken then\n        -- Lock exists but token does not match\n        return -6\n      else\n        -- Lock is missing completely\n        return -2\n      end\n    end\n  end\n  return 0\nend\nif rcall("EXISTS", KEYS[3]) == 1 then\n  local errorCode = removeLock(KEYS[3], KEYS[4], ARGV[3], ARGV[2])\n  if errorCode < 0 then\n    return errorCode\n  end\n  local numRemovedElements = rcall("LREM", KEYS[1], -1, ARGV[2])\n  if numRemovedElements < 1 then return -3 end\n  local score = tonumber(ARGV[1])\n  rcall("ZADD", KEYS[2], score, ARGV[2])\n  rcall("PUBLISH", KEYS[2], (score / 0x1000))\n  return 0\nelse\n  return -1\nend\n',keys:4},"moveToFinished-9":{name:"moveToFinished",content:'--[[\n  Move job from active to a finished status (completed or failed)\n  A job can only be moved to completed if it was active.\n  The job must be locked before it can be moved to a finished status,\n  and the lock must be released in this script.\n     Input:\n      KEYS[1] active key\n      KEYS[2] completed/failed key\n      KEYS[3] jobId key\n      KEYS[4] wait key\n      KEYS[5] priority key\n      KEYS[6] active event key\n      KEYS[7] delayed key\n      KEYS[8] stalled key\n      KEYS[9] metrics key\n      ARGV[1]  jobId\n      ARGV[2]  timestamp\n      ARGV[3]  msg property\n      ARGV[4]  return value / failed reason\n      ARGV[5]  token\n      ARGV[6]  shouldRemove\n      ARGV[7]  event data (? maybe just send jobid).\n      ARGV[8]  should fetch next job\n      ARGV[9]  base key\n      ARGV[10] lock token\n      ARGV[11] lock duration in milliseconds\n      ARGV[12] maxMetricsSize\n     Output:\n      0 OK\n      -1 Missing key.\n      -2 Missing lock.\n      -3 - Job not in active set.\n     Events:\n      \'completed/failed\'\n]]\nlocal rcall = redis.call\n--[[\n  Functions to collect metrics based on a current and previous count of jobs.\n  Granualarity is fixed at 1 minute.\n]]\nlocal function collectMetrics(metaKey, dataPointsList, maxDataPoints, timestamp)\n    -- Increment current count\n    local count = rcall("HINCRBY", metaKey, "count", 1) - 1\n    -- Compute how many data points we need to add to the list, N.\n    local prevTS = rcall("HGET", metaKey, "prevTS")\n    if not prevTS then\n        -- If prevTS is nil, set it to the current timestamp\n        rcall("HSET", metaKey, "prevTS", timestamp, "prevCount", 0)\n        return\n    end\n    local N = math.floor((timestamp - prevTS) / 60000)\n    if N > 0 then\n        local delta = count - rcall("HGET", metaKey, "prevCount")\n        -- If N > 1, add N-1 zeros to the list\n        if N > 1 then\n            local points = {}\n            points[1] = delta\n            for i = 2, N do points[i] = 0 end\n            rcall("LPUSH", dataPointsList, unpack(points))\n        else\n            -- LPUSH delta to the list\n            rcall("LPUSH", dataPointsList, delta)\n        end\n        -- LTRIM to keep list to its max size\n        rcall("LTRIM", dataPointsList, 0, maxDataPoints - 1)\n        -- update prev count with current count\n        rcall("HSET", metaKey, "prevCount", count, "prevTS", timestamp)\n    end\nend\n-- Includes\nlocal function removeLock(jobKey, stalledKey, token, jobId)\n  if token ~= "0" then\n    local lockKey = jobKey .. \':lock\'\n    local lockToken = rcall("GET", lockKey)\n    if lockToken == token then\n      rcall("DEL", lockKey)\n      rcall("SREM", stalledKey, jobId)\n    else\n      if lockToken then\n        -- Lock exists but token does not match\n        return -6\n      else\n        -- Lock is missing completely\n        return -2\n      end\n    end\n  end\n  return 0\nend\nif rcall("EXISTS", KEYS[3]) == 1 then -- // Make sure job exists\n    local errorCode = removeLock(KEYS[3], KEYS[8], ARGV[5], ARGV[1])\n    if errorCode < 0 then\n        return errorCode\n    end\n    -- Remove from active list (if not active we shall return error)\n    local numRemovedElements = rcall("LREM", KEYS[1], -1, ARGV[1])\n    if numRemovedElements < 1 then return -3 end\n    -- Remove job?\n    local keepJobs = cmsgpack.unpack(ARGV[6])\n    local maxCount = keepJobs[\'count\']\n    local maxAge = keepJobs[\'age\']\n    local targetSet = KEYS[2]\n    local timestamp = ARGV[2]\n    if maxCount ~= 0 then\n        -- Add to complete/failed set\n        rcall("ZADD", targetSet, timestamp, ARGV[1])\n        rcall("HMSET", KEYS[3], ARGV[3], ARGV[4], "finishedOn", timestamp) -- "returnvalue" / "failedReason" and "finishedOn"\n        local function removeJobs(jobIds)\n            for i, jobId in ipairs(jobIds) do\n                local jobKey = ARGV[9] .. jobId\n                local jobLogKey = jobKey .. \':logs\'\n                rcall("DEL", jobKey, jobLogKey)\n            end\n        end\n        -- Remove old jobs?\n        if maxAge ~= nil then\n            local start = timestamp - maxAge * 1000\n            local jobIds = rcall("ZREVRANGEBYSCORE", targetSet, start, "-inf")\n            removeJobs(jobIds)\n            rcall("ZREMRANGEBYSCORE", targetSet, "-inf", start)\n        end\n        if maxCount ~= nil and maxCount > 0 then\n            local start = maxCount\n            local jobIds = rcall("ZREVRANGE", targetSet, start, -1)\n            removeJobs(jobIds)\n            rcall("ZREMRANGEBYRANK", targetSet, 0, -(maxCount + 1));\n        end\n    else\n        local jobLogKey = KEYS[3] .. \':logs\'\n        rcall("DEL", KEYS[3], jobLogKey)\n    end\n    -- Collect metrics\n    if ARGV[12] ~= "" then\n      collectMetrics(KEYS[9], KEYS[9]..\':data\', ARGV[12], timestamp)\n    end\n    rcall("PUBLISH", targetSet, ARGV[7])\n    -- Try to get next job to avoid an extra roundtrip if the queue is not closing, \n    -- and not rate limited.\n    if (ARGV[8] == "1") then\n        -- move from wait to active \n        local jobId = rcall("RPOPLPUSH", KEYS[4], KEYS[1])\n        if jobId then\n            local jobKey = ARGV[9] .. jobId\n            local lockKey = jobKey .. \':lock\'\n            -- get a lock\n            rcall("SET", lockKey, ARGV[11], "PX", ARGV[10])\n            rcall("ZREM", KEYS[5], jobId) -- remove from priority\n            rcall("PUBLISH", KEYS[6], jobId)\n            rcall("HSET", jobKey, "processedOn", ARGV[2])\n            return {rcall("HGETALL", jobKey), jobId} -- get job data\n        end\n    end\n    return 0\nelse\n    return -1\nend\n',keys:9},"obliterate-2":{name:"obliterate",content:"--[[\n    Completely obliterates a queue and all of its contents\n     Input:\n        KEYS[1] meta-paused\n        KEYS[2] base\n        ARGV[1]  count\n        ARGV[2]  force\n]] \n-- This command completely destroys a queue including all of its jobs, current or past \n-- leaving no trace of its existence. Since this script needs to iterate to find all the job\n-- keys, consider that this call may be slow for very large queues.\n-- The queue needs to be \"paused\" or it will return an error\n-- If the queue has currently active jobs then the script by default will return error,\n-- however this behaviour can be overrided using the 'force' option.\nlocal maxCount = tonumber(ARGV[1])\nlocal baseKey = KEYS[2]\nlocal rcall = redis.call\nlocal function getListItems(keyName, max)\n    return rcall('LRANGE', keyName, 0, max - 1)\nend\nlocal function getZSetItems(keyName, max)\n    return rcall('ZRANGE', keyName, 0, max - 1)\nend\nlocal function removeJobs(parentKey, keys)\n    for i, key in ipairs(keys) do\n        rcall(\"DEL\", baseKey .. key)\n        rcall(\"DEL\", baseKey .. key .. ':logs')\n    end\n    maxCount = maxCount - #keys\nend\nlocal function removeListJobs(keyName, max)\n    local jobs = getListItems(keyName, max)\n    removeJobs(keyName, jobs)\n    rcall(\"LTRIM\", keyName, #jobs, -1)\nend\nlocal function removeZSetJobs(keyName, max)\n    local jobs = getZSetItems(keyName, max)\n    removeJobs(keyName, jobs)\n    if (#jobs > 0) then rcall(\"ZREM\", keyName, unpack(jobs)) end\nend\nlocal function removeLockKeys(keys)\n    for i, key in ipairs(keys) do rcall(\"DEL\", baseKey .. key .. ':lock') end\nend\n-- 1) Check if paused, if not return with error.\nif rcall(\"EXISTS\", KEYS[1]) ~= 1 then\n    return -1 -- Error, NotPaused\nend\n-- 2) Check if there are active jobs, if there are and not \"force\" return error.\nlocal activeKey = baseKey .. 'active'\nlocal activeJobs = getListItems(activeKey, maxCount)\nif (#activeJobs > 0) then\n    if (ARGV[2] == \"\") then\n        return -2 -- Error, ExistsActiveJobs\n    end\nend\nremoveLockKeys(activeJobs)\nremoveJobs(activeKey, activeJobs)\nrcall(\"LTRIM\", activeKey, #activeJobs, -1)\nif (maxCount <= 0) then return 1 end\nlocal waitKey = baseKey .. 'paused'\nremoveListJobs(waitKey, maxCount)\nif (maxCount <= 0) then return 1 end\nlocal delayedKey = baseKey .. 'delayed'\nremoveZSetJobs(delayedKey, maxCount)\nif (maxCount <= 0) then return 1 end\nlocal completedKey = baseKey .. 'completed'\nremoveZSetJobs(completedKey, maxCount)\nif (maxCount <= 0) then return 1 end\nlocal failedKey = baseKey .. 'failed'\nremoveZSetJobs(failedKey, maxCount)\nif (maxCount <= 0) then return 1 end\nif (maxCount > 0) then\n    rcall(\"DEL\", baseKey .. 'priority')\n    rcall(\"DEL\", baseKey .. 'stalled-check')\n    rcall(\"DEL\", baseKey .. 'stalled')\n    rcall(\"DEL\", baseKey .. 'meta-paused')\n    rcall(\"DEL\", baseKey .. 'meta')\n    rcall(\"DEL\", baseKey .. 'id')\n    rcall(\"DEL\", baseKey .. 'repeat')\n    rcall(\"DEL\", baseKey .. 'metrics:completed')\n    rcall(\"DEL\", baseKey .. 'metrics:completed:data')\n    rcall(\"DEL\", baseKey .. 'metrics:failed')\n    rcall(\"DEL\", baseKey .. 'metrics:failed:data')\n    return 0\nelse\n    return 1\nend\n",keys:2},"pause-5":{name:"pause",content:"--[[\n  Pauses or resumes a queue globably.\n   Input:\n      KEYS[1] 'wait' or 'paused''\n      KEYS[2] 'paused' or 'wait'\n      KEYS[3] 'meta-paused'\n      KEYS[4] 'paused' o 'resumed' event.\n      KEYS[5] 'meta' this key is only used in BullMQ and above.\n      ARGV[1] 'paused' or 'resumed'\n    Event:\n      publish paused or resumed event.\n]]\nlocal rcall = redis.call\nif rcall(\"EXISTS\", KEYS[1]) == 1 then\n  rcall(\"RENAME\", KEYS[1], KEYS[2])\nend\nif ARGV[1] == \"paused\" then\n  rcall(\"SET\", KEYS[3], 1)\n  -- for forwards compatibility\n  rcall(\"HSET\", KEYS[5], \"paused\", 1)\nelse\n  rcall(\"DEL\", KEYS[3])\n  -- for forwards compatibility\n  rcall(\"HDEL\", KEYS[5], \"paused\")\nend\nrcall(\"PUBLISH\", KEYS[4], ARGV[1])\n",keys:5},"promote-5":{name:"promote",content:'--[[\n  Promotes a job that is currently "delayed" to the "waiting" state\n     Input:\n      KEYS[1] \'delayed\'\n      KEYS[2] \'wait\'\n      KEYS[3] \'paused\'\n      KEYS[4] \'meta-paused\'\n      KEYS[5] \'priority\'\n      ARGV[1]  queue.toKey(\'\')\n      ARGV[2]  jobId\n      ARGV[3]  queue token\n     Events:\n      \'waiting\'\n]]\nlocal rcall = redis.call;\nlocal jobId = ARGV[2]\n-- Includes\n--[[\n  Function to add job considering priority.\n]]\nlocal function addJobWithPriority(priorityKey, priority, jobId, targetKey)\n  rcall("ZADD", priorityKey, priority, jobId)\n  local count = rcall("ZCOUNT", priorityKey, 0, priority)\n  local len = rcall("LLEN", targetKey)\n  local id = rcall("LINDEX", targetKey, len - (count - 1))\n  if id then\n    rcall("LINSERT", targetKey, "BEFORE", id, jobId)\n  else\n    rcall("RPUSH", targetKey, jobId)\n  end\nend\n--[[\n  Function to check for the meta.paused key to decide if we are paused or not\n  (since an empty list and !EXISTS are not really the same).\n]]\nlocal function getTargetQueueList(queueMetaKey, waitKey, pausedKey)\n  if rcall("EXISTS", queueMetaKey) ~= 1 then\n    return waitKey, false\n  else\n    return pausedKey, true\n  end\nend\nif rcall("ZREM", KEYS[1], jobId) == 1 then\n  local priority = tonumber(rcall("HGET", ARGV[1] .. jobId, "priority")) or 0\n  local target = getTargetQueueList(KEYS[4], KEYS[2], KEYS[3])\n  if priority == 0 then\n    -- LIFO or FIFO\n    rcall("LPUSH", target, jobId)\n  else\n    addJobWithPriority(KEYS[5], priority, jobId, target)\n  end\n  -- Emit waiting event (wait..ing@token)\n  rcall("PUBLISH", KEYS[2] .. "ing@" .. ARGV[3], jobId)\n  rcall("HSET", ARGV[1] .. jobId, "delay", 0)\n  return 0\nelse\n  return -1\nend\n',keys:5},"releaseLock-1":{name:"releaseLock",content:'--[[\n  Release lock\n     Input:\n        KEYS[1] \'lock\',\n        ARGV[1]  token\n        ARGV[2]  lock duration in milliseconds\n      Output:\n        "OK" if lock extented succesfully.\n]]\nlocal rcall = redis.call\nif rcall("GET", KEYS[1]) == ARGV[1] then\n  return rcall("DEL", KEYS[1])\nelse\n  return 0\nend\n',keys:1},"removeJob-10":{name:"removeJob",content:'--[[\n    Remove a job from all the queues it may be in as well as all its data.\n    In order to be able to remove a job, it must be unlocked.\n     Input:\n      KEYS[1] \'active\',\n      KEYS[2] \'wait\',\n      KEYS[3] \'delayed\',\n      KEYS[4] \'paused\',\n      KEYS[5] \'completed\',\n      KEYS[6] \'failed\',\n      KEYS[7] \'priority\',\n      KEYS[8] jobId\n      KEYS[9] job logs\n      KEYS[10] rate limiter index table\n      ARGV[1]  jobId\n      ARGV[2]  lock token\n     Events:\n      \'removed\'\n]]\n-- TODO PUBLISH global event \'removed\'\nlocal rcall = redis.call\nlocal lockKey = KEYS[8] .. \':lock\'\nlocal lock = redis.call("GET", lockKey)\nif not lock then             -- or (lock == ARGV[2])) then\n  local jobId = ARGV[1]\n  rcall("LREM", KEYS[1], 0, jobId)\n  rcall("LREM", KEYS[2], 0, jobId)\n  rcall("ZREM", KEYS[3], jobId)\n  rcall("LREM", KEYS[4], 0, jobId)\n  rcall("ZREM", KEYS[5], jobId)\n  rcall("ZREM", KEYS[6], jobId)\n  rcall("ZREM", KEYS[7], jobId)\n  rcall("DEL", KEYS[8])\n  rcall("DEL", KEYS[9])\n  -- delete keys related to rate limiter\n  local limiterIndexTable = KEYS[10] .. ":index"\n  local limitedSetKey = rcall("HGET", limiterIndexTable, jobId)\n  if limitedSetKey then\n    rcall("SREM", limitedSetKey, jobId)\n    rcall("HDEL", limiterIndexTable, jobId)\n  end\n  return 1\nelse\n  return 0\nend\n',keys:10},"removeJobs-8":{name:"removeJobs",content:'--[[\n    Remove all jobs matching a given pattern from all the queues they may be in as well as all its data.\n    In order to be able to remove any job, they must be unlocked.\n     Input:\n      KEYS[1] \'active\',\n      KEYS[2] \'wait\',\n      KEYS[3] \'delayed\',\n      KEYS[4] \'paused\',\n      KEYS[5] \'completed\',\n      KEYS[6] \'failed\',\n      KEYS[7] \'priority\',\n      KEYS[8] \'rate-limiter\'\n      ARGV[1]  prefix\n      ARGV[2]  pattern\n      ARGV[3]  cursor\n     Events:\n      \'removed\'\n]]\n-- TODO PUBLISH global events \'removed\'\nlocal rcall = redis.call\nlocal result = rcall("SCAN", ARGV[3], "MATCH", ARGV[1] .. ARGV[2])\nlocal cursor = result[1];\nlocal jobKeys = result[2];\nlocal removed = {}\nlocal prefixLen = string.len(ARGV[1]) + 1\nfor i, jobKey in ipairs(jobKeys) do\n    local keyTypeResp = rcall("TYPE", jobKey)\n    if keyTypeResp["ok"] == "hash" then\n        local jobId = string.sub(jobKey, prefixLen)\n        local lockKey = jobKey .. \':lock\'\n        local lock = redis.call("GET", lockKey)\n        if not lock then\n            rcall("LREM", KEYS[1], 0, jobId)\n            rcall("LREM", KEYS[2], 0, jobId)\n            rcall("ZREM", KEYS[3], jobId)\n            rcall("LREM", KEYS[4], 0, jobId)\n            rcall("ZREM", KEYS[5], jobId)\n            rcall("ZREM", KEYS[6], jobId)\n            rcall("ZREM", KEYS[7], jobId)\n            rcall("DEL", jobKey)\n            rcall("DEL", jobKey .. \':logs\')\n            -- delete keys related to rate limiter\n            local limiterIndexTable = KEYS[8] .. ":index"\n            local limitedSetKey = rcall("HGET", limiterIndexTable, jobId)\n            if limitedSetKey then\n                rcall("SREM", limitedSetKey, jobId)\n                rcall("HDEL", limiterIndexTable, jobId)\n            end\n            table.insert(removed, jobId)\n        end\n    end\nend\nreturn {cursor, removed}\n',keys:8},"removeRepeatable-2":{name:"removeRepeatable",content:'--[[\n  Removes a repeatable job\n  Input:\n    KEYS[1] repeat jobs key\n    KEYS[2] delayed jobs key\n    ARGV[1] repeat job id\n    ARGV[2] repeat job key\n    ARGV[3] queue key\n]]\nlocal millis = redis.call("ZSCORE", KEYS[1], ARGV[2])\nif(millis) then\n  -- Delete next programmed job.\n  local repeatJobId = ARGV[1] .. millis\n  if(redis.call("ZREM", KEYS[2], repeatJobId) == 1) then\n    redis.call("DEL", ARGV[3] .. repeatJobId)\n  end\nend\nredis.call("ZREM", KEYS[1], ARGV[2]);\n',keys:2},"reprocessJob-6":{name:"reprocessJob",content:'--[[\n  Attempts to reprocess a job\n  Input:\n    KEYS[1] job key\n    KEYS[2] job lock key\n    KEYS[3] job state\n    KEYS[4] wait key\n    KEYS[5] meta-pause\n    KEYS[6] paused key\n    ARGV[1] job.id,\n    ARGV[2] (job.opts.lifo ? \'R\' : \'L\') + \'PUSH\'\n    ARGV[3] token\n    ARGV[4] timestamp\n  Output:\n    1 means the operation was a success\n    0 means the job does not exist\n    -1 means the job is currently locked and can\'t be retried.\n    -2 means the job was not found in the expected set.\n]]\nlocal rcall = redis.call;\nif (rcall("EXISTS", KEYS[1]) == 1) then\n    if (rcall("EXISTS", KEYS[2]) == 0) then\n        rcall("HDEL", KEYS[1], "finishedOn", "processedOn", "failedReason")\n        rcall("HSET", KEYS[1], "retriedOn", ARGV[4])\n        if (rcall("ZREM", KEYS[3], ARGV[1]) == 1) then\n            local target\n            if rcall("EXISTS", KEYS[5]) ~= 1 then\n                target = KEYS[4]\n            else\n                target = KEYS[6]\n            end\n            rcall(ARGV[2], target, ARGV[1])\n            -- Emit waiting event (wait..ing@token)\n            rcall("PUBLISH", KEYS[4] .. "ing@" .. ARGV[3], ARGV[1])\n            return 1\n        else\n            return -2\n        end\n    else\n        return -1\n    end\nelse\n    return 0\nend\n',keys:6},"retryJob-7":{name:"retryJob",content:'--[[\n  Retries a failed job by moving it back to the wait queue.\n    Input:\n      KEYS[1] \'active\',\n      KEYS[2] \'wait\'\n      KEYS[3] jobId key\n      KEYS[4] \'meta-paused\'\n      KEYS[5] \'paused\'\n      KEYS[6] stalled key\n      KEYS[7] \'priority\'\n      ARGV[1]  pushCmd\n      ARGV[2]  jobId\n      ARGV[3]  token\n    Events:\n      \'prefix:added\'\n    Output:\n     0  - OK\n     -1 - Missing key\n     -2 - Job Not locked\n     -3 - Job not in active set\n]]\nlocal rcall = redis.call\n-- Includes\n--[[\n  Function to add job considering priority.\n]]\nlocal function addJobWithPriority(priorityKey, priority, jobId, targetKey)\n  rcall("ZADD", priorityKey, priority, jobId)\n  local count = rcall("ZCOUNT", priorityKey, 0, priority)\n  local len = rcall("LLEN", targetKey)\n  local id = rcall("LINDEX", targetKey, len - (count - 1))\n  if id then\n    rcall("LINSERT", targetKey, "BEFORE", id, jobId)\n  else\n    rcall("RPUSH", targetKey, jobId)\n  end\nend\n--[[\n  Function to check for the meta.paused key to decide if we are paused or not\n  (since an empty list and !EXISTS are not really the same).\n]]\nlocal function getTargetQueueList(queueMetaKey, waitKey, pausedKey)\n  if rcall("EXISTS", queueMetaKey) ~= 1 then\n    return waitKey, false\n  else\n    return pausedKey, true\n  end\nend\nlocal function removeLock(jobKey, stalledKey, token, jobId)\n  if token ~= "0" then\n    local lockKey = jobKey .. \':lock\'\n    local lockToken = rcall("GET", lockKey)\n    if lockToken == token then\n      rcall("DEL", lockKey)\n      rcall("SREM", stalledKey, jobId)\n    else\n      if lockToken then\n        -- Lock exists but token does not match\n        return -6\n      else\n        -- Lock is missing completely\n        return -2\n      end\n    end\n  end\n  return 0\nend\nif rcall("EXISTS", KEYS[3]) == 1 then\n  local errorCode = removeLock(KEYS[3], KEYS[6], ARGV[3], ARGV[2])\n  if errorCode < 0 then\n    return errorCode\n  end\n  local numRemovedElements = rcall("LREM", KEYS[1], -1, ARGV[2])\n  if numRemovedElements < 1 then return -3 end\n  local target = getTargetQueueList(KEYS[4], KEYS[2], KEYS[5])\n  local priority = tonumber(rcall("HGET", KEYS[3], "priority")) or 0\n  if priority == 0 then\n    -- LIFO or FIFO\n    rcall(ARGV[1], target, ARGV[2])\n  else\n    addJobWithPriority(KEYS[7], priority, ARGV[2], target)\n  end\n  return 0\nelse\n  return -1\nend\n',keys:7},"retryJobs-5":{name:"retryJobs",content:'--[[\n  Attempts to retry all failed jobs\n  Input:\n    KEYS[1] base key\n    KEYS[2] failed state key\n    KEYS[3] wait state key\n    KEYS[4] \'meta-paused\'\n    KEYS[5] \'paused\'\n    ARGV[1]  count\n  Output:\n    1  means the operation is not completed\n    0  means the operation is completed\n]]\nlocal baseKey = KEYS[1]\nlocal maxCount = tonumber(ARGV[1])\nlocal rcall = redis.call;\n-- Includes\n--[[\n  Function to loop in batches.\n  Just a bit of warning, some commands as ZREM\n  could receive a maximum of 7000 parameters per call.\n]]\nlocal function batches(n, batchSize)\n  local i = 0\n  return function()\n    local from = i * batchSize + 1\n    i = i + 1\n    if (from <= n) then\n      local to = math.min(from + batchSize - 1, n)\n      return from, to\n    end\n  end\nend\nlocal function getZSetItems(keyName, max)\n    return rcall(\'ZRANGE\', keyName, 0, max - 1)\nend\nlocal jobs = getZSetItems(KEYS[2], maxCount)\nif (#jobs > 0) then\n    for i, key in ipairs(jobs) do\n        local jobKey = baseKey .. key\n        rcall("HDEL", jobKey, "finishedOn", "processedOn", "failedReason")\n    end\n    local target\n    if rcall("EXISTS", KEYS[4]) ~= 1 then\n        target = KEYS[3]\n    else\n        target = KEYS[5]\n    end\n    for from, to in batches(#jobs, 7000) do\n        rcall("ZREM", KEYS[2], unpack(jobs, from, to))\n        rcall("LPUSH", target, unpack(jobs, from, to))\n    end\nend\nmaxCount = maxCount - #jobs\nif (maxCount <= 0) then return 1 end\nreturn 0\n',keys:5},"saveStacktrace-1":{name:"saveStacktrace",content:'--[[\n  Save stacktrace and failedReason.\n  Input:\n    KEYS[1] job key\n    ARGV[1]  stacktrace\n    ARGV[2]  failedReason\n    ARGV[3]  attemptsMade\n  Output:\n     0 - OK\n    -1 - Missing key\n]]\nlocal rcall = redis.call\nif rcall("EXISTS", KEYS[1]) == 1 then\n  rcall("HMSET", KEYS[1], "stacktrace", ARGV[1], "failedReason", ARGV[2],\n    "attemptsMade", ARGV[3])\n  return 0\nelse\n  return -1\nend\n',keys:1},"takeLock-1":{name:"takeLock",content:'--[[\n  Takes a lock\n     Input:\n        KEYS[1] \'lock\',\n        ARGV[1]  token\n        ARGV[2]  lock duration in milliseconds\n      Output:\n        "OK" if lock taken successfully.\n]]\nif redis.call("SET", KEYS[1], ARGV[1], "NX", "PX", ARGV[2]) then\n  return 1\nelse\n  return 0\nend\n',keys:1},"updateData-1":{name:"updateData",content:'--[[\n  Update job data\n  Input:\n    KEYS[1] Job id key\n    ARGV[1] data\n  Output:\n    0 - OK\n   -1 - Missing job.\n]]\nlocal rcall = redis.call\nif rcall("EXISTS",KEYS[1]) == 1 then -- // Make sure job exists\n  rcall("HSET", KEYS[1], "data", ARGV[1])\n  return 0\nelse\n  return -1\nend\n',keys:1},"updateDelaySet-6":{name:"updateDelaySet",content:'--[[\n  Updates the delay set, by picking a delayed job that should\n  be processed now.\n     Input:\n      KEYS[1] \'delayed\'\n      KEYS[2] \'active\'\n      KEYS[3] \'wait\'\n      KEYS[4] \'priority\'\n      KEYS[5] \'paused\'\n      KEYS[6] \'meta-paused\'\n      ARGV[1]  queue.toKey(\'\')\n      ARGV[2]  delayed timestamp\n      ARGV[3]  queue token\n     Events:\n      \'removed\'\n]]\nlocal rcall = redis.call;\n-- Includes\n--[[\n  Function to add job considering priority.\n]]\nlocal function addJobWithPriority(priorityKey, priority, jobId, targetKey)\n  rcall("ZADD", priorityKey, priority, jobId)\n  local count = rcall("ZCOUNT", priorityKey, 0, priority)\n  local len = rcall("LLEN", targetKey)\n  local id = rcall("LINDEX", targetKey, len - (count - 1))\n  if id then\n    rcall("LINSERT", targetKey, "BEFORE", id, jobId)\n  else\n    rcall("RPUSH", targetKey, jobId)\n  end\nend\n--[[\n  Function to check for the meta.paused key to decide if we are paused or not\n  (since an empty list and !EXISTS are not really the same).\n]]\nlocal function getTargetQueueList(queueMetaKey, waitKey, pausedKey)\n  if rcall("EXISTS", queueMetaKey) ~= 1 then\n    return waitKey, false\n  else\n    return pausedKey, true\n  end\nend\n-- Try to get as much as 1000 jobs at once\nlocal jobs = rcall("ZRANGEBYSCORE", KEYS[1], 0, tonumber(ARGV[2]) * 0x1000, "LIMIT", 0, 1000)\nif(#jobs > 0) then\n  rcall("ZREM", KEYS[1], unpack(jobs))\n  -- check if we need to use push in paused instead of waiting\n  local target = getTargetQueueList(KEYS[6], KEYS[3], KEYS[5])\n  for _, jobId in ipairs(jobs) do\n    -- Is this really needed?\n    rcall("LREM", KEYS[2], 0, jobId)\n    local priority = tonumber(rcall("HGET", ARGV[1] .. jobId, "priority")) or 0\n    if priority == 0 then\n      -- LIFO or FIFO\n      rcall("LPUSH", target, jobId)\n    else\n      addJobWithPriority(KEYS[4], priority, jobId, target)\n    end\n    -- Emit waiting event (wait..ing@token)\n    rcall("PUBLISH", KEYS[3] .. "ing@" .. ARGV[3], jobId)\n    rcall("HSET", ARGV[1] .. jobId, "delay", 0)\n  end\nend\nlocal nextTimestamp = rcall("ZRANGE", KEYS[1], 0, 0, "WITHSCORES")[2]\nif(nextTimestamp ~= nil) then\n  rcall("PUBLISH", KEYS[1], nextTimestamp / 0x1000)\nend\nreturn nextTimestamp\n',keys:6},"updateProgress-2":{name:"updateProgress",content:'--[[\n  Update job progress\n     Input:\n        KEYS[1] Job id key\n        KEYS[2] progress event key\n        ARGV[1] progress\n        ARGV[2] event data\n      Event:\n        progress(jobId, progress)\n]]\nlocal rcall = redis.call\nif rcall("EXISTS", KEYS[1]) == 1 then -- // Make sure job exists\n  rcall("HSET", KEYS[1], "progress", ARGV[1])\n  rcall("PUBLISH", KEYS[2], ARGV[2])\n  return 0\nelse\n  return -1\nend\n',keys:2}},kQ="2.8.18",CQ=function e(t,n,r){if(!(this instanceof e))return new e(t,n,r);if(pQ.isString(n)){const e=pQ.cloneDeep(r||{});r={...e,redis:{...IQ(n),...e.redis}}}else r=pQ.cloneDeep(n||{});if(!pQ.isObject(r))throw TypeError("Options must be a valid object");if(r.limiter){if(!r.limiter.max||!r.limiter.duration)throw new TypeError("Limiter requires `max` and `duration` options");this.limiter=r.limiter}r.defaultJobOptions&&(this.defaultJobOptions=r.defaultJobOptions),this.name=t,this.token=wQ.v4(),r.redis={enableReadyCheck:!1,...pQ.isString(r.redis)?{...IQ(r.redis)}:r.redis},pQ.defaults(r.redis,{port:6379,host:"127.0.0.1",db:r.redis.db||r.redis.DB,retryStrategy:function(e){return Math.min(Math.exp(e),2e4)}}),this.keyPrefix=r.redis.keyPrefix||r.prefix||"bull",delete r.redis.keyPrefix,this.clients=[];const s=function(e,t,n){const r=pQ.isFunction(t.createClient)?t.createClient:function(e,t){return new lQ(["bclient","subscriber"].includes(e)?{...t,maxRetriesPerRequest:null}:t)},s={};return function(i){return function(){if(null!=s[i])return s[i];const o=pQ.assign({},t.redis),a=s[i]=r(i,o),c=a.options.redisOptions||a.options;if(["bclient","subscriber"].includes(i)&&(c.enableReadyCheck||c.maxRetriesPerRequest))throw Error(vQ.Messages.MISSING_REDIS_OPTS);return e[i+"Initialized"]=!0,t.createClient||e.clients.push(a),n(i,a),a}}}(this,r,((e,n)=>{const r=this.emit.bind(this,"error");n.on("error",r),this.once("close",(()=>n.removeListener("error",r))),"client"===e&&(this._initializing=(async()=>((e,t)=>{const n=xQ||yQ;for(const e in n)t[n[e].name]||t.defineCommand(n[e].name,{numberOfKeys:n[e].keys,lua:n[e].content})})(0,n))().then((()=>{TQ(t+" queue ready")}),(e=>{throw this.emit("error",Error("Error initializing Lua scripts")),e})),this._initializing.catch((()=>{})))}));Object.defineProperties(this,{client:{get:s("client")},eclient:{get:s("subscriber")},bclient:{get:s("bclient")}}),!0!==r.skipVersionCheck&&function(e){return e.info().then((e=>{const t=e.split("\r\n");for(let e=0;t.length>e;e++)if(0===t[e].indexOf("redis_version:"))return t[e].substr(14)}))}(this.client).then((e=>{SQ.lt(e,kQ)&&this.emit("error",Error("Redis version needs to be greater than "+kQ+". Current: "+e))})).catch((()=>{})),this.handlers={},this.processing=[],this.retrieving=0,this.drained=!0,this.settings=pQ.defaults(r.settings,{lockDuration:3e4,stalledInterval:3e4,maxStalledCount:1,guardInterval:5e3,retryProcessDelay:5e3,drainDelay:5,backoffStrategies:{},isSharedChildPool:!1}),this.metrics=r.metrics,this.settings.lockRenewTime=this.settings.lockRenewTime||this.settings.lockDuration/2,this.on("error",(()=>{})),this.timers=new EQ,this.moveUnlockedJobsToWait=this.moveUnlockedJobsToWait.bind(this),this.processJob=this.processJob.bind(this),this.getJobFromId=gQ.fromId.bind(null,this);const i={};pQ.each(["","active","wait","waiting","paused","resumed","meta-paused","active","id","delayed","priority","stalled-check","completed","failed","stalled","repeat","limiter","drained","duplicated","progress"],(e=>{i[e]=this.toKey(e)})),this.keys=i};function IQ(e){let t={};try{const n=mQ.parse(e,!0,!0);if(t.port=parseInt(n.port||"6379",10),t.host=n.hostname,t.db=n.pathname?n.pathname.split("/")[1]:0,n.auth){const e=n.auth.indexOf(":");t.password=n.auth.slice(e+1),e>0&&(t.username=n.auth.slice(0,e))}n.query&&(t={...t,...n.query})}catch(e){throw Error(e.message)}return t}fQ.inherits(CQ,uQ),function(){if(DK)return NK;DK=1;const e=Kz,t=XY,n=LY;function r(t){const n=e.chain([]).concat(t).join(",").split(/\s*,\s*/g).compact().value();return n.length?n:["waiting","active","completed","failed","delayed","paused"]}return NK=function(s){s.prototype.getJob=async function(e){return await this.isReady(),t.fromId(this,e)},s.prototype.getCountsPerPriority=async function(e){const t=[...new Set(e)],r=await n.getCountsPerPriority(this,t),s={};return r.forEach(((e,n)=>{s[""+t[n]]=e||0})),s},s.prototype._commandByType=function(t,n,r){return e.map(t,(e=>{const t=this.toKey(e="waiting"===e?"wait":e);switch(e){case"completed":case"failed":case"delayed":case"repeat":return r(t,n?"zcard":"zrange");case"active":case"wait":case"paused":return r(t,n?"llen":"lrange")}}))},s.prototype.count=function(){return this.getJobCountByTypes("wait","paused","delayed")},s.prototype.getJobCountByTypes=function(){return this.getJobCounts.apply(this,arguments).then((t=>e.chain(t).values().sum().value()))},s.prototype.getJobCounts=function(){const e=r(arguments),t=this.multi();return this._commandByType(e,!0,((e,n)=>{t[n](e)})),t.exec().then((t=>{const n={};return t.forEach(((t,r)=>{n[e[r]]=t[1]||0})),n}))},s.prototype.getCompletedCount=function(){return this.getJobCountByTypes("completed")},s.prototype.getFailedCount=function(){return this.getJobCountByTypes("failed")},s.prototype.getDelayedCount=function(){return this.getJobCountByTypes("delayed")},s.prototype.getActiveCount=function(){return this.getJobCountByTypes("active")},s.prototype.getWaitingCount=function(){return this.getJobCountByTypes("wait","paused")},s.prototype.getStalledCount=function(){const e=this.toKey("stalled");return this.client.scard(e)},s.prototype.getPausedCount=function(){return this.getJobCountByTypes("paused")},s.prototype.getWaiting=function(e,t,n){return this.getJobs(["wait","paused"],e,t,!0,n)},s.prototype.getActive=function(e,t,n){return this.getJobs("active",e,t,!0,n)},s.prototype.getDelayed=function(e,t,n){return this.getJobs("delayed",e,t,!0,n)},s.prototype.getCompleted=function(e,t,n){return this.getJobs("completed",e,t,!1,n)},s.prototype.getFailed=function(e,t,n){return this.getJobs("failed",e,t,!1,n)},s.prototype.getRanges=function(t,n,s,i){n=e.isUndefined(n)?0:n,s=e.isUndefined(s)?-1:s;const o=this.multi(),a=[];return this._commandByType(r(t),!1,((e,t)=>{switch(t){case"lrange":i?(a.push("lrange"),o.lrange(e,-(s+1),-(n+1))):o.lrange(e,n,s);break;case"zrange":a.push("zrange"),i?o.zrange(e,n,s):o.zrevrange(e,n,s)}})),o.exec().then((e=>{let t=[];return e.forEach(((e,n)=>{const r=e[1]||[];t=t.concat(i&&"lrange"===a[n]?r.reverse():r)})),t}))},s.prototype.getJobs=function(e,t,n,r,s){return this.getRanges(e,t,n,r).then((e=>Promise.all(e.map((e=>this.getJobFromId(e,s))))))},s.prototype.getJobLogs=function(t,n,r,s=!0){n=e.isUndefined(n)?0:n,r=e.isUndefined(r)?-1:r;const i=this.multi(),o=this.toKey(t+":logs");return s?i.lrange(o,n,r):i.lrange(o,-(r+1),-(n+1)),i.llen(o),i.exec().then((e=>(s||e[0][1].reverse(),{logs:e[0][1],count:e[1][1]})))},s.prototype.getMetrics=async function(e,t=0,n=-1){const r=this.toKey("metrics:"+e),s=r+":data",i=this.multi();i.hmget(r,"count","prevTS","prevCount"),i.lrange(s,t,n),i.llen(s);const[o,a,c]=await i.exec(),[l,[u,p,d]]=o,[h,f]=a,[m,g]=c;if(l||h)throw l||h||m;return{meta:{count:parseInt(u||"0",10),prevTS:parseInt(p||"0",10),prevCount:parseInt(d||"0",10)},data:f,count:g}}},NK}()(CQ),function(){if(LK)return PK;LK=1;const e=Qz,t=/ERR unknown command ['`]\s*client\s*['`]/;return PK=function(n){n.prototype.setWorkerName=function(){return e.isRedisReady(this.client).then((()=>{const e=this.clientName();return this.bclient.options.connectionName=e,this.bclient.client("setname",e)})).catch((e=>{if(!t.test(e.message))throw e}))},n.prototype.getWorkers=function(){return e.isRedisReady(this.client).then((()=>this.client.client("list"))).then((e=>this.parseClientList(e))).catch((e=>{if(!t.test(e.message))throw e}))},n.prototype.base64Name=function(){return Buffer.from(this.name).toString("base64")},n.prototype.clientName=function(){return this.keyPrefix+":"+this.base64Name()},n.prototype.parseClientList=function(e){const t=e.split("\n"),n=[];return t.forEach((e=>{const t={};e.split(" ").forEach((e=>{const n=e.indexOf("="),r=e.substring(0,n),s=e.substring(n+1);t[r]=s}));const r=t.name;r&&r.startsWith(this.clientName())&&(t.name=this.name,n.push(t))})),n}},PK}()(CQ),function(){if(KK)return YK;KK=1;const e=Kz,t=JK(),n=A,r=XY;return YK=function(s){function i(e,t,n,r){return"repeat:"+a(e+t+r)+":"+n}function o(e,t,n){return e+":"+n+(t.endDate?new Date(t.endDate).getTime()+":":":")+(t.cron?(t.tz?t.tz+":":":")+t.cron:t.every+"")}function a(e){return n.createHash("md5").update(e).digest("hex")}s.prototype.nextRepeatableJob=function(n,s,c,l){const u=this.client,p=c.repeat,d=c.prevMillis||0;!d&&c.jobId&&(p.jobId=c.jobId);const h=p.count?p.count+1:1;if(!e.isUndefined(p.limit)&&h>p.limit)return Promise.resolve();let f=Date.now();if(!e.isUndefined(p.endDate)&&f>new Date(p.endDate))return Promise.resolve();f=f>d?f:d;const m=function(n,r){if(r.cron&&r.every)throw Error("Both .cron and .every options are defined for this repeatable job");if(r.every)return Math.floor(n/r.every)*r.every+r.every;const s=t.parseExpression(r.cron,e.defaults({currentDate:new Date(r.startDate&&new Date(r.startDate)>new Date(n)?r.startDate:n)},r));try{return s.next().getTime()}catch(e){}}(f,p);if(m){const t=p.jobId?p.jobId+":":":",d=o(n,p,t),g=()=>u.zadd(this.keys.repeat,m,d).then((()=>{const o=i(n,t,m,a(d));f=Date.now();const l=m-f;return r.create(this,n,s,e.defaultsDeep({repeat:{count:h,key:d},jobId:o,delay:0>l?0:l,timestamp:f,prevMillis:m},c))}));return l?g():u.zscore(this.keys.repeat,d).then((e=>e?g():Promise.resolve()))}return Promise.resolve()},s.prototype.removeRepeatable=function(e,t){return"string"!=typeof e&&(t=e,e=r.DEFAULT_JOB_NAME),this.isReady().then((()=>{const n=t.jobId?t.jobId+":":":",r=o(e,t,n),s=i(e,n,"",a(r));return this.client.removeRepeatable(this.keys.repeat,this.keys.delayed,s,r,this.keys[""])}))},s.prototype.removeRepeatableByKey=function(e){const t=this._keyToData(e),n=this.keys[""],s=i(t.name||r.DEFAULT_JOB_NAME,t.id?t.id+":":":","",a(e));return this.isReady().then((()=>this.client.removeRepeatable(this.keys.repeat,this.keys.delayed,s,e,n)))},s.prototype._keyToData=function(e){const t=e.split(":");return{key:e,name:t[0],id:t[1]||null,endDate:parseInt(t[2])||null,tz:t[3]||null,cron:t[4]}},s.prototype.getRepeatableJobs=function(e,t,n){const r=this.keys.repeat;return e=e||0,t=t||-1,(n?this.client.zrange(r,e,t,"WITHSCORES"):this.client.zrevrange(r,e,t,"WITHSCORES")).then((e=>{const t=[];for(let n=0;e.length>n;n+=2){const r=this._keyToData(e[n]);t.push({key:r.key,name:r.name,id:r.id,endDate:r.endDate,tz:r.cron?r.tz:null,cron:r.cron||null,every:r.cron?null:parseInt(r.tz),next:parseInt(e[n+1])})}return t}))},s.prototype.getRepeatableCount=function(){return this.client.zcard(this.toKey("repeat"))}},YK}()(CQ),CQ.prototype.off=CQ.prototype.removeListener;const RQ=CQ.prototype.on;CQ.prototype.on=function(e){return this._registerEvent(e),RQ.apply(this,arguments)};const OQ=CQ.prototype.once;async function NQ(e){if("end"!==e.status){let t,n;return new Promise(((r,s)=>{t=r,n=s,e.once("end",t),AQ(e.quit().catch((e=>{if("Connection is closed."!==e.message)throw e})),500).catch((()=>{})).finally((()=>{e.once("error",n),e.disconnect(),["connecting","reconnecting"].includes(e.status)&&r()}))})).finally((()=>{e.removeListener("end",t),e.removeListener("error",n)}))}}function DQ(e,t,n){const r=t&&t.jobId,s=pQ.get(e,"groupKey");return s?`${r||wQ.v4()}:${pQ.get(n,s)}`:r}CQ.prototype.once=function(e){return this._registerEvent(e),OQ.apply(this,arguments)},CQ.prototype._initProcess=function(){return this._initializingProcess||(this.delayedTimestamp=Number.MAX_VALUE,this._initializingProcess=this.isReady().then((()=>this._registerEvent("delayed"))).then((()=>this.updateDelayTimer())),this.errorRetryTimer={}),this._initializingProcess},CQ.prototype._setupQueueEventListeners=function(){const e=this.keys.active,t=this.keys.stalled,n=this.keys.progress,r=this.keys.delayed,s=this.keys.paused,i=this.keys.resumed,o=this.keys.waiting,a=this.keys.completed,c=this.keys.failed,l=this.keys.drained,u=this.keys.duplicated,p=(n,r,s)=>{const i=r.split("@"),a=i[1];switch(i[0]){case e:bQ.emitSafe(this,"global:active",s,"waiting");break;case o:this.token===a&&bQ.emitSafe(this,"waiting",s,null),a&&bQ.emitSafe(this,"global:waiting",s,null);break;case t:this.token===a&&bQ.emitSafe(this,"stalled",s),bQ.emitSafe(this,"global:stalled",s);break;case u:this.token===a&&bQ.emitSafe(this,"duplicated",s),bQ.emitSafe(this,"global:duplicated",s)}},d=(e,t)=>{switch(e.split("@")[0]){case n:try{const{progress:e,jobId:n}=JSON.parse(t);bQ.emitSafe(this,"global:progress",n,e)}catch(e){const n=t.indexOf(","),r=t.substring(0,n),s=t.substring(n+1);bQ.emitSafe(this,"global:progress",r,JSON.parse(s))}break;case r:{const e=pQ.ceil(t);this.delayedTimestamp>e&&(this.delayedTimestamp=e,this.updateDelayTimer());break}case s:case i:bQ.emitSafe(this,"global:"+t);break;case a:{const e=JSON.parse(t);bQ.emitSafe(this,"global:completed",e.jobId,e.val,"active");break}case c:{const e=JSON.parse(t);bQ.emitSafe(this,"global:failed",e.jobId,e.val,"active");break}case l:bQ.emitSafe(this,"global:drained")}};this.eclient.on("pmessage",p),this.eclient.on("message",d),this.once("close",(()=>{this.eclient.removeListener("pmessage",p),this.eclient.removeListener("message",d)}))},CQ.prototype._registerEvent=function(e){if(e.startsWith("global:")||-1!==["waiting","delayed","duplicated"].indexOf(e)){this.registeredEvents||(this._setupQueueEventListeners(),this.registeredEvents=this.registeredEvents||{});const t=e.replace("global:","");return this.registeredEvents[t]?this.registeredEvents[t]:bQ.isRedisReady(this.eclient).then((()=>{const e=this.toKey(t);return this.registeredEvents[t]=-1!==["active","waiting","stalled","duplicated"].indexOf(t)?this.eclient.psubscribe(e+"*"):this.eclient.subscribe(e)})).then((()=>{bQ.emitSafe(this,"registered:"+e)}))}return Promise.resolve()},CQ.ErrorMessages=vQ.Messages,CQ.prototype.isReady=async function(){return await this._initializing,this},CQ.prototype.disconnect=async function(){await Promise.all(this.clients.map((e=>e.blocked?e.disconnect():NQ(e))))},CQ.prototype.removeJobs=function(e){return gQ.remove(this,e)},CQ.prototype.close=function(e){let t=!0;return this.closing?this.closing:this.closing=this.isReady().then(this._initializingProcess).catch((()=>{t=!1})).then((()=>t&&this.pause(!0,e))).catch((()=>{})).finally((()=>this._clearTimers())).then((()=>{if(!this.childPool)return;const t=this.childPool.clean().catch((()=>{}));return e?void 0:t})).then((async()=>this.disconnect()),(e=>{})).finally((()=>{this.closed=!0,bQ.emitSafe(this,"close")}))},CQ.prototype._clearTimers=function(){return pQ.each(this.errorRetryTimer,(e=>{clearTimeout(e)})),clearTimeout(this.delayTimer),clearInterval(this.guardianTimer),clearInterval(this.moveUnlockedJobsToWaitInterval),this.timers.clearAll(),this.timers.whenIdle()},CQ.prototype.process=function(e,t,n){switch(arguments.length){case 1:n=e,t=1,e=gQ.DEFAULT_JOB_NAME;break;case 2:n=t,"string"==typeof e?t=1:(t=e,e=gQ.DEFAULT_JOB_NAME)}return this.setHandler(e,n),this._initProcess().then((()=>this.start(t,e)))},CQ.prototype.start=function(e,t){return this.run(e,t).catch((e=>{throw bQ.emitSafe(this,"error",e,"error running queue"),e}))},CQ.prototype.setHandler=function(e,t){if(!t)throw Error("Cannot set an undefined handler");if(this.handlers[e])throw Error("Cannot define the same handler twice "+e);if(this.setWorkerName(),"string"==typeof t){const n=t+([".js",".ts",".flow",".cjs"].includes(hQ.extname(t))?"":".js");if(!dQ.existsSync(n))throw Error("File "+n+" does not exist");const r=this.settings.isSharedChildPool;this.childPool=this.childPool||function(){if(nQ)return tQ;nQ=1;const e=O.fork,t=u,n=Kz,r=oQ(),{killAsync:s}=aQ(),i=function e(){if(!(this instanceof e))return new e;this.retained={},this.free={}};return i.prototype.retain=function(s){const i=this;let o=i.getFree(s).pop();return o?(i.retained[o.pid]=o,Promise.resolve(o)):function(e){const t=[],s=[];return n.forEach(e,(e=>{if(-1===e.indexOf("--inspect"))t.push(e);else{const t=e.split("=")[0];s.push(r().then((e=>`${t}=${e}`)))}})),Promise.all(s).then((e=>t.concat(e)))}(process.execArgv).then((n=>(o=e(t.join(__dirname,"./master.js"),{execArgv:n}),o.processFile=s,i.retained[o.pid]=o,o.on("exit",i.remove.bind(i,o)),async function(e,t){const n=new Promise(((t,n)=>{const r=s=>{"init-complete"===s.cmd?t():"error"===s.cmd&&n(s.error),e.off("message",r)};e.on("message",r)}));await new Promise((n=>e.send({cmd:"init",value:t},n))),await n}(o,o.processFile).then((()=>o)).catch((e=>{throw this.remove(o),e})))))},i.prototype.release=function(e){delete this.retained[e.pid],this.getFree(e.processFile).push(e)},i.prototype.remove=function(e){delete this.retained[e.pid];const t=this.getFree(e.processFile),n=t.indexOf(e);n>-1&&t.splice(n,1)},i.prototype.kill=function(e,t){return this.remove(e),s(e,t||"SIGKILL",3e4)},i.prototype.clean=function(){const e=n.values(this.retained).concat(this.getAllFree());this.retained={},this.free={};const t=[];return e.forEach((e=>{t.push(this.kill(e,"SIGTERM"))})),Promise.all(t).then((()=>{}))},i.prototype.getFree=function(e){return this.free[e]=this.free[e]||[]},i.prototype.getAllFree=function(){return n.flatten(n.values(this.free))},tQ=function e(t=!1){return!1===t?new i:(this instanceof i||void 0!==e.instance||(e.instance=new i),e.instance)}}()(r);const s=cQ();this.handlers[e]=s(t,this.childPool).bind(this)}else t=t.bind(this),this.handlers[e]=t.length>1?_Q(t):function(){try{return Promise.resolve(t.apply(null,arguments))}catch(e){return Promise.reject(e)}}},CQ.prototype.add=function(e,t,n){return"string"!=typeof e&&(n=t,t=e,e=gQ.DEFAULT_JOB_NAME),(n=pQ.cloneDeep({...this.defaultJobOptions,...n})).jobId=DQ(this.limiter,n,t),n.repeat?this.isReady().then((()=>this.nextRepeatableJob(e,t,n,!0))):gQ.create(this,e,t,n)},CQ.prototype.retryJobs=async function(e={}){let t=0;do{t=await yQ.retryJobs(this,e.count)}while(t)},CQ.prototype.addBulk=function(e){const t=e.map((e=>{const t=DQ(this.limiter,e.opts,e.data);return{...e,name:"string"!=typeof e.name?gQ.DEFAULT_JOB_NAME:e.name,opts:{...this.defaultJobOptions,...e.opts,jobId:t}}}));return gQ.createBulk(this,t)},CQ.prototype.empty=function(){const e=this.keys;let t=this.multi();return t.lrange(e.wait,0,-1),t.lrange(e.paused,0,-1),t.keys(this.toKey("*:limited")),t.del(e.wait,e.paused,e["meta-paused"],e.delayed,e.priority,e.limiter,e.limiter+":index"),t.exec().then((e=>{let[n,r,s]=e;n=n[1],r=r[1],s=s[1];const i=r.concat(n).map(this.toKey,this);if(i.length||s.length){t=this.multi();for(let e=0;i.length>e;e+=1e4)t.del.apply(t,i.slice(e,e+1e4));for(let e=0;s.length>e;e+=1e4)t.del.apply(t,s.slice(e,e+1e4));return t.exec()}}))},CQ.prototype.pause=function(e,t){return this.isReady().then((()=>{if(e){if(this.paused||(this.paused=new Promise((e=>{this.resumeLocal=function(){this.paused=null,e()}}))),!this.bclientInitialized)return;return t?NQ(this.bclient).then((()=>this.bclient.connect())):this.whenCurrentJobsFinished()}return yQ.pause(this,!0)})).then((()=>bQ.emitSafe(this,"paused")))},CQ.prototype.resume=function(e){return this.isReady().then((()=>{if(!e)return yQ.pause(this,!1);this.resumeLocal&&this.resumeLocal()})).then((()=>{bQ.emitSafe(this,"resumed")}))},CQ.prototype.isPaused=async function(e){if(e)return!!this.paused;{await this.isReady();const e=this.multi();e.exists(this.keys["meta-paused"]),e.hexists(this.toKey("meta"),"paused");const[[,t],[,n]]=await e.exec();return!(!t&&!n)}},CQ.prototype.run=function(e,t){if(!Number.isInteger(e))throw Error("Cannot set Float as concurrency");const n=[];return this.isReady().then((()=>this.moveUnlockedJobsToWait())).then((()=>bQ.isRedisReady(this.bclient))).then((()=>{for(;e--;)n.push(new Promise((n=>{this.processJobs(`${t}:${e}`,n)})));return this.startMoveUnlockedJobsToWait(),Promise.all(n)}))},CQ.prototype.updateDelayTimer=function(){return this.closing?Promise.resolve():yQ.updateDelaySet(this,Date.now()).then((e=>{this.delayedTimestamp=e?e/4096:Number.MAX_VALUE,this.delayTimer&&clearTimeout(this.delayTimer);const t=pQ.min([this.delayedTimestamp-Date.now(),this.settings.guardInterval]);return t>0?this.delayTimer=setTimeout((()=>this.updateDelayTimer()),t):this.updateDelayTimer(),null})).catch((e=>{bQ.emitSafe(this,"error",e,"Error updating the delay timer"),this.delayTimer&&clearTimeout(this.delayTimer),this.delayTimer=setTimeout((()=>this.updateDelayTimer()),this.settings.guardInterval)}))},CQ.prototype.moveUnlockedJobsToWait=function(){return this.closing?Promise.resolve():yQ.moveUnlockedJobsToWait(this).then((([e,t])=>{const n=e.map((e=>this.getJobFromId(e).then((e=>(bQ.emitSafe(this,"failed",e,Error("job stalled more than allowable limit"),"active"),null))))),r=t.map((e=>this.getJobFromId(e).then((e=>(null!==e&&bQ.emitSafe(this,"stalled",e),null)))));return Promise.all(n.concat(r))})).catch((e=>{bQ.emitSafe(this,"error",e,"Failed to handle unlocked job in active")}))},CQ.prototype.startMoveUnlockedJobsToWait=function(){clearInterval(this.moveUnlockedJobsToWaitInterval),this.settings.stalledInterval>0&&!this.closing&&(this.moveUnlockedJobsToWaitInterval=setInterval(this.moveUnlockedJobsToWait,this.settings.stalledInterval))},CQ.prototype.processJobs=function(e,t,n){const r=this.processJobs.bind(this,e,t);process.nextTick((()=>{this._processJobOnNextTick(r,e,t,n)}))},CQ.prototype._processJobOnNextTick=function(e,t,n,r){this.closing?n(this.closing):(this.paused||Promise.resolve()).then((()=>{const n=r?Promise.resolve(r):this.getNextJob();return this.processing[t]=n.then(this.processJob).then(e,(n=>(this.closing&&"Connection is closed."===n.message||(bQ.emitSafe(this,"error",n,"Error processing job"),clearTimeout(this.errorRetryTimer[t]),this.errorRetryTimer[t]=setTimeout((()=>{e()}),this.settings.retryProcessDelay)),null)))})).catch((e=>{bQ.emitSafe(this,"error",e,"Error processing job")}))},CQ.prototype.processJob=function(e,t=!1){let n,r=!1;if(!e)return Promise.resolve();const s=()=>{n=this.timers.set("lockExtender",this.settings.lockRenewTime,(()=>{yQ.extendLock(this,e.id,this.settings.lockDuration).then((e=>{e&&!r&&s()})).catch((t=>{bQ.emitSafe(this,"lock-extension-failed",e,t)}))}))},i=e.opts.timeout,o=()=>{r=!0,this.timers.clear(n)},a=n=>e.moveToCompleted(n,void 0,t).then((t=>(bQ.emitSafe(this,"completed",e,n,"active"),t?this.nextJobFromJobData(t[0],t[1]):null))),c=t=>{const n=t;return e.moveToFailed(t).then((t=>(bQ.emitSafe(this,"failed",e,n,"active"),t?this.nextJobFromJobData(t[0],t[1]):null)))};s();const l=this.handlers[e.name]||this.handlers["*"];if(l){let t=l(e);return i&&(t=AQ(t,i)),bQ.emitSafe(this,"active",e,t,"waiting"),t.then(a).catch(c).finally((()=>{o()}))}return c(Error("Missing process handler for job type "+e.name))},CQ.prototype.multi=function(){return this.client.multi()},CQ.prototype.getNextJob=async function(){if(this.closing)return Promise.resolve();if(!this.drained)return this.moveToActive();try{this.bclient.blocked=!0;const e=await this.bclient.brpoplpush(this.keys.wait,this.keys.active,this.settings.drainDelay);if(this.bclient.blocked=!1,e)return this.moveToActive(e)}catch(e){if(!this.paused||"Connection is closed."!==e.message)throw e}},CQ.prototype.moveToActive=async function(e){return await this.isReady(),yQ.moveToActive(this,e).then((([e,t])=>this.nextJobFromJobData(e,t)))},CQ.prototype.nextJobFromJobData=function(e,t){if(e){this.drained=!1;const n=gQ.fromJSON(this,e,t);return n.opts.repeat?this.nextRepeatableJob(n.name,n.data,n.opts).then((()=>n)):n}return this.drained=!0,bQ.emitSafe(this,"drained"),null},CQ.prototype.retryJob=function(e){return e.retry()},CQ.prototype.toKey=function(e){return[this.keyPrefix,this.name,e].join(":")},CQ.prototype.clean=function(e,t,n){return this.isReady().then((()=>{if(null==e)throw Error("You must define a grace period.");if(t||(t="completed"),-1===pQ.indexOf(["completed","wait","active","paused","delayed","failed"],t))throw Error("Cannot clean unknown queue type "+t);return yQ.cleanJobsInSet(this,t,Date.now()-e,n).then((e=>(bQ.emitSafe(this,"cleaned",e,t),e))).catch((e=>{throw bQ.emitSafe(this,"error",e),e}))}))},CQ.prototype.obliterate=async function(e){await this.pause();let t=0;do{t=await yQ.obliterate(this,{force:!1,count:1e3,...e})}while(t)},CQ.prototype.whenCurrentJobsFinished=function(){if(!this.bclientInitialized)return Promise.resolve();const e=NQ(this.bclient).then((()=>this.bclient.connect()));return Promise.all(Object.values(this.processing)).then((()=>e))},Vz.exports=CQ,Vz.exports.Job=XY,Vz.exports.utils=Qz;var PQ=P(Vz.exports);const LQ={Referer:"https://www.aliyundrive.com/","User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36"},MQ=new zz,BQ=new zz,jQ=new zz;class FQ extends hB{constructor(e,t){super(),Object.assign(this._http.defaults.headers,LQ),this._http.defaults.validateStatus=e=>e>=200,Array.isArray(t)&&t.length>0&&(t=t[Math.floor(Math.random()*t.length)]),this.apiUrl="https://api.aliyundrive.com",this.openApiUrl="https://open.aliyundrive.com/adrive/v1.0",this.redis=e,this.token=t,this._queue=new PQ("ali-del-task",{redis:{host:e.options.host,port:e.options.port,username:e.options.username,password:e.options.password,db:e.options.db}}),this._queue.process((async e=>{const{fileId:t}=e.data;await this.delete(t)}))}pair(e,t,n){for(const r of t){const t=this.removeExt(r.name).toLowerCase();(e.includes(t)||t.includes(e))&&n.push(r)}}findSubs(e,t){const n=[];this.pair(this.removeExt(e).toLowerCase(),t,n),0===n.length&&n.push(...t);const r=[];for(const e of n)r.push({name:this.removeExt(e.name),ext:e.file_extension||"",fileId:e.file_id});return r}matchShare(e){const t=e?.match(/(?:aliyundrive|alipan)\.com\/s\/([\w\-]+)(?:\/folder\/([\w\-]+))?/i);if(t){const[e,n,r]=t;return{url:e,shareId:n,folderId:r||"",pic:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPAAAAFeCAYAAAC7NJK4AAAAAXNSR0IArs4c6QAAFWVJREFUeF7tnVm0XGWVgHfdGm4ggAIOwQlRRJwCiDStazmAswgo4AjRBSEMrm7Fh+6X7sf2RZcv2i0oBJYCirPgcpagiLoUQyBIFEGGQEiWDIFIArk19dqnUsm5lVN1qmpX1b677nde7sM9f+1d3/6/M/z/f04VVq3c0RQ2CEAgJIECAoesG0lDICGAwHQECAQmgMCBi0fqEEBg+gAEAhNA4MDFI3UIIDB9AAKBCSBw4OKROgQQmD4AgcAEEDhw8UgdAghMH4BAYAIIHLh4pA4BBKYPQCAwAQQOXDxShwAC0wcgEJgAAgcuHqlDAIHpAxAITACBAxeP1CGAwPQBCAQmgMCBi0fqEEBg+gAEAhNA4MDFI3UIIDB9AAKBCSBw4OKROgQQmD4AgcAEEDhw8UgdAghMH4BAYAIIHLh4pA4BBKYPQCAwAQQOXDxShwAC0wcgEJgAAgcuHqlDAIHpAxAITACBAxeP1CGAwPQBCAQmgMCBi0fqEEBg+gAEAhNA4MDFI3UIIDB9AAKBCSBw4OKROgQQmD4AgcAEEDhw8UgdAghMH4BAYAIIHLh4pA4BBKYPQCAwAQQOXDxShwAC0wcgEJgAAgcuHqlDAIHpAxAITACBAxeP1CGAwPQBCAQmgMCBi0fqEEBg+gAEAhNA4MDFI3UIIDB9AAKBCSBw4OKROgQQmD4AgcAEEDhw8UgdAghMH4BAYAIIHLh4pA4BBKYPQCAwAQQOXDxShwAC0wcgEJgAAgcuHqlDAIHpAxAITACBAxeP1CGAwPQBCAQmgMCBi0fqEEBg+gAEAhNA4MDFI3UIIDB9AAKBCSBw4OKROgQQmD4AgcAEEDhw8UgdAghMH4BAYAIIHLh4pA4BBKYPQCAwAQQOXDxShwAC0wcgEJgAAgcuHqlDAIHpAxAITACBAxeP1CGAwPQBCAQmgMCBi0fqEEBg+gAEAhNA4MDFI3UIIDB9AAKBCSBw4OKROgQQmD4AgcAEEDhw8UgdAghMH4BAYAIIHLh4pA4BBKYPQCAwAQQOXDxShwAC0wcgEJgAAgcuHqlDAIHpAxAITACBAxeP1CGAwPQBCAQmgMCBi0fqEEBg+gAEAhNA4MDFI3UIIDB9AAKBCSBw4OKROgQQmD4AgcAEEDhw8UgdAghMH4BAYAIIHLh4pA4BBKYPQCAwAQQOXDxShwAC0wcgEJgAAgcuHqlDAIHpAxAITACBAxeP1CGAwPQBCAQmgMCBi0fqEEBg+gAEAhNA4MDFI3UIIDB9AAKBCSBw4OKROgQQmD4AgcAEEDhw8UgdAghMH4BAYAIIHLh4pA4BBKYPQCAwAQQOXDxShwAC0wcgEJgAAgcuHqlDAIHpAxAITACBAxeP1CGAwPQBCAQmgMCBi0fqEEBg+gAEAhNA4MDFI3UIIDB9AAKBCSBw4OKROgQQmD4AgcAEEDhw8UgdAghMH4BAYAIIHLh4pA4BBKYPQCAwAQQOXDxShwAC0wcgEJgAAgcuHqlDAIHpAxAITACBAxeP1CGAwPQBCAQmgMCBi0fqEEBg+sBUEHjLCSU54YSS3HNvQ9atrcudd9Zl586p+Go9vwQCT3+NF8U3PPucirz+DcXkuz72WFO+csmc3HNPY+q/+9QI/NKXzsi+Swu5BavXm/LAxqb885/N3H1HucPHz67IIYfk5zfKmJs3N+WrV8yN8iMX5GcddFBB/v2TFXn+C2aS/P74h7pcdun0f2/9rlMj8H/996wc+uJWAXttO3Y0ZfVlVTnssBk58a2tI/aot/W3NeTy1fM7UL/5jTKX++9ryGf+p/d15IWfqMgxrx0Ph27f5ZFHmvLli+fk/vtHc4Y87l+KsmJFRZbsI/LUU0256mtVufnm+ihRLtjPWrQCH3HEjLzzXaWxFGbdLXW5+EsIPCqB3/q2kpx2elnK5bGUS0Z9QBlPltmfOnUC1+si62+ry9atey6R9z+gIMccU5RSSWT79qZcdmlVjjzSR+BqVeR7363K9b+s5dY5fXbMOihkfUC6s/dzBj5nZUWWH5V/5ZKb7AA7PPpoU664vCoPPtDfGRiBu8OdOoGzBDnjA2V5+ztKUiiIPPBAQ/7vi3PJQId1a18W9yPlIPu285qEwFYGk2ifFnjj/Q25++69xa9UCrJsWSGpb7OP0u6zT0GOfV1RKhXhDDyJIubF6CXIf/znrLzsiNZZ5te/qsnVV1XzPq6v/w8i5SD7IvB8/GmBs65EZmdFzl5ZSa6yHn+8KT+8rio3/ab3PfBrlhdl5bll2XffAgL31dvHvFM3QQ5/2Yycd15FnnlgQZ5+SuTKK+fk5j+OZoBjECkH2ReBBxN4+fKirPh4WZ7xjNYov56B9Sz9nW9X5d4uU0kIPGYhB/34boKkj96bHmzIF78wmstnzW8QKQfZF4HnV18HsHTAUW+Buo0FHPK8gpxxRlle/Zpisp9u259sypo1Nfn5z2p7LepA4EENG/P+3QRJT/D//nd1ueLy0c0PDiLlQp1GGnNZRvLxp5/REli3vMG8t729JCedVJKl+xWk0RC5YU1NvnnN3rdMCDyS0ozuQ7Jk0kGNT/zbbDK4ocvqrvnGnPz2pj2Xz296c0lOOaUkpT6mJ2pVkeuuq8mNv94zeozAo6tfr08aRGD9HB3v+PBHyvLwP3S0ey5zSSUCT6Z2fUfJkik9wb9lS1O+9L87Rf+2t0GmJ7JGmocRWM8KW7Y05Omn87/aQQcWknt33R7f2pTHUlNj3VovWSKybNmMzMyI9DONlJ/FZPbQg+z73l/e/X3TUfdbWpDnPHcwDnlZl4oiz3v+TDK1qAf3zZsbyRm7vWl9fnhtVf7+9/6muvLijev/Uz2NlJ4+ylpelxZYBa1W955/KJcLyQKCUQncz5RTu9iLaRrp0ENn5PwLK/KsZ012uWk3sdor9m5fP5oBTwTOIdB5NrzpNzX51EWzoqPQc3Mi37qmKjfeOH/xRN70hIZsSzQtAuua8ZNPLYueqRfK9off1+Wuuxty9jllOfjg+QLrgNTsbCG5otDRZa2lrme3bjOFgswukWTAS8+8O3c2580fP7WjNWOx4Q7OwFbWfbXvFHjTpoacu6oiBxxQkG1PNGX16jn5y4b5xViMAqfv/foCO4GdfvbTmnz3O9lz88cdV5SzPlYWXXjRXkV3x5/nnxWPProo9YbIIGdL7oEnUNhBQnQKrKOVq86viJ5xdNOiX3Lx/AENBB6E8Pj27SWwLvU8/l9bU0NZq+iOPbYoZ67QK4qCrF9fl2t/UJXND+WfoRF4fPUc6pOzBpRe+aoZ0Q6gZ2G9BP7B96vyi5/vuYz2EDhrrXa3L3z44TPyokNbB6BuSwg72x54YEGWH1WUYjF7EGv//QvywhcVpFjs/15TL7dPO60sB++6P1WWKt29947m8vLhfzTmDS62v5OeWXWBhuasl7k//UktqWF608c0jz++tc5dt15zv+l2CDyUZuNr1G1EWAeydG5Q76H0+dhLLt65+wjtIfD4COz9yaMahT5rRVne+KbWQgrdbl1Xl9WXZU/PjOr76cFi1XkVeclLWgewXk8M6YP8OoKtBy/dkpVYdzWS+d+NG7MPMu8/rTW3rP2Cp5FGVTXD53QTWFfoXHDhbPIwvR7Ff/LjWnKZpRsC5wN/3XFFOfOssizd9bKEhx9uyupLx/u2Cz3jrvhYWY46unXp3Fm3rKyzVmJt2NBIrrjOXVWWUqmwe/ArPYCln3XX3xryuc/GfP/OVE8jtQutR+d3vbt1tL3vvoZ8/nM7k7k/D4FrNUmW9vUzv3jiiUV51atbD9vrPfyaNflTGnrP/453lpJLSusZWM+C519QkRfvelGCjgDrwS99G9Ipk8o3N9cc+n1UKuJHz6yIPq+t8urZdN26ulyxur8z/knvLSVPnm3fLsmBRqeD2ot5ssTX76SPd665Pv/xzvzD3eT3WBQCH/mKmd0j0umRzEkKrJ1Kp0j0HvjWW+vJUT9vG2YeWFch6b2j3gPrc7e9ZMuL/5GPluXNb2kd+PJE0ieC9MChTP/610bfwqVz0LO93vLoK3Lam77X6tKvzMmjj+QPTLXbaL2XzBYSzrp96qKKHLbrUjwdb9s2PZjmP7mUx8nz/4tCYO1c+kihDgil53MnKfAwRR5G4GHiZLXpvHTuHD/obJO+T+61BrlXfu0R5f32awn84ION5PU4i+HldMPWbVEIrHAu+vSs6Ki0bu1pCwTO7jbpcQPdQ69a9BnqP/V4z1TnoFM/l9tZ0fVK5ZRTy8mtjr6xI+vMOWxn79VOl6rqCHd6qe044oz6MxeNwOmzWZbA415KOUzhPM7A6Yfj2wNI3Z7o6fxOOmK8clVFnv3s1hn0ySebcvWVVVm7Nv/ePf1Zegmsz/HqFOCkXrgXdSR60QicdwbOE2zYpZSDPDCRl8Mw/x9k7bV+/ntOKsl7T9ZR21a0rAUwvfLovPTetq0p37h6cIk1RvsA1m0Jpc5l6wFHNx2U7Fxiqf/XV+bogSjrAJ0ejUbgYXrXCNv0ejJIzwznXVBJBkf0/uzHP6rJdddW541CdzsDt1Mc9nHCSAJ33oMOO2X0oQ+X5YQTW4Nfug37Ob3Woevnph8zzFrNlXeLNA2LOabuDKyC3n57XW6/rSFbH2/K0qUi+rMb+h5oPRKn3xucV+C840s/jxPqGUl/8qM4xBtsh3mcsDPnek3khhtqPe9ftU3n5W8/973d+HRehut+w4wmI3BeD5zCF7vrmfSJJ5pdH0v72536Wp3+54F7IexH4PwSdN9jUvfAKq8+MPCCXb9sMOwocvqbdA5q5U1DZVFA4PzeM3VnYBX4jjvqoi86a1/CtTF0TktoJ2s//K5PLA36SwHTILBeIXzwg3sepB9GtDbfzp+3OWB/kVPft+ezBz0wIPAiFVhX1ejqoXKlBWDH9mbyUxu3rB3tL9ZFF1if1mq/8L7dVXT6R28zuv0KQucyxPwuNn+PQaaXEDif7lSegfv95YN8PN330AOELjPUs/igI739xh33JXR6iWm/OY1iv34HtRA4nzYC5zPK3OPkU0ry7ve0pluy3jetA1fHv972o2GjGMRKJ6/3/3pwa2/p0fl+MHS+uUIvt7c+1pS51BN+c/p+qS0NaaZWiuryUV0F9/KX7/kJl34GtRA4vyoI3IWRPkR++ullqdZkr58i3WdJQZ67rPWaF92y5hDTUxz5ZZjMHlmvZNUnjfQyevOWpjz0UCN5e8nGja11x+0X8A2yDrnbN+kc5Vb5b7mlnvxKoW66+qrz1yLb7yObxDxw1mt11lxfT6YbF/KGwF2qk/5Fh14F7DYwE0XgSXbO9CIPfeXR16+u7n6oYyHy6vWmkEly6xULgbvQ6fzR6Kzd9NHAtX+qy1VX9veo20IpumceKqr+BMq3v1Wdd2UziluOUX8vfdmezqEv5A2Be1Sn/Qhg1i6bNjVlw4b6QI+5LeSOQG4xCUyNwDHxkzUEbAQQ2MaP1hBwJYDArvgJDgEbAQS28aM1BFwJILArfoJDwEYAgW38aA0BVwII7Iqf4BCwEUBgGz9aQ8CVAAK74ic4BGwEENjGj9YQcCWAwK74CQ4BGwEEtvGjNQRcCSCwK36CQ8BGAIFt/GgNAVcCCOyKn+AQsBFAYBs/WkPAlQACu+InOARsBBDYxo/WEHAlgMCu+AkOARsBBLbxozUEXAkgsCt+gkPARgCBbfxoDQFXAgjsip/gELARQGAbP1pDwJUAArviJzgEbAQQ2MaP1hBwJYDArvgJDgEbAQS28aM1BFwJILArfoJDwEYAgW38aA0BVwII7Iqf4BCwEUBgGz9aQ8CVAAK74ic4BGwEENjGj9YQcCWAwK74CQ4BGwEEtvGjNQRcCSCwK36CQ8BGAIFt/GgNAVcCCOyKn+AQsBFAYBs/WkPAlQACu+InOARsBBDYxo/WEHAlgMCu+AkOARsBBLbxozUEXAkgsCt+gkPARgCBbfxoDQFXAgjsip/gELARQGAbP1pDwJUAArviJzgEbAQQ2MaP1hBwJYDArvgJDgEbAQS28aM1BFwJILArfoJDwEYAgW38aA0BVwII7Iqf4BCwEUBgGz9aQ8CVAAK74ic4BGwEENjGj9YQcCWAwK74CQ4BGwEEtvGjNQRcCSCwK36CQ8BGAIFt/GgNAVcCCOyKn+AQsBFAYBs/WkPAlQACu+InOARsBBDYxo/WEHAlgMCu+AkOARsBBLbxozUEXAkgsCt+gkPARgCBbfxoDQFXAgjsip/gELARQGAbP1pDwJUAArviJzgEbAQQ2MaP1hBwJYDArvgJDgEbAQS28aM1BFwJILArfoJDwEYAgW38aA0BVwII7Iqf4BCwEUBgGz9aQ8CVAAK74ic4BGwEENjGj9YQcCWAwK74CQ4BGwEEtvGjNQRcCSCwK36CQ8BGAIFt/GgNAVcCCOyKn+AQsBFAYBs/WkPAlQACu+InOARsBBDYxo/WEHAlgMCu+AkOARsBBLbxozUEXAkgsCt+gkPARgCBbfxoDQFXAgjsip/gELARQGAbP1pDwJUAArviJzgEbAQQ2MaP1hBwJYDArvgJDgEbAQS28aM1BFwJILArfoJDwEYAgW38aA0BVwII7Iqf4BCwEUBgGz9aQ8CVAAK74ic4BGwEENjGj9YQcCWAwK74CQ4BGwEEtvGjNQRcCSCwK36CQ8BGAIFt/GgNAVcCCOyKn+AQsBFAYBs/WkPAlQACu+InOARsBBDYxo/WEHAlgMCu+AkOARsBBLbxozUEXAkgsCt+gkPARgCBbfxoDQFXAgjsip/gELARQGAbP1pDwJUAArviJzgEbAQQ2MaP1hBwJYDArvgJDgEbAQS28aM1BFwJILArfoJDwEYAgW38aA0BVwII7Iqf4BCwEUBgGz9aQ8CVAAK74ic4BGwEENjGj9YQcCWAwK74CQ4BGwEEtvGjNQRcCSCwK36CQ8BGAIFt/GgNAVcCCOyKn+AQsBFAYBs/WkPAlQACu+InOARsBBDYxo/WEHAlgMCu+AkOARsBBLbxozUEXAkgsCt+gkPARgCBbfxoDQFXAgjsip/gELARQGAbP1pDwJUAArviJzgEbAQQ2MaP1hBwJYDArvgJDgEbAQS28aM1BFwJILArfoJDwEYAgW38aA0BVwII7Iqf4BCwEUBgGz9aQ8CVAAK74ic4BGwEENjGj9YQcCWAwK74CQ4BGwEEtvGjNQRcCSCwK36CQ8BGAIFt/GgNAVcCCOyKn+AQsBFAYBs/WkPAlQACu+InOARsBBDYxo/WEHAlgMCu+AkOARsBBLbxozUEXAkgsCt+gkPARuD/ASxKS4jv+8+gAAAAAElFTkSuQmCC"}}return null}getParentFolderId(e,t){if(e&&""!==e)return e;if(0===(t.file_infos||[]).length)return"";const n=t.file_infos[0];return"folder"===n.type?n.file_id:"root"}async getShareByAnonymous(e){const t=this.apiUrl+"/adrive/v3/share_link/get_share_by_anonymous",n={share_id:e};return await this.fetch(t,{data:n})}async listFile(e,t,n,r,s,i){const o=this.apiUrl+"/adrive/v3/file/list",a={share_id:t,parent_file_id:n,limit:200,order_by:"name",order_direction:"ASC"};i&&(a.marker=i);const c=await this.fetch(o,{data:a,headers:{"X-Share-Token":e,"X-Canary":"client=Android,app=adrive,version=v4.3.1"}}),l=[];for(const e of c.items||[])if("folder"===e.type)l.push(e);else if("file"===e.type)if("video"===e.category||"audio"===e.category){if(5242880>e.size)continue;e.name=e.name.replace(/玩偶哥.*【神秘的哥哥们】/g,""),r.push(e)}else this.subExt.some((t=>e.file_extension.endsWith(t)))&&s.push(e);c.next_marker&&""!==c.next_marker&&await this.listFile(e,t,n,r,s,c.next_marker);for(const n of l)await this.listFile(e,t,n.file_id,r,s)}async getVod(e){const t=this.matchShare(e);if(!t)return null;const{url:n,shareId:r,folderId:s}=t,i=await this.getShareToken(r),o=await this.getShareByAnonymous(r),a=[],c=[];await this.listFile(i,r,this.getParentFolderId(s,o),a,c),a.sort(((e,t)=>e.name.localeCompare(t.name,void 0,{numeric:!0,sensitivity:"base"})));const l=["阿里"],u=[],p=[];for(const e of a){const t={shareId:r,fileId:e.file_id,subs:this.findSubs(e.name,c)},n=""+vj.enc.Utf8.parse(JSON.stringify(t));u.push(`${this.removeExt(e.name)}$${n}`)}for(let e=0;l.length>e;e++)p.push(u.join("#"));return{vod_id:n,vod_content:e,vod_pic:o.avatar,vod_name:o.share_name,vod_play_from:l.join("$$$"),vod_play_url:p.join("$$$"),type_name:"阿里云盘"}}async play(e,t,n){const r=vj.enc.Utf8.stringify(vj.enc.Hex.parse(e)),{shareId:s,fileId:i,subs:o}=JSON.parse(r),a=["RAW",await this.getDownloadUrl({shareId:s,fileId:i})],{live_transcoding_task_list:c,live_transcoding_subtitle_task_list:l}=await this.getVideoPreviewPlayInfo(s,i);a.push(...(e=>{const t=[];for(const n of e.filter((e=>"finished"===e.status)).sort(((e,t)=>t.template_height-e.template_height)))n.url&&(t.push(n.template_id),t.push(n.url));return t})(c));const u=(e=>{const t=[];if(!e)return t;for(const n of e.filter((e=>"finished"===e.status)))t.push(n.url);return t})(l);return u.push(...((e,t)=>{const r=[];for(const s of t){const{fileId:t}=s,i=new URL(n);i.searchParams.append("do","ali"),i.searchParams.append("shareId",e),i.searchParams.append("fileId",t),r.push(""+i)}return r})(s,o)),{url:a,extra:{subt:u},header:LQ,parse:0,jx:0}}async proxy({shareId:e,fileId:t},n){const r=await this.getDownloadUrl({shareId:e,fileId:t}),s=await this._http.get(r,{responseType:"stream"});n.raw.writeHead(s.status,{"Content-Type":s.headers.getContentType()}),s.data.pipe(n.raw),s.data.on("end",(()=>{n.raw.end()}))}async copy(e,t){const n=await jQ.acquire();let r;try{const n=await this.getDriveId(),s=`ali_file_${n}_${t}`;if(r=await this.redis.get(s),!r){const i={requests:[{body:{file_id:t,share_id:e,auto_rename:!0,to_parent_file_id:"root",to_drive_id:n},headers:{"Content-Type":"application/json"},id:0,method:"POST",url:"/file/copy"}],resource:"file"},o=await this.getShareToken(e);let a=await this.fetchAuth("/adrive/v2/batch",i,{"X-Share-Token":o});if(a=a.responses[0],a.status>=400)throw Error(`转存文件失败 [${a.body.message}]`);r=a.body.file_id;try{const e=14400;await this.redis.set(s,r,"EX",e),await this._queue.add({fileId:r},{delay:1e3*e,attempts:3,backoff:1e4,removeOnComplete:!0,removeOnFail:!0})}catch(e){}}}finally{n()}return r}async delete(e){const t={drive_id:await this.getDriveId(),file_id:e};await this.fetchOAuth("/openFile/delete",t)}async getVideoPreviewPlayInfo(e,t){const n=await this.copy(e,t),r={category:"live_transcoding",drive_id:await this.getDriveId(),file_id:n,url_expire_sec:900},s=await this.fetchOAuth("/openFile/getVideoPreviewPlayInfo",r);return{live_transcoding_task_list:s.video_preview_play_info?.live_transcoding_task_list,live_transcoding_subtitle_task_list:s.video_preview_play_info?.live_transcoding_subtitle_task_list}}async getDownloadUrl({shareId:e,fileId:t}){const n=await this.copy(e,t),r={drive_id:await this.getDriveId(),file_id:n,expire_sec:900};return(await this.fetchOAuth("/openFile/getDownloadUrl",r)).url}async getDriveId(){const e="ali_drive_"+(await this.getAccessToken()).userId;let t=await this.redis.get(e);return t||(t=(await this.fetchAuth("https://user.aliyundrive.com/v2/user/get",{})).resource_drive_id,await this.redis.set(e,t,"EX",31536e3)),t}async getOpenAccessToken(){const e="https://api.xhofe.top/alist/ali_open",t=async()=>{const e=await this.fetchAuth("https://open.aliyundrive.com/oauth/users/authorize",{authorize:1,scope:"user:base,file:all:read,file:all:write"},{},{client_id:"76917ccccd4441c39457a04f6084fb2f",redirect_uri:"https://alist.nn.ci/tool/aliyundrive/callback",scope:"user:base,file:all:read,file:all:write",state:"",response_type:"code",relogin:"true"});return new URL(e.redirectUri).searchParams.get("code")},n=(await this.getAccessToken()).userId,r="ali_auth_token_"+n;let s=await this.redis.get(r);if(!s){const i="ali_auth_refresh_token_"+n,o=await this.redis.get(i);let a;a=o?await this.fetch(e+"/token",{data:{grant_type:"refresh_token",refresh_token:o}}):await this.fetch(e+"/code",{data:{code:await t(),grant_type:"authorization_code"}}),s=a.access_token,await this.redis.set(i,a.refresh_token,"EX",2592e3),await this.redis.set(r,s,"EX",a.expires_in)}return s}async getAccessToken(){if(!this.token||"string"!=typeof this.token||32!==this.token.length)throw Error("传入的token不是有效的32位token");const e="ali_access_token_"+this.token;let t=await this.redis.get(e);try{t=JSON.parse(t)}catch{t=null}if(!t){const n="ali_refresh_token_"+this.token,r=await this.redis.get(n),s=this.apiUrl+"/v2/account/token",i={grant_type:"refresh_token",refresh_token:r||this.token},o=await this.fetch(s,{data:i});t={userId:o.user_id,accessToken:o.access_token},await this.redis.set(n,o.refresh_token,"EX",2592e3),await this.redis.set(e,JSON.stringify(t),"EX",o.expires_in)}return t}async getShareToken(e){const t="ali_share_token_"+e;let n=await this.redis.get(t);if(!n){const r=this.apiUrl+"/v2/share_link/get_share_token",s={share_id:e,share_pwd:""},i=await this.fetch(r,{data:s});n=i.share_token,await this.redis.set(t,n,"EX",i.expires_in)}return n}async fetchAuth(e,t,n={},r={}){const s=await MQ.acquire();let i;try{i=await this.getAccessToken()}finally{s()}const o=/^https?:\/\//.test(e)?e:`${this.apiUrl}${e}`;return n=Object.assign({"X-Canary":"client=Android,app=adrive,version=v4.3.1",Authorization:"Bearer "+i.accessToken},n),await this.fetch(o,{params:r,data:t,headers:n})}async fetchOAuth(e,t){const n=await BQ.acquire();let r;try{r=await this.getOpenAccessToken()}finally{n()}return await this.fetch(`${this.openApiUrl}${e}`,{data:t,headers:{Authorization:"Bearer "+r}})}async fetch(e,t={}){t.method||(t.method="POST");const n=await this._http(e,t).catch((e=>e.response||{status:500,data:{code:e.code,message:e.message}})),r=n.data;if(n.status>=400)throw Error(`code=${n.status} msg=${n.message} content=${JSON.stringify(r)}`);return r}}const $Q={"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) quark-cloud-drive/2.5.20 Chrome/100.0.4896.160 Electron/18.3.5.4-b478491100 Safari/537.36 Channel/pckk_other_ch",Referer:"https://pan.quark.cn"},UQ=new zz,HQ=new zz;class GQ extends hB{constructor(e,t){super(),Array.isArray(t)&&t.length>0&&(t=t[Math.floor(Math.random()*t.length)]),this.apiUrl="https://drive.quark.cn/1/clouddrive",this.redis=e,this.setCookie(t),Object.assign(this._http.defaults.headers,$Q),this._http.defaults.validateStatus=e=>e>=200,this._queue=new PQ("quark-del-task",{redis:{host:e.options.host,port:e.options.port,username:e.options.username,password:e.options.password,db:e.options.db}}),this._queue.process((async e=>{const{fileId:t}=e.data;await this.delete(t)}))}pair(e,t,n){for(const r of t){const t=this.removeExt(r.file_name).toLowerCase();(e.includes(t)||t.includes(e))&&n.push(r)}}findSubs(e,t){const n=[];this.pair(this.removeExt(e).toLowerCase(),t,n),0===n.length&&n.push(...t);const r=[];for(const e of n)r.push({name:this.removeExt(e.file_name),fileId:e.fid,fidToken:e.share_fid_token});return r}matchShare(e){const t=e.match(/pan\.quark\.cn\/s\/([\w]+)(?:[\?\w\=]+)?/i);if(t){const[e,n]=t;return{url:e,shareId:n,folderId:"0",pic:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPAAAAFeCAYAAAC7NJK4AAAAAXNSR0IArs4c6QAAGV5JREFUeF7tnXu0XFV5wL89YN4Q8oIEEvIgJAECaG0rdtnK0i6rFqpFgVZQtF2+wKpAhQWICor4WCi1glSXFRRsoRVxoSzbrrbUtrYuUR5NeCe8AgYSQkhCAiS5p3xz7nHOnczcmTP3m/vlu/mdtfgDmPn2nt/ev7Pf+6b0bzsz4YEABEISSAgcstzINATqBBCYigCBwAQQOHDhkXUIIDB1AAKBCSBw4MIj6xBAYOoABAITQODAhUfWIYDA1AEIBCaAwIELj6xDAIGpAxAITACBAxceWYcAAlMHIBCYAAIHLjyyDgEEpg5AIDABBA5ceGQdAghMHYBAYAIIHLjwyDoEEJg6AIHABBA4cOGRdQggMHUAAoEJIHDgwiPrEEBg6gAEAhNA4MCFR9YhgMDUAQgEJoDAgQuPrEMAgakDEAhMAIEDFx5ZhwACUwcgEJgAAgcuPLIOAQSmDkAgMAEEDlx4ZB0CCEwdgEBgAggcuPDIOgQQmDoAgcAEEDhw4ZF1CCAwdQACgQkgcODCI+sQQGDqAAQCE0DgwIVH1iGAwNQBCAQmgMCBC4+sQwCBqQMQCEwAgQMXHlmHAAJTByAQmAACBy48sg4BBKYOQCAwAQQOXHhkHQIITB2AQGACCBy48Mg6BBCYOgCBwAQQOHDhkXUIIDB1AAKBCSBw4MIj6xBAYOoABAITQODAhUfWIYDA1AEIBCaAwIELj6xDAIGpAxAITACBAxceWYcAAlMHIBCYAAIHLjyyDgEEpg5AIDABBA5ceGQdAghMHYBAYAIIHLjwyDoEEJg6AIHABBA4cOGRdQggMHUAAoEJIHDgwiPrEEBg6gAEAhNA4MCFR9YhgMDUAQgEJoDAgQuPrEMAgakDEAhMAIEDFx5ZhwACUwcgEJgAAgcuPLIOAQSmDkAgMAEEDlx4ZB0CCEwdgEBgAggcuPDIOgQQmDoAgcAEEDhw4ZF1CCAwdQACgQkgcODCI+sQQGDqAAQCE0DgwIVH1iGAwNQBCAQmgMCBC4+sQwCBqQMQCEwAgQMXHlmHAAJTByAQmAACBy48sg4BBKYOQCAwAQQOXHhkHQIITB2AQGACCBy48Mg6BBCYOgCBwAQQOHDhkXUIIDB1AAKBCSBw4MIj6xBAYOoABAITQODAhUfWIYDA1AEIBCaAwIELj6xDAIGpAxAITACBAxceWYcAAlMHIBCYAAIHLjyyDgEEpg5AIDABBA5ceGQdAghMHYBAYAIIHLjwyDoEEJg6AIHABBA4cOGRdQggMHUAAoEJIHDgwiPrEEBg6gAEAhNA4MCFR9YhgMDUAQgEJoDAgQuPrEMAgakDEAhMAIEDFx5ZhwACUwcgEJgAAgcuPLIOAQSmDkAgMAEEDlx4ZB0CCEwdgEBgAggcuPDIOgQQmDoAgcAEEDhw4ZF1CCAwdQACgQkgcODCI+sQQGDqAAQCE0DgwIVH1iGAwNQBCAQmgMCBC4+sQwCBqQMQCEwAgQMXHlmHAAJTByAQmAACBy48sg4BBKYOQCAwAQQOXHhkHQIITB2AQGACCBy48Mg6BBCYOgCBwAQQOHDhkXUIILCI/NmcJO89MMkdWzL50XqRWzdmsmWnf+X47KIkx05L9Yzc+kwm56/O/DO1m+bg9IOS6D8/25TJ99ftPmXYb1wILCLXHp7kHQfkovzXsyJvvnNgtxD4e8uT/PGsPF/fX5fJ21YgcDshrj4sybtm56wee0Hk5BUD8r+b+q2Pf/w9XuBj9hW5fnlN5o0XeXFA5MKHMvnio7uHKP0UWH/vu+ckmfEyn0r49HaRq3+V1WUb6aO/5YdH1+TIyXmk7z6Zyal37x5lONLf1un7e7zAn1mU5NyDk+yVRO7fKnLCigG5+7lO2Ebn//dT4FfuI3LD8posnDA6v6U5lYeeFzlpxYD8YvPI0/+T/ZNctTTJvnuLPLtD5AP3ZXL9Uwg8crKjFOGk/fPxz7ha9QSXTBSZPtgKaaV68sXqMcrfuG5tJlc8nsnhk0VOPSDJpL16j/eaqUl+Y5/8+7/crN373ivl1p0i1z6Z/frlFEngj8xNcukhSSb0UL7d0Ld8mXSTnuVnxkQL3O8CrgJcu9/nrsrkD2ck+fbhSabtXeXb/fvsMztE3nV3Jj96On8JlAXWVuuC1Zk88nz/0tfI8yeIXLIoydS9RapI0+/yrZKX/hKqHh2BqzMb9hsRBW6W2xjJr8OVX2pVpCkL3K4nMnkvkaWTktyxOZOBLn6AvkROnJX3kKrkpYvQo/qRMSFwVWJvn5XkyqVJZg52nX+8IZOTVuRLR185NMkHD8rHxFpZ3nvvgNy+pWoKIvuPE3n5lCQvyydGe3rOmCvyxul5AM3jFWt6ClP/0vZM6stkTw0OEcotcCSBW83GT9lLRGehdcb+8RdELnook2/+avjhRq8vk95LoD/f3OMEftOMJFcsSbJgcPJm1TaRd97dWHLQ//7dI2qis9P63LVFJ0V8liRGaxKrW4GVzSETk/zrM72NxXuVptwCtxL4uBlJ/mZZkjnj8jIbyET++1mRc1YNyM/aLCX1mpf+aNh71D1KYN2woZMhswZb3vXbRU6/L5N/XDe0Qqq83zqsJksn5WCfeCEfI16ztreK22vxjLbAs8eJ/MEMkXMezOThFuPhjx2c5OKFSTbtFLlyTSYXPTw8D+V43RE12bRD5Nq1mdy/LW8pdV6gSrdVN7ScOz+J9kXarYfrpOHnD0nypulJaoO9Hl2q+uqaTC57bNeNOQjca610+J52sVTcP5/TmMlsJ2+RvWaJdY34xvWZfPSBRje03z9lNAXWHUxvmJZElfza45l8+IFd5fzx0UneMD3Jzkzkkkcy+dRDwwt83vwkn1qYDyN0g4zOD/QisIqpLw99Om1oOXNekvPn5+vbOzKprwic2eK3IHC/a69R/LfOTHLxoiRHTJb6G1wfHSd96P5MfrB++Ar4iikiVy2tyW/u2/juuu1569Pqrd4py1qZPzy3+0GxLpsUSyfPD4joP90+Ot593e3tf1/zGPjC1ZlcuCDJAeNE9De+796hfHQsfs3hee9FN1+csnJAXj8tyQcOSvL1JzL5ZJPM+tK85eiavGZqY4OMrq8XM/NVWuAqAiuf39tP5PJDa7JqWybvuaf1tlgE7rYmOX1Ou1Ta3dPxUbE+rNX5tk35mLbbiSmdjLr80CQnzBy6zqyV/Dtrs3oXrVV3s9XPLlfEfmO5bbPIb9/W3vhWk1ivnybyF3PzCbz/2Chy/F2NLaVfXZJP7unrR3c63bxeX275kpD+/nesHDpPcPLg5gr9/8UGmYUTGktrzQIvmyTy6UVJDhq/6wtOW9NDJzZevha7t8YlkeWTpV43dPLynudEytvfN+/Ihwg/fbbfJTWy+GNuDKyt5jnzkxw/Y+gmCp2F1cmN8T1uBtBuo7aAulxRfrRrffdWkVuezurjvHu3ti+QssBVW9RuinnvlOdPFehF4JXPZXLTkTU5akreal78cCaffSTflHLj8posmTR0p9MNy5O8bXCv9vfW5TP5xVPsLy+65NrjGa7V895Y0sy324m9bsqln58ZMwIfu1+S8xeI/O7UNERSrUArnxO5/LFMLliQet46qMJ9fHUmh0wUOW126x1W+oLYsEPkK2sy+UyLCZ6qXcGqBV+ere1FYN3kUY5RtJKvm5bk0wvzHkj5sIcy1y7x3PF5K3b2g5l844msvvRVdLd1Z9tp92TyzxuGF/joKfnEYbE6UPx2fRnpS0lfTlqWz+3Mx7YjffQ9rt18nfDSeBq3HHbj4JZMzffu/IQXWNd0dYyrWyKL2ccCeHm8qpWsXRetmwLSFunKl7ZI3vBU3iKdNS+JbuHUSlB+7tkqcmKb/dQRBNbfoy2rSqhVV7vL8yekIWPZ8mGPLxyS5KPzUl2wn28SOXnlQH3G+H0HNrrbxcGCXsad5a74hu1SP6Sga+Ll5y0zU13CYpdZN+XZS166iTvanwkvsM4Wf+fwWr1lLB7t/mh3VmdKi40L/QCr4+P3zE5y2pwkiyfmXeyiFWqVXgSBNd8nzMoPB+hGlxde6krri1Fnklu9nLTFLLrdKpHOYL91Vqqf7tKZfj1YcOPgMl0v0lxzWJJTZ+cvgzu2iLzlroEhJ5iKTTn77iXyw6cz+cRDjf3ew5V5L3npRx0aaczwAisAbQmvXJLqAumG/S891l9xW0HXSZjFE1O9ErV7ogis+S+Lo/+ucwCffzSrDyOan3K3W4cRKeXjcJ0XOO6uxuerSqMt69eX5TPf7dL/5rIkpxzQmGAcbu23nO+qeRmpaP36/pgQWOHoGEp3Ve0ON2mMBYGbJ5WGW/bRbvfNR9Xktfs1fnmrY31VpGneETdc+jonocMjHSbpoy8RHauf+UD71QY9VKFry9r1r7Kk1S8Re407ZgT2Pv3TzaxlpBZYpbzxyCS/P3ilz3Bje6182grqFlU9k6tPc+ur/61bgXVool14bYG1Jdeu+aWP7LrWXK70rXZi/cuGTL78WH7jiq4+6EqEPuUJLP33n2wUOfb2CovsvdrWh+8hsBHUqgKP9HBCq2wfM1XkL+fllbXXWegirt4RdtnixiSd1n3dsPHB+1oPEcrjZo3RvI7crcAqoq45v3a/XF5NTXdfvbvNhoxmDh9fkOoTjNqV1j3uOpt845E10SFOq0fPSZ+3OpO/XrN7zza3q6ZjRuDhDtDr/ytaEu1mV5mt7Nbv5gPzrb63u2/kKLjoBJTe1vGqwQMdxW8pLwmVf1955rr47zofobu7dMda8XRqgXUuQ2e1Dy7dEqL3WukmkW43y2haukNM81TstLvl6CTH7LvrBpG1L4pc9mjnk0vd1gGPz40ZgYeDV+zh1c9c9Xgmp9/v87aNIrDuJf7EgnxiSDemaCtWnM66aX1WvxigPNegu7cuXZSvjZcnsZq73Z0Ebj7m6XkSzEPGXtIc8wKXJ2N0sf4jD2Tytx3OivYCspvvlAVuPpiu3V7thuqMq7bm/7Auq9/vVH7KPQld49blGV3mKR5tOY+bmR8e6LULrbz0OKVuXSx2Y+lNHcX4trxhQ9MtLyPpTPHVazP5nalJDpuUzxxr1/SsB/MXZieB9TPa/b1oYZKfb87kzi0ir2rRcnbDuupnHn8hq/cYhttJVzXmaHx+zAtcvvBszeCxQN0QMJJHK+a9W7vfA12kVT7McPP6rL5DqVX3st2GhfILoNXM6fsPTPLJhfmJq6qHGYrrdr62tLEJQ8/S6sVzOr4vNndofov/rnuSyxcgFC2uHiApWnBlrrH1ru1uBC66wHo6Speyimt1R1Je3Xw36kz0mBdYx1RnH5xPiFg9Or47b1Umf2U48aGX8n1xcZKJtXw57O0rBuotUPnpJHCV39fqMINuWdT1dL3kr7mlLU9SFS2zblEt1mnLY97yGFpfUcU+6W4FLn5HcZyy3RZK7WkUe9O1d1XMMhffL+8Nb7X3vDwbjcBVas8ofvbWV9Tqx8ssn34IrOLo0Tx92i1r9FPg99+byVkH62RPPvPbfDhB81UcUNBx7r9vzGR8Ld9iqU/5WiL9d91K+aXF+bhYD/SfcX9WH0tXOU5YCNyOd5lHcRdZuZw73eRR9YViWYesYo3pFtjy8vLyGLWbJaMqBaT5/MFRNXn5lFwenRk9Z9WuE229CPzTV9bqrfrfv7Sn+Vtr29+JpZv29WSRtlqtjgfq79HD/BfMT/LttVl9plgP7OvnW81ON2/u0GUl3SFX5UA/AneuRWNa4M4/v/tPlN/W1gKXZ301tq556hi5+akqsK59ltdAy61UuQutXc/tA1JvLcvHCNvRKW9x1E0WetKr1QunvLlj9TapH03UYUK3V+ogcOf6icCdGdU/URZYWxw9FdPr5W7lJJsPY7TaAFF8vqrAZUmbr8FpHgNf8nBW/1MrD27bdZmoGZFeDKh50VtO/udZkT9dOfSAQfnzf3dEEp2U08Pxv7VP+wP9rYoBgTtXTgTuzKj+ifIkk9WEh47Nv7EsX7LRpxgrXvdk63XqqgLrhgYdt+o1OdsGRD72YFY/EqnPSK+V1S6y/jGxX27Ouv4jYlXHnAjcuXIicGdG9U+Ul1d0rfCE/xvoec1QK//Z85J8aG7jj4sNdwFbkUVdhtIxqF55081LRLu6OubUa22al6ZGKnCX2IZ8DIF7oTb8d/ZYgXUDwrJJuQzNl56Xkek4Um86fOfsxo2WOuHzxjur7+Yqzg/r3VLzJjQuylN59cpavT1xuNNU5VnVTq21/obyGm3z0pSHwHr6p7jZo91SWZk9LXBn4fdYgY8fbJ2q/u2iqktI+gL4o5mp/o9K03wnl26618mdL5f2DLcrtvJVNfoZnfD6pw27nn3WC9tePTUfo+ossT7NS1P9EljP5x42OdVvhNTfVjz68nrz9MZpJd0M8upfNLaRtbqxs7iVczTWgVtdq6NXI3W6OrezYv39xB4rcPPflO0GsxayXqmjt0x0OnesGx+0BZwzvtHSltPQ2d4qN0gU3y0ukquyMaXViZt+CXz9EUlO3H/43DVvsdTfNpr7xLspa/1Mq7Xlbr87Wp/bYwVWwDcdmbeMnR5tdXXce8Wa7k+utDqho+loq6QHAvRu6W6vti3nT7v+X1ic37rZ6YZN3XDxwDaRzz2y61+V6JfA5b+i0IpruwvyzzgoySmzO5dFp7Ky/P/Fn4q1jGkda48W2Bpmczy9tVFvZ9Su4H9u1Avx8oPunVrvbvLV6Y+nDTeu1/jle5gt70Auzy3o3zbWO52LRy92/8nGeAcGuikPr88gsBd50oWAAQEENoBICAh4EUBgL/KkCwEDAghsAJEQEPAigMBe5EkXAgYEENgAIiEg4EUAgb3Iky4EDAggsAFEQkDAiwACe5EnXQgYEEBgA4iEgIAXAQT2Ik+6EDAggMAGEAkBAS8CCOxFnnQhYEAAgQ0gEgICXgQQ2Is86ULAgAACG0AkBAS8CCCwF3nShYABAQQ2gEgICHgRQGAv8qQLAQMCCGwAkRAQ8CKAwF7kSRcCBgQQ2AAiISDgRQCBvciTLgQMCCCwAURCQMCLAAJ7kSddCBgQQGADiISAgBcBBPYiT7oQMCCAwAYQCQEBLwII7EWedCFgQACBDSASAgJeBBDYizzpQsCAAAIbQCQEBLwIILAXedKFgAEBBDaASAgIeBFAYC/ypAsBAwIIbACREBDwIoDAXuRJFwIGBBDYACIhIOBFAIG9yJMuBAwIILABREJAwIsAAnuRJ10IGBBAYAOIhICAFwEE9iJPuhAwIIDABhAJAQEvAgjsRZ50IWBAAIENIBICAl4EENiLPOlCwIAAAhtAJAQEvAggsBd50oWAAQEENoBICAh4EUBgL/KkCwEDAghsAJEQEPAigMBe5EkXAgYEENgAIiEg4EUAgb3Iky4EDAggsAFEQkDAiwACe5EnXQgYEEBgA4iEgIAXAQT2Ik+6EDAggMAGEAkBAS8CCOxFnnQhYEAAgQ0gEgICXgQQ2Is86ULAgAACG0AkBAS8CCCwF3nShYABAQQ2gEgICHgRQGAv8qQLAQMCCGwAkRAQ8CKAwF7kSRcCBgQQ2AAiISDgRQCBvciTLgQMCCCwAURCQMCLAAJ7kSddCBgQQGADiISAgBcBBPYiT7oQMCCAwAYQCQEBLwII7EWedCFgQACBDSASAgJeBBDYizzpQsCAAAIbQCQEBLwIILAXedKFgAEBBDaASAgIeBFAYC/ypAsBAwIIbACREBDwIoDAXuRJFwIGBBDYACIhIOBFAIG9yJMuBAwIILABREJAwIsAAnuRJ10IGBBAYAOIhICAFwEE9iJPuhAwIIDABhAJAQEvAgjsRZ50IWBAAIENIBICAl4EENiLPOlCwIAAAhtAJAQEvAggsBd50oWAAQEENoBICAh4EUBgL/KkCwEDAghsAJEQEPAigMBe5EkXAgYEENgAIiEg4EUAgb3Iky4EDAggsAFEQkDAiwACe5EnXQgYEEBgA4iEgIAXAQT2Ik+6EDAggMAGEAkBAS8CCOxFnnQhYEAAgQ0gEgICXgQQ2Is86ULAgAACG0AkBAS8CCCwF3nShYABAQQ2gEgICHgRQGAv8qQLAQMCCGwAkRAQ8CKAwF7kSRcCBgQQ2AAiISDgRQCBvciTLgQMCCCwAURCQMCLAAJ7kSddCBgQQGADiISAgBcBBPYiT7oQMCCAwAYQCQEBLwII7EWedCFgQACBDSASAgJeBBDYizzpQsCAAAIbQCQEBLwIILAXedKFgAEBBDaASAgIeBFAYC/ypAsBAwIIbACREBDwIoDAXuRJFwIGBBDYACIhIOBFAIG9yJMuBAwIILABREJAwIsAAnuRJ10IGBBAYAOIhICAFwEE9iJPuhAwIIDABhAJAQEvAgjsRZ50IWBAAIENIBICAl4EENiLPOlCwIAAAhtAJAQEvAggsBd50oWAAQEENoBICAh4EUBgL/KkCwEDAghsAJEQEPAigMBe5EkXAgYEENgAIiEg4EUAgb3Iky4EDAggsAFEQkDAiwACe5EnXQgYEEBgA4iEgIAXAQT2Ik+6EDAggMAGEAkBAS8CCOxFnnQhYEAAgQ0gEgICXgQQ2Is86ULAgAACG0AkBAS8CCCwF3nShYABAQQ2gEgICHgRQGAv8qQLAQMCCGwAkRAQ8CKAwF7kSRcCBgT+H7W+ZcyQWWqsAAAAAElFTkSuQmCC"}}return null}async listFile(e,t,n,r,s,i){const o=this.apiUrl+"/share/sharepage/detail",a={pr:"ucpro",fr:"pc",pwd_id:t,stoken:e,pdir_fid:n,force:0,_page:i=i||1,_size:200,_sort:"file_type:asc,file_name:asc"},c=await this.fetch(o,{params:a}),l=[];for(const e of c.data?.list||[])if(!0===e.dir)l.push(e);else if(!0===e.file)if("video"===e.obj_category||"audio"===e.obj_category){if(5242880>e.size)continue;r.push(e)}else this.subExt.some((t=>e.file_name.endsWith(t)))&&s.push(e);Math.ceil((c.metadata?._total||0)/200)>i&&await this.listFile(e,t,n,r,s,i+1);for(const n of l)await this.listFile(e,t,n.fid,r,s)}async getVod(e){const t=this.matchShare(e);if(!t)return null;const{url:n,shareId:r,folderId:s}=t,i=await this.getShareToken(r),o=[],a=[];await this.listFile(i,r,s,o,a),o.sort(((e,t)=>e.file_name.localeCompare(t.file_name,void 0,{numeric:!0,sensitivity:"base"})));const c=["夸克"],l=[],u=[];for(const e of o){const t={shareId:r,sToken:i,fileId:e.fid,fidToken:e.share_fid_token,subs:this.findSubs(e.file_name,a),type:e.obj_category},n=""+vj.enc.Utf8.parse(JSON.stringify(t));l.push(`${this.removeExt(e.file_name)}$${n}`)}for(let e=0;c.length>e;e++)u.push(l.join("#"));return{vod_id:n,vod_content:e,vod_play_from:c.join("$$$"),vod_play_url:u.join("$$$"),type_name:"夸克网盘"}}async play(e,t,n){const r=vj.enc.Utf8.stringify(vj.enc.Hex.parse(e)),{shareId:s,sToken:i,fileId:o,fidToken:a,subs:c,type:l}=JSON.parse(r);let u,p;return"audio"===l?u=await this.getDownloadUrl({shareId:s,stoken:i,fileId:o,fidToken:a}):(u=(e=>{const t=[];for(const n of e.filter((e=>e.video_info?.finish)).sort(((e,t)=>t.video_info?.height-e.video_info?.height)))n.video_info?.url&&(t.push(n.resolution),t.push(n.video_info.url));return t})(await this.getVideoPreviewPlayInfo(s,i,o,a)||[]),p=((e,t,r)=>{const s=[];for(const i of r){const{fileId:r,fidToken:o}=i,a=new URL(n);a.searchParams.append("do","quark"),a.searchParams.append("shareId",e),a.searchParams.append("stoken",t),a.searchParams.append("fileId",r),a.searchParams.append("fidToken",o),s.push(""+a)}return s})(s,i,c)),{url:u,extra:{subt:p},header:Object.assign({Cookie:Object.entries(this._cookie).map((([e,t])=>`${e}=${t}`)).join("; ")},$Q),parse:0,jx:0}}async proxy({shareId:e,fileId:t},n){const r=await this.getDownloadUrl({shareId:e,fileId:t}),s=await this._http.get(r,{responseType:"stream"});n.raw.writeHead(s.status,{"Content-Type":s.headers.getContentType()}),s.data.pipe(n.raw),s.data.on("end",(()=>{n.raw.end()}))}async copy(e,t,n,r){const s=async(e,t=0)=>{const n={pr:"ucpro",fr:"pc",uc_param_str:"",task_id:e,retry_index:t};let r=await this.fetch(this.apiUrl+"/task",{params:n});return(r.data?.save_as?.save_as_top_fids||[]).length>0?r.data.save_as.save_as_top_fids[0]:null},i=await HQ.acquire();let o;try{const i=`quark_file_${this._cookie.__uid||this._cookie.__kps||"default"}_${n}`;if(o=await this.redis.get(i),!o){const a={pr:"ucpro",fr:"pc",uc_param_str:""},c={fid_list:[n],fid_token_list:[r],to_pdir_fid:"0",pwd_id:e,stoken:t,pdir_fid:"0",scene:"link"};let l=await this.fetch(this.apiUrl+"/share/sharepage/save",{method:"post",params:a,data:c}),u=0;for(;5>u;){const e=await s(l.data.task_id,u);if(null!==e){o=e;break}u++,await this.delay(1e3)}if(!o)throw Error("转存分享失败");try{const e=14400;await this.redis.set(i,o,"EX",e),await this._queue.add({fileId:o},{delay:1e3*e,attempts:3,backoff:1e4,removeOnComplete:!0,removeOnFail:!0})}catch(e){}}}finally{i()}return o}async delete(e){const t={action_type:2,filelist:[e],exclude_fids:[]};await this.fetch(this.apiUrl+"/file/delete",{method:"post",params:{pr:"ucpro",fr:"pc",uc_param_str:""},data:t})}async getVideoPreviewPlayInfo(e,t,n,r){const s=await this.copy(e,t,n,r),i=this.apiUrl+"/file/v2/play",o={fid:s,resolutions:"normal,low,high,super,2k,4k",supports:"fmp4,m3u8"};return(await this.fetch(i,{method:"post",params:{pr:"ucpro",fr:"pc",uc_param_str:""},data:o})).data.video_list}async getDownloadUrl({shareId:e,stoken:t,fileId:n,fidToken:r}){const s=await this.copy(e,t,n,r),i=this.apiUrl+"/file/download",o={fids:[s]};return(await this.fetch(i,{method:"post",params:{pr:"ucpro",fr:"pc",uc_param_str:""},data:o})).data[0].download_url}async getShareToken(e){const t="quark_share_token_"+e;let n=await this.redis.get(t);if(!n){const r=this.apiUrl+"/share/sharepage/token",s={pr:"ucpro",fr:"pc",uc_param_str:""},i={pwd_id:e,passcode:""};n=(await this.fetch(r,{method:"post",params:s,data:i})).data.stoken,await this.redis.set(t,n,"EX",7200)}return n}async fetch(e,t={}){const n=await UQ.acquire();let r;try{r=await this._http(e,t).catch((e=>e.response||{status:500,data:{code:e.code,message:e.message}}))}finally{n()}const s=r.data||{};if(0!==s.code||200!==s.status)throw Error(s.message||"未知错误");return s}}const qQ=new zz,zQ=new zz,VQ=["p+ExqPV","LwdwKlprzv7cQBQmxN5","vc08P1NwUBnbGsl58LzTW","VVNeXaXmZ8HH1SJEnp6YpVFSFU","pNAOJ","CNChvyDehAmUR1TDodfOusBAx","MS98NnX4Np8nxvEh6Ulv+SMMKMzKvD34C7lGWbb","9MpFF21GnVOYku0NM9Y/hzsK471UCUZ2o+","EY1QfeA06fXlw9wZNoZaXEED5zZPvNWI","","sciE","FIPqgQDUUW1e0GkiBFd5w7mCQ","zW","75XFdEO0Gi"],YQ="ZUBzD9J_XPXfn7f7",KQ="yESVmHecEe6F0aou69vl-g",QQ="1.0.8.2215",WQ="com.xunlei.browser",JQ=[`ANDROID-${WQ}/${QQ}`,"networkType/WIFI appid/22062 deviceName/Xiaomi_M2004j7ac deviceModel/M2004J7AC OSVersion/13 protocolVersion/301 platformversion/10 sdkVersion/2.0.3.262 Oauth2Client/0.9 (Linux 4_9_337-perf-sn-uotan-gd9d488809c3d) (JAVA 0)"].join(" ");class XQ extends hB{constructor(e,t){super(),Array.isArray(t)&&t.length>0&&(t=t[Math.floor(Math.random()*t.length)]),this._username=t?.username||"abc",this._password=t?.password||"123",this.deviceId=""+vj.MD5(`${this._username}${this._password}`),this.redis=e,Object.assign(this._http.defaults.headers,{"user-agent":JQ,"x-device-id":this.deviceId,"x-client-id":YQ,"x-client-version":QQ}),this._http.defaults.validateStatus=e=>e>=200,this._queue=new PQ("xunlei-del-task",{redis:{host:e.options.host,port:e.options.port,username:e.options.username,password:e.options.password,db:e.options.db}}),this._queue.process((async e=>{const{fileId:t}=e.data;await this.delete(t)}))}pair(e,t,n){for(const r of t){const t=this.removeExt(r.name).toLowerCase();(e.includes(t)||t.includes(e))&&n.push(r)}}findSubs(e,t){const n=[];this.pair(this.removeExt(e).toLowerCase(),t,n),0===n.length&&n.push(...t);const r=[];for(const e of n)r.push({name:this.removeExt(e.name),ext:e.file_extension||"",fileId:e.id,hash:e.hash});return r}matchShare(e){const t=e.match(/pan\.xunlei\.com\/s\/([\w\-]+)(?:[\?\w\=#]+)/i);if(t){const[e,n]=t;return{url:e,shareId:n,folderId:"0",pwd:new URL("https://"+e).searchParams.get("pwd"),pic:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPAAAAFeCAYAAAC7NJK4AAAAAXNSR0IArs4c6QAAFYZJREFUeF7tnXm0HGWZh9++a3ffsCqLMooBRQ2IxIMLCAhBiSjixhIBNZGjuCviKC4g6MCAkmHEGfTgwahoJIGDoihuUQGBGUUjuxtBWYSgEBbTd+/2vFXpS91OV1dVL/feX/PUn0nf7ref3/tUffXVV9W53d+/oWJsEICAJIEcAkvmRtEQCAggMI0AAWECCCwcHqVDAIHpAQgIE0Bg4fAoHQIITA9AQJgAAguHR+kQQGB6AALCBBBYODxKhwAC0wMQECaAwMLhUToEEJgegIAwAQQWDo/SIYDA9AAEhAkgsHB4lA4BBKYHICBMAIGFw6N0CCAwPQABYQIILBwepUMAgekBCAgTQGDh8CgdAghMD0BAmAACC4dH6RBAYHoAAsIEEFg4PEqHAALTAxAQJoDAwuFROgQQmB6AgDABBBYOj9IhgMD0AASECSCwcHiUDgEEpgcgIEwAgYXDo3QIIDA9AAFhAggsHB6lQwCB6QEICBNAYOHwKB0CCEwPQECYAAILh0fpEEBgegACwgQQWDg8SocAAtMDEBAmgMDC4VE6BBCYHoCAMAEEFg6P0iGAwPQABIQJILBweJQOAQSmByAgTACBhcOjdAggMD0AAWECCCwcHqVDAIHpAQgIE0Bg4fAoHQIITA9AQJgAAguHR+kQQGB6AALCBBBYODxKhwAC0wMQECaAwMLhUToEEJgegIAwAQQWDo/SIYDA9AAEhAkgsHB4lA4BBKYHICBMAIGFw6N0CCAwPQABYQIILBwepUMAgekBCAgTQGDh8CgdAghMD0BAmAACC4dH6RBAYHoAAsIEEFg4PEqHAALTAxAQJoDAwuFROgQQmB6AgDABBBYOj9IhgMD0AASECSCwcHiUDgEEpgcgIEwAgYXDo3QIIDA9AAFhAggsHB6lQwCB6QEICBNAYOHwKB0CCEwPQECYAAILh0fpEEBgegACwgQQWDg8SocAAtMDEBAmgMDC4VE6BBCYHoCAMAEEFg6P0iGAwPQABIQJILBweJQOAQSmByAgTACBhcOjdAggMD0AAWECCCwcHqVDAIHpAQgIE0Bg4fAoHQIITA9AQJgAAguHR+kQQGB6AALCBBBYODxKhwAC0wMQECaAwMLhUToEEJgegIAwAQQWDo/SIYDA9AAEhAkgsHB4lA4BBKYHICBMAIGFw6N0CCAwPQABYQIILBwepUMAgekBCAgTQGDh8CgdAghMD0BAmAACC4dH6RBAYHoAAsIEEFg4PEqHAALTAxAQJoDAwuFROgQQmB6AgDABBBYOj9IhgMD0AASECSCwcHiUDgEEpgcgIEwAgYXDo3QIIDA9AAFhAggsHB6lQwCB6QEICBNAYOHwKB0CCEwPQECYAAILh0fpEEBgegACwgQQWDg8SocAAtMDEBAmgMDC4VE6BBCYHoCAMAEEFg6P0iGAwPQABIQJILBweJQOAQSmByAgTACBhcOjdAggMD0AAWECCCwcHqVDoKsELg7m7GlP7rE/3DtJsk8wAkv2G7Q37T9gN/110n5647j9+s8TVhqtdD2FrhF41x177WNvLNieO/fa/145Yl/7+eicCc93LHs8vdfyA7kZrWlkrGK33DX5hGjkM48r2uEvHAj43v9w2U5aUbIb/zIxo7xn48O6RuDly4Zs8V79AcMNGyv2mdUl+/HvxqeY7jW/z95zaN6Kg+3B/MAjFTvv+yN25/rko/2Cp/XaucuGbKcn9bTnw1O+y70Plu3EFRvttruTa0z5lnPyZTtu3WNfPGHInvXU3qC+7/9mzD769dKcrLXdRXWNwM9/Rp+d9eZiMIT27e5/lO3kix7fCx+we7+ddVzRtiy25yiYRY65LPDnjx+yg/cMd3wztWVhl6amQ18wYJ86umDz8jn753DFTltVsh+ufXznneY9VF/TNQJ7AIfs1W+nHFW0bYZCSX0I9ZGvlezeh8o2mwI3O4Re9Lx+O2KfcFh46fVj9rObszVlmiG0gsDHvWzQTnxN3gb727PzrZW13TuUmdwZdJXADu7kNxTsTfsPWm+PWblsdvG1o3bmpcOxTKNiJwUZbaSk17YjxJMOL9iyg8Mx/4o1o7b8u/Hfo9nP+8/jinbgHjN8BH6obJ/4Zin1ZCMCx6fbdQL70e78dwzZ3s/sC761H4W+8IP4Sa1OCjx/h96pIX0zgrV6BI5+pp9SpDlfb6bOTv9NVODb7pm0tXdsPjlVGMzZM7bvsd/fO2mVcnJF8wq5YM7EJxZnYmecXFFzr+g6gR3DC58Zng/vsHV4PuxD6Q9eWLK/P7p5sp0UOHoEbS6e9v1Vp47g7asw/p2iAq+5adw+cOHGaS/2nfaZxxaDc/kHHikHVyEu+7+xhqVlyX0mvmOzn9GVAjuMt78ib29/xaD9aO24nXvFsD30WP1rglmCzDqERuBm23L63yUJ/LLd++20JQXbbstwh12umK1dN2HLLx8OrgvX27Lk3p5v0Zl36VqBfa+87byc3fNg4/FUliBbEfjWuybt6OWPZUqx1XPgVSdtYbs/Pby0onwE/uBr8nb8wXnL5czqHYH9+/k6gJMOz9t+C/qtZ9Nc18MbK7by6lH76s9HN7sWniX3TKHN8Iu7VuC0HLMEicBpqbb3ddEdWZzA1U98y4GD9o5D8rb1UM4my2bfumbUzrps88m/LLm399u0990QOHJ9OGkyox0Cf+aYou2yQ+MFHdVFIm948cC0WejL/n/M3v/qvG2/VePLKevWl+2UlSXrliNwFoFdj7137bOT31gI1gL4bHe9JZUI3N4dyay9W5Yg2yFwVKq4L13dkRy6cLrAV64dS7WiqzpcVxLYZ+zjdk5bD/XYztuFOz2fpLpvQ4pp5oSO6u/L2bOe0mv9vRYI7ju9ST953rSVRi2YDPvdnXN7Oab8EbjREsnxyXAI5RNZcVsnBfbrq/vsFl7O8qbzc7GZPAIvPWjQnrJN2PjX/3HCfnFLtoUgM7lXna3VanHf8dFSxU7+RsmuvnXuMvPa5QVutMJqdLxi535vxL5xVfyNDZ0UuFUBWp3Eqvf57V4T3up39L+/4oZx++26CTvj2KLttO300ws/WfBrvL4wp1IxGx6rBOe2rW4+IeYTnT7h5e83PFqx6HWKR4crdvqqkl33e47ArbJu+PdpBU4zdG30QT6Lu/6R8tSSvqTz5bj3coGS1mNXl0C+a3F+2jnwF380kuquJj96xA392r2ktB3hNpohf+XCfjvt6KL5wotHSpXgJoVf3j79qOgLXibKlulomWXH3Y7v2Kn3kD8C14KJDsWiR+C5InCaOtp1DlyvadQE9qWeh+09EFxC8lVW771gY3C7YHWrrn/3GxmuumU8WHV3x/3Jd18hcKd2KS2+b5zAK943z56zU3hNNLolDaWqr/Vh+IOPVezfXxcuqm/2CDzbAm+7RS7g0Neb/saAocGc+bXY6vDWd4xfWTNqN9+VLEqaOOOWefqR9fQlRdtmXi5Y137hmhH7/BUj097S5xRccJ+M8q3Rtd/oHyJwmmRm4TVxAseVkiXI6GvjhnPt/Mp+/7LPfPvmOxCfFZ2N7dSjinbkvuFR0Lc1N4/bxy6qf3mmXfX5zuKzby2a3ybqW6Md5mtfNBDMYFeXzvpksp9Tn33ZsN1+T/2dzAcOy9vbDs4H59bN7ozb9V1beZ8nzBC6HQLv99x+O/stRduqmDOVWcpWmsP/dvHCfnOB/Tv7VnufdavvX+/vfZTwqaOLtmiP/mCn4ZNMX/7JiP3PD+J3YPVWYl3/h4ngySye2UCf2cQml6OjLv/8G+6YsKXn/bMTX6Xj74nAGRZy1B7dP/edEbv4l+EMtz/Kx+9s+dWf6s9aRo+mHU910we0etT2o6A/6cQfB+Rb0p1d/hqXb2QsvLbazOYifvLIQrAYw0XzmWdfffXxmAUZtZ9xwuK8+eUzH0r7Ax18Nvm844vm15nrbf6d/ErFN6+eO49gysINgTMIHH10i+/NfUjrRwbf/JLP0kVh4/i15/N/OP1oMRs3NrS6/vnjRxRsyUsHrWfTJZxGIvklGRfHh/y+E0srXLRZ/Wj/4dcWpq5d+/9FH8qQtrFfsltfcImo+gCEL71zaGooHn2PfzxathU/G028cynt587G6xA4g8Ae0AXvmmf7Pic8L1t97ah9enW4zvajry/Ymw8Mz1ej/14NNSpw2tVE0RVIf/172R7emHwB1BdubL9VeC21FYFrh87r1k/aiV8pxc7w+jD7iH0Hpq6rxq1BbtTktU9U+ePfJu30VcNPiIfTNSs/AmcU+NSjCnbUS0NRo+dO1UfT+JDPZ0v/+3vxR+CkBfn1pE8rY/QROWn/prZ5fBh77tt8zXY47PQJu0+vLjVc0VY76ZRmuF2vad960KC991X54Gma/njg5+1cf+jbbMPH/V2WhxS2+7NbeT8EzihwdD20H0k//NVSMOO58kNbBOfBcau/si7Irw7Lsz5Sp1WBozfHVyeQ0h5Nax8sWO/poGma1YfAfh+vXwOeqQfuqc5EI3BGgV+wS5+ds7QYDFN9rfX5V47YT28an5ooiZudVhHYH4Tw7kPzU9dVfdXTh1akv2RUO/T2a+dnXDr9Eb9pJPbXREc19ZZQ9vWaFTY9a9v/vzrLXH1/v0Tk/+87It+xjtXML0ZnoxE4bSodfl0nrwNXSz//hCE7YEH4IDi/rPKdX43ZskWDwWNN4xohKnDcc51q0eyyY6/t8+zwfNsviaxLscJo4a59tuDfmruJv/YctNlLRtEHC1YZRR/xm7YFqgKnGdXUO11IepJHljUAaWue6ddxBM54BPaA/FGvH3l9IZjprN186HfMf23+5I25PgtdO/xNc94b16y1w3B/XTOzyQicvDtA4CYErtegjtonsFZdO2r/ccnmT4CIClxvOFcvqqQhYr2/8QUL1ecnp53Ecnn9wei7bfplg0ZPskhuqfAVtZNaWa/nRofQHIHjqXeVwL6I4NQji7Zoz/C5SGmaptlhlDeor/Dx5q8uMVz/cPhrEP7DWrXbXD0H9nNWvwRWvfSUhllcO9XeafWkeTl7X/AEkfCyVtYdA0fg5N1l1wjslz5OX1KYJlT1qOgTMedcXv8ulWYF9vf2HcbSg/K2cH6vDY+ZXXTVqF1zW/0bwOeiwOcsDX9WpXojgH8nv/zz2EjF8jG/glC7DDG5xaa/IsvlJQROptsVAtcOAX0x++13T9r8HXqmzlP96HjRL0Zt9XVj05b5RW9w7+S1wLkosC/o96c9+kqrmdzSTo4hcHIq8gLvv6A/WDtbvdXN5fXfh/3kypK9c3Hejj1gYNpv6viPX/ltcL+5YyJYLOC/VuC/nZR1i/vVBZ8B9kfZXnHD9AeLRwX2EcHKaxo/eNzraeaXGY7Zf8D8pgvfks6Bfce3fFnRfIlomq32yRXO+v4NZRsZf3zds49EnKnf/lfd/GZ7vzrgD9yvbmkmtRA4ORV5gf02Nz+H8xsJ6p2/RR8zmoyj9Vf4EPHsbw/bJdfFC9z6p6R7hySB/V1OObIQDKPvfKBsf75vMrjn2S9z+eYSNruDq62wdpbbs/rJjX6NOfyVhXo3e1Qn5OIepZM0yZflOnC9x+q0ejNIupRae5W8wD4j7IvVF87vs2tuH7czLhne7Ijq58e+Tvnle/YHzwvu5FbvqRH+eXP9MlInmVTfO7rI40/3TQZZ+XLU2eKT9J3T7ACT3qPT/y8vsAPyo/Ahew3YaReHPyXaaPNzXl+q50+l2K7B85V9UUZ19jT6fj5cvH9Dxcp+WKizXXXrhF3w483vW21mCN1M+FmG0M28f6t/4xyevGXOPnf59J+78V+UPGzvmf2VxKTv4g/b82Wkc3nrCoHnMuBqbc1MYjXzvaI/F6owBGzmO/I3jxNAYLoBAsIEEFg4PEqHAALTAxAQJoDAwuFROgQQmB6AgDABBBYOj9IhgMD0AASECSCwcHiUDgEEpgcgIEwAgYXDo3QIIDA9AAFhAggsHB6lQwCB6QEICBNAYOHwKB0CCEwPQECYAAILh0fpEEBgegACwgQQWDg8SocAAtMDEBAmgMDC4VE6BBCYHoCAMAEEFg6P0iGAwPQABIQJILBweJQOAQSmByAgTACBhcOjdAggMD0AAWECCCwcHqVDAIHpAQgIE0Bg4fAoHQIITA9AQJgAAguHR+kQQGB6AALCBBBYODxKhwAC0wMQECaAwMLhUToEEJgegIAwAQQWDo/SIYDA9AAEhAkgsHB4lA4BBKYHICBMAIGFw6N0CCAwPQABYQIILBwepUMAgekBCAgTQGDh8CgdAghMD0BAmAACC4dH6RBAYHoAAsIEEFg4PEqHAALTAxAQJoDAwuFROgQQmB6AgDABBBYOj9IhgMD0AASECSCwcHiUDgEEpgcgIEwAgYXDo3QIIDA9AAFhAggsHB6lQwCB6QEICBNAYOHwKB0CCEwPQECYAAILh0fpEEBgegACwgQQWDg8SocAAtMDEBAmgMDC4VE6BBCYHoCAMAEEFg6P0iGAwPQABIQJILBweJQOAQSmByAgTACBhcOjdAggMD0AAWECCCwcHqVDAIHpAQgIE0Bg4fAoHQIITA9AQJgAAguHR+kQQGB6AALCBBBYODxKhwAC0wMQECaAwMLhUToEEJgegIAwAQQWDo/SIYDA9AAEhAkgsHB4lA4BBKYHICBMAIGFw6N0CCAwPQABYQIILBwepUMAgekBCAgTQGDh8CgdAghMD0BAmAACC4dH6RBAYHoAAsIEEFg4PEqHAALTAxAQJoDAwuFROgQQmB6AgDABBBYOj9IhgMD0AASECSCwcHiUDgEEpgcgIEwAgYXDo3QIIDA9AAFhAggsHB6lQwCB6QEICBNAYOHwKB0CCEwPQECYAAILh0fpEEBgegACwgQQWDg8SocAAtMDEBAmgMDC4VE6BBCYHoCAMAEEFg6P0iGAwPQABIQJILBweJQOAQSmByAgTACBhcOjdAggMD0AAWECCCwcHqVDAIHpAQgIE0Bg4fAoHQIITA9AQJgAAguHR+kQQGB6AALCBBBYODxKhwAC0wMQECaAwMLhUToEEJgegIAwAQQWDo/SIYDA9AAEhAkgsHB4lA4BBKYHICBMAIGFw6N0CCAwPQABYQIILBwepUMAgekBCAgTQGDh8CgdAghMD0BAmAACC4dH6RBAYHoAAsIEEFg4PEqHAALTAxAQJoDAwuFROgQQmB6AgDABBBYOj9IhgMD0AASECSCwcHiUDgEEpgcgIEwAgYXDo3QIIDA9AAFhAggsHB6lQwCB6QEICBNAYOHwKB0CCEwPQECYAAILh0fpEEBgegACwgQQWDg8SocAAtMDEBAmgMDC4VE6BBCYHoCAMIF/AQ1YJ7QBzBwcAAAAAElFTkSuQmCC"}}return null}traverse(e,t,n,r){for(const s of e.files||[])/\#folder/i.test(s.kind)?t.push(s):/\#file/i.test(s.kind)&&(/video|audio/i.test(s.file_category)?n.push(s):this.subExt.some((e=>s.file_extension.endsWith(e)))&&r.push(s))}async listFolder(e,t,n,r,s="",i=""){const o={share_id:n,parent_id:r,pass_code_token:s,limit:100,page_token:i,thumbnail_size:"SIZE_SMALL"},a=await this.fetchCaptcha("https://api-pan.xunlei.com/drive/v1/share/detail",{params:o}),c=[];this.traverse(a,c,e,t),a.next_page_token&&""!==a.next_page_token&&await this.listFolder(e,t,n,r,s,a.next_page_token);for(const r of c)await this.listFolder(e,t,n,r.id,s)}async listFile(e,t,n,r,s="",i="",o=null){const a={share_id:n,pass_code:r,limit:100,pass_code_token:s,page_token:i,thumbnail_size:"SIZE_SMALL"},c=await this.fetchCaptcha("https://api-pan.xunlei.com/drive/v1/share",{params:a});o&&Object.assign(o,{vod_pic:c.user_info?.avatar,vod_name:c.title||c.user_info?.nickname,pass_code_token:c.pass_code_token});const l=[];this.traverse(c,l,e,t),c.next_page_token&&""!==c.next_page_token&&await this.listFile(e,t,n,r,c.pass_code_token,c.next_page_token);for(const r of l)await this.listFolder(e,t,n,r.id,c.pass_code_token)}async getVod(e){const t=this.matchShare(e);if(!t)return null;const{url:n,shareId:r,pwd:s}=t,i=[],o=[],a={};await this.listFile(i,o,r,s,"","",a),i.sort(((e,t)=>e.name.localeCompare(t.name,void 0,{numeric:!0,sensitivity:"base"})));const c=["迅雷"],l=[],u=[];for(const e of i){const t={shareId:r,fileId:e.id,passCodeToken:a.pass_code_token||"",hash:e.hash,subs:this.findSubs(e.name,o)},n=""+vj.enc.Utf8.parse(JSON.stringify(t));l.push(`${this.removeExt(e.name)}$${n}`)}for(let e=0;c.length>e;e++)u.push(l.join("#"));return Object.assign(a,{vod_id:n,vod_content:e,vod_play_from:c.join("$$$"),vod_play_url:u.join("$$$"),type_name:"迅雷云盘"})}async play(e,t,n){const r=vj.enc.Utf8.stringify(vj.enc.Hex.parse(e)),{shareId:s,fileId:i,passCodeToken:o,hash:a,subs:c}=JSON.parse(r),l=await this.getVideoPreviewPlayInfo(s,i,o,a),u=((e,t,r)=>{const s=[];for(const i of r){const{fileId:r,hash:o}=i,a=new URL(n);a.searchParams.append("do","xunlei"),a.searchParams.append("shareId",e),a.searchParams.append("passCodeToken",t),a.searchParams.append("fileId",r),a.searchParams.append("hash",o),s.push(""+a)}return s})(s,o,c);return{url:l,extra:{subt:u},header:{"user-agent":"AndroidDownloadManager/13 (Linux; U; Android 13; M2004J7AC Build/SP1A.210812.016)"},parse:0,jx:0}}async proxy({shareId:e,fileId:t,passCodeToken:n,hash:r},s){const i=await this.getDownloadUrl({shareId:e,fileId:t,passCodeToken:n,hash:r}),o=await this._http.get(i,{responseType:"stream"});s.raw.writeHead(o.status,{"Content-Type":o.headers.getContentType()}),o.data.pipe(s.raw),o.data.on("end",(()=>{s.raw.end()}))}async copy(e,t,n,r){const s=await zQ.acquire();let i;try{const s=`xunlei_file_${this._username}_${t}`;if(i=await this.redis.get(s),!i){const o={parent_id:"",share_id:e,pass_code_token:n,ancestor_ids:[],file_ids:[t],specify_parent_id:!0};await this.fetchToken("https://api-pan.xunlei.com/drive/v1/share/restore",{method:"post",data:o}),await this.delay(1500);const a={parent_id:"",filters:JSON.stringify({phase:{eq:"PHASE_TYPE_COMPLETE"},trashed:{eq:!1}}),with_audit:!0,thumbnail_size:"SIZE_SMALL",limit:100},c=await this.fetchToken("https://api-pan.xunlei.com/drive/v1/files",{params:a});if(i=c.files.find((e=>/\#file/i.test(e.kind)&&e.hash===r))?.id,!i)throw Error("转存分享失败");try{const e=14400;await this.redis.set(s,i,"EX",e),await this._queue.add({fileId:i},{delay:1e3*e,attempts:3,backoff:1e4,removeOnComplete:!0,removeOnFail:!0})}catch(e){}}}finally{s()}return i}async delete(e){const t={ids:[e],space:""};await this.fetchToken("https://api-pan.xunlei.com/drive/v1/files:batchDelete",{method:"post",data:t})}async getVideoPreviewPlayInfo(e,t,n,r){const s=await this.copy(e,t,n,r);if(!s)throw Error("转存分享失败");const i="https://api-pan.xunlei.com/drive/v1/files/"+s,o=await this.fetchToken(i,{params:{space:""}}),a=[],c=o.links?.["application/octet-stream"];c&&(a.push("RAW"),a.push(c.url));for(const e of o.medias||[])e.link?.url&&(a.push(e.resolution_name||"other"),a.push(e.link.url));return a}async getDownloadUrl({shareId:e,fileId:t,passCodeToken:n,hash:r}){const s=await this.copy(e,t,n,r);if(!s)throw Error("转存分享失败");const i="https://api-pan.xunlei.com/drive/v1/files/"+s,o=await this.fetchToken(i,{params:{space:""}}),a=o.links?.["application/octet-stream"];return a?a.url:o.web_content_link}async me(){return await this.fetchToken("https://xluser-ssl.xunlei.com/v1/user/me")}async login(e,t){const n={};/\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*/i.test(e)?n.email=e:11>e.length||e.length>18?n.username=e:n.phone_number=e;const r=await this.refreshCaptchaToken("POST:/v1/auth/signin",n);return await this.fetch("https://xluser-ssl.xunlei.com/v1/auth/signin",{method:"post",data:{captcha_token:r.captcha_token,client_id:YQ,client_secret:KQ,username:e,password:t}})}async refreshToken(e){const t={grant_type:"refresh_token",refresh_token:e,client_id:YQ,client_secret:KQ};return await this.fetch("https://xluser-ssl.xunlei.com/v1/auth/token",{method:"post",data:t})}async refreshCaptchaToken(e,t){const n=await this.fetch("https://xluser-ssl.xunlei.com/v1/shield/captcha/init",{method:"post",data:{action:e,captcha_token:this.captchaToken||"",client_id:YQ,device_id:this.deviceId,meta:t,redirect_uri:"xlaccsdk01://xunlei.com/callback?state=harbor"}});return this.captchaToken=n.captcha_token,n}async getCaptchaToken(e,t){const n=async()=>{let e=""+kj().valueOf(),t=`${YQ}${QQ}${WQ}${this.deviceId}${e}`;for(const e of VQ)t=""+vj.MD5(t+e);return{timestamp:e,sign:"1."+t}},r="xunlei_captcha_"+this.deviceId;let s=await this.redis.get(r);if(!s){const i=new URL(t),{timestamp:o,sign:a}=await n(),c={package_name:WQ,client_version:QQ,captcha_sign:a,timestamp:o,user_id:await this.redis.get("xunlei_userId_"+this._username)||"0"},l=await this.refreshCaptchaToken(`${e}:${i.pathname}`,c);s=l.captcha_token,await this.redis.set(r,s,"EX",l.expires_in)}return s}async getAccessToken(){if(!this._username||!this._password)throw Error("账号密码不能为空！");const e="xunlei_access_token_"+this._username;let t=await this.redis.get(e);if(!t){const n="xunlei_refresh_token_"+this._username,r=await this.redis.get(n);let s;if(r)try{s=await this.refreshToken(r)}catch{s=await this.login(this._username,this._password)}else s=await this.login(this._username,this._password);t=s.access_token,await this.redis.set(n,s.refresh_token,"EX",2592e3),await this.redis.set(e,t,"EX",s.expires_in),await this.redis.set("xunlei_userId_"+this._username,s.user_id,"EX",2592e3)}return t}async fetchToken(e,t={}){const n=await qQ.acquire();let r;try{r=await this.getAccessToken()}finally{n()}const s={Authorization:"Bearer "+r};return t.headers?Object.assign(t.headers,s):t.headers=s,await this.fetchCaptcha(e,t)}async fetchCaptcha(e,t={}){const n=await qQ.acquire();let r;try{r=await this.getCaptchaToken(t.method??"get",e)}finally{n()}const s={"x-captcha-token":r};return t.headers?Object.assign(t.headers,s):t.headers=s,this.fetch(e,t)}async fetch(e,t={}){const n=(await this._http(e,t)).data;if(n?.error_code)throw Error(n.error_description||n.error||""+n.error_code);return n}}var ZQ={exports:{}},eW=function(...e){try{return JSON.stringify(...e)}catch(e){return"[Cannot display object: "+e.message+"]"}};!function(e,t){const n=eW;ZQ.exports=class extends Error{constructor(e){super(e.filter((e=>""!==e)).map((e=>"string"==typeof e?e:e instanceof Error?e.message:n(e))).join(" ")||"Unknown error"),"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,t.assert)}}}(0,ZQ.exports);var tW=ZQ.exports;const nW=tW;var rW=function(e,...t){if(!e){if(1===t.length&&t[0]instanceof Error)throw t[0];throw new nW(t)}};const sW=rW,iW={};var oW=function(e,t,n){if(!1===t||null==t)return e;"string"==typeof(n=n||{})&&(n={separator:n});const r=Array.isArray(t);sW(!r||!n.separator,"Separator option is not valid for array-based chain");const s=r?t:t.split(n.separator||".");let i=e;for(let e=0;s.length>e;++e){let r=s[e];const o=n.iterables&&iW.iterables(i);if(Array.isArray(i)||"set"===o){const e=+r;Number.isInteger(e)&&(r=0>e?i.length+e:e)}if(!i||"function"==typeof i&&!1===n.functions||!o&&void 0===i[r]){sW(!n.strict||e+1===s.length,"Missing segment",r,"in reach path ",t),sW("object"==typeof i||!0===n.functions||"function"!=typeof i,"Invalid segment",r,"in reach path ",t),i=n.default;break}i=o?"set"===o?[...i][r]:i.get(r):i[r]}return i};iW.iterables=function(e){return e instanceof Set?"set":e instanceof Map?"map":void 0};var aW={exports:{}};!function(e,t){const n={};t=aW.exports={array:Array.prototype,buffer:Buffer&&Buffer.prototype,date:Date.prototype,error:Error.prototype,generic:Object.prototype,map:Map.prototype,promise:Promise.prototype,regex:RegExp.prototype,set:Set.prototype,weakMap:WeakMap.prototype,weakSet:WeakSet.prototype},n.typeMap=new Map([["[object Error]",t.error],["[object Map]",t.map],["[object Promise]",t.promise],["[object Set]",t.set],["[object WeakMap]",t.weakMap],["[object WeakSet]",t.weakSet]]),t.getInternalProto=function(e){if(Array.isArray(e))return t.array;if(Buffer&&e instanceof Buffer)return t.buffer;if(e instanceof Date)return t.date;if(e instanceof RegExp)return t.regex;if(e instanceof Error)return t.error;const r={}.toString.call(e);return n.typeMap.get(r)||t.generic}}(0,aW.exports);var cW=aW.exports,lW={keys:function(e,t={}){return!1!==t.symbols?Reflect.ownKeys(e):Object.getOwnPropertyNames(e)}};const uW=oW,pW=cW,dW=lW,hW={needsProtoHack:new Set([pW.set,pW.map,pW.weakSet,pW.weakMap])};var fW=hW.clone=function(e,t={},n=null){if("object"!=typeof e||null===e)return e;let r=hW.clone,s=n;if(t.shallow){if(!0!==t.shallow)return hW.cloneWithShallow(e,t);r=e=>e}else if(s){const t=s.get(e);if(t)return t}else s=new Map;const i=pW.getInternalProto(e);if(i===pW.buffer)return Buffer&&Buffer.from(e);if(i===pW.date)return new Date(e.getTime());if(i===pW.regex)return RegExp(e);const o=hW.base(e,i,t);if(o===e)return e;if(s&&s.set(e,o),i===pW.set)for(const n of e)o.add(r(n,t,s));else if(i===pW.map)for(const[n,i]of e)o.set(n,r(i,t,s));const a=dW.keys(e,t);for(const n of a){if("__proto__"===n)continue;if(i===pW.array&&"length"===n){o.length=e.length;continue}const a=Object.getOwnPropertyDescriptor(e,n);a?a.get||a.set?Object.defineProperty(o,n,a):a.enumerable?o[n]=r(e[n],t,s):Object.defineProperty(o,n,{enumerable:!1,writable:!0,configurable:!0,value:r(e[n],t,s)}):Object.defineProperty(o,n,{enumerable:!0,writable:!0,configurable:!0,value:r(e[n],t,s)})}return o};hW.cloneWithShallow=function(e,t){const n=t.shallow;(t=Object.assign({},t)).shallow=!1;const r=new Map;for(const t of n){const n=uW(e,t);"object"!=typeof n&&"function"!=typeof n||r.set(n,n)}return hW.clone(e,t,r)},hW.base=function(e,t,n){if(!1===n.prototype)return hW.needsProtoHack.has(t)?new t.constructor:t===pW.array?[]:{};const r=Object.getPrototypeOf(e);if(r&&r.isImmutable)return e;if(t===pW.array){const e=[];return r!==t&&Object.setPrototypeOf(e,r),e}if(hW.needsProtoHack.has(t)){const e=new r.constructor;return r!==t&&Object.setPrototypeOf(e,r),e}return Object.create(r)};var mW,gW={},yW={},vW={name:"joi",description:"Object schema validation",version:"17.13.3",repository:"git://github.com/hapijs/joi",main:"lib/index.js",types:"lib/index.d.ts",browser:"dist/joi-browser.min.js",files:["lib/**/*","dist/*"],keywords:["schema","validation"],dependencies:{"@hapi/hoek":"^9.3.0","@hapi/topo":"^5.1.0","@sideway/address":"^4.1.5","@sideway/formula":"^3.0.1","@sideway/pinpoint":"^2.0.0"},devDependencies:{"@hapi/bourne":"2.x.x","@hapi/code":"8.x.x","@hapi/joi-legacy-test":"npm:@hapi/joi@15.x.x","@hapi/lab":"^25.1.3","@types/node":"^14.18.63",typescript:"4.3.x"},scripts:{prepublishOnly:"cd browser && npm install && npm run build",test:"lab -t 100 -a @hapi/code -L -Y","test-cov-html":"lab -r html -o coverage.html -a @hapi/code"},license:"BSD-3-Clause"},bW={};function EW(){if(mW)return bW;mW=1;const e=jX(),t={};return t.wrap=e.string().min(1).max(2).allow(!1),bW.preferences=e.object({allowUnknown:e.boolean(),abortEarly:e.boolean(),artifacts:e.boolean(),cache:e.boolean(),context:e.object(),convert:e.boolean(),dateFormat:e.valid("date","iso","string","time","utc"),debug:e.boolean(),errors:{escapeHtml:e.boolean(),label:e.valid("path","key",!1),language:[e.string(),e.object().ref()],render:e.boolean(),stack:e.boolean(),wrap:{label:t.wrap,array:t.wrap,string:t.wrap}},externals:e.boolean(),messages:e.object(),noDefaults:e.boolean(),nonEnumerables:e.boolean(),presence:e.valid("required","optional","forbidden"),skipFunctions:e.boolean(),stripUnknown:e.object({arrays:e.boolean(),objects:e.boolean()}).or("arrays","objects").allow(!0,!1),warnings:e.boolean()}).strict(),t.nameRx=/^[a-zA-Z0-9]\w*$/,t.rule=e.object({alias:e.array().items(e.string().pattern(t.nameRx)).single(),args:e.array().items(e.string(),e.object({name:e.string().pattern(t.nameRx).required(),ref:e.boolean(),assert:e.alternatives([e.function(),e.object().schema()]).conditional("ref",{is:!0,then:e.required()}),normalize:e.function(),message:e.string().when("assert",{is:e.function(),then:e.required()})})),convert:e.boolean(),manifest:e.boolean(),method:e.function().allow(!1),multi:e.boolean(),validate:e.function()}),bW.extension=e.object({type:e.alternatives([e.string(),e.object().regex()]).required(),args:e.function(),cast:e.object().pattern(t.nameRx,e.object({from:e.function().maxArity(1).required(),to:e.function().minArity(1).maxArity(2).required()})),base:e.object().schema().when("type",{is:e.object().regex(),then:e.forbidden()}),coerce:[e.function().maxArity(3),e.object({method:e.function().maxArity(3).required(),from:e.array().items(e.string()).single()})],flags:e.object().pattern(t.nameRx,e.object({setter:e.string(),default:e.any()})),manifest:{build:e.function().arity(2)},messages:[e.object(),e.string()],modifiers:e.object().pattern(t.nameRx,e.function().minArity(1).maxArity(2)),overrides:e.object().pattern(t.nameRx,e.function()),prepare:e.function().maxArity(3),rebuild:e.function().arity(1),rules:e.object().pattern(t.nameRx,t.rule),terms:e.object().pattern(t.nameRx,e.object({init:e.array().allow(null).required(),manifest:e.object().pattern(/.+/,[e.valid("schema","single"),e.object({mapped:e.object({from:e.string().required(),to:e.string().required()}).required()})])})),validate:e.function().maxArity(3)}).strict(),bW.extensions=e.array().items(e.object(),e.function().arity(1)).strict(),t.desc={buffer:e.object({buffer:e.string()}),func:e.object({function:e.function().required(),options:{literal:!0}}),override:e.object({override:!0}),ref:e.object({ref:e.object({type:e.valid("value","global","local"),path:e.array().required(),separator:e.string().length(1).allow(!1),ancestor:e.number().min(0).integer().allow("root"),map:e.array().items(e.array().length(2)).min(1),adjust:e.function(),iterables:e.boolean(),in:e.boolean(),render:e.boolean()}).required()}),regex:e.object({regex:e.string().min(3)}),special:e.object({special:e.valid("deep").required()}),template:e.object({template:e.string().required(),options:e.object()}),value:e.object({value:e.alternatives([e.object(),e.array()]).required()})},t.desc.entity=e.alternatives([e.array().items(e.link("...")),e.boolean(),e.function(),e.number(),e.string(),t.desc.buffer,t.desc.func,t.desc.ref,t.desc.regex,t.desc.special,t.desc.template,t.desc.value,e.link("/")]),t.desc.values=e.array().items(null,e.boolean(),e.function(),e.number().allow(1/0,-1/0),e.string().allow(""),e.symbol(),t.desc.buffer,t.desc.func,t.desc.override,t.desc.ref,t.desc.regex,t.desc.template,t.desc.value),t.desc.messages=e.object().pattern(/.+/,[e.string(),t.desc.template,e.object().pattern(/.+/,[e.string(),t.desc.template])]),bW.description=e.object({type:e.string().required(),flags:e.object({cast:e.string(),default:e.any(),description:e.string(),empty:e.link("/"),failover:t.desc.entity,id:e.string(),label:e.string(),only:!0,presence:["optional","required","forbidden"],result:["raw","strip"],strip:e.boolean(),unit:e.string()}).unknown(),preferences:{allowUnknown:e.boolean(),abortEarly:e.boolean(),artifacts:e.boolean(),cache:e.boolean(),convert:e.boolean(),dateFormat:["date","iso","string","time","utc"],errors:{escapeHtml:e.boolean(),label:["path","key"],language:[e.string(),t.desc.ref],wrap:{label:t.wrap,array:t.wrap}},externals:e.boolean(),messages:t.desc.messages,noDefaults:e.boolean(),nonEnumerables:e.boolean(),presence:["required","optional","forbidden"],skipFunctions:e.boolean(),stripUnknown:e.object({arrays:e.boolean(),objects:e.boolean()}).or("arrays","objects").allow(!0,!1),warnings:e.boolean()},allow:t.desc.values,invalid:t.desc.values,rules:e.array().min(1).items({name:e.string().required(),args:e.object().min(1),keep:e.boolean(),message:[e.string(),t.desc.messages],warn:e.boolean()}),keys:e.object().pattern(/.*/,e.link("/")),link:t.desc.ref}).pattern(/^[a-z]\w*$/,e.any()),bW}var _W={},AW={exports:{}};const SW={};var TW=function(e){if(!e)return"";let t="";for(let n=0;e.length>n;++n){const r=e.charCodeAt(n);SW.isSafe(r)?t+=e[n]:t+=SW.escapeHtmlChar(r)}return t};SW.escapeHtmlChar=function(e){return SW.namedHtml.get(e)||(256>e?`&#x${e.toString(16).padStart(2,"0")};`:"&#"+e+";")},SW.isSafe=function(e){return SW.safeCharCodes.has(e)},SW.namedHtml=new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[34,"&quot;"],[160,"&nbsp;"],[162,"&cent;"],[163,"&pound;"],[164,"&curren;"],[169,"&copy;"],[174,"&reg;"]]),SW.safeCharCodes=function(){const e=new Set;for(let t=32;123>t;++t)97>t&&(65>t||t>90)&&(48>t||t>57)&&32!==t&&46!==t&&44!==t&&45!==t&&58!==t&&95!==t||e.add(t);return e}();var wW={};!function(e){const t={operators:["!","^","*","/","%","+","-","<","<=",">",">=","==","!=","&&","||","??"],operatorCharacters:["!","^","*","/","%","+","-","<","=",">","&","|","?"],operatorsOrder:[["^"],["*","/","%"],["+","-"],["<","<=",">",">="],["==","!="],["&&"],["||","??"]],operatorsPrefix:["!","n"],literals:{'"':'"',"`":"`","'":"'","[":"]"},numberRx:/^(?:[0-9]*(\.[0-9]*)?){1}$/,tokenRx:/^[\w\$\#\.\@\:\{\}]+$/,symbol:Symbol("formula"),settings:Symbol("settings")};e.Parser=class{constructor(e,n={}){if(!n[t.settings]&&n.constants)for(const e in n.constants){const t=n.constants[e];if(null!==t&&!["boolean","number","string"].includes(typeof t))throw Error(`Formula constant ${e} contains invalid ${typeof t} value type`)}this.settings=n[t.settings]?n:Object.assign({[t.settings]:!0,constants:{},functions:{}},n),this.single=null,this._parts=null,this._parse(e)}_parse(n){let r=[],s="",i=0,o=!1;const a=n=>{if(i)throw Error("Formula missing closing parenthesis");const a=r.length?r[r.length-1]:null;if(o||s||n){if(a&&"reference"===a.type&&")"===n)return a.type="function",a.value=this._subFormula(s,a.value),void(s="");if(")"===n){const t=new e.Parser(s,this.settings);r.push({type:"segment",value:t})}else if(o){if("]"===o)return r.push({type:"reference",value:s}),void(s="");r.push({type:"literal",value:s})}else if(t.operatorCharacters.includes(s))a&&"operator"===a.type&&t.operators.includes(a.value+s)?a.value+=s:r.push({type:"operator",value:s});else if(s.match(t.numberRx))r.push({type:"constant",value:parseFloat(s)});else if(void 0!==this.settings.constants[s])r.push({type:"constant",value:this.settings.constants[s]});else{if(!s.match(t.tokenRx))throw Error("Formula contains invalid token: "+s);r.push({type:"reference",value:s})}s=""}};for(const e of n)o?e===o?(a(),o=!1):s+=e:i?"("===e?(s+=e,++i):")"===e?(--i,i?s+=e:a(e)):s+=e:e in t.literals?o=t.literals[e]:"("===e?(a(),++i):t.operatorCharacters.includes(e)?(a(),s=e,a()):" "!==e?s+=e:a();a(),r=r.map(((e,t)=>"operator"!==e.type||"-"!==e.value||t&&"operator"!==r[t-1].type?e:{type:"operator",value:"n"}));let c=!1;for(const e of r){if("operator"===e.type){if(t.operatorsPrefix.includes(e.value))continue;if(!c)throw Error("Formula contains an operator in invalid position");if(!t.operators.includes(e.value))throw Error("Formula contains an unknown operator "+e.value)}else if(c)throw Error("Formula missing expected operator");c=!c}if(!c)throw Error("Formula contains invalid trailing operator");1===r.length&&["reference","literal","constant"].includes(r[0].type)&&(this.single={type:"reference"===r[0].type?"reference":"value",value:r[0].value}),this._parts=r.map((e=>{if("operator"===e.type)return t.operatorsPrefix.includes(e.value)?e:e.value;if("reference"!==e.type)return e.value;if(this.settings.tokenRx&&!this.settings.tokenRx.test(e.value))throw Error("Formula contains invalid reference "+e.value);return this.settings.reference?this.settings.reference(e.value):t.reference(e.value)}))}_subFormula(n,r){const s=this.settings.functions[r];if("function"!=typeof s)throw Error("Formula contains unknown function "+r);let i=[];if(n){let e="",s=0,o=!1;const a=()=>{if(!e)throw Error(`Formula contains function ${r} with invalid arguments ${n}`);i.push(e),e=""};for(let r=0;n.length>r;++r){const i=n[r];o?(e+=i,i===o&&(o=!1)):i in t.literals&&!s?(e+=i,o=t.literals[i]):","!==i||s?(e+=i,"("===i?++s:")"===i&&--s):a()}a()}return i=i.map((t=>new e.Parser(t,this.settings))),function(e){const t=[];for(const n of i)t.push(n.evaluate(e));return s.call(e,...t)}}evaluate(e){const n=this._parts.slice();for(let r=n.length-2;r>=0;--r){const s=n[r];if(s&&"operator"===s.type){const i=n[r+1];n.splice(r+1,1);const o=t.evaluate(i,e);n[r]=t.single(s.value,o)}}return t.operatorsOrder.forEach((r=>{for(let s=1;n.length-1>s;)if(r.includes(n[s])){const r=n[s],i=t.evaluate(n[s-1],e),o=t.evaluate(n[s+1],e);n.splice(s,2);const a=t.calculate(r,i,o);n[s-1]=0===a?0:a}else s+=2})),t.evaluate(n[0],e)}},e.Parser.prototype[t.symbol]=!0,t.reference=function(e){return function(t){return t&&void 0!==t[e]?t[e]:null}},t.evaluate=function(e,n){return null===e?null:"function"==typeof e?e(n):e[t.symbol]?e.evaluate(n):e},t.single=function(e,t){if("!"===e)return!t;const n=-t;return 0===n?0:n},t.calculate=function(e,n,r){if("??"===e)return t.exists(n)?n:r;if("string"==typeof n||"string"==typeof r){if("+"===e)return(n=t.exists(n)?n:"")+(t.exists(r)?r:"")}else switch(e){case"^":return Math.pow(n,r);case"*":return n*r;case"/":return n/r;case"%":return n%r;case"+":return n+r;case"-":return n-r}switch(e){case"<":return r>n;case"<=":return r>=n;case">":return n>r;case">=":return n>=r;case"==":return n===r;case"!=":return n!==r;case"&&":return n&&r;case"||":return n||r}return null},t.exists=function(e){return null!=e}}(wW);var xW,kW,CW={},IW={};function RW(){return kW||(kW=1,function(e){const t=function(){if(xW)return IW;xW=1;const e=fW,t=$W(),n={annotations:Symbol("annotations")};return IW.error=function(r){if(!this._original||"object"!=typeof this._original)return this.details[0].message;const s=r?"":"[31m",i=r?"":"[41m",o=r?"":"[0m",a=e(this._original);for(let e=this.details.length-1;e>=0;--e){const r=e+1,s=this.details[e],i=s.path;let o=a;for(let e=0;;++e){const a=i[e];if(t.isSchema(o)&&(o=o.clone()),e+1>=i.length||"string"==typeof o[a]){const e=o[n.annotations]||{errors:{},missing:{}};o[n.annotations]=e;const t=a||s.context.key;void 0!==o[a]?(e.errors[t]=e.errors[t]||[],e.errors[t].push(r)):e.missing[t]=r;break}o=o[a]}}let c=n.safeStringify(a,2).replace(/_\$key\$_([, \d]+)_\$end\$_"/g,((e,t)=>`" ${s}[${t}]${o}`)).replace(/"_\$miss\$_([^|]+)\|(\d+)_\$end\$_": "__missing__"/g,((e,t,n)=>`${i}"${t}"${o}${s} [${n}]: -- missing --${o}`)).replace(/\s*"_\$idx\$_([, \d]+)_\$end\$_",?\n(.*)/g,((e,t,n)=>`\n${n} ${s}[${t}]${o}`)).replace(/"\[(NaN|Symbol.*|-?Infinity|function.*|\(.*)]"/g,((e,t)=>t));c=`${c}\n${s}`;for(let e=0;this.details.length>e;++e)c=`${c}\n[${e+1}] ${this.details[e].message}`;return c+=o,c},n.safeStringify=function(e,t){return JSON.stringify(e,n.serializer(),t)},n.serializer=function(){const e=[],t=[];return function(r,s){if(t.length>0){const n=t.indexOf(this);~n?(t.length=n+1,e.length=n+1,e[n]=r):(t.push(this),e.push(r)),~t.indexOf(s)&&(s=((n,r)=>t[0]===r?"[Circular ~]":"[Circular ~."+e.slice(0,t.indexOf(r)).join(".")+"]")(0,s))}else t.push(s);if(s){const e=s[n.annotations];if(e){if(Array.isArray(s)){const t=[];for(let n=0;s.length>n;++n)e.errors[n]&&t.push(`_$idx$_${e.errors[n].sort().join(", ")}_$end$_`),t.push(s[n]);s=t}else{for(const t in e.errors)s[`${t}_$key$_${e.errors[t].sort().join(", ")}_$end$_`]=s[t],s[t]=void 0;for(const t in e.missing)s[`_$miss$_${t}|${e.missing[t]}_$end$_`]="__missing__"}return s}}return s===1/0||s===-1/0||Number.isNaN(s)||"function"==typeof s||"symbol"==typeof s?"["+s+"]":s}},IW}(),n=$W(),r=jW();e.Report=class{constructor(t,n,r,s,i,o,a){if(this.code=t,this.flags=s,this.messages=i,this.path=o.path,this.prefs=a,this.state=o,this.value=n,this.message=null,this.template=null,this.local=r||{},this.local.label=e.label(this.flags,this.state,this.prefs,this.messages),void 0===this.value||this.local.hasOwnProperty("value")||(this.local.value=this.value),this.path.length){const e=this.path[this.path.length-1];"object"!=typeof e&&(this.local.key=e)}}_setTemplate(e){if(this.template=e,!this.flags.label&&0===this.path.length){const e=this._template(this.template,"root");e&&(this.local.label=e)}}toString(){if(this.message)return this.message;const e=this.code;if(!this.prefs.errors.render)return this.code;const t=this._template(this.template)||this._template(this.prefs.messages)||this._template(this.messages);return void 0===t?`Error code "${e}" is not defined, your custom type is missing the correct messages definition`:(this.message=t.render(this.value,this.state,this.prefs,this.local,{errors:this.prefs.errors,messages:[this.prefs.messages,this.messages]}),this.prefs.errors.label||(this.message=this.message.replace(/^"" /,"").trim()),this.message)}_template(t,n){return e.template(this.value,t,n||this.code,this.state,this.prefs)}},e.path=function(e){let t="";for(const n of e)"object"!=typeof n&&("string"==typeof n?(t&&(t+="."),t+=n):t+=`[${n}]`);return t},e.template=function(e,t,s,i,o){if(!t)return;if(r.isTemplate(t))return"root"!==s?t:null;let a=o.errors.language;if(n.isResolvable(a)&&(a=a.resolve(e,i,o)),a&&t[a]){if(void 0!==t[a][s])return t[a][s];if(void 0!==t[a]["*"])return t[a]["*"]}return t[s]?t[s]:t["*"]},e.label=function(t,n,r,s){if(!r.errors.label)return"";if(t.label)return t.label;let i=n.path;return"key"===r.errors.label&&n.path.length>1&&(i=n.path.slice(-1)),e.path(i)||e.template(null,r.messages,"root",n,r)||s&&e.template(null,s,"root",n,r)||"value"},e.process=function(t,n,r){if(!t)return null;const{override:s,message:i,details:o}=e.details(t);if(s)return s;if(r.errors.stack)return new e.ValidationError(i,o,n);const a=Error.stackTraceLimit;Error.stackTraceLimit=0;const c=new e.ValidationError(i,o,n);return Error.stackTraceLimit=a,c},e.details=function(e,t={}){let n=[];const r=[];for(const s of e){if(s instanceof Error){if(!1!==t.override)return{override:s};const e=""+s;n.push(e),r.push({message:e,type:"override",context:{error:s}});continue}const e=""+s;n.push(e),r.push({message:e,path:s.path.filter((e=>"object"!=typeof e)),type:s.code,context:s.local})}return n.length>1&&(n=[...new Set(n)]),{message:n.join(". "),details:r}},e.ValidationError=class extends Error{constructor(e,t,n){super(e),this._original=n,this.details=t}static isError(t){return t instanceof e.ValidationError}},e.ValidationError.prototype.isJoi=!0,e.ValidationError.prototype.name="ValidationError",e.ValidationError.prototype.annotate=t.error}(CW)),CW}var OW,NW,DW,PW,LW,MW={};function BW(){return OW||(OW=1,function(e){const t=rW,n=fW,r=oW,s=$W();let i;const o={symbol:Symbol("ref"),defaults:{adjust:null,in:!1,iterables:null,map:null,separator:".",type:"value"}};e.create=function(e,n={}){t("string"==typeof e,"Invalid reference key:",e),s.assertOptions(n,["adjust","ancestor","in","iterables","map","prefix","render","separator"]),t(!n.prefix||"object"==typeof n.prefix,"options.prefix must be of type object");const r=Object.assign({},o.defaults,n);delete r.prefix;const i=r.separator,a=o.context(e,i,n.prefix);if(r.type=a.type,e=a.key,"value"===r.type)if(a.root&&(t(!i||e[0]!==i,"Cannot specify relative path with root prefix"),r.ancestor="root",e||(e=null)),i&&i===e)e=null,r.ancestor=0;else if(void 0!==r.ancestor)t(!i||!e||e[0]!==i,"Cannot combine prefix with ancestor option");else{const[t,n]=o.ancestor(e,i);n&&""===(e=e.slice(n))&&(e=null),r.ancestor=t}return r.path=i?null===e?[]:e.split(i):[e],new o.Ref(r)},e.in=function(t,n={}){return e.create(t,{...n,in:!0})},e.isRef=function(e){return!!e&&!!e[s.symbols.ref]},o.Ref=class{constructor(e){t("object"==typeof e,"Invalid reference construction"),s.assertOptions(e,["adjust","ancestor","in","iterables","map","path","render","separator","type","depth","key","root","display"]),t([!1,void 0].includes(e.separator)||"string"==typeof e.separator&&1===e.separator.length,"Invalid separator"),t(!e.adjust||"function"==typeof e.adjust,"options.adjust must be a function"),t(!e.map||Array.isArray(e.map),"options.map must be an array"),t(!e.map||!e.adjust,"Cannot set both map and adjust options"),Object.assign(this,o.defaults,e),t("value"===this.type||void 0===this.ancestor,"Non-value references cannot reference ancestors"),Array.isArray(this.map)&&(this.map=new Map(this.map)),this.depth=this.path.length,this.key=this.path.length?this.path.join(this.separator):null,this.root=this.path[0],this.updateDisplay()}resolve(e,n,r,s,i={}){return t(!this.in||i.in,"Invalid in() reference usage"),"global"===this.type?this._resolve(r.context,n,i):"local"===this.type?this._resolve(s,n,i):this.ancestor?"root"===this.ancestor?this._resolve(n.ancestors[n.ancestors.length-1],n,i):(t(n.ancestors.length>=this.ancestor,"Invalid reference exceeds the schema root:",this.display),this._resolve(n.ancestors[this.ancestor-1],n,i)):this._resolve(e,n,i)}_resolve(e,t,n){let s;if("value"===this.type&&t.mainstay.shadow&&!1!==n.shadow&&(s=t.mainstay.shadow.get(this.absolute(t))),void 0===s&&(s=r(e,this.path,{iterables:this.iterables,functions:!0})),this.adjust&&(s=this.adjust(s)),this.map){const e=this.map.get(s);void 0!==e&&(s=e)}return t.mainstay&&t.mainstay.tracer.resolve(t,this,s),s}toString(){return this.display}absolute(e){return[...e.path.slice(0,-this.ancestor),...this.path]}clone(){return new o.Ref(this)}describe(){const e={path:this.path};"value"!==this.type&&(e.type=this.type),"."!==this.separator&&(e.separator=this.separator),"value"===this.type&&1!==this.ancestor&&(e.ancestor=this.ancestor),this.map&&(e.map=[...this.map]);for(const t of["adjust","iterables","render"])null!=this[t]&&(e[t]=this[t]);return!1!==this.in&&(e.in=!0),{ref:e}}updateDisplay(){const e=null!==this.key?this.key:"";if("value"!==this.type)return void(this.display=`ref:${this.type}:${e}`);if(!this.separator)return void(this.display="ref:"+e);if(!this.ancestor)return void(this.display=`ref:${this.separator}${e}`);if("root"===this.ancestor)return void(this.display="ref:root:"+e);if(1===this.ancestor)return void(this.display="ref:"+(e||".."));const t=Array(this.ancestor+1).fill(this.separator).join("");this.display=`ref:${t}${e||""}`}},o.Ref.prototype[s.symbols.ref]=!0,e.build=function(e){return"value"===(e=Object.assign({},o.defaults,e)).type&&void 0===e.ancestor&&(e.ancestor=1),new o.Ref(e)},o.context=function(e,t,n={}){if(e=e.trim(),n){const r=void 0===n.global?"$":n.global;if(r!==t&&e.startsWith(r))return{key:e.slice(r.length),type:"global"};const s=void 0===n.local?"#":n.local;if(s!==t&&e.startsWith(s))return{key:e.slice(s.length),type:"local"};const i=void 0===n.root?"/":n.root;if(i!==t&&e.startsWith(i))return{key:e.slice(i.length),type:"value",root:!0}}return{key:e,type:"value"}},o.ancestor=function(e,t){if(!t)return[1,0];if(e[0]!==t)return[1,0];if(e[1]!==t)return[0,1];let n=2;for(;e[n]===t;)++n;return[n-1,n]},e.toSibling=0,e.toParent=1,e.Manager=class{constructor(){this.refs=[]}register(t,n){if(t)if(n=void 0===n?e.toParent:n,Array.isArray(t))for(const e of t)this.register(e,n);else if(s.isSchema(t))for(const e of t._refs.refs)0>e.ancestor-n||this.refs.push({ancestor:e.ancestor-n,root:e.root});else e.isRef(t)&&"value"===t.type&&t.ancestor-n>=0&&this.refs.push({ancestor:t.ancestor-n,root:t.root}),i=i||jW(),i.isTemplate(t)&&this.register(t.refs(),n)}get length(){return this.refs.length}clone(){const t=new e.Manager;return t.refs=n(this.refs),t}reset(){this.refs=[]}roots(){return this.refs.filter((e=>!e.ancestor)).map((e=>e.root))}}}(MW)),MW}function jW(){return NW||(NW=1,function(e,t){const n=rW,r=fW,s=TW,i=wW,o=$W(),a=RW(),c=BW(),l={symbol:Symbol("template"),opens:Array(1e3).join("\0"),closes:Array(1e3).join(""),dateFormat:{date:Date.prototype.toDateString,iso:Date.prototype.toISOString,string:Date.prototype.toString,time:Date.prototype.toTimeString,utc:Date.prototype.toUTCString}};e.exports=l.Template=class{constructor(e,t){if(n("string"==typeof e,"Template source must be a string"),n(!e.includes("\0")&&!e.includes(""),"Template source cannot contain reserved control characters"),this.source=e,this.rendered=e,this._template=null,t){const{functions:e,...s}=t;this._settings=Object.keys(s).length?r(s):void 0,this._functions=e,this._functions&&(n(Object.keys(this._functions).every((e=>"string"==typeof e)),"Functions keys must be strings"),n(Object.values(this._functions).every((e=>"function"==typeof e)),"Functions values must be functions"))}else this._settings=void 0,this._functions=void 0;this._parse()}_parse(){if(!this.source.includes("{"))return;const e=l.encode(this.source),t=l.split(e);let n=!1;const r=[],s=t.shift();s&&r.push(s);for(const e of t){const t="{"!==e[0],s=t?"}":"}}",i=e.indexOf(s);if(-1===i||"{"===e[1]){r.push("{"+l.decode(e));continue}let o=e.slice(t?0:1,i);const a=":"===o[0];a&&(o=o.slice(1));const c=this._ref(l.decode(o),{raw:t,wrapped:a});r.push(c),"string"!=typeof c&&(n=!0);const u=e.slice(i+s.length);u&&r.push(l.decode(u))}n?this._template=r:this.rendered=r.join("")}static date(e,t){return l.dateFormat[t.dateFormat].call(e)}describe(e={}){if(!this._settings&&e.compact)return this.source;const t={template:this.source};return this._settings&&(t.options=this._settings),this._functions&&(t.functions=this._functions),t}static build(e){return new l.Template(e.template,e.options||e.functions?{...e.options,functions:e.functions}:void 0)}isDynamic(){return!!this._template}static isTemplate(e){return!!e&&!!e[o.symbols.template]}refs(){if(!this._template)return;const e=[];for(const t of this._template)"string"!=typeof t&&e.push(...t.refs);return e}resolve(e,t,n,r){return this._template&&1===this._template.length?this._part(this._template[0],e,t,n,r,{}):this.render(e,t,n,r)}_part(e,...t){return e.ref?e.ref.resolve(...t):e.formula.evaluate(t)}render(e,t,n,r,i={}){if(!this.isDynamic())return this.rendered;const o=[];for(const a of this._template)if("string"==typeof a)o.push(a);else{const c=this._part(a,e,t,n,r,i),u=l.stringify(c,e,t,n,r,i);if(void 0!==u){const e=a.raw||!1===(i.errors&&i.errors.escapeHtml)?u:s(u);o.push(l.wrap(e,a.wrapped&&n.errors.wrap.label))}}return o.join("")}_ref(e,{raw:t,wrapped:n}){const r=[],s=e=>{const t=c.create(e,this._settings);return r.push(t),e=>{const n=t.resolve(...e);return void 0!==n?n:null}};try{const t=this._functions?{...l.functions,...this._functions}:l.functions;var o=new i.Parser(e,{reference:s,functions:t,constants:l.constants})}catch(t){throw t.message=`Invalid template variable "${e}" fails due to: ${t.message}`,t}if(o.single){if("reference"===o.single.type){const e=r[0];return{ref:e,raw:t,refs:r,wrapped:n||"local"===e.type&&"label"===e.key}}return l.stringify(o.single.value)}return{formula:o,raw:t,refs:r}}toString(){return this.source}},l.Template.prototype[o.symbols.template]=!0,l.Template.prototype.isImmutable=!0,l.encode=function(e){return e.replace(/\\(\{+)/g,((e,t)=>l.opens.slice(0,t.length))).replace(/\\(\}+)/g,((e,t)=>l.closes.slice(0,t.length)))},l.decode=function(e){return e.replace(/\u0000/g,"{").replace(/\u0001/g,"}")},l.split=function(e){const t=[];let n="";for(let r=0;e.length>r;++r){const s=e[r];if("{"===s){let s="";for(;e.length>r+1&&"{"===e[r+1];)s+="{",++r;t.push(n),n=s}else n+=s}return t.push(n),t},l.wrap=function(e,t){return t?1===t.length?`${t}${e}${t}`:`${t[0]}${e}${t[1]}`:e},l.stringify=function(e,t,n,r,s,i={}){const o=typeof e,a=r&&r.errors&&r.errors.wrap||{};let u=!1;if(c.isRef(e)&&e.render&&(u=e.in,e=e.resolve(t,n,r,s,{in:e.in,...i})),null===e)return"null";if("string"===o)return l.wrap(e,i.arrayItems&&a.string);if("number"===o||"function"===o||"symbol"===o)return""+e;if("object"!==o)return JSON.stringify(e);if(e instanceof Date)return l.Template.date(e,r);if(e instanceof Map){const t=[];for(const[n,r]of e.entries())t.push(`${""+n} -> ${""+r}`);e=t}if(!Array.isArray(e))return""+e;const p=[];for(const o of e)p.push(l.stringify(o,t,n,r,s,{arrayItems:!0,...i}));return l.wrap(p.join(", "),!u&&a.array)},l.constants={true:!0,false:!1,null:null,second:1e3,minute:6e4,hour:36e5,day:864e5},l.functions={if:(e,t,n)=>e?t:n,length:e=>"string"==typeof e?e.length:e&&"object"==typeof e?Array.isArray(e)?e.length:Object.keys(e).length:null,msg(e){const[t,n,r,s,i]=this,o=i.messages;if(!o)return"";const c=a.template(t,o[0],e,n,r)||a.template(t,o[1],e,n,r);return c?c.render(t,n,r,s,i):""},number:e=>"number"==typeof e?e:"string"==typeof e?parseFloat(e):"boolean"==typeof e?e?1:0:e instanceof Date?e.getTime():null}}(AW)),AW.exports}function FW(){return DW||(DW=1,function(e){const t=rW,n=fW,r=jW();e.compile=function(e,s){if("string"==typeof e)return t(!s,"Cannot set single message string"),new r(e);if(r.isTemplate(e))return t(!s,"Cannot set single message template"),e;t("object"==typeof e&&!Array.isArray(e),"Invalid message options"),s=s?n(s):{};for(let n in e){const i=e[n];if("root"===n||r.isTemplate(i)){s[n]=i;continue}if("string"==typeof i){s[n]=new r(i);continue}t("object"==typeof i&&!Array.isArray(i),"Invalid message for",n);const o=n;for(n in s[o]=s[o]||{},i){const e=i[n];"root"===n||r.isTemplate(e)?s[o][n]=e:(t("string"==typeof e,"Invalid message for",n,"in",o),s[o][n]=new r(e))}}return s},e.decompile=function(e){const t={};for(let n in e){const s=e[n];if("root"===n){t.root=s;continue}if(r.isTemplate(s)){t[n]=s.describe({compact:!0});continue}const i=n;for(n in t[i]={},s){const e=s[n];"root"!==n?t[i][n]=e.describe({compact:!0}):t[i].root=e}}return t},e.merge=function(s,i){if(!s)return e.compile(i);if(!i)return s;if("string"==typeof i)return new r(i);if(r.isTemplate(i))return i;const o=n(s);for(let e in i){const n=i[e];if("root"===e||r.isTemplate(n)){o[e]=n;continue}if("string"==typeof n){o[e]=new r(n);continue}t("object"==typeof n&&!Array.isArray(n),"Invalid message for",e);const s=e;for(e in o[s]=o[s]||{},n){const i=n[e];"root"===e||r.isTemplate(i)?o[s][e]=i:(t("string"==typeof i,"Invalid message for",e,"in",s),o[s][e]=new r(i))}}return o}}(_W)),_W}function $W(){return PW||(PW=1,function(e){const t=rW,n=tW;let r,s;const i={isoDate:/^(?:[-+]\d{2})?(?:\d{4}(?!\d{2}\b))(?:(-?)(?:(?:0[1-9]|1[0-2])(?:\1(?:[12]\d|0[1-9]|3[01]))?|W(?:[0-4]\d|5[0-2])(?:-?[1-7])?|(?:00[1-9]|0[1-9]\d|[12]\d{2}|3(?:[0-5]\d|6[1-6])))(?![T]$|[T][\d]+Z$)(?:[T\s](?:(?:(?:[01]\d|2[0-3])(?:(:?)[0-5]\d)?|24\:?00)(?:[.,]\d+(?!:))?)(?:\2[0-5]\d(?:[.,]\d+)?)?(?:[Z]|(?:[+-])(?:[01]\d|2[0-3])(?::?[0-5]\d)?)?)?)?$/};e.version=vW.version,e.defaults={abortEarly:!0,allowUnknown:!1,artifacts:!1,cache:!0,context:null,convert:!0,dateFormat:"iso",errors:{escapeHtml:!1,label:"path",language:null,render:!0,stack:!1,wrap:{label:'"',array:"[]"}},externals:!0,messages:{},nonEnumerables:!1,noDefaults:!1,presence:"optional",skipFunctions:!1,stripUnknown:!1,warnings:!1},e.symbols={any:Symbol.for("@hapi/joi/schema"),arraySingle:Symbol("arraySingle"),deepDefault:Symbol("deepDefault"),errors:Symbol("errors"),literal:Symbol("literal"),override:Symbol("override"),parent:Symbol("parent"),prefs:Symbol("prefs"),ref:Symbol("ref"),template:Symbol("template"),values:Symbol("values")},e.assertOptions=function(e,n,r="Options"){t(e&&"object"==typeof e&&!Array.isArray(e),"Options must be of type object");const s=Object.keys(e).filter((e=>!n.includes(e)));t(0===s.length,`${r} contain unknown keys: ${s}`)},e.checkPreferences=function(e){s=s||EW();const t=s.preferences.validate(e);if(t.error)throw new n([t.error.details[0].message])},e.compare=function(e,t,n){switch(n){case"=":return e===t;case">":return e>t;case"<":return t>e;case">=":return e>=t;case"<=":return t>=e}},e.default=function(e,t){return void 0===e?t:e},e.isIsoDate=function(e){return i.isoDate.test(e)},e.isNumber=function(e){return"number"==typeof e&&!isNaN(e)},e.isResolvable=function(t){return!!t&&(t[e.symbols.ref]||t[e.symbols.template])},e.isSchema=function(n,r={}){const s=n&&n[e.symbols.any];return!!s&&(t(r.legacy||s.version===e.version,"Cannot mix different versions of joi schemas"),!0)},e.isValues=function(t){return t[e.symbols.values]},e.limit=function(e){return Number.isSafeInteger(e)&&e>=0},e.preferences=function(t,n){r=r||FW();const s=Object.assign({},t=t||{},n=n||{});return n.errors&&t.errors&&(s.errors=Object.assign({},t.errors,n.errors),s.errors.wrap=Object.assign({},t.errors.wrap,n.errors.wrap)),n.messages&&(s.messages=r.compile(n.messages,t.messages)),delete s[e.symbols.prefs],s},e.tryWithPath=function(e,t,n={}){try{return e()}catch(e){throw e.path=void 0!==e.path?t+"."+e.path:t,n.append&&(e.message=`${e.message} (${e.path})`),e}},e.validateArg=function(t,n,{assert:r,message:s}){if(e.isSchema(r)){const e=r.validate(t);if(!e.error)return;return e.error.message}if(!r(t))return n?`${n} ${s}`:s},e.verifyFlat=function(e,n){for(const r of e)t(!Array.isArray(r),"Method no longer accepts array arguments:",n)}}(yW)),yW}function UW(){if(LW)return gW;LW=1;const e=rW,t=fW,n=$W(),r={max:1e3,supported:new Set(["undefined","boolean","number","string"])};return gW.provider={provision:e=>new r.Cache(e)},r.Cache=class{constructor(t={}){n.assertOptions(t,["max"]),e(void 0===t.max||t.max&&t.max>0&&isFinite(t.max),"Invalid max cache size"),this._max=t.max||r.max,this._map=new Map,this._list=new r.List}get length(){return this._map.size}set(e,t){if(null!==e&&!r.supported.has(typeof e))return;let n=this._map.get(e);if(n)return n.value=t,void this._list.first(n);n=this._list.unshift({key:e,value:t}),this._map.set(e,n),this._compact()}get(e){const n=this._map.get(e);if(n)return this._list.first(n),t(n.value)}_compact(){if(this._map.size>this._max){const e=this._list.pop();this._map.delete(e.key)}}},r.List=class{constructor(){this.tail=null,this.head=null}unshift(e){return e.next=null,e.prev=this.head,this.head&&(this.head.next=e),this.head=e,this.tail||(this.tail=e),e}first(e){e!==this.head&&(this._remove(e),this.unshift(e))}pop(){return this._remove(this.tail)}_remove(e){const{next:t,prev:n}=e;return t.prev=n,n&&(n.next=t),e===this.tail&&(this.tail=t),e.prev=null,e.next=null,e}},gW}var HW,GW={};function qW(){return HW||(HW=1,function(e){const t=rW,n=$W(),r=BW(),s={};e.schema=function(e,t,r={}){n.assertOptions(r,["appendPath","override"]);try{return s.schema(e,t,r)}catch(e){throw r.appendPath&&void 0!==e.path&&(e.message=`${e.message} (${e.path})`),e}},s.schema=function(e,r,i){t(void 0!==r,"Invalid undefined schema"),Array.isArray(r)&&(t(r.length,"Invalid empty array schema"),1===r.length&&(r=r[0]));const o=(t,...n)=>!1!==i.override?t.valid(e.override,...n):t.valid(...n);if(s.simple(r))return o(e,r);if("function"==typeof r)return e.custom(r);if(t("object"==typeof r,"Invalid schema content:",typeof r),n.isResolvable(r))return o(e,r);if(n.isSchema(r))return r;if(Array.isArray(r)){for(const t of r)if(!s.simple(t))return e.alternatives().try(...r);return o(e,...r)}return r instanceof RegExp?e.string().regex(r):r instanceof Date?o(e.date(),r):(t(Object.getPrototypeOf(r)===Object.getPrototypeOf({}),"Schema can only contain plain objects"),e.object().keys(r))},e.ref=function(e,t){return r.isRef(e)?e:r.create(e,t)},e.compile=function(r,i,o={}){n.assertOptions(o,["legacy"]);const a=i&&i[n.symbols.any];if(a)return t(o.legacy||a.version===n.version,"Cannot mix different versions of joi schemas:",a.version,n.version),i;if("object"!=typeof i||!o.legacy)return e.schema(r,i,{appendPath:!0});const c=s.walk(i);return c?c.compile(c.root,i):e.schema(r,i,{appendPath:!0})},s.walk=function(e){if("object"!=typeof e)return null;if(Array.isArray(e)){for(const t of e){const e=s.walk(t);if(e)return e}return null}const r=e[n.symbols.any];if(r)return{root:e[r.root],compile:r.compile};t(Object.getPrototypeOf(e)===Object.getPrototypeOf({}),"Schema can only contain plain objects");for(const t in e){const n=s.walk(e[t]);if(n)return n}return null},s.simple=function(e){return null===e||["boolean","string","number"].includes(typeof e)},e.when=function(i,o,a){if(void 0===a&&(t(o&&"object"==typeof o,"Missing options"),a=o,o=r.create(".")),Array.isArray(a)&&(a={switch:a}),n.assertOptions(a,["is","not","then","otherwise","switch","break"]),n.isSchema(o))return t(void 0===a.is,'"is" can not be used with a schema condition'),t(void 0===a.not,'"not" can not be used with a schema condition'),t(void 0===a.switch,'"switch" can not be used with a schema condition'),s.condition(i,{is:o,then:a.then,otherwise:a.otherwise,break:a.break});if(t(r.isRef(o)||"string"==typeof o,"Invalid condition:",o),t(void 0===a.not||void 0===a.is,'Cannot combine "is" with "not"'),void 0===a.switch){let c=a;void 0!==a.not&&(c={is:a.not,then:a.otherwise,otherwise:a.then,break:a.break});let l=void 0!==c.is?i.$_compile(c.is):i.$_root.invalid(null,!1,0,"").required();return t(void 0!==c.then||void 0!==c.otherwise,'options must have at least one of "then", "otherwise", or "switch"'),t(void 0===c.break||void 0===c.then||void 0===c.otherwise,"Cannot specify then, otherwise, and break all together"),void 0===a.is||r.isRef(a.is)||n.isSchema(a.is)||(l=l.required()),s.condition(i,{ref:e.ref(o),is:l,then:c.then,otherwise:c.otherwise,break:c.break})}t(Array.isArray(a.switch),'"switch" must be an array'),t(void 0===a.is,'Cannot combine "switch" with "is"'),t(void 0===a.not,'Cannot combine "switch" with "not"'),t(void 0===a.then,'Cannot combine "switch" with "then"');const c={ref:e.ref(o),switch:[],break:a.break};for(let e=0;a.switch.length>e;++e){const s=a.switch[e],o=e===a.switch.length-1;n.assertOptions(s,o?["is","then","otherwise"]:["is","then"]),t(void 0!==s.is,'Switch statement missing "is"'),t(void 0!==s.then,'Switch statement missing "then"');const l={is:i.$_compile(s.is),then:i.$_compile(s.then)};if(r.isRef(s.is)||n.isSchema(s.is)||(l.is=l.is.required()),o){t(void 0===a.otherwise||void 0===s.otherwise,'Cannot specify "otherwise" inside and outside a "switch"');const e=void 0!==a.otherwise?a.otherwise:s.otherwise;void 0!==e&&(t(void 0===c.break,"Cannot specify both otherwise and break"),l.otherwise=i.$_compile(e))}c.switch.push(l)}return c},s.condition=function(e,t){for(const n of["then","otherwise"])void 0===t[n]?delete t[n]:t[n]=e.$_compile(t[n]);return t}}(GW)),GW}var zW,VW={};function YW(){if(zW)return VW;zW=1;const e=rW,t=fW,n=$W(),r=FW(),s={};return VW.type=function(i,o){const a=Object.getPrototypeOf(i),c=t(a),l=i._assign(Object.create(c)),u=Object.assign({},o);delete u.base,c._definition=u;const p=a._definition||{};u.messages=r.merge(p.messages,u.messages),u.properties=Object.assign({},p.properties,u.properties),l.type=u.type,u.flags=Object.assign({},p.flags,u.flags);const d=Object.assign({},p.terms);if(u.terms)for(const t in u.terms){const n=u.terms[t];e(void 0===l.$_terms[t],"Invalid term override for",u.type,t),l.$_terms[t]=n.init,d[t]=n}u.terms=d,u.args||(u.args=p.args),u.prepare=s.prepare(u.prepare,p.prepare),u.coerce&&("function"==typeof u.coerce&&(u.coerce={method:u.coerce}),u.coerce.from&&!Array.isArray(u.coerce.from)&&(u.coerce={method:u.coerce.method,from:[].concat(u.coerce.from)})),u.coerce=s.coerce(u.coerce,p.coerce),u.validate=s.validate(u.validate,p.validate);const h=Object.assign({},p.rules);if(u.rules)for(const t in u.rules){const r=u.rules[t];e("object"==typeof r,"Invalid rule definition for",u.type,t);let s=r.method;if(void 0===s&&(s=function(){return this.$_addRule(t)}),s&&(e(!c[t],"Rule conflict in",u.type,t),c[t]=s),e(!h[t],"Rule conflict in",u.type,t),h[t]=r,r.alias){const e=[].concat(r.alias);for(const t of e)c[t]=r.method}r.args&&(r.argsByName=new Map,r.args=r.args.map((t=>("string"==typeof t&&(t={name:t}),e(!r.argsByName.has(t.name),"Duplicated argument name",t.name),n.isSchema(t.assert)&&(t.assert=t.assert.strict().label(t.name)),r.argsByName.set(t.name,t),t))))}u.rules=h;const f=Object.assign({},p.modifiers);if(u.modifiers)for(const t in u.modifiers){e(!c[t],"Rule conflict in",u.type,t);const n=u.modifiers[t];e("function"==typeof n,"Invalid modifier definition for",u.type,t),c[t]=function(e){return this.rule({[t]:e})},f[t]=n}if(u.modifiers=f,u.overrides){c._super=a,l.$_super={};for(const t in u.overrides)e(a[t],"Cannot override missing",t),u.overrides[t][n.symbols.parent]=a[t],l.$_super[t]=a[t].bind(l);Object.assign(c,u.overrides)}u.cast=Object.assign({},p.cast,u.cast);const m=Object.assign({},p.manifest,u.manifest);return m.build=s.build(u.manifest&&u.manifest.build,p.manifest&&p.manifest.build),u.manifest=m,u.rebuild=s.rebuild(u.rebuild,p.rebuild),l},s.build=function(e,t){return e&&t?function(n,r){return t(e(n,r),r)}:e||t},s.coerce=function(e,t){return e&&t?{from:e.from&&t.from?[...new Set([...e.from,...t.from])]:null,method(n,r){let s;if((!t.from||t.from.includes(typeof n))&&(s=t.method(n,r),s)){if(s.errors||void 0===s.value)return s;n=s.value}if(!e.from||e.from.includes(typeof n)){const t=e.method(n,r);if(t)return t}return s}}:e||t},s.prepare=function(e,t){return e&&t?function(n,r){const s=e(n,r);if(s){if(s.errors||void 0===s.value)return s;n=s.value}return t(n,r)||s}:e||t},s.rebuild=function(e,t){return e&&t?function(n){t(n),e(n)}:e||t},s.validate=function(e,t){return e&&t?function(n,r){const s=t(n,r);if(s){if(s.errors&&(!Array.isArray(s.errors)||s.errors.length))return s;n=s.value}return e(n,r)||s}:e||t},VW}var KW,QW={};function WW(){if(KW)return QW;KW=1;const e=rW,t=fW,n=$W(),r=FW(),s=BW(),i=jW();let o;const a={};return QW.describe=function(s){const i=s._definition,o={type:s.type,flags:{},rules:[]};for(const e in s._flags)"_"!==e[0]&&(o.flags[e]=a.describe(s._flags[e]));Object.keys(o.flags).length||delete o.flags,s._preferences&&(o.preferences=t(s._preferences,{shallow:["messages"]}),delete o.preferences[n.symbols.prefs],o.preferences.messages&&(o.preferences.messages=r.decompile(o.preferences.messages))),s._valids&&(o.allow=s._valids.describe()),s._invalids&&(o.invalid=s._invalids.describe());for(const e of s._rules){if(!1===i.rules[e.name].manifest)continue;const t={name:e.name};for(const n in i.modifiers)void 0!==e[n]&&(t[n]=a.describe(e[n]));if(e.args){t.args={};for(const n in e.args){const r=e.args[n];("options"!==n||Object.keys(r).length)&&(t.args[n]=a.describe(r,{assign:n}))}Object.keys(t.args).length||delete t.args}o.rules.push(t)}o.rules.length||delete o.rules;for(const t in s.$_terms){if("_"===t[0])continue;e(!o[t],"Cannot describe schema due to internal name conflict with",t);const r=s.$_terms[t];if(!r)continue;if(r instanceof Map){r.size&&(o[t]=[...r.entries()]);continue}if(n.isValues(r)){o[t]=r.describe();continue}e(i.terms[t],"Term",t,"missing configuration");const c=i.terms[t].manifest,l="object"==typeof c;if(!r.length&&!l)continue;const u=[];for(const e of r)u.push(a.describe(e));if(l){const{from:e,to:n}=c.mapped;o[t]={};for(const r of u)o[t][r[n]]=r[e]}else"single"!==c?o[t]=u:(e(1===u.length,"Term",t,"contains more than one item"),o[t]=u[0])}return a.validate(s.$_root,o),o},a.describe=function(e,r={}){if(Array.isArray(e))return e.map(a.describe);if(e===n.symbols.deepDefault)return{special:"deep"};if("object"!=typeof e||null===e)return e;if("options"===r.assign)return t(e);if(Buffer&&Buffer.isBuffer(e))return{buffer:e.toString("binary")};if(e instanceof Date)return e.toISOString();if(e instanceof Error)return e;if(e instanceof RegExp)return"regex"===r.assign?""+e:{regex:""+e};if(e[n.symbols.literal])return{function:e.literal};if("function"==typeof e.describe)return"ref"===r.assign?e.describe().ref:e.describe();const s={};for(const t in e){const n=e[t];void 0!==n&&(s[t]=a.describe(n,{assign:t}))}return s},QW.build=function(e,t){return new a.Builder(e).parse(t)},a.Builder=class{constructor(e){this.joi=e}parse(t){a.validate(this.joi,t);let n=this.joi[t.type]()._bare();const r=n._definition;if(t.flags)for(const s in t.flags){const i=r.flags[s]&&r.flags[s].setter||s;e("function"==typeof n[i],"Invalid flag",s,"for type",t.type),n=n[i](this.build(t.flags[s]))}if(t.preferences&&(n=n.preferences(this.build(t.preferences))),t.allow&&(n=n.allow(...this.build(t.allow))),t.invalid&&(n=n.invalid(...this.build(t.invalid))),t.rules)for(const s of t.rules){e("function"==typeof n[s.name],"Invalid rule",s.name,"for type",t.type);const i=[];if(s.args){const n={};for(const e in s.args)n[e]=this.build(s.args[e],{assign:e});const o=Object.keys(n),a=r.rules[s.name].args;if(a){e(a.length>=o.length,"Invalid number of arguments for",t.type,s.name,"(expected up to",a.length,", found",o.length,")");for(const{name:e}of a)i.push(n[e])}else e(1===o.length,"Invalid number of arguments for",t.type,s.name,"(expected up to 1, found",o.length,")"),i.push(n[o[0]])}n=n[s.name](...i);const o={};for(const e in r.modifiers)void 0!==s[e]&&(o[e]=this.build(s[e]));Object.keys(o).length&&(n=n.rule(o))}const s={};for(const n in t){if(["allow","flags","invalid","whens","preferences","rules","type"].includes(n))continue;e(r.terms[n],"Term",n,"missing configuration");const i=r.terms[n].manifest;if("schema"!==i)if("values"!==i)if("single"!==i)if("object"!=typeof i)s[n]=this.build(t[n]);else{s[n]={};for(const e in t[n])s[n][e]=this.parse(t[n][e])}else s[n]=this.build(t[n]);else s[n]=t[n].map((e=>this.build(e)));else s[n]=t[n].map((e=>this.parse(e)))}return t.whens&&(s.whens=t.whens.map((e=>this.build(e)))),n=r.manifest.build(n,s),n.$_temp.ruleset=!1,n}build(r,o={}){if(null===r)return null;if(Array.isArray(r))return r.map((e=>this.build(e)));if(r instanceof Error)return r;if("options"===o.assign)return t(r);if("regex"===o.assign)return a.regex(r);if("ref"===o.assign)return s.build(r);if("object"!=typeof r)return r;if(1===Object.keys(r).length){if(r.buffer)return e(Buffer,"Buffers are not supported"),Buffer&&Buffer.from(r.buffer,"binary");if(r.function)return{[n.symbols.literal]:!0,literal:r.function};if(r.override)return n.symbols.override;if(r.ref)return s.build(r.ref);if(r.regex)return a.regex(r.regex);if(r.special)return e(["deep"].includes(r.special),"Unknown special value",r.special),n.symbols.deepDefault;if(r.value)return t(r.value)}if(r.type)return this.parse(r);if(r.template)return i.build(r);const c={};for(const e in r)c[e]=this.build(r[e],{assign:e});return c}},a.regex=function(e){const t=e.lastIndexOf("/"),n=e.slice(1,t),r=e.slice(t+1);return RegExp(n,r)},a.validate=function(e,t){o=o||EW(),e.assert(t,o.description)},QW}var JW={};const XW=cW,ZW={mismatched:null};var eJ=function(e,t,n){return n=Object.assign({prototype:!0},n),!!ZW.isDeepEqual(e,t,n,[])};ZW.isDeepEqual=function(e,t,n,r){if(e===t)return 0!==e||1/e==1/t;const s=typeof e;if(s!==typeof t)return!1;if(null===e||null===t)return!1;if("function"===s){if(!n.deepFunction||""+e!=""+t)return!1}else if("object"!==s)return e!=e&&t!=t;const i=ZW.getSharedType(e,t,!!n.prototype);switch(i){case XW.buffer:return Buffer&&Buffer.prototype.equals.call(e,t);case XW.promise:return e===t;case XW.regex:return""+e==""+t;case ZW.mismatched:return!1}for(let n=r.length-1;n>=0;--n)if(r[n].isSame(e,t))return!0;r.push(new ZW.SeenEntry(e,t));try{return!!ZW.isDeepEqualObj(i,e,t,n,r)}finally{r.pop()}},ZW.getSharedType=function(e,t,n){if(n)return Object.getPrototypeOf(e)!==Object.getPrototypeOf(t)?ZW.mismatched:XW.getInternalProto(e);const r=XW.getInternalProto(e);return r!==XW.getInternalProto(t)?ZW.mismatched:r},ZW.valueOf=function(e){const t=e.valueOf;if(void 0===t)return e;try{return t.call(e)}catch(e){return e}},ZW.hasOwnEnumerableProperty=function(e,t){return{}.propertyIsEnumerable.call(e,t)},ZW.isSetSimpleEqual=function(e,t){for(const n of Set.prototype.values.call(e))if(!Set.prototype.has.call(t,n))return!1;return!0},ZW.isDeepEqualObj=function(e,t,n,r,s){const{isDeepEqual:i,valueOf:o,hasOwnEnumerableProperty:a}=ZW,{keys:c,getOwnPropertySymbols:l}=Object;if(e===XW.array){if(!r.part){if(t.length!==n.length)return!1;for(let e=0;t.length>e;++e)if(!i(t[e],n[e],r,s))return!1;return!0}for(const e of t)for(const t of n)if(i(e,t,r,s))return!0}else if(e===XW.set){if(t.size!==n.size)return!1;if(!ZW.isSetSimpleEqual(t,n)){const e=new Set(Set.prototype.values.call(n));for(const n of Set.prototype.values.call(t)){if(e.delete(n))continue;let t=!1;for(const o of e)if(i(n,o,r,s)){e.delete(o),t=!0;break}if(!t)return!1}}}else if(e===XW.map){if(t.size!==n.size)return!1;for(const[e,o]of Map.prototype.entries.call(t)){if(void 0===o&&!Map.prototype.has.call(n,e))return!1;if(!i(o,Map.prototype.get.call(n,e),r,s))return!1}}else if(e===XW.error&&(t.name!==n.name||t.message!==n.message))return!1;const u=o(t),p=o(n);if((t!==u||n!==p)&&!i(u,p,r,s))return!1;const d=c(t);if(!r.part&&d.length!==c(n).length&&!r.skip)return!1;let h=0;for(const e of d)if(r.skip&&r.skip.includes(e))void 0===n[e]&&++h;else{if(!a(n,e))return!1;if(!i(t[e],n[e],r,s))return!1}if(!r.part&&d.length-h!==c(n).length)return!1;if(!1!==r.symbols){const e=l(t),o=new Set(l(n));for(const c of e){if(!r.skip||!r.skip.includes(c))if(a(t,c)){if(!a(n,c))return!1;if(!i(t[c],n[c],r,s))return!1}else if(a(n,c))return!1;o.delete(c)}for(const e of o)if(a(n,e))return!1}return!0},ZW.SeenEntry=class{constructor(e,t){this.obj=e,this.ref=t}isSame(e,t){return this.obj===e&&this.ref===t}};var tJ,nJ={};function rJ(){if(tJ)return JW;tJ=1;const e=eJ,t=nJ,n=RW(),r={codes:{error:1,pass:2,full:3},labels:{0:"never used",1:"always error",2:"always pass"}};return JW.setup=function(e){const t=function(){return e._tracer=e._tracer||new r.Tracer,e._tracer};e.trace=t,e[Symbol.for("@hapi/lab/coverage/initialize")]=t,e.untrace=()=>{e._tracer=null}},JW.location=function(e){return e.$_setFlag("_tracerLocation",t.location(2))},r.Tracer=class{constructor(){this.name="Joi",this._schemas=new Map}_register(e){const n=this._schemas.get(e);if(n)return n.store;const s=new r.Store(e),{filename:i,line:o}=e._flags._tracerLocation||t.location(5);return this._schemas.set(e,{filename:i,line:o,store:s}),s}_combine(e,t){for(const{store:n}of this._schemas.values())n._combine(e,t)}report(e){const t=[];for(const{filename:n,line:s,store:i}of this._schemas.values()){if(e&&e!==n)continue;const o=[],a=[];for(const[e,t]of i._sources.entries()){if(r.sub(t.paths,a))continue;if(!t.entry){o.push({status:"never reached",paths:[...t.paths]}),a.push(...t.paths);continue}for(const n of["valid","invalid"]){const r=e[`_${n}s`];if(!r)continue;const s=new Set(r._values),i=new Set(r._refs);for(const{value:e,ref:r}of t[n])s.delete(e),i.delete(r);(s.size||i.size)&&o.push({status:[...s,...[...i].map((e=>e.display))],rule:n+"s"})}const n=e._rules.map((e=>e.name));for(const t of["default","failover"])void 0!==e._flags[t]&&n.push(t);for(const e of n){const n=r.labels[t.rule[e]||0];if(n){const r={rule:e,status:n};t.paths.size&&(r.paths=[...t.paths]),o.push(r)}}}o.length&&t.push({filename:n,line:s,missing:o,severity:"error",message:"Schema missing tests for "+o.map(r.message).join(", ")})}return t.length?t:null}},r.Store=class{constructor(e){this.active=!0,this._sources=new Map,this._combos=new Map,this._scan(e)}debug(e,t,n,r){e.mainstay.debug&&e.mainstay.debug.push({type:t,name:n,result:r,path:e.path})}entry(e,t){r.debug(t,{type:"entry"}),this._record(e,(e=>{e.entry=!0}))}filter(e,t,n,s){r.debug(t,{type:n,...s}),this._record(e,(e=>{e[n].add(s)}))}log(e,t,n,s,i){r.debug(t,{type:n,name:s,result:"full"===i?"pass":i}),this._record(e,(e=>{e[n][s]=e[n][s]||0,e[n][s]|=r.codes[i]}))}resolve(e,t,n){e.mainstay.debug&&e.mainstay.debug.push({type:"resolve",ref:t.display,to:n,path:e.path})}value(t,n,r,s,i){if(!t.mainstay.debug||e(r,s))return;const o={type:"value",by:n,from:r,to:s,path:t.path};i&&(o.name=i),t.mainstay.debug.push(o)}_record(e,t){const n=this._sources.get(e);if(n)return void t(n);const r=this._combos.get(e);for(const e of r)this._record(e,t)}_scan(e,t){const n=t||[];let s=this._sources.get(e);s||(s={paths:new Set,entry:!1,rule:{},valid:new Set,invalid:new Set},this._sources.set(e,s)),n.length&&s.paths.add(n),e.$_modify({each:(e,t)=>{const s=r.id(e,t);this._scan(e,n.concat(s))},ref:!1})}_combine(e,t){this._combos.set(e,t)}},r.message=function(e){return`${e.paths?n.path(e.paths[0])+(e.rule?":":""):""}${e.rule||""} (${e.status})`},r.id=function(e,{source:t,name:n,path:r,key:s}){return e._flags.id?e._flags.id:s||(n="@"+n,"terms"===t?[n,r[Math.min(r.length-1,1)]]:n)},r.sub=function(t,n){for(const r of t)for(const t of n)if(e(r.slice(0,t.length),t))return!0;return!1},r.debug=function(e,t){e.mainstay.debug&&(t.path=e.debug?[...e.path,e.debug]:e.path,e.mainstay.debug.push(t))},JW}nJ.location=function(e=0){const t=Error.prepareStackTrace;Error.prepareStackTrace=(e,t)=>t;const n={};Error.captureStackTrace(n,this);const r=n.stack[e+1];return Error.prepareStackTrace=t,{filename:r.getFileName(),line:r.getLineNumber()}};const sJ=rW,iJ=fW,oJ=lW,aJ={};var cJ,lJ,uJ,pJ,dJ,hJ,fJ,mJ,gJ,yJ,vJ,bJ,EJ,_J,AJ,SJ,TJ,wJ,xJ=aJ.merge=function(e,t,n){if(sJ(e&&"object"==typeof e,"Invalid target value: must be an object"),sJ(null==t||"object"==typeof t,"Invalid source value: must be null, undefined, or an object"),!t)return e;if(n=Object.assign({nullOverride:!0,mergeArrays:!0},n),Array.isArray(t)){sJ(Array.isArray(e),"Cannot merge array onto an object"),n.mergeArrays||(e.length=0);for(let r=0;t.length>r;++r)e.push(iJ(t[r],{symbols:n.symbols}));return e}const r=oJ.keys(t,n);for(let s=0;r.length>s;++s){const i=r[s];if("__proto__"===i||!{}.propertyIsEnumerable.call(t,i))continue;const o=t[i];if(o&&"object"==typeof o){if(e[i]===o)continue;!e[i]||"object"!=typeof e[i]||Array.isArray(e[i])!==Array.isArray(o)||o instanceof Date||Buffer&&Buffer.isBuffer(o)||o instanceof RegExp?e[i]=iJ(o,{symbols:n.symbols}):aJ.merge(e[i],o,n)}else(null!=o||n.nullOverride)&&(e[i]=o)}return e},kJ={},CJ={},IJ=function(){};function RJ(){if(hJ)return dJ;hJ=1;const e=rW,t=eJ,n=$W(),r={};return dJ=r.Values=class{constructor(e,t){this._values=new Set(e),this._refs=new Set(t),this._lowercase=r.lowercases(e),this._override=!1}get length(){return this._values.size+this._refs.size}add(e,t){n.isResolvable(e)?this._refs.has(e)||(this._refs.add(e),t&&t.register(e)):this.has(e,null,null,!1)||(this._values.add(e),"string"==typeof e&&this._lowercase.set(e.toLowerCase(),e))}static merge(e,t,n){if(e=e||new r.Values,t){if(t._override)return t.clone();for(const n of[...t._values,...t._refs])e.add(n)}if(n)for(const t of[...n._values,...n._refs])e.remove(t);return e.length?e:null}remove(e){n.isResolvable(e)?this._refs.delete(e):(this._values.delete(e),"string"==typeof e&&this._lowercase.delete(e.toLowerCase()))}has(e,t,n,r){return!!this.get(e,t,n,r)}get(e,n,r,s){if(!this.length)return!1;if(this._values.has(e))return{value:e};if("string"==typeof e&&e&&s){const t=this._lowercase.get(e.toLowerCase());if(t)return{value:t}}if(!this._refs.size&&"object"!=typeof e)return!1;if("object"==typeof e)for(const n of this._values)if(t(n,e))return{value:n};if(n)for(const i of this._refs){const o=i.resolve(e,n,r,null,{in:!0});if(void 0===o)continue;const a=i.in&&"object"==typeof o?Array.isArray(o)?o:Object.keys(o):[o];for(const n of a)if(typeof n==typeof e)if(s&&e&&"string"==typeof e){if(n.toLowerCase()===e.toLowerCase())return{value:n,ref:i}}else if(t(n,e))return{value:n,ref:i}}return!1}override(){this._override=!0}values(e){if(e&&e.display){const e=[];for(const t of[...this._values,...this._refs])void 0!==t&&e.push(t);return e}return[...this._values,...this._refs]}clone(){const e=new r.Values(this._values,this._refs);return e._override=this._override,e}concat(t){e(!t._override,"Cannot concat override set of values");const n=new r.Values([...this._values,...t._values],[...this._refs,...t._refs]);return n._override=this._override,n}describe(){const e=[];this._override&&e.push({override:!0});for(const t of this._values.values())e.push(t&&"object"==typeof t?{value:t}:t);for(const t of this._refs.values())e.push(t.describe());return e}},r.Values.prototype[n.symbols.values]=!0,r.Values.prototype.slice=r.Values.prototype.clone,r.lowercases=function(e){const t=new Map;if(e)for(const n of e)"string"==typeof n&&t.set(n.toLowerCase(),n);return t},dJ}function OJ(){if(yJ)return gJ;yJ=1;const e=rW,t=function(){if(mJ)return fJ;mJ=1;const e=rW,t=fW,n=eJ,r=xJ,s=UW(),i=$W(),o=qW(),a=RW(),c=YW(),l=WW(),u=FW(),p=(cJ||(cJ=1,function(e){const t=rW,n=$W(),r=BW(),s={};e.Ids=s.Ids=class{constructor(){this._byId=new Map,this._byKey=new Map,this._schemaChain=!1}clone(){const e=new s.Ids;return e._byId=new Map(this._byId),e._byKey=new Map(this._byKey),e._schemaChain=this._schemaChain,e}concat(e){e._schemaChain&&(this._schemaChain=!0);for(const[n,r]of e._byId.entries())t(!this._byKey.has(n),"Schema id conflicts with existing key:",n),this._byId.set(n,r);for(const[n,r]of e._byKey.entries())t(!this._byId.has(n),"Schema key conflicts with existing id:",n),this._byKey.set(n,r)}fork(e,r,i){const o=this._collect(e);o.push({schema:i});const a=o.shift();let c={id:a.id,schema:r(a.schema)};t(n.isSchema(c.schema),"adjuster function failed to return a joi schema type");for(const e of o)c={id:e.id,schema:s.fork(e.schema,c.id,c.schema)};return c.schema}labels(e,t=[]){const n=e[0],r=this._get(n);if(!r)return[...t,...e].join(".");const s=e.slice(1);return t=[...t,r.schema._flags.label||n],s.length?r.schema._ids.labels(s,t):t.join(".")}reach(e,n=[]){const r=e[0],s=this._get(r);t(s,"Schema does not contain path",[...n,...e].join("."));const i=e.slice(1);return i.length?s.schema._ids.reach(i,[...n,r]):s.schema}register(e,{key:r}={}){if(!e||!n.isSchema(e))return;(e.$_property("schemaChain")||e._ids._schemaChain)&&(this._schemaChain=!0);const s=e._flags.id;if(s){const n=this._byId.get(s);t(!n||n.schema===e,"Cannot add different schemas with the same id:",s),t(!this._byKey.has(s),"Schema id conflicts with existing key:",s),this._byId.set(s,{schema:e,id:s})}r&&(t(!this._byKey.has(r),"Schema already contains key:",r),t(!this._byId.has(r),"Schema key conflicts with existing id:",r),this._byKey.set(r,{schema:e,id:r}))}reset(){this._byId=new Map,this._byKey=new Map,this._schemaChain=!1}_collect(e,n=[],r=[]){const s=e[0],i=this._get(s);t(i,"Schema does not contain path",[...n,...e].join(".")),r=[i,...r];const o=e.slice(1);return o.length?i.schema._ids._collect(o,[...n,s],r):r}_get(e){return this._byId.get(e)||this._byKey.get(e)}},s.fork=function(t,n,r){const s=e.schema(t,{each:(e,{key:t})=>{if(n===(e._flags.id||t))return r},ref:!1});return s?s.$_mutateRebuild():t},e.schema=function(e,t){let n;for(const r in e._flags){if("_"===r[0])continue;const i=s.scan(e._flags[r],{source:"flags",name:r},t);void 0!==i&&(n=n||e.clone(),n._flags[r]=i)}for(let r=0;e._rules.length>r;++r){const i=e._rules[r],o=s.scan(i.args,{source:"rules",name:i.name},t);if(void 0!==o){n=n||e.clone();const t=Object.assign({},i);t.args=o,n._rules[r]=t,n._singleRules.get(i.name)===i&&n._singleRules.set(i.name,t)}}for(const r in e.$_terms){if("_"===r[0])continue;const i=s.scan(e.$_terms[r],{source:"terms",name:r},t);void 0!==i&&(n=n||e.clone(),n.$_terms[r]=i)}return n},s.scan=function(e,t,i,o,a){const c=o||[];if(null===e||"object"!=typeof e)return;let l;if(Array.isArray(e)){for(let n=0;e.length>n;++n){const r="terms"===t.source&&"keys"===t.name&&e[n].key,o=s.scan(e[n],t,i,[n,...c],r);void 0!==o&&(l=l||e.slice(),l[n]=o)}return l}if(!1!==i.schema&&n.isSchema(e)||!1!==i.ref&&r.isRef(e)){const n=i.each(e,{...t,path:c,key:a});if(n===e)return;return n}for(const n in e){if("_"===n[0])continue;const r=s.scan(e[n],t,i,[n,...c],a);void 0!==r&&(l=l||Object.assign({},e),l[n]=r)}return l}}(kJ)),kJ),d=BW(),h=rJ(),f=(pJ||(pJ=1,function(e){const t=rW,n=fW,r=IJ,s=oW,i=$W(),o=RW(),a=function(){if(uJ)return lJ;uJ=1;const e=fW,t=oW,n=$W(),r={value:Symbol("value")};return lJ=r.State=class{constructor(e,t,n){this.path=e,this.ancestors=t,this.mainstay=n.mainstay,this.schemas=n.schemas,this.debug=null}localize(e,t=null,n=null){const s=new r.State(e,t,this);return n&&s.schemas&&(s.schemas=[r.schemas(n),...s.schemas]),s}nest(e,t){const n=new r.State(this.path,this.ancestors,this);return n.schemas=n.schemas&&[r.schemas(e),...n.schemas],n.debug=t,n}shadow(e,t){this.mainstay.shadow=this.mainstay.shadow||new r.Shadow,this.mainstay.shadow.set(this.path,e,t)}snapshot(){this.mainstay.shadow&&(this._snapshot=e(this.mainstay.shadow.node(this.path))),this.mainstay.snapshot()}restore(){this.mainstay.shadow&&(this.mainstay.shadow.override(this.path,this._snapshot),this._snapshot=void 0),this.mainstay.restore()}commit(){this.mainstay.shadow&&(this.mainstay.shadow.override(this.path,this._snapshot),this._snapshot=void 0),this.mainstay.commit()}},r.schemas=function(e){return n.isSchema(e)?{schema:e}:e},r.Shadow=class{constructor(){this._values=null}set(e,t,n){if(!e.length)return;if("strip"===n&&"number"==typeof e[e.length-1])return;this._values=this._values||new Map;let s=this._values;for(let t=0;e.length>t;++t){const n=e[t];let r=s.get(n);r||(r=new Map,s.set(n,r)),s=r}s[r.value]=t}get(e){const t=this.node(e);if(t)return t[r.value]}node(e){if(this._values)return t(this._values,e,{iterables:!0})}override(e,n){if(!this._values)return;const r=e.slice(0,-1),s=e[e.length-1],i=t(this._values,r,{iterables:!0});n?i.set(s,n):i&&i.delete(s)}},lJ}(),c={result:Symbol("result")};e.entry=function(e,n,r){let s=i.defaults;r&&(t(void 0===r.warnings,"Cannot override warnings preference in synchronous validation"),t(void 0===r.artifacts,"Cannot override artifacts preference in synchronous validation"),s=i.preferences(i.defaults,r));const a=c.entry(e,n,s);t(!a.mainstay.externals.length,"Schema with external rules must use validateAsync()");const l={value:a.value};return a.error&&(l.error=a.error),a.mainstay.warnings.length&&(l.warning=o.details(a.mainstay.warnings)),a.mainstay.debug&&(l.debug=a.mainstay.debug),a.mainstay.artifacts&&(l.artifacts=a.mainstay.artifacts),l},e.entryAsync=async function(e,t,n){let r=i.defaults;n&&(r=i.preferences(i.defaults,n));const a=c.entry(e,t,r),l=a.mainstay;if(a.error)throw l.debug&&(a.error.debug=l.debug),a.error;if(l.externals.length){let t=a.value;const u=[];for(const a of l.externals){const p=a.state.path,d="link"===a.schema.type?l.links.get(a.schema):null;let h,f,m=t;const g=p.length?[t]:[],y=p.length?s(e,p):e;if(p.length){h=p[p.length-1];let e=t;for(const t of p.slice(0,-1))e=e[t],g.unshift(e);f=g[0],m=f[h]}try{const e=(e,t)=>(d||a.schema).$_createError(e,m,t,a.state,r),s=await a.method(m,{schema:a.schema,linked:d,state:a.state,prefs:n,original:y,error:e,errorsArray:c.errorsArray,warn:(e,t)=>l.warnings.push((d||a.schema).$_createError(e,m,t,a.state,r)),message:(e,t)=>(d||a.schema).$_createError("external",m,t,a.state,r,{messages:e})});if(void 0===s||s===m)continue;if(s instanceof o.Report){if(l.tracer.log(a.schema,a.state,"rule","external","error"),u.push(s),r.abortEarly)break;continue}if(Array.isArray(s)&&s[i.symbols.errors]){if(l.tracer.log(a.schema,a.state,"rule","external","error"),u.push(...s),r.abortEarly)break;continue}f?(l.tracer.value(a.state,"rule",m,s,"external"),f[h]=s):(l.tracer.value(a.state,"rule",t,s,"external"),t=s)}catch(e){throw r.errors.label&&(e.message+=` (${a.label})`),e}}if(a.value=t,u.length)throw a.error=o.process(u,e,r),l.debug&&(a.error.debug=l.debug),a.error}if(!r.warnings&&!r.debug&&!r.artifacts)return a.value;const u={value:a.value};return l.warnings.length&&(u.warning=o.details(l.warnings)),l.debug&&(u.debug=l.debug),l.artifacts&&(u.artifacts=l.artifacts),u},c.Mainstay=class{constructor(e,t,n){this.externals=[],this.warnings=[],this.tracer=e,this.debug=t,this.links=n,this.shadow=null,this.artifacts=null,this._snapshots=[]}snapshot(){this._snapshots.push({externals:this.externals.slice(),warnings:this.warnings.slice()})}restore(){const e=this._snapshots.pop();this.externals=e.externals,this.warnings=e.warnings}commit(){this._snapshots.pop()}},c.entry=function(t,n,r){const{tracer:s,cleanup:i}=c.tracer(n,r),l=r.debug?[]:null,u=n._ids._schemaChain?new Map:null,p=new c.Mainstay(s,l,u),d=new a([],[],{mainstay:p,schemas:n._ids._schemaChain?[{schema:n}]:null}),h=e.validate(t,n,d,r);i&&n.$_root.untrace();const f=o.process(h.errors,t,r);return{value:h.value,error:f,mainstay:p}},c.tracer=function(e,n){return e.$_root._tracer?{tracer:e.$_root._tracer._register(e)}:n.debug?(t(e.$_root.trace,"Debug mode not supported"),{tracer:e.$_root.trace()._register(e),cleanup:!0}):{tracer:c.ignore}},e.validate=function(e,t,n,r,s={}){if(t.$_terms.whens&&(t=t._generate(e,n,r).schema),t._preferences&&(r=c.prefs(t,r)),t._cache&&r.cache){const r=t._cache.get(e);if(n.mainstay.tracer.debug(n,"validate","cached",!!r),r)return r}const o=(s,i,o)=>t.$_createError(s,e,i,o||n,r),a={original:e,prefs:r,schema:t,state:n,error:o,errorsArray:c.errorsArray,warn:(e,t,r)=>n.mainstay.warnings.push(o(e,t,r)),message:(s,i)=>t.$_createError("custom",e,i,n,r,{messages:s})};n.mainstay.tracer.entry(t,n);const l=t._definition;if(l.prepare&&void 0!==e&&r.convert){const t=l.prepare(e,a);if(t){if(n.mainstay.tracer.value(n,"prepare",e,t.value),t.errors)return c.finalize(t.value,[].concat(t.errors),a);e=t.value}}if(l.coerce&&void 0!==e&&r.convert&&(!l.coerce.from||l.coerce.from.includes(typeof e))){const t=l.coerce.method(e,a);if(t){if(n.mainstay.tracer.value(n,"coerced",e,t.value),t.errors)return c.finalize(t.value,[].concat(t.errors),a);e=t.value}}const u=t._flags.empty;u&&u.$_match(c.trim(e,t),n.nest(u),i.defaults)&&(n.mainstay.tracer.value(n,"empty",e,void 0),e=void 0);const p=s.presence||t._flags.presence||(t._flags._endedSwitch?null:r.presence);if(void 0===e){if("forbidden"===p)return c.finalize(e,null,a);if("required"===p)return c.finalize(e,[t.$_createError("any.required",e,null,n,r)],a);if("optional"===p){if(t._flags.default!==i.symbols.deepDefault)return c.finalize(e,null,a);n.mainstay.tracer.value(n,"default",e,{}),e={}}}else if("forbidden"===p)return c.finalize(e,[t.$_createError("any.unknown",e,null,n,r)],a);const d=[];if(t._valids){const s=t._valids.get(e,n,r,t._flags.insensitive);if(s)return r.convert&&(n.mainstay.tracer.value(n,"valids",e,s.value),e=s.value),n.mainstay.tracer.filter(t,n,"valid",s),c.finalize(e,null,a);if(t._flags.only){const s=t.$_createError("any.only",e,{valids:t._valids.values({display:!0})},n,r);if(r.abortEarly)return c.finalize(e,[s],a);d.push(s)}}if(t._invalids){const s=t._invalids.get(e,n,r,t._flags.insensitive);if(s){n.mainstay.tracer.filter(t,n,"invalid",s);const i=t.$_createError("any.invalid",e,{invalids:t._invalids.values({display:!0})},n,r);if(r.abortEarly)return c.finalize(e,[i],a);d.push(i)}}if(l.validate){const t=l.validate(e,a);if(t&&(n.mainstay.tracer.value(n,"base",e,t.value),e=t.value,t.errors)){if(!Array.isArray(t.errors))return d.push(t.errors),c.finalize(e,d,a);if(t.errors.length)return d.push(...t.errors),c.finalize(e,d,a)}}return t._rules.length?c.rules(e,d,a):c.finalize(e,d,a)},c.rules=function(e,t,n){const{schema:r,state:s,prefs:o}=n;for(const a of r._rules){const l=r._definition.rules[a.method];if(l.convert&&o.convert){s.mainstay.tracer.log(r,s,"rule",a.name,"full");continue}let u,p=a.args;if(a._resolve.length){p=Object.assign({},p);for(const t of a._resolve){const n=l.argsByName.get(t),a=p[t].resolve(e,s,o),c=n.normalize?n.normalize(a):a,d=i.validateArg(c,null,n);if(d){u=r.$_createError("any.ref",a,{arg:t,ref:p[t],reason:d},s,o);break}p[t]=c}}u=u||l.validate(e,n,p,a);const d=c.rule(u,a);if(d.errors){if(s.mainstay.tracer.log(r,s,"rule",a.name,"error"),a.warn){s.mainstay.warnings.push(...d.errors);continue}if(o.abortEarly)return c.finalize(e,d.errors,n);t.push(...d.errors)}else s.mainstay.tracer.log(r,s,"rule",a.name,"pass"),s.mainstay.tracer.value(s,"rule",e,d.value,a.name),e=d.value}return c.finalize(e,t,n)},c.rule=function(e,t){return e instanceof o.Report?(c.error(e,t),{errors:[e],value:null}):Array.isArray(e)&&e[i.symbols.errors]?(e.forEach((e=>c.error(e,t))),{errors:e,value:null}):{errors:null,value:e}},c.error=function(e,t){return t.message&&e._setTemplate(t.message),e},c.finalize=function(e,n,r){n=n||[];const{schema:s,state:i,prefs:a}=r;if(n.length){const t=c.default("failover",void 0,n,r);void 0!==t&&(i.mainstay.tracer.value(i,"failover",e,t),e=t,n=[])}if(n.length&&s._flags.error)if("function"==typeof s._flags.error){n=s._flags.error(n),Array.isArray(n)||(n=[n]);for(const e of n)t(e instanceof Error||e instanceof o.Report,"error() must return an Error object")}else n=[s._flags.error];if(void 0===e){const t=c.default("default",e,n,r);i.mainstay.tracer.value(i,"default",e,t),e=t}if(s._flags.cast&&void 0!==e){const t=s._definition.cast[s._flags.cast];if(t.from(e)){const n=t.to(e,r);i.mainstay.tracer.value(i,"cast",e,n,s._flags.cast),e=n}}if(s.$_terms.externals&&a.externals&&!1!==a._externals)for(const{method:e}of s.$_terms.externals)i.mainstay.externals.push({method:e,schema:s,state:i,label:o.label(s._flags,i,a)});const l={value:e,errors:n.length?n:null};return s._flags.result&&(l.value="strip"===s._flags.result?void 0:r.original,i.mainstay.tracer.value(i,s._flags.result,e,l.value),i.shadow(e,s._flags.result)),s._cache&&!1!==a.cache&&!s._refs.length&&s._cache.set(r.original,l),void 0===e||l.errors||void 0===s._flags.artifact||(i.mainstay.artifacts=i.mainstay.artifacts||new Map,i.mainstay.artifacts.has(s._flags.artifact)||i.mainstay.artifacts.set(s._flags.artifact,[]),i.mainstay.artifacts.get(s._flags.artifact).push(i.path)),l},c.prefs=function(e,t){const n=t===i.defaults;return n&&e._preferences[i.symbols.prefs]?e._preferences[i.symbols.prefs]:(t=i.preferences(t,e._preferences),n&&(e._preferences[i.symbols.prefs]=t),t)},c.default=function(e,t,r,s){const{schema:o,state:a,prefs:c}=s,l=o._flags[e];if(c.noDefaults||void 0===l)return t;if(a.mainstay.tracer.log(o,a,"rule",e,"full"),!l)return l;if("function"==typeof l){const t=l.length?[n(a.ancestors[0]),s]:[];try{return l(...t)}catch(t){return void r.push(o.$_createError("any."+e,null,{error:t},a,c))}}return"object"!=typeof l?l:l[i.symbols.literal]?l.literal:i.isResolvable(l)?l.resolve(t,a,c):n(l)},c.trim=function(e,t){if("string"!=typeof e)return e;const n=t.$_getRule("trim");return n&&n.args.enabled?e.trim():e},c.ignore={active:!1,debug:r,entry:r,filter:r,log:r,resolve:r,value:r},c.errorsArray=function(){const e=[];return e[i.symbols.errors]=!0,e}}(CJ)),CJ),m=RJ(),g={Base:class{constructor(e){this.type=e,this.$_root=null,this._definition={},this._reset()}_reset(){this._ids=new p.Ids,this._preferences=null,this._refs=new d.Manager,this._cache=null,this._valids=null,this._invalids=null,this._flags={},this._rules=[],this._singleRules=new Map,this.$_terms={},this.$_temp={ruleset:null,whens:{}}}describe(){return e("function"==typeof l.describe,"Manifest functionality disabled"),l.describe(this)}allow(...e){return i.verifyFlat(e,"allow"),this._values(e,"_valids")}alter(t){e(t&&"object"==typeof t&&!Array.isArray(t),"Invalid targets argument"),e(!this._inRuleset(),"Cannot set alterations inside a ruleset");const n=this.clone();n.$_terms.alterations=n.$_terms.alterations||[];for(const r in t){const s=t[r];e("function"==typeof s,"Alteration adjuster for",r,"must be a function"),n.$_terms.alterations.push({target:r,adjuster:s})}return n.$_temp.ruleset=!1,n}artifact(t){return e(void 0!==t,"Artifact cannot be undefined"),e(!this._cache,"Cannot set an artifact with a rule cache"),this.$_setFlag("artifact",t)}cast(t){return e(!1===t||"string"==typeof t,"Invalid to value"),e(!1===t||this._definition.cast[t],"Type",this.type,"does not support casting to",t),this.$_setFlag("cast",!1===t?void 0:t)}default(e,t){return this._default("default",e,t)}description(t){return e(t&&"string"==typeof t,"Description must be a non-empty string"),this.$_setFlag("description",t)}empty(e){const t=this.clone();return void 0!==e&&(e=t.$_compile(e,{override:!1})),t.$_setFlag("empty",e,{clone:!1})}error(t){return e(t,"Missing error"),e(t instanceof Error||"function"==typeof t,"Must provide a valid Error object or a function"),this.$_setFlag("error",t)}example(t,n={}){return e(void 0!==t,"Missing example"),i.assertOptions(n,["override"]),this._inner("examples",t,{single:!0,override:n.override})}external(t,n){return"object"==typeof t&&(e(!n,"Cannot combine options with description"),n=t.description,t=t.method),e("function"==typeof t,"Method must be a function"),e(void 0===n||n&&"string"==typeof n,"Description must be a non-empty string"),this._inner("externals",{method:t,description:n},{single:!0})}failover(e,t){return this._default("failover",e,t)}forbidden(){return this.presence("forbidden")}id(t){return t?(e("string"==typeof t,"id must be a non-empty string"),e(/^[^\.]+$/.test(t),"id cannot contain period character"),this.$_setFlag("id",t)):this.$_setFlag("id",void 0)}invalid(...e){return this._values(e,"_invalids")}label(t){return e(t&&"string"==typeof t,"Label name must be a non-empty string"),this.$_setFlag("label",t)}meta(t){return e(void 0!==t,"Meta cannot be undefined"),this._inner("metas",t,{single:!0})}note(...t){e(t.length,"Missing notes");for(const n of t)e(n&&"string"==typeof n,"Notes must be non-empty strings");return this._inner("notes",t)}only(t=!0){return e("boolean"==typeof t,"Invalid mode:",t),this.$_setFlag("only",t)}optional(){return this.presence("optional")}prefs(t){e(t,"Missing preferences"),e(void 0===t.context,"Cannot override context"),e(void 0===t.externals,"Cannot override externals"),e(void 0===t.warnings,"Cannot override warnings"),e(void 0===t.debug,"Cannot override debug"),i.checkPreferences(t);const n=this.clone();return n._preferences=i.preferences(n._preferences,t),n}presence(t){return e(["optional","required","forbidden"].includes(t),"Unknown presence mode",t),this.$_setFlag("presence",t)}raw(e=!0){return this.$_setFlag("result",e?"raw":void 0)}result(t){return e(["raw","strip"].includes(t),"Unknown result mode",t),this.$_setFlag("result",t)}required(){return this.presence("required")}strict(e){const t=this.clone();return t._preferences=i.preferences(t._preferences,{convert:void 0!==e&&!e}),t}strip(e=!0){return this.$_setFlag("result",e?"strip":void 0)}tag(...t){e(t.length,"Missing tags");for(const n of t)e(n&&"string"==typeof n,"Tags must be non-empty strings");return this._inner("tags",t)}unit(t){return e(t&&"string"==typeof t,"Unit name must be a non-empty string"),this.$_setFlag("unit",t)}valid(...e){i.verifyFlat(e,"valid");const t=this.allow(...e);return t.$_setFlag("only",!!t._valids,{clone:!1}),t}when(t,n){const r=this.clone();r.$_terms.whens||(r.$_terms.whens=[]);const s=o.when(r,t,n);if(!["any","link"].includes(r.type)){const t=s.is?[s]:s.switch;for(const n of t)e(!n.then||"any"===n.then.type||n.then.type===r.type,"Cannot combine",r.type,"with",n.then&&n.then.type),e(!n.otherwise||"any"===n.otherwise.type||n.otherwise.type===r.type,"Cannot combine",r.type,"with",n.otherwise&&n.otherwise.type)}return r.$_terms.whens.push(s),r.$_mutateRebuild()}cache(t){e(!this._inRuleset(),"Cannot set caching inside a ruleset"),e(!this._cache,"Cannot override schema cache"),e(void 0===this._flags.artifact,"Cannot cache a rule with an artifact");const n=this.clone();return n._cache=t||s.provider.provision(),n.$_temp.ruleset=!1,n}clone(){return this._assign(Object.create(Object.getPrototypeOf(this)))}concat(t){e(i.isSchema(t),"Invalid schema object"),e("any"===this.type||"any"===t.type||t.type===this.type,"Cannot merge type",this.type,"with another type:",t.type),e(!this._inRuleset(),"Cannot concatenate onto a schema with open ruleset"),e(!t._inRuleset(),"Cannot concatenate a schema with open ruleset");let n=this.clone();if("any"===this.type&&"any"!==t.type){const e=t.clone();for(const t of Object.keys(n))"type"!==t&&(e[t]=n[t]);n=e}n._ids.concat(t._ids),n._refs.register(t,d.toSibling),n._preferences=n._preferences?i.preferences(n._preferences,t._preferences):t._preferences,n._valids=m.merge(n._valids,t._valids,t._invalids),n._invalids=m.merge(n._invalids,t._invalids,t._valids);for(const e of t._singleRules.keys())n._singleRules.has(e)&&(n._rules=n._rules.filter((t=>t.keep||t.name!==e)),n._singleRules.delete(e));for(const e of t._rules)t._definition.rules[e.method].multi||n._singleRules.set(e.name,e),n._rules.push(e);if(n._flags.empty&&t._flags.empty){n._flags.empty=n._flags.empty.concat(t._flags.empty);const e=Object.assign({},t._flags);delete e.empty,r(n._flags,e)}else if(t._flags.empty){n._flags.empty=t._flags.empty;const e=Object.assign({},t._flags);delete e.empty,r(n._flags,e)}else r(n._flags,t._flags);for(const e in t.$_terms){const r=t.$_terms[e];r?n.$_terms[e]=n.$_terms[e]?n.$_terms[e].concat(r):r.slice():n.$_terms[e]||(n.$_terms[e]=r)}return this.$_root._tracer&&this.$_root._tracer._combine(n,[this,t]),n.$_mutateRebuild()}extend(t){return e(!t.base,"Cannot extend type with another base"),c.type(this,t)}extract(e){return e=Array.isArray(e)?e:e.split("."),this._ids.reach(e)}fork(t,n){e(!this._inRuleset(),"Cannot fork inside a ruleset");let r=this;for(let e of[].concat(t))e=Array.isArray(e)?e:e.split("."),r=r._ids.fork(e,n,r);return r.$_temp.ruleset=!1,r}rule(n){const r=this._definition;i.assertOptions(n,Object.keys(r.modifiers)),e(!1!==this.$_temp.ruleset,"Cannot apply rules to empty ruleset or the last rule added does not support rule properties");const s=null===this.$_temp.ruleset?this._rules.length-1:this.$_temp.ruleset;e(s>=0&&this._rules.length>s,"Cannot apply rules to empty ruleset");const o=this.clone();for(let i=s;o._rules.length>i;++i){const s=o._rules[i],a=t(s);for(const t in n)r.modifiers[t](a,n[t]),e(a.name===s.name,"Cannot change rule name");o._rules[i]=a,o._singleRules.get(a.name)===s&&o._singleRules.set(a.name,a)}return o.$_temp.ruleset=!1,o.$_mutateRebuild()}get ruleset(){e(!this._inRuleset(),"Cannot start a new ruleset without closing the previous one");const t=this.clone();return t.$_temp.ruleset=t._rules.length,t}get $(){return this.ruleset}tailor(t){t=[].concat(t),e(!this._inRuleset(),"Cannot tailor inside a ruleset");let n=this;if(this.$_terms.alterations)for(const{target:r,adjuster:s}of this.$_terms.alterations)t.includes(r)&&(n=s(n),e(i.isSchema(n),"Alteration adjuster for",r,"failed to return a schema object"));return n=n.$_modify({each:e=>e.tailor(t),ref:!1}),n.$_temp.ruleset=!1,n.$_mutateRebuild()}tracer(){return h.location?h.location(this):this}validate(e,t){return f.entry(e,this,t)}validateAsync(e,t){return f.entryAsync(e,this,t)}$_addRule(t){"string"==typeof t&&(t={name:t}),e(t&&"object"==typeof t,"Invalid options"),e(t.name&&"string"==typeof t.name,"Invalid rule name");for(const n in t)e("_"!==n[0],"Cannot set private rule properties");const n=Object.assign({},t);n._resolve=[],n.method=n.method||n.name;const r=this._definition.rules[n.method],s=n.args;e(r,"Unknown rule",n.method);const o=this.clone();if(s){e(1===Object.keys(s).length||Object.keys(s).length===this._definition.rules[n.name].args.length,"Invalid rule definition for",this.type,n.name);for(const t in s){let a=s[t];if(r.argsByName){const c=r.argsByName.get(t);if(c.ref&&i.isResolvable(a))n._resolve.push(t),o.$_mutateRegister(a);else if(c.normalize&&(a=c.normalize(a),s[t]=a),c.assert){const n=i.validateArg(a,t,c);e(!n,n,"or reference")}}void 0!==a?s[t]=a:delete s[t]}}return r.multi||(o._ruleRemove(n.name,{clone:!1}),o._singleRules.set(n.name,n)),!1===o.$_temp.ruleset&&(o.$_temp.ruleset=null),r.priority?o._rules.unshift(n):o._rules.push(n),o}$_compile(e,t){return o.schema(this.$_root,e,t)}$_createError(e,t,n,r,s,i={}){const o=!1!==i.flags?this._flags:{},c=i.messages?u.merge(this._definition.messages,i.messages):this._definition.messages;return new a.Report(e,t,n,o,c,r,s)}$_getFlag(e){return this._flags[e]}$_getRule(e){return this._singleRules.get(e)}$_mapLabels(e){return e=Array.isArray(e)?e:e.split("."),this._ids.labels(e)}$_match(e,t,n,r){(n=Object.assign({},n)).abortEarly=!0,n._externals=!1,t.snapshot();const s=!f.validate(e,this,t,n,r).errors;return t.restore(),s}$_modify(e){return i.assertOptions(e,["each","once","ref","schema"]),p.schema(this,e)||this}$_mutateRebuild(){return e(!this._inRuleset(),"Cannot add this rule inside a ruleset"),this._refs.reset(),this._ids.reset(),this.$_modify({each:(e,{source:t,name:n,key:r})=>{const s=this._definition[t][n]&&this._definition[t][n].register;!1!==s&&this.$_mutateRegister(e,{family:s,key:r})}}),this._definition.rebuild&&this._definition.rebuild(this),this.$_temp.ruleset=!1,this}$_mutateRegister(e,{family:t,key:n}={}){this._refs.register(e,t),this._ids.register(e,{key:n})}$_property(e){return this._definition.properties[e]}$_reach(e){return this._ids.reach(e)}$_rootReferences(){return this._refs.roots()}$_setFlag(t,r,s={}){if(e("_"===t[0]||!this._inRuleset(),"Cannot set flag inside a ruleset"),n(r,(this._definition.flags[t]||{}).default)&&(r=void 0),n(r,this._flags[t]))return this;const i=!1!==s.clone?this.clone():this;return void 0!==r?(i._flags[t]=r,i.$_mutateRegister(r)):delete i._flags[t],"_"!==t[0]&&(i.$_temp.ruleset=!1),i}$_parent(e,...t){return this[e][i.symbols.parent].call(this,...t)}$_validate(e,t,n){return f.validate(e,this,t,n)}_assign(e){e.type=this.type,e.$_root=this.$_root,e.$_temp=Object.assign({},this.$_temp),e.$_temp.whens={},e._ids=this._ids.clone(),e._preferences=this._preferences,e._valids=this._valids&&this._valids.clone(),e._invalids=this._invalids&&this._invalids.clone(),e._rules=this._rules.slice(),e._singleRules=t(this._singleRules,{shallow:!0}),e._refs=this._refs.clone(),e._flags=Object.assign({},this._flags),e._cache=null,e.$_terms={};for(const t in this.$_terms)e.$_terms[t]=this.$_terms[t]?this.$_terms[t].slice():null;e.$_super={};for(const t in this.$_super)e.$_super[t]=this._super[t].bind(e);return e}_bare(){const e=this.clone();e._reset();const t=e._definition.terms;for(const n in t)e.$_terms[n]=t[n].init;return e.$_mutateRebuild()}_default(t,n,r={}){return i.assertOptions(r,"literal"),e(void 0!==n,"Missing",t,"value"),e("function"==typeof n||!r.literal,"Only function value supports literal option"),"function"==typeof n&&r.literal&&(n={[i.symbols.literal]:!0,literal:n}),this.$_setFlag(t,n)}_generate(e,t,n){if(!this.$_terms.whens)return{schema:this};const r=[],s=[];for(let i=0;this.$_terms.whens.length>i;++i){const o=this.$_terms.whens[i];if(o.concat){r.push(o.concat),s.push(i+".concat");continue}const a=o.ref?o.ref.resolve(e,t,n):e,c=o.is?[o]:o.switch,l=s.length;for(let l=0;c.length>l;++l){const{is:u,then:p,otherwise:d}=c[l],h=`${i}${o.switch?"."+l:""}`;if(u.$_match(a,t.nest(u,h+".is"),n)){if(p){const i=t.localize([...t.path,h+".then"],t.ancestors,t.schemas),{schema:o,id:a}=p._generate(e,i,n);r.push(o),s.push(`${h}.then${a?`(${a})`:""}`);break}}else if(d){const i=t.localize([...t.path,h+".otherwise"],t.ancestors,t.schemas),{schema:o,id:a}=d._generate(e,i,n);r.push(o),s.push(`${h}.otherwise${a?`(${a})`:""}`);break}}if(o.break&&s.length>l)break}const i=s.join(", ");if(t.mainstay.tracer.debug(t,"rule","when",i),!i)return{schema:this};if(!t.mainstay.tracer.active&&this.$_temp.whens[i])return{schema:this.$_temp.whens[i],id:i};let o=this;this._definition.generate&&(o=this._definition.generate(this,e,t,n));for(const e of r)o=o.concat(e);return this.$_root._tracer&&this.$_root._tracer._combine(o,[this,...r]),this.$_temp.whens[i]=o,{schema:o,id:i}}_inner(t,n,r={}){e(!this._inRuleset(),`Cannot set ${t} inside a ruleset`);const s=this.clone();return s.$_terms[t]&&!r.override||(s.$_terms[t]=[]),r.single?s.$_terms[t].push(n):s.$_terms[t].push(...n),s.$_temp.ruleset=!1,s}_inRuleset(){return null!==this.$_temp.ruleset&&!1!==this.$_temp.ruleset}_ruleRemove(e,t={}){if(!this._singleRules.has(e))return this;const n=!1!==t.clone?this.clone():this;n._singleRules.delete(e);const r=[];for(let t=0;n._rules.length>t;++t){const s=n._rules[t];s.name!==e||s.keep?r.push(s):n._inRuleset()&&n.$_temp.ruleset>t&&--n.$_temp.ruleset}return n._rules=r,n}_values(t,n){i.verifyFlat(t,n.slice(1,-1));const r=this.clone(),s=t[0]===i.symbols.override;if(s&&(t=t.slice(1)),!r[n]&&t.length?r[n]=new m:s&&(r[n]=t.length?new m:null,r.$_mutateRebuild()),!r[n])return r;s&&r[n].override();for(const s of t){e(void 0!==s,"Cannot call allow/valid/invalid with undefined"),e(s!==i.symbols.override,"Override must be the first value");const t="_invalids"===n?"_valids":"_invalids";r[t]&&(r[t].remove(s),r[t].length||(e("_valids"===n||!r._flags.only,"Setting invalid value",s,"leaves schema rejecting all values due to previous valid rule"),r[t]=null)),r[n].add(s,r._refs)}return r}}};return g.Base.prototype[i.symbols.any]={version:i.version,compile:o.compile,root:"$_root"},g.Base.prototype.isImmutable=!0,g.Base.prototype.deny=g.Base.prototype.invalid,g.Base.prototype.disallow=g.Base.prototype.invalid,g.Base.prototype.equal=g.Base.prototype.valid,g.Base.prototype.exist=g.Base.prototype.required,g.Base.prototype.not=g.Base.prototype.invalid,g.Base.prototype.options=g.Base.prototype.prefs,g.Base.prototype.preferences=g.Base.prototype.prefs,fJ=new g.Base}(),n=$W(),r=FW();return gJ=t.extend({type:"any",flags:{only:{default:!1}},terms:{alterations:{init:null},examples:{init:null},externals:{init:null},metas:{init:[]},notes:{init:[]},shared:{init:null},tags:{init:[]},whens:{init:null}},rules:{custom:{method(t,n){return e("function"==typeof t,"Method must be a function"),e(void 0===n||n&&"string"==typeof n,"Description must be a non-empty string"),this.$_addRule({name:"custom",args:{method:t,description:n}})},validate(e,t,{method:n}){try{return n(e,t)}catch(e){return t.error("any.custom",{error:e})}},args:["method","description"],multi:!0},messages:{method(e){return this.prefs({messages:e})}},shared:{method(t){e(n.isSchema(t)&&t._flags.id,"Schema must be a schema with an id");const r=this.clone();return r.$_terms.shared=r.$_terms.shared||[],r.$_terms.shared.push(t),r.$_mutateRegister(t),r}},warning:{method(t,n){return e(t&&"string"==typeof t,"Invalid warning code"),this.$_addRule({name:"warning",args:{code:t,local:n},warn:!0})},validate:(e,t,{code:n,local:r})=>t.error(n,r),args:["code","local"],multi:!0}},modifiers:{keep(e,t=!0){e.keep=t},message(e,t){e.message=r.compile(t)},warn(e,t=!0){e.warn=t}},manifest:{build(e,t){for(const n in t){const r=t[n];if(["examples","externals","metas","notes","tags"].includes(n))for(const t of r)e=e[n.slice(0,-1)](t);else if("alterations"!==n)if("whens"!==n){if("shared"===n)for(const t of r)e=e.shared(t)}else for(const t of r){const{ref:n,is:r,not:s,then:i,otherwise:o,concat:a}=t;e=a?e.concat(a):n?e.when(n,{is:r,not:s,then:i,otherwise:o,switch:t.switch,break:t.break}):e.when(r,{then:i,otherwise:o,break:t.break})}else{const t={};for(const{target:e,adjuster:n}of r)t[e]=n;e=e.alter(t)}}return e}},messages:{"any.custom":"{{#label}} failed custom validation because {{#error.message}}","any.default":"{{#label}} threw an error when running default method","any.failover":"{{#label}} threw an error when running failover method","any.invalid":"{{#label}} contains an invalid value","any.only":'{{#label}} must be {if(#valids.length == 1, "", "one of ")}{{#valids}}',"any.ref":"{{#label}} {{#arg}} references {{:#ref}} which {{#reason}}","any.required":"{{#label}} is required","any.unknown":"{{#label}} is not allowed"}}),gJ}function NJ(){if(bJ)return vJ;bJ=1;const e=rW,t=xJ,n=OJ(),r=$W(),s=qW(),i=RW(),o=BW(),a={};return vJ=n.extend({type:"alternatives",flags:{match:{default:"any"}},terms:{matches:{init:[],register:o.toSibling}},args:(e,...t)=>1===t.length&&Array.isArray(t[0])?e.try(...t[0]):e.try(...t),validate(e,n){const{schema:r,error:s,state:o,prefs:c}=n;if(r._flags.match){const n=[],a=[];for(let t=0;r.$_terms.matches.length>t;++t){const s=r.$_terms.matches[t],i=o.nest(s.schema,"match."+t);i.snapshot();const l=s.schema.$_validate(e,i,c);l.errors?(a.push(l.errors),i.restore()):(n.push(l.value),i.commit())}if(0===n.length){const e={details:a.map((e=>i.details(e,{override:!1})))};return{errors:s("alternatives.any",e)}}if("one"===r._flags.match)return 1===n.length?{value:n[0]}:{errors:s("alternatives.one")};if(n.length!==r.$_terms.matches.length){const e={details:a.map((e=>i.details(e,{override:!1})))};return{errors:s("alternatives.all",e)}}const l=e=>e.$_terms.matches.some((e=>"object"===e.schema.type||"alternatives"===e.schema.type&&l(e.schema)));return l(r)?{value:n.reduce(((e,n)=>t(e,n,{mergeArrays:!1})))}:{value:n[n.length-1]}}const l=[];for(let t=0;r.$_terms.matches.length>t;++t){const n=r.$_terms.matches[t];if(n.schema){const r=o.nest(n.schema,"match."+t);r.snapshot();const s=n.schema.$_validate(e,r,c);if(!s.errors)return r.commit(),s;r.restore(),l.push({schema:n.schema,reports:s.errors});continue}const s=n.ref?n.ref.resolve(e,o,c):e,i=n.is?[n]:n.switch;for(let r=0;i.length>r;++r){const a=i[r],{is:l,then:u,otherwise:p}=a,d=`match.${t}${n.switch?"."+r:""}`;if(l.$_match(s,o.nest(l,d+".is"),c)){if(u)return u.$_validate(e,o.nest(u,d+".then"),c)}else if(p)return p.$_validate(e,o.nest(p,d+".otherwise"),c)}}return a.errors(l,n)},rules:{conditional:{method(t,n){e(!this._flags._endedSwitch,"Unreachable condition"),e(!this._flags.match,"Cannot combine match mode",this._flags.match,"with conditional rule"),e(void 0===n.break,"Cannot use break option with alternatives conditional");const r=this.clone(),i=s.when(r,t,n),o=i.is?[i]:i.switch;for(const e of o)if(e.then&&e.otherwise){r.$_setFlag("_endedSwitch",!0,{clone:!1});break}return r.$_terms.matches.push(i),r.$_mutateRebuild()}},match:{method(t){if(e(["any","one","all"].includes(t),"Invalid alternatives match mode",t),"any"!==t)for(const n of this.$_terms.matches)e(n.schema,"Cannot combine match mode",t,"with conditional rules");return this.$_setFlag("match",t)}},try:{method(...t){e(t.length,"Missing alternative schemas"),r.verifyFlat(t,"try"),e(!this._flags._endedSwitch,"Unreachable condition");const n=this.clone();for(const e of t)n.$_terms.matches.push({schema:n.$_compile(e)});return n.$_mutateRebuild()}}},overrides:{label(e){return this.$_parent("label",e).$_modify({each:(t,n)=>"is"!==n.path[0]&&"string"!=typeof t._flags.label?t.label(e):void 0,ref:!1})}},rebuild(e){e.$_modify({each:t=>{r.isSchema(t)&&"array"===t.type&&e.$_setFlag("_arrayItems",!0,{clone:!1})}})},manifest:{build(e,t){if(t.matches)for(const n of t.matches){const{schema:t,ref:r,is:s,not:i,then:o,otherwise:a}=n;e=t?e.try(t):r?e.conditional(r,{is:s,then:o,not:i,otherwise:a,switch:n.switch}):e.conditional(s,{then:o,otherwise:a})}return e}},messages:{"alternatives.all":"{{#label}} does not match all of the required types","alternatives.any":"{{#label}} does not match any of the allowed types","alternatives.match":"{{#label}} does not match any of the allowed types","alternatives.one":"{{#label}} matches more than one allowed type","alternatives.types":"{{#label}} must be one of {{#types}}"}}),a.errors=function(e,{error:t,state:n}){if(!e.length)return{errors:t("alternatives.any")};if(1===e.length)return{errors:e[0].reports};const r=new Set,s=[];for(const{reports:o,schema:c}of e){if(o.length>1)return a.unmatched(e,t);const l=o[0];if(l instanceof i.Report==0)return a.unmatched(e,t);if(l.state.path.length!==n.path.length){s.push({type:c.type,report:l});continue}if("any.only"===l.code){for(const e of l.local.valids)r.add(e);continue}const[u,p]=l.code.split(".");"base"!==p?s.push({type:c.type,report:l}):r.add("object.base"===l.code?l.local.type:u)}return s.length?1===s.length?{errors:s[0].report}:a.unmatched(e,t):{errors:t("alternatives.types",{types:[...r]})}},a.unmatched=function(e,t){const n=[];for(const t of e)n.push(...t.reports);return{errors:t("alternatives.match",i.details(n,{override:!1}))}},vJ}function DJ(){if(_J)return EJ;_J=1;const e=rW,t=eJ,n=oW,r=OJ(),s=$W(),i=qW(),o={};return EJ=r.extend({type:"array",flags:{single:{default:!1},sparse:{default:!1}},terms:{items:{init:[],manifest:"schema"},ordered:{init:[],manifest:"schema"},_exclusions:{init:[]},_inclusions:{init:[]},_requireds:{init:[]}},coerce:{from:"object",method(e,{schema:t,state:n,prefs:r}){if(!Array.isArray(e))return;const s=t.$_getRule("sort");return s?o.sort(t,e,s.args.options,n,r):void 0}},validate(e,{schema:t,error:n}){if(!Array.isArray(e)){if(t._flags.single){const t=[e];return t[s.symbols.arraySingle]=!0,{value:t}}return{errors:n("array.base")}}if(t.$_getRule("items")||t.$_terms.externals)return{value:e.slice()}},rules:{has:{method(e){e=this.$_compile(e,{appendPath:!0});const t=this.$_addRule({name:"has",args:{schema:e}});return t.$_mutateRegister(e),t},validate(e,{state:t,prefs:n,error:r},{schema:s}){const i=[e,...t.ancestors];for(let r=0;e.length>r;++r){const o=t.localize([...t.path,r],i,s);if(s.$_match(e[r],o,n))return e}const o=s._flags.label;return o?r("array.hasKnown",{patternLabel:o}):r("array.hasUnknown",null)},multi:!0},items:{method(...e){s.verifyFlat(e,"items");const t=this.$_addRule("items");for(let n=0;e.length>n;++n){const r=s.tryWithPath((()=>this.$_compile(e[n])),n,{append:!0});t.$_terms.items.push(r)}return t.$_mutateRebuild()},validate(e,{schema:t,error:n,state:r,prefs:i,errorsArray:a}){const c=t.$_terms._requireds.slice(),l=t.$_terms.ordered.slice(),u=[...t.$_terms._inclusions,...c],p=!e[s.symbols.arraySingle];delete e[s.symbols.arraySingle];const d=a();let h=e.length;for(let s=0;h>s;++s){const a=e[s];let f=!1,m=!1;const g=p?s:new Number(s),y=[...r.path,g];if(!t._flags.sparse&&void 0===a){if(d.push(n("array.sparse",{key:g,path:y,pos:s,value:void 0},r.localize(y))),i.abortEarly)return d;l.shift();continue}const v=[e,...r.ancestors];for(const e of t.$_terms._exclusions)if(e.$_match(a,r.localize(y,v,e),i,{presence:"ignore"})){if(d.push(n("array.excludes",{pos:s,value:a},r.localize(y))),i.abortEarly)return d;f=!0,l.shift();break}if(f)continue;if(t.$_terms.ordered.length){if(l.length){const c=l.shift(),u=c.$_validate(a,r.localize(y,v,c),i);if(u.errors){if(d.push(...u.errors),i.abortEarly)return d}else if("strip"===c._flags.result)o.fastSplice(e,s),--s,--h;else{if(!t._flags.sparse&&void 0===u.value){if(d.push(n("array.sparse",{key:g,path:y,pos:s,value:void 0},r.localize(y))),i.abortEarly)return d;continue}e[s]=u.value}continue}if(!t.$_terms.items.length){if(d.push(n("array.orderedLength",{pos:s,limit:t.$_terms.ordered.length})),i.abortEarly)return d;break}}const b=[];let E=c.length;for(let l=0;E>l;++l){const u=r.localize(y,v,c[l]);u.snapshot();const p=c[l].$_validate(a,u,i);if(b[l]=p,!p.errors){if(u.commit(),e[s]=p.value,m=!0,o.fastSplice(c,l),--l,--E,!t._flags.sparse&&void 0===p.value&&(d.push(n("array.sparse",{key:g,path:y,pos:s,value:void 0},r.localize(y))),i.abortEarly))return d;break}u.restore()}if(m)continue;const _=i.stripUnknown&&!!i.stripUnknown.arrays||!1;E=u.length;for(const l of u){let u;const p=c.indexOf(l);if(-1!==p)u=b[p];else{const c=r.localize(y,v,l);if(c.snapshot(),u=l.$_validate(a,c,i),!u.errors){c.commit(),"strip"===l._flags.result?(o.fastSplice(e,s),--s,--h):t._flags.sparse||void 0!==u.value?e[s]=u.value:(d.push(n("array.sparse",{key:g,path:y,pos:s,value:void 0},r.localize(y))),f=!0),m=!0;break}c.restore()}if(1===E){if(_){o.fastSplice(e,s),--s,--h,m=!0;break}if(d.push(...u.errors),i.abortEarly)return d;f=!0;break}}if(!f&&(t.$_terms._inclusions.length||t.$_terms._requireds.length)&&!m){if(_){o.fastSplice(e,s),--s,--h;continue}if(d.push(n("array.includes",{pos:s,value:a},r.localize(y))),i.abortEarly)return d}}return c.length&&o.fillMissedErrors(t,d,c,e,r,i),l.length&&(o.fillOrderedErrors(t,d,l,e,r,i),d.length||o.fillDefault(l,e,r,i)),d.length?d:e},priority:!0,manifest:!1},length:{method(e){return this.$_addRule({name:"length",args:{limit:e},operator:"="})},validate:(e,t,{limit:n},{name:r,operator:i,args:o})=>s.compare(e.length,n,i)?e:t.error("array."+r,{limit:o.limit,value:e}),args:[{name:"limit",ref:!0,assert:s.limit,message:"must be a positive integer"}]},max:{method(e){return this.$_addRule({name:"max",method:"length",args:{limit:e},operator:"<="})}},min:{method(e){return this.$_addRule({name:"min",method:"length",args:{limit:e},operator:">="})}},ordered:{method(...e){s.verifyFlat(e,"ordered");const t=this.$_addRule("items");for(let n=0;e.length>n;++n){const r=s.tryWithPath((()=>this.$_compile(e[n])),n,{append:!0});o.validateSingle(r,t),t.$_mutateRegister(r),t.$_terms.ordered.push(r)}return t.$_mutateRebuild()}},single:{method(t){const n=void 0===t||!!t;return e(!n||!this._flags._arrayItems,"Cannot specify single rule when array has array items"),this.$_setFlag("single",n)}},sort:{method(t={}){s.assertOptions(t,["by","order"]);const n={order:t.order||"ascending"};return t.by&&(n.by=i.ref(t.by,{ancestor:0}),e(!n.by.ancestor,"Cannot sort by ancestor")),this.$_addRule({name:"sort",args:{options:n}})},validate(e,{error:t,state:n,prefs:r,schema:s},{options:i}){const{value:a,errors:c}=o.sort(s,e,i,n,r);if(c)return c;for(let n=0;e.length>n;++n)if(e[n]!==a[n])return t("array.sort",{order:i.order,by:i.by?i.by.key:"value"});return e},convert:!0},sparse:{method(e){const t=void 0===e||!!e;return this._flags.sparse===t?this:(t?this.clone():this.$_addRule("items")).$_setFlag("sparse",t,{clone:!1})}},unique:{method(t,n={}){e(!t||"function"==typeof t||"string"==typeof t,"comparator must be a function or a string"),s.assertOptions(n,["ignoreUndefined","separator"]);const r={name:"unique",args:{options:n,comparator:t}};if(t)if("string"==typeof t){const e=s.default(n.separator,".");r.path=e?t.split(e):[t]}else r.comparator=t;return this.$_addRule(r)},validate(r,{state:s,error:i},{comparator:o,options:a},{comparator:c,path:l}){const u={string:Object.create(null),number:Object.create(null),undefined:Object.create(null),boolean:Object.create(null),bigint:Object.create(null),object:new Map,function:new Map,custom:new Map},p=c||t,d=a.ignoreUndefined;for(let t=0;r.length>t;++t){const a=l?n(r[t],l):r[t],h=c?u.custom:u[typeof a];if(e(h,"Failed to find unique map container for type",typeof a),h instanceof Map){const e=h.entries();let n;for(;!(n=e.next()).done;)if(p(n.value[0],a)){const e=s.localize([...s.path,t],[r,...s.ancestors]),a={pos:t,value:r[t],dupePos:n.value[1],dupeValue:r[n.value[1]]};return l&&(a.path=o),i("array.unique",a,e)}h.set(a,t)}else{if((!d||void 0!==a)&&void 0!==h[a]){const e={pos:t,value:r[t],dupePos:h[a],dupeValue:r[h[a]]};return l&&(e.path=o),i("array.unique",e,s.localize([...s.path,t],[r,...s.ancestors]))}h[a]=t}}return r},args:["comparator","options"],multi:!0}},cast:{set:{from:Array.isArray,to:(e,t)=>new Set(e)}},rebuild(e){e.$_terms._inclusions=[],e.$_terms._exclusions=[],e.$_terms._requireds=[];for(const t of e.$_terms.items)o.validateSingle(t,e),"required"===t._flags.presence?e.$_terms._requireds.push(t):"forbidden"===t._flags.presence?e.$_terms._exclusions.push(t):e.$_terms._inclusions.push(t);for(const t of e.$_terms.ordered)o.validateSingle(t,e)},manifest:{build:(e,t)=>(t.items&&(e=e.items(...t.items)),t.ordered&&(e=e.ordered(...t.ordered)),e)},messages:{"array.base":"{{#label}} must be an array","array.excludes":"{{#label}} contains an excluded value","array.hasKnown":"{{#label}} does not contain at least one required match for type {:#patternLabel}","array.hasUnknown":"{{#label}} does not contain at least one required match","array.includes":"{{#label}} does not match any of the allowed types","array.includesRequiredBoth":"{{#label}} does not contain {{#knownMisses}} and {{#unknownMisses}} other required value(s)","array.includesRequiredKnowns":"{{#label}} does not contain {{#knownMisses}}","array.includesRequiredUnknowns":"{{#label}} does not contain {{#unknownMisses}} required value(s)","array.length":"{{#label}} must contain {{#limit}} items","array.max":"{{#label}} must contain less than or equal to {{#limit}} items","array.min":"{{#label}} must contain at least {{#limit}} items","array.orderedLength":"{{#label}} must contain at most {{#limit}} items","array.sort":"{{#label}} must be sorted in {#order} order by {{#by}}","array.sort.mismatching":"{{#label}} cannot be sorted due to mismatching types","array.sort.unsupported":"{{#label}} cannot be sorted due to unsupported type {#type}","array.sparse":"{{#label}} must not be a sparse array item","array.unique":"{{#label}} contains a duplicate value"}}),o.fillMissedErrors=function(e,t,n,r,s,i){const o=[];let a=0;for(const e of n){const t=e._flags.label;t?o.push(t):++a}t.push(o.length?a?e.$_createError("array.includesRequiredBoth",r,{knownMisses:o,unknownMisses:a},s,i):e.$_createError("array.includesRequiredKnowns",r,{knownMisses:o},s,i):e.$_createError("array.includesRequiredUnknowns",r,{unknownMisses:a},s,i))},o.fillOrderedErrors=function(e,t,n,r,s,i){const a=[];for(const e of n)"required"===e._flags.presence&&a.push(e);a.length&&o.fillMissedErrors(e,t,a,r,s,i)},o.fillDefault=function(e,t,n,r){const s=[];let i=!0;for(let o=e.length-1;o>=0;--o){const a=e[o],c=[t,...n.ancestors],l=a.$_validate(void 0,n.localize(n.path,c,a),r).value;if(i){if(void 0===l)continue;i=!1}s.unshift(l)}s.length&&t.push(...s)},o.fastSplice=function(e,t){let n=t;for(;e.length>n;)e[n++]=e[n];--e.length},o.validateSingle=function(t,n){("array"===t.type||t._flags._arrayItems)&&(e(!n._flags.single,"Cannot specify array item with single rule enabled"),n.$_setFlag("_arrayItems",!0,{clone:!1}))},o.sort=function(e,t,n,r,s){const i="ascending"===n.order?1:-1,a=-1*i,c=i,l=(l,u)=>{let p=o.compare(l,u,a,c);if(null!==p)return p;if(n.by&&(l=n.by.resolve(l,r,s),u=n.by.resolve(u,r,s)),p=o.compare(l,u,a,c),null!==p)return p;const d=typeof l;if(d!==typeof u)throw e.$_createError("array.sort.mismatching",t,null,r,s);if("number"!==d&&"string"!==d)throw e.$_createError("array.sort.unsupported",t,{type:d},r,s);return"number"===d?(l-u)*i:u>l?a:c};try{return{value:t.slice().sort(l)}}catch(e){return{errors:e}}},o.compare=function(e,t,n,r){return e===t?0:void 0===e?1:void 0===t?-1:null===e?r:null===t?n:null},EJ}function PJ(){if(SJ)return AJ;SJ=1;const e=rW,t=OJ(),n=$W(),r=RJ(),s={isBool:function(e){return"boolean"==typeof e}};return AJ=t.extend({type:"boolean",flags:{sensitive:{default:!1}},terms:{falsy:{init:null,manifest:"values"},truthy:{init:null,manifest:"values"}},coerce(e,{schema:t}){if("boolean"!=typeof e){if("string"==typeof e){const n=t._flags.sensitive?e:e.toLowerCase();e="true"===n||"false"!==n&&e}return"boolean"!=typeof e&&(e=t.$_terms.truthy&&t.$_terms.truthy.has(e,null,null,!t._flags.sensitive)||(!t.$_terms.falsy||!t.$_terms.falsy.has(e,null,null,!t._flags.sensitive))&&e),{value:e}}},validate(e,{error:t}){if("boolean"!=typeof e)return{value:e,errors:t("boolean.base")}},rules:{truthy:{method(...t){n.verifyFlat(t,"truthy");const s=this.clone();s.$_terms.truthy=s.$_terms.truthy||new r;for(let n=0;t.length>n;++n){const r=t[n];e(void 0!==r,"Cannot call truthy with undefined"),s.$_terms.truthy.add(r)}return s}},falsy:{method(...t){n.verifyFlat(t,"falsy");const s=this.clone();s.$_terms.falsy=s.$_terms.falsy||new r;for(let n=0;t.length>n;++n){const r=t[n];e(void 0!==r,"Cannot call falsy with undefined"),s.$_terms.falsy.add(r)}return s}},sensitive:{method(e=!0){return this.$_setFlag("sensitive",e)}}},cast:{number:{from:s.isBool,to:(e,t)=>e?1:0},string:{from:s.isBool,to:(e,t)=>e?"true":"false"}},manifest:{build:(e,t)=>(t.truthy&&(e=e.truthy(...t.truthy)),t.falsy&&(e=e.falsy(...t.falsy)),e)},messages:{"boolean.base":"{{#label}} must be a boolean"}}),AJ}function LJ(){if(wJ)return TJ;wJ=1;const e=rW,t=OJ(),n=$W(),r=jW(),s={isDate:function(e){return e instanceof Date}};return TJ=t.extend({type:"date",coerce:{from:["number","string"],method:(e,{schema:t})=>({value:s.parse(e,t._flags.format)||e})},validate(e,{schema:t,error:n,prefs:r}){if(e instanceof Date&&!isNaN(e.getTime()))return;const s=t._flags.format;return r.convert&&s&&"string"==typeof e?{value:e,errors:n("date.format",{format:s})}:{value:e,errors:n("date.base")}},rules:{compare:{method:!1,validate(e,t,{date:r},{name:s,operator:i,args:o}){const a="now"===r?Date.now():r.getTime();return n.compare(e.getTime(),a,i)?e:t.error("date."+s,{limit:o.date,value:e})},args:[{name:"date",ref:!0,normalize:e=>"now"===e?e:s.parse(e),assert:e=>null!==e,message:"must have a valid date format"}]},format:{method(t){return e(["iso","javascript","unix"].includes(t),"Unknown date format",t),this.$_setFlag("format",t)}},greater:{method(e){return this.$_addRule({name:"greater",method:"compare",args:{date:e},operator:">"})}},iso:{method(){return this.format("iso")}},less:{method(e){return this.$_addRule({name:"less",method:"compare",args:{date:e},operator:"<"})}},max:{method(e){return this.$_addRule({name:"max",method:"compare",args:{date:e},operator:"<="})}},min:{method(e){return this.$_addRule({name:"min",method:"compare",args:{date:e},operator:">="})}},timestamp:{method(t="javascript"){return e(["javascript","unix"].includes(t),'"type" must be one of "javascript, unix"'),this.format(t)}}},cast:{number:{from:s.isDate,to:(e,t)=>e.getTime()},string:{from:s.isDate,to:(e,{prefs:t})=>r.date(e,t)}},messages:{"date.base":"{{#label}} must be a valid date","date.format":'{{#label}} must be in {msg("date.format." + #format) || #format} format',"date.greater":"{{#label}} must be greater than {{:#limit}}","date.less":"{{#label}} must be less than {{:#limit}}","date.max":"{{#label}} must be less than or equal to {{:#limit}}","date.min":"{{#label}} must be greater than or equal to {{:#limit}}","date.format.iso":"ISO 8601 date","date.format.javascript":"timestamp or number of milliseconds","date.format.unix":"timestamp or number of seconds"}}),s.parse=function(e,t){if(e instanceof Date)return e;if("string"!=typeof e&&(isNaN(e)||!isFinite(e)))return null;if(/^\s*$/.test(e))return null;if("iso"===t)return n.isIsoDate(e)?s.date(""+e):null;const r=e;if("string"==typeof e&&/^[+-]?\d+(\.\d+)?$/.test(e)&&(e=parseFloat(e)),t){if("javascript"===t)return s.date(1*e);if("unix"===t)return s.date(1e3*e);if("string"==typeof r)return null}return s.date(e)},s.date=function(e){const t=new Date(e);return isNaN(t.getTime())?null:t},TJ}const MJ=rW,BJ=fW,jJ=xJ,FJ=oW,$J={};var UJ=function(e,t,n={}){if(MJ(e&&"object"==typeof e,"Invalid defaults value: must be an object"),MJ(!t||!0===t||"object"==typeof t,"Invalid source value: must be true, falsy or an object"),MJ("object"==typeof n,"Invalid options: must be an object"),!t)return null;if(n.shallow)return $J.applyToDefaultsWithShallow(e,t,n);const r=BJ(e);return!0===t?r:jJ(r,t,{nullOverride:void 0!==n.nullOverride&&n.nullOverride,mergeArrays:!1})};$J.applyToDefaultsWithShallow=function(e,t,n){const r=n.shallow;MJ(Array.isArray(r),"Invalid keys");const s=new Map,i=!0===t?null:new Set;for(let n of r){n=Array.isArray(n)?n:n.split(".");const r=FJ(e,n);r&&"object"==typeof r?s.set(r,i&&FJ(t,n)||r):i&&i.add(n)}const o=BJ(e,{},s);if(!i)return o;for(const e of i)$J.reachCopy(o,t,e);return jJ(o,t,{nullOverride:void 0!==n.nullOverride&&n.nullOverride,mergeArrays:!1})},$J.reachCopy=function(e,t,n){for(const e of n){if(!(e in t))return;const n=t[e];if("object"!=typeof n||null===n)return;t=n}const r=t;let s=e;for(let e=0;n.length-1>e;++e){const t=n[e];"object"!=typeof s[t]&&(s[t]={}),s=s[t]}s[n[n.length-1]]=r};var HJ={},GJ={exports:{}},qJ=function(...e){try{return JSON.stringify(...e)}catch(e){return"[Cannot display object: "+e.message+"]"}};!function(e,t){const n=qJ;GJ.exports=class extends Error{constructor(e){super(e.filter((e=>""!==e)).map((e=>"string"==typeof e?e:e instanceof Error?e.message:n(e))).join(" ")||"Unknown error"),"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,t.assert)}}}(0,GJ.exports);const zJ=GJ.exports,VJ=function(e,...t){if(!e){if(1===t.length&&t[0]instanceof Error)throw t[0];throw new zJ(t)}},YJ={};var KJ,QJ,WJ,JJ,XJ,ZJ,eX,tX,nX,rX;function sX(){if(QJ)return KJ;QJ=1;const e=UJ,t=rW,n=fW,r=HJ,s=OJ(),i=$W(),o=qW(),a=RW(),c=BW(),l=jW(),u={renameDefaults:{alias:!1,multiple:!1,override:!1}};return KJ=s.extend({type:"_keys",properties:{typeof:"object"},flags:{unknown:{default:void 0}},terms:{dependencies:{init:null},keys:{init:null,manifest:{mapped:{from:"schema",to:"key"}}},patterns:{init:null},renames:{init:null}},args:(e,t)=>e.keys(t),validate(e,{schema:t,error:n,state:r,prefs:s}){if(!e||typeof e!==t.$_property("typeof")||Array.isArray(e))return{value:e,errors:n("object.base",{type:t.$_property("typeof")})};if(!(t.$_terms.renames||t.$_terms.dependencies||t.$_terms.keys||t.$_terms.patterns||t.$_terms.externals))return;e=u.clone(e,s);const i=[];if(t.$_terms.renames&&!u.rename(t,e,r,s,i))return{value:e,errors:i};if(!t.$_terms.keys&&!t.$_terms.patterns&&!t.$_terms.dependencies)return{value:e,errors:i};const o=new Set(Object.keys(e));if(t.$_terms.keys){const n=[e,...r.ancestors];for(const a of t.$_terms.keys){const t=a.key,c=e[t];o.delete(t);const l=r.localize([...r.path,t],n,a),u=a.schema.$_validate(c,l,s);if(u.errors){if(s.abortEarly)return{value:e,errors:u.errors};void 0!==u.value&&(e[t]=u.value),i.push(...u.errors)}else"strip"===a.schema._flags.result||void 0===u.value&&void 0!==c?delete e[t]:void 0!==u.value&&(e[t]=u.value)}}if(o.size||t._flags._hasPatternMatch){const n=u.unknown(t,e,o,i,r,s);if(n)return n}if(t.$_terms.dependencies)for(const n of t.$_terms.dependencies){if(null!==n.key&&!1===u.isPresent(n.options)(n.key.resolve(e,r,s,null,{shadow:!1})))continue;const o=u.dependencies[n.rel](t,n,e,r,s);if(o){const n=t.$_createError(o.code,e,o.context,r,s);if(s.abortEarly)return{value:e,errors:n};i.push(n)}}return{value:e,errors:i}},rules:{and:{method(...e){return i.verifyFlat(e,"and"),u.dependency(this,"and",null,e)}},append:{method(e){return null==e||0===Object.keys(e).length?this:this.keys(e)}},assert:{method(e,n,r){l.isTemplate(e)||(e=o.ref(e)),t(void 0===r||"string"==typeof r,"Message must be a string"),n=this.$_compile(n,{appendPath:!0});const s=this.$_addRule({name:"assert",args:{subject:e,schema:n,message:r}});return s.$_mutateRegister(e),s.$_mutateRegister(n),s},validate(e,{error:t,prefs:n,state:r},{subject:s,schema:i,message:o}){const a=s.resolve(e,r,n),l=c.isRef(s)?s.absolute(r):[];return i.$_match(a,r.localize(l,[e,...r.ancestors],i),n)?e:t("object.assert",{subject:s,message:o})},args:["subject","schema","message"],multi:!0},instance:{method(e,n){return t("function"==typeof e,"constructor must be a function"),this.$_addRule({name:"instance",args:{constructor:e,name:n=n||e.name}})},validate:(e,t,{constructor:n,name:r})=>e instanceof n?e:t.error("object.instance",{type:r,value:e}),args:["constructor","name"]},keys:{method(e){t(void 0===e||"object"==typeof e,"Object schema must be a valid object"),t(!i.isSchema(e),"Object schema cannot be a joi schema");const n=this.clone();if(e)if(Object.keys(e).length){n.$_terms.keys=n.$_terms.keys?n.$_terms.keys.filter((t=>!e.hasOwnProperty(t.key))):new u.Keys;for(const t in e)i.tryWithPath((()=>n.$_terms.keys.push({key:t,schema:this.$_compile(e[t])})),t)}else n.$_terms.keys=new u.Keys;else n.$_terms.keys=null;return n.$_mutateRebuild()}},length:{method(e){return this.$_addRule({name:"length",args:{limit:e},operator:"="})},validate:(e,t,{limit:n},{name:r,operator:s,args:o})=>i.compare(Object.keys(e).length,n,s)?e:t.error("object."+r,{limit:o.limit,value:e}),args:[{name:"limit",ref:!0,assert:i.limit,message:"must be a positive integer"}]},max:{method(e){return this.$_addRule({name:"max",method:"length",args:{limit:e},operator:"<="})}},min:{method(e){return this.$_addRule({name:"min",method:"length",args:{limit:e},operator:">="})}},nand:{method(...e){return i.verifyFlat(e,"nand"),u.dependency(this,"nand",null,e)}},or:{method(...e){return i.verifyFlat(e,"or"),u.dependency(this,"or",null,e)}},oxor:{method(...e){return u.dependency(this,"oxor",null,e)}},pattern:{method(e,n,r={}){const s=e instanceof RegExp;s||(e=this.$_compile(e,{appendPath:!0})),t(void 0!==n,"Invalid rule"),i.assertOptions(r,["fallthrough","matches"]),s&&t(!e.flags.includes("g")&&!e.flags.includes("y"),"pattern should not use global or sticky mode"),n=this.$_compile(n,{appendPath:!0});const o=this.clone();o.$_terms.patterns=o.$_terms.patterns||[];const a={[s?"regex":"schema"]:e,rule:n};return r.matches&&(a.matches=this.$_compile(r.matches),"array"!==a.matches.type&&(a.matches=a.matches.$_root.array().items(a.matches)),o.$_mutateRegister(a.matches),o.$_setFlag("_hasPatternMatch",!0,{clone:!1})),r.fallthrough&&(a.fallthrough=!0),o.$_terms.patterns.push(a),o.$_mutateRegister(n),o}},ref:{method(){return this.$_addRule("ref")},validate:(e,t)=>c.isRef(e)?e:t.error("object.refType",{value:e})},regex:{method(){return this.$_addRule("regex")},validate:(e,t)=>e instanceof RegExp?e:t.error("object.regex",{value:e})},rename:{method(n,r,s={}){t("string"==typeof n||n instanceof RegExp,"Rename missing the from argument"),t("string"==typeof r||r instanceof l,"Invalid rename to argument"),t(r!==n,"Cannot rename key to same name:",n),i.assertOptions(s,["alias","ignoreUndefined","override","multiple"]);const o=this.clone();o.$_terms.renames=o.$_terms.renames||[];for(const e of o.$_terms.renames)t(e.from!==n,"Cannot rename the same key multiple times");return r instanceof l&&o.$_mutateRegister(r),o.$_terms.renames.push({from:n,to:r,options:e(u.renameDefaults,s)}),o}},schema:{method(e="any"){return this.$_addRule({name:"schema",args:{type:e}})},validate:(e,t,{type:n})=>!i.isSchema(e)||"any"!==n&&e.type!==n?t.error("object.schema",{type:n}):e},unknown:{method(e){return this.$_setFlag("unknown",!1!==e)}},with:{method(e,t,n={}){return u.dependency(this,"with",e,t,n)}},without:{method(e,t,n={}){return u.dependency(this,"without",e,t,n)}},xor:{method(...e){return i.verifyFlat(e,"xor"),u.dependency(this,"xor",null,e)}}},overrides:{default(e,t){return void 0===e&&(e=i.symbols.deepDefault),this.$_parent("default",e,t)}},rebuild(e){if(e.$_terms.keys){const t=new r.Sorter;for(const n of e.$_terms.keys)i.tryWithPath((()=>t.add(n,{after:n.schema.$_rootReferences(),group:n.key})),n.key);e.$_terms.keys=new u.Keys(...t.nodes)}},manifest:{build(e,t){if(t.keys&&(e=e.keys(t.keys)),t.dependencies)for(const{rel:n,key:r=null,peers:s,options:i}of t.dependencies)e=u.dependency(e,n,r,s,i);if(t.patterns)for(const{regex:n,schema:r,rule:s,fallthrough:i,matches:o}of t.patterns)e=e.pattern(n||r,s,{fallthrough:i,matches:o});if(t.renames)for(const{from:n,to:r,options:s}of t.renames)e=e.rename(n,r,s);return e}},messages:{"object.and":"{{#label}} contains {{#presentWithLabels}} without its required peers {{#missingWithLabels}}","object.assert":'{{#label}} is invalid because {if(#subject.key, `"` + #subject.key + `" failed to ` + (#message || "pass the assertion test"), #message || "the assertion failed")}',"object.base":"{{#label}} must be of type {{#type}}","object.instance":"{{#label}} must be an instance of {{:#type}}","object.length":'{{#label}} must have {{#limit}} key{if(#limit == 1, "", "s")}',"object.max":'{{#label}} must have less than or equal to {{#limit}} key{if(#limit == 1, "", "s")}',"object.min":'{{#label}} must have at least {{#limit}} key{if(#limit == 1, "", "s")}',"object.missing":"{{#label}} must contain at least one of {{#peersWithLabels}}","object.nand":"{{:#mainWithLabel}} must not exist simultaneously with {{#peersWithLabels}}","object.oxor":"{{#label}} contains a conflict between optional exclusive peers {{#peersWithLabels}}","object.pattern.match":"{{#label}} keys failed to match pattern requirements","object.refType":"{{#label}} must be a Joi reference","object.regex":"{{#label}} must be a RegExp object","object.rename.multiple":"{{#label}} cannot rename {{:#from}} because multiple renames are disabled and another key was already renamed to {{:#to}}","object.rename.override":"{{#label}} cannot rename {{:#from}} because override is disabled and target {{:#to}} exists","object.schema":"{{#label}} must be a Joi schema of {{#type}} type","object.unknown":"{{#label}} is not allowed","object.with":"{{:#mainWithLabel}} missing required peer {{:#peerWithLabel}}","object.without":"{{:#mainWithLabel}} conflict with forbidden peer {{:#peerWithLabel}}","object.xor":"{{#label}} contains a conflict between exclusive peers {{#peersWithLabels}}"}}),u.clone=function(e,t){if("object"==typeof e){if(t.nonEnumerables)return n(e,{shallow:!0});const r=Object.create(Object.getPrototypeOf(e));return Object.assign(r,e),r}const r=function(...t){return e.apply(this,t)};return r.prototype=n(e.prototype),Object.defineProperty(r,"name",{value:e.name,writable:!1}),Object.defineProperty(r,"length",{value:e.length,writable:!1}),Object.assign(r,e),r},u.dependency=function(e,n,r,s,a){t(null===r||"string"==typeof r,n,"key must be a strings"),a||(a=s.length>1&&"object"==typeof s[s.length-1]?s.pop():{}),i.assertOptions(a,["separator","isPresent"]),s=[].concat(s);const c=i.default(a.separator,"."),l=[];for(const e of s)t("string"==typeof e,n,"peers must be strings"),l.push(o.ref(e,{separator:c,ancestor:0,prefix:!1}));null!==r&&(r=o.ref(r,{separator:c,ancestor:0,prefix:!1}));const p=e.clone();return p.$_terms.dependencies=p.$_terms.dependencies||[],p.$_terms.dependencies.push(new u.Dependency(n,r,l,s,a)),p},u.dependencies={and(e,t,n,r,s){const i=[],o=[],a=t.peers.length,c=u.isPresent(t.options);for(const e of t.peers)!1===c(e.resolve(n,r,s,null,{shadow:!1}))?i.push(e.key):o.push(e.key);if(i.length!==a&&o.length!==a)return{code:"object.and",context:{present:o,presentWithLabels:u.keysToLabels(e,o),missing:i,missingWithLabels:u.keysToLabels(e,i)}}},nand(e,t,n,r,s){const i=[],o=u.isPresent(t.options);for(const e of t.peers)o(e.resolve(n,r,s,null,{shadow:!1}))&&i.push(e.key);if(i.length!==t.peers.length)return;const a=t.paths[0],c=t.paths.slice(1);return{code:"object.nand",context:{main:a,mainWithLabel:u.keysToLabels(e,a),peers:c,peersWithLabels:u.keysToLabels(e,c)}}},or(e,t,n,r,s){const i=u.isPresent(t.options);for(const e of t.peers)if(i(e.resolve(n,r,s,null,{shadow:!1})))return;return{code:"object.missing",context:{peers:t.paths,peersWithLabels:u.keysToLabels(e,t.paths)}}},oxor(e,t,n,r,s){const i=[],o=u.isPresent(t.options);for(const e of t.peers)o(e.resolve(n,r,s,null,{shadow:!1}))&&i.push(e.key);if(!i.length||1===i.length)return;const a={peers:t.paths,peersWithLabels:u.keysToLabels(e,t.paths)};return a.present=i,a.presentWithLabels=u.keysToLabels(e,i),{code:"object.oxor",context:a}},with(e,t,n,r,s){const i=u.isPresent(t.options);for(const o of t.peers)if(!1===i(o.resolve(n,r,s,null,{shadow:!1})))return{code:"object.with",context:{main:t.key.key,mainWithLabel:u.keysToLabels(e,t.key.key),peer:o.key,peerWithLabel:u.keysToLabels(e,o.key)}}},without(e,t,n,r,s){const i=u.isPresent(t.options);for(const o of t.peers)if(i(o.resolve(n,r,s,null,{shadow:!1})))return{code:"object.without",context:{main:t.key.key,mainWithLabel:u.keysToLabels(e,t.key.key),peer:o.key,peerWithLabel:u.keysToLabels(e,o.key)}}},xor(e,t,n,r,s){const i=[],o=u.isPresent(t.options);for(const e of t.peers)o(e.resolve(n,r,s,null,{shadow:!1}))&&i.push(e.key);if(1===i.length)return;const a={peers:t.paths,peersWithLabels:u.keysToLabels(e,t.paths)};return 0===i.length?{code:"object.missing",context:a}:(a.present=i,a.presentWithLabels=u.keysToLabels(e,i),{code:"object.xor",context:a})}},u.keysToLabels=function(e,t){return Array.isArray(t)?t.map((t=>e.$_mapLabels(t))):e.$_mapLabels(t)},u.isPresent=function(e){return"function"==typeof e.isPresent?e.isPresent:e=>void 0!==e},u.rename=function(e,t,n,r,s){const i={};for(const o of e.$_terms.renames){const a=[],c="string"!=typeof o.from;if(c)for(const e in t){if(void 0===t[e]&&o.options.ignoreUndefined)continue;if(e===o.to)continue;const n=o.from.exec(e);n&&a.push({from:e,to:o.to,match:n})}else!{}.hasOwnProperty.call(t,o.from)||void 0===t[o.from]&&o.options.ignoreUndefined||a.push(o);for(const u of a){const a=u.from;let p=u.to;if(p instanceof l&&(p=p.render(t,n,r,u.match)),a!==p){if(!o.options.multiple&&i[p]&&(s.push(e.$_createError("object.rename.multiple",t,{from:a,to:p,pattern:c},n,r)),r.abortEarly))return!1;if({}.hasOwnProperty.call(t,p)&&!o.options.override&&!i[p]&&(s.push(e.$_createError("object.rename.override",t,{from:a,to:p,pattern:c},n,r)),r.abortEarly))return!1;void 0===t[a]?delete t[p]:t[p]=t[a],i[p]=!0,o.options.alias||delete t[a]}}}return!0},u.unknown=function(e,t,n,r,s,o){if(e.$_terms.patterns){let i=!1;const c=e.$_terms.patterns.map((e=>{if(e.matches)return i=!0,[]})),l=[t,...s.ancestors];for(const i of n){const a=t[i],u=[...s.path,i];for(let p=0;e.$_terms.patterns.length>p;++p){const d=e.$_terms.patterns[p];if(d.regex){const e=d.regex.test(i);if(s.mainstay.tracer.debug(s,"rule","pattern."+p,e?"pass":"error"),!e)continue}else if(!d.schema.$_match(i,s.nest(d.schema,"pattern."+p),o))continue;n.delete(i);const h=s.localize(u,l,{schema:d.rule,key:i}),f=d.rule.$_validate(a,h,o);if(f.errors){if(o.abortEarly)return{value:t,errors:f.errors};r.push(...f.errors)}if(d.matches&&c[p].push(i),t[i]=f.value,!d.fallthrough)break}}if(i)for(let n=0;c.length>n;++n){const i=c[n];if(!i)continue;const u=e.$_terms.patterns[n].matches,p=s.localize(s.path,l,u),d=u.$_validate(i,p,o);if(d.errors){const n=a.details(d.errors,{override:!1});n.matches=i;const c=e.$_createError("object.pattern.match",t,n,s,o);if(o.abortEarly)return{value:t,errors:c};r.push(c)}}}if(n.size&&(e.$_terms.keys||e.$_terms.patterns)){if(o.stripUnknown&&void 0===e._flags.unknown||o.skipFunctions){const e=!(!o.stripUnknown||!0!==o.stripUnknown&&!o.stripUnknown.objects);for(const r of n)e?(delete t[r],n.delete(r)):"function"==typeof t[r]&&n.delete(r)}if(!i.default(e._flags.unknown,o.allowUnknown))for(const i of n){const n=s.localize([...s.path,i],[]),a=e.$_createError("object.unknown",t[i],{child:i},n,o,{flags:!1});if(o.abortEarly)return{value:t,errors:a};r.push(a)}}},u.Dependency=class{constructor(e,t,n,r,s){this.rel=e,this.key=t,this.peers=n,this.paths=r,this.options=s}describe(){const e={rel:this.rel,peers:this.paths};return null!==this.key&&(e.key=this.key.key),"."!==this.peers[0].separator&&(e.options={...e.options,separator:this.peers[0].separator}),this.options.isPresent&&(e.options={...e.options,isPresent:this.options.isPresent}),e}},u.Keys=class extends Array{concat(e){const t=this.slice(),n=new Map;for(let e=0;t.length>e;++e)n.set(t[e].key,e);for(const r of e){const e=r.key,s=n.get(e);void 0!==s?t[s]={key:e,schema:t[s].schema.concat(r.schema)}:t.push(r)}return t}},KJ}function iX(){if(JJ)return WJ;JJ=1;const e=rW,t=sX();return WJ=t.extend({type:"function",properties:{typeof:"function"},rules:{arity:{method(t){return e(Number.isSafeInteger(t)&&t>=0,"n must be a positive integer"),this.$_addRule({name:"arity",args:{n:t}})},validate:(e,t,{n:n})=>e.length===n?e:t.error("function.arity",{n:n})},class:{method(){return this.$_addRule("class")},validate:(e,t)=>/^\s*class\s/.test(""+e)?e:t.error("function.class",{value:e})},minArity:{method(t){return e(Number.isSafeInteger(t)&&t>0,"n must be a strict positive integer"),this.$_addRule({name:"minArity",args:{n:t}})},validate:(e,t,{n:n})=>n>e.length?t.error("function.minArity",{n:n}):e},maxArity:{method(t){return e(Number.isSafeInteger(t)&&t>=0,"n must be a positive integer"),this.$_addRule({name:"maxArity",args:{n:t}})},validate:(e,t,{n:n})=>e.length>n?t.error("function.maxArity",{n:n}):e}},messages:{"function.arity":"{{#label}} must have an arity of {{#n}}","function.class":"{{#label}} must be a class","function.maxArity":"{{#label}} must have an arity lesser or equal to {{#n}}","function.minArity":"{{#label}} must have an arity greater or equal to {{#n}}"}})}function oX(){if(ZJ)return XJ;ZJ=1;const e=rW,t=OJ(),n=$W(),r=qW(),s=RW(),i={};return XJ=t.extend({type:"link",properties:{schemaChain:!0},terms:{link:{init:null,manifest:"single",register:!1}},args:(e,t)=>e.ref(t),validate(t,{schema:n,state:r,prefs:s}){e(n.$_terms.link,"Uninitialized link schema");const o=i.generate(n,t,r,s);return o.$_validate(t,r.nest(o,`link:${n.$_terms.link[0].ref.display}:${o.type}`),s)},generate:(e,t,n,r)=>i.generate(e,t,n,r),rules:{ref:{method(t){e(!this.$_terms.link,"Cannot reinitialize schema"),t=r.ref(t),e("value"===t.type||"local"===t.type,"Invalid reference type:",t.type),e("local"===t.type||"root"===t.ancestor||t.ancestor>0,"Link cannot reference itself");const n=this.clone();return n.$_terms.link=[{ref:t}],n}},relative:{method(e=!0){return this.$_setFlag("relative",e)}}},overrides:{concat(t){e(this.$_terms.link,"Uninitialized link schema"),e(n.isSchema(t),"Invalid schema object"),e("link"!==t.type,"Cannot merge type link with another link");const r=this.clone();return r.$_terms.whens||(r.$_terms.whens=[]),r.$_terms.whens.push({concat:t}),r.$_mutateRebuild()}},manifest:{build:(t,n)=>(e(n.link,"Invalid link description missing link"),t.ref(n.link))}}),i.generate=function(e,t,n,r){let s=n.mainstay.links.get(e);if(s)return s._generate(t,n,r).schema;const o=e.$_terms.link[0].ref,{perspective:a,path:c}=i.perspective(o,n);i.assert(a,"which is outside of schema boundaries",o,e,n,r);try{s=c.length?a.$_reach(c):a}catch(t){i.assert(!1,"to non-existing schema",o,e,n,r)}return i.assert("link"!==s.type,"which is another link",o,e,n,r),e._flags.relative||n.mainstay.links.set(e,s),s._generate(t,n,r).schema},i.perspective=function(e,t){if("local"===e.type){for(const{schema:n,key:r}of t.schemas){if((n._flags.id||r)===e.path[0])return{perspective:n,path:e.path.slice(1)};if(n.$_terms.shared)for(const t of n.$_terms.shared)if(t._flags.id===e.path[0])return{perspective:t,path:e.path.slice(1)}}return{perspective:null,path:null}}return"root"===e.ancestor?{perspective:t.schemas[t.schemas.length-1].schema,path:e.path}:{perspective:t.schemas[e.ancestor]&&t.schemas[e.ancestor].schema,path:e.path}},i.assert=function(t,n,r,i,o,a){t||e(!1,`"${s.label(i._flags,o,a)}" contains link reference "${r.display}" ${n}`)},XJ}function aX(){if(tX)return eX;tX=1;const e=rW,t=OJ(),n=$W(),r={numberRx:/^\s*[+-]?(?:(?:\d+(?:\.\d*)?)|(?:\.\d+))(?:e([+-]?\d+))?\s*$/i,precisionRx:/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/,exponentialPartRegex:/[eE][+-]?\d+$/,leadingSignAndZerosRegex:/^[+-]?(0*)?/,dotRegex:/\./,trailingZerosRegex:/0+$/,decimalPlaces(e){const t=""+e,n=t.indexOf("."),r=t.indexOf("e");return(0>n?0:(0>r?t.length:r)-n-1)+(0>r?0:Math.max(0,-parseInt(t.slice(r+1))))}};return eX=t.extend({type:"number",flags:{unsafe:{default:!1}},coerce:{from:"string",method(e,{schema:t,error:n}){if(!e.match(r.numberRx))return;e=e.trim();const s={value:parseFloat(e)};if(0===s.value&&(s.value=0),!t._flags.unsafe)if(e.match(/e/i)){if(r.extractSignificantDigits(e)!==r.extractSignificantDigits(s.value+""))return s.errors=n("number.unsafe"),s}else{const t=""+s.value;if(t.match(/e/i))return s;if(t!==r.normalizeDecimal(e))return s.errors=n("number.unsafe"),s}return s}},validate(e,{schema:t,error:r,prefs:s}){if(e===1/0||e===-1/0)return{value:e,errors:r("number.infinity")};if(!n.isNumber(e))return{value:e,errors:r("number.base")};const i={value:e};if(s.convert){const e=t.$_getRule("precision");if(e){const t=Math.pow(10,e.args.limit);i.value=Math.round(i.value*t)/t}}return 0===i.value&&(i.value=0),t._flags.unsafe||Number.MAX_SAFE_INTEGER>=e&&e>=Number.MIN_SAFE_INTEGER||(i.errors=r("number.unsafe")),i},rules:{compare:{method:!1,validate:(e,t,{limit:r},{name:s,operator:i,args:o})=>n.compare(e,r,i)?e:t.error("number."+s,{limit:o.limit,value:e}),args:[{name:"limit",ref:!0,assert:n.isNumber,message:"must be a number"}]},greater:{method(e){return this.$_addRule({name:"greater",method:"compare",args:{limit:e},operator:">"})}},integer:{method(){return this.$_addRule("integer")},validate:(e,t)=>Math.trunc(e)-e==0?e:t.error("number.integer")},less:{method(e){return this.$_addRule({name:"less",method:"compare",args:{limit:e},operator:"<"})}},max:{method(e){return this.$_addRule({name:"max",method:"compare",args:{limit:e},operator:"<="})}},min:{method(e){return this.$_addRule({name:"min",method:"compare",args:{limit:e},operator:">="})}},multiple:{method(e){const t="number"==typeof e?r.decimalPlaces(e):null;return this.$_addRule({name:"multiple",args:{base:e,baseDecimalPlace:t,pfactor:Math.pow(10,t)}})},validate:(e,t,{base:n,baseDecimalPlace:s,pfactor:i},o)=>r.decimalPlaces(e)>s?t.error("number.multiple",{multiple:o.args.base,value:e}):Math.round(i*e)%Math.round(i*n)==0?e:t.error("number.multiple",{multiple:o.args.base,value:e}),args:[{name:"base",ref:!0,assert:e=>"number"==typeof e&&isFinite(e)&&e>0,message:"must be a positive number"},"baseDecimalPlace","pfactor"],multi:!0},negative:{method(){return this.sign("negative")}},port:{method(){return this.$_addRule("port")},validate:(e,t)=>!Number.isSafeInteger(e)||0>e||e>65535?t.error("number.port"):e},positive:{method(){return this.sign("positive")}},precision:{method(t){return e(Number.isSafeInteger(t),"limit must be an integer"),this.$_addRule({name:"precision",args:{limit:t}})},validate(e,t,{limit:n}){const s=(""+e).match(r.precisionRx);return Math.max((s[1]?s[1].length:0)-(s[2]?parseInt(s[2],10):0),0)>n?t.error("number.precision",{limit:n,value:e}):e},convert:!0},sign:{method(t){return e(["negative","positive"].includes(t),"Invalid sign",t),this.$_addRule({name:"sign",args:{sign:t}})},validate:(e,t,{sign:n})=>"negative"===n&&0>e||"positive"===n&&e>0?e:t.error("number."+n)},unsafe:{method(t=!0){return e("boolean"==typeof t,"enabled must be a boolean"),this.$_setFlag("unsafe",t)}}},cast:{string:{from:e=>"number"==typeof e,to:(e,t)=>""+e}},messages:{"number.base":"{{#label}} must be a number","number.greater":"{{#label}} must be greater than {{#limit}}","number.infinity":"{{#label}} cannot be infinity","number.integer":"{{#label}} must be an integer","number.less":"{{#label}} must be less than {{#limit}}","number.max":"{{#label}} must be less than or equal to {{#limit}}","number.min":"{{#label}} must be greater than or equal to {{#limit}}","number.multiple":"{{#label}} must be a multiple of {{#multiple}}","number.negative":"{{#label}} must be a negative number","number.port":"{{#label}} must be a valid port","number.positive":"{{#label}} must be a positive number","number.precision":"{{#label}} must have no more than {{#limit}} decimal places","number.unsafe":"{{#label}} must be a safe number"}}),r.extractSignificantDigits=function(e){return e.replace(r.exponentialPartRegex,"").replace(r.dotRegex,"").replace(r.trailingZerosRegex,"").replace(r.leadingSignAndZerosRegex,"")},r.normalizeDecimal=function(e){return(e=e.replace(/^\+/,"").replace(/\.0*$/,"").replace(/^(-?)\.([^\.]*)$/,"$10.$2").replace(/^(-?)0+([0-9])/,"$1$2")).includes(".")&&e.endsWith("0")&&(e=e.replace(/0+$/,"")),"-0"===e?"0":e},eX}function cX(){if(rX)return nX;rX=1;const e=sX();return nX=e.extend({type:"object",cast:{map:{from:e=>e&&"object"==typeof e,to:(e,t)=>new Map(Object.entries(e))}}})}HJ.Sorter=class{constructor(){this._items=[],this.nodes=[]}add(e,t){const n=[].concat((t=t||{}).before||[]),r=[].concat(t.after||[]),s=t.group||"?",i=t.sort||0;VJ(!n.includes(s),"Item cannot come before itself: "+s),VJ(!n.includes("?"),"Item cannot come before unassociated items"),VJ(!r.includes(s),"Item cannot come after itself: "+s),VJ(!r.includes("?"),"Item cannot come after unassociated items"),Array.isArray(e)||(e=[e]);for(const t of e)this._items.push({seq:this._items.length,sort:i,before:n,after:r,group:s,node:t});if(!t.manual){const e=this._sort();VJ(e,"item","?"!==s?"added into group "+s:"","created a dependencies error")}return this.nodes}merge(e){Array.isArray(e)||(e=[e]);for(const t of e)if(t)for(const e of t._items)this._items.push(Object.assign({},e));this._items.sort(YJ.mergeSort);for(let e=0;this._items.length>e;++e)this._items[e].seq=e;const t=this._sort();return VJ(t,"merge created a dependencies error"),this.nodes}sort(){const e=this._sort();return VJ(e,"sort created a dependencies error"),this.nodes}_sort(){const e={},t=Object.create(null),n=Object.create(null);for(const r of this._items){const s=r.seq,i=r.group;n[i]=n[i]||[],n[i].push(s),e[s]=r.before;for(const e of r.after)t[e]=t[e]||[],t[e].push(s)}for(const t in e){const r=[];for(const s in e[t]){const i=e[t][s];n[i]=n[i]||[],r.push(...n[i])}e[t]=r}for(const r in t)if(n[r])for(const s of n[r])e[s].push(...t[r]);const r={};for(const t in e){const n=e[t];for(const e of n)r[e]=r[e]||[],r[e].push(t)}const s={},i=[];for(let e=0;this._items.length>e;++e){let t=e;if(r[e]){t=null;for(let e=0;this._items.length>e;++e){if(!0===s[e])continue;r[e]||(r[e]=[]);const n=r[e].length;let i=0;for(let t=0;n>t;++t)s[r[e][t]]&&++i;if(i===n){t=e;break}}}null!==t&&(s[t]=!0,i.push(t))}if(i.length!==this._items.length)return!1;const o={};for(const e of this._items)o[e.seq]=e;this._items=[],this.nodes=[];for(const e of i){const t=o[e];this.nodes.push(t.node),this._items.push(t)}return!0}},YJ.mergeSort=(e,t)=>e.sort===t.sort?0:t.sort>e.sort?-1:1;var lX={},uX={};!function(e){e.codes={EMPTY_STRING:"Address must be a non-empty string",FORBIDDEN_UNICODE:"Address contains forbidden Unicode characters",MULTIPLE_AT_CHAR:"Address cannot contain more than one @ character",MISSING_AT_CHAR:"Address must contain one @ character",EMPTY_LOCAL:"Address local part cannot be empty",ADDRESS_TOO_LONG:"Address too long",LOCAL_TOO_LONG:"Address local part too long",EMPTY_LOCAL_SEGMENT:"Address local part contains empty dot-separated segment",INVALID_LOCAL_CHARS:"Address local part contains invalid character",DOMAIN_NON_EMPTY_STRING:"Domain must be a non-empty string",DOMAIN_TOO_LONG:"Domain too long",DOMAIN_INVALID_UNICODE_CHARS:"Domain contains forbidden Unicode characters",DOMAIN_INVALID_CHARS:"Domain contains invalid character",DOMAIN_INVALID_TLDS_CHARS:"Domain contains invalid tld character",DOMAIN_SEGMENTS_COUNT:"Domain lacks the minimum required number of segments",DOMAIN_SEGMENTS_COUNT_MAX:"Domain contains too many segments",DOMAIN_FORBIDDEN_TLDS:"Domain uses forbidden TLD",DOMAIN_EMPTY_SEGMENT:"Domain contains empty dot-separated segment",DOMAIN_LONG_SEGMENT:"Domain contains dot-separated segment that is too long"},e.code=function(t){return{code:t,error:e.codes[t]}}}(uX),function(e){const t=uX,n={minDomainSegments:2,nonAsciiRx:/[^\x00-\x7f]/,domainControlRx:/[\x00-\x20@\:\/\\#!\$&\'\(\)\*\+,;=\?]/,tldSegmentRx:/^[a-zA-Z](?:[a-zA-Z0-9\-]*[a-zA-Z0-9])?$/,domainSegmentRx:/^[a-zA-Z0-9](?:[a-zA-Z0-9\-]*[a-zA-Z0-9])?$/,URL:h.URL||URL};e.analyze=function(e,r={}){if(!e)return t.code("DOMAIN_NON_EMPTY_STRING");if("string"!=typeof e)throw Error("Invalid input: domain must be a string");if(e.length>256)return t.code("DOMAIN_TOO_LONG");if(n.nonAsciiRx.test(e)){if(!1===r.allowUnicode)return t.code("DOMAIN_INVALID_UNICODE_CHARS");e=e.normalize("NFC")}if(n.domainControlRx.test(e))return t.code("DOMAIN_INVALID_CHARS");e=n.punycode(e),r.allowFullyQualified&&"."===e[e.length-1]&&(e=e.slice(0,-1));const s=r.minDomainSegments||n.minDomainSegments,i=e.split(".");if(s>i.length)return t.code("DOMAIN_SEGMENTS_COUNT");if(r.maxDomainSegments&&i.length>r.maxDomainSegments)return t.code("DOMAIN_SEGMENTS_COUNT_MAX");const o=r.tlds;if(o){const e=i[i.length-1].toLowerCase();if(o.deny&&o.deny.has(e)||o.allow&&!o.allow.has(e))return t.code("DOMAIN_FORBIDDEN_TLDS")}for(let e=0;i.length>e;++e){const r=i[e];if(!r.length)return t.code("DOMAIN_EMPTY_SEGMENT");if(r.length>63)return t.code("DOMAIN_LONG_SEGMENT");if(i.length-1>e){if(!n.domainSegmentRx.test(r))return t.code("DOMAIN_INVALID_CHARS")}else if(!n.tldSegmentRx.test(r))return t.code("DOMAIN_INVALID_TLDS_CHARS")}return null},e.isValid=function(t,n){return!e.analyze(t,n)},n.punycode=function(e){e.includes("%")&&(e=e.replace(/%/g,"%25"));try{return new n.URL("http://"+e).host}catch(t){return e}}}(lX);var pX={};const dX=lX,hX=uX,fX={nonAsciiRx:/[^\x00-\x7f]/,encoder:new(l.TextEncoder||TextEncoder)};pX.analyze=function(e,t){return fX.email(e,t)},pX.isValid=function(e,t){return!fX.email(e,t)},fX.email=function(e,t={}){if("string"!=typeof e)throw Error("Invalid input: email must be a string");if(!e)return hX.code("EMPTY_STRING");const n=!fX.nonAsciiRx.test(e);if(!n){if(!1===t.allowUnicode)return hX.code("FORBIDDEN_UNICODE");e=e.normalize("NFC")}const r=e.split("@");if(2!==r.length)return hX.code(r.length>2?"MULTIPLE_AT_CHAR":"MISSING_AT_CHAR");const[s,i]=r;if(!s)return hX.code("EMPTY_LOCAL");if(!t.ignoreLength){if(e.length>254)return hX.code("ADDRESS_TOO_LONG");if(fX.encoder.encode(s).length>64)return hX.code("LOCAL_TOO_LONG")}return fX.local(s,n)||dX.analyze(i,t)},fX.local=function(e,t){const n=e.split(".");for(const e of n){if(!e.length)return hX.code("EMPTY_LOCAL_SEGMENT");if(t){if(!fX.atextRx.test(e))return hX.code("INVALID_LOCAL_CHARS")}else for(const t of e){if(fX.atextRx.test(t))continue;const e=fX.binary(t);if(!fX.atomRx.test(e))return hX.code("INVALID_LOCAL_CHARS")}}},fX.binary=function(e){return Array.from(fX.encoder.encode(e)).map((e=>String.fromCharCode(e))).join("")},fX.atextRx=/^[\w!#\$%&'\*\+\-/=\?\^`\{\|\}~]+$/,fX.atomRx=RegExp("(?:[\\xc2-\\xdf][\\x80-\\xbf])|(?:\\xe0[\\xa0-\\xbf][\\x80-\\xbf])|(?:[\\xe1-\\xec][\\x80-\\xbf]{2})|(?:\\xed[\\x80-\\x9f][\\x80-\\xbf])|(?:[\\xee-\\xef][\\x80-\\xbf]{2})|(?:\\xf0[\\x90-\\xbf][\\x80-\\xbf]{2})|(?:[\\xf1-\\xf3][\\x80-\\xbf]{3})|(?:\\xf4[\\x80-\\x8f][\\x80-\\xbf]{2})");var mX={},gX={exports:{}},yX=function(...e){try{return JSON.stringify(...e)}catch(e){return"[Cannot display object: "+e.message+"]"}};!function(e,t){const n=yX;gX.exports=class extends Error{constructor(e){super(e.filter((e=>""!==e)).map((e=>"string"==typeof e?e:e instanceof Error?e.message:n(e))).join(" ")||"Unknown error"),"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,t.assert)}}}(0,gX.exports);const vX=gX.exports;var bX=function(e,...t){if(!e){if(1===t.length&&t[0]instanceof Error)throw t[0];throw new vX(t)}},EX={};const _X=bX,AX=function(e){return e.replace(/[\^\$\.\*\+\-\?\=\!\:\|\\\/\(\)\[\]\{\}\,]/g,"\\$&")},SX={generate:function(){const e={},t="\\dA-Fa-f",n="["+t+"]",r="\\w-\\.~",s="!\\$&'\\(\\)\\*\\+,;=",i="%"+t,o=r+i+s+":@",a="["+o+"]",c="(?:0{0,2}\\d|0?[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])";e.ipv4address="(?:"+c+"\\.){3}"+c;const l=n+"{1,4}",u="(?:"+l+":"+l+"|"+e.ipv4address+")",p="(?:"+l+":){6}"+u,d="::(?:"+l+":){5}"+u,h="(?:"+l+")?::(?:"+l+":){4}"+u,f="(?:(?:"+l+":){0,1}"+l+")?::(?:"+l+":){3}"+u,m="(?:(?:"+l+":){0,2}"+l+")?::(?:"+l+":){2}"+u,g="(?:(?:"+l+":){0,3}"+l+")?::"+l+":"+u,y="(?:(?:"+l+":){0,4}"+l+")?::"+u,v="(?:(?:"+l+":){0,5}"+l+")?::"+l,b="(?:(?:"+l+":){0,6}"+l+")?::";e.ipv4Cidr="(?:\\d|[1-2]\\d|3[0-2])",e.ipv6Cidr="(?:0{0,2}\\d|0?[1-9]\\d|1[01]\\d|12[0-8])",e.ipv6address="(?:"+p+"|"+d+"|"+h+"|"+f+"|"+m+"|"+g+"|"+y+"|"+v+"|"+b+")",e.ipvFuture="v"+n+"+\\.["+r+s+":]+",e.scheme="[a-zA-Z][a-zA-Z\\d+-\\.]*",e.schemeRegex=RegExp(e.scheme);const E="["+r+i+s+":]*",_="(?:\\[(?:"+e.ipv6address+"|"+e.ipvFuture+")\\]|"+e.ipv4address+"|["+r+i+s+"]{1,255})",A="(?:"+E+"@)?"+_+"(?::\\d*)?",S="(?:"+E+"@)?("+_+")(?::\\d*)?",T=a+"*",w=a+"+",x="(?:\\/"+T+")*",k="\\/(?:"+w+x+")?",C=w+x,I="["+r+i+s+"@]+"+x;return e.hierPart="(?:(?:\\/\\/"+A+x+")|"+k+"|"+C+"|(?:\\/\\/\\/"+T+x+"))",e.hierPartCapture="(?:(?:\\/\\/"+S+x+")|"+k+"|"+C+")",e.relativeRef="(?:(?:\\/\\/"+A+x+")|"+k+"|"+I+"|)",e.relativeRefCapture="(?:(?:\\/\\/"+S+x+")|"+k+"|"+I+"|)",e.query="["+o+"\\/\\?]*(?=#|$)",e.queryWithSquareBrackets="["+o+"\\[\\]\\/\\?]*(?=#|$)",e.fragment="["+o+"\\/\\?]*",e}};SX.rfc3986=SX.generate(),EX.ip={v4Cidr:SX.rfc3986.ipv4Cidr,v6Cidr:SX.rfc3986.ipv6Cidr,ipv4:SX.rfc3986.ipv4address,ipv6:SX.rfc3986.ipv6address,ipvfuture:SX.rfc3986.ipvFuture},SX.createRegex=function(e){const t=SX.rfc3986,n="(?:\\?"+(e.allowQuerySquareBrackets?t.queryWithSquareBrackets:t.query)+")?(?:#"+t.fragment+")?",r=e.domain?t.relativeRefCapture:t.relativeRef;if(e.relativeOnly)return SX.wrap(r+n);let s="";if(e.scheme){_X(e.scheme instanceof RegExp||"string"==typeof e.scheme||Array.isArray(e.scheme),"scheme must be a RegExp, String, or Array");const n=[].concat(e.scheme);_X(n.length>=1,"scheme must have at least 1 scheme specified");const r=[];for(let e=0;n.length>e;++e){const s=n[e];_X(s instanceof RegExp||"string"==typeof s,"scheme at position "+e+" must be a RegExp or String"),s instanceof RegExp?r.push(""+s.source):(_X(t.schemeRegex.test(s),"scheme at position "+e+" must be a valid scheme"),r.push(AX(s)))}s=r.join("|")}const i="(?:"+(s?"(?:"+s+")":t.scheme)+":"+(e.domain?t.hierPartCapture:t.hierPart)+")";return SX.wrap((e.allowRelative?"(?:"+i+"|"+r+")":i)+n,s)},SX.wrap=function(e,t){return{raw:e="(?=.)(?!https?:/(?:$|[^/]))(?!https?:///)(?!https?:[^/])"+e,regex:RegExp(`^${e}$`),scheme:t}},SX.uriRegex=SX.createRegex({}),EX.regex=function(e={}){return e.scheme||e.allowRelative||e.relativeOnly||e.allowQuerySquareBrackets||e.domain?SX.createRegex(e):SX.uriRegex};const TX=bX,wX=EX;mX.regex=function(e={}){TX(void 0===e.cidr||"string"==typeof e.cidr,"options.cidr must be a string");const t=e.cidr?e.cidr.toLowerCase():"optional";TX(["required","optional","forbidden"].includes(t),"options.cidr must be one of required, optional, forbidden"),TX(void 0===e.version||"string"==typeof e.version||Array.isArray(e.version),"options.version must be a string or an array of string");let n=e.version||["ipv4","ipv6","ipvfuture"];Array.isArray(n)||(n=[n]),TX(n.length>=1,"options.version must have at least 1 version specified");for(let e=0;n.length>e;++e)TX("string"==typeof n[e],"options.version must only contain strings"),n[e]=n[e].toLowerCase(),TX(["ipv4","ipv6","ipvfuture"].includes(n[e]),"options.version contains unknown version "+n[e]+" - must be one of ipv4, ipv6, ipvfuture");n=Array.from(new Set(n));const r=`(?:${n.map((e=>{if("forbidden"===t)return wX.ip[e];const n="\\/"+("ipv4"===e?wX.ip.v4Cidr:wX.ip.v6Cidr);return"required"===t?`${wX.ip[e]}${n}`:`${wX.ip[e]}(?:${n})?`})).join("|")})`,s=RegExp(`^${r}$`);return{cidr:t,versions:n,regex:s,raw:r}};var xX,kX,CX,IX,RX,OX,NX,DX,PX=function(e){return e.replace(/[\^\$\.\*\+\-\?\=\!\:\|\\\/\(\)\[\]\{\}\,]/g,"\\$&")},LX=new Set(["AAA","AARP","ABB","ABBOTT","ABBVIE","ABC","ABLE","ABOGADO","ABUDHABI","AC","ACADEMY","ACCENTURE","ACCOUNTANT","ACCOUNTANTS","ACO","ACTOR","AD","ADS","ADULT","AE","AEG","AERO","AETNA","AF","AFL","AFRICA","AG","AGAKHAN","AGENCY","AI","AIG","AIRBUS","AIRFORCE","AIRTEL","AKDN","AL","ALIBABA","ALIPAY","ALLFINANZ","ALLSTATE","ALLY","ALSACE","ALSTOM","AM","AMAZON","AMERICANEXPRESS","AMERICANFAMILY","AMEX","AMFAM","AMICA","AMSTERDAM","ANALYTICS","ANDROID","ANQUAN","ANZ","AO","AOL","APARTMENTS","APP","APPLE","AQ","AQUARELLE","AR","ARAB","ARAMCO","ARCHI","ARMY","ARPA","ART","ARTE","AS","ASDA","ASIA","ASSOCIATES","AT","ATHLETA","ATTORNEY","AU","AUCTION","AUDI","AUDIBLE","AUDIO","AUSPOST","AUTHOR","AUTO","AUTOS","AVIANCA","AW","AWS","AX","AXA","AZ","AZURE","BA","BABY","BAIDU","BANAMEX","BAND","BANK","BAR","BARCELONA","BARCLAYCARD","BARCLAYS","BAREFOOT","BARGAINS","BASEBALL","BASKETBALL","BAUHAUS","BAYERN","BB","BBC","BBT","BBVA","BCG","BCN","BD","BE","BEATS","BEAUTY","BEER","BENTLEY","BERLIN","BEST","BESTBUY","BET","BF","BG","BH","BHARTI","BI","BIBLE","BID","BIKE","BING","BINGO","BIO","BIZ","BJ","BLACK","BLACKFRIDAY","BLOCKBUSTER","BLOG","BLOOMBERG","BLUE","BM","BMS","BMW","BN","BNPPARIBAS","BO","BOATS","BOEHRINGER","BOFA","BOM","BOND","BOO","BOOK","BOOKING","BOSCH","BOSTIK","BOSTON","BOT","BOUTIQUE","BOX","BR","BRADESCO","BRIDGESTONE","BROADWAY","BROKER","BROTHER","BRUSSELS","BS","BT","BUILD","BUILDERS","BUSINESS","BUY","BUZZ","BV","BW","BY","BZ","BZH","CA","CAB","CAFE","CAL","CALL","CALVINKLEIN","CAM","CAMERA","CAMP","CANON","CAPETOWN","CAPITAL","CAPITALONE","CAR","CARAVAN","CARDS","CARE","CAREER","CAREERS","CARS","CASA","CASE","CASH","CASINO","CAT","CATERING","CATHOLIC","CBA","CBN","CBRE","CC","CD","CENTER","CEO","CERN","CF","CFA","CFD","CG","CH","CHANEL","CHANNEL","CHARITY","CHASE","CHAT","CHEAP","CHINTAI","CHRISTMAS","CHROME","CHURCH","CI","CIPRIANI","CIRCLE","CISCO","CITADEL","CITI","CITIC","CITY","CK","CL","CLAIMS","CLEANING","CLICK","CLINIC","CLINIQUE","CLOTHING","CLOUD","CLUB","CLUBMED","CM","CN","CO","COACH","CODES","COFFEE","COLLEGE","COLOGNE","COM","COMCAST","COMMBANK","COMMUNITY","COMPANY","COMPARE","COMPUTER","COMSEC","CONDOS","CONSTRUCTION","CONSULTING","CONTACT","CONTRACTORS","COOKING","COOL","COOP","CORSICA","COUNTRY","COUPON","COUPONS","COURSES","CPA","CR","CREDIT","CREDITCARD","CREDITUNION","CRICKET","CROWN","CRS","CRUISE","CRUISES","CU","CUISINELLA","CV","CW","CX","CY","CYMRU","CYOU","CZ","DABUR","DAD","DANCE","DATA","DATE","DATING","DATSUN","DAY","DCLK","DDS","DE","DEAL","DEALER","DEALS","DEGREE","DELIVERY","DELL","DELOITTE","DELTA","DEMOCRAT","DENTAL","DENTIST","DESI","DESIGN","DEV","DHL","DIAMONDS","DIET","DIGITAL","DIRECT","DIRECTORY","DISCOUNT","DISCOVER","DISH","DIY","DJ","DK","DM","DNP","DO","DOCS","DOCTOR","DOG","DOMAINS","DOT","DOWNLOAD","DRIVE","DTV","DUBAI","DUNLOP","DUPONT","DURBAN","DVAG","DVR","DZ","EARTH","EAT","EC","ECO","EDEKA","EDU","EDUCATION","EE","EG","EMAIL","EMERCK","ENERGY","ENGINEER","ENGINEERING","ENTERPRISES","EPSON","EQUIPMENT","ER","ERICSSON","ERNI","ES","ESQ","ESTATE","ET","EU","EUROVISION","EUS","EVENTS","EXCHANGE","EXPERT","EXPOSED","EXPRESS","EXTRASPACE","FAGE","FAIL","FAIRWINDS","FAITH","FAMILY","FAN","FANS","FARM","FARMERS","FASHION","FAST","FEDEX","FEEDBACK","FERRARI","FERRERO","FI","FIDELITY","FIDO","FILM","FINAL","FINANCE","FINANCIAL","FIRE","FIRESTONE","FIRMDALE","FISH","FISHING","FIT","FITNESS","FJ","FK","FLICKR","FLIGHTS","FLIR","FLORIST","FLOWERS","FLY","FM","FO","FOO","FOOD","FOOTBALL","FORD","FOREX","FORSALE","FORUM","FOUNDATION","FOX","FR","FREE","FRESENIUS","FRL","FROGANS","FRONTIER","FTR","FUJITSU","FUN","FUND","FURNITURE","FUTBOL","FYI","GA","GAL","GALLERY","GALLO","GALLUP","GAME","GAMES","GAP","GARDEN","GAY","GB","GBIZ","GD","GDN","GE","GEA","GENT","GENTING","GEORGE","GF","GG","GGEE","GH","GI","GIFT","GIFTS","GIVES","GIVING","GL","GLASS","GLE","GLOBAL","GLOBO","GM","GMAIL","GMBH","GMO","GMX","GN","GODADDY","GOLD","GOLDPOINT","GOLF","GOO","GOODYEAR","GOOG","GOOGLE","GOP","GOT","GOV","GP","GQ","GR","GRAINGER","GRAPHICS","GRATIS","GREEN","GRIPE","GROCERY","GROUP","GS","GT","GU","GUARDIAN","GUCCI","GUGE","GUIDE","GUITARS","GURU","GW","GY","HAIR","HAMBURG","HANGOUT","HAUS","HBO","HDFC","HDFCBANK","HEALTH","HEALTHCARE","HELP","HELSINKI","HERE","HERMES","HIPHOP","HISAMITSU","HITACHI","HIV","HK","HKT","HM","HN","HOCKEY","HOLDINGS","HOLIDAY","HOMEDEPOT","HOMEGOODS","HOMES","HOMESENSE","HONDA","HORSE","HOSPITAL","HOST","HOSTING","HOT","HOTELS","HOTMAIL","HOUSE","HOW","HR","HSBC","HT","HU","HUGHES","HYATT","HYUNDAI","IBM","ICBC","ICE","ICU","ID","IE","IEEE","IFM","IKANO","IL","IM","IMAMAT","IMDB","IMMO","IMMOBILIEN","IN","INC","INDUSTRIES","INFINITI","INFO","ING","INK","INSTITUTE","INSURANCE","INSURE","INT","INTERNATIONAL","INTUIT","INVESTMENTS","IO","IPIRANGA","IQ","IR","IRISH","IS","ISMAILI","IST","ISTANBUL","IT","ITAU","ITV","JAGUAR","JAVA","JCB","JE","JEEP","JETZT","JEWELRY","JIO","JLL","JM","JMP","JNJ","JO","JOBS","JOBURG","JOT","JOY","JP","JPMORGAN","JPRS","JUEGOS","JUNIPER","KAUFEN","KDDI","KE","KERRYHOTELS","KERRYLOGISTICS","KERRYPROPERTIES","KFH","KG","KH","KI","KIA","KIDS","KIM","KINDLE","KITCHEN","KIWI","KM","KN","KOELN","KOMATSU","KOSHER","KP","KPMG","KPN","KR","KRD","KRED","KUOKGROUP","KW","KY","KYOTO","KZ","LA","LACAIXA","LAMBORGHINI","LAMER","LANCASTER","LAND","LANDROVER","LANXESS","LASALLE","LAT","LATINO","LATROBE","LAW","LAWYER","LB","LC","LDS","LEASE","LECLERC","LEFRAK","LEGAL","LEGO","LEXUS","LGBT","LI","LIDL","LIFE","LIFEINSURANCE","LIFESTYLE","LIGHTING","LIKE","LILLY","LIMITED","LIMO","LINCOLN","LINK","LIPSY","LIVE","LIVING","LK","LLC","LLP","LOAN","LOANS","LOCKER","LOCUS","LOL","LONDON","LOTTE","LOTTO","LOVE","LPL","LPLFINANCIAL","LR","LS","LT","LTD","LTDA","LU","LUNDBECK","LUXE","LUXURY","LV","LY","MA","MADRID","MAIF","MAISON","MAKEUP","MAN","MANAGEMENT","MANGO","MAP","MARKET","MARKETING","MARKETS","MARRIOTT","MARSHALLS","MATTEL","MBA","MC","MCKINSEY","MD","ME","MED","MEDIA","MEET","MELBOURNE","MEME","MEMORIAL","MEN","MENU","MERCKMSD","MG","MH","MIAMI","MICROSOFT","MIL","MINI","MINT","MIT","MITSUBISHI","MK","ML","MLB","MLS","MM","MMA","MN","MO","MOBI","MOBILE","MODA","MOE","MOI","MOM","MONASH","MONEY","MONSTER","MORMON","MORTGAGE","MOSCOW","MOTO","MOTORCYCLES","MOV","MOVIE","MP","MQ","MR","MS","MSD","MT","MTN","MTR","MU","MUSEUM","MUSIC","MV","MW","MX","MY","MZ","NA","NAB","NAGOYA","NAME","NATURA","NAVY","NBA","NC","NE","NEC","NET","NETBANK","NETFLIX","NETWORK","NEUSTAR","NEW","NEWS","NEXT","NEXTDIRECT","NEXUS","NF","NFL","NG","NGO","NHK","NI","NICO","NIKE","NIKON","NINJA","NISSAN","NISSAY","NL","NO","NOKIA","NORTON","NOW","NOWRUZ","NOWTV","NP","NR","NRA","NRW","NTT","NU","NYC","NZ","OBI","OBSERVER","OFFICE","OKINAWA","OLAYAN","OLAYANGROUP","OLLO","OM","OMEGA","ONE","ONG","ONL","ONLINE","OOO","OPEN","ORACLE","ORANGE","ORG","ORGANIC","ORIGINS","OSAKA","OTSUKA","OTT","OVH","PA","PAGE","PANASONIC","PARIS","PARS","PARTNERS","PARTS","PARTY","PAY","PCCW","PE","PET","PF","PFIZER","PG","PH","PHARMACY","PHD","PHILIPS","PHONE","PHOTO","PHOTOGRAPHY","PHOTOS","PHYSIO","PICS","PICTET","PICTURES","PID","PIN","PING","PINK","PIONEER","PIZZA","PK","PL","PLACE","PLAY","PLAYSTATION","PLUMBING","PLUS","PM","PN","PNC","POHL","POKER","POLITIE","PORN","POST","PR","PRAMERICA","PRAXI","PRESS","PRIME","PRO","PROD","PRODUCTIONS","PROF","PROGRESSIVE","PROMO","PROPERTIES","PROPERTY","PROTECTION","PRU","PRUDENTIAL","PS","PT","PUB","PW","PWC","PY","QA","QPON","QUEBEC","QUEST","RACING","RADIO","RE","READ","REALESTATE","REALTOR","REALTY","RECIPES","RED","REDSTONE","REDUMBRELLA","REHAB","REISE","REISEN","REIT","RELIANCE","REN","RENT","RENTALS","REPAIR","REPORT","REPUBLICAN","REST","RESTAURANT","REVIEW","REVIEWS","REXROTH","RICH","RICHARDLI","RICOH","RIL","RIO","RIP","RO","ROCKS","RODEO","ROGERS","ROOM","RS","RSVP","RU","RUGBY","RUHR","RUN","RW","RWE","RYUKYU","SA","SAARLAND","SAFE","SAFETY","SAKURA","SALE","SALON","SAMSCLUB","SAMSUNG","SANDVIK","SANDVIKCOROMANT","SANOFI","SAP","SARL","SAS","SAVE","SAXO","SB","SBI","SBS","SC","SCB","SCHAEFFLER","SCHMIDT","SCHOLARSHIPS","SCHOOL","SCHULE","SCHWARZ","SCIENCE","SCOT","SD","SE","SEARCH","SEAT","SECURE","SECURITY","SEEK","SELECT","SENER","SERVICES","SEVEN","SEW","SEX","SEXY","SFR","SG","SH","SHANGRILA","SHARP","SHAW","SHELL","SHIA","SHIKSHA","SHOES","SHOP","SHOPPING","SHOUJI","SHOW","SI","SILK","SINA","SINGLES","SITE","SJ","SK","SKI","SKIN","SKY","SKYPE","SL","SLING","SM","SMART","SMILE","SN","SNCF","SO","SOCCER","SOCIAL","SOFTBANK","SOFTWARE","SOHU","SOLAR","SOLUTIONS","SONG","SONY","SOY","SPA","SPACE","SPORT","SPOT","SR","SRL","SS","ST","STADA","STAPLES","STAR","STATEBANK","STATEFARM","STC","STCGROUP","STOCKHOLM","STORAGE","STORE","STREAM","STUDIO","STUDY","STYLE","SU","SUCKS","SUPPLIES","SUPPLY","SUPPORT","SURF","SURGERY","SUZUKI","SV","SWATCH","SWISS","SX","SY","SYDNEY","SYSTEMS","SZ","TAB","TAIPEI","TALK","TAOBAO","TARGET","TATAMOTORS","TATAR","TATTOO","TAX","TAXI","TC","TCI","TD","TDK","TEAM","TECH","TECHNOLOGY","TEL","TEMASEK","TENNIS","TEVA","TF","TG","TH","THD","THEATER","THEATRE","TIAA","TICKETS","TIENDA","TIPS","TIRES","TIROL","TJ","TJMAXX","TJX","TK","TKMAXX","TL","TM","TMALL","TN","TO","TODAY","TOKYO","TOOLS","TOP","TORAY","TOSHIBA","TOTAL","TOURS","TOWN","TOYOTA","TOYS","TR","TRADE","TRADING","TRAINING","TRAVEL","TRAVELERS","TRAVELERSINSURANCE","TRUST","TRV","TT","TUBE","TUI","TUNES","TUSHU","TV","TVS","TW","TZ","UA","UBANK","UBS","UG","UK","UNICOM","UNIVERSITY","UNO","UOL","UPS","US","UY","UZ","VA","VACATIONS","VANA","VANGUARD","VC","VE","VEGAS","VENTURES","VERISIGN","VERSICHERUNG","VET","VG","VI","VIAJES","VIDEO","VIG","VIKING","VILLAS","VIN","VIP","VIRGIN","VISA","VISION","VIVA","VIVO","VLAANDEREN","VN","VODKA","VOLVO","VOTE","VOTING","VOTO","VOYAGE","VU","WALES","WALMART","WALTER","WANG","WANGGOU","WATCH","WATCHES","WEATHER","WEATHERCHANNEL","WEBCAM","WEBER","WEBSITE","WED","WEDDING","WEIBO","WEIR","WF","WHOSWHO","WIEN","WIKI","WILLIAMHILL","WIN","WINDOWS","WINE","WINNERS","WME","WOLTERSKLUWER","WOODSIDE","WORK","WORKS","WORLD","WOW","WS","WTC","WTF","XBOX","XEROX","XFINITY","XIHUAN","XIN","XN--11B4C3D","XN--1CK2E1B","XN--1QQW23A","XN--2SCRJ9C","XN--30RR7Y","XN--3BST00M","XN--3DS443G","XN--3E0B707E","XN--3HCRJ9C","XN--3PXU8K","XN--42C2D9A","XN--45BR5CYL","XN--45BRJ9C","XN--45Q11C","XN--4DBRK0CE","XN--4GBRIM","XN--54B7FTA0CC","XN--55QW42G","XN--55QX5D","XN--5SU34J936BGSG","XN--5TZM5G","XN--6FRZ82G","XN--6QQ986B3XL","XN--80ADXHKS","XN--80AO21A","XN--80AQECDR1A","XN--80ASEHDB","XN--80ASWG","XN--8Y0A063A","XN--90A3AC","XN--90AE","XN--90AIS","XN--9DBQ2A","XN--9ET52U","XN--9KRT00A","XN--B4W605FERD","XN--BCK1B9A5DRE4C","XN--C1AVG","XN--C2BR7G","XN--CCK2B3B","XN--CCKWCXETD","XN--CG4BKI","XN--CLCHC0EA0B2G2A9GCD","XN--CZR694B","XN--CZRS0T","XN--CZRU2D","XN--D1ACJ3B","XN--D1ALF","XN--E1A4C","XN--ECKVDTC9D","XN--EFVY88H","XN--FCT429K","XN--FHBEI","XN--FIQ228C5HS","XN--FIQ64B","XN--FIQS8S","XN--FIQZ9S","XN--FJQ720A","XN--FLW351E","XN--FPCRJ9C3D","XN--FZC2C9E2C","XN--FZYS8D69UVGM","XN--G2XX48C","XN--GCKR3F0F","XN--GECRJ9C","XN--GK3AT1E","XN--H2BREG3EVE","XN--H2BRJ9C","XN--H2BRJ9C8C","XN--HXT814E","XN--I1B6B1A6A2E","XN--IMR513N","XN--IO0A7I","XN--J1AEF","XN--J1AMH","XN--J6W193G","XN--JLQ480N2RG","XN--JVR189M","XN--KCRX77D1X4A","XN--KPRW13D","XN--KPRY57D","XN--KPUT3I","XN--L1ACC","XN--LGBBAT1AD8J","XN--MGB9AWBF","XN--MGBA3A3EJT","XN--MGBA3A4F16A","XN--MGBA7C0BBN0A","XN--MGBAAM7A8H","XN--MGBAB2BD","XN--MGBAH1A3HJKRD","XN--MGBAI9AZGQP6J","XN--MGBAYH7GPA","XN--MGBBH1A","XN--MGBBH1A71E","XN--MGBC0A9AZCG","XN--MGBCA7DZDO","XN--MGBCPQ6GPA1A","XN--MGBERP4A5D4AR","XN--MGBGU82A","XN--MGBI4ECEXP","XN--MGBPL2FH","XN--MGBT3DHD","XN--MGBTX2B","XN--MGBX4CD0AB","XN--MIX891F","XN--MK1BU44C","XN--MXTQ1M","XN--NGBC5AZD","XN--NGBE9E0A","XN--NGBRX","XN--NODE","XN--NQV7F","XN--NQV7FS00EMA","XN--NYQY26A","XN--O3CW4H","XN--OGBPF8FL","XN--OTU796D","XN--P1ACF","XN--P1AI","XN--PGBS0DH","XN--PSSY2U","XN--Q7CE6A","XN--Q9JYB4C","XN--QCKA1PMC","XN--QXA6A","XN--QXAM","XN--RHQV96G","XN--ROVU88B","XN--RVC1E0AM3E","XN--S9BRJ9C","XN--SES554G","XN--T60B56A","XN--TCKWE","XN--TIQ49XQYJ","XN--UNUP4Y","XN--VERMGENSBERATER-CTB","XN--VERMGENSBERATUNG-PWB","XN--VHQUV","XN--VUQ861B","XN--W4R85EL8FHU5DNRA","XN--W4RS40L","XN--WGBH1C","XN--WGBL6A","XN--XHQ521B","XN--XKC2AL3HYE2A","XN--XKC2DL3A5EE0H","XN--Y9A3AQ","XN--YFRO4I67O","XN--YGBI2AMMX","XN--ZFR164B","XXX","XYZ","YACHTS","YAHOO","YAMAXUN","YANDEX","YE","YODOBASHI","YOGA","YOKOHAMA","YOU","YOUTUBE","YT","YUN","ZA","ZAPPOS","ZARA","ZERO","ZIP","ZM","ZONE","ZUERICH","ZW"].map((e=>e.toLowerCase())));function MX(){if(kX)return xX;kX=1;const e=rW,t=lX,n=pX,r=mX,s=PX,i=LX,o=EX,a=OJ(),c=$W(),l={tlds:i instanceof Set&&{tlds:{allow:i,deny:null}},base64Regex:{true:{true:/^(?:[\w\-]{2}[\w\-]{2})*(?:[\w\-]{2}==|[\w\-]{3}=)?$/,false:/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/},false:{true:/^(?:[\w\-]{2}[\w\-]{2})*(?:[\w\-]{2}(==)?|[\w\-]{3}=?)?$/,false:/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}(==)?|[A-Za-z0-9+\/]{3}=?)?$/}},dataUriRegex:/^data:[\w+.-]+\/[\w+.-]+;((charset=[\w-]+|base64),)?(.*)$/,hexRegex:{withPrefix:/^0x[0-9a-f]+$/i,withOptionalPrefix:/^(?:0x)?[0-9a-f]+$/i,withoutPrefix:/^[0-9a-f]+$/i},ipRegex:r.regex({cidr:"forbidden"}).regex,isoDurationRegex:/^P(?!$)(\d+Y)?(\d+M)?(\d+W)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?$/,guidBrackets:{"{":"}","[":"]","(":")","":""},guidVersions:{uuidv1:"1",uuidv2:"2",uuidv3:"3",uuidv4:"4",uuidv5:"5",uuidv6:"6",uuidv7:"7",uuidv8:"8"},guidSeparators:new Set([void 0,!0,!1,"-",":"]),normalizationForms:["NFC","NFD","NFKC","NFKD"]};return xX=a.extend({type:"string",flags:{insensitive:{default:!1},truncate:{default:!1}},terms:{replacements:{init:null}},coerce:{from:"string",method(e,{schema:t,state:n,prefs:r}){const s=t.$_getRule("normalize");s&&(e=e.normalize(s.args.form));const i=t.$_getRule("case");i&&(e="upper"===i.args.direction?e.toLocaleUpperCase():e.toLocaleLowerCase());const o=t.$_getRule("trim");if(o&&o.args.enabled&&(e=e.trim()),t.$_terms.replacements)for(const n of t.$_terms.replacements)e=e.replace(n.pattern,n.replacement);const a=t.$_getRule("hex");if(a&&a.args.options.byteAligned&&e.length%2!=0&&(e="0"+e),t.$_getRule("isoDate")){const t=l.isoDate(e);t&&(e=t)}if(t._flags.truncate){const s=t.$_getRule("max");if(s){let i=s.args.limit;if(c.isResolvable(i)&&(i=i.resolve(e,n,r),!c.limit(i)))return{value:e,errors:t.$_createError("any.ref",i,{ref:s.args.limit,arg:"limit",reason:"must be a positive integer"},n,r)};e=e.slice(0,i)}}return{value:e}}},validate(e,{schema:t,error:n}){if("string"!=typeof e)return{value:e,errors:n("string.base")};if(""===e){const r=t.$_getRule("min");if(r&&0===r.args.limit)return;return{value:e,errors:n("string.empty")}}},rules:{alphanum:{method(){return this.$_addRule("alphanum")},validate:(e,t)=>/^[a-zA-Z0-9]+$/.test(e)?e:t.error("string.alphanum")},base64:{method(t={}){return c.assertOptions(t,["paddingRequired","urlSafe"]),t={urlSafe:!1,paddingRequired:!0,...t},e("boolean"==typeof t.paddingRequired,"paddingRequired must be boolean"),e("boolean"==typeof t.urlSafe,"urlSafe must be boolean"),this.$_addRule({name:"base64",args:{options:t}})},validate:(e,t,{options:n})=>l.base64Regex[n.paddingRequired][n.urlSafe].test(e)?e:t.error("string.base64")},case:{method(t){return e(["lower","upper"].includes(t),"Invalid case:",t),this.$_addRule({name:"case",args:{direction:t}})},validate:(e,t,{direction:n})=>"lower"===n&&e===e.toLocaleLowerCase()||"upper"===n&&e===e.toLocaleUpperCase()?e:t.error(`string.${n}case`),convert:!0},creditCard:{method(){return this.$_addRule("creditCard")},validate(e,t){let n=e.length,r=0,s=1;for(;n--;){const t=e.charAt(n)*s;r+=t-9*(t>9),s^=3}return r>0&&r%10==0?e:t.error("string.creditCard")}},dataUri:{method(t={}){return c.assertOptions(t,["paddingRequired"]),t={paddingRequired:!0,...t},e("boolean"==typeof t.paddingRequired,"paddingRequired must be boolean"),this.$_addRule({name:"dataUri",args:{options:t}})},validate(e,t,{options:n}){const r=e.match(l.dataUriRegex);if(r){if(!r[2])return e;if("base64"!==r[2])return e;if(l.base64Regex[n.paddingRequired].false.test(r[3]))return e}return t.error("string.dataUri")}},domain:{method(e){e&&c.assertOptions(e,["allowFullyQualified","allowUnicode","maxDomainSegments","minDomainSegments","tlds"]);const t=l.addressOptions(e);return this.$_addRule({name:"domain",args:{options:e},address:t})},validate:(e,n,r,{address:s})=>t.isValid(e,s)?e:n.error("string.domain")},email:{method(t={}){c.assertOptions(t,["allowFullyQualified","allowUnicode","ignoreLength","maxDomainSegments","minDomainSegments","multiple","separator","tlds"]),e(void 0===t.multiple||"boolean"==typeof t.multiple,"multiple option must be an boolean");const n=l.addressOptions(t),r=RegExp(`\\s*[${t.separator?s(t.separator):","}]\\s*`);return this.$_addRule({name:"email",args:{options:t},regex:r,address:n})},validate(e,t,{options:r},{regex:s,address:i}){const o=r.multiple?e.split(s):[e],a=[];for(const e of o)n.isValid(e,i)||a.push(e);return a.length?t.error("string.email",{value:e,invalids:a}):e}},guid:{alias:"uuid",method(t={}){c.assertOptions(t,["version","separator"]);let n="";if(t.version){const r=[].concat(t.version);e(r.length>=1,"version must have at least 1 valid version specified");const s=new Set;for(let t=0;r.length>t;++t){const i=r[t];e("string"==typeof i,"version at position "+t+" must be a string");const o=l.guidVersions[i.toLowerCase()];e(o,"version at position "+t+" must be one of "+Object.keys(l.guidVersions).join(", ")),e(!s.has(o),"version at position "+t+" must not be a duplicate"),n+=o,s.add(o)}}e(l.guidSeparators.has(t.separator),'separator must be one of true, false, "-", or ":"');const r=RegExp(`^([\\[{\\(]?)[0-9A-F]{8}(${void 0===t.separator?"[:-]?":!0===t.separator?"[:-]":!1===t.separator?"[]?":"\\"+t.separator})[0-9A-F]{4}\\2?[${n||"0-9A-F"}][0-9A-F]{3}\\2?[${n?"89AB":"0-9A-F"}][0-9A-F]{3}\\2?[0-9A-F]{12}([\\]}\\)]?)$`,"i");return this.$_addRule({name:"guid",args:{options:t},regex:r})},validate(e,t,n,{regex:r}){const s=r.exec(e);return s?l.guidBrackets[s[1]]!==s[s.length-1]?t.error("string.guid"):e:t.error("string.guid")}},hex:{method(t={}){return c.assertOptions(t,["byteAligned","prefix"]),t={byteAligned:!1,prefix:!1,...t},e("boolean"==typeof t.byteAligned,"byteAligned must be boolean"),e("boolean"==typeof t.prefix||"optional"===t.prefix,'prefix must be boolean or "optional"'),this.$_addRule({name:"hex",args:{options:t}})},validate:(e,t,{options:n})=>("optional"===n.prefix?l.hexRegex.withOptionalPrefix:!0===n.prefix?l.hexRegex.withPrefix:l.hexRegex.withoutPrefix).test(e)?n.byteAligned&&e.length%2!=0?t.error("string.hexAlign"):e:t.error("string.hex")},hostname:{method(){return this.$_addRule("hostname")},validate:(e,n)=>t.isValid(e,{minDomainSegments:1})||l.ipRegex.test(e)?e:n.error("string.hostname")},insensitive:{method(){return this.$_setFlag("insensitive",!0)}},ip:{method(e={}){c.assertOptions(e,["cidr","version"]);const{cidr:t,versions:n,regex:s}=r.regex(e);return this.$_addRule({name:"ip",args:{options:{cidr:t,version:e.version?n:void 0}},regex:s})},validate:(e,t,{options:n},{regex:r})=>r.test(e)?e:n.version?t.error("string.ipVersion",{value:e,cidr:n.cidr,version:n.version}):t.error("string.ip",{value:e,cidr:n.cidr})},isoDate:{method(){return this.$_addRule("isoDate")},validate:(e,{error:t})=>l.isoDate(e)?e:t("string.isoDate")},isoDuration:{method(){return this.$_addRule("isoDuration")},validate:(e,t)=>l.isoDurationRegex.test(e)?e:t.error("string.isoDuration")},length:{method(e,t){return l.length(this,"length",e,"=",t)},validate(e,t,{limit:n,encoding:r},{name:s,operator:i,args:o}){const a=r?Buffer&&Buffer.byteLength(e,r):e.length;return c.compare(a,n,i)?e:t.error("string."+s,{limit:o.limit,value:e,encoding:r})},args:[{name:"limit",ref:!0,assert:c.limit,message:"must be a positive integer"},"encoding"]},lowercase:{method(){return this.case("lower")}},max:{method(e,t){return l.length(this,"max",e,"<=",t)},args:["limit","encoding"]},min:{method(e,t){return l.length(this,"min",e,">=",t)},args:["limit","encoding"]},normalize:{method(t="NFC"){return e(l.normalizationForms.includes(t),"normalization form must be one of "+l.normalizationForms.join(", ")),this.$_addRule({name:"normalize",args:{form:t}})},validate:(e,{error:t},{form:n})=>e===e.normalize(n)?e:t("string.normalize",{value:e,form:n}),convert:!0},pattern:{alias:"regex",method(t,n={}){return e(t instanceof RegExp,"regex must be a RegExp"),e(!t.flags.includes("g")&&!t.flags.includes("y"),"regex should not use global or sticky mode"),"string"==typeof n&&(n={name:n}),c.assertOptions(n,["invert","name"]),this.$_addRule({name:"pattern",args:{regex:t,options:n},errorCode:"string.pattern"+(n.invert?".invert":"")+(n.name?".name":".base")})},validate:(e,t,{regex:n,options:r},{errorCode:s})=>n.test(e)^r.invert?e:t.error(s,{name:r.name,regex:n,value:e}),args:["regex","options"],multi:!0},replace:{method(t,n){"string"==typeof t&&(t=RegExp(s(t),"g")),e(t instanceof RegExp,"pattern must be a RegExp"),e("string"==typeof n,"replacement must be a String");const r=this.clone();return r.$_terms.replacements||(r.$_terms.replacements=[]),r.$_terms.replacements.push({pattern:t,replacement:n}),r}},token:{method(){return this.$_addRule("token")},validate:(e,t)=>/^\w+$/.test(e)?e:t.error("string.token")},trim:{method(t=!0){return e("boolean"==typeof t,"enabled must be a boolean"),this.$_addRule({name:"trim",args:{enabled:t}})},validate:(e,t,{enabled:n})=>n&&e!==e.trim()?t.error("string.trim"):e,convert:!0},truncate:{method(t=!0){return e("boolean"==typeof t,"enabled must be a boolean"),this.$_setFlag("truncate",t)}},uppercase:{method(){return this.case("upper")}},uri:{method(e={}){c.assertOptions(e,["allowRelative","allowQuerySquareBrackets","domain","relativeOnly","scheme","encodeUri"]),e.domain&&c.assertOptions(e.domain,["allowFullyQualified","allowUnicode","maxDomainSegments","minDomainSegments","tlds"]);const{regex:t,scheme:n}=o.regex(e),r=e.domain?l.addressOptions(e.domain):null;return this.$_addRule({name:"uri",args:{options:e},regex:t,domain:r,scheme:n})},validate(e,n,{options:r},{regex:s,domain:i,scheme:o}){if(["http:/","https:/"].includes(e))return n.error("string.uri");let a=s.exec(e);if(!a&&n.prefs.convert&&r.encodeUri){const t=encodeURI(e);a=s.exec(t),a&&(e=t)}if(a){const s=a[1]||a[2];return!i||r.allowRelative&&!s||t.isValid(s,i)?e:n.error("string.domain",{value:s})}return r.relativeOnly?n.error("string.uriRelativeOnly"):r.scheme?n.error("string.uriCustomScheme",{scheme:o,value:e}):n.error("string.uri")}}},manifest:{build(e,t){if(t.replacements)for(const{pattern:n,replacement:r}of t.replacements)e=e.replace(n,r);return e}},messages:{"string.alphanum":"{{#label}} must only contain alpha-numeric characters","string.base":"{{#label}} must be a string","string.base64":"{{#label}} must be a valid base64 string","string.creditCard":"{{#label}} must be a credit card","string.dataUri":"{{#label}} must be a valid dataUri string","string.domain":"{{#label}} must contain a valid domain name","string.email":"{{#label}} must be a valid email","string.empty":"{{#label}} is not allowed to be empty","string.guid":"{{#label}} must be a valid GUID","string.hex":"{{#label}} must only contain hexadecimal characters","string.hexAlign":"{{#label}} hex decoded representation must be byte aligned","string.hostname":"{{#label}} must be a valid hostname","string.ip":"{{#label}} must be a valid ip address with a {{#cidr}} CIDR","string.ipVersion":"{{#label}} must be a valid ip address of one of the following versions {{#version}} with a {{#cidr}} CIDR","string.isoDate":"{{#label}} must be in iso format","string.isoDuration":"{{#label}} must be a valid ISO 8601 duration","string.length":"{{#label}} length must be {{#limit}} characters long","string.lowercase":"{{#label}} must only contain lowercase characters","string.max":"{{#label}} length must be less than or equal to {{#limit}} characters long","string.min":"{{#label}} length must be at least {{#limit}} characters long","string.normalize":"{{#label}} must be unicode normalized in the {{#form}} form","string.token":"{{#label}} must only contain alpha-numeric and underscore characters","string.pattern.base":"{{#label}} with value {:[.]} fails to match the required pattern: {{#regex}}","string.pattern.name":"{{#label}} with value {:[.]} fails to match the {{#name}} pattern","string.pattern.invert.base":"{{#label}} with value {:[.]} matches the inverted pattern: {{#regex}}","string.pattern.invert.name":"{{#label}} with value {:[.]} matches the inverted {{#name}} pattern","string.trim":"{{#label}} must not have leading or trailing whitespace","string.uri":"{{#label}} must be a valid uri","string.uriCustomScheme":"{{#label}} must be a valid uri with a scheme matching the {{#scheme}} pattern","string.uriRelativeOnly":"{{#label}} must be a valid relative uri","string.uppercase":"{{#label}} must only contain uppercase characters"}}),l.addressOptions=function(t){if(!t)return l.tlds||t;if(e(void 0===t.minDomainSegments||Number.isSafeInteger(t.minDomainSegments)&&t.minDomainSegments>0,"minDomainSegments must be a positive integer"),e(void 0===t.maxDomainSegments||Number.isSafeInteger(t.maxDomainSegments)&&t.maxDomainSegments>0,"maxDomainSegments must be a positive integer"),!1===t.tlds)return t;if(!0===t.tlds||void 0===t.tlds)return e(l.tlds,"Built-in TLD list disabled"),Object.assign({},t,l.tlds);e("object"==typeof t.tlds,"tlds must be true, false, or an object");const n=t.tlds.deny;if(n)return Array.isArray(n)&&(t=Object.assign({},t,{tlds:{deny:new Set(n)}})),e(t.tlds.deny instanceof Set,"tlds.deny must be an array, Set, or boolean"),e(!t.tlds.allow,"Cannot specify both tlds.allow and tlds.deny lists"),l.validateTlds(t.tlds.deny,"tlds.deny"),t;const r=t.tlds.allow;return r?!0===r?(e(l.tlds,"Built-in TLD list disabled"),Object.assign({},t,l.tlds)):(Array.isArray(r)&&(t=Object.assign({},t,{tlds:{allow:new Set(r)}})),e(t.tlds.allow instanceof Set,"tlds.allow must be an array, Set, or boolean"),l.validateTlds(t.tlds.allow,"tlds.allow"),t):t},l.validateTlds=function(n,r){for(const s of n)e(t.isValid(s,{minDomainSegments:1,maxDomainSegments:1}),r+" must contain valid top level domain names")},l.isoDate=function(e){if(!c.isIsoDate(e))return null;/.*T.*[+-]\d\d$/.test(e)&&(e+="00");const t=new Date(e);return isNaN(t.getTime())?null:t.toISOString()},l.length=function(t,n,r,s,i){return e(!i||Buffer&&Buffer.isEncoding(i),"Invalid encoding:",i),t.$_addRule({name:n,method:"length",args:{limit:r,encoding:i},operator:s})},xX}function BX(){if(IX)return CX;IX=1;const e=rW,t=OJ(),n={};return n.Map=class extends Map{slice(){return new n.Map(this)}},CX=t.extend({type:"symbol",terms:{map:{init:new n.Map}},coerce:{method(e,{schema:t,error:n}){const r=t.$_terms.map.get(e);return r&&(e=r),t._flags.only&&"symbol"!=typeof e?{value:e,errors:n("symbol.map",{map:t.$_terms.map})}:{value:e}}},validate(e,{error:t}){if("symbol"!=typeof e)return{value:e,errors:t("symbol.base")}},rules:{map:{method(t){t&&!t[Symbol.iterator]&&"object"==typeof t&&(t=Object.entries(t)),e(t&&t[Symbol.iterator],"Iterable must be an iterable or object");const n=this.clone(),r=[];for(const s of t){e(s&&s[Symbol.iterator],"Entry must be an iterable");const[t,i]=s;e("object"!=typeof t&&"function"!=typeof t&&"symbol"!=typeof t,"Key must not be of type object, function, or Symbol"),e("symbol"==typeof i,"Value must be a Symbol"),n.$_terms.map.set(t,i),r.push(i)}return n.valid(...r)}}},manifest:{build:(e,t)=>(t.map&&(e=e.map(t.map)),e)},messages:{"symbol.base":"{{#label}} must be a symbol","symbol.map":"{{#label}} must be one of {{#map}}"}}),CX}function jX(){if(DX)return NX;DX=1;const e=rW,t=fW,n=UW(),r=$W(),s=qW(),i=RW(),o=YW(),a=WW(),c=BW(),l=jW(),u=rJ();let p;const d={types:{alternatives:NJ(),any:OJ(),array:DJ(),boolean:PJ(),date:LJ(),function:iX(),link:oX(),number:aX(),object:cX(),string:MX(),symbol:BX()},aliases:{alt:"alternatives",bool:"boolean",func:"function"}};return Buffer&&(d.types.binary=function(){if(OX)return RX;OX=1;const e=rW,t=OJ(),n=$W();return RX=t.extend({type:"binary",coerce:{from:["string","object"],method(e,{schema:t}){if("string"==typeof e||null!==e&&"Buffer"===e.type)try{return{value:Buffer.from(e,t._flags.encoding)}}catch(e){}}},validate(e,{error:t}){if(!Buffer.isBuffer(e))return{value:e,errors:t("binary.base")}},rules:{encoding:{method(t){return e(Buffer.isEncoding(t),"Invalid encoding:",t),this.$_setFlag("encoding",t)}},length:{method(e){return this.$_addRule({name:"length",method:"length",args:{limit:e},operator:"="})},validate:(e,t,{limit:r},{name:s,operator:i,args:o})=>n.compare(e.length,r,i)?e:t.error("binary."+s,{limit:o.limit,value:e}),args:[{name:"limit",ref:!0,assert:n.limit,message:"must be a positive integer"}]},max:{method(e){return this.$_addRule({name:"max",method:"length",args:{limit:e},operator:"<="})}},min:{method(e){return this.$_addRule({name:"min",method:"length",args:{limit:e},operator:">="})}}},cast:{string:{from:e=>Buffer.isBuffer(e),to:(e,t)=>""+e}},messages:{"binary.base":"{{#label}} must be a buffer or a string","binary.length":"{{#label}} must be {{#limit}} bytes","binary.max":"{{#label}} must be less than or equal to {{#limit}} bytes","binary.min":"{{#label}} must be at least {{#limit}} bytes"}}),RX}()),d.root=function(){const t={_types:new Set(Object.keys(d.types))};for(const n of t._types)t[n]=function(...t){return e(!t.length||["alternatives","link","object"].includes(n),"The",n,"type does not allow arguments"),d.generate(this,d.types[n],t)};for(const e of["allow","custom","disallow","equal","exist","forbidden","invalid","not","only","optional","options","prefs","preferences","required","strip","valid","when"])t[e]=function(...t){return this.any()[e](...t)};Object.assign(t,d.methods);for(const e in d.aliases)t[e]=t[d.aliases[e]];return t.x=t.expression,u.setup&&u.setup(t),t},d.methods={ValidationError:i.ValidationError,version:r.version,cache:n.provider,assert(e,t,...n){d.assert(e,t,!0,n)},attempt:(e,t,...n)=>d.assert(e,t,!1,n),build(t){return e("function"==typeof a.build,"Manifest functionality disabled"),a.build(this,t)},checkPreferences(e){r.checkPreferences(e)},compile(e,t){return s.compile(this,e,t)},defaults(t){e("function"==typeof t,"modifier must be a function");const n=Object.assign({},this);for(const s of n._types){const i=t(n[s]());e(r.isSchema(i),"modifier must return a valid schema object"),n[s]=function(...e){return d.generate(this,i,e)}}return n},expression:(...e)=>new l(...e),extend(...t){r.verifyFlat(t,"extend"),p=p||EW(),e(t.length,"You need to provide at least one extension"),this.assert(t,p.extensions);const n=Object.assign({},this);n._types=new Set(n._types);for(let r of t){"function"==typeof r&&(r=r(n)),this.assert(r,p.extension);const t=d.expandExtension(r,n);for(const r of t){e(void 0===n[r.type]||n._types.has(r.type),"Cannot override name",r.type);const t=r.base||this.any(),s=o.type(t,r);n._types.add(r.type),n[r.type]=function(...e){return d.generate(this,s,e)}}}return n},isError:i.ValidationError.isError,isExpression:l.isTemplate,isRef:c.isRef,isSchema:r.isSchema,in:(...e)=>c.in(...e),override:r.symbols.override,ref:(...e)=>c.create(...e),types(){const e={};for(const t of this._types)e[t]=this[t]();for(const t in d.aliases)e[t]=this[t]();return e}},d.assert=function(e,n,s,o){const a=o[0]instanceof Error||"string"==typeof o[0]?o[0]:null,c=n.validate(e,r.preferences({errors:{stack:!0}},(null!==a?o[1]:o[0])||{}));let l=c.error;if(!l)return c.value;if(a instanceof Error)throw a;const u=s&&"function"==typeof l.annotate?l.annotate():l.message;throw l instanceof i.ValidationError==0&&(l=t(l)),l.message=a?`${a} ${u}`:u,l},d.generate=function(t,n,r){return e(t,"Must be invoked on a Joi instance."),n.$_root=t,n._definition.args&&r.length?n._definition.args(n,...r):n},d.expandExtension=function(e,t){if("string"==typeof e.type)return[e];const n=[];for(const r of t._types)if(e.type.test(r)){const s=Object.assign({},e);s.type=r,s.base=t[r](),n.push(s)}return n},NX=d.root()}var FX={},$X={exports:{}},UX=class extends Error{name="AssertError";constructor(e,t){super(e||"Unknown error"),"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,t)}},HX=function(...e){try{return JSON.stringify(...e)}catch(e){return"[Cannot display object: "+e.message+"]"}};const GX=UX,qX=HX,zX=$X.exports=function(e,...t){if(e)return;if(1===t.length&&t[0]instanceof Error)throw t[0];const n=t.filter((e=>""!==e)).map((e=>"string"==typeof e?e:e instanceof Error?e.message:qX(e)));throw new GX(n.join(" "),zX)};var VX=$X.exports;const YX=VX,KX={};var QX=function(e,t,n){if(!1===t||null==t)return e;"string"==typeof(n=n||{})&&(n={separator:n});const r=Array.isArray(t);YX(!r||!n.separator,"Separator option is not valid for array-based chain");const s=r?t:t.split(n.separator||".");let i=e;for(let e=0;s.length>e;++e){let r=s[e];const o=n.iterables&&KX.iterables(i);if(Array.isArray(i)||"set"===o){const e=+r;Number.isInteger(e)&&(r=0>e?i.length+e:e)}if(!i||"function"==typeof i&&!1===n.functions||!o&&void 0===i[r]){YX(!n.strict||e+1===s.length,"Missing segment",r,"in reach path ",t),YX("object"==typeof i||!0===n.functions||"function"!=typeof i,"Invalid segment",r,"in reach path ",t),i=n.default;break}i=o?"set"===o?[...i][r]:i.get(r):i[r]}return i};KX.iterables=function(e){return e instanceof Set?"set":e instanceof Map?"map":void 0};var WX={exports:{}};!function(e,t){const n={};t=WX.exports={array:Array.prototype,buffer:Buffer&&Buffer.prototype,date:Date.prototype,error:Error.prototype,generic:Object.prototype,map:Map.prototype,promise:Promise.prototype,regex:RegExp.prototype,set:Set.prototype,url:URL.prototype,weakMap:WeakMap.prototype,weakSet:WeakSet.prototype},n.typeMap=new Map([["[object Error]",t.error],["[object Map]",t.map],["[object Promise]",t.promise],["[object Set]",t.set],["[object URL]",t.url],["[object WeakMap]",t.weakMap],["[object WeakSet]",t.weakSet]]),t.getInternalProto=function(e){if(Array.isArray(e))return t.array;if(Buffer&&e instanceof Buffer)return t.buffer;if(e instanceof Date)return t.date;if(e instanceof RegExp)return t.regex;if(e instanceof Error)return t.error;const r={}.toString.call(e);return n.typeMap.get(r)||t.generic}}(0,WX.exports);var JX=WX.exports,XX={keys:function(e,t={}){return!1!==t.symbols?Reflect.ownKeys(e):Object.getOwnPropertyNames(e)}};const ZX=QX,eZ=JX,tZ=XX,nZ={needsProtoHack:new Set([eZ.set,eZ.map,eZ.weakSet,eZ.weakMap])};var rZ=nZ.clone=function(e,t={},n=null){if("object"!=typeof e||null===e)return e;let r=nZ.clone,s=n;if(t.shallow){if(!0!==t.shallow)return nZ.cloneWithShallow(e,t);r=e=>e}else if(s){const t=s.get(e);if(t)return t}else s=new Map;const i=eZ.getInternalProto(e);switch(i){case eZ.buffer:return Buffer?.from(e);case eZ.date:return new Date(e.getTime());case eZ.regex:case eZ.url:return new i.constructor(e)}const o=nZ.base(e,i,t);if(o===e)return e;if(s&&s.set(e,o),i===eZ.set)for(const n of e)o.add(r(n,t,s));else if(i===eZ.map)for(const[n,i]of e)o.set(n,r(i,t,s));const a=tZ.keys(e,t);for(const n of a){if("__proto__"===n)continue;if(i===eZ.array&&"length"===n){o.length=e.length;continue}const a=Object.getOwnPropertyDescriptor(e,n);a?a.get||a.set?Object.defineProperty(o,n,a):a.enumerable?o[n]=r(e[n],t,s):Object.defineProperty(o,n,{enumerable:!1,writable:!0,configurable:!0,value:r(e[n],t,s)}):Object.defineProperty(o,n,{enumerable:!0,writable:!0,configurable:!0,value:r(e[n],t,s)})}return o};nZ.cloneWithShallow=function(e,t){const n=t.shallow;(t=Object.assign({},t)).shallow=!1;const r=new Map;for(const t of n){const n=ZX(e,t);"object"!=typeof n&&"function"!=typeof n||r.set(n,n)}return nZ.clone(e,t,r)},nZ.base=function(e,t,n){if(!1===n.prototype)return nZ.needsProtoHack.has(t)?new t.constructor:t===eZ.array?[]:{};const r=Object.getPrototypeOf(e);if(r&&r.isImmutable)return e;if(t===eZ.array){const e=[];return r!==t&&Object.setPrototypeOf(e,r),e}if(nZ.needsProtoHack.has(t)){const e=new r.constructor;return r!==t&&Object.setPrototypeOf(e,r),e}return Object.create(r)};const sZ=VX,iZ=rZ,oZ=XX,aZ={};var cZ=aZ.merge=function(e,t,n){if(sZ(e&&"object"==typeof e,"Invalid target value: must be an object"),sZ(null==t||"object"==typeof t,"Invalid source value: must be null, undefined, or an object"),!t)return e;if(n=Object.assign({nullOverride:!0,mergeArrays:!0},n),Array.isArray(t)){sZ(Array.isArray(e),"Cannot merge array onto an object"),n.mergeArrays||(e.length=0);for(let r=0;t.length>r;++r)e.push(iZ(t[r],{symbols:n.symbols}));return e}const r=oZ.keys(t,n);for(let s=0;r.length>s;++s){const i=r[s];if("__proto__"===i||!{}.propertyIsEnumerable.call(t,i))continue;const o=t[i];if(o&&"object"==typeof o){if(e[i]===o)continue;!e[i]||"object"!=typeof e[i]||Array.isArray(e[i])!==Array.isArray(o)||o instanceof Date||Buffer&&Buffer.isBuffer(o)||o instanceof RegExp?e[i]=iZ(o,{symbols:n.symbols}):aZ.merge(e[i],o,n)}else(null!=o||n.nullOverride)&&(e[i]=o)}return e};const lZ=VX,uZ=rZ,pZ=cZ,dZ=QX,hZ={applyToDefaultsWithShallow:function(e,t,n){const r=n.shallow;lZ(Array.isArray(r),"Invalid keys");const s=new Map,i=!0===t?null:new Set;for(let n of r){n=Array.isArray(n)?n:n.split(".");const r=dZ(e,n);r&&"object"==typeof r?s.set(r,i&&dZ(t,n)||r):i&&i.add(n)}const o=uZ(e,{},s);if(!i)return o;for(const e of i)hZ.reachCopy(o,t,e);return pZ(o,t,{nullOverride:void 0!==n.nullOverride&&n.nullOverride,mergeArrays:!1})},reachCopy:function(e,t,n){for(const e of n){if(!(e in t))return;const n=t[e];if("object"!=typeof n||null===n)return;t=n}const r=t;let s=e;for(let e=0;n.length-1>e;++e){const t=n[e];"object"!=typeof s[t]&&(s[t]={}),s=s[t]}s[n[n.length-1]]=r}},fZ={};var mZ=fZ.Bench=class{constructor(){this.ts=0,this.reset()}reset(){this.ts=fZ.Bench.now()}elapsed(){return fZ.Bench.now()-this.ts}static now(){const e=process.hrtime();return 1e3*e[0]+e[1]/1e6}},gZ=function(){};const yZ=gZ,vZ=JX,bZ={mismatched:null};var EZ=function(e,t,n){return n=Object.assign({prototype:!0},n),!!bZ.isDeepEqual(e,t,n,[])};bZ.isDeepEqual=function(e,t,n,r){if(e===t)return 0!==e||1/e==1/t;const s=typeof e;if(s!==typeof t)return!1;if(null===e||null===t)return!1;if("function"===s){if(!n.deepFunction||""+e!=""+t)return!1}else if("object"!==s)return e!=e&&t!=t;const i=bZ.getSharedType(e,t,!!n.prototype);switch(i){case vZ.buffer:return Buffer&&Buffer.prototype.equals.call(e,t);case vZ.promise:return e===t;case vZ.regex:case vZ.url:return""+e==""+t;case bZ.mismatched:return!1}for(let n=r.length-1;n>=0;--n)if(r[n].isSame(e,t))return!0;r.push(new bZ.SeenEntry(e,t));try{return!!bZ.isDeepEqualObj(i,e,t,n,r)}finally{r.pop()}},bZ.getSharedType=function(e,t,n){if(n)return Object.getPrototypeOf(e)!==Object.getPrototypeOf(t)?bZ.mismatched:vZ.getInternalProto(e);const r=vZ.getInternalProto(e);return r!==vZ.getInternalProto(t)?bZ.mismatched:r},bZ.valueOf=function(e){const t=e.valueOf;if(void 0===t)return e;try{return t.call(e)}catch(e){return e}},bZ.hasOwnEnumerableProperty=function(e,t){return{}.propertyIsEnumerable.call(e,t)},bZ.isSetSimpleEqual=function(e,t){for(const n of Set.prototype.values.call(e))if(!Set.prototype.has.call(t,n))return!1;return!0},bZ.isDeepEqualObj=function(e,t,n,r,s){const{isDeepEqual:i,valueOf:o,hasOwnEnumerableProperty:a}=bZ,{keys:c,getOwnPropertySymbols:l}=Object;if(e===vZ.array){if(!r.part){if(t.length!==n.length)return!1;for(let e=0;t.length>e;++e)if(!i(t[e],n[e],r,s))return!1;return!0}for(const e of t)for(const t of n)if(i(e,t,r,s))return!0}else if(e===vZ.set){if(t.size!==n.size)return!1;if(!bZ.isSetSimpleEqual(t,n)){const e=new Set(Set.prototype.values.call(n));for(const n of Set.prototype.values.call(t)){if(e.delete(n))continue;let t=!1;for(const o of e)if(i(n,o,r,s)){e.delete(o),t=!0;break}if(!t)return!1}}}else if(e===vZ.map){if(t.size!==n.size)return!1;for(const[e,o]of Map.prototype.entries.call(t)){if(void 0===o&&!Map.prototype.has.call(n,e))return!1;if(!i(o,Map.prototype.get.call(n,e),r,s))return!1}}else if(e===vZ.error&&(t.name!==n.name||t.message!==n.message))return!1;const u=o(t),p=o(n);if((t!==u||n!==p)&&!i(u,p,r,s))return!1;const d=c(t);if(!r.part&&d.length!==c(n).length&&!r.skip)return!1;let h=0;for(const e of d)if(r.skip&&r.skip.includes(e))void 0===n[e]&&++h;else{if(!a(n,e))return!1;if(!i(t[e],n[e],r,s))return!1}if(!r.part&&d.length-h!==c(n).length)return!1;if(!1!==r.symbols){const e=l(t),o=new Set(l(n));for(const c of e){if(!r.skip?.includes(c))if(a(t,c)){if(!a(n,c))return!1;if(!i(t[c],n[c],r,s))return!1}else if(a(n,c))return!1;o.delete(c)}for(const e of o)if(a(n,e))return!1}return!0},bZ.SeenEntry=class{constructor(e,t){this.obj=e,this.ref=t}isSame(e,t){return this.obj===e&&this.ref===t}};var _Z=function(e){return e.replace(/[\^\$\.\*\+\-\?\=\!\:\|\\\/\(\)\[\]\{\}\,]/g,"\\$&")};const AZ=VX,SZ=EZ,TZ=_Z,wZ=XX,xZ={array:function(e,t,n){if(Array.isArray(t)||(t=[t]),!e.length)return!1;if(n.only&&n.once&&e.length!==t.length)return!1;let r;const s=new Map;for(const e of t)if(n.deep&&e&&"object"==typeof e){r=r??xZ.compare(n);let t=!1;for(const[n,i]of s.entries())if(r(n,e)){++i.allowed,t=!0;break}t||s.set(e,{allowed:1,hits:0})}else{const t=s.get(e);t?++t.allowed:s.set(e,{allowed:1,hits:0})}let i=0;for(const t of e){let e;if(n.deep&&t&&"object"==typeof t){r=r??xZ.compare(n);for(const[n,i]of s.entries())if(r(n,t)){e=i;break}}else e=s.get(t);if(e&&(++e.hits,++i,n.once&&e.hits>e.allowed))return!1}if(n.only&&i!==e.length)return!1;for(const e of s.values())if(e.hits!==e.allowed&&e.allowed>e.hits&&!n.part)return!1;return!!i},object:function(e,t,n){AZ(void 0===n.once,"Cannot use option once with object");const r=wZ.keys(e,n);if(!r.length)return!1;if(Array.isArray(t))return xZ.array(r,t,n);const s=Object.getOwnPropertySymbols(t).filter((e=>t.propertyIsEnumerable(e))),i=[...Object.keys(t),...s],o=xZ.compare(n),a=new Set(i);for(const s of r)if(a.has(s)){if(!o(t[s],e[s]))return!1;a.delete(s)}else if(n.only)return!1;return!a.size||!!n.part&&i.length>a.size},string:function(e,t,n){if(""===e)return 1===t.length&&""===t[0]||!n.once&&!t.some((e=>""!==e));const r=new Map,s=[];for(const e of t)if(AZ("string"==typeof e,"Cannot compare string reference to non-string value"),e){const t=r.get(e);t?++t.allowed:(r.set(e,{allowed:1,hits:0}),s.push(TZ(e)))}else if(n.once||n.only)return!1;if(!s.length)return!0;const i=RegExp(`(${s.join("|")})`,"g"),o=e.replace(i,((e,t)=>(++r.get(t).hits,"")));if(n.only&&o)return!1;let a=!1;for(const e of r.values())if(e.hits&&(a=!0),e.hits!==e.allowed){if(e.allowed>e.hits&&!n.part)return!1;if(n.once)return!1}return!!a},compare:function(e){if(!e.deep)return xZ.shallow;const t=void 0!==e.only,n=void 0!==e.part,r={prototype:t?e.only:!!n&&!e.part,part:t?!e.only:!!n&&e.part};return(e,t)=>SZ(e,t,r)},shallow:function(e,t){return e===t}},kZ=VX,CZ={escapeHtmlChar:function(e){return CZ.namedHtml.get(e)||(256>e?`&#x${e.toString(16).padStart(2,"0")};`:"&#"+e+";")},isSafe:function(e){return CZ.safeCharCodes.has(e)}};CZ.namedHtml=new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[34,"&quot;"],[160,"&nbsp;"],[162,"&cent;"],[163,"&pound;"],[164,"&curren;"],[169,"&copy;"],[174,"&reg;"]]),CZ.safeCharCodes=function(){const e=new Set;for(let t=32;123>t;++t)97>t&&(65>t||t>90)&&(48>t||t>57)&&32!==t&&46!==t&&44!==t&&45!==t&&58!==t&&95!==t||e.add(t);return e}();const IZ={escape:function(e){return IZ.replacements.get(e)}};IZ.replacements=new Map([["<","\\u003c"],[">","\\u003e"],["&","\\u0026"],["\u2028","\\u2028"],["\u2029","\\u2029"]]);const RZ={};var OZ=RZ.flatten=function(e,t){const n=t||[];for(const t of e)Array.isArray(t)?RZ.flatten(t,n):n.push(t);return n};const NZ=function(e,t){return"function"==typeof e.has?e.has(t):void 0!==e[t]},DZ=Symbol("wrapped"),PZ=QX;FX.applyToDefaults=function(e,t,n={}){if(lZ(e&&"object"==typeof e,"Invalid defaults value: must be an object"),lZ(!t||!0===t||"object"==typeof t,"Invalid source value: must be true, falsy or an object"),lZ("object"==typeof n,"Invalid options: must be an object"),!t)return null;if(n.shallow)return hZ.applyToDefaultsWithShallow(e,t,n);const r=uZ(e);return!0===t?r:pZ(r,t,{nullOverride:void 0!==n.nullOverride&&n.nullOverride,mergeArrays:!1})},FX.assert=VX,FX.AssertError=UX,FX.Bench=mZ,FX.block=function(){return new Promise(yZ)},FX.clone=rZ,FX.contain=function(e,t,n={}){return"object"!=typeof t&&(t=[t]),AZ(!Array.isArray(t)||t.length,"Values array cannot be empty"),"string"==typeof e?xZ.string(e,t,n):Array.isArray(e)?xZ.array(e,t,n):(AZ("object"==typeof e,"Reference must be string or an object"),xZ.object(e,t,n))},FX.deepEqual=EZ,FX.escapeHeaderAttribute=function(e){return kZ(/^[ \w\!#\$%&'\(\)\*\+,\-\.\/\:;<\=>\?@\[\]\^`\{\|\}~\"\\]*$/.test(e),"Bad attribute value ("+e+")"),e.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')},FX.escapeHtml=function(e){if(!e)return"";let t="";for(let n=0;e.length>n;++n){const r=e.charCodeAt(n);CZ.isSafe(r)?t+=e[n]:t+=CZ.escapeHtmlChar(r)}return t},FX.escapeJson=function(e){return e?e.replace(/[<>&\u2028\u2029]/g,IZ.escape):""},FX.escapeRegex=_Z,FX.flatten=OZ,FX.ignore=gZ,FX.intersect=function(e,t,n={}){if(!e||!t)return n.first?null:[];const r=[],s=Array.isArray(e)?new Set(e):e,i=new Set;for(const e of t)if(NZ(s,e)&&!i.has(e)){if(n.first)return e;r.push(e),i.add(e)}return n.first?null:r},FX.isPromise=function(e){return"function"==typeof e?.then},FX.merge=cZ,FX.once=function(e){if(e[DZ])return e;let t=!1;const n=function(...n){t||(t=!0,e(...n))};return n[DZ]=!0,n},FX.reach=QX,FX.reachTemplate=function(e,t,n){return t.replace(/{([^{}]+)}/g,((t,r)=>PZ(e,r,n)??""))},FX.stringify=HX,FX.wait=function(e,t,n){if("bigint"==typeof e&&(e=+e),Number.MAX_SAFE_INTEGER>e||(e=1/0),"number"!=typeof e&&void 0!==e)throw new TypeError("Timeout must be a number or bigint");return new Promise((r=>{const s=n?n.setTimeout:setTimeout,i=()=>{const n=Math.min(e,2147483647);e-=n,s((()=>e>0?i():r(t)),n)};e!==1/0&&i()}))};var LZ={};!function(e){const t=FX,n={codes:new Map([[100,"Continue"],[101,"Switching Protocols"],[102,"Processing"],[200,"OK"],[201,"Created"],[202,"Accepted"],[203,"Non-Authoritative Information"],[204,"No Content"],[205,"Reset Content"],[206,"Partial Content"],[207,"Multi-Status"],[300,"Multiple Choices"],[301,"Moved Permanently"],[302,"Moved Temporarily"],[303,"See Other"],[304,"Not Modified"],[305,"Use Proxy"],[307,"Temporary Redirect"],[400,"Bad Request"],[401,"Unauthorized"],[402,"Payment Required"],[403,"Forbidden"],[404,"Not Found"],[405,"Method Not Allowed"],[406,"Not Acceptable"],[407,"Proxy Authentication Required"],[408,"Request Time-out"],[409,"Conflict"],[410,"Gone"],[411,"Length Required"],[412,"Precondition Failed"],[413,"Request Entity Too Large"],[414,"Request-URI Too Large"],[415,"Unsupported Media Type"],[416,"Requested Range Not Satisfiable"],[417,"Expectation Failed"],[418,"I'm a teapot"],[422,"Unprocessable Entity"],[423,"Locked"],[424,"Failed Dependency"],[425,"Too Early"],[426,"Upgrade Required"],[428,"Precondition Required"],[429,"Too Many Requests"],[431,"Request Header Fields Too Large"],[451,"Unavailable For Legal Reasons"],[500,"Internal Server Error"],[501,"Not Implemented"],[502,"Bad Gateway"],[503,"Service Unavailable"],[504,"Gateway Time-out"],[505,"HTTP Version Not Supported"],[506,"Variant Also Negotiates"],[507,"Insufficient Storage"],[509,"Bandwidth Limit Exceeded"],[510,"Not Extended"],[511,"Network Authentication Required"]])};e.Boom=class extends Error{constructor(r,s={}){if(r instanceof Error)return e.boomify(t.clone(r),s);const{statusCode:i=500,data:o=null,ctor:a=e.Boom}=s,c=Error(r||void 0);Error.captureStackTrace(c,a),c.data=o;const l=n.initialize(c,i);return Object.defineProperty(l,"typeof",{value:a}),s.decorate&&Object.assign(l,s.decorate),l}static[Symbol.hasInstance](t){return this===e.Boom?e.isBoom(t):this.prototype.isPrototypeOf(t)}},e.isBoom=function(e,t){return e instanceof Error&&!!e.isBoom&&(!t||e.output.statusCode===t)},e.boomify=function(e,r){return t.assert(e instanceof Error,"Cannot wrap non-Error object"),void 0!==(r=r||{}).data&&(e.data=r.data),r.decorate&&Object.assign(e,r.decorate),e.isBoom?!1===r.override||!r.statusCode&&!r.message?e:n.initialize(e,r.statusCode??e.output.statusCode,r.message):n.initialize(e,r.statusCode??500,r.message)},e.badRequest=function(t,n){return new e.Boom(t,{statusCode:400,data:n,ctor:e.badRequest})},e.unauthorized=function(n,r,s){const i=new e.Boom(n,{statusCode:401,ctor:e.unauthorized});if(!r)return i;if("string"!=typeof r)return i.output.headers["WWW-Authenticate"]=r.join(", "),i;let o=""+r;return(s||n)&&(i.output.payload.attributes={}),s&&("string"==typeof s?(o+=" "+t.escapeHeaderAttribute(s),i.output.payload.attributes=s):o+=" "+Object.keys(s).map((e=>{const n=s[e]??"";return i.output.payload.attributes[e]=n,`${e}="${t.escapeHeaderAttribute(""+n)}"`})).join(", ")),n?(s&&(o+=","),o+=` error="${t.escapeHeaderAttribute(n)}"`,i.output.payload.attributes.error=n):i.isMissing=!0,i.output.headers["WWW-Authenticate"]=o,i},e.paymentRequired=function(t,n){return new e.Boom(t,{statusCode:402,data:n,ctor:e.paymentRequired})},e.forbidden=function(t,n){return new e.Boom(t,{statusCode:403,data:n,ctor:e.forbidden})},e.notFound=function(t,n){return new e.Boom(t,{statusCode:404,data:n,ctor:e.notFound})},e.methodNotAllowed=function(t,n,r){const s=new e.Boom(t,{statusCode:405,data:n,ctor:e.methodNotAllowed});return"string"==typeof r&&(r=[r]),Array.isArray(r)&&(s.output.headers.Allow=r.join(", ")),s},e.notAcceptable=function(t,n){return new e.Boom(t,{statusCode:406,data:n,ctor:e.notAcceptable})},e.proxyAuthRequired=function(t,n){return new e.Boom(t,{statusCode:407,data:n,ctor:e.proxyAuthRequired})},e.clientTimeout=function(t,n){return new e.Boom(t,{statusCode:408,data:n,ctor:e.clientTimeout})},e.conflict=function(t,n){return new e.Boom(t,{statusCode:409,data:n,ctor:e.conflict})},e.resourceGone=function(t,n){return new e.Boom(t,{statusCode:410,data:n,ctor:e.resourceGone})},e.lengthRequired=function(t,n){return new e.Boom(t,{statusCode:411,data:n,ctor:e.lengthRequired})},e.preconditionFailed=function(t,n){return new e.Boom(t,{statusCode:412,data:n,ctor:e.preconditionFailed})},e.entityTooLarge=function(t,n){return new e.Boom(t,{statusCode:413,data:n,ctor:e.entityTooLarge})},e.uriTooLong=function(t,n){return new e.Boom(t,{statusCode:414,data:n,ctor:e.uriTooLong})},e.unsupportedMediaType=function(t,n){return new e.Boom(t,{statusCode:415,data:n,ctor:e.unsupportedMediaType})},e.rangeNotSatisfiable=function(t,n){return new e.Boom(t,{statusCode:416,data:n,ctor:e.rangeNotSatisfiable})},e.expectationFailed=function(t,n){return new e.Boom(t,{statusCode:417,data:n,ctor:e.expectationFailed})},e.teapot=function(t,n){return new e.Boom(t,{statusCode:418,data:n,ctor:e.teapot})},e.badData=function(t,n){return new e.Boom(t,{statusCode:422,data:n,ctor:e.badData})},e.locked=function(t,n){return new e.Boom(t,{statusCode:423,data:n,ctor:e.locked})},e.failedDependency=function(t,n){return new e.Boom(t,{statusCode:424,data:n,ctor:e.failedDependency})},e.tooEarly=function(t,n){return new e.Boom(t,{statusCode:425,data:n,ctor:e.tooEarly})},e.preconditionRequired=function(t,n){return new e.Boom(t,{statusCode:428,data:n,ctor:e.preconditionRequired})},e.tooManyRequests=function(t,n){return new e.Boom(t,{statusCode:429,data:n,ctor:e.tooManyRequests})},e.illegal=function(t,n){return new e.Boom(t,{statusCode:451,data:n,ctor:e.illegal})},e.internal=function(t,r,s=500){return n.serverError(t,r,s,e.internal)},e.notImplemented=function(t,r){return n.serverError(t,r,501,e.notImplemented)},e.badGateway=function(t,r){return n.serverError(t,r,502,e.badGateway)},e.serverUnavailable=function(t,r){return n.serverError(t,r,503,e.serverUnavailable)},e.gatewayTimeout=function(t,r){return n.serverError(t,r,504,e.gatewayTimeout)},e.badImplementation=function(t,r){const s=n.serverError(t,r,500,e.badImplementation);return s.isDeveloperError=!0,s},n.initialize=function(e,r,s){const i=parseInt(r,10);if(t.assert(!isNaN(i)&&i>=400,"First argument must be a number (400+):",r),e.isBoom=!0,e.isServer=i>=500,e.hasOwnProperty("data")||(e.data=null),e.output={statusCode:i,payload:{},headers:{}},Object.defineProperty(e,"reformat",{value:n.reformat,configurable:!0}),s||e.message||(e.reformat(),s=e.output.payload.error),s){const n=Object.getOwnPropertyDescriptor(e,"message")||Object.getOwnPropertyDescriptor(Object.getPrototypeOf(e),"message");t.assert(!n||n.configurable&&!n.get,"The error is not compatible with boom"),e.message=s+(e.message?": "+e.message:""),e.output.payload.message=e.message}return e.reformat(),e},n.reformat=function(e=!1){this.output.payload.statusCode=this.output.statusCode,this.output.payload.error=n.codes.get(this.output.statusCode)||"Unknown",500===this.output.statusCode&&!0!==e?this.output.payload.message="An internal server error occurred":this.message&&(this.output.payload.message=this.message)},n.serverError=function(t,n,r,s){return n instanceof Error&&!n.isBoom?e.boomify(n,{statusCode:r,message:t}):new e.Boom(t,{statusCode:r,data:n,ctor:s})}}(LZ);var MZ={};!function(e){const t=/"(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])"\s*\:/;e.parse=function(n,...r){const s="object"==typeof r[0]&&r[0],i=r.length>1&&r[1]||s||{},o=JSON.parse(n,r.length>1||!s?r[0]:void 0);return"ignore"===i.protoAction?o:o&&"object"==typeof o&&n.match(t)?(e.scan(o,i),o):o},e.scan=function(e,t={}){let n=[e];for(;n.length;){const e=n;n=[];for(const r of e){if({}.hasOwnProperty.call(r,"__proto__")){if("remove"!==t.protoAction)throw new SyntaxError("Object contains forbidden prototype property");delete r.__proto__}for(const e in r){const t=r[e];t&&"object"==typeof t&&n.push(r[e])}}}},e.safeParse=function(t,n){try{return e.parse(t,n)}catch(e){return null}}}(MZ);const BZ=_;var jZ=class extends BZ.Readable{constructor(e,t){super();const n=[].concat(e||"");let r=0;for(let e=0;n.length>e;++e){const t=n[e];r+=t.length,n[e]=Buffer.isBuffer(t)?t:Buffer.from(t)}this._data=Buffer.concat(n,r),this._position=0,this._encoding=t||"utf8"}_read(e){const t=this._data.slice(this._position,this._position+e);this.push(t,this._encoding),this._position=this._position+t.length,this._data.length>this._position||this.push(null)}};const FZ=_,$Z=LZ,UZ=_,HZ=jZ,GZ=a,qZ=C,zZ=I,VZ=_,YZ=h,KZ=R,QZ=LZ,WZ=MZ,JZ=FX,XZ=jZ,ZZ=class extends FZ.Writable{constructor(e){super(),this.settings=e,this.buffers=[],this.length=0}_write(e,t,n){if(this.settings.maxBytes&&this.length+e.length>this.settings.maxBytes)return this.emit("error",$Z.entityTooLarge("Payload content length greater than maximum allowed: "+this.settings.maxBytes));this.length=this.length+e.length,this.buffers.push(e),n()}collect(){return 0===this.buffers.length?Buffer.alloc(0):1===this.buffers.length?this.buffers[0]:Buffer.concat(this.buffers,this.length)}},e0=class extends UZ.Transform{constructor(){super(),this.buffers=[]}_transform(e,t,n){this.buffers.push(e),n(null,e)}collect(){return new HZ(this.buffers)}},t0={jsonRegex:/^application\/([a-z0-9.]*[+-]json|json)$/,shallowOptions:["agent","agents","beforeRedirect","payload","redirected"],httpOptions:["secureProtocol","ciphers","lookup","family","hints"],Client:class{constructor(e={}){JZ.assert(!e.agents||e.agents.https&&e.agents.http&&e.agents.httpsAllowUnauthorized,'Option agents must include "http", "https", and "httpsAllowUnauthorized"'),this._defaults=JZ.clone(e,{shallow:t0.shallowOptions}),this.agents=this._defaults.agents||{https:new zZ.Agent({maxSockets:1/0}),http:new qZ.Agent({maxSockets:1/0}),httpsAllowUnauthorized:new zZ.Agent({maxSockets:1/0,rejectUnauthorized:!1})},this._defaults.events&&(this.events=new GZ.EventEmitter)}defaults(e){return JZ.assert(e&&"object"==typeof e,"options must be provided to defaults"),e=JZ.applyToDefaults(this._defaults,e,{shallow:t0.shallowOptions}),new t0.Client(e)}request(e,t,n={}){try{n=JZ.applyToDefaults(this._defaults,n,{shallow:t0.shallowOptions}),JZ.assert(void 0===n.payload||"string"==typeof n.payload||"object"==typeof n.payload,"options.payload must be a string, a Buffer, a Stream, or an Object"),JZ.assert(t0.isNullOrUndefined(n.agent)||"boolean"!=typeof n.rejectUnauthorized,"options.agent cannot be set to an Agent at the same time as options.rejectUnauthorized is set"),JZ.assert(t0.isNullOrUndefined(n.beforeRedirect)||"function"==typeof n.beforeRedirect,"options.beforeRedirect must be a function"),JZ.assert(t0.isNullOrUndefined(n.redirected)||"function"==typeof n.redirected,"options.redirected must be a function"),JZ.assert(void 0===n.gunzip||"boolean"==typeof n.gunzip||"force"===n.gunzip,'options.gunzip must be a boolean or "force"')}catch(e){return Promise.reject(e)}n.baseUrl&&(t=t0.resolveUrl(n.baseUrl,t),delete n.baseUrl);const r={},s=this._request(e,t,n,r),i=new Promise(((e,t)=>{r.callback=(n,r)=>{n?t(n):e(r)}}));return i.req=s,i}_request(e,t,n,r,s){const i={};if(n.socketPath){i.socketPath=n.socketPath;const e=new YZ.URL(t,"unix://"+n.socketPath);t0.applyUrlToOptions(i,{host:"",protocol:"http:",hash:e.hash,search:e.search,searchParams:e.searchParams,pathname:e.pathname,href:e.href})}else{i.setHost=!1;const e=new YZ.URL(t);t0.applyUrlToOptions(i,e)}i.method=e.toUpperCase(),i.headers=Object.create(null);const o=new Set;if(n.headers)for(const[e,t]of Object.entries(n.headers))void 0!==t&&(i.headers[e]=t,o.add(e.toLowerCase()));o.has("host")||(i.headers.host=i.host),!n.payload||"object"!=typeof n.payload||n.payload instanceof VZ||Buffer.isBuffer(n.payload)||(n.payload=JSON.stringify(n.payload),o.has("content-type")||(i.headers["content-type"]="application/json")),n.gunzip&&!o.has("accept-encoding")&&(i.headers["accept-encoding"]="gzip");const a="GET"!==i.method&&"HEAD"!==i.method&&!t0.isNullOrUndefined(n.payload);!a||"string"!=typeof n.payload&&!Buffer.isBuffer(n.payload)||o.has("content-length")||(i.headers["content-length"]=Buffer.isBuffer(n.payload)?n.payload.length:Buffer.byteLength(n.payload));let c=!!n.hasOwnProperty("redirects")&&n.redirects;(s=s??[]).push({method:i.method,url:t});const l="https:"===i.protocol?zZ:qZ;for(const e of t0.httpOptions)void 0!==n[e]&&(i[e]=n[e]);i.agent=void 0!==n.rejectUnauthorized&&"https:"===i.protocol?n.rejectUnauthorized?this.agents.https:this.agents.httpsAllowUnauthorized:n.agent||!1===n.agent?n.agent:"https:"===i.protocol?this.agents.https:this.agents.http,this._emit("preRequest",i,n);const u=Date.now(),p=l.request(i);this._emit("request",p);let d,h=null;const f=e=>(e.trace=s,y(QZ.badGateway("Client request error",e))),m=()=>{if(!p.socket){const e=Error("socket hang up");e.code="ECONNRESET",y(e)}};p.once("error",f);const g=e=>{const t=e.statusCode,r=t0.redirectMethod(t,i.method,n);if(!1===c||!r)return y(null,e);if(e.destroy(),0===c)return y(QZ.badGateway("Maximum redirections reached",s));let o=e.headers.location;if(!o)return y(QZ.badGateway("Received redirection without location",s));/^https?:/i.test(o)||(o=YZ.resolve(i.href,o));const a=JZ.clone(n,{shallow:t0.shallowOptions});if(a.payload=h??n.payload,a.redirects=--c,d){clearTimeout(d);const e=Date.now()-u;a.timeout=""+(a.timeout-e)}if(a.headers){const e=new URL(o);if(i.hostname!==e.hostname)for(const e of Object.keys(a.headers)){const t=e.toLowerCase();"authorization"!==t&&"cookie"!==t||delete a.headers[e]}}const l=e=>{if(e)return e.trace=s,y(QZ.badGateway("Invalid redirect",e));const i=this._request(r,o,a,{callback:y},s);n.redirected&&n.redirected(t,o,i)};return n.beforeRedirect?n.beforeRedirect(r,t,o,e.headers,a,l):l()},y=JZ.once(((e,t)=>(e&&p.abort(),p.removeListener("response",g),p.removeListener("error",f),p.removeListener("abort",m),p.on("error",JZ.ignore),clearTimeout(d),this._emit("response",e,{req:p,res:t,start:u,uri:i}),r.callback(e,t))));if(p.once("response",g),n.timeout&&(d=setTimeout((()=>y(QZ.gatewayTimeout("Client request timeout"))),n.timeout)),p.on("abort",m),a){if(n.payload instanceof VZ){let e=n.payload;if(c){const t=new e0;t.once("finish",(()=>{h=t.collect()})),e=n.payload.pipe(t)}return t0.deferPipeUntilSocketConnects(p,e),p}p.write(n.payload)}return p.end(),p}_emit(...e){this.events&&this.events.emit(...e)}read(e,t={}){return new Promise(((n,r)=>{this._read(e,t,((e,t)=>{e?r(e):n(t)}))}))}_read(e,t,n){t=JZ.applyToDefaults(this._defaults,t,{shallow:t0.shallowOptions});let r=null;const s=JZ.once(((s,i)=>{if(clearTimeout(r),c.removeListener("error",l),c.removeListener("finish",u),e.removeListener("error",o),e.removeListener("close",a),e.removeListener("aborted",a),e.on("error",JZ.ignore),s)return n(s);if(!t.json)return n(null,i);if("force"===t.json)return t0.tryParseBuffer(i,n);const p=(e.headers?.["content-type"]??"").split(";")[0].trim().toLowerCase();return t0.jsonRegex.test(p)?t0.tryParseBuffer(i,n):"strict"===t.json?n(QZ.notAcceptable("The content-type is not JSON compatible")):n(null,i)})),i=t.timeout;i&&i>0&&(r=setTimeout((()=>s(QZ.clientTimeout())),i));const o=e=>s(e.isBoom?e:QZ.internal("Payload stream error",e)),a=()=>{e.complete||s(QZ.internal("Payload stream closed prematurely"))};e.once("error",o),e.once("close",a),e.once("aborted",a);const c=new ZZ({maxBytes:t.maxBytes}),l=t=>(e.destroy&&e.destroy(),s(t));c.once("error",l);const u=()=>s(null,c.collect());if(c.once("finish",u),t.gunzip&&/^(x-)?gzip(\s*,\s*identity)?$/.test("force"===t.gunzip?"gzip":e.headers?.["content-encoding"]??"")){const t=KZ.createGunzip();return t.once("error",l),void e.pipe(t).pipe(c)}e.pipe(c)}toReadableStream(e,t){return new XZ(e,t)}parseCacheControl(e){const t={},n=e.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,((e,n,r,s)=>{const i=r||s;return t[n]=!i||i.toLowerCase(),""}));if(t["max-age"])try{const e=parseInt(t["max-age"],10);if(isNaN(e))return null;t["max-age"]=e}catch(e){}return n?null:t}get(e,t){return this._shortcut("GET",e,t)}post(e,t){return this._shortcut("POST",e,t)}patch(e,t){return this._shortcut("PATCH",e,t)}put(e,t){return this._shortcut("PUT",e,t)}delete(e,t){return this._shortcut("DELETE",e,t)}async _shortcut(e,t,n={}){const r=await this.request(e,t,n);let s;try{s=await this.read(r,n)}catch(e){throw e.data=e.data??{},e.data.res=r,e}if(400>r.statusCode)return{res:r,payload:s};throw new QZ.Boom(`Response Error: ${r.statusCode} ${r.statusMessage}`,{statusCode:r.statusCode,data:{isResponseError:!0,headers:r.headers,res:r,payload:s}})}},resolveUrl:function(e,t){if(!t)return e;const n=new YZ.URL(t,e);return YZ.format(n)},deferPipeUntilSocketConnects:function(e,t){const n=()=>{t.pipe(e),t.removeListener("error",r)},r=t=>{e.emit("error",t)};e.once("socket",(e=>{if(!e.connecting)return n();e.once("connect",n)})),t.on("error",r)},redirectMethod:function(e,t,n){switch(e){case 301:case 302:return n.redirectMethod||t;case 303:if(n.redirect303)return"GET";break;case 307:case 308:return t}return null},tryParseBuffer:function(e,t){if(0===e.length)return t(null,null);let n;try{n=WZ.parse(""+e)}catch(n){return t(QZ.badGateway(n.message,{payload:e}))}return t(null,n)},applyUrlToOptions:(e,t)=>(e.host=t.host,e.origin=t.origin,e.searchParams=t.searchParams,e.protocol=t.protocol,e.hostname="string"==typeof t.hostname&&t.hostname.startsWith("[")?t.hostname.slice(1,-1):t.hostname,e.hash=t.hash,e.search=t.search,e.pathname=t.pathname,e.path=`${t.pathname}${t.search}`,e.href=t.href,""!==t.port&&(e.port=+t.port),(t.username||t.password)&&(e.auth=`${t.username}:${t.password}`,e.username=t.username,e.password=t.password),e),isNullOrUndefined:e=>[null,void 0].includes(e)};var n0=new t0.Client;const r0={STRICT:"strict",LOOSE:"loose"};function s0(e){return encodeURIComponent(e).replace(/%20/g,"+").replace(/[!'()*]/g,(e=>"%"+e.charCodeAt(0).toString(16).toUpperCase()))}function i0(e,t){return`${e}:${t}`}var o0={CredentialsEncoding:class{constructor(e){this.encodingMode=e}getAuthorizationHeaderToken(e,t){let n;return n=this.encodingMode===r0.STRICT?i0(s0(e),s0(t)):i0(e,t),Buffer.from(n).toString("base64")}},credentialsEncodingModeEnum:r0};const a0=FX,c0=N,l0=lO("simple-oauth2:request-options"),{CredentialsEncoding:u0}=o0,p0={HEADER:"header",BODY:"body"},d0={FORM:"form",JSON:"json"};var h0={RequestOptions:class{#h=null;#f=null;constructor(e,t){this.#h=e,this.#f=this.createOptions(t)}createOptions(e){const t={...e},n={headers:{}};if(this.#h.options.authorizationMethod===p0.HEADER){const e=new u0(this.#h.options.credentialsEncodingMode).getAuthorizationHeaderToken(this.#h.client.id,this.#h.client.secret);l0("Using header authentication. Authorization header set to %s",e),n.headers.Authorization="Basic "+e}else l0("Using body authentication"),t[this.#h.client.idParamName]=this.#h.client.id,t[this.#h.client.secretParamName]=this.#h.client.secret;return this.#h.options.bodyFormat===d0.FORM?(l0("Using form request format"),n.payload=c0.stringify(t),n.headers["Content-Type"]="application/x-www-form-urlencoded"):(l0("Using json request format"),n.payload=t,n.headers["Content-Type"]="application/json"),n}toObject(e={}){return a0.applyToDefaults(e,this.#f)}},authorizationMethodEnum:p0,bodyFormatEnum:d0};const f0=FX,m0=n0,g0=lO("simple-oauth2:client"),{RequestOptions:y0}=h0,v0={json:"strict",headers:{Accept:"application/json"}},{credentialsEncodingModeEnum:b0}=o0,{RequestOptions:E0,authorizationMethodEnum:_0,bodyFormatEnum:A0}=h0;var S0={Client:class{#h=null;#m=null;constructor(e){const t=f0.applyToDefaults(e.http||{},{baseUrl:e.auth.tokenHost}),n=f0.applyToDefaults(v0,t);this.#h=e,this.#m=m0.defaults(n)}async request(e,t,n){const r=new y0(this.#h,t).toObject(n);return g0("Creating request to: (POST) %s",e),g0("Using request options: %j",r),(await this.#m.post(e,r)).payload}},RequestOptions:E0,credentialsEncodingModeEnum:b0,authorizationMethodEnum:_0,bodyFormatEnum:A0},T0=class e{#g=null;#y=null;#v=null;static forGrantType(t,n,r){return new e(n,{grant_type:t},r)}constructor(e,t,n){this.#v={...e},this.#g={...n},this.#y={...t}}toObject(){const e=function(e,t){return void 0===e?null:Array.isArray(e)?{scope:e.join(t)}:{scope:e}}(this.#g.scope,this.#v.scopeSeparator);return Object.assign(this.#y,this.#g,e)}};const w0=lO("simple-oauth2:access-token"),x0="expires_at",k0="expires_in";var C0={parseToken:function(e){const t={};var n,r;return x0 in e?t[x0]=(r=e[x0])instanceof Date?r:new Date("number"==typeof r?1e3*r:r):k0 in e?t[x0]=(n=e[k0],new Date(Date.now()+1e3*Number.parseInt(n,10))):w0("No token expiration property was found. Ignoring date parsing"),{...e,...t}}};const I0=FX,R0=T0,{parseToken:O0}=C0,N0="access_token",D0="refresh_token";const P0=class e{#h=null;#m=null;constructor(e,t,n){I0.assert(e,"Cannot create access token without client configuration"),I0.assert(t,"Cannot create access token without client instance"),I0.assert(n,"Cannot create access token without a token to parse"),this.#h=e,this.#m=t,this.token=Object.freeze(O0(n))}expired(e=0){return 0>=this.token.expires_at-(Date.now()+1e3*e)}async refresh(t={},n={}){const r={...t,refresh_token:this.token.refresh_token},s=R0.forGrantType(D0,this.#h.options,r),i=await this.#m.request(this.#h.auth.refreshPath,s.toObject(),n);return void 0===i[D0]&&(i.refresh_token=this.refresh_token),new e(this.#h,this.#m,i)}async revoke(e,t){return I0.assert(e===N0||e===D0,`Invalid token type. Only ${N0} or ${D0} are valid values`),this.#m.request(this.#h.auth.revokePath,{token:this.token[e],token_type_hint:e},t)}async revokeAll(e){await this.revoke(N0,e),await this.revoke(D0,e)}toJSON(){return this.token}},L0=T0,M0=jX(),{authorizationMethodEnum:B0,bodyFormatEnum:j0,credentialsEncodingModeEnum:F0}=S0,$0=/^[\x20-\x7E]*$/,U0=M0.object({id:M0.string().pattern($0).allow(""),secret:M0.string().pattern($0).allow(""),secretParamName:M0.string().default("client_secret"),idParamName:M0.string().default("client_id")}).required(),H0=M0.object().keys({tokenHost:M0.string().required().uri({scheme:["http","https"]}),tokenPath:M0.string().default("/oauth/token"),refreshPath:M0.string().default(M0.ref("tokenPath")),revokePath:M0.string().default("/oauth/revoke")}).required(),G0=M0.object({scopeSeparator:M0.string().default(" "),credentialsEncodingMode:M0.string().valid(...Object.values(F0)).default(F0.STRICT),bodyFormat:M0.string().valid(...Object.values(j0)).default(j0.FORM),authorizationMethod:M0.string().valid(...Object.values(B0)).default(B0.HEADER)}).default(),q0=M0.object({baseUrl:M0.string().forbidden()}).unknown(!0);var z0={AuthorizationCodeSchema:M0.object({client:U0,auth:H0.keys({authorizeHost:M0.string().uri({scheme:["http","https"]}).default(M0.ref("tokenHost")),authorizePath:M0.string().default("/oauth/authorize")}),http:q0,options:G0}),ClientCredentialsSchema:M0.object({client:U0,auth:H0,http:q0,options:G0}),ResourceOwnerPasswordSchema:M0.object({client:U0,auth:H0,http:q0,options:G0})};const V0=jX(),{Client:Y0}=S0,K0=class{#h=null;#m=null;constructor(e,t){this.#h=e,this.#m=t}async getToken(e,t){const n=L0.forGrantType("password",this.#h.options,e),r=await this.#m.request(this.#h.auth.tokenPath,n.toObject(),t);return this.createToken(r)}createToken(e){return new P0(this.#h,this.#m,e)}},{ResourceOwnerPasswordSchema:Q0}=z0;var W0=class extends K0{constructor(e){const t=V0.attempt(e,Q0,"Invalid options provided to simple-oauth2");super(t,new Y0(t))}};const J0=new zz,X0=new zz,Z0="YNxT9w7GMdWvEOKa";class e1 extends hB{constructor(e,t,n){super(),Array.isArray(t)&&t.length>0&&(t=t[Math.floor(Math.random()*t.length)]),this.redis=e,this._queue=new PQ("pp-del-task",{redis:{host:e.options.host,port:e.options.port,username:e.options.username,password:e.options.password,db:e.options.db}}),this._queue.process((async e=>{const{fileId:t}=e.data;await this.delete(t)})),this.oauth2=new W0({client:{id:Z0,secret:"dbw2OtmVEeuUvIptb1Coyg"},auth:{tokenHost:"https://user.mypikpak.com",tokenPath:"/v1/auth/token"},options:{authorizationMethod:"body"}}),this._username=t?.username,this._password=t?.password,Object.assign(this._http.defaults.headers,{"accept-language":"zh-CN","user-agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/87.0.4280.88 Safari/537.36","x-client-id":Z0}),this._http.defaults.validateStatus=e=>e>=200,n&&(this._http.defaults.proxy=n)}pair(e,t,n){for(const r of t){const t=this.removeExt(r.name).toLowerCase();(e.includes(t)||t.includes(e))&&n.push(r)}}findSubs(e,t){const n=[];this.pair(this.removeExt(e).toLowerCase(),t,n),0===n.length&&n.push(...t);const r=[];for(const e of n)r.push({name:this.removeExt(e.name),ext:e.file_extension||"",fileId:e.id,hash:e.hash});return r}matchShare(e){const t=e.match(/mypikpak\.com\/s\/([\w\-]+)(?:\/([\w\-]+))?(?:[\?\w\=]+)?/i);if(t){const[e,n,r]=t;return{url:e,shareId:n,folderId:r||"",pwd:new URL("https://"+e).searchParams.get("pwd"),pic:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPAAAAFeCAYAAAC7NJK4AAAAAXNSR0IArs4c6QAAFAdJREFUeF7tnVeoJFUXRs+oqBhQzIhpFMyKWR/MD2JCHSPmjDkrKOaEEVHB7ChmcYwwzphFxZzwQdEHUVAfzCJmxZGvfvr+3X27uquqq+vevfcqmJe53X3PXt9eXenUuVNSSnMSGwQgYJLAFAQ2mRuDhkBGAIFpBAgYJoDAhsNj6BBAYHoAAoYJILDh8Bg6BBCYHoCAYQIIbDg8hg4BBKYHIGCYAAIbDo+hQwCB6QEIGCaAwIbDY+gQQGB6AAKGCSCw4fAYOgQQmB6AgGECCGw4PIYOAQSmByBgmAACGw6PoUMAgekBCBgmgMCGw2PoEEBgegAChgkgsOHwGDoEEJgegIBhAghsODyGDgEEpgcgYJgAAhsOj6FDAIHpAQgYJoDAhsNj6BBAYHoAAoYJILDh8Bg6BBCYHoCAYQIIbDg8hg4BBKYHIGCYAAIbDo+hQwCB6QEIGCaAwIbDY+gQQGB6AAKGCSCw4fAYOgQQmB6AgGECCGw4PIYOAQSmByBgmAACGw6PoUMAgekBCBgmgMCGw2PoEEBgegAChgkgsOHwGDoEEJgegIBhAghsODyGDgEEpgcgYJgAAhsOj6FDAIHpAQgYJoDAhsNj6BBAYHoAAoYJILDh8Bg6BBCYHoCAYQIIbDg8hg4BBKYHIGCYAAIbDo+hQwCB6QEIGCaAwIbDY+gQQGB6AAKGCSCw4fAYOgQQmB6AgGECCGw4PIYOAQSmByBgmAACGw6PoUMAgekBCBgmgMCGw2PoEEBgegAChgkgsOHwGDoEEJgegIBhAghsODyGDgEEpgcgYJgAAhsOj6FDAIHpAQgYJoDAhsNj6BBAYHoAAoYJILDh8Bg6BBCYHoCAYQIIbDg8hg4BBKYHIGCYAAIbDo+hQwCB6QEIGCaAwIbDY+gQQGB6AAKGCSCw4fAYOgQQmB6AgGECCGw4PIYOAQSmByBgmAACGw6PoUMAgekBCBgmgMCGw2PoEEBgegAChgkgsOHwGDoEEJgegIBhAghsODyGDgEEpgcgYJgAAhsOj6FDAIHpAQgYJoDAhsNj6BBAYHoAAoYJILDh8Bg6BBCYHoCAYQIIbDg8hg4BBKYHIGCYAAIbDo+hQwCB6QEIGCaAwIbDY+gQQGB6AAKGCSCw4fAYOgQQmB6AgGECCGw4PIYOAQSmByBgmAACGw6PoUMAgekBCBgmgMCGw2PoEEBgegAChgkgsOHwGDoEEJgegIBhAghsODyGDgEEpgcgYJgAAhsOj6FDAIHpAQgYJoDAhsNj6BBAYHoAAoYJILDh8Bg6BBCYHoCAYQIIbDg8hg4BBKYHIGCYAAIbDo+hQwCB6QEIGCaAwIbDY+gQQGB6AAKGCSCw4fAYOgQQmB6AgGECCGw4PIYOAQSmByBgmAACGw6PoUMAgekBCBgmgMCGw2PoEEBgegAChgkgsOHwGDoEELhiD2y66abpqKOOSssss0yaOXNmuvvuu9Mvv/zS99PefvvttNFGG4295scff0wHHnhgevLJJyuOIu7bTjrppHT55Zen+eeffwzCY489lnbfffdQUBC4QtwSV82z6KKLZu+eM2dOUvMcfPDBfSVG4Aqwc96CwP8DY1pgiXTBBRd0fAsPapHff/89ffHFF+njjz9OTz/9dHruuefSN998M+htYz9faKGF0gsvvJA23njjjvf8+uuv6cQTT0x33HFH7mc1KfBEsCkMsYYXIrADgXuFWLY3/vzzz/TMM8+kSy+9NL355psD377hhhumGTNmpKlTp3a89t9//832ymefffakEHgi2AyEV+MLEBiBO9rpt99+y/aeZ511Vt/DYO2BZ8+enTbffPNJvQeuQ+BWgUXZ1OjnwI9CYAQe1yRFz2X33HPPdNNNN6Ulllgi+wztfR999NF06KGHTppz4DoFLnOeP9C8ml6AwE4F/vbbbzOZdGjcvi233HJp2WWXTUsuuWRafvnl07zzztuzlSTxvffemw466KC+rbb++utnVzwXWGCB9Oqrr2a/c9DW5DlwrwZvis0gDnX8HIGdCvzZZ5+lvfbaK7377ru5fbLUUktle8vjjz8+Sezu7eeff07HHntsuu++++rotbHPmGiBJzObsqAROLDArWZZaaWV0g033JB22GGHNGWKLsj/f5s1a1baaaedyvZV39dbEHii2JQFjcAInBGQxE888URad911O3ro66+/Tvvvv396/vnny/ZW7ustCdw0m7KQERiBx3rmjDPOSJdccknHefHff/+dzj///HTZZZeV7S03AquQptiUhYzACDzWM5qU8dBDD2V74/bt2muvTaecckrZ3nIlcFNsykJGYATu6Jnuw1v9sO65tdYOoVuAhmGz+uqrpx133DGtvfbaadVVV01zzz33GPdPP/00vfPOO+nxxx9Pn3/+eSmHERiBKwt85ZVXZoeW7VsR2YcRWEcDxx13XJpnnnk6fq8kOOCAA9Ibb7zR8f+9GrzIVeheFpUVWLfYNNZddtklu1fefYGw+3folt8rr7ySzjnnnEKz4fT+YQTebLPNsluFq6yySsdQ/vnnn+yi5sknn1zqy2QiX2x6LvRENWnTAp966qnp4osvzu45t2958uY1+KgFXnPNNdNFF12Udt555zTffPOV7usffvgh+2LsN5+89aFVBdZp0gMPPJAkcftmUV6NH4FTyiZ26JG+ddZZpyPUm2++OR1zzDHjGrFJgbUn0wW21pNPrcHokFP3qjWts9dW15dbGTZ1zP767rvvMuYPP/xw3y+AKgJL3unTp6dtttmm46hA8t51113ZnnfQI6Glv5VG/AYETiltv/322fO8mqXV2vpdhW5K4O4pm62xFWnyugQuw6bX79Q86o8++ig7133//ffTV199lRZbbLG05ZZbZufGmh3XvemhEk3G0VNjeVtZgTWHXZJOmzatQ96i02dH7GHlj0fglLLzHn3rt5+r9bsP3ITAeedpReSt8xC6DJuWVDp8lnw33nhjuvPOO3Mf19SMuFtuuSXtuuuuHewlva7+33rrrbUJ3OsagnV5OYROKeXt5V588cW07bbb9mygUQssedXY3ZNLfvrpp+xCj6QatNWxBy7LRr9T49ODHmJU5HA0byKNjoi0QEIde+Arrrgie1a7ffUOyauMDz/88NJXwAexb/LnoffAmkKpvUT3/V81ni4c3XbbbY0LnHeRRXulc889N11zzTWF+mNYgauw0TJDuk302muvFRpj60UXXnhh9hx1+y2m9957L2211Va5XwJFD6HzLgDqqv2+++5rWt6we2Dd5jjhhBPSPvvsM+7Krr6ZH3nkkewcLG8b1R447zxN8qrJ9XuLblUFHpZN0fG1v07n2XpwROfGrW3QFfMiAucdQegc+7DDDsvOza1v7vbAeY/MLbzwwkmTClZeeeXsYtVcc83VM7si38yjEFjy6jxNh43t93r/+uuv7Cih7IywMo8T1smmihC9VjnRLSXNRX/qqad6fuQggfOOID755JN0yCGHjLtvXmXck+E97gSuClV73tdffz0deeSRA7+ZRyFwr4ssw9ybrOOWTotlGTZV+Gt1E+2BV1hhhbG3D1qxs5/AeRcA+903rzLuyfAeBE4paS+nB/LVFEUWuKtb4NVWW23cRI1h703WJXBZNnlNraMfTafcZJNNshlQknXFFVdMiyyySM/FFaoKrHPeXhM1Bt03nwwyVhlDaIEliQ6ZtRhdmbWZ6xT46quvzg6PW8vzKMSiS/T0C3xYgauyaY1p6623zlY10f3efiug5NVQRWA9Fqqjhe7bUrolqMUbBk0OqSLQRL/HncBqPC3xqiB7bVpWVudBL7/8cvZNreVly251Cayx6l/37Y0ia0wPGnMvgZtgo3NPXXDTeW3edYZBY9fPqwis3DXdtP1+ftH75kXGNBlf407gQVcv6wihLoF7jUVfPNqTaF3nIofzefVUvQo9DB/NYz7vvPOSLsgN2lpfJpqZ9f333yfNo1588cWHOgfu9TslsKZI1r080qD6mvo5AlcgXZfA2stoTeo99tij48pzHTOEmhY4736rapFEmkb51ltvZVMqdQTUfuTT6yp0lT3ws88+m91l6H7KyPNeGIEnWGDdNtJtje45utpDaZEB7YmLzGjqLqNJgbX31PnlGmus0TGML7/8MvvLGXqAoN9Wl8A69bj//vs7lvxt/V7t6fVgiI5uPG0IXCHNOvfA+uNmH374Ye2PuDUpcK9ld3TVVzOdup9T7oW7ToG11G+Vxy8rtMGkeAsCV4ihboF1Bbzu51SbFFhHCu0z13TYrPnQ2uMV2Xot21PlELp9UYUoEiNwkQ7res0oBNavyJuAoKmUut2kRfaKbk0K3L1ixx9//JHOPPPMdN111xUarqY1Xn/99WnBBRcc6iJW96ooeauYaJ71EUcckZ2XW98QuEKCoxJYQ8mbv9v0wwxlsHQLrIXxde7+4IMPFvoYXSHeb7/9Ol477B5YH5Y3t1w/KzJlttDgJ/hFCFwhgFEKrOFoDrD2Hu2TO/T/upilJ5L0s0HbRO6ByyzJq0kXeuqrfTEF1VaHwPqcvGeOW9NDxbrsgnqD2Df5cwSuQHvUAmtIeedwRe9rNinwSy+9lM24at/0f1obq98VdD35dPvtt6cNNthgXAp1CawPzru+UNc99wotVNtbELgCyiYE1rDyzuGK3NdsUuCrrroqnXbaaePWmbrnnnuyc+FeE1J222237Lxe92wlkv61z9yqU2CxzLu+UMc99wotVNtbELgCyqYE1jmc/jLE0UcfPW452UH3NZsUeLvttsvWFFt66aU7aEoOjVOPBGrqqqaxbrHFFtmD+muttdZYTR988EH2LLDmTLe2ugXW5+ooQSte9lpOdph77hVaqLa3IHAFlE0JrKH1uxDT1LKyRRDlHS0Meq8eNND0S+2pp06dOlKB9eF5FwmHeXRzUI2j/DkCV6DbpMD9zuH0syYWdi+CSF80Wsdr7733Hne0kPf+1lGEZmzNmDGjEYH7XV+wKDECF+nOrtc0LbB+fb8LPr3uazZ5CN2OR4vEaY+qw+G8v8igv8Qwc+bM7HVa1qbumVhFItUTU6effvq4JZWq3HMv8vtG9RrTAo8KCp87PAGtc6VHC9dbb72xB/ZbD29U+VtIw4/I5ycgsM9cqSoIAQQOEjRl+iSAwD5zpaogBBA4SNCU6ZMAAvvMlaqCEEDgIEFTpk8CCOwzV6oKQgCBgwRNmT4JILDPXKkqCAEEDhI0ZfokgMA+c6WqIAQQOEjQlOmTAAL7zJWqghBA4CBBU6ZPAgjsM1eqCkIAgYMETZk+CSCwz1ypKggBBA4SNGX6JIDAPnOlqiAEEDhI0JTpkwAC+8yVqoIQQOAgQVOmTwII7DNXqgpCAIGDBE2ZPgkgsM9cqSoIAQQOEjRl+iSAwD5zpaogBBA4SNCU6ZMAAvvMlaqCEEDgIEFTpk8CCOwzV6oKQgCBgwRNmT4JILDPXKkqCAEEDhI0ZfokgMA+c6WqIAQQOEjQlOmTAAL7zJWqghBA4CBBU6ZPAgjsM1eqCkIAgYMETZk+CSCwz1ypKggBBA4SNGX6JIDAPnOlqiAEEDhI0JTpkwAC+8yVqoIQQOAgQVOmTwII7DNXqgpCAIGDBE2ZPgkgsM9cqSoIAQQOEjRl+iSAwD5zpaogBBA4SNCU6ZMAAvvMlaqCEEDgIEFTpk8CCOwzV6oKQgCBgwRNmT4JILDPXKkqCAEEDhI0ZfokgMA+c6WqIAQQOEjQlOmTAAL7zJWqghBA4CBBU6ZPAgjsM1eqCkIAgYMETZk+CSCwz1ypKggBBA4SNGX6JIDAPnOlqiAEEDhI0JTpkwAC+8yVqoIQQOAgQVOmTwII7DNXqgpCAIGDBE2ZPgkgsM9cqSoIAQQOEjRl+iSAwD5zpaogBBA4SNCU6ZMAAvvMlaqCEEDgIEFTpk8CCOwzV6oKQgCBgwRNmT4JILDPXKkqCAEEDhI0ZfokgMA+c6WqIAQQOEjQlOmTAAL7zJWqghBA4CBBU6ZPAgjsM1eqCkIAgYMETZk+CSCwz1ypKggBBA4SNGX6JIDAPnOlqiAEEDhI0JTpkwAC+8yVqoIQQOAgQVOmTwII7DNXqgpCAIGDBE2ZPgkgsM9cqSoIAQQOEjRl+iSAwD5zpaogBBA4SNCU6ZMAAvvMlaqCEEDgIEFTpk8CCOwzV6oKQgCBgwRNmT4JILDPXKkqCAEEDhI0ZfokgMA+c6WqIAQQOEjQlOmTAAL7zJWqghBA4CBBU6ZPAgjsM1eqCkIAgYMETZk+CSCwz1ypKggBBA4SNGX6JIDAPnOlqiAEEDhI0JTpkwAC+8yVqoIQQOAgQVOmTwII7DNXqgpCAIGDBE2ZPgkgsM9cqSoIAQQOEjRl+iSAwD5zpaogBBA4SNCU6ZMAAvvMlaqCEEDgIEFTpk8CCOwzV6oKQgCBgwRNmT4JILDPXKkqCAEEDhI0ZfokgMA+c6WqIAQQOEjQlOmTAAL7zJWqghBA4CBBU6ZPAgjsM1eqCkIAgYMETZk+CSCwz1ypKggBBA4SNGX6JIDAPnOlqiAEEDhI0JTpkwAC+8yVqoIQQOAgQVOmTwII7DNXqgpCAIGDBE2ZPgkgsM9cqSoIAQQOEjRl+iSAwD5zpaogBBA4SNCU6ZMAAvvMlaqCEEDgIEFTpk8CCOwzV6oKQgCBgwRNmT4JILDPXKkqCAEEDhI0ZfokgMA+c6WqIAQQOEjQlOmTAAL7zJWqghBA4CBBU6ZPAgjsM1eqCkIAgYMETZk+CSCwz1ypKggBBA4SNGX6JIDAPnOlqiAEEDhI0JTpkwAC+8yVqoIQQOAgQVOmTwII7DNXqgpC4D+zvU21cb4N7gAAAABJRU5ErkJggg=="}}return null}traverse(e,t,n,r){for(const s of e.files||[])/\#folder/i.test(s.kind)?t.push(s):/\#file/i.test(s.kind)&&(/video|audio/i.test(s.file_category)?n.push(s):this.subExt.some((e=>s.file_extension.endsWith(e)))&&r.push(s))}async listFolder(e,t,n,r,s,i=""){const o={parent_id:r,share_id:n,thumbnail_size:"SIZE_LARGE",limit:"100",pass_code_token:s};i&&(o.page_token=i);const a=await this.fetch("https://api-drive.mypikpak.com/drive/v1/share/detail",{params:o}),c=[];this.traverse(a,c,e,t),a.next_page_token&&""!==a.next_page_token&&await this.listFolder(e,t,n,r,s,a.next_page_token);for(const r of c)await this.listFolder(e,t,n,r.id,s)}async listFile(e,t,n,r,s,i="",o="",a){const c={share_id:n,pass_code:s,thumbnail_size:"SIZE_LARGE",limit:"100"};i&&(c.pass_code_token=i),o&&(c.page_token=o);const l=await this.fetch("https://api-drive.mypikpak.com/drive/v1/share",{params:c});if(a&&Object.assign(a,{vod_pic:l.user_info?.avatar,vod_name:l.title||l.user_info?.nickname,pass_code_token:l.pass_code_token}),r)return void await this.listFolder(e,t,n,r,l.pass_code_token);const u=[];this.traverse(l,u,e,t),l.next_page_token&&""!==l.next_page_token&&await this.listFile(e,t,n,null,s,l.pass_code_token,l.next_page_token);for(const r of u)await this.listFolder(e,t,n,r.id,l.pass_code_token)}async getVod(e){const t=this.matchShare(e);if(!t)return null;const{url:n,shareId:r,folderId:s,pwd:i}=t,o=[],a=[],c={};await this.listFile(o,a,r,s,i,null,null,c),o.sort(((e,t)=>e.name.localeCompare(t.name,void 0,{numeric:!0,sensitivity:"base"})));const l=["PikPak"],u=[],p=[];for(const e of o){const t={shareId:r,fileId:e.id,passCodeToken:c.pass_code_token||"",hash:e.hash,subs:this.findSubs(e.name,a)},n=""+vj.enc.Utf8.parse(JSON.stringify(t));u.push(`${this.removeExt(e.name)}$${n}`)}for(let e=0;l.length>e;e++)p.push(u.join("#"));return Object.assign(c,{vod_id:n,vod_content:e,vod_play_from:l.join("$$$"),vod_play_url:p.join("$$$"),type_name:"PikPak"})}async play(e,t,n){const r=vj.enc.Utf8.stringify(vj.enc.Hex.parse(e)),{shareId:s,fileId:i,passCodeToken:o,hash:a,subs:c}=JSON.parse(r),l=e=>{const t=new URL(n);return t.searchParams.append("do","pikpak"),t.searchParams.append("shareId",s),t.searchParams.append("passCodeToken",o),t.searchParams.append("fileId",i),t.searchParams.append("hash",a),t.searchParams.append("action",e),""+t};return{url:["转码",l("transcode"),"原画",l("raw")],extra:{subt:((e,t,r)=>{const s=[];for(const i of r){const{fileId:r,hash:o}=i,a=new URL(n);a.searchParams.append("do","pikpak"),a.searchParams.append("shareId",e),a.searchParams.append("passCodeToken",t),a.searchParams.append("fileId",r),a.searchParams.append("hash",o),s.push(""+a)}return s})(s,o,c)},header:{"user-agent":this._http.defaults.headers["user-agent"]},parse:0,jx:0}}async proxy({shareId:e,fileId:t,passCodeToken:n,hash:r,action:s},i,o){let a;a="transcode"===s?await this.getPreviewUrl({shareId:e,fileId:t,passCodeToken:n,hash:r}):await this.getDownloadUrl({shareId:e,fileId:t,passCodeToken:n,hash:r});const c=await this._http.get(a,{responseType:"stream",headers:o});i.raw.writeHead(c.status,c.headers),c.data.pipe(i.raw),c.data.on("end",(()=>{i.raw.end()}))}async copy(e,t,n,r){const s=await X0.acquire();let i;try{const s=`pikpak_file_${this._username}_${t}`;if(i=await this.redis.get(s),!i){const o={parent_id:"",share_id:e,pass_code_token:n,ancestor_ids:[],file_ids:[t],specify_parent_id:!0};await this.fetchToken("https://api-drive.mypikpak.com/drive/v1/share/restore",{method:"post",data:o}),await this.delay(1500);const a={parent_id:"",filters:JSON.stringify({phase:{eq:"PHASE_TYPE_COMPLETE"},trashed:{eq:!1}}),with_audit:!0,thumbnail_size:"SIZE_SMALL",limit:500},c=await this.fetchToken("https://api-drive.mypikpak.com/drive/v1/files",{params:a});if(i=c.files.find((e=>/\#file/i.test(e.kind)&&e.hash===r))?.id,!i)throw Error("转存分享失败");try{const e=14400;await this.redis.set(s,i,"EX",e),await this._queue.add({fileId:i},{delay:1e3*e,attempts:3,backoff:1e4,removeOnComplete:!0,removeOnFail:!0})}catch(e){}}}finally{s()}return i}async delete(e){const t={ids:[e]};await this.fetchToken("https://api-drive.mypikpak.com/drive/v1/files:batchDelete",{method:"post",data:t})}async getPreviewUrl({shareId:e,fileId:t,passCodeToken:n,hash:r}){const s=await this.copy(e,t,n,r);return(await this.getFileInfo(s)).web_content_link}async getDownloadUrl({shareId:e,fileId:t,passCodeToken:n,hash:r}){const s=await this.copy(e,t,n,r),i=await this.getFileInfo(s),o=i.links?.["application/octet-stream"];return o?o.url:i.web_content_link}async sharePreview(e,t,n){const r={share_id:e,file_id:t,pass_code_token:n},s=(await this.fetch("https://api-drive.mypikpak.com/drive/v1/share/file_info",{params:r})).file_info||{},{urls:i}=this.getPlayUrls(s);return i}async _auth(e,t){const n={username:e,password:t};return(await this.oauth2.getToken(n)).token}async _refresh(e){const t=this.oauth2.createToken({refresh_token:e});return(await t.refresh()).token}async getAccessToken(){if(!this._username||!this._password)throw Error("账号密码不能为空！");const e="pikpak_access_token_"+this._username;let t=await this.redis.get(e);if(!t){const n="pikpak_refresh_token_"+this._username,r=await this.redis.get(n);let s;if(r)try{s=await this._refresh(r)}catch{s=await this._auth(this._username,this._password)}else s=await this._auth(this._username,this._password);t=s.access_token,await this.redis.set(n,s.refresh_token,"EX",2592e3),await this.redis.set(e,t,"EX",s.expires_in)}return t}async fetchToken(e,t={}){const n=await J0.acquire();let r;try{r=await this.getAccessToken()}finally{n()}return t.headers=Object.assign(t.headers||{},{authorization:"Bearer "+r}),await this.fetch(e,t)}async fetch(e,t={}){const n=(await this._http(e,t)).data;if(n.error_code)throw Error(n.error_description||n.error||""+n.error_code);return n}async getFileInfo(e){const t="https://api-drive.mypikpak.com/drive/v1/files/"+e;return await this.fetchToken(t,{params:{_magic:"2021",thumbnail_size:"SIZE_LARGE"}})}getPlayUrls(e){const t=[];let n;const r=e.links?.["application/octet-stream"];r&&(t.push("RAW"),t.push(r.url),n||(n=kj(r.expire).unix()));for(const r of e.medias||[])r.link?.url&&(t.push(r.media_name||r.resolution_name||"other"),t.push(r.link.url),n||(n=kj(r.link.expire).unix()));return{urls:t,expiredAt:n}}getType(e){return/\#folder/i.test(e.kind)?0:/\#file/i.test(e.kind)&&/video|audio/i.test(e.file_category)?10:1}getSize(e){let t=parseInt(e.size)||0;if(0>=t)return"";let n="";return t>1099511627776?(t/=1099511627776,n="TB"):t>1073741824?(t/=1073741824,n="GB"):t>1048576?(t/=1048576,n="MB"):(t/=1024,n="KB"),t.toFixed(2)+n}async getPath(e=""){let t="/pikpakDrive/files/"+this._username,n="";if(e=e.split("/").filter(Boolean).join("/")){t=`${t}/${e}`;const r=await this.db.getObjectDefault(t);if(!r)throw Error("未找到 "+e);n=r._id}const r=[];return await(async(n,r,s="")=>{const i={parent_id:r,thumbnail_size:"SIZE_MEDIUM",with_audit:"true",limit:500,filters:'{"phase":{"eq":"PHASE_TYPE_COMPLETE"},"trashed":{"eq":false}}',page_token:s},o=await this.fetchToken("https://api-drive.mypikpak.com/drive/v1/files",{params:i}),a={_id:r};for(const t of o.files||[])n.push({name:t.name,path:`${r?"/"+e:""}/${t.name}`,thumb:t.thumbnail_link||t.icon_link,type:this.getType(t),size:this.getSize(t),remark:""}),a[t.name]={_id:t.id};await this.db.push(""+t,a)})(r,n),r}async getFile(e){e=e.split("/").filter(Boolean).join("/");let t=`/pikpakDrive/files/${this._username}/${e}`;const n=await this.db.getObjectDefault(t);if(!n)throw Error("未找到 "+e);const r=n._id,s=await this.getFileInfo(r),{urls:i}=this.getPlayUrls(s);return{name:s.name,url:i,size:this.getSize(s),remark:"",header:{"user-agent":this.http.defaults.headers["user-agent"]},extra:{subt:[]}}}}const t1={"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) uc-cloud-drive/2.5.20 Chrome/100.0.4896.160 Electron/18.3.5.4-b478491100 Safari/537.36 Channel/pckk_other_ch",Referer:"https://drive.uc.cn"},n1="UCBrowser",r1=new zz,s1=new zz;class i1 extends hB{constructor(e,t){super(),Array.isArray(t)&&t.length>0&&(t=t[Math.floor(Math.random()*t.length)]),this.apiUrl="https://pc-api.uc.cn/1/clouddrive",this.redis=e,this.setCookie(t),Object.assign(this._http.defaults.headers,t1),this._http.defaults.validateStatus=e=>e>=200,this._queue=new PQ("uc-del-task",{redis:{host:e.options.host,port:e.options.port,username:e.options.username,password:e.options.password,db:e.options.db}}),this._queue.process((async e=>{const{fileId:t}=e.data;await this.delete(t)}))}pair(e,t,n){for(const r of t){const t=this.removeExt(r.file_name).toLowerCase();(e.includes(t)||t.includes(e))&&n.push(r)}}findSubs(e,t){const n=[];this.pair(this.removeExt(e).toLowerCase(),t,n),0===n.length&&n.push(...t);const r=[];for(const e of n)r.push({name:this.removeExt(e.file_name),fileId:e.fid,fidToken:e.share_fid_token});return r}matchShare(e){const t=e.match(/drive\.uc\.cn\/s\/([\w]+)(?:[\?\w\=]+)?/i);if(t){const[e,n]=t;return{url:e,shareId:n,folderId:"0",pic:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPAAAAFeCAYAAAC7NJK4AAAAAXNSR0IArs4c6QAAEFFJREFUeF7t3XvQbfUcx/HvSTfdlFSi3IqDFCKFCiUzKieipBRNLpXGJYYG09CMS+4Zl0TSRS5jUEpTTSFJiTHd5JiUS0pIN1E6yfxscZ6zn+fp2Xuvxfmc89ozxh8967c/+/35vs9ea+2915p3z8F1T3kggEAkgXkEjuxNaAT+RYDABgGBYAIEDi5PdAQIbAYQCCZA4ODyREeAwGYAgWACBA4uT3QECGwGEAgmQODg8kRHgMBmAIFgAgQOLk90BAhsBhAIJkDg4PJER4DAZgCBYAIEDi5PdAQIbAYQCCZA4ODyREeAwGYAgWACBA4uT3QECGwGEAgmQODg8kRHgMBmAIFgAgQOLk90BAhsBhAIJkDg4PJER4DAZgCBYAIEDi5PdAQIbAYQCCZA4ODyREeAwGYAgWACBA4uT3QECGwGEAgmQODg8kRHgMBmAIFgAgQOLk90BAhsBhAIJkDg4PJER4DAZgCBYAIEDi5PdAQIbAYQCCZA4ODyREeAwGYAgWACBA4uT3QECGwGEAgmQODg8kRHgMBmAIFgAgQOLk90BAhsBhAIJkDg4PJER4DAZgCBYAIEDi5PdAQIbAYQCCZA4ODyREeAwGYAgWACBA4uT3QECGwGEAgmQODg8kRHgMBmAIFgAgQOLk90BAhsBhAIJkDg4PJER4DAZgCBYAIEDi5PdAQIbAYQCCZA4ODyREeAwGYAgWACBA4uT3QECGwGEAgmQODg8kRHgMBmAIFgAgQOLk90BAhsBhAIJkDg4PJER4DAZgCBYAIEDi5PdAQIbAYQCCZA4ODyREeAwGYAgWACBA4uT3QECGwGEAgmQODg8kRHgMBmAIFgAgQOLk90BAhsBhAIJkDg4PJER4DAZgCBYAIEDi5PdAQIbAYQCCZA4ODyREeAwGYAgWACBA4uT3QECGwGEAgmQODg8kRHgMBmAIFgAgQOLk90BAhsBhAIJkDg4PJER4DAZgCBYAIEDi5PdAQIbAYQCCZA4ODyREeAwGYAgWACBA4uT3QECGwGEAgmQODg8kRHgMBmAIFgAgQOLk90BAhsBhAIJkDg4PJER4DAZgCBYAIEDi5PdAQIbAYQCCZA4ODyREeAwGYAgWACBA4uT3QECGwGEAgmQODg8kRHgMBmAIFgAgQOLk90BAhsBhAIJkDg4PJER4DAZgCBYAIEDi5PdAQIbAYQCCZA4ODyREeAwGYAgWACBA4uT3QECGwGEAgmQODg8kRHgMBmAIFgAgQOLk90BAhsBhAIJkDg4PJER4DAZgCBYAIEDi5PdAQIbAYQCCZA4ODyREeAwGYAgWACBA4uT3QECGwGEAgmQODg8kRHgMBmAIFgAgQOLm+pjT5/h6oHPHQQ7+67qn55ftXN1y61cZODEbiP9ha8t2qdjaaufPeiqktPGfyv68c2r6xq0iz5uO7yqrM/0PWz/Xe99pxP3qPqUc+oWmfjqlXXrFphxZmfb9GdVXfcVnXjNVW//WnVpd+suuKM/vItBysTuI+S33lF1YaPn7ryor9XnX1k1WmHd/+M+3yu6hkHDK+78Jyqjz+32+drr2uHQ6uesEvVmhtUzZs3/vr33FN1+41VV55Z9e0jqv7wi/HXWk63JHAfxS+LAq+9UdXuH6zafEHVyqt1S+3m31WdsF/VwnO7XXc5WI3AfZS8rAm846FVO72tas31+6BVReCxuRJ4bHSzbLisCNyOafc5tupJL5r92HZShgQemyCBx0a3jAvcjnX3Orpqk23v+zi3nZy66bdV111W9euLq25a4ozzKqtXPWLrqg03q3rQJlWrrTN1TQKPPYUEHhvdMixwk3f/k6sessXM8rYTUDdeXXXB56suOmG0j4kevlXVdgcNToStsV7VLdc5Bh5zDgk8JrhZN0vehW67za/+etX8HWeW97Y/VJ37kaqzjpyc3o5vrtrs+VXffnfVVd+ffL3lbAUC91F4ssD7HV+11T5VK9xvmEx7173qvKqvHFx1/c/6IGfNEQkQeERgc/rzVIGfd1jVzodXrXT/4Zf5j7sHX7w4cf/BlzE8lgoCBO6jhkSBH7nN4Lh33UdOL+9Pvlz15YPI28e8TLAmgSeAN+OmiQLv+4WqrfetmrfC8Mu6+gdVn3w+efuYlQnXJPCEAKfdPE3g9p3m/U6oWvvfP0BY/EW1M8RffJXvLPcxJx2sSeAOIA4tkSbwXp+u2vY1w+++7bj3+0dXffWQPihZswMCBO4AYrTA7WOjt/xw8CWLJR/tV0PH7V11zYV9ULJmBwQI3AHEaIHbTxH3OKpq1bWmvoz2kdGFx1WdNM2vnPpgZs2xCBB4LGz3sVHSLvSen6ja/qDh3ee/3jTYdb745D4IWbMjAgTuCOSUZZIEfsO5VY95zjCF66+o+tDTnXnuYz46XJPAHcL8z1IpAq//mKqDT69ab9NhCpeeWvWZ3fqgY80OCRC4Q5hxAm/+gqp2NY8lf+f7j0VV3zmq6utv6YOONTskQOAOYcYJ/LR9q176ycG1rBZ/3PW3qtPf1e/1tPrgvhyuSeA+Sk/Zhd71iMGVNlZceSqF9l3nr7yu6kcn9kHHmh0SIHCHMOPegQncR/v/0zUJ3Afu9HdgV8joYyp6WZPAfWBNF7j9YL99//myb/VBx5odEiBwhzDtQvcB05qzESBwH/OR/g7sJFYfU9HLmgTuA2uKwM86pOqF769aefWpFPq8i0QfvJfjNQncR/kpAm+5x+DSsas/cJjCBccOjoM9lmoCBO6jnhSB2+VdD/hq1bqPGKZw9QVVH35mH3Ss2SEBAncIc9aTWO3neT/4bNWXXtv9Mx5yZtXjnjfeu+hhP6naeMvhbX2U1H1PPaxI4B6g1ky/8Lnw+KoTX9n9M073fHP9B+Plx1Zts//wNaDvuqPqjCOqznxf93mt2BkBAneGcrGFZnpH7GO3tH2P+a0/qtrgseOdiJrpRFZbrV1o/aPb90HImh0RIHBHIKcs87LPVD3z1cPvajf+qurYPQf3D+rqMdMviub6UVD7SeGBp1ZtMH840d9vrzrl7VXf/XhXaa3TMQECdwz0X8vt9NaqXd41fIH0JsQ3D6v63ie6e9aZvs88yj8W7XrQT9lr+lup/O6Sqs/t6ebb3TXW6UoE7hTnvxeb6V2x/efLT6/69K7dPeubzqvadLvh9UbZXW/3Jtr3uKo1Nxhep12Z8uIvVp3wiu4yW6kzAgTuDOUSC810drd9z/hLB1Zd8o3Jn3mrvavaNa3a7ToXf4zzg/zZ3oXbCa12M7NT3zF5Zit0SoDAneJcbLGZLhbX/mThuVXHvHCy6021k1evO6PqUdN8VnvbDYN7GF1xxtxf3Wy3VmmrtGPqcz48uIugx1JDgMB9VdH3bulMdxFsHx9dflrV0QtGf2Wz3dysrda+YnnxSVVfe+Nk//gsnmztjaraIcfCcxxnj95YEXgMaHPeZLb7DbVjyyvPqjr5NaPdHLsN/N7HDL64Md0tQCfdRZ/t9qLthd97Y+/2+XD7uuW4j/Y62sm+p76satGdbvA9JkcCjwluTpvd125pW+Qvf6q69JTBMeZs99xtA/+c11dt/Yrhi9DdG6aLW6HM5Qbf94p8w88H2duld+Zyv+ANH1+1+YKqLXareugWVSuvNkjuW19zGqfp/ojAY6Ob44bbHVi12/uq7r/27Bs0+W7/U9WtN1Td9JuqdmH1VdYY3O5zjQdVrfXgqhVWnHmN9s7YdkM/u/vku7dN4ld9reqxO03/0dKSKVr2v91cdcv1g/9vt2Rpj3ZybZ2HVa20atVaGw5ez7x5w6+BwHMcpuE/I/DY6EbYcMF7qnY4dDDIfTyavO3LISftP7d3wrlkaBK/5GNVW718+KJ3c9l+lL8h8Ci0pvwtgcdGN+KG7XivnSRa8iOfEZcZ+vP2kdGVZ49+LD3X593uoKqdDx/sAfT1IPDYZAk8NroxNnz0s6t2/2DVRk+e/gTUKEu2d932cdF3PlZ11pGjbDn637bj7/aPT/vcuct/gNpruPnaqvOPqfruUZPv+o/+yuK3IPD/o8Invqhq+4Or2kmudlw4yqO9496wcHDi6LxP/W+Hvu1Wt9ztzPH688c7JGjStuP73/y46qLj3TxtlO6n+VsCTwhw4s2f9OKq+TsMzsq2E11tV3XFVQbLNlnbiaE7b6v6/ZVVvzy/6mdnjvax08QBZ1igybzZLoOvcU6XvW12xy1Vt/+56o5bq/54VdW1l1T9/KzujtP7em1B6xI4qCxREViSAIHNBALBBAgcXJ7oCBDYDCAQTIDAweWJjgCBzQACwQQIHFye6AgQ2AwgEEyAwMHliY4Agc0AAsEECBxcnugIENgMIBBMgMDB5YmOAIHNAALBBAgcXJ7oCBDYDCAQTIDAweWJjgCBzQACwQQIHFye6AgQ2AwgEEyAwMHliY4Agc0AAsEECBxcnugIENgMIBBMgMDB5YmOAIHNAALBBAgcXJ7oCBDYDCAQTIDAweWJjgCBzQACwQQIHFye6AgQ2AwgEEyAwMHliY4Agc0AAsEECBxcnugIENgMIBBMgMDB5YmOAIHNAALBBAgcXJ7oCBDYDCAQTIDAweWJjgCBzQACwQQIHFye6AgQ2AwgEEyAwMHliY4Agc0AAsEECBxcnugIENgMIBBMgMDB5YmOAIHNAALBBAgcXJ7oCBDYDCAQTIDAweWJjgCBzQACwQQIHFye6AgQ2AwgEEyAwMHliY4Agc0AAsEECBxcnugIENgMIBBMgMDB5YmOAIHNAALBBAgcXJ7oCBDYDCAQTIDAweWJjgCBzQACwQQIHFye6AgQ2AwgEEyAwMHliY4Agc0AAsEECBxcnugIENgMIBBMgMDB5YmOAIHNAALBBAgcXJ7oCBDYDCAQTIDAweWJjgCBzQACwQQIHFye6AgQ2AwgEEyAwMHliY4Agc0AAsEECBxcnugIENgMIBBMgMDB5YmOAIHNAALBBAgcXJ7oCBDYDCAQTIDAweWJjgCBzQACwQQIHFye6AgQ2AwgEEyAwMHliY4Agc0AAsEECBxcnugIENgMIBBMgMDB5YmOAIHNAALBBAgcXJ7oCBDYDCAQTIDAweWJjgCBzQACwQQIHFye6AgQ2AwgEEyAwMHliY4Agc0AAsEECBxcnugIENgMIBBMgMDB5YmOAIHNAALBBAgcXJ7oCBDYDCAQTIDAweWJjgCBzQACwQQIHFye6AgQ2AwgEEyAwMHliY4Agc0AAsEECBxcnugIENgMIBBMgMDB5YmOAIHNAALBBAgcXJ7oCBDYDCAQTIDAweWJjgCBzQACwQQIHFye6AgQ2AwgEEyAwMHliY4Agc0AAsEECBxcnugIENgMIBBMgMDB5YmOAIHNAALBBAgcXJ7oCBDYDCAQTIDAweWJjgCBzQACwQQIHFye6AgQ2AwgEEyAwMHliY4Agc0AAsEECBxcnugIENgMIBBMgMDB5YmOAIHNAALBBAgcXJ7oCBDYDCAQTIDAweWJjgCBzQACwQQIHFye6AgQ2AwgEEyAwMHliY4Agc0AAsEECBxcnugIENgMIBBMgMDB5YmOAIHNAALBBAgcXJ7oCPwTMPWp6YE+NcIAAAAASUVORK5CYII="}}return null}async listFile(e,t,n,r,s,i){const o=this.apiUrl+"/share/sharepage/detail",a={pr:n1,fr:"pc",pwd_id:t,stoken:e,pdir_fid:n,force:0,_page:i=i||1,_size:200,_sort:"file_type:asc,file_name:asc"},c=await this.fetch(o,{params:a}),l=[];for(const e of c.data?.list||[])if(!0===e.dir)l.push(e);else if(!0===e.file)if("video"===e.obj_category||"audio"===e.obj_category||e.video_width){if(5242880>e.size)continue;r.push(e)}else this.subExt.some((t=>e.file_name.endsWith(t)))&&s.push(e);Math.ceil((c.metadata?._total||0)/200)>i&&await this.listFile(e,t,n,r,s,i+1);for(const n of l)await this.listFile(e,t,n.fid,r,s)}async getVod(e){const t=this.matchShare(e);if(!t)return null;const{url:n,shareId:r,folderId:s}=t,i=await this.getShareToken(r),o=[],a=[];await this.listFile(i,r,s,o,a),o.sort(((e,t)=>e.file_name.localeCompare(t.file_name,void 0,{numeric:!0,sensitivity:"base"})));const c=["UC"],l=[],u=[];for(const e of o){const t={shareId:r,sToken:i,fileId:e.fid,fidToken:e.share_fid_token,subs:this.findSubs(e.file_name,a),type:e.obj_category},n=""+vj.enc.Utf8.parse(JSON.stringify(t));l.push(`${this.removeExt(e.file_name)}$${n}`)}for(let e=0;c.length>e;e++)u.push(l.join("#"));return{vod_id:n,vod_content:e,vod_play_from:c.join("$$$"),vod_play_url:u.join("$$$"),type_name:"UC网盘"}}async play(e,t,n){const r=vj.enc.Utf8.stringify(vj.enc.Hex.parse(e)),{shareId:s,sToken:i,fileId:o,fidToken:a,subs:c,type:l}=JSON.parse(r);let u,p;return"audio"===l?u=await this.getDownloadUrl({shareId:s,stoken:i,fileId:o,fidToken:a}):(u=await this.getDownloadUrl({shareId:s,stoken:i,fileId:o,fidToken:a}),p=((e,t,r)=>{const s=[];for(const i of r){const{fileId:r,fidToken:o}=i,a=new URL(n);a.searchParams.append("do","uc"),a.searchParams.append("shareId",e),a.searchParams.append("stoken",t),a.searchParams.append("fileId",r),a.searchParams.append("fidToken",o),s.push(""+a)}return s})(s,i,c)),{url:u,extra:{subt:p},header:Object.assign({Cookie:Object.entries(this._cookie).map((([e,t])=>`${e}=${t}`)).join("; ")},t1),parse:0,jx:0}}async proxy({shareId:e,fileId:t},n){const r=await this.getDownloadUrl({shareId:e,fileId:t}),s=await this._http.get(r,{responseType:"stream"});n.raw.writeHead(s.status,{"Content-Type":s.headers.getContentType()}),s.data.pipe(n.raw),s.data.on("end",(()=>{n.raw.end()}))}async copy(e,t,n,r){const s=async(e,t=0)=>{const n={pr:n1,fr:"pc",uc_param_str:"",task_id:e,retry_index:t};let r=await this.fetch(this.apiUrl+"/task",{params:n});return(r.data?.save_as?.save_as_top_fids||[]).length>0?r.data.save_as.save_as_top_fids[0]:null},i=await s1.acquire();let o;try{const i=`uc_file_${this._cookie.__uid||this._cookie.__kps||"default"}_${n}`;if(o=await this.redis.get(i),!o){const a={pr:n1,fr:"pc",uc_param_str:""},c={fid_list:[n],fid_token_list:[r],to_pdir_fid:"0",pwd_id:e,stoken:t,pdir_fid:"0",scene:"link"};let l=await this.fetch(this.apiUrl+"/share/sharepage/save",{method:"post",params:a,data:c}),u=0;for(;5>u;){const e=await s(l.data.task_id,u);if(null!==e){o=e;break}u++,await this.delay(1e3)}if(!o)throw Error("转存分享失败");try{const e=14400;await this.redis.set(i,o,"EX",e),await this._queue.add({fileId:o},{delay:1e3*e,attempts:3,backoff:1e4,removeOnComplete:!0,removeOnFail:!0})}catch(e){}}}finally{i()}return o}async delete(e){const t={pr:n1,fr:"pc",uc_param_str:""},n={action_type:2,filelist:[e],exclude_fids:[]};await this.fetch(this.apiUrl+"/file/delete",{method:"post",params:t,data:n})}async getVideoPreviewPlayInfo(e,t,n,r){const s=await this.copy(e,t,n,r);if(!s)throw Error("转存分享失败");const i=this.apiUrl+"/file/v2/play",o={pr:n1,fr:"pc",uc_param_str:""},a={fid:s,resolutions:"normal,low,high,super,2k,4k",supports:"fmp4,m3u8"};return(await this.fetch(i,{method:"post",params:o,data:a})).data.video_list}async getDownloadUrl({shareId:e,stoken:t,fileId:n,fidToken:r}){const s=await this.copy(e,t,n,r);if(!s)throw Error("转存分享失败");const i=this.apiUrl+"/file/download",o={pr:n1,fr:"pc",uc_param_str:""},a={fids:[s]};return(await this.fetch(i,{method:"post",params:o,data:a})).data[0].download_url}async getShareToken(e){const t="uc_share_token_"+e;let n=await this.redis.get(t);if(!n){const r=this.apiUrl+"/share/sharepage/token",s={pr:n1,fr:"pc",uc_param_str:""},i={pwd_id:e,passcode:""};n=(await this.fetch(r,{method:"post",params:s,data:i})).data.stoken,await this.redis.set(t,n,"EX",7200)}return n}async fetch(e,t={}){const n=await r1.acquire();let r;try{r=await this._http(e,t).catch((e=>e.response||{status:500,data:{code:e.code,message:e.message}}))}finally{n()}const s=r.data||{};if(0!==s.code||200!==s.status)throw Error(s.message||"未知错误");return s}}const o1=DI({logger:{level:"development"!==process.env.NODE_ENV?"warn":"info",formatters:{level:e=>({level:e.toUpperCase()}),bindings:e=>({})},timestamp:qa.isoTime}});o1.register(vD,{host:process.env.REDIS_HOST??"localhost",port:process.env.REDIS_PORT??6379,username:process.env.REDIS_USERNAME,password:process.env.REDIS_PASSWORD,db:process.env.REDIS_DB??0,keyPrefix:process.env.REDIS_KEY_PREFIX??"vod:"}),o1.register(eR,{validate(e,t,n,r,s){"abc"===e&&"123"===t?s():s(Error("Unauthorized"))}}),o1.setErrorHandler(((e,t,n)=>{if(401===e.statusCode)return n.code(401).send({message:"Unauthorized"});o1.log.error(e),n.code(500).send({url:t.url,query:t.query,body:t.body,message:e.message??"Something went wrong"})})),o1.addHook("onReady",(()=>{const{config:e,redis:t}=o1;e.parse&&Array.isArray(e.parse)&&gB.push(...e.parse),e.drive&&(mB.ali=new FQ(t,e.drive.ali),mB.quark=new GQ(t,e.drive.quark),mB.xunlei=new XQ(t,e.drive.xunlei),mB.pikpak=new e1(t,e.drive.pikpak,e.proxy),mB.uc=new i1(t,e.drive.uc))})),(async()=>{await(async e=>{try{const t=await k.readFile(process.env.CONFIG??"/app/vod/config.json");e.config=JSON.parse(t)}catch(t){e.config={},e.log.warn(t.message??"加载配置文件失败")}for(const t of e.config?.iptv||[]){if(!t.url)continue;const e=new Fz(t);jz.push({meta:e.meta,api:async t=>{t.get("",((t,n)=>e.spider(t))),t.post("/init",((t,n)=>e.init(t.server))),t.post("/home",((t,n)=>e.home(t.body))),t.post("/category",((t,n)=>e.category(t.body))),t.post("/detail",((t,n)=>e.detail(t.body))),t.post("/play",((t,n)=>e.play(t.body))),t.post("/search",((t,n)=>e.search(t.body)))}})}for(const t of e.config?.telegram||[]){const e=new $z(t.key,t.name);jz.push({meta:e.meta,api:async t=>{t.get("",((t,n)=>e.spider(t))),t.post("/init",((t,n)=>e.init(t.server))),t.post("/home",((t,n)=>e.home(t.body))),t.post("/category",((t,n)=>e.category(t.body))),t.post("/detail",((t,n)=>e.detail(t.body))),t.post("/play",((t,n)=>(t.body.proxyUrl=_j(t),e.play(t.body)))),t.post("/search",((t,n)=>e.search(t.body)))}})}const t=[],n={video:{sites:[]},read:{sites:[]},comic:{sites:[]},music:{sites:[]},pan:{sites:[]},color:e.config.color||[]};jz.forEach((r=>{const s=Object.assign({},r.meta);s.api=`/spider/${s.key}/${s.type}`,s.key="nodejs_"+s.key;const i=s.type;if(10>i?n.video.sites.push(s):i>=10&&20>i?n.read.sites.push(s):i>=20&&30>i?n.comic.sites.push(s):i>=30&&40>i?n.music.sites.push(s):i>=40&&50>i&&n.pan.sites.push(s),3===s.type){const e=Object.assign({},s);e.name+="|T4",e.type=4,1===s.indexs?(e.searchable=0,e.quickSearch=0,e.filterable=0):(e.searchable=1,e.quickSearch=1),t.push(e)}e.register(r.api,{prefix:s.api}),e.log.info("Register spider: "+s.api)})),e.get("/",(async(e,t)=>{const{redis:n}=e.server;try{return await Uz(n)}catch(e){t.code(400).send({message:e.message})}})),e.get("/tv",(async(e,n)=>{const{redis:r}=e.server,{key:s}=e.query;let i;try{i=await Uz(r)}catch{i={}}return delete i.spider,i.sites=[],i.lives=[],i.lives.push("home"===s?{name:"IPTV",url:"http://evl.pub:2080/iptv.m3u",playerType:2}:{name:"IPTV",url:"https://mirror.ghproxy.com/https://raw.githubusercontent.com/fanmingming/live/main/tv/m3u/ipv6.m3u",playerType:2}),t.forEach((t=>{const n=Object.assign({},t);n.api=`${Ej(e)}://${e.hostname}${t.api}`,i.sites.push(n)})),i})),e.get("/config",(async(e,t)=>n)),e.after((()=>{e.get("/:name.:ext",{preValidation:e.basicAuth},(async(e,t)=>{const{name:n,ext:r}=e.params,s=u.join("/app/dist",`${n}.${r}`);if(!c.existsSync(s))return t.code(404).send({message:s+" not found",error:"Not Found"});const i=c.createReadStream(s);t.raw.writeHead(200,{"Content-Type":"text/plain;charset=UTF-8","Cache-Control":"no-store",Pragma:"no-cache",Expires:"0"}),i.pipe(t.raw),i.on("end",(()=>{t.raw.end()}))}))})),e.get("/test",(async(e,t)=>({base:_j(e)}))),e.get("/proxy",(async(e,t)=>{const n=e.query,r=mB[n.do];if(!r)return n;await r.proxy(n,t,e.headers)}))})(o1);const e=process.env.HTTP_PORT??3e3;return await o1.listen({host:"0.0.0.0",port:e}),e})().catch((e=>{o1.log.error(e),process.exit(1)}));
